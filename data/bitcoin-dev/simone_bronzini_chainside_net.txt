
@_date: 2017-08-29 12:19:10
@_author: Simone Bronzini 
@_subject: [bitcoin-dev] BIP proposal for Lightning-oriented multiaccount 
Hash: SHA256
Hi all,
last month we started looking for feedback (here and on other channels)
about a proposal for a new structure to facilitate the management of
different multisig accounts under the same master key, avoiding key
reuse but still allowing cosigners to independently generate new
addresses. While previously multiaccount multisig wallets were little
used, now that LN is becoming a reality it is extremely important to
have a better multiaccount management method to handle multiple payment
Please have a look at the draft of the BIP at the link below:
Any feedback is highly appreciated, but in particular we would like to
collect opinions about the following issues:
1. coin_type level:
this level is intended to allow users to manage multiple
cryptocurrencies or forks of Bitcoin using the same masterkey (similarly
to BIP44). We have already received some legit objections that, since we
are talking about a Bitcoin Improvement Proposal,  it shouldn't care
about alt-coins. While we can agree with such objections, we also
believe that having a coin_type level improves interoperability with
muti-currency wallets (which is good), without any major drawback.
Moreover, even a Bitcoin maximalist may hold multiple coins for whatever
reason (short term speculation, testing, etc).
2. SegWit addresses:
since mixing SegWit and non-SegWit addresses on the same BIP44 structure
could lead to UTXOs not being completely recognised by old wallets,
BIP49 was proposed to separate the key space. Since this is a new
proposal, we can assume that wallets implementing it would be
SegWit-compatible and so there should be no need to differetiate between
SegWit and non-SegWit pubkeys. Anyway, if someone believes this problem
still holds, we thought about two possible solutions:
    a. Create separate purposes for SegWit and non SegWit addresses
(this would keep the same standard as BIP44 and BIP49)
    b. Create a new level on this proposed structure to divide SegWit
and non SegWit addresses: we would suggest to add this new level between
cosigner_index and change
We believe solution b. would be better as it would give the option of
having a multisig wallet with non SegWit-aware cosigners without having
to use two different subtrees.
This proposal is a work in progess so we would like to receive some
feedback before moving on with proposing it as a BIP draft.
Simone Bronzini

@_date: 2017-08-30 14:22:30
@_author: Simone Bronzini 
@_subject: [bitcoin-dev] BIP proposal for Lightning-oriented multiaccount 
Thanks for your feedback, I fixed what you suggested. As for the purpose
how should we move on? We would be inclined to use 46, but of course we
are open to any other number.

@_date: 2017-08-30 14:48:24
@_author: Simone Bronzini 
@_subject: [bitcoin-dev] BIP proposal for Lightning-oriented multiaccount 
Your observations make perfect sense. That's exactly why we endorse
option b. in my previous email.
As for the idea of having a versioning on mnemonic seeds, I believe it
would be a very useful feature indeed. How about opening a new,
separate, topic about it?

@_date: 2017-07-21 14:39:22
@_author: Simone Bronzini 
@_subject: [bitcoin-dev] BIP proposal - multi-account key derivation hierarchy 
Maybe this has already been discussed, but I have not found anything online.
To the best of my knowledge, the only BIP which specifies a HD structure
for multisig wallets is BIP45. Unfortunately, when used in a
multi-account fashion, BIP45 gets very tricky very fast. In fact, one
has to either use a new master for every multisig account (hence having
to backup many master private keys) or use the same master for many
multisig accounts, resulting in deterministic but complex and
undesirable key reuse.
I would like to propose a new structure for multi-account multisig
wallets. This structure follows the derivation scheme of other proposals
(in particular BIP44 and BIP49) but adds a level to take into account
multisig accounts separation. In particular, the structure should be as
In this case, a user can create many multisig accounts (each one will be
a different account number) and give his/her account's public derivation
to the cosigners. From this point on, the creation of a multisig P2SH
address will follow the same procedure as described in BIP45, with each
cosigner selecting his branch from the other cosigners' trees.
Would this proposal be acceptable as a BIP?
Simone Bronzini

@_date: 2017-09-15 22:40:12
@_author: Simone Bronzini 
@_subject: [bitcoin-dev] hypothetical: Could soft-forks be prevented? 
Since a soft-fork is a restriction of the consensus rules, I think the
only way to have an un-soft-forkable cryptocurrency is creating a
cryptocurrency where no transaction is valid.
Imagine I build a very minimal cryptocurrency where in the transaction
output you only indicate the public key to send your coins to and the
amount. One can still soft-fork it by deciding that, from now on, only
even amounts are valid or only public keys that are a multiple of 10 are

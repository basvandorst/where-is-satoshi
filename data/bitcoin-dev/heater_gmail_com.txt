
@_date: 2017-07-22 11:58:21
@_author: Zheming Lin 
@_subject: [bitcoin-dev] Proposal: Demonstration of Phase in Full Network 
I think we should not switch to Proof of Stake system.
in Proof of Stake system, the one with more voting power tend to protect
their investment and that will stop others from competing with them. they
will use the voting power to make entering barrier, limiting the
competition is bad for bitcoin economy (I believe).
Miners are not centralized, they just grow bigger and be industrialized,
but there's still a lot of competition. The competition is the main
security model of bitcoin system.
When we are talking about "security" in bitcoin system, we are talking
about the probability that a transaction revert or change. We can not be
100% sure under 3 confirmations, but in 6 or more confirmations, we think
the cash received is safe and can't be taken away. That's the security
provided by bitcoin system.
Hard fork is not dangerous, when hard fork happens, people can wait for a
short time (like maintenance of a POS/CreditCard system). When the chain
with most hashrate wins (with high enough probability), we can then safely
assume that the longest chain can't be reverted.
LIN Zheming

@_date: 2017-06-13 10:23:41
@_author: Zheming Lin 
@_subject: [bitcoin-dev] Proposal: Demonstration of Phase in Full Network 
The BIP is described using Chinese and English. If any part is missing or need more specific, please reply. Forgive for my poor English.
This method will incorporate any upgrade that affects non-mining nodes. They should beware that the rule has been changed.
TLDR: Major miners activate and orphan the minor. That ensures all miners upgrades. Then invalid the tx from not upgrading nodes. Nodes must upgrade (with other protocol upgrade codes) in order to work. Then the final miner vote over protocol upgrade, with all nodes has the same upgraded codes.
BIP: ???
Title: Demonstration of Phase in Full Network Upgrade Activated by Miners
Author: LIN Zheming
Status: Draft
Type: Standards Track
Created: 2017-06-12
This idea was not created by an individual but is a product of collaboration in the Chinese bitcoin community between different interest groups.
This method is put forth to incentivize and to protect mining nodes and non-mining nodes during protocol upgrading. With this incentive mechanism, the non-mining nodes will not suffer monetary loss from chain splitting.
After the activation condition is met, majority miners will set a new block versionbits after the first grace period(a difficulty change of 2016 blocks). The blocks with lower versionbits will be orphaned. In terms of the Nakamoto Consensus, the end of the first grace period will force all mining nodes upgraded to signal a new version of consensus. After the second grace period ( a difficulty change of 2016 blocks), mining nodes will only accept transactions with new versionbits. Transactions from nodes not upgrading will not be relayed nor included in blocks with new versionbits. This will protect funds of non-mining nodes from utilizing replay attack and will function as a notification for them to upgrade. Codes dealing with protocol upgrade could be included in the upgrade. After the non-mining node upgrades, mining nodes will vote to activate the protocol upgrade and this will achieve the broad/widespread deployment of the protocol upgrade.
The protocol upgrade depends on its activate condition independently even after the change deployed among nodes.
In view of the fact that the original Bitcoin consensus did not consider the non-mining wallet nodes(as mentioned above), the result is that upgrading the consensus of these wallet nodes is passive and lazy. When there is disagreement in the direction of the upgrade, the miners have no mechanism to ensure that the chain being extended is the chain widely accepted by the wallet nodes. This also adversely affects the security of the wallet nodes.
Apart from ensuring the asset security of wallet nodes, this method can be used to provide additional incentives to upgrade the protocol for the wallet nodes. Once the wallet nodes upgrade their protocol, the miners' nodes can be guaranteed to work - not only on the longest chain, but also on the longest chain used by other wallet nodes in the broader bitcoin sphere. Under the Nakamoto Consensus, there will be no persistent forks as protocol upgrades can be phased in.
1. ??????? versionbits ???????????BIP ??????????????? nVersion ?????
2. ??????? tx version ?????????????? tx version ? 1???? tx version ? 2 ???????????????? tx version ? 1 ??????
1. Mining nodes signal by setting a version bit. While this BIP is active, all blocks must set the chosen nVersion.
2. Mining nodes will use tx version to define current version transactions. Current tx version is 1, and tx version 2 will be allowed. After the second grace period, tx version 1 will be regarded as invalid.
Protocol upgrading will phase in over three stages. We can have an optional fourth stage to integrate codes of protocol upgrade.
1. ??????????? versionbits ??????????????? 55% ????? 1109/2016 ??????????????????????
2. ???????????????? 2016 ?????????????? 2218/4032???????????????????????????????????????????????????????????????
3. ????????????????????? 4032 ????????????????????????????????????????????????????????
4. ????????????????????????????????????????????????????????????????????????????????????????????
1. Signal stage: Mining nodes signal using BIP9. The next stage will be activated after 55% (1109) of 2016 blocks has the signal.
2. Mining nodes upgrade stage: After a first grace period of 2016 blocks and total signalling blocks passed 2218 of 4032 blocks, miners broadcasting blocks with new versionbits in block headers will orphan blocks with old versionbits. At this stage all nodes can send transactions with new versionbits, and transactions with old versionbits will be compatible.
3. Non-mining nodes upgrade stage: after 4032 continuous blocks with new versionbits, mining nodes will start to refuse transactions with old versionbits. Only transactions with new versionbits can be relayed and included in blocks. Transactions with old versionbits can be safely purged from memory pools.
4. (Optional)Protocol Upgrade stage: The codes dealing with protocol upgrade can be integrated in the third stage. After the non-mining nodes upgrades to support newer version of transactions, the codes with protocol upgrade must be included and now we can use miner vote to activate and finish this upgrade.
At this point, the protocol upgrade have phased in.
1. ?????????????????????????????99.9% ??????55% ????? 340 ?????????????????????????????????????????????????????? 51% ???????????????????????
2. ????????????????????????????????
3. ??????? block header ?????? SPV ????????????
4. ??????????????????????????????????????????????????????????????????????
5. ?????????????????????????????????????????????????????
6. ????????????????????????????????????????????????????????????????????????????????
1. The activation only requires majority miners signal. As described in the paper by Satoshi Nakamoto, 55% miners will be in the longest chain after 340 blocks, with 99.9% certainty. This will minimize the possibility of delaying network upgrades by controlling a small number of hashing power. We can foresee that after 51% signalling, all miners will upgrade within the first grace period. 2. During the first two grace periods, non-mining nodes will not be affected. They have enough time to upgrade their software. 3. Versionbits included in block header, not influencing the SPY mining. 4. After two grace periods, all nodes must be upgraded. Otherwise they cannot send transactions or get any confirmations. Compared with forming new consensus among nodes, the situation is not worse than before. 5. The ledger in non-mining wallet nodes is honored and reserved. Users of off-chain wallet services can decide whether or not to follow the service providers after they got the public notification from the service providers. 6. Protocol upgrades in the future can be bonded with the upgrades of nodes, and the upgrades activate through miners vote independently. There would be enough time for nodes to be upgraded in order to support new protocols. Even in case of failing in miner activation, the situation will not worsen and the status quo will remain. 1. ??????????????????????????????????????
2. ????????????????????????????????????????????????????????
3. ?????????????????????????????????????????????????????????????????
4. ???????????????????????????????????????????????????????????????????????????????????
1. The fluctuation of the hashing power will affect the result of the longest chain. Higher activating requirement means a lower risk of temporary fork. 2. Miners could simply signal to avoid being orphaned, but from the perspective of non-mining wallet nodes, they can't distinguish the false signal from the true signal. They must upgrade with the assumption that the signals are all true. After all the non-mining nodes have upgraded, the miners signalling false signal should follow. 3. Non-mining wallet nodes could false signal without supporting the new protocol but since the total number of nodes cannot be distinguished, genuine nodes should follow the proven result provided by miners vote. 4. Miners and non-mining nodes could conspire to fork using old protocol consensus. It can't be eliminated, just like in the past but through most passive non-mining nodes being upgraded, their benefit is reduced.

@_date: 2017-06-13 14:50:26
@_author: Zheming Lin 
@_subject: [bitcoin-dev] Proposal: Demonstration of Phase in Full Network 
Hi James:
Thank you very much for detailed feedback. Sorry for my understanding of English being poor. I?ll try to answer that.
????????????????????????????????????????????????????????????????????? BIP148 ????
I admitted that these nodes a very important. so we don?t want these nodes suffer financial loss by undetectable network change. These nodes always have choice like BIP148.
We can not have any guarantee. but we can have incentives that they participate and be aware about the change happening.
Users always have choice.
They can be re-enable in the successful or unsuccessful activation of the fourth stage. Whether or not, what they need is to be prepared for the future coming. But they can?t be left behind or be cheated like nothing happened.
False signal can?t be solved in my opinion. If the majority part just don?t agree with the change, why they cheat? If the majority part is honest as described in nakamoto consensus, I think that won?t be a problem. CPU power always decides.
??????????????????????? SPY ??????????
Maybe I?m wrong. Please give some advice that how to make it compatible with SPY mining.
It would not force our nodes to do anything that changes the consensus. But they should be prepared for the **maybe** upcoming changes.
Protocol upgrades could be done using miners vote. but the progress of voting should be acknowledged by all nodes.
False signal won?t be a problem if majority miners are honest.
Miners should vote unbiasedly under the condition that most users are not affected by protocol upgrading.

@_date: 2017-06-13 16:13:58
@_author: Zheming Lin 
@_subject: [bitcoin-dev] Proposal: Demonstration of Phase in Full Network 
Hi James:
The node should decide to follow the protocol upgrade or not. But they can?t just be passive and do nothing. The choice is always provided.
If they don?t trust the choice of majority miners, they can use some alt coin that don?t including miners? part.
???????????????????? SPY ??????????????????
We should introduce block validation in the code, but how to provide incentive to no-validating SPY miner is another problem.
I don?t see them as completely backwards compatible. since I don?t see that is important if we all agree with ?after block height xxx, then xxx?.
And we can validate from the genesis block till today.
???45% ????????????????????????????????????????
Of cause, there could be false signal from 45% and have conspiracy with some nodes. But that?s the problem we have today, and it don?t get any worse (nor any better).

@_date: 2017-06-13 16:24:41
@_author: Zheming Lin 
@_subject: [bitcoin-dev] Proposal: Demonstration of Phase in Full Network 
Hi all the developers:
I must clarify that despite the general ideas comes from discussions with others. The opinion in replies are only limited to my self.
The old TXs can be re-enable after the fourth stage and just like **nothing happened** with the grace periods. The code can be provided with the protocol upgrade voting. At the end of the vote, either success or failed, we can have old TXs work again. It?s like after a long time that the block jammed. I think nobody get harmed (Is there? I?m not so sure about that), that?s the purpose.
Thank you for your time and kindly replies. Your opinions are more than welcome.
LIN Zheming

@_date: 2017-06-15 00:39:42
@_author: Zheming Lin 
@_subject: [bitcoin-dev] Proposal: Demonstration of Phase in Full Network 
I mean lazy and passive ones I addressed. Not the one actively chose whichever solution they like. Users always have their solution. There?s no way to force a union if they are not together.
From the definition of Satishi Nakamoto, Section 5, each node mines. If that?s the disagreement between us, there?s no more I can convince you. ???????????????????????? BIP ???????????????????????????????????????????????????????
Yes, users always have choice that they can abandon the nodes. This BIP does?t go against them. I mean only the one(especially wallets) that?s passive, they need to know there?s a choice and pick one.
?? BIP ?????????????????????????????????????????????????????????
This BIP can be applied to almost any upgrade, including Segwit, Segwit2x, 2m, ec, 8m? but the upgrade is not the key point.
Did the users have any real choice?
I don?t see the reason they trust the majority miners(as they do today) but refuse the vote for upcoming protocol upgrade.
This choice for wallet users right now, is wether to follow the 51% majority miners. If they don?t, they can have their fork that get rid of miners.
If they do trust the majority miners, they stay and follow the vote for upcoming protocol upgrade.
So the questions is: Do the bitcoin developers, users, holders, service provides, even miners, (still) have faith in the majority of miners as designed in the white paper?
I personally take that as VETO to current version. This BIP also address this situation. Did you notice that miners should be upgraded first? Did that solve the problem you mentioned above?
If we can use this method to at least make miners upgraded to the same consensus version and start to vote for the upcoming changes, that would solve the problem for the passive behavior. Unless the vote miners wish to hold, is not in the wishlist of someone.
I think the divergency is from the different definition of bitcoin. If no common understanding, let?s get one from the white paper, together.
LIN Zheming

@_date: 2017-06-15 02:29:35
@_author: Zheming Lin 
@_subject: [bitcoin-dev] Proposal: Demonstration of Phase in Full Network 
Hi Jameson:
How does the users show their opinion? They can fork away and leave. But what remains will be united. Are you afraid of the united users or the fork?
I agree with you that the ?vote? is not accurate. Could you kindly suggest an other word for that?
I think users should have choice to follow the miners or not. Do you agree with this or not?
Arrrgh. I think in the BIP, the miners just invalids tx version 1 temporarily. That?s a ?soft fork? right? If they dislike the idea, they can leave as always.
LIN Zheming

@_date: 2017-06-15 02:30:32
@_author: Zheming Lin 
@_subject: [bitcoin-dev] Proposal: Demonstration of Phase in Full Network 
Hi Jameson:
How does the users show their opinion? They can fork away and leave. But what remains will be united. Are you afraid of the united users or the fork?
I agree with you that the ?vote? is not accurate. Could you kindly suggest an other word for that?
I think users should have choice to follow the miners or not. Do you agree with this or not?
Arrrgh. I think in the BIP, the miners just invalids tx version 1 temporarily. That?s a ?soft fork? right? If they dislike the idea, they can leave as always.
LIN Zheming

@_date: 2017-06-15 03:04:21
@_author: Zheming Lin 
@_subject: [bitcoin-dev] Proposal: Demonstration of Phase in Full Network 
Hi Jameson:
?Sybil attack?. The genuine node will leave the chain if it doesn?t like the change. That?s what restrain the majority miners acting foolishly.
If the users like the idea, they follow. If they don?t the fork away(and not afraid of replay attack). I think it?s a way to move forward together. Would you support the idea that we put the choice to the users to decide?
And if we add a version 2 valid, does that still be a ?soft fork??
LIN Zheming

@_date: 2017-06-16 22:39:26
@_author: Zheming Lin 
@_subject: [bitcoin-dev] Proposal: Demonstration of Phase in Full Network 
Will there be a  ?Do nothing? soft fork, showing that the community can still moving forward?
So all the nodes get to upgrade to use tx version 2, and that avoid a chain split.
Are you support that or against that, why?
LIN Zheming


@_date: 2014-12-15 14:57:07
@_author: Btc Drak 
@_subject: [Bitcoin-development] Recent EvalScript() changes mean 
This is a pretty good example about refactoring discipline as well as
premature/over optimisation.
We all want to see more modular code, but the first steps should just be to
relocate blocks of code so everything is more logically organised in
smaller files (especially for consensus critical code). Refactoring should
come in a second wave preferably after a stable release. Refactoring should
be in the pure sense, optimising code with absolutely no change in
When it comes to actual API changes, I think we need to be a lot more
careful and should be considered feature requests and get a lot more
scrutiny as we are essentially breaking backwards compatibility.  was
pretty much merged with no discussion or thought yet other really simple
and uncontroversial PRs remain unmerged for months. A key question in the
case of EvalScript() would have been, "why are we passing txTo and nIn
here, and are there any future use cases that might require them? Why
should this be removed from the API and the entire method signature
changed?". BC breaks always need strong justification.
So I've expressed my concern a few times about the speed and frequency of
refactoring and also the way it's being done. I am not alone, as others not
directly connected with the Bitcoin Core project have also expressed
concerns about the number of refactorings "for the sake of refactoring",
especially of consensus critical code. Careful as we may be, we know from
history that small edge case bugs can creep in very easily and cause a lot
of unforeseen problems.

@_date: 2014-12-15 21:57:27
@_author: Btc Drak 
@_subject: [Bitcoin-development] Recent EvalScript() changes mean 
I think we can all agree that if the process is made more friendly for
reviewers, everyone wins. It's been hard to even know where everything is
because it moves so often. e.g. In the last couple weeks stuff moved from
core.h to core/block.h to primitive/block.h or something to that effect.
Anyway, Jeff said this quite elegantly.

@_date: 2014-12-16 23:40:34
@_author: Btc Drak 
@_subject: [Bitcoin-development] ACK NACK utACK "Concept ACK" 
Would someone also clarify the use of "nit" for nitpicking and how it plays
in the role of consensus?
It seems like it's used for minor complaints/preferences.

@_date: 2014-12-29 12:13:41
@_author: Btc Drak 
@_subject: [Bitcoin-development] Cartographer 
In all seriousness, are you on the payroll of the NSA or similar to
repeatedly attempt to introduce privacy leaks[1] and weaknesses[2] into the
ecosystem not to mention logical fallacies like ad hominem attacks;
disruption[3] and FUD[4]?
Why do you answer objections by hand waving and misdirection as opposed to
sound technical reasoning? Remember how hand waving ended for you the last
time with your p2p getutxo pull-request[5] and the public flogging the
ensued because you refused to accept your implementation was not only
flawed but critically vulnerable to attack[6].
Given your intelligence, education and experience, it would seem logical
that your behaviour is not random or irrational, but in fact calculated and
[4] [5]

@_date: 2014-11-18 17:47:05
@_author: Btc Drak 
@_subject: [Bitcoin-development] Increasing the OP_RETURN maximum payload 
On Mon, Nov 17, 2014 at 11:43 AM, Flavien Charlon <
While I am not opposing the proposal, I am not sure about your statistics
because while Counterparty is not currently using OP_RETURN encoding, you
should factor in the number of CP transactions that would have been
OP_RETURNs if they had been permitted (100,000 since inception according
their blog[1] with monthly charts at their block explorer[2]).
[2]

@_date: 2014-10-19 10:42:07
@_author: Btc Drak 
@_subject: [Bitcoin-development] BIP process 
I agree. This is also where the best peer review is to be found. Splitting
the list will dilute this.

@_date: 2015-08-09 23:51:50
@_author: Btc Drak 
@_subject: [bitcoin-dev] What Lightning Is 
I thought it's worth mentioning there is a specific Lightning Network
development mailing list at
 and already
some pretty interesting explanations in the archives.

@_date: 2015-08-10 13:33:07
@_author: Btc Drak 
@_subject: [bitcoin-dev] Fees and the block-finding process 
Additionally, correct me if I am wrong, but the net effect from preventing
fees rising from zero would be to guarantee miners have no alternative
income from fees as block subsidy dries up and thus harm the incentives to
secure the chain.

@_date: 2015-08-13 12:06:44
@_author: Btc Drak 
@_subject: [bitcoin-dev] [BIP-draft] CHECKSEQUENCEVERIFY - An opcode for 
I have written the following draft BIP for a new opcode
CHECKSEQUENCEVERIFY by Mark Friedenbach, which introduces a form of
relative-locktime to Bitcoin's scripting language.
  BIP: XX
  Title: CHECKSEQUENCEVERIFY
  Authors: BtcDrak            Mark Friedenbach   Status: Draft
  Type: Standards Track
  Created: 2015-08-10
This BIP describes a new opcode (CHECKSEQUENCEVERIFY) for the Bitcoin
scripting system that in combination with BIP 68 allows execution
pathways of a script to be restricted based on the age of the output
being spent.
CHECKSEQUENCEVERIFY redefines the existing NOP3 opcode. When executed
it compares the top item on the stack to the inverse of the nSequence
field of the transaction input containing the scriptSig. If the
inverse of nSequence is less than the sequence threshold (1 << 31),
the transaction version is greater than or equal to 2, and the top
item on the stack is less than or equal to the inverted nSequence,
script evaluation continues as though a NOP was executed. Otherwise
the script fails immediately.
BIP 68's redefinition of nSequence prevents a non-final transaction
from being selected for inclusion in a block until the corresponding
input has reached the specified age, as measured in block heiht or
block time. By comparing the argument to CHECKSEQUENCEVERIFY against
the nSequence field, we indirectly verify a desired minimum age of the
the output being spent; until that relative age has been reached any
script execution pathway including the CHECKSEQUENCEVERIFY will fail
to validate, causing the transaction not to be selected for inclusion
in a block.
BIP 68 repurposes the transaction nSequence field meaning by giving
sequence numbers new consensus-enforced semantics as a relative
lock-time. However, there is no way to build Bitcoin scripts to make
decisions based on this field.
By making the nSequence field accessible to script, it becomes
possible to construct code pathways that only become accessible some
minimum time after proof-of-publication. This enables a wide variety
of applications in phased protocols such as escrow, payment channels,
or bidirectional pegs.
Refer to the reference implementation, reproduced below, for the precise
semantics and detailed rationale for those semantics.
    case OP_NOP3:
    {
        if (!(flags & SCRIPT_VERIFY_CHECKSEQUENCEVERIFY)) {
            // not enabled; treat as a NOP3
            if (flags & SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS) {
                return set_error(serror, SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS);
            }
            break;
        }
        if (stack.size() < 1)
            return set_error(serror, SCRIPT_ERR_INVALID_STACK_OPERATION);
        // Note that unlike CHECKLOCKTIMEVERIFY we do not need to
        // accept 5-byte bignums since any value greater than or
        // equal to SEQUENCE_THRESHOLD (= 1 << 31) will be rejected
        // anyway. This limitation just happens to coincide with
        // CScriptNum's default 4-byte limit with an explicit sign
        // bit.
        //
        // This means there is a maximum relative lock time of 52
        // years, even though the nSequence field in transactions
        // themselves is uint32_t and could allow a relative lock
        // time of up to 120 years.
        const CScriptNum nInvSequence(stacktop(-1), fRequireMinimal);
        // In the rare event that the argument may be < 0 due to
        // some arithmetic being done first, you can always use
        // 0 MAX CHECKSEQUENCEVERIFY.
        if (nInvSequence < 0)
            return set_error(serror, SCRIPT_ERR_NEGATIVE_LOCKTIME);
        // Actually compare the specified inverse sequence number
        // with the input.
        if (!CheckSequence(nInvSequence))
            return set_error(serror, SCRIPT_ERR_UNSATISFIED_LOCKTIME);
        break;
    }
    bool CheckSequence(const CScriptNum& nInvSequence) const
    {
        int64_t txToInvSequence;
        // Fail under all circumstances if the transaction's version
        // number is not set high enough to enable enforced sequence
        // number rules.
        if (txTo->nVersion < 2)
            return false;
        // Sequence number must be inverted to convert it into a
        // relative lock-time.
        txToInvSequence = (int64_t)~txTo->vin[nIn].nSequence;
        // Sequence numbers under SEQUENCE_THRESHOLD are not consensus
        // constrained.
        if (txToInvSequence >= SEQUENCE_THRESHOLD)
            return false;
        // There are two types of relative lock-time: lock-by-
        // blockheight and lock-by-blocktime, distinguished by
        // whether txToInvSequence < LOCKTIME_THRESHOLD.
        //
        // We want to compare apples to apples, so fail the script
        // unless the type of lock-time being tested is the same as
        // the lock-time in the transaction input.
        if (!(
            (txToInvSequence <  LOCKTIME_THRESHOLD && nInvSequence <
LOCKTIME_THRESHOLD) ||
            (txToInvSequence >= LOCKTIME_THRESHOLD && nInvSequence >=
        ))
            return false;
        // Now that we know we're comparing apples-to-apples, the
        // comparison is a simple numeric one.
        if (nInvSequence > txInvToSequence)
            return false;
        return true;
    }
==Example: Escrow with Timeout==
An escrow that times out automatically 30 days after being funded can be
established in the following way. Alice, Bob and Escrow create a 2-of-3
address with the following redeemscript.
    IF
        2    3
    ELSE
         CHECKSEQUENCEVERIFY DROP
         CHECKSIGVERIFY
    ENDIF
At any time funds can be spent using signatures from any two of Alice,
Bob or the Escrow.
After 30 days Alice can sign alone.
The clock does not start ticking until the payment to the escrow address
==Reference Implementation==
A reference implementation is provided in the following git repository:
We reuse the double-threshold switchover mechanism from BIPs 34 and
66, with the same thresholds, but for nVersion = 4. The new rules are
in effect for every block (at height H) with nVersion = 4 and at least
750 out of 1000 blocks preceding it (with heights H-1000..H-1) also
have nVersion = 4. Furthermore, when 950 out of the 1000 blocks
preceding a block do have nVersion = 4, nVersion = 3 blocks become
invalid, and all further blocks enforce the new rules.
It is recommended that this soft-fork deployment trigger include other
related proposals for improving Bitcoin's lock-time capabilities, including:
[ BIP 65]:
[ BIP 68]:
Consensus-enforced transaction replacement signalled via sequence numbers,
and [ BIP XX]:
Mark Friedenbach invented the application of sequence numbers to
achieve relative lock-time, and wrote the reference implementation of
The reference implementation and this BIP was based heavily on work
done by Peter Todd for the closely related BIP 65.
BtcDrak authored this BIP document.
BIP 68: Consensus-enforced transaction replacement signalled via
sequence numbers
BIP 65: OP_CHECKLOCKTIMEVERIFY
BIP XX: Median past block time for time-lock constraints
HTLCs using OP_CHECKSEQUENCEVERIFY/OP_LOCKTIMEVERIFY and
revocation hashes
This document is placed in the public domain.

@_date: 2015-08-17 11:51:26
@_author: Btc Drak 
@_subject: [bitcoin-dev] Dynamically Controlled Bitcoin Block Size Max Cap 
I guess I am nobody. Here's a copy of the text:-
*Dynamically Controlled Bitcoin Block Size Max Cap
*Assumption*: This article is for those, who already understand the bitcoin
protocol and aware of the block size controversy. Details of the problem
statement can be found in BIP 100
Satoshi's opinion regarding block size can be found here
. I will be
directly going into the solution without explaining the problem in details.
*Solution*: Difficulty changes at every 2016 block, i.e. at every 2016
block each full node does a calculation to find the next target. We will do
just another calculation here. Nodes will also calculate what % of blocks
in the last difficulty period is higher than 90% of the maximum block size,
which is 1 MB for now. If it is found that more than 90% blocks in the last
difficulty period is higher than 90% of the maximum block size, then double
the maximum block size. If not, then calculate what % of blocks in the last
difficulty period is less than 50% of the maximum block size. If it is
higher than 90%, then half the maximum block size. If none of the above
condition satisfies, keep the maximum block size as it is.
Please note that, while calculating the % of blocks, it is better to take
into account the first 2000 of the 2016, than the whole of 2016. This helps
to avoid the calculation mistake if some of the last few blocks get
*Reasoning*: This solution is derived directly from the indication of the
problem. If transaction volume increases, then we will naturally see bigger
blocks. On the contrary, if there are not enough transaction volume, but
maximum block size is high, then only few blocks may sweep the mempool.
Hence, if block size is itself taken into consideration, then maximum block
size can most rationally be derived. Moreover, this solution not only
increases, but also decreases the maximum block size, just like difficulty.
*Other Solutions of this Problem*:-
Making Decentralized Economic Policy
 - by
Jeff Garzik
Elastic block cap with rollover penalties
 ? by Meni Rosenfeld
Increase maximum block size
 - by Gavin
Block size following technological growth
 - by Pieter Wuille
The Bitcoin Lightning Network: Scalable Off-Chain Instant Payments
 - by Joseph Poon &
Thaddeus Dryja
Please share your opinion regarding this solution below. For mail
communication, feel free to write me at bitcoin [at] upalc.com.

@_date: 2015-08-17 18:30:53
@_author: Btc Drak 
@_subject: [bitcoin-dev] Bitcoin XT Fork 
For the record I would like to share my technical analysis of the Satoshi
email which I wrote in a pastebin ( a few days
1. The email is the one used by Satoshi to announce Bitcoin in the first
2. The email was not spoofed, it actually originated from vistomail's
server. The email headers show the email originated from 190.97.163.93 and
the SPF records show this as an authorised sender for the email. This does
not prove the account wasn't hacked of course, or that the account might
have expired and be re-registered by someone else (vistomail is a paid for
email provider).
3. While the email is not signed, and there are a number of PGP keys listed
on key servers for him (to vary addresses), he didnt sign any emails with
any PGP keys.
It is therefore not possible to outright dismiss the email's authenticity
as the email originates from an authentic source. The only questions is
whether the webmail service was hacked or commandeered somehow.

@_date: 2015-08-17 20:58:10
@_author: Btc Drak 
@_subject: [bitcoin-dev] [BIP-draft] CHECKSEQUENCEVERIFY - An opcode for 
Please note there is now a PR for this BIP[1] and also a pull request for
the opcode CHECKSEQUENCEVERIFY in Bitcoin Core[2].
[1] [2]

@_date: 2015-08-19 09:25:23
@_author: Btc Drak 
@_subject: [bitcoin-dev] Bitcoin XT Fork 
I see no problem with Satoshi returning to participate in peer review.
Bitcoin development has long since migrated from a single authority figure
to a system of technical peer review consensus. What is more of a problem
is this list has degenerated to a generalised discussion forum where any
academic or technical debate is drowned out by noise.
I joined this list so I keep be abreast of bitcoin's technical development
and proposals. I am sure many ecosystem stakeholders and participants also
once used this list to keep abreast of technical developments and academic
research. It would be splendid indeed if we could return to some semblance
of decorum that once existed.
Do you think we could have a "bitcoin-discuss" list where specifically
non-technical discussion can happen leaving this list for more academic and
technical debate together with setting a clear mandate about what is on
topic for this list?
On Tue, Aug 18, 2015 at 12:52 PM, Micha Bailey via bitcoin-dev <

@_date: 2015-08-19 10:58:50
@_author: Btc Drak 
@_subject: [bitcoin-dev] Separated bitcoin-consensus mailing list (was Re: 
Regarding disruptors, if there are clear rules about what is acceptable on
-dev, one can simply moderate out offenders. It's absolutely necessary we
have a forum where we can share and discuss purely academic and technical
matters. No-one can accuse censorship because all moderation would say
would be to "take it to the other list". It's essential for all people who
are developing and maintaining Bitcoin protocol software, or services that
rely on it. The mailing list used to be very low volume.
While we are at it, we should also think about a bitcoin-announce read only
list which consumers of Bitcoin Core can subscribe for announcements about
new versions of Bitcoin Core, and any critical warnings. Miners and service
providers would particularly benefit from this. The list is moderated so
only say Bitcoin Core commit engineers are allowed to post.
The potential downside is too much separation becomes confusing although I
would not oppose such a change. My own suggestion would be try just a -dev
and -discuss list and see how that goes first. It used to work well.
Whatever the case I am very confident we need a general discussion mailing

@_date: 2015-08-19 11:20:17
@_author: Btc Drak 
@_subject: [bitcoin-dev] CLTV/CSV/etc. deployment considerations due to 
There is a simple answer to this, convenience: versionbits has not been
implemented yet, and I believe the BIP is still in review stage. As it
seems likely the remaining locktime pull requests will be ready by or
before the next major release, we need a deployment method if versionbits
is not ready (which is unlikely because no-one appears to be working on it
at the moment). Pieter indicated he is OK with another IsSuperMajority()
rollout in the interim. Personally, I dont think we should let perfection
be the enemy of progress here because at the end of the day, the deployment
method is less important than the actual featureset being proposed.
That said, the features in the next soft fork proposal are all related and
best deployed as one featureset softfork, but moving forward, versionbits
seems essential to be able to roll out multiple features in parallel
without waiting for activation and enforcement each time.

@_date: 2015-08-19 14:15:18
@_author: Btc Drak 
@_subject: [bitcoin-dev] CLTV/CSV/etc. deployment considerations due to 
What problem am I missing if we just mask of the offending bits. For my own
project which uses auxpow (and thus has weird nVersion), I also used the
bitmasking method to get rid of auxpow version bits before making the
standard integer comparisons to deploy BIP66 using IsSuperMajority():
    if ((block.nVersion & 0xff) >= 4 && CBlockIndex::IsSuperMajority(...))
{ //...}

@_date: 2015-08-19 18:25:20
@_author: Btc Drak 
@_subject: [bitcoin-dev] CLTV/CSV/etc. deployment considerations due to 
To clarify this is the code example for how the same problem occurs
with auxpow bits when running a an IsSuperMajority() softfork and how
it's solved in that instance.
In our case for Bitcoin Core, option 2 we use nVersion=8, apply a
bitmask of 0xdffffff8 thus:
    if ((block.nVersion & ~0x20000007) >= 4 &&
CBlockIndex::IsSuperMajority(...)) { //...}
With nVersion=8, but using comparison >=4 allows us to recover the
bit later, assuming we want it (otherwise we use version >=8).
This should, unless I am missing something, be forward compatible with
future softforks. My understanding was if "versionbits softfork" code
is not ready by the time we're ready for the deployment,
IsSuperMajority() would be acceptable; and this is how we could deploy
it in the wake of the XT developers' carelessness.

@_date: 2015-08-19 18:32:14
@_author: Btc Drak 
@_subject: [bitcoin-dev] Bitcoin XT Fork 
I would like to add for the record, I also warned Gavin of this in his
PR to Bitcoin Core, and also suggested a timeout which if
activation/enforcement did not occur within, hard fork deployment
would be cancelled. His response was to delete these from the PR
claiming thresholds were not relevant conversation in his PR and
belonged elsewhere (even though they had already been discussed

@_date: 2015-08-19 19:47:36
@_author: Btc Drak 
@_subject: [bitcoin-dev] Separated bitcoin-consensus mailing list (was Re: 
Well -dev or both, I dont particularly see a difference at the moment,
and establishing two lists isnt really going to make a difference so
long as Bitcoin Core is the reference client, which it is by defacto.
The risk of having too many lists is interested stakeholders will miss
a discussions. Normal protocol and core discussions are usually pretty
low volume in any case.
I would suggest it's only because there havent been any rules for -dev
that would force general discussion over to the bitcoin list. On IRC
we regularly tell people in  they are OT and ask them to
move to  and as a result, -dev remains quite clear of chit
chat,  has a steady stream of general chatter.
We could reduce the OT/noise of bitcoin-dev list considerably by
offloading the non-technical/academic debate to the bitcoin list. It
just needs a bit of shepherding. I am more than happy to help out.
Especially if the list already exists, we should consider making a
decision now.
Who are the moderators for that list? Do we really want to use
sourceforge or are there alternatives, like another list on
ping

@_date: 2015-08-19 19:51:11
@_author: Btc Drak 
@_subject: [bitcoin-dev] Bitcoin XTs Tor IP blacklist downloading system 
On Wed, Aug 19, 2015 at 4:45 PM, Mike Hearn via bitcoin-dev
Would you kindly link to said peer review as I was unable to find it
other than a couple of comments between you and Gavin which hardly
amounts to peer review.

@_date: 2015-08-19 20:15:44
@_author: Btc Drak 
@_subject: [bitcoin-dev] Bitcoin XT Fork 
For the avoidance of doubt here's the archive link of my comment
 (call me paranoid)
and here's where he tells me he's censored my posts It's time.

@_date: 2015-08-19 23:59:07
@_author: Btc Drak 
@_subject: [bitcoin-dev] bitcoin-dev list etiquette 
On Wed, Aug 19, 2015 at 11:25 PM, Gary Mulder via bitcoin-dev
I believe there is BIP99 that addresses hard forks.

@_date: 2015-08-21 04:10:55
@_author: Btc Drak 
@_subject: [bitcoin-dev] Core Devs : can you share your thoughts about all 
I was looking at this site recently and it's not very clear that by
clicking the name you get their opinion. I would make that a separate
column stated, Technical Opinion.
I think you need to include more of the developers/technical people,
Adam Back, Mark Friedenback, Jorge Timons, (all of who are core
developers). You need
Peter Todd is a core dev btw, as is thebluematt.
You need other experts, I would include Nick Szabo, Meni Rosenfeld,
Charlie Lee might be a good one. You should get the pools on there
You're missing Mike Hearn of course.
My key is 0xE5D138F5E73A1AF2
On Wed, Aug 19, 2015 at 5:57 AM, Nicolas Dorier via bitcoin-dev

@_date: 2015-08-21 10:09:06
@_author: Btc Drak 
@_subject: [bitcoin-dev] Core Devs : can you share your thoughts about all 
The most important part that developers should complete is the
"Technical Opinion" column section where they can explain their
general worldview, what their concerns are, how those concerns would
be alleviated. If one is undecided or does not have enough information
regarding each BIP then dont fill it out. That also helps signal the
level of consensus for a proposal.
As it stands at the moment, it's almost impossible to direct someone
at the opinion of a specific developer other than hunting down a few
gems scattered to the four corners of the universe. I tried recently
and it was simply impossible. At least with this system, specific BIPs
aside, we can easily see the view of each developer. I think most of
us can comment on BIP101 since the BIP appears non-negotiable.
The XT faction are easily winning the media war by obscuring rational
debate by high signal to noise ratio. Nicolas' solution means the most
important views expressed by each heavyweight will not get lost and
serve as a good reference point for everyone, including the media.
The site could be extended to include major stakeholders too like
major service providers (think exchanges, wallet providers etc) and
mining pools.

@_date: 2015-08-21 10:31:51
@_author: Btc Drak 
@_subject: [bitcoin-dev] Core Devs : can you share your thoughts about all 
That's exactly what the "Technical Opinion" column is for.

@_date: 2015-08-21 12:28:41
@_author: Btc Drak 
@_subject: [bitcoin-dev] Core Devs : can you share your thoughts about all 
On Fri, Aug 21, 2015 at 11:55 AM, Yifu Guo via bitcoin-dev
I was rather surprised by the tweet from AntPool[1] today saying that
they support big blocks and would be prepared to upgrade to XT. Pools
have stated that they are willing to increase to a maximum of 8MB, but
upgrading to XT puts them on a schedule towards 8GB which is clearly
not what they have agreed to.
Do you have any insights into what's going on there?
Also do you have any insight into what Chinese pools would accept as a
compromise in terms of raising the blocksize limit?
[1]

@_date: 2015-08-21 23:22:51
@_author: Btc Drak 
@_subject: [bitcoin-dev] Consensus based block size retargeting algorithm 
I wanted to offer a potential way to adjust the block size limit in a
democratic way without making it easy to game. This is meant only as a
starting point for a general idea. Thresholds and exact figures and
the details of the algorithm are up for debate, and possibly some
formula based determination.
The living document is currently a gist available at
  BIP: XX
  Title: Consensus based block size retargeting algorithm
  Author: BtcDrak   Status: Draft
  Type: Standards Track
  Created: 2015-08-21
A method of altering the maximum allowed block size of the Bitcoin
protocol using a consensus based approach.
There is a perception that Bitcoin cannot easily respond to raising
the blocksize limit if popularity was to suddenly increase due to a
mass adoption curve, because co-ordinating a hard fork takes
considerable time, and being unable to respond in a timely manner
would irreparably harm the credibility of bitcoin.
Additionally, predetermined block size increases are problematic
because they attempt to predict the future, and if too large could
have unintended consequences like damaging the possibility for a fee
market to develop as block subsidy decreases substantially over the
next 9 years; introducing or exacerbating mining attack vectors; or
somehow affect the network in unknown or unpredicted ways. Since fixed
changes are hard to deploy, the damage could be extensive.
Dynamic block size adjustments also suffer from the potential to be
gamed by the larger hash power.
By introducing a cost to increase the block size ensures the mining
community will collude to increase it only when there is a clear
necessity, and reduce it when it is unnecessary. Rogue miners cannot
force their wishes so easily because not only will they have to pay
extra a difficulty target, then can be downvoted at no cost by the
objecting hash power.
The initial "base block size limit" shall be 1MB.
Miners can vote for a block size increase by signalling the proposed
percentage increase of the "base block size limit" in the coinbase
field. For the vote to be considered valid the block they mine must
meets a difficulty target which is proportionally larger than the
standard difficulty target based on the percentage increase they voted
for. If a miner does not vote, or the vote is invalid, it shall be
counted as a vote for no change.
Miners may vote the size down by signalling in the coinbase field
without paying a difficulty penalty.
Every 2016 blocks, the maximum allowed block size will be recalculated
by the average of all votes in the last 2016 blocks, i.e. sum each
vote from each block and divide by 2016 then multiply by the base
block size limit. This will redefine the base block size limit for the
next 2016 blocks.
Blocks that are larger than the calculated base block size limit are
invalid and MUST be rejected.
The maximum change up or down each retargeting period shall be limited
to 10% of the base block size limit.
The maximum block size may not increase above 8MB.
Votes shall be cast by adding the following human readable multiplier
to the coinbase string ?/BXn.nnn/? where valid votes would exist
between the ranges ?/BX0.900/? (10% decrease) and ?/BX1.100/? (10%
increase). ?/BX1.000/? would be a vote for no change. Invalid votes
will be counted as a vote for no change: ?/BX1.000/?.
This proposal is based on ideas and concepts derived from the writings
of Meni Rosenfeld and Gregory Maxwell.
This work is placed in the public domain.

@_date: 2015-08-25 11:15:35
@_author: Btc Drak 
@_subject: [bitcoin-dev] [BIP-draft] CHECKSEQUENCEVERIFY - An opcode for 
This BIP has been assigned BIP112 by the BIP repository maintainer. I
have updated the pull request accordingly.
Regarding the suggestion to cannibalise version, by your own
disadvantage list, we would lose fine grained control over txins which
neuters the usefulness considerably. Also using version is also ugly
because there isn't a semantic association with what we are trying to
do, whereas, sequence is associated with transaction finality and is
thus the more appropriate and logical field to use.

@_date: 2015-08-27 23:08:32
@_author: Btc Drak 
@_subject: [bitcoin-dev] BIP: Using Median time-past as endpoint for 
This BIP was assigned number 113.
I have updated the text accordingly and added credits to Gregory Maxwell.
Please see the changes in the pull request:
On Sat, Aug 22, 2015 at 1:57 AM, Peter Todd via bitcoin-dev

@_date: 2015-08-27 23:11:10
@_author: Btc Drak 
@_subject: [bitcoin-dev] CLTV/CSV/etc. deployment considerations due to 
I have changed BIPS 112 and 113 to reflect this amended deployment
strategy. I'm beginning to think the issues created by Bitcoin XT are
so serious it probably deserves converting OPs text into an
informational BIP.
On Thu, Aug 20, 2015 at 6:42 PM, Mark Friedenbach via bitcoin-dev

@_date: 2015-08-28 21:28:50
@_author: Btc Drak 
@_subject: [bitcoin-dev] Consensus based block size retargeting algorithm 
I have received a lot of feedback on the original gist[1], reddit[2],
ML and IRC and have reworked the text somewhat.
I also request the BIP maintainer for a BIP number assignment
[1] [2] Pull request:   BIP: XX
  Title: Consensus based block size retargeting algorithm
  Author: BtcDrak   Status: Draft
  Type: Standards Track
  Created: 2015-08-21
A method of altering the maximum allowed block size of the Bitcoin protocol
using a consensus based approach.
There is a belief that Bitcoin cannot easily respond to raising the
blocksize limit if popularity was to suddenly increase due to a mass adoption
curve, because co-ordinating a hard fork takes considerable time, and being
unable to respond in a timely manner would irreparably harm the credibility of
Additionally, predetermined block size increases are problematic because they
attempt to predict the future, and if too large could have unintended
consequences like damaging the possibility for a fee market to develop
as block subsidy decreases substantially over the next 9 years; introducing
or exacerbating mining attack vectors; or somehow affect the network in unknown
or unpredicted ways. Since fixed changes are hard to deploy, the damage could be
Dynamic block size adjustments also suffer from the potential to be gamed by the
larger hash power.
Free voting as suggested by BIP100 allows miners to sell their votes out of band
at no risk, and enable the sponsor the ability to manipulate the blocksize.
It also provides a cost free method or the larger pools to vote in ways to
manipulate the blocksize such to disadvantage or attack smaller pools.
By introducing a cost to increase the block size ensures the mining community
will collude to increase it only when there is a clear necessity, and reduce it
when it is unnecessary. Larger miners cannot force their wishes so easily
because not only will they have to pay extra a difficulty target, then can be
downvoted at no cost by the objecting hash power.
Using difficulty as a penalty is better than a fixed cost in bitcoins because it
is less predictable.
The initial block size limit shall be 1MB.
Each time a miner creates a block, they may vote to increase or decrease the
blocksize by a maximum of 10% of the current block size limit. These votes will
be used to recalculate the new block size limit every 2016 blocks.
Votes are cast using the block's coinbase field.
The first 4 bytes of the coinbase field shall be repurposed for voting as an
unsigned long integer which will be the block size in bytes.
If a miner votes for an increase, the block hash must meet a difficulty target
which is proportionally larger than the standard difficulty target based on the
percentage increase they voted for.
Votes proposing decreasing the block size limit do not need to meet a higher
difficulty target.
Miners can vote for no change by voting for the current block size.
For blocks to be valid the blockhash must meet the required difficulty target
for the vote otherwise the block is invalid and will be rejected.
Every 2016 blocks, the block size limit will be recalculated by the median of
all votes in the last 2016 blocks. This will redefine the block size limit for
the next 2016 blocks.
Blocks that are larger than the calculated base block size limit are invalid and
will be rejected.
The base block size limit may not reduce below 1MB.
This proposal is based on ideas and concepts derived from the writings of
Meni Rosenfeld and Gregory Maxwell.
This work is placed in the public domain.

@_date: 2015-08-29 00:36:20
@_author: Btc Drak 
@_subject: [bitcoin-dev] Consensus based block size retargeting algorithm 
I chose not to address hard fork methodology at this stage because I
wanted to focus on the main algorithm. There are a number of options
open to us for deployment including a simple fixed activation (which I
think is feasible because there is a a lot of awareness and the
industry shows they are willing to rally around a single proposal). If
there are any strong preferences, I can add a deployment section
although I think it's less interesting until we forge a clear way
forward with what blocksize proposal to use.

@_date: 2015-08-29 00:38:53
@_author: Btc Drak 
@_subject: [bitcoin-dev] Consensus based block size retargeting algorithm 
Typo, 0.01111
I am not sure how it is relevant to this proposal because miners are
not paying to include an extra transaction. The BIP details how miners
can vote for a larger block size limit during a window of 2016 blocks.
The block size limit does not increase during this phase. The block
size limit is adjusted at the end of the sample window and the new
size is valid until the next retargetting.
If this wasn't clear, please let me know if I need to clarify any
specifics in the wording of the proposal.

@_date: 2015-08-29 00:46:43
@_author: Btc Drak 
@_subject: [bitcoin-dev] Consensus based block size retargeting algorithm 
On Sat, Aug 29, 2015 at 12:35 AM, Chris Pacia via bitcoin-dev
It is clear from recent events that miners are willing to collaborate
together for the greater good of their industry. Miners have also
publicly shown support for raising the blocksize collaboratively.
Obviously, as transaction volume grows they want to collect as many
transaction fees as possible so if there isnt enough space in blocks,
they're going to vote for increases because it's in their collective
financial interests. The proposal specifically encourages
collaboration and hinders antisocial behaviour, and it specifically
encourages the blocksize to be raised according to demand without
neutering the fee market.

@_date: 2015-08-29 11:15:29
@_author: Btc Drak 
@_subject: [bitcoin-dev] Consensus based block size retargeting algorithm 
On Sat, Aug 29, 2015 at 1:29 AM, Mark Friedenbach via bitcoin-dev
Mark and Jorge,
I am very glad you have brought up this particular objection because
it's something I thought about but was unclear if it was an opinion
that would be shared by others. I chose to omit it from the proposal
to see if it would come up during peer review.
I feel that giving miners a blank cheque to increase blocksize, by any
means, goes against a key design of bitcoin's security model. Full
nodes keep miners honest by ensuring by validating their blocks. Under
any voting-only scheme there is no way for full nodes to keep miners
in cheque because miner have free reign to increase the blocksize.
This problem can be solved by introducing a hard cap on blocksize. By
introducing an upper limit miners now have the freedom to increase
blocksize but only within defined parameters.  Remember my proposal
allows blocksize to increase and decrease in such a way that miners
must collectively agree if they want the size to increase.
I believe the idea of a hard upper limit has become rather politicised
but is essential to the security model of bitcoin.
With respect to the flexicap idea where miners can create a larger
block by paying extra difficulty, I believe that proposal has a
critical flaw because, as Gavin pointed out, it makes it very
expensive (and risky) to include a few extra transactions. I believe
it suffers from tragedy of the commons because there is no incentive
for the mining community to reach consensus. Each and every block is
going to be a gamble, "should we include a few extra transactions at
the risk of losing the block?". Under my proposal miners can
collectively agree to change the blocksize. Let's say they want a 10%
increase, they can collude together to make that increase and once
reached, it remains until they want to change it again. Yet, the upper
hard limit keeps the ultimate control of the maximum block size
squarely in the hands of full nodes.
Whilst the exact number may be up for discussion, I would propose an
initial upper limit of 8MB, so under my proposal the blocksize would
be flexible between 1MB and 8MB.
An alternative methodology to voting in the coinbase would be to
change the vote to be the blocksize itself
1. miners pay extra difficulty to create a larger block.
2. every 2016 blocks the average or median of the last 2016 blocks is
calculated and becomes the new maximum blocksize limit.
This would retain incentive to collude to increase blocksize, as well
as the property of costing to increase while being free to propose
It would still require an upper blocksize limit in order for full
nodes to retain control. Without an upper limit, any proposal is going
to break the security model as full nodes give up some oversight
control over miners.
Another way of looking at these ideas is we're raising blocksize hard
limit (to 8MB or whatever is decided), but making a soft of "softer"
or inner limit part of consensus. Such a concept is not really
departing from the current idea of a soft limit except to make it
consensus enforced. Obviously it's not identical, but I think you can
see the similarities.
Does that make sense?

@_date: 2015-08-29 19:58:23
@_author: Btc Drak 
@_subject: [bitcoin-dev] RFC - BIP: URI scheme for Blockchain exploration 
What about supporting different networks? What if I want to look up
testnet for example?
On Sat, Aug 29, 2015 at 5:31 PM, Richard Moore via bitcoin-dev

@_date: 2015-08-31 10:37:33
@_author: Btc Drak 
@_subject: [bitcoin-dev] Censorship 
While this topic is very interesting, I do not see how it is relevant
to a mailing list dedicated to technical and academic debate. Please
can you take this discussion elsewhere.
On Mon, Aug 31, 2015 at 10:35 AM, Zach G via bitcoin-dev

@_date: 2015-08-31 11:25:21
@_author: Btc Drak 
@_subject: [bitcoin-dev] Censorship 
This is a technical list dedicated to technical discussions revolving
around the bitcoin protocol and related technologies. What I am saying
is your discussion topic is not relevant to the long established theme
of this list. Please have a bit of decorum and respect for people who
joined this list so they could participate in and review
technical/academic topics.
Clearly there *should* be a general bitcoin discussion list somewhere,
I don't disagree (and I have repeatedly asked for one to be created),
but regardless, this list isn't it. The flood of off topic and
non-technical posts make it almost impossible to follow any technical

@_date: 2015-12-21 05:21:55
@_author: Btc Drak 
@_subject: [bitcoin-dev] Capacity increases for the Bitcoin system. 
Thank you for saying this. I also think the plan is solid and delivers
multiple benefits without being contentious. The number of wins are so
numerous, it's frankly a no-brainer.
I guess the next step for segwit is a BIP and deployment on a testnet?

@_date: 2015-02-12 16:57:35
@_author: Btc Drak 
@_subject: [Bitcoin-development] replace-by-fee v0.10.0rc4 
I think that is a misdirection on your part. The point of replace-by-fee is
to make 0-confirms reliably unreliable. Currently people can "get away"
with 0-confirms but it's only because most people arent actively double
spending, and when they do it is for higher value targets. Double spend
attacks *are* happening a lot more frequently than is being admitted here,
according to Peter from work with various clients.
Like single address reuse, people have gotten used to something which is
bad. Generally accepting 0-conf is also a bad idea(tm) and instant
confirmation solutions should be sought elsewhere. There are already
interesting solutions and concepts: greenaddress for example, and
CHECKLOCKTIMEVERIFY micropayment channels for example. Rather than
supporting and promoting risky 0-confirms, we need to spend time on better
alternative solutions that will work for everyone and not during the
honeymoon phase where attackers are fewer.

@_date: 2015-06-01 20:23:43
@_author: Btc Drak 
@_subject: [Bitcoin-development] Fwd: Block Size Increase Requirements 
I did wonder what the post actually meant, I recommend appending /s after
sarcasm so it's clear. Lots gets lost in text. But I agree with you btw his
response was not particularly tactful.

@_date: 2015-06-08 23:07:44
@_author: Btc Drak 
@_subject: [Bitcoin-development] New attack identified and potential 
limit
I think you are forgetting even if you remove the blocksize limit, there is
still a hard message size limit imposed by the p2p protocol. Block would
de-facto be limited to this size.

@_date: 2015-06-21 09:41:44
@_author: Btc Drak 
@_subject: [Bitcoin-development] F2Pool has enabled full replace-by-fee 
BitPay clearly do understand the risks of 0-conf. In case you were not
aware BitPay does not particularly "accept zero confirm transactions". When
a payment is seen on the network the payment screen reports the invoice has
been paid, but that's front-end user facing. On the back end it's marked as
paid but the API exposes the the confirmation status allowing the merchant
to make business decisions about when to progress to fulfilment. A good
example of this is Neteller (a sort of paypal variant) which allows one to
fund the account with fiat using Bitcoin, via Bitpay. When you pay the
bitpay invoice, your account is marked as payment pending until there are
some confirmations.
Coinbase does not expose the confirmation status and from what I understand
(not checked myself) they guarantee payment to merchants for 0-confirm,
regardless of whether they confirm or not.
I want to address something stated by Justus, that signing a payment
message and broadcasting somehow solidifies intent and going back on that
would be fraud. This seriously conflates cryptographic certainty with human
behaviour. For one, humans make mistakes all the time. We get tired, we get
distracted, we make copy paste errors. It's entirely possible on sends a
payment only to find it's been sent to the wrong address or the wrong
amount has been sent or the fee is wrong. Software may also misbehave
(Electrum for example has a weird UI glitch with fees where the specified
fee can be overwritten). r/bitcoin it littered with sad examples. What
ECDSA signing tells is that it was signed by your private key, but nothing
else. It does not say if *you* signed it, or that the message you signed
was correct.

@_date: 2015-06-21 22:31:57
@_author: Btc Drak 
@_subject: [bitcoin-dev] Welcome to the new Bitcoin Dev List 
Thanks for all your hard work setting this up, and to everyone else
On Sun, Jun 21, 2015 at 10:29 PM, Warren Togami Jr.

@_date: 2015-05-05 01:41:52
@_author: Btc Drak 
@_subject: [Bitcoin-development] Relative CHECKLOCKTIMEVERIFY (was CLTV 
Does dropping timestamp refer just to RCLTV or absolutely CLTV also? For
absolute CLTV I think it's important to have timestamps so that trust fund
use cases are practical (e.g. spendable on 18th birthday), because the
exact date a future block will be mined on is unpredictable if it's far
enough in the future (out by days or even weeks).

@_date: 2015-05-05 01:54:33
@_author: Btc Drak 
@_subject: [Bitcoin-development] CLTV opcode allocation; long-term plans? 
Adding a parameter to OP_CLTV makes it much more flexible and is the most
economic use of precious NOPs.
The extra time required is ok and it would be good to make this change to
the PR in time for the feature freeze.

@_date: 2015-05-07 11:42:19
@_author: Btc Drak 
@_subject: [Bitcoin-development] Block Size Increase 
Would you please explain where this 12 months timeframe comes from?

@_date: 2015-05-07 16:39:32
@_author: Btc Drak 
@_subject: [Bitcoin-development] Block Size Increase 
You are conflating consensus with commit access. People with commit access
are maintainers who are *able to merge* pull requests. However, the rules
for bitcoin development are that only patches with consensus get merged. If
any of the maintainers just pushed a change without going through the whole
code review and consensus process there would be uproar, plain and simple.
Please don't conflate commit access with permission to merge because it's
just not the case. No-one can sidestep the requirement to get consensus,
not even the 5 maintainers.

@_date: 2015-05-07 19:03:55
@_author: Btc Drak 
@_subject: [Bitcoin-development] Block Size Increase 
I think you are rubbing against your own presupposition that people must
find and alternative right now. Quite a lot here do not believe there is
any urgency, nor that there is an immanent problem that has to be solved
before the sky falls in.

@_date: 2015-05-07 19:46:14
@_author: Btc Drak 
@_subject: [Bitcoin-development] Block Size Increase 
On Thu, May 7, 2015 at 7:40 PM, Gavin Costin See this response:
 at lists.sourceforge.net/msg07462.html

@_date: 2015-05-07 20:57:20
@_author: Btc Drak 
@_subject: [Bitcoin-development] Block Size Increase 
Consensus is arrived when the people who are most active at the time
(active in contributing to discussions, code review, giving opinions etc.)
agreed to ACK. There are a regular staple of active contributors. Bitcoin
development is clearly a meritocracy. The more people participate and
contribute the more weight their opinions hold.
I am not sure that is fair, your PR was reverted because someone found a
huge exploit in your PR enough to invalidate all your arguments used to get
it merged in the first place.
I don't think it's as simple as that. Objections for the sake of
objections, or unsound technical objections are going to be seen for what
they are. This is a project with of some of the brightest people in the
world in this field. Sure people can be disruptive but their reputation
stand the test of time.
The consensus system might not be perfect, but it almost feels like you
want to declare a state of emergency and suspend all the normal review
process for this proposed hard fork.

@_date: 2015-05-12 20:30:35
@_author: Btc Drak 
@_subject: [Bitcoin-development] CLTV opcode allocation; long-term plans? 
Gavin and  have a point: If there isn't actually scarcity of
NOPs because OP_NOP10 could become  OP_EX (if we run out), it makes
sense to chose the original unparameterised CLTV version  which also
has been better tested. It's cleaner, more readable and results in a
slightly smaller script which has also got to be a plus.

@_date: 2015-05-31 10:35:20
@_author: Btc Drak 
@_subject: [Bitcoin-development] Proposal: A measured response to save 
I seriously doubt if miners and merchants who's income depends on bitcoin
are going to risk a network split. Gavin isn't pedalling some mempool
policy which doesn't affect consensus. The changes have to be universally
adopted by miners and full nodes. If there is any uncertainty about that
global acceptance, those financially dependent on bitcoin will not take the
risk just to be political. You can see how conservative the mining
community is already by their slow upgrade of Bitcoin Core as it is. Even
if some miners and merchants generally support the idea of bigger blocks,
they most certainly are not going to take the risk of leading a hard fork
when there is substantial risk of it failing.
Until there is actual consensus among the technical community I wouldn't be
too concerned.
I don't think anyone is ignoring the issues, nor that everyone accepts that
blocksize may have to eventually change. The overwhelming technical
majority do not agree there is a problem that needs to be immediately
addressed. It would be far more helpful if we focused on stuff that helps
enable level 2 technologies so that bitcoin can actually scale, (like
R/CLTV and malleability fixes which are being delayed by BIP66 rollout and
pending the new "concurrent soft-forks" proposal).
But of course it would be dealt with if and when it becomes necessary. It's
not like there is blanket opposition to increasing the blocksize ever, it's
the matter of if, when and how; but when is defintely not now.
9. My proposal is that we raise the block size limit *gradually*, using an
Automatic or dynamic blocksize increase risks being very difficult to shut
down if later we find it is negatively impacting the ecosystem... and
that's part of the reluctance with bigger blocks because we still have not
studied the potential downsides enough beyond some sketchy and disputed
calculations and overall it's not addressing scalability at all.
Extending blocksize now would be nothing more than a political move. I have
no idea what will be decided in the end, but I do know that in order for
bitcoin to survive, changes must be based on well thought out and discussed
technical merits and not the result of political pressure. Politics and
good software do not mix.

@_date: 2015-11-13 07:49:02
@_author: Btc Drak 
@_subject: [bitcoin-dev] BIP - Block size doubles at each reward halving 
This doesnt give anyone a chance to upgrade and would cause a hard fork the
moment a miner created a >1MB block. Flag day (hard fork) upgrades must
start the change at a sufficient time in the future (greater than the
current block height) to give all nodes the chance to upgrade.
On Fri, Nov 13, 2015 at 3:37 AM, John Sacco via bitcoin-dev <

@_date: 2015-11-21 14:13:05
@_author: Btc Drak 
@_subject: [bitcoin-dev] BIP68: Relative lock-time through consensus-enforced 
As I am sure you are aware, for the last 5 months work has been on-going to
create a relative lock-time proposal using sequence numbers. The
implementation can be found at The current implementation is "mempool-only" and the soft-fork would be
deployed at a later stage.
Over these months there has been various discussion back and forth to
refine the details.
I have updated the BIP text now according to the details that were
discussed in mid-October[1][2] and have extensively clarified the text.
To recap, the overall picture for relative lock-time is that BIP68
introduces consensus rules using some of the nSequence field, while BIP112
creates a new opcode OP_CHECKSEQUENCEVERIFY (PR  so relative
lock-time can be verified from the Bitcoin scripting language. Ideally we
would soft-fork BIP68, BIP112 (CSV) and 113 (MTP) together. BIP113 has been
deployed in 0.11.2 as mempool policy so miners should be applying this
policy as they deploy version 4 blocks for the ongoing CLTV soft-fork
(currently at 42% at the time of writing).
I am writing this mail to draw your attention to the BIP68 pull-requests
and to request final review at:
BIP68 text - BIP68 implementation - Discussion references:
[2]

@_date: 2015-11-24 05:05:32
@_author: Btc Drak 
@_subject: [bitcoin-dev] BIP68: Second-level granularity doesn't make sense 
I think you might be referring to the old specification. I believe this was
brought up before and the specification was changed so the same number of
bits were used for by-time and by-height. Please see
However, I am glad you came to the came conclusions independently because
"re-invention" often confirms good ideas :)

@_date: 2015-11-24 10:30:52
@_author: Btc Drak 
@_subject: [bitcoin-dev] Alternative name for CHECKSEQUENCEVERIFY (BIP112) 
BIP68 introduces relative lock-time semantics to part of the nSequence
field leaving the majority of bits undefined for other future applications.
BIP112 introduces opcode CHECKSEQUENCEVERIFY (OP_CSV) that is specifically
limited to verifying transaction inputs according to BIP68's relative
lock-time[1], yet the _name_ OP_CSV is much boarder than that. We spent
months limiting the number of bits used in BIP68 so they would be available
for future use cases, thus we have acknowledged there will be completely
different usecases that take advantage of unused nSequence bits.
For this reason I believe the BIP112 should be renamed specifically for
it's usecase, which is verifying the time/maturity of transaction inputs
relative to their inclusion in a block.
We could of course softfork additional meaning into OP_CSV each time we add
new sequence number usecases, but that would become obscure and confusing.
We have already shown there is no shortage of opcodes so it makes no sense
to cram everything into one generic opcode.
TL;DR: let's give BIP112 opcode a name that reflects it's actual usecase
rather than focusing on the bitcoin internals.

@_date: 2015-10-01 10:17:52
@_author: Btc Drak 
@_subject: [bitcoin-dev] Bitcoin Core 0.12.0 release schedule 
On Thu, Oct 1, 2015 at 10:05 AM, Marcel Jamin via bitcoin-dev <
We do: a.b.c, the next major version is, 0.12.0, and maintenance releases
are 0.12.1 etc. Release candidates are 0.12.0-rc1 for example.

@_date: 2015-10-05 18:03:05
@_author: Btc Drak 
@_subject: [bitcoin-dev] This thread is not about the soft/hard fork 
You are absolutely right and this is something I have often unsuccessfully
tried to explain as "disruption strategies". The problem is that most
people in the technical community assume good faith at all times, which
plays right into the frame required for disruption.
However, I would like to challenge your assumption of point 1 that that by
Mike making a rabble, it somehow makes CLTV deployment controversial. His
arguments have  been refuted.
Mike has not presented anything convincing and history actually shows that
ISM works, and we have learned how to make it even more streamlined. We
know ISM has consensus because miners have accepted ISM for past softfork
Simply making a noise does not make something controversial. When it is
controversial, it is obvious and plain to see.
On Mon, Oct 5, 2015 at 4:56 PM, Sergio Demian Lerner via bitcoin-dev <

@_date: 2015-10-05 18:35:53
@_author: Btc Drak 
@_subject: [bitcoin-dev] This thread is not about the soft/hard fork 
No, that is not correct and you are distorting facts to fit your argument.
We have discussed the tradeoffs of each method in general, but that does
not make hard forks or soft forks controversial in an of itself.
There is technical consensus to roll out CLTV by ISM, and if somehow you
are right, it will come out during deployment in much the same way as your
recent attempt at rolling out a controversial hardfork.

@_date: 2015-10-05 18:52:25
@_author: Btc Drak 
@_subject: [bitcoin-dev] This thread is not about the soft/hard fork 
On Mon, Oct 5, 2015 at 6:26 PM, Tom Zander via bitcoin-dev <
If you are referring to some of Mike's PRs that were either refused or
reverted, it was because they where substantial technical objections to
them. This isn't even in the same ballpark.
Surely you see the absurdity of arguing against soft forks after we
successfully used them already for BIP34 and BIP66?

@_date: 2015-10-05 23:56:27
@_author: Btc Drak 
@_subject: [bitcoin-dev] This thread is not about the soft/hard fork 
On Mon, Oct 5, 2015 at 6:33 PM, Peter R via bitcoin-dev <
There is no development gridlock. Look at the IRC logs for core-dev; look
at the pull requests; look a the merge history: Development is vibrant.
Developers are very active. You are manufacturing a crisis convenient to
your narrative, but it is far from the actual reality on the ground.
Please desist from this intellectual dishonesty and toxicity.

@_date: 2015-10-06 01:28:57
@_author: Btc Drak 
@_subject: [bitcoin-dev] CHECKSEQUENCEVERIFY - We need more usecases to 
Regarding the keeping nSequence for future expansion I believe this has
been covered in the specification section of BIP68[1]: For transaction
version >= 2, if the MSB of nSequence is unset, the field is interpreted as
relative locktime, otherwise no special consensus meaning is attached (and
thus free for repurposing in the future). Effectively if the MSB is set,
the remaining 31 bits (out of 32) are free.
Also please note the BIP112 text has been updated with several more

@_date: 2015-10-15 17:27:43
@_author: Btc Drak 
@_subject: [bitcoin-dev] CHECKSEQUENCEVERIFY - We need more usecases to 
I am sorry for not communicating more clearly. Mark and I discussed your
concerns from the last meeting and he made the change. The BIP text still
needs to be updated, but the discussed change was added to the PR, albeit
squashed making it more non-obvious. BIP68 now explicitly uses 16 bits with
a bitmask. Please see the use of SEQUENCE_LOCKTIME_MASK
and SEQUENCE_LOCKTIME_GRANULARITY in the PR
    /* If CTxIn::nSequence encodes a relative lock-time, this mask is
     * applied to extract that lock-time from the sequence field. */
    static const uint32_t SEQUENCE_LOCKTIME_MASK = 0x0000ffff;
    /* In order to use the same number of bits to encode roughly the
     * same wall-clock duration, and because blocks are naturally
     * limited to occur every 600s on average, the minimum granularity
     * for time-based relative lock-time is fixed at 512 seconds.
     * Converting from CTxIn::nSequence to seconds is performed by
     * multiplying by 512 = 2^9, or equivalently shifting up by
     * 9 bits. */
    static const int SEQUENCE_LOCKTIME_GRANULARITY = 9;
I am also much happier with this last tightening up of the specification
because it removes ambiguity. 512s granularity makes sense within the
context of the 10 minute block target.
Thank you for spending so much time carefully considering this BIP and
reference implementation and please let me know if there there are any
remaining nits so we can get those addressed.
On Thu, Oct 15, 2015 at 2:47 PM, Alex Morcos via bitcoin-dev <

@_date: 2015-10-22 18:01:53
@_author: Btc Drak 
@_subject: [bitcoin-dev] Memory leaks? 
I think this thread has gotten to the stage where it should be moved
to an issue on Github and not continue to CC the bitcoin-dev list (or
any other list tbh).
On Thu, Oct 22, 2015 at 5:27 PM, Jonathan Toomim via bitcoin-dev

@_date: 2015-09-01 19:12:13
@_author: Btc Drak 
@_subject: [bitcoin-dev] Open Block Chain Licence, BIP[xxxx] Draft 
Without commenting on your proposal at all, the general problem with
licensing after the fact is you require the permission of every
copyright holder in order to make the change.
On Tue, Sep 1, 2015 at 2:30 PM, Ahmed Zsales via bitcoin-dev

@_date: 2015-09-01 23:02:52
@_author: Btc Drak 
@_subject: [bitcoin-dev] Open Block Chain Licence, BIP[xxxx] Draft 
I think it gets worse. Who are the copyright owners (if this actually
applies). You've got people publishing transaction messages, you've
got miners reproducing them and publishing blocks. Who are all the
parties involved? Then to take pedantry to the next level, does a
miner have permission to republish messages? How do you know? What if
the messages are reproducing others copyright/licensed material? It's
not possible to license someone else's work. There are plenty rabbit
holes to go down with this train of thought.
On Tue, Sep 1, 2015 at 8:36 PM, Ahmed Zsales via bitcoin-dev

@_date: 2015-09-01 23:47:10
@_author: Btc Drak 
@_subject: [bitcoin-dev] Open Block Chain Licence, BIP[xxxx] Draft 
I have read the proposal. I think you missed my point: every existing
transaction author would be required to agree to your proposals for
them to be legal, and that's clearly impossible. You'd also need every
single miner who published a block. You're much better taking the line
that actually, the data is public domain and unrestricted based on
various assumptions.
You make some assumptions that transaction authors use Bitcoin Core to
"contract with the network", but in fact transactions are written and
broadcast by a number of means, arguably very few are created by
Bitcoin Core these days. How exactly do you expect to get a legally
binding agreement from all future transaction authors agreeing to your
terms? How would you prove Alice agreed 10 years later? If it was a
proprietary system like Paypal who can force you to agree or close
your account, the Bitcoin protocol is permissionless and anyone can
author a transaction using any means they like, not just Bitcoin Core.
So again I come back to the point your proposal would have to get
permission from all existing authors, and all future authors to work.
Overall I think the proposal is trying to fix something that doesn't
need fixing and get into a quagmire in the process. In fact, I see it
as an impossible task.

@_date: 2015-09-01 23:56:32
@_author: Btc Drak 
@_subject: [bitcoin-dev] RFC - BIP: URI scheme for Blockchain exploration 
On Sun, Aug 30, 2015 at 3:20 AM, Jorge Tim?n
That's a very sweeping generalisation indeed. Why should two chains
have to have a separate genesis? It's cleaner, but it's certainly not
a necessity. You cant exclude this case just because it doesn't fit
your concept of neat and tidy. Other BIP proposals that account for
alternative chains do not rely on the genesis hash, but instead an
identifier. Why should it be any different here? How would you account
for a world with XTCoin and Bitcoin which would also share the same
genesis hash, but clearly not be the same coin.
When I brought up the issue originally, I deliberately steered away
from altchains choosing to focus on networks like mainnet, testnet
because I think it's easier to repurpose a protocol for an altcoin
than it is to make the proposal work for all cases. Take the payment
protocol for example. The BIP specifies a URI with bitcoin: well it's
just as easy to repurpose that for litecoin: etc than adding something
like ?cointype=litecoin, so that was my reason for not mentioning
altcoins at all.
If the proposal is made to account for altcoins, genesis hash is
definitely not desirable, or at least not genesis hash in isolation,
and if that's the case, better to have an identifier.

@_date: 2015-09-01 23:59:36
@_author: Btc Drak 
@_subject: [bitcoin-dev] RFC - BIP: URI scheme for Blockchain exploration 
On Tue, Sep 1, 2015 at 5:12 PM, Danny Thorpe via bitcoin-dev
There's nothing stopping two coins having the same magic bytes, but
communicating on separate ports.
The only sane way to me see to have cointype like BIP44.
See

@_date: 2015-09-03 12:20:08
@_author: Btc Drak 
@_subject: [bitcoin-dev] BIP 100 specification 
We should avoid discussing actual hard fork/softfork deployment
methodologies when discussing blocksize proposals because deployment
is a separate issue. As a recent case in point, look at how BIP65
(CHECKLOCKTIMEVERIFY) specifically avoided the issue of how to deploy.
That lead to a focused discussion of the functionality and relatively
quick inclusion.
Deployment really is a separate issue than the mechanics of how BIP100
will function after activation.
On Thu, Sep 3, 2015 at 8:57 AM, jl2012 via bitcoin-dev

@_date: 2015-09-03 16:58:04
@_author: Btc Drak 
@_subject: [bitcoin-dev] BIP 100 specification 
It's not a matter of avoiding the subject, it's a whole separate
discussion and in the interests of efficient discussion, it is best
done separately. There's a whole BIP dedicated to the discussion of
consensus forks which you should probably give some input in also,
BIP99 [1]
Once we come to an agreement and can say "here's what we're doing
about blocksize, it will be X, or we'll raise by this algo", then we
can discuss the best way to implement the hard fork.
[1]

@_date: 2015-09-03 18:32:09
@_author: Btc Drak 
@_subject: [bitcoin-dev] BIP 100 specification 
Just use a 4-byte unsigned integer where the integer is the size in
bytes. It's concise and less complex (and less complex to implement).
There's no need for human readable strings here.
On Thu, Sep 3, 2015 at 5:35 PM, Jeff Garzik via bitcoin-dev

@_date: 2015-09-03 19:28:52
@_author: Btc Drak 
@_subject: [bitcoin-dev] block size - pay with difficulty 
Maybe Jeff can clarify but my communications with him seemed to imply
he didn't think any kind of difficulty penalty scheme is workable. I
strongly dispute that assertion.
On Thu, Sep 3, 2015 at 7:23 PM, Jorge Tim?n

@_date: 2015-09-04 00:45:13
@_author: Btc Drak 
@_subject: [bitcoin-dev] Proposed minor change to BIP 01 to use a PR for 
It's a good idea. It would remove friction from the process and
assignment is auditable to boot, something I've had difficulty with in
the past. Almost every time I see a BIP number I would wonder, is that
self-assigned (and thus invalid) or has it been assigned by the BIP
On Fri, Sep 4, 2015 at 12:18 AM, Gregory Maxwell via bitcoin-dev

@_date: 2015-09-04 16:40:26
@_author: Btc Drak 
@_subject: [bitcoin-dev] BIP 100 specification 
If you read between the lines of what was recently changed and why
(reducing to 2MB), it seems reasonable to assume BIP101's allowance
opens up some of the attack vector again.
On Fri, Sep 4, 2015 at 4:37 PM, Simon Liu via bitcoin-dev

@_date: 2015-09-04 20:20:58
@_author: Btc Drak 
@_subject: [bitcoin-dev] [BIP/Draft] BIP Acceptance Process 
I'm rather perplexed about this proposal. What exactly is wrong with
the existing BIPs process? I mean, it seems to me anyone can publish a
BIP pretty easily in the BIPs repository. There doesnt seems to be any
real barrier to entry whatsoever. I know there have been all manner of
aspersions, but having just written two BIPs there was no friction at
Whether the ecosystem adopts a BIP is another question of course, but
that's out of scope of the BIPs project anyhow. Take BIP101
controversial as it gets, but it's there. Whether Bitcoin implementers
implement it is another kettle of fish and a matter for each project
to decide. It's absolutely NOT the realm of the BIPs project itself.
Bitcoin Core does not make any consensus critical changes with a BIP.
Where one seeks to establish certain standards, say for privacy, a BIP
would be appropriate so the ecosystem can harmonise methodology across
the board.
The status of a BIP is not really determined by anyone, it's by
adoption - that's where consensus happens. There's a little legroom
around this but I'm not entirely sure what you are trying to solve.
Yes the process is loose, but is it broken? There have been a flood of
BIPs added recently with zero bureaucracy or friction.
BIP0001 is the BIP that defines the BIP process. Interestingly enough
the only BIP that might be controversial is in fact a BIP to change
the way BIPs are handled!
So I'd really prefer to start this conversation with a breakdown of
what you think is broken first before tackling what may or may not
need fixing. I would be very cautious bringing "administrative"
burdens to the process or evicting common sense from the proceedings.
Much of the debates around consensus building seem to negate the
importance of common sense and the simple fact that "it's obvious when
you see it".
I'm sure there can be improvements, but for me personally, I need to
see what is broken before I can make any judgement on a potential way
forward, and if it's not broken, we should leave it alone.
On Fri, Sep 4, 2015 at 5:40 AM, Andy Chase via bitcoin-dev

@_date: 2015-09-07 11:26:26
@_author: Btc Drak 
@_subject: [bitcoin-dev] Problem compiling bitcoin-core 
I mailed the solution privately, but for the record he was using the
wrong build option which should have been --with-gui=no
On Mon, Sep 7, 2015 at 9:58 AM, Sriram Karra via bitcoin-dev

@_date: 2015-09-07 20:37:06
@_author: Btc Drak 
@_subject: [bitcoin-dev] [BIP/Draft] BIP Acceptance Process 
Sorry not to reply earlier. I have a rather long post. I've split it
into two sections, one explaining the background and secondly talking
very specifically about your proposal and possible areas to look at.
I think there's a key misunderstanding about BIPs and "who decides
what in Bitcoin". A BIP usually defines some problem and a solutions
or helps communicate proposals to the technical community. They are
sort of mini white papers on specific topics often with reference
implementations attached. They may be consensus critical, or not. The
process for getting a BIP published is fairly loose in that it really
just requires some discussion and relevance to Bitcoin regardless of
whether the proposal is something that would be accepted or used by
others in the ecosystem. The BIP editor is obviously going to filter
out obvious nonesense and that shouldn't be controversial but obvious
when you see it.
You need to separate out the idea of BIPs as is, and implementations
of BIPs in Bitcoin software (like Bitcoin Core).
Take BIP64 for example. It's a proposal that adds a service to nodes
allowing anyone to query the UTXO set on the p2p network. Bitcoin Core
as a project has not implemented it but was instead implemented in XT
and is utilised by Lighthouse. So the BIP specification is there in
the BIPs repository. As far as the bitcoin ecosystem goes, only
Bitcoin XT and lighthouse utilise it so far.
BIP101 is another example, but one of a consensus critical proposal
that would change the Bitcoin protocol (i.e. requires a hard fork). It
was adopted by only the XT project and so far no other software. At
the time of writing miners have chosen not to run implementations of
You can see the BIPs authoring and publishing process is a separate
issue entirely to the implementation and acceptance by the Bitcoin
For non-consensus critical proposals like BIP64, or maybe one relating
to privacy (how to order transaction output for example), you could
judge acceptance of the proposal by the number of software projects
that implement the proposal, and the number of users it impacts. If a
proposal is utilised by many projects, but not the few projects that
have the majority of users, one could not claim wide acceptance.
For consensus critical proposals like BIP66 (Strict DER encoding) this
BIP was implemented in at least two bitcoin software implementations.
Over 95% of miners adopted the proposal over a 4.5 month period. The
BIP became de facto accepted, and in fact, once 95% lock-in was
achieved, the BIP became Final by rights that the consensus rules for
the Bitcoin network had changed.
In the case of consensus critical proposals like that, you can only
write proposals, implement it in software and hope they are adopted.
Now where does the confusion arise? Well, Bitcoin Core is the de facto
reference implementation by virtue of having the largest technical
contributor base and the widest userbase of any Bitcoin full node
implementation. This is where I believe, the community get stuck in
their assumptions and is so obvious it may have been overlooked.
Consensus rule changes to Bitcoin Core are always documented as BIPs
so the exact details can be picked up by other software implementers
(if they so desire). Take CHECKLOCKTIMEVERIFY a new widely anticipated
opcode. The proposal implemented in Bitcoin Core and eventually
merged. Peter also authored BIP65 (required because without it, his
proposal could not be considered for Bitcoin Core).
It is not that BIP65 was somehow "accepted", in fact, as it stands,
BIP65 is still just a draft because while there is a BIP and a
reference implementation in Bitcoin Core, the consensus changes to the
Bitcoin protocol have not been proposed to the community (through a
soft fork), and thus acceptance is still only a possibility (although
acceptance is extremely likely because service providers are literally
chomping at the bit waiting for deployment).
Also I would like to note that it's only an internal rule of Bitcoin
Core that consensus rule changes require a formal BIP. It is not a
requirement laid down from the BIP gods. BIPs simply serve as a way to
communicate ideas and proposals. The community at large will decide if
a BIP becomes widely adopted or not. Of course, Bitcoin Core has a
major influence on this because they have the largest user base. It is
relevant to say the large userbase is not just a historical artefact
by virtue of being the first Bitcoin implementation. Bitcoin Core is
widely trusted by commercial users because of the high developer
count, wide technical expertise and relative security given knowing
that they will be supported with security and maintenance releases.
YOUR PROPOSAL
Getting back to your specific proposal. It seems to focus more on
getting BIPs accepted in the sense of published and missed the wider
picture. As I have detailed, getting published isnt a problem. Anyone
can make a proposal, so long as it's not obviously off topic or
nonsensical, there is no grounds to refuse to publish it.
Any part of your proposal which seems to infer governance of Bitcoin
is misplaced because it's not the place of BIPs. The Bitcoin Core
project is not the BIPs project and their rules are their own. They
are one implementation, and very influential one yes, but, not the one
true implementation to rule them all.
Where I do think the BIP-1 text falls down is with the workflow of
ACCEPTED/REJECTED because it does not really define who is accepting
and rejecting what and misses much of the reality of the process in
the real world. Given the purpose of BIPs is a formal way to
communicate technical proposals to the bitcoin community (i.e.
implementers and protocol consumers) the work flow needs to be
Anyone can submit a proposal and the state of the proposal can be
DRAFT or WITHDRAWN but draft here is confusing. Draft would suggest
it's a work in progress, but the proposal is "complete" when the
proposer is happy with the final text. Downstream implementers should
not attempt to write code (in my opinion) until the proposal has been
finalised by the authors. Only the author has the right to say when
their proposal is finished.
The states of Accepted / Rejected are easy for consensus critical
changes, especially once versionbits softforking is enacted and
proposals will have a timeout associated. Certainly for deployed
proposals you could say the proposal is "active" or better still
"pending approval". However "accepted" and "rejected" is difficult for
say privacy standards because how can you gauge or measure it. As I
said earlier, you might have a lot of small projects implementing some
privacy standards, but if the major wallets dont, and thus the
majority of users, how would you gauge it?
Something is a standard only when it becomes a standard by virtue of
having become a standard :)
"Replaced" is an easy state, when another proposal supercedes and
replaces an older one. Again the wording could be better here.
"deprecated" would also be appropriate in some circumstances.
I'm not making a concrete proposal, I'm just highlighting where BIP-1
sort of falls apart because of an incongruence with the workflow
states and what actually happens in real life.
Local to the BIPs project, I do think the BIPs editor, and guidelines
try to filter proposals by raising the bar: i.e. requiring proposal to
be polished through peer review before they are formally published as
draft BIPs. Though this process an author would a) get most of his
details right first time, and b) have some relative confidence his/her
idea was useful and withdraw any obvious bad proposals themselves. An
author may still decide, despite many objections from their peers they
want to proceed with publishing and nothing should stop them providing
it's relevant to the Bitcoin space. Peer review pressure is likely to
act as the best filtering mechanism in this case anyway (no-one would
want to be seen as an ass right?). Personally speaking, I felt quite
nervous proposing my own blocksize ideas. I sought opinions in private
first and had it been widely decried would probably not have pursued
it any further.
So in summary, I think some aspects of BIP-1 could do with polishing
as I have detailed, specially around the "workflow states" but not to
introduce any committees to the process, but where possible to extract
state from the real state of the BIP in the real world. In fact, this
is my direct argument against any forms of committee, in that the
state of a BIP is determined by factors outside of any particular
individual's or groups' purview.

@_date: 2015-09-08 09:49:31
@_author: Btc Drak 
@_subject: [bitcoin-dev] Dynamic limit to the block size - BIP draft 
If blocksize can only increase then it's like a market that only goes
up which is unrealistic. Transaction will volume ebb and flow
significantly. Some people have been looking at transaction volume
charts over time and all they can see is an exponential curve which
they think will go on forever, yet nothing goes up forever and it will
go through significant trend cycles (like everything does). If you
dont want to hurt the fee market, the blocksize has to be elastic and
allow contraction as well as expansion.
On Tue, Sep 8, 2015 at 8:45 AM, Washington Sanchez via bitcoin-dev

@_date: 2015-09-15 10:55:34
@_author: Btc Drak 
@_subject: [bitcoin-dev] libconsensus and bitcoin development process 
I also share a lot of Jeff's concerns about refactoring and have voiced
them several times on IRC and in private to Jorge, Wladamir and Greg. I
meant to do a write up but never got around to it. Jeff has quite
eloquently stated the various problems. I would like to share my thoughts
on the matter because we really do need to come up with a plan on how this
issue is dealt with.
Obviously, Bitcoin Core is quite tightly coupled at the moment and
definitely needs extensive modularisation. Such work will inevitably
require lots of bulk code moves and then finer refactoring. However, it
requires proper planning because there are lots of effects and consequences
for other people contributing to Core and also downstream projects relying
on Core:
1. Refactoring often causes other pull requests to diverge and require
rebasing. Continual refactoring can put PRs in "rebase hell" and puts a big
stress on contributors (many of whom are part time).
2. Version to version, Bitcoin Core changes significantly in structure. 0.9
to 0.10 is unrecognisable. 0.10 to 0.11 is even more so. This makes makes
it hard to follow release to release and the net result is less people
upgrade (especially think of miners trying to keep their patch sets working
while trying not to disrupt or risk their mining operations).
3. Continual refactoring increases risk: we're human, and mistakes will
slip through peer review. This is especially concerning with consensus
critical code and this makes it difficult to merge such refactoring often,
which of course exacerbates the problem.
The net negative consequence is it is harder to contribute to Core, harder
for the Core maintainers to merge and harder for downstream/dependent
projects/implementations to keep up.
Suggested Way Forward
With the understanding that refactored code by definition must not change
behaviour. There are three major kinds of refactoring:
1. code moves (e.g. separating concerns into different files);
2. code style;
3. structural optimisation and consolidation (reducing LOC, separating
concerns, encapsulation etc).
Code moves(1) and CS(2) are easy to peer review and merge quickly. The
third kind(3) requires deeper analysis to ensure that while the code
changed, the behaviour (including any bugs) did not.
We must resist all temptation to fix bugs or tack on minor fixes and tweaks
during refactoring: pull requests should only be refactoring only, with no
net change to behaviour. Keeping discipline makes it much easier to verify
and peer review and this faster to merge.
With respect to Code moves and CS, I believe we should have a "refactoring
fortnight" where we so the bulk of code move-only refactoring plus CS where
necessary. This is by fat the most disruptive kind of change because it
widely affects other PRs mergeability. We should aim to get most of this
done in one go, so that it's not happening in dribs and drabs over months
and many releases. Once done, it gives everyone a good idea to the overall
new structure and where one can expect to find things in the future. The
idea here is to help orientation and not have to continuously hunt for
where things have moved to.
To be clear, I am strongly suggesting code move-only refactoring PRs not be
mixed with anything else. Same for CS changes. This makes the PRs extremely
easy to vet and thus quick to merge.
Towards this end, maybe there should be an IRC meeting to agree the initial
moves, then someone who has the stomach for it can get on and do it -
during that time, we do not merge anything else. We need to bite the bullet
and break the back out of code moves.
With regards to CS, I think we do need to get CS right, because a continual
dribble of CS changes also makes diffs between releases less easy to
follow. Much of CS checking can be automated by the continuous integration
so authors can get it right easily. It can be just like a Travis check.
With respect to the 3rd kind of refactoring, we need to set some standards
and goals and aim for some kind of consistency. Refactoring needs to fulfil
certain goals and criterion otherwise contributors will always find a
reason to fiddle over and over forever. Obvious targets here can be things
like proper encapsulation and separation of concerns.
Overall, refactoring should be merged quickly, but only on a schedule so it
doesn't cause major disruption to others.
Obviously the third kind of refactoring more complex and time consuming and
will need to occur over time, but it should happen in defined steps. As
Jeff said, one week a month, or maybe one month a release. In any case,
refactoring changes should be quickly accepted or rejected by the project
maintainer and not left hanging.
Finally, refactoring should *always* be uncontroversial because essentially
functionality is not changing. If functionality changes (e.g. you try to
sneak in a big fix or feature tweak "because it's small") the PR should be
rejected outright. Additionally, if we break down refactoring into the
three kinds stated above, peer review will be much more straightforward.
On Tue, Sep 15, 2015 at 5:10 AM, Jeff Garzik via bitcoin-dev <

@_date: 2015-09-16 16:53:08
@_author: Btc Drak 
@_subject: [bitcoin-dev] [BIP Proposal] Version bits with timeout and 
I think you've covered all the issues discussed now. +1 for submitting to
BIPs repo to get an official number.
Are you planning to write the implementation?
On Sun, Sep 13, 2015 at 7:56 PM, Rusty Russell via bitcoin-dev <

@_date: 2015-09-16 23:40:06
@_author: Btc Drak 
@_subject: [bitcoin-dev] [BIP-draft] CHECKSEQUENCEVERIFY - An opcode for 
Where do we stand now on which sequencenumbers variation to use? We really
should make a decision now.
On Fri, Aug 28, 2015 at 12:32 AM, Mark Friedenbach via bitcoin-dev <

@_date: 2015-09-17 20:12:08
@_author: Btc Drak 
@_subject: [bitcoin-dev] Fill-or-kill transaction 
Forgive me if I have missed the exact use-case, but this seems overly
complex. Surely fill-or-kill refers to getting a transaction confirmed
within a few confirms or to drop the tx from the mempool so it wont be
considered for inclusion anymore. As such, you could just repurpose a small
range of nLocktime such that a TX will be accepted into mempool for a
specific period before expiring.
On Thu, Sep 17, 2015 at 7:41 PM, jl2012 via bitcoin-dev <

@_date: 2015-09-18 07:42:42
@_author: Btc Drak 
@_subject: [bitcoin-dev] Fill-or-kill transaction 
On Fri, Sep 18, 2015 at 4:27 AM, jl2012 via bitcoin-dev <
Sure, you can make the scheme I describe consensus based by adding the rule
tx is not valid to mine after expiry: this still keeps the simplicity I

@_date: 2015-09-18 21:24:50
@_author: Btc Drak 
@_subject: [bitcoin-dev] Weekly development meetings on IRC 
Google calendar is localised, so it doesn't matter. The problem with
quoting UTC anyway it the meeting times are going to change for those that
observe DST. It would be much better to quote an actual timezone of an
actual area so it will remain constant, like 1700 CEST, or 0900AM PDT for
example. Otherwise when the clocks change, what was a convenient meeting
time will become inconvenient for some.
On Fri, Sep 18, 2015 at 9:14 PM, Matt Corallo via bitcoin-dev <

@_date: 2015-09-18 21:34:59
@_author: Btc Drak 
@_subject: [bitcoin-dev] Weekly development meetings on IRC 
Urgh... Can we hardfork time? It's clearly in need of an upgrade...

@_date: 2015-09-23 17:07:31
@_author: Btc Drak 
@_subject: [bitcoin-dev] Weak block thoughts... 
For anyone who missed the discussions of weak blocks, here are the Scaling
Bitcoin's transcripts:
(under Network Propagation).
On Wed, Sep 23, 2015 at 4:43 PM, Gavin Andresen via bitcoin-dev <

@_date: 2015-09-27 21:41:02
@_author: Btc Drak 
@_subject: [bitcoin-dev] Let's deploy BIP65 CHECKLOCKTIMEVERIFY! 
Small correction, the suggestion is to aim to roll out CLTV+CSV together by
0.12 release, using IsSuperMajority() (or versionbits if it is ready by
then). If CSV is not ready by then, we'd just roll out CLTV.
However, the CSV related pull requests are ready for final review and if
that can happen soon I don't see why we wouldn't roll CLTV+CSV out together
before 0.12. A considerable amount of time, discussion and iterations have
occurred for the related PRs and I believe they are at the point of
consensus modulo final review before merging.
Mempool-only sequence number constraint verification
Mempool-only CHECKSEQUENCEVERIFY
Mempool-only Median time-past as endpoint for lock-time calculations

@_date: 2015-09-28 15:05:40
@_author: Btc Drak 
@_subject: [bitcoin-dev] Let's deploy BIP65 CHECKLOCKTIMEVERIFY! 
Of course there is good technical consensus for CLTV by IsSuperMajority()
in the same way as BIP66 was rolled out. I believe the only open question
is whether we have to account for XT's use of versionbits (because the
standard has not been finalised). One can take the view that it is a non
issue given the almost negligible number of BIP101 blocks, but it certainly
goes away if XT also merges BIP65/CLTV.
As for risks, I think we learned a lot from BIP66:
1. miners are now aware of the risks of SPV mining near activation and are
financially incentivised not to during that period.
2. As for SPV wallets need to handle awareness of the new blocks. BitcoinJ
can play a pivotal role: as far as I am aware if we'd thought about adding
handling to BitcoinJ before activation rather than after activation[1][2],
the SPV issues would have been mitigated for the vast majority who rely on
the library. To me, this particular issue highlights our collective failure
to communicate the necessity for additional SPV handling requirements and
other preparation the ecosystem should engage in during a soft fork. This
is something we should definitely add to the release notes for the next
soft fork and advertise widely. Certainly it MUST be well documented in the
BIP65 deployment section, which it is currently not.
Lastly your objections came across very strongly (at least to my
understanding) so I am curious: Peter stated Gavin is OK with adding CLTV
support to XT, and assuming that is the case, will you object to merging it
or similarly object to adding the necessary block handling to BitcoinJ?

@_date: 2016-08-19 00:05:59
@_author: Btc Drak 
@_subject: [bitcoin-dev] Status updates for BIP 9, 68, 112, and 113 
Fine by me to update BIP68 and BIP112 to Final status. The forks have

@_date: 2016-12-19 06:39:46
@_author: Btc Drak 
@_subject: [bitcoin-dev] Planned Obsolescence 
Maybe something trivial like lack of Python 3 dependency on older CentOS
On Mon, Dec 19, 2016 at 2:22 AM, Matt Corallo via bitcoin-dev <

@_date: 2016-02-05 23:04:09
@_author: Btc Drak 
@_subject: [bitcoin-dev] BIP proposal: Increase block size limit to 2 
It's great to finally see a BIP, although seems strange to ask for feedback
after releasing binaries.
In any case, the issue isn't about "whether or not it is a good idea to
roll out a hard fork", the question has always been about how to do safe
hard fork deployment and what the technological requirements are for doing
so. Your BIP/blogs do not actually address any of this. 75% miner
signalling with a 28 day flag day thereafter gives virtually no time for
the entire ecosystem to migrate and is widely considered unsafe. It's
plainly obvious that an entire ecosystem of 5000 full nodes cannot be
prepared in a month.

@_date: 2016-01-29 07:21:10
@_author: Btc Drak 
@_subject: [bitcoin-dev] BIP Classification Process 
Your proposal does not solve the issue related to Mike creating his own
fork. He created his own for because he had a non-consensus feature set
that Bitcoin Core disagreed with and he wanted. That is to be _encouraged_.
I also maintain my own Bitcoin fork with a specific (non-consensus) feature
for the same reason and I am perfectly happy with the arrangement, as are
my userbase.
Classification of BIPs is fine, I have no problem with that and I support
your BIP, but your proposition it would have stopped Mike from creating his
own distribution is false (nor desirable): it was down to a strong
differing of technical opinions between Mike and a dozen other developers
as well as node security concerns (which were proved correct).
On Fri, Jan 29, 2016 at 12:52 AM, Eric Lombrozo via bitcoin-dev <

@_date: 2016-03-16 20:43:09
@_author: Btc Drak 
@_subject: [bitcoin-dev] BIP 2 promotion to Final 
I have an objection about "BIP comments" in BIP2. I think BIPs should be
self contained, but the specification recommends posting comments to the
Bitcoin Wiki (bitcoin.it). I think this is a bad idea and external sources
are bound to go stale over time as can be evidenced by a number of existing
BIPs which link to external content that has long since expired. Comments
should be made instead using the Wiki feature at bitcoin/bips itself (which
can be enabled in the administration settings).
On Tue, Mar 8, 2016 at 7:04 PM, Luke Dashjr via bitcoin-dev <

@_date: 2016-03-18 09:42:16
@_author: Btc Drak 
@_subject: [bitcoin-dev] BIP 2 promotion to Final 
BIP2 does not state the comments section is where discussion happens for
the BIP, but for a sort of final summary.
Seems weak, it's much easier to sign up for a Github account and most have
one already. It's certainly easier than either paying to get edit
privileges on the Bitcoin Wiki find someone to convince you're genuine an
obscure IRC channel.
I'm not sure that is the reason why, but in any case, Github is a more
sensible place because of the collaborative features which is why they
became the centre of OSS software development for hundreds of thousands of
I am sorry but it has not. I still strongly object to using the Bitcoin
Wiki or any external source source for the commentary part of BIP2. I
believe it should be done on using the Wiki feature at bitcoin/bips. If
that is not acceptable, then I would suggest a separate page in the bip
assets folder, called bip/comments.md. On a side note, more complex
reference implementation code should be stored in that folder too.
Certainly those could be on the comments page.

@_date: 2016-11-15 17:45:45
@_author: Btc Drak 
@_subject: [bitcoin-dev] [BIP Proposal] Buried Deployments 
I think this is already covered in the BIP text:-
"As of November 2016, the most recent of these changes (BIP 65,
enforced since December 2015) has nearly 50,000 blocks built on top of
it. The occurrence of such a reorg that would cause the activating
block to be disconnected would raise fundamental concerns about the
security assumptions of Bitcoin, a far bigger issue than any
non-backwards compatible change.
So while this proposal could theoretically result in a consensus
split, it is extremely unlikely, and in particular any such
circumstances would be sufficiently damaging to the Bitcoin network to
dwarf any concerns about the effects of this proposed change."
On Mon, Nov 14, 2016 at 6:47 PM, Eric Voskuil via bitcoin-dev

@_date: 2016-10-02 20:36:06
@_author: Btc Drak 
@_subject: [bitcoin-dev] About ASICBoost 
It is critically important to the future of Bitcoin that consensus
code avoid any unnecessary entanglements with patents because "the
free market" allows you and anyone else to make consensus change
proposals that rely on (unknown) patents - but this is something we
should all be working to avoid, as it unnecessarily hinders Bitcoin
development and everyone's ability to deploy. Consensus code must not
be hindered by patents and Bitcoin should retain its permissionless
When you proposed the extra nonce space BIP [1], you had already
applied for your ASICBOOST patent [2] without disclosure in the BIP
[1] nor in your Bitcoin Core pull request  [2].
The ASICBOOST patent [2] describes the same process as in the BIP [1]
and proposed code [3] "As we explained in our Provisional Application,
it has been proposed to partition the 4-byte Version field in the
block header (see, Fig. 6) and use, e.g., the high 2-byte portion as
additional nonce range."
Today when you proposed a new sidechain BIP [4], Peter Todd was
(rightly) concerned about the prior lack of disclosure of your patents
related to your prior consensus modification proposal. Hence the
concern is that this might be happening this time as well.
There is no evidence that any of the other filers for the
ASICBOOST-like patents by mining companies other than your own were
going to be using it offensively as those other companies appeared to
understand the decentralization risk of having an advantage enforced
by legal and not technical means.
It's great that you have now committed to looking into the Defensive
Patent License. This seems likely to mitigate some of the patent
concerns. Although it would be a show of good faith if you also agreed
to license ASICBOOST under the DPL.
[1]: BIP: [2]: ASICBOOST PATENT [3]: Extra nonce pull request: [4]: COUNT_ACKS
On Sun, Oct 2, 2016 at 6:13 PM, Sergio Demian Lerner via bitcoin-dev

@_date: 2016-10-16 21:14:15
@_author: Btc Drak 
@_subject: [bitcoin-dev] Start time for BIP141 (segwit) 
I can see how it looks but actually most of the underlying libraries have
already been adapted or are almost finished being adapted for segwit. Since
segwit is not live on mainnet, most are not released (either still in PR
form or merged to a development branch). As a software developer, I think
you can appreciate that libraries cant actually release a segwit supported
versions until segwit is released as final in 0.13.1. Obviously consumers
of the libraries cant update for segwit until the libraries are released -
you get the idea. I wouldn't be too concerned about the adoption chart,
it's just very difficult to reflect the actual state of affairs. For
example Trezor is marked as wip, but they have had an updated, but
unreleased firmware version for many months[1]. We are in the process of
planning a migration guide and updating the existing development notes[2].
Additionally, many companies are already planning to update their services
for segwit.
Regarding BIP9, it's purpose is to co-ordinate *miner upgrade* and
activation. The starttime delay is simply designed to avoid miners
signalling before the soft fork has been made available for general
release; so the starttime prevents unreleased software from setting the
version bit prematurely. The whole BIP9 state machine allows predictable
activation. Non mining full nodes are under no constraints to upgrade on a
specific schedule, which is by design of soft forks. Signalling will not
begin until the first diff retarget period after the starttime of 15th Nov.
Practically it means there will be a minimum of 4-6 weeks at the very least
before activation can happen.
[1] [2] On Sun, Oct 16, 2016 at 7:20 PM, Tom Zander via bitcoin-dev <

@_date: 2016-10-17 14:13:25
@_author: Btc Drak 
@_subject: [bitcoin-dev] (no subject) 
For continuity, Matt took the discussion to the bitcoin-discuss lists here
On Sun, Oct 16, 2016 at 9:45 PM, Tom Zander via bitcoin-dev <

@_date: 2016-10-17 14:27:08
@_author: Btc Drak 
@_subject: [bitcoin-dev] Start time for BIP141 (segwit) 
This thread has strayed extensively off topic from the OP which asked a
simple question about BIP141 signalling start params.
Please move to another thread, or take more general discussion to
Thank you.

@_date: 2017-04-03 15:40:04
@_author: Btc Drak 
@_subject: [bitcoin-dev] Segwit2Mb - combined soft/hard fork - Request For 
Miners signalling they have upgraded by flipping a bit in the nVersion
field has little relevance in a hard fork. If 100% of the hash power
indicates they are running this proposal, but the nodes don't upgrade, what
will happen?
For the record, I actually talk a lot about hard forks with various
developers and am very interested in the research that Johnson in
particular is pioneering. However, I have failed to understand your point
about 95% miner signalling in relation to a hard fork, so I am eagerly
awaiting your explanation.

@_date: 2017-02-10 10:33:52
@_author: Btc Drak 
@_subject: [bitcoin-dev] A Modified Version of Luke-jr's Block Size BIP 
Agreed, this thread is venturing somewhat out of scope for the list. Please
can we redirect philosophical discussion to another forum/list such as
bitcoin-discuss, which can be found at
Repost of the bitcoin-dev posting guidelines are:
- Posts must concern development of bitcoin protocol.
- Posts should be technical or academic in nature.
- Generally encouraged: patches, notification of pull requests, BIP
proposals, academic paper announcements. And discussions that follow.
- Generally discouraged: shower thoughts, wild speculation, jokes, +1s,
non-technical bitcoin issues, rehashing settled topics without new data,
moderation concerns.
- Detailed patch discussion generally better on a GitHub PR.
- Meta-discussion is better on bitcoin-discuss.
On Wed, Feb 8, 2017 at 8:13 PM, alp alp via bitcoin-dev <

@_date: 2017-01-07 21:15:11
@_author: Btc Drak 
@_subject: [bitcoin-dev] Bitcoin Classic 1.2.0 released 
There actually isn't an activation threshold in Bitcoin Classic. The hard
fork rules are active the moment you install the software. As was noted,
there aren't any release notes, so you can be forgiven for not knowing that
BIP109 support was removed and the proposal rejected. Classic recently
adopted a new set of hard fork rules for which there is no written
Bitcoin software vendors should take great pains to document software
features and changes from version to version. Bitcoin Core for example,
always has extensive release notes, and a full changelog extracted from the
source code for each version. In the case of consensus rule change
proposals, we follow the BIPs process which exists to help ecosystem-wide
co-ordination. A detailed and complete specification allows others to
re-implement the BIP in their own software and also acts as part of the
consensus building process and peer review process.
There's nothing wrong with hard forks per se, and this list is certain a
good place to discuss proposals, but releasing hard fork software without
establishing community wide consensus and without clearly labelling your
product as such is just not cricket. If I may cast your attention back a
few weeks ago, Johnson Lau released a hard fork client _testnet_ as part of
his research project which was announced on this list. It was clearly
labelled. This Bitcoin Classic announcement was not clearly labelled (and
released on mainnet).
On Sat, Jan 7, 2017 at 8:12 PM, Chris Priest via bitcoin-dev <

@_date: 2017-01-08 06:50:52
@_author: Btc Drak 
@_subject: [bitcoin-dev] Announcements on bitcoin-dev 
The purpose of this list is Bitcoin protocol discussion of all kinds,
including consensus rules that require hard and soft forks and there
have been many discussions about both. There is also a clear technical
process for proposing, discussing and peer reviewing consensus rule
changes via the BIPs process which this list has traditionally played
a large role. BIP specifications allow community wide coordination
across multiple implementations.
Since the recent thread announcing a new version of Bitcoin Classic,
many people have complained on and off-list that is should not be
allowed on the bitcoin-dev mailing list because it is not consensus
compatible nor is it a change which has been arrived at through wide
community consensus. There isn't even a formal specification that
other implementations could follow if they wanted to. The general
feeling seems to be that announcements for consensus compatible
implementations is ok on this list. If there is ever community wide
consensus for a hard fork, then that too would be ok since there would
be consensus.
This list does strive to be somewhat high signal to noise ratio where
possible and we need to be clear about the list remit. So let's be
clear, announcing/advertising software that is consensus incompatible
is off-topic, however, discussion of hard forks, peer review etc has
always been, and remains, on topic.
I've copied the current list remit below for completeness. General
discussions should be directed at bitcoin-discuss, where as actual
protocol development discussion belongs on bitcoin-dev.
Bitcoin development and protocol discussion.
This list is lightly moderated.
- No offensive posts, no personal attacks.
- Posts must concern development of bitcoin protocol.
- Posts should be technical or academic in nature.
- Generally encouraged: patches, notification of pull requests, BIP
proposals, academic paper announcements. And discussions that follow.
- Generally discouraged: shower thoughts, wild speculation, jokes,
+1s, non-technical bitcoin issues, rehashing settled topics without
new data, moderation concerns.
- Detailed patch discussion generally better on a GitHub PR.
- Meta-discussion is better on bitcoin-discuss

@_date: 2017-07-08 13:28:11
@_author: Btc Drak 
@_subject: [bitcoin-dev] A Segwit2x BIP 
I am utterly appalled by this proposal both technically, ethically, and by
the process which it has adopted. Hard forks require consensus from the
entire ecosystem in order to prevent a fork, funds loss, confusion and harm
to the robust guarantees of the Bitcoin system has thus far displayed.
I know this is a draft, but you are seeking reviews of a proposal that has
just a few weeks remaining before deployment (where "technical review" is
pointless because the is not actually open
 unless
you are an approved member
making it totally unworkable and irresponsible. For example, exactly how
are other implementations supposed to adopt the BIP in such a short
timeframe? For all the talk of how important "alternative implementations"
are, how does this rash and rushed action promote an ecosystem of multiple
implementors? By encouraging fast upgrades, you are actually centralizing
the ecosystem even further.
The linked coded doesn't uniquely identify itself on the network by
user-agent, something all distinct implementations have done to date.
The draft BIP text looks like an afterthought and doesn't actually specify
the proposal in enough detail to implement from the text. By contrast for
example, BIP141 has a level of detail which allowed others to implement
segwit without looking at any reference code (which consequently results to
more confidence and testing of the specification all round). The Bitcoin
system has a market cap of over $40bn supported by a robust and reliable
network and your proposal is an offence to all Bitcoin has achieved because
due to it's the strong foundations.
I cannot not support this proposal in the current form and timeline, nor do
I support the coercion that has been used behind closed doors to try and
gain more support (not limited to, but including approaching company
investors to twist arms and veiled threats of blacklisting companies from
further funding/collaboration).
I think the best you can hope for this hard fork proposal is for it to be
quietly ignored.
On Fri, Jul 7, 2017 at 10:25 PM, Sergio Demian Lerner via bitcoin-dev <

@_date: 2017-03-05 13:27:08
@_author: Btc Drak 
@_subject: [bitcoin-dev] Unique node identifiers 
Nodes are by design not supposed to be identifiable in any way, including
persisting identities across IPs changes or when connecting over different
networks (e.g. clearnet/tor). Anything that makes Bitcoin less private is a
step backwards. Also absolute node count is pretty meaningless since only
fully validating nodes that participate in economic activity really matter.
As a side note, this should probably have started out as a bitcoin-discuss
On Sat, Mar 4, 2017 at 4:04 PM, John Hardy via bitcoin-dev <

@_date: 2018-03-07 08:19:57
@_author: Btc Drak 
@_subject: [bitcoin-dev] BIP proposal: Reserved nversion bits in blockheader 
The following proposal reduces the number of version-bits that can be used
for parallel soft-fork signalling, reserving 16 bits for non-specific use.
This would reduce the number of parallel soft-fork activations using
versionbits to from 29 to 13 and prevent node software from emitting false
warnings about unknown signalling bits under the versionbits signalling
system (BIP8/9). I chose the upper bits of the nVersion, because looking at
the versionbits implementation in the most widely deployed node software,
it is easier to implement than say annexing the lower 2 bytes of the field.
The scope of the BIP is deliberately limited to reserving bits for general
use without specifying specific uses for each bit, although there have
previously been various discussions of some use-cases of nVersion bits
including version-rolling AsicBoost[1], and nonce rolling to reduce CPU
load on mining controllers because ntime-rolling can only be done for short
periods otherwise it could have negative side effects distorting time.
However, specific use cases are not important for this BIP.
I am reviving discussion on this topic now, specifically, because the new
DragonMint miner uses version-rolling AsicBoost on mainnet[2]. It is
important to bring up so node software can adapt the versionbits warning
system to prevent false positives. This BIP has the added advantage that
when a new use for bits is found, mining manufacturers can play in the
designated area without causing disruption or inconvenience (as
unfortuntely, the use of version-rolling will cause until BIP8/9 warning
systems are adapted). I appologise for the inconvenience in advance, but
this is the unfortunate result of restraints while negotiating to get the
patent opened[3] and licensed defensively[4] in the first place.
I believe there was a similar proposal[5] made some years ago, before the
advent of BIP9. This proposal differs in that it's primary purpose is to
remove bits from the versionbits soft-fork activation system and earmark 16
bits for general use without allocating fixed uses for each bit. The BIP
cites a couple of usecases for good measure, but they are just
informational examples, not part of a specification laid down. For this
reason, there no is mention of the version-rolling Stratum extension[6]
specifics within the BIP text other than a reference to the specification
[1] [4] [5] [6]   BIP: ?
  Title: Reserved nversion bits in blockheader
  Author: BtcDrak   Comments-Summary: No comments yet.
  Comments-URI:   Status: Draft
  Type: Informational
  Created: 2018-03-01
  License: BSD-3-Clause
           CC0-1.0
This BIP reserves 16 bits of the block header nVersion field for
general purpose use and removes their meaning for the purpose of
version bits soft-fork signalling.
There are a variety of things that miners may desire to use some of
the nVersion field bits for. However, due to their use to coordinate
miner activated soft-forks, full node software will generate false
warnings about unknown soft forks if those bits are used for non soft
fork signalling purposes. By reserving bits from the nVersion field
for general use, node software can be updated to ignore those bits and
therefore will not emit false warnings. Reserving 16 bits for general
use leaves enough for 13 parallel soft-forks using version bits.
==Example Uses==
The following are example cases that would benefit from using some of
the bits from the nVersion field. This list is not exhaustive.
Bitcoin mining hardware currently can exhaust the 32 bit nonce field
in less than 200ms requiring the controller to distribute new jobs
very frequently to each mining chip consuming a lot of bandwidth and
CPU time. This can be greatly reduced by rolling more bits. Rolling
too many bits from nTime is not ideal because it may distort the
timestamps over a longer period.
Version-rolling AsicBoost requires two bits from the nVersion field to
calculate 4-way collisions. Any two bits can be used and mining
equipment can negotiate which bits are to be used with mining pools
via the Stratum "version-rolling" extension.
Sixteen bits from the block header nVersion field, starting from 13
and ending at 28 inclusive (0x1fffe000), are reserved for general use
and removed from BIP8 and BIP9 specifications. A mask of 0xe0001fff
should be applied to nVersion bits so bits 13-28 inclusive will be
ignored for soft-fork signalling and unknown soft-fork warnings.
This specification does not reserve specific bits for specific purposes.
==Backwards Compatibility==
This proposal is backwards compatible, and does not require a soft
fork to implement.
[ AsicBoost white paper]
[ nNonce2 proposal]
[ Stratum protocol extension for version-rolling]
This document is dual licensed as BSD 3-clause, and Creative Commons
CC0 1.0 Universal.

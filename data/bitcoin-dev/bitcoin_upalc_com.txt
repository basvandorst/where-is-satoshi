
@_date: 2015-08-17 15:14:54
@_author: Upal Chakraborty 
@_subject: [bitcoin-dev] Dynamically Controlled Bitcoin Block Size Max Cap 
I have tried to solve the maximum block size debate, depending on the
previous block size calculation.
Requesting for comment -

@_date: 2015-08-18 17:43:48
@_author: Upal Chakraborty 
@_subject: [bitcoin-dev] Dynamically Controlled Bitcoin Block Size Max Cap 
I am arguing with the following statement here...
*I see problems to this approach. The biggest one I see is that a miner
First, I would like to argue from economics' point of view. If someone
wants to hold back the block size increase with 11% hash power by mining
empty blocks, he has to sacrifice Tx fees, which is not economical. 11%
hash power will most likely be a pool and pool miners will find out soon
that they are losing Tx fees because of pool owner's intention. Hence,
they'll switch pool and pool owner will lose out. This is the same reason
why 51% attack will never happen, even if a pool gets more than 51% hash
Next, I would like to propose a slightly modified technical solution to
this problem in algorithmic format...
If more than 50% of block's size, found in the first 2000 of the last
difficulty period, is more than 90% MaxBlockSize
         Double MaxBlockSize
Else if more than 90% of block's size, found in the first 2000 of the last
difficulty period, is less than 50% MaxBlockSize
         Half MaxBlockSize
         Keep the same MaxBlockSize
This is how, those who want to stop increase, need to have more than 50%
hash power. Those who want to stop decrease, need to have more than 10%
hash power, but must mine more than 50% of MaxBlockSize in all blocks. In
this approach, not only miners, but also the end user have their say.
Because, end users will fill up the mempool, from where miners will take Tx
to fill up the blocks. Please note that, taking first 2000 of the last 2016
blocks is important to avoid data discrepancy among different nodes due to
orphan blocks. It is assumed that a chain can not be orphaned after having
16 confirmation.
Looking for comments.

@_date: 2015-08-19 22:51:52
@_author: Upal Chakraborty 
@_subject: [bitcoin-dev] Dynamically Controlled Bitcoin Block Size Max Cap 
I think, keeping the reduction part is necessary to have it demand driven.
Otherwise, we could just increase it to a fixed size. If the max cap is
high, but there is not enough Tx in the mempool, then after one big block
many will go small. This will not be good when block reward become small
and mining revenue become dependent on Tx fee. But, if reduction is there,
max cap will come down soon and all miners will see revenue from Tx fee
Proposal details: On Wed, Aug 19, 2015 at 2:28 AM, Danny Thorpe

@_date: 2015-08-20 20:32:07
@_author: Upal Chakraborty 
@_subject: [bitcoin-dev] Dynamically Controlled Bitcoin Block Size Max Cap 
Could we please keep the conversation specific to the proposal presented at
 ? If you find any demerits to this,
please point them out. Otherwise, I'll ask for a BIP. The proposal in
algorithmic format is as follows...
If more than 50% of block's size, found in the first 2000 of the last
difficulty period, is more than 90% MaxBlockSize
         Double MaxBlockSize
Else if more than 90% of block's size, found in the first 2000 of the
last difficulty period, is less than 50% MaxBlockSize
         Half MaxBlockSize
         Keep the same MaxBlockSize

@_date: 2015-08-22 03:15:37
@_author: Upal Chakraborty 
@_subject: [bitcoin-dev] Dynamically Controlled Bitcoin Block Size Max Cap 
I have tried to solve the maximum block size debate in two different
i. Depending only on previous block size calculation.
ii. Depending on previous block size calculation and previous Tx fee
collected by miners.
Proposal 1: Depending only on previous block size calculation
If more than 50% of block's size, found in the first 2000 of the last
difficulty period, is more than 90% MaxBlockSize
    Double MaxBlockSize
Else if more than 90% of block's size, found in the first 2000 of the last
difficulty period, is less than 50% MaxBlockSize
    Half MaxBlockSize
    Keep the same MaxBlockSize
Proposal 2: Depending on previous block size calculation and previous Tx
fee collected by miners
TotalTxFeeInLastButOneDifficulty = Sum of all Tx fees of first 2008 blocks
in last 2 difficulty period
TotalTxFeeInLastDifficulty = Sum of all Tx fees of second 2008 blocks in
last 2 difficulty period (This actually includes 8 blocks from last but one
If ( ( (Sum of first 4016 block size in last 2 difficulty period)/4016 >
50% MaxBlockSize) AND (TotalTxFeeInLastDifficulty >
TotalTxFeeInLastButOneDifficulty) )
    MaxBlockSize = TotalTxFeeInLastDifficulty * MaxBlockSize /
Else If ( ( (Sum of first 4016 block size in last 2 difficulty period)/4016
< 50% MaxBlockSize) AND (TotalTxFeeInLastDifficulty <
TotalTxFeeInLastButOneDifficulty) )
    MaxBlockSize = TotalTxFeeInLastDifficulty * MaxBlockSize /
    Keep the same MaxBlockSize
Details: Requesting for comment.

@_date: 2015-08-25 14:37:19
@_author: Upal Chakraborty 
@_subject: [bitcoin-dev] Dynamically Controlled Bitcoin Block Size Max Cap 
Github:   BIP: 1xx
  Title: Dynamically Controlled Bitcoin Block Size Max Cap
  Author: Upal Chakraborty   Status: Draft
  Type: Standards Track
  Created: 2015-08-24
This BIP proposes replacing the fixed one megabyte maximum block size
with a dynamically controlled maximum block size that may increase or
decrease with difficulty change depending on various network factors.
I have two proposals regarding this...
i. Depending only on previous block size calculation.
ii. Depending on previous block size calculation and previous Tx fee
collected by miners.
With increased adoption, transaction volume on bitcoin network is
bound to grow. If the one megabyte max cap is not changed to a
flexible one which changes itself with changing network demand, then
adoption will hamper and bitcoin's growth may choke up. Following
graph shows the change in average block size since inception...
===Proposal 1 : Depending only on previous block size calculation===
  If more than 50% of block's size, found in the first 2000 of the
last difficulty period, is more than 90% MaxBlockSize
      Double MaxBlockSize
  Else if more than 90% of block's size, found in the first 2000 of
the last difficulty period, is less than 50% MaxBlockSize
      Half MaxBlockSize
  Else
      Keep the same MaxBlockSize
===Proposal 2 : Depending on previous block size calculation and
previous Tx fee collected by miners===
  TotalBlockSizeInLastButOneDifficulty = Sum of all Block size of
first 2008 blocks in last 2 difficulty period
  TotalBlockSizeInLastDifficulty = Sum of all Block size of second
2008 blocks in last 2 difficulty period (This actually includes 8
blocks from last but one difficulty)
  TotalTxFeeInLastButOneDifficulty = Sum of all Tx fees of first 2008
blocks in last 2 difficulty period
  TotalTxFeeInLastDifficulty = Sum of all Tx fees of second 2008
blocks in last 2 difficulty period (This actually includes 8 blocks
from last but one difficulty)
  If ( ( (Sum of first 4016 block size in last 2 difficulty
period)/4016 > 50% MaxBlockSize) AND (TotalTxFeeInLastDifficulty >
TotalTxFeeInLastButOneDifficulty) AND (TotalBlockSizeInLastDifficulty
      MaxBlockSize = TotalBlockSizeInLastDifficulty * MaxBlockSize /
  Else If ( ( (Sum of first 4016 block size in last 2 difficulty
period)/4016 < 50% MaxBlockSize) AND (TotalTxFeeInLastDifficulty <
TotalTxFeeInLastButOneDifficulty) AND (TotalBlockSizeInLastDifficulty
< TotalBlockSizeInLastButOneDifficulty) )
      MaxBlockSize = TotalBlockSizeInLastDifficulty * MaxBlockSize /
  Else
      Keep the same MaxBlockSize
These two proposals have been derived after discussion on
[ BitcoinTalk] and
bitcoin-dev mailing list]. The original idea and its evolution in the
light of various arguements can be found
[ here].
===Proposal 1 : Depending only on previous block size calculation===
This solution is derived directly from the indication of the problem.
If transaction volume increases, then we will naturally see bigger
blocks. On the contrary, if there are not enough transaction volume,
but maximum block size is high, then only few blocks may sweep the
mempool. Hence, if block size is itself taken into consideration, then
maximum block size can most rationally be derived. Moreover, this
solution not only increases, but also decreases the maximum block
size, just like difficulty.
===Proposal 2 : Depending on previous block size calculation and
previous Tx fee collected by miners===
This solution takes care of stable mining subsidy. It will not
increase maximum block size, if Tx fee collection is not increasing
and thereby creating a Tx fee pressure on the market. On the other
hand, though the block size max cap is dynamically controlled, it is
very difficult to game by any party because the increase or decrease
of block size max cap will take place in the same ratio of average
block size increase or decrease.
This is a hard-forking change to the Bitcoin protocol; anybody running
code that fully validates blocks must upgrade before the activation
time or they will risk rejecting a chain containing
larger-than-one-megabyte blocks.
==Other solutions considered==
Making Decentralized Economic Policy] - by Jeff Garzik
[ Elastic block cap
with rollover penalties] - by Meni Rosenfeld
Increase maximum block size] - by Gavin Andresen
[ Block size
following technological growth] - by Pieter Wuille
[ The Bitcoin
Lightning Network: Scalable Off-Chain Instant Payments] - by Joseph
Poon & Thaddeus Dryja
If consensus is achieved, deployment can be made at a future block
number at which difficulty will change.

@_date: 2015-08-26 17:49:29
@_author: Upal Chakraborty 
@_subject: [bitcoin-dev] Dynamically Controlled Bitcoin Block Size Max Cap 
Can we please keep this mail chain discussion specific to the proposed
draft -
I understand, voting process is an important subject of discussion. But,
that may be discussed in a separate mail chain.
On Wed, Aug 26, 2015 at 11:58 AM, Hector Chu via bitcoin-dev <

@_date: 2015-08-27 20:39:18
@_author: Upal Chakraborty 
@_subject: [bitcoin-dev] Dynamically Controlled Bitcoin Block Size Max Cap 
Proposal 1 does not deal with Tx fee. Proposal 2 does. According to
proposal 2, miners wont be able to increase or decrease Max Block Size only
by manipulating Tx fee. They have to manipulate...
i. Tx fee of ~4000 blocks.
ii. Block size of ~4000 blocks.
I never proposed *next block collects Tx fee from previous block*. Not sure
what you mean here!

@_date: 2015-09-17 23:19:47
@_author: Upal Chakraborty 
@_subject: [bitcoin-dev] BIP 106 : Graphs Required 
First of all, I'm not sure if it is the right place to ask for such help.
But, I thought, someone might just help out.
I'm looking for two graphs to analyze the effectiveness of BIP 106, which
can be found at
Blockchain.info currently provides a graph plotting the historical data of
block size for each block, which can be found at...
I need two similar graphs plotting max block size cap against each block,
calculated as per my two proposals in BIP 106. Is it possible for anyone to
provide these two graphs assuming max block size cap for block 1 was 1mb ?
Thanks & Regards,
Upal Chakraborty

@_date: 2017-06-06 02:00:23
@_author: Upal Chakraborty 
@_subject: [bitcoin-dev] SegWit activation proposal with 2MB Hard Fork by next 
*Proposal*: Verify whether 50% Tx mined from SegWit activation block to
block 630000 are SegWit Tx. If yes, increase legacy max block size to 2MB
and SegWit max block size to 8MB.
*Implementation*: This proposal either needs to be implemented in next
release of Bitcoin Core or require SegWit activation period restart while
it is implemented & released.
*Rationale*: This proposal minimizes the chance of a chain split, while
sticking to the original bitcoin scaling roadmap, i.e.
Thanks & Regards,
Upal Chakraborty

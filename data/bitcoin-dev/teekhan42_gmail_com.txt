
@_date: 2016-12-05 10:27:32
@_author: t. khan 
@_subject: [bitcoin-dev] Managing block size the same way we do difficulty 
BIP Proposal - Managing Bitcoin?s block size the same way we do difficulty
(aka Block75)
The every two-week adjustment of difficulty has proven to be a reasonably
effective and predictable way of managing how quickly blocks are mined.
Bitcoin needs a reasonably effective and predictable way of managing the
maximum block size.
It?s clear at this point that human beings should not be involved in the
determination of max block size, just as they?re not involved in deciding
the difficulty.
Instead of setting an arbitrary max block size (1MB, 2MB, 8MB, etc.) or
passing the decision to miners/pool operators, the max block size should be
adjusted every two weeks (2016 blocks) using a system similar to how
difficulty is calculated.
Put another way: let?s stop thinking about what the max block size should
be and start thinking about how full we want the average block to be
regardless of size. Over the last year, we?ve had averages of 75% or
higher, so aiming for 75% full seems reasonable, hence naming this concept
The target capacity over 2016 blocks would be 75%. If the last 2016 blocks
are more than 75% full, add the difference to the max block size. Like this:
MAX_BLOCK_BASE_SIZE = 1000000
TARGET_CAPACITY = 750000
AVERAGE_OVER_CAP = average block size of last 2016 blocks minus
To check if a block is valid, ? (MAX_BLOCK_BASE_SIZE + AVERAGE_OVER_CAP)
For example, if the last 2016 blocks are 85% full (average block is 850
KB), add 10% to the max block size. The new max block size would be 1,100
KB until the next 2016 blocks are mined, then reset and recalculate. The
1,000,000 byte limit that exists currently would remain, but would
effectively be the minimum max block size.
Another two weeks goes by, the last 2016 blocks are again 85% full, but now
that means they average 935 KB out of the 1,100 KB max block size. This is
93.5% of the 1,000,000 byte limit, so 18.5% would be added to that to make
the new max block size of 1,185 KB.
Another two weeks passes. This time, the average block is 1,050 KB. The new
max block size is calculated to 1,300 KB (as blocks were 105% full, minus
the 75% capacity target, so 30% added to max block size).
Repeat every 2016 blocks, forever.
If Block75 had been applied at the difficulty adjustment on November 18th,
the max block size would have been 1,080KB, as the average block during
that period was 83% full, so 8% is added to the 1,000KB limit. The current
size, after the December 2nd adjustment would be 1,150K.
Block75 would allow the max block size to grow (or shrink) in response to
transaction volume, and does so predictably, reasonably quickly, and in a
method that prevents wild swings in block size or transaction fees. It
attempts to keep blocks at 75% total capacity over each two week period,
the same way difficulty tries to keep blocks mined every ten minutes. It
also keeps blocks as small as possible.

@_date: 2016-12-10 19:26:01
@_author: t. khan 
@_subject: [bitcoin-dev] Managing block size the same way we do difficulty 
Miners 'gaming' the Block75 system -
There is no financial incentive for miners to attempt to game the Block75
system. Even if it were attempted and assuming the goal was to create
bigger blocks, the maximum possible increase would be 25% over the previous
block size. And, that size would only last for two weeks before readjusting
down. It would cost them more in transaction fees to stuff the network than
they could ever make up. To game the system, they'd have to game it forever
with no possibility of profit.
Blocks would get too big -
Eventually, blocks would get too big, but only if bandwidth stopped
increasing and the cost of disk space stopped decreasing. Otherwise, the
incremental adjustments made by Block75 (especially in combination with
SegWit) wouldn't break anyone's connection or result in significantly more
orphaned blocks.
The frequent and small adjustments made by Block75 have the added benefit
of being more easily adapted to, both psychologically and technologically,
with regards to miners/node operators.
On Sat, Dec 10, 2016 at 5:44 AM, s7r via bitcoin-dev <

@_date: 2016-12-10 19:52:58
@_author: t. khan 
@_subject: [bitcoin-dev] Managing block size the same way we do difficulty 
Agreed, the clear goal of 10 minutes per block is why the difficulty
adjustment works well. Blocks averaging 75% full is the clear goal of the
described method. That's the target to attempt.
Under Block75, there will still be full blocks. There will still be
transaction fees and a fee market. The fees will be lower than they are now
of course.
Hardcoding a cap will inevitably become a roadblock (again), and we'll be
back in the same position as we are now. Permanent solutions are preferred.

@_date: 2016-12-11 14:55:34
@_author: t. khan 
@_subject: [bitcoin-dev] Managing block size the same way we do difficulty 
No, that wasn't overlooked. Miners could indeed stuff their own blocks for
free, but they can't stuff blocks mined by others for free.
In the hypothetical scenario where there is a single mining pool which
mines most (if not all) of the blocks, we would have much larger problems
than their ability to raise the max block size gradually. Even if they were
able to fill 100% of the blocks for an entire year, the max block size for
that 2016 block period would be 7.25MB (not accounting for SegWit). After
the whole year they would have made no extra profit vs doing nothing. And
as soon as they stopped this scheme, block size would spring back to it's
natural level.
The good news is, this scenario has never happened and even when we've come
remotely close (when ASICs first shipped), the situation was temporary. The
odds of this happening in the future and persisting long enough to have any
major effect with Block75 are very close to zero.
Increasing *and* decreasing max block size dynamically. Block75 is
self-correcting, whereas any solution with hardcoded limits can't correct
without human intervention and would rely on our ability to predict the
future (which as you pointed out, we can't do). Therefore, any solution
that's not dynamic cannot be permanent.
Additionally, the frequent and gradual changes in max block size would
allow us to see any consequences well in advance (years probably).
Not having to touch it again = permanent solution. ;)
It would be helpful if some others would run the numbers on how Block75
would adjust the block size over time:
new max block size = 1000kb + (average block size over last 2016 blocks -

@_date: 2016-12-11 16:40:21
@_author: t. khan 
@_subject: [bitcoin-dev] Managing block size the same way we do difficulty 
Block75 is not exponential scaling. It's true the max theoretical increase
in the first year would be 7x, but the next year would be a max of 2x, and
the next could only increase by 50% and so on.
However, to reach the max in the first year: 1) ALL blocks would have to be
100% full and 2) transactions would have to increase at the same rate. We'd
have to be doing 2.1 million transactions a day within a year to make that
happen, and would therefore need blocks to be that big.
Realistically, max block size will grow (and shrink) at a much slower rate
... even more so with SegWit.
have no way to stop the miners from increasing block size
Yes they could, simply by not sending transactions. Users don't care at all
about block size. They just want their transactions to be fast and
relatively cheap.

@_date: 2016-12-11 17:30:34
@_author: t. khan 
@_subject: [bitcoin-dev] Managing block size the same way we do difficulty 
The assumption you're making is incorrect. There is not an infinite number
of low-fee transactions.
Yes, the average fee will go down compared to today with Block75, but this
will balance itself between demand and the minimum fee miners are willing
to accept (not zero).
For example, add 200kb to today's max block size. How does that affect fees?
(200kb would likely be the first increase if Block75 activated today)
On Sun, Dec 11, 2016 at 4:55 PM, James Hilliard

@_date: 2017-02-02 14:39:51
@_author: t. khan 
@_subject: [bitcoin-dev] [Pre-BIP] Community Consensus Voting System 
Please comment on this work-in-progress BIP.
- t.k.
BIP: ?
Layer: Process
Title: Community Consensus Voting System
Author: t.khan Comments-Summary: No comments yet.
Comments-URI: TBD
Status: Draft
Type: Standards Track
Created: 2017-02-02
License: BSD-2
Voting Address: 3CoFA3JiK5wxe9ze2HoDGDTmZvkE5Uuwh8  (just an example, don?t
send to this!)
Community Consensus Voting System (CCVS) will allow developers to measure
support for BIPs prior to implementation.
We currently have no way of measuring consensus for potential changes to
the Bitcoin protocol. This is especially problematic for controversial
changes such as the max block size limit. As a result, we have many
proposed solutions but no clear direction.
Also, due to our lack of ability to measure consensus, there is a general
feeling among many in the community that developers aren?t listening to
their concerns. This is a valid complaint, as it?s not possible to listen
to thousands of voices all shouting different things in a crowded
room?basically the situation in the Bitcoin community today.
The CCVS will allow the general public, miners, companies using Bitcoin,
and developers to vote for their preferred BIP in a way that?s public and
relatively difficult (expensive) to manipulate.
Each competing BIP will be assigned a unique bitcoin address which is added
to each header. Anyone who wanted to vote would cast their ballot by
sending a small amount (0.0001 btc) to their preferred BIP's address. Each
transaction counts as 1 vote.
Confirmed Vote Multiplier:
Mining Pools, companies using Bitcoin, and Core maintainers/contributors
are allowed one confirmed vote each. A confirmed vote is worth 10,000x a
regular vote.
For example:
Slush Pool casts a vote for their preferred BIP and then states publicly
(on their blog) their vote and the transaction ID and emails the URL to the
admin of this system. In the final tally, this vote will count as 10,000
Coinbase, Antpool, BitPay, BitFury, etc., all do the same.
Confirmed votes would be added to a new section in each respective BIP as a
public record.
Voting would run for a pre-defined period, ending when a particular block
number is mined.
Confirmed Vote Multiplier - The purpose of this is twofold; it gives a
larger voice to organizations and the people who will have to do the work
to implement whatever BIP the community prefers, and it will negate the
effect of anyone trying to skew the results by voting repeatedly.
Miner: any individual or organization that has mined at least one valid
block in the last 2016 blocks.
Company using Bitcoin: any organization using Bitcoin for financial, asset
or other purposes, with either under development and released solutions.
Developer: any individual who has or had commit access, and any individual
who has authored a BIP
Unresolved Issues
Node voting: It would be desirable for any full node running an up-to-date
blockchain to also be able to vote with a multiplier (e.g. 100x). But as
this would require code changes, it is outside the scope of this BIP.
This BIP is licensed under the BSD 2-clause license.

@_date: 2017-02-03 13:20:13
@_author: t. khan 
@_subject: [bitcoin-dev] [Pre-BIP] Community Consensus Voting System 
Most of these are answered in the BIP, but for clarity:
Preferably no one decides. The company would have to exist prior to the
vote, and would need a public-facing website. In the event of contested
votes (meaning someone finds evidence of a fake company), the admin could
investigate and post results.
I don't know. I'm happy to volunteer, if no one else wants to be
responsible for it. The only task would be adding the confirmed votes to
each respective BIP. From there, everything's public and can be confirmed
by everyone.
The logistics of doing that prevent it. But let's say 10 fake companies ...
first, you'd need to register ten domain names, host and customize the
website, all before the vote and in a way that no one would notice.
Someone at the company sends a very small transaction to the BIP's vote
address. Someone at the company then posts what the vote was and its
transaction ID on the company's blog/twitter, etc., and then emails the URL
to the administrator.
actually the correct person?
They post it on their company blog.
On Fri, Feb 3, 2017 at 11:19 AM, alp alp via bitcoin-dev <

@_date: 2017-02-04 16:23:19
@_author: t. khan 
@_subject: [bitcoin-dev] [Pre-BIP] Community Consensus Voting System 
The less centralized decision making there is, the better. All confirmed
votes will be added to each BIP, so everyone can make their own decision as
to whether or not they want to count it. Remember, this is about gauging
community support.
Rogue employees?: The company in question would have to deal with that.
Mountains out of mole hills here?if the domain name is registered after
voting is called, that would be a pretty clear indicator it's a fake
After further consideration, and as the goal of this is to determine what
the community will support, developers won't have a confirmed vote. They
would get a standard vote though, just like everyone else.

@_date: 2017-02-04 17:02:00
@_author: t. khan 
@_subject: [bitcoin-dev] [Pre-BIP] Community Consensus Voting System 
The point of this is it's available right now. It's not ideal, but it will
work. It doesn't require any code and we can do it today.
In case you haven't been paying attention; there's already enough support
for Unlimited to prevent SegWit from ever being adopted. Without
significant community outreach (which is the purpose of the CCVS) and a
compelling solution to max block size, Core as a product is dead.
Also, you need to be pretty paranoid to believe that address reuse is an
issue in this situation.
Note also that the BIP process already has BIP Comments for leaving textual
This does nothing for the community in general. Plus there's no way to
measure that sort of feedback.
- t.k.

@_date: 2017-02-06 13:19:43
@_author: t. khan 
@_subject: [bitcoin-dev] A Modified Version of Luke-jr's Block Size BIP 
Luke, how do you know the community opposes that? Specifically, how did you
come to this conclusion?
Why do you think blocks are "too large"? Please cite some evidence. I've
asked this before and you ignored it, but an answer would be helpful to the
- t.k.
On Sun, Feb 5, 2017 at 6:02 PM, Luke Dashjr via bitcoin-dev <

@_date: 2017-02-06 15:25:13
@_author: t. khan 
@_subject: [bitcoin-dev] A Modified Version of Luke-jr's Block Size BIP 
That poll shows 63% of votes want a larger than 1 MB block by this summer.
How do you go from that to "the community opposes any block increase ever"?
It shows the exact opposite of that.
Is this causing a problem now? If so, what?
The reason people stop running nodes is because there's no incentive to
counteract the resource costs. Attempting to solve this by making blocks
*smaller* is like curing a disease by killing the patient. (Incentivizing
full node operation would fix that problem.)
- t.k.

@_date: 2017-02-08 14:53:15
@_author: t. khan 
@_subject: [bitcoin-dev] A Modified Version of Luke-jr's Block Size BIP 
Even ignoring the obvious flaws of that poll, Andrew is still correct: you
cannot reach 100% consensus. It's statistically impossible in any large
Only the majority needs to consent, though what is considered a majority
varies depending on the context (95%, 75%, 51%). Nowhere does it say
"everyone needs to agree".

@_date: 2017-01-02 13:04:37
@_author: t. khan 
@_subject: [bitcoin-dev] BIP - 'Block75' - New algorithm 
Based on feedback from this list and further simulations, here is a new
algorithm for Block75:
new max blocksize = x + (x * (AVERAGE_CAPACITY - TARGET_CAPACITY)
TARGET_CAPACITY = 0.75
AVERAGE_CAPACITY = average percentage full of the last 2016 blocks, as a
x = current max block size
Please note that this algorithm actually tries to keep blocks 75% full,
unlike the old one that unnecessarily capped growth at 250KB. While this
would theoretically allow a maximum increase of 25% over the previous max
block size, in practice it's not possible to get that high.
This would be calculated every 2016 blocks along with difficulty.
Block75 should maintain transaction fees at about the level they were in
May/June 2016 when blocks started hitting 75% full somewhat consistently.
Thoughts? For any predictions as to how this would behave, please provide
the numbers used to arrive at any conclusions.
Other questions:
1. How do we make Block75 play nice with SegWit?
2. Is there any need for a minimum max blocksize? Block75 allows for
decreasing the size as well as increasing it.
To help negate some of the risk associated with a hard fork and to prevent
a single relatively small mining pool from blocking Block75's adoption,
activation would occur once 900 of the last 1,000 blocks mined signaled
support, with a grace period of 4,032 blocks.
Thank you again to all those who commented on the previous Block75 thread.
Together, we can make 2017 the year the block size debate ends (hopefully
Happy New Year!
- t.k.

@_date: 2017-01-02 14:32:24
@_author: t. khan 
@_subject: [bitcoin-dev] BIP - 'Block75' - New algorithm 
Math should decide the max block size, not humans (miners in this
case). The goal of Block75 is to manage the max block size without any
human intervention.
Under Block75, miners don't have any direct control but could still choose
to mine smaller blocks (same as now), though doing so would cost them the
fees from transactions they didn't include in their blocks.
A maximum block size is necessary to prevent a single nefarious miner from
creating a ridiculously large block which would break the network.
- t.k.

@_date: 2017-01-02 15:41:42
@_author: t. khan 
@_subject: [bitcoin-dev] BIP - 'Block75' - New algorithm 
Using the growth rate over the last year as a model (
 ),
Block75 would also have frequently decreased the limit. Though, yes, more
transactions would equal larger blocks over time, but that's the entire
point of this.
What is your definition of "spam"? Also, can you point to data that
supports the hypothesis that spam is filling blocks?
I certainly don't foresee any circumstance where I could reasonably support
Specifically, what is broken about it?
There would still be a block size limit, it would just change slightly
every two weeks. I agree that miners shouldn't have control of this, and
Block75 doesn't give them any (at least none they can make a profit on).
- t.k.

@_date: 2017-01-02 16:05:58
@_author: t. khan 
@_subject: [bitcoin-dev] BIP - 'Block75' - New algorithm 
The beauty of math is that everyone on the planet agrees how it works.
Everything in Bitcoin is math, with the exception of the blocksize limit
(1MB) which was a stop-gap solution at the time.
No. That would be an epic disaster. There's no such thing as a "simple
policy" when humans are involved. Obviously no one would agree on what X
bytes would be and you'd have some nodes rejecting blocks that others
already accepted.
- t.k.

@_date: 2017-01-03 09:28:27
@_author: t. khan 
@_subject: [bitcoin-dev] BIP - 'Block75' - New algorithm 
Do you have any direct evidence of "miner spam"? If so, please link to a
transaction. Also, what could a miner possibly gain from this?
For resource requirements (bandwidth/disk space), please run the numbers on
the Block75 algorithm and compare with growth rates of both.
By this definition, any transaction which transfers ownership of an asset
(stock certificate, deeds to property, copyrights, etc.) is spam. But these
are legitimate, fee paying transactions. They are not spam. Yes, they're
only moving 0.0001 btc. Some will eventually move to Lightning (or
something like it), but many will not as they are unsuitable for off-chain.
No, it actually gives them less power than they have now. Consider the
two-week recalculation: the result of any attempt to manipulate the block
size (up or down) will only last for two weeks. There's no way for a miner
to profit from this (in fact, they'd lose money this way). The best outcome
they could hope for is a very small increase or decrease for two weeks. So
why would anyone do this?
As soon as such a manipulation ended, Block75 would correct the max block
size back to an appropriate level (defined as: average block 75% full).
We covered this ad nauseum in the other Block75 thread, but basically no
one has been able to come up with a realistic scenario wherein miners would
be motivated to do this *and* there aren't any pools large enough now (nor
have there ever been) to have anything more than a minor and temporary
If such a scenario actually does exist, please describe it in detail.
- t.k.

@_date: 2017-01-09 14:52:31
@_author: t. khan 
@_subject: [bitcoin-dev] BIP - Block75 - Historical and future projections 
Using daily average block size over the past year (source:
), here's how Block75 would have altered max block sizes:
[image: Inline image 1]
As of today, the max block size would be 1,135KB.
Looking forward and using the last year's growth rate as a model:
[image: Inline image 2]
This shows the max block size one year from now would be 2,064KB, if
Block75 activated today.
Of course, this is just an estimate, but even accounting for a substantial
increase in transactions in the last quarter of 2017 and changes brought
about by SegWit (hopefully) activating, Block75 alters the max size in such
a way that allows for growth, keeps blocks as small as possible, *and*
maintains transaction fees at a level similar to May/June 2016.
If anyone has an alternate way to model future behavior, please run it
through the Block75 algorithm.
Every 2016 blocks, do this:
new max blocksize = x + (x * (AVERAGE_CAPACITY - TARGET_CAPACITY))
TARGET_CAPACITY = 0.75    //Block75's target of keeping blocks 75% full
AVERAGE_CAPACITY = average percentage full of the last 2016 blocks, as a
x = current max block size
- t.k.

@_date: 2017-01-10 14:09:42
@_author: t. khan 
@_subject: [bitcoin-dev] BIP - Block75 - Historical and future projections 
As Block75 maintains blocks at 75% full (average over time), it
automatically stabilizes transaction fees at about the level they were in
May/June 2016. It will even do so through changes in transaction size and
volume caused by SegWit and Lightning.
- t.k.
On Mon, Jan 9, 2017 at 11:14 PM, Ryan J Martin via bitcoin-dev <

@_date: 2017-01-27 13:54:26
@_author: t. khan 
@_subject: [bitcoin-dev] Three hardfork-related BIPs 
Regarding  I agree with Johnson Lau and others who have responded since
then?this proposal is not appropriate and should not be adopted for the
following reasons:
1. Miners will view it as way too little, delivered way too late. And as
soon as you say 300kb blocks, you've lost them all.
2. "Spam" - You're very fixated on this concept of spam transactions, but
the transactions that you deem as spam are legitimate, fee-paying
transactions. They're not a problem for miners. It's only a problem to you
as you've arbitrarily decided some transactions are legit and some are not.
It's an imaginary problem and we should focus on designs that solve real
problems instead.
Also, even if you changed the max size to 300kb, transactions that you (and
as far as I can tell, only you) consider spam will still be in there!
They'll just be paying a ridiculous fee along with everyone else.
3. 17% per year growth rate - This is making the assumption that the
current 1MB limit is already at the upper limit supportable by the network.
This isn't even remotely true, and starting this rate at the current limit
would cause the system to lag far behind the actual capability of the
network for no reason.
4. Nodes - Individuals have no incentive to run full nodes and we've
already passed the time where it makes any sense for them to do so.
Therefore restricting the blockchain size in an attempt to keep individuals
running nodes is futile at best and likely very damaging. Miners and
businesses using Bitcoin do have an incentive to run nodes and over the
years we've seen a migration of nodes from weak hands (individuals) to
strong hands (businesses).
Overall, this proposal would hamstring Bitcoin Core and would drive miners
towards Unlimited.
- t.k.
On Thu, Jan 26, 2017 at 8:06 PM, Luke Dashjr via bitcoin-dev <


@_date: 2016-06-14 17:41:15
@_author: Daniel Weigl 
@_subject: [bitcoin-dev] RFC for BIP: Derivation scheme for 
Hi List,
Following up to the discussion last month (  ), ive prepared a proposal for a BIP here:
Any comments on it? Does anyone working on a BIP44 compliant wallet implement something different?
If there are no objection, id also like to request a number for it.

@_date: 2016-06-15 12:53:27
@_author: Daniel Weigl 
@_subject: [bitcoin-dev] RFC for BIP: Derivation scheme for 
Hello Jochen,
Thats a good point and should be simple to maintain. Yes, ill extend on that part.
The problem is, we dont have a final decision how the address encoding for P2WPKH public keys should look like. Or do we? Bip141 is "Status: Deferred"
But for now, I can at least include the public key derivation path.
That would be a big privacy leak, imo. As soon as both outputs are spent, its visible which one was the P2WPKH-in-P2SH and which one the pure P2WPKH and as a consequence
you leak which output was the change and which one the actual sent output
So, i'd suggest to even make it a requirement for "normal" send-to-single-address transactions
to always use the same output type for the change output (if the wallet is able to recognize it)

@_date: 2016-05-13 15:16:20
@_author: Daniel Weigl 
@_subject: [bitcoin-dev] Bip44 extension for P2SH/P2WSH/... 
Hello List,
With SegWit approaching it would make sense to define a common derivation scheme how BIP44 compatible wallets will handle P2(W)SH (and later on P2WPKH) receiving addresses.
I was thinking about starting a BIP for it, but I wanted to get some feedback from other wallets devs first.
In my opinion there are two(?) different options: 1) Stay with the current Bip44 account, give the user for each public key the option to show it as a P2PKH-Address or a P2SH address and also scan the blockchain for both representation of each public key.
2) Define a new derivation path, parallel to Bip44, but a different  'purpose' (eg. ' instead of 44'). Let the user choose which account he want to add ("Normal account", "Witness account").  3) other ideas?
My personal favourite is pt2.
Has any Bip44 compliant wallet already done any integration at this point?

@_date: 2016-05-15 14:08:14
@_author: Daniel Weigl 
@_subject: [bitcoin-dev] Bip44 extension for P2SH/P2WSH/... 
my main concern here is that
 -) every Bip-compatible wallet in the future will have to implement all (then probably) legacy derivation and tx schemes.
 -) it does not fail in a deterministic way, if I import a seed or xPriv/xPub across different capable wallets.

@_date: 2016-09-07 11:42:24
@_author: Daniel Weigl 
@_subject: [bitcoin-dev] [cont'd] Derivation scheme for P2WPKH-nested-in-P2SH 
Hello again,
sorry, got a bit derailed on that proposal.
But now I think its time to work on it again.
- Any objections to get a BIP-number for it? - I decided against extending it for future P2WPKH addresses
- We will also need a extension to the BIP32 serialization format[1]
[1] [2]

@_date: 2016-09-22 11:33:18
@_author: Daniel Weigl 
@_subject: [bitcoin-dev] On-going work: Coin Selection Simulation 
Is your simulation code available somewhere?
I was just wondering why mycelium generates a very big UTXO set for <1000sat, because change outputs will never be smaller than 5460sat (=TransactionUtils.MINIMUM_OUTPUT_VALUE). If the change would be lower, it simply is skipped and added to the miner fee:
Does your simulation account for that?
It might also be that the small UTXO came from external tx and we never spend them, bec. of pruning/privacy. Not sure how we could optimize that.

@_date: 2016-09-23 11:35:22
@_author: Daniel Weigl 
@_subject: [bitcoin-dev] On-going work: Coin Selection Simulation 
Hello Murch,
Okay, if you already had included this logic I guess it wont change the
result that much if the cut off is 4440 or 5460sat. But Im curious to see the new results.
Yes, you are correct - we added this pruning step about 2y ago to
improve privacy for the user on average. Every transaction
only links only so much inputs together as really necessary to fund the transaction.
Our idea is to have the user the option (either global or per account or
per transaction) to choose between "maximize privacy" or "minimize fees"
(or even maybe "minimize UTXO", if the become more expensive in the future)
That will the change the behaviour of the coin selector.
Thx for your work, also looking forward to see the code and maybe play with it a bit to test for different payment behaviours and coin selections.

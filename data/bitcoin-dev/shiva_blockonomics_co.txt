
@_date: 2017-08-30 12:54:13
@_author: shiva sitamraju 
@_subject: [bitcoin-dev] BIP49 Derivation scheme changes 
I wanted to discuss few changes in BIP49
*- Breaking backwards compatibility *
The BIP talks about breaking this, and  but it really doesn't.  I really
feel it should completely break this. Here is why
What would happen if you recover a wallet  using seed words ?
  1. Since there is no difference in seed words between segwit/non segwit,
the wallet would discover both m/44' and m/49' accounts
  2. Note that we cannot ask the user to choose an account he wants to
operate on (Segwit/Non segwit). This is like asking him the HD derivation
path and a really bad UI
  3. The wallet now has to constantly monitor both m/44' and m/49' accounts
for transactions
Basically we are always stuck with keeping compatibility with older seed
words or always asking the user if the seed words came from segwit/non
segwit wallet !
Here is my suggestion :
1. By default all new wallets will be created as segwit  m/49' without
asking user anything. I think you would agree with me that in future we
want most wallet to be default segwit (unless user chooses a non segwit
from advanced options)!
2. Segwit wallet seed words have a different format which is incompatible
with previous wallet seed words. This  encodes the information that this
wallet is segwit in the seed words itself. We need to define a structure
for this
*- XPUB Derivation*
This is something not addressed in the BIP yet.
1. Right now you can get an xpub balance/transaction history. With m/49'
there is no way to know whether an xpub is from m/44' or m/49'
2. This breaks lots of things. Wallets like electrum/armory/mycelium
importing  xpub as a watch only wallet. Also services like blockonomics/
blockchain.info use xpub for displaying balance/generating merchant
Looking forward to hearing your thoughts

@_date: 2017-10-30 14:26:40
@_author: shiva sitamraju 
@_subject: [bitcoin-dev] Visually Differentiable - Bitcoin Addresses 
When I copy and paste bitcoin address, I double check the first few bytes,
to make sure I copied the correct one. This is to make sure some rogue
software is not changing the address, or I incorrectly pasted the wrong
With Bech32 address, its seems like in this department we are taking as
step in the backward direction. With the traditional address, I could
compare first few bytes like 1Ko or 1L3. With bech32, bc1. is all I can see
and compare which is likely to be same anyway. Note that most users will
only compare the first few bytes only (since addresses themselves are very
long and will overflow in a mobile text box).
Is there anyway to make the Bech32 addresses format more visually distinct
(atleast the first few bytes) ?

@_date: 2017-10-30 18:43:56
@_author: shiva sitamraju 
@_subject: [bitcoin-dev] Visually Differentiable - Bitcoin Addresses 
For example bc1qeklep85ntjz4605drds6aww9u0qr46qzrv5xswd35uhjuj8ahfcqgf6hak
in 461e8a4aa0a0e75c06602c505bd7aa06e7116ba5cd98fd6e046e8cbeb00379d6 is 62
bytes ! This is very very long. This will create lot of usability problems
- Blockexplorers (atleast user should be visually able to compare in a
transaction having multiple outputs which one his address)
- Mobiles
- Payment terminals
format is for usability and ease of identification (versus a ECDSA public
key), While I get the error/checksum capabilities Bech32 brings, any user
would prefer a 20 byte address with a checksum  over an address that would
wrap several lines !!
On Mon, Oct 30, 2017 at 6:19 PM, Ben Thompson <

@_date: 2017-09-05 12:40:15
@_author: shiva sitamraju 
@_subject: [bitcoin-dev] BIP49 Derivation scheme changes 
Thanks Thomas. The procedure described in
 is really what I was
looking for ! I really don't see any point of following BIP49, If possible
it would be great if you can propose an alternative to BIP49 that follows
similar structure to what is used in electrum.
I have proposed following changes to BIP32 serialization format
to differentiate segwit xpub/xprv. Below the list of new version bytes,
resulting base58 prefix and network type:
0x042393df ,  sxpr ,   segwit mainnet private key
0x04239377 , sxpb , segwit mainnet public key
0x04222463 , stpb ,  segwit testnet public key
0x042224cc ,  stpr ,  segwit testnet private key
Let me know your thoughts
On Tue, Sep 5, 2017 at 12:12 AM, <

@_date: 2017-09-06 10:50:31
@_author: shiva sitamraju 
@_subject: [bitcoin-dev] BIP49 Derivation scheme changes 
Hi Thomas,
Can you explain why P2WPKH nested in BIP16 P2SH require a different version
than P2WPKH? It seems to me both would would generate same bitcoin address
in txout and hence would be in the same wallet account.
I am fine with your proposal too. Would be great if you can list all new
versions including testnet ones. I would prefer all testnet ones start with
t (easier to identify) instead of having t,u,v
On Wed, Sep 6, 2017 at 3:21 AM, <

@_date: 2017-09-09 19:38:21
@_author: shiva sitamraju 
@_subject: [bitcoin-dev] Proposal: Extended serialization format for BIP-32 
I understand the motivation of adding the birthdate field. However, not
very comfortable with having this in the public key serialization. There
are privacy implication of both the birthday field and having the complete
derivation path, which takes space.
I am fine with Thomas proposal of {x,y,z}. Having additional version byte
field looks modular but since since we already have the big enough version
field in bip32, better to use that instead of adding more bytes.
Thomas, can you please explain why we require different version for P2WPKH
or P2WSH versus (P2WPKH or P2WSH) nested in P2SH. It looked to me that they
would have the same output bitcoin address and under same account.
On Fri, Sep 8, 2017 at 2:09 AM, <

@_date: 2017-09-12 17:36:40
@_author: shiva sitamraju 
@_subject: [bitcoin-dev] Proposal: Extended serialization format for BIP-32 
Thanks Thomas for pointing me to bip173. If everyone is fine, we should go
forward with formalizing Thomas' proposal asap. Already segwit wallet
usage/demand is increasing !
On Tue, Sep 12, 2017 at 4:54 PM, <

@_date: 2018-08-30 12:58:42
@_author: shiva sitamraju 
@_subject: [bitcoin-dev] Testnet3 Reest 
Testnet is now 1411795 blocks and a full sync is taking atleast 48 hours.
Is a testnet reset scheduled in the next release or any reason not to do a
reset ?
Fast onboarding/lower disk overheads would be  very much appreicated for
testing purposes

@_date: 2018-05-30 12:00:25
@_author: shiva sitamraju 
@_subject: [bitcoin-dev] New serialization/encoding format for key material 
The idea to add birthdate and gap limit sounds very good and addresses lots
of problems users are facing.
However, adding birthday to keys breaks two basic properties
- Visually Comparing two keys to find if they are same (Important)
- Different wallet software could set different birthday/gap limit.
creating different xpub/xprv for the same set of mathematically derived
individual keys. This removes the decoupling between key and wallet metadata
In fact, same could be argued to add birthday to WIF private key format to
let wallet discover funds faster.
Is it possible to have a serialization so that in the encoding, the key
part is still visually the same ?
On Tue, May 29, 2018 at 5:30 PM, <

@_date: 2018-09-25 12:29:48
@_author: shiva sitamraju 
@_subject: [bitcoin-dev] URI scheme with optional bech32 address 
I am not sure why this wasn't discussed more but it seemed like a very good
idea to me
QR code is very important for network wide adoption. The problem is bech32
qr code isn't backward compatible and noone is going to show two QR codes.
Everyone is going safe with P2SH address qr code.
Example of proposed URI. I want not sure of technically best encoding, but
this is just for ideas
As merchants/exchanges adopt this QR code, wallets that support bech32 can
chose to autopay to bech32 address  (for lower tx fee). This can create a
network effect as more people start using bech32 and when we reach enough
wallet adoption, people can shift to just showing bech32 QR codes

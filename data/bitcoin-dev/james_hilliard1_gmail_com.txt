
@_date: 2015-12-05 20:47:01
@_author: James Hilliard 
@_subject: [bitcoin-dev] Blockchain verification flag (BIP draft) 
I think something that anyone who isn't validating should be aware of is
that cgminer(which powers the vast majority of the current mining network)
doesn't allow for a pool to revert to mining on the previous block due to
the way chain tracking is implemented.
On Fri, Dec 4, 2015 at 4:43 PM, Rusty Russell via bitcoin-dev <

@_date: 2015-11-12 14:35:05
@_author: James Hilliard 
@_subject: [bitcoin-dev] Upcoming Transaction Priority Changes 
The priority space is causing major mempool bloating and GBT latency right
now since many of the free transactions aren't getting mined and cleared
out of the mempool anymore. From my testing setting minrelaytxfee=0.0001 is
not enough to prevent the mempool from getting large during a spam attack,
it is also necessary to set limitfreerelay=0 in order to prevent GBT
latency degradation. Without setting limitfreerelay=0 GBT degrades
significantly for every hour bitcoind is running.
On Thu, Nov 12, 2015 at 2:25 PM, Luke Dashjr via bitcoin-dev <

@_date: 2015-08-31 20:16:31
@_author: James Hilliard 
@_subject: [bitcoin-dev] AT&T has effectively banned Bitcoin nodes by 
You should tell AT&T that you want the DVR/cable box put into what is
usually referred to as "bridge mode" or sometimes "true bridge mode"
depending on your ISP and then use your own router, look under
"Bridged Mode" at the bottom of this page for AT&T
 . You want your own router to
have the external IP, if it does not it is not configured correctly.
In general one should never use a router provided by their ISP for
anything other than modem functionality since it is typically only the
ISP that can change the firmware on it, it also makes troubleshooting
problems like this more difficult.
On Mon, Aug 31, 2015 at 7:26 PM, Zach G via bitcoin-dev

@_date: 2016-12-10 18:40:25
@_author: James Hilliard 
@_subject: [bitcoin-dev] Managing block size the same way we do difficulty 
Miners in general are naturally incentivized to always mine max size
blocks to maximize transaction fees simply because there is very
little marginal cost to including extra transactions(there will always
be a transaction backlog of some sort available to mine since demand
for block space is effectively unbounded as fees approach 0 and they
can even mine their own transactions without any fees). This proposal
would almost certainly cause runaway block size growth and encourage
much more miner centralization.
On Sat, Dec 10, 2016 at 6:26 PM, t. khan via bitcoin-dev

@_date: 2016-12-11 14:31:05
@_author: James Hilliard 
@_subject: [bitcoin-dev] Managing block size the same way we do difficulty 
What's most likely to happen is miners will max out the blocks they
mine simply to try and get as many transaction fees as possible like
they are doing right now(there will be a backlog of transactions at
any block size). Having the block size double every year would likely
cause major problems and this proposal allows over a 7x increase it
The main problem with this proposal I think is that users effectively
have no way to stop the miners from increasing block size
On Sun, Dec 11, 2016 at 1:55 PM, t. khan via bitcoin-dev

@_date: 2016-12-11 15:55:55
@_author: James Hilliard 
@_subject: [bitcoin-dev] Managing block size the same way we do difficulty 
I think the main thing you're missing is that there will always be
transactions available to mine simply because demand for blockspace is
effectively unbounded as fees approach 0. Nodes generally have a
static mempool size and dynamic minrelaytxfee nowadays so as
transactions get mined lower fee transactions get accepted into the
mempool. An individual opting to not send a transaction would not make
the blocks smaller simply because there will always be other
transactions available(it would really only have an effect on the
transaction fees needed to get mined).

@_date: 2016-02-23 23:52:32
@_author: James Hilliard 
@_subject: [bitcoin-dev] Multi-Stage Merge-Mine Headers Hard-Fork BIP 
BIP: ?
Title: 2016 Multi-Stage Merge-Mine Headers Hard-Fork
Author: James Hilliard Status: Draft
Type: Standards Track
Created: 2016-02-23
Use a staged hard fork to implement a headers format change that is
merge mine incompatible along with a timewarp to kill the previous
We use a block version flag to activate this fork when 3900 out of the
previous 4032 blocks have this the version flag set. This flag locks
in both of the below stages at the same time.
Merge Mine Stage: The initial hard fork is implemented using a merge
mine which requires that the original pre-fork chain be mined with a
generation transaction that creates no new coins in addition to not
containing any transactions. Additionally we have a consensus rule
that requires that ntime be manipulated on the original chain to
artificially increase difficulty and hold back the original chain so
that all non-upgraded clients can never catch up with current time.
The artificial ntime is implemented as a consensus rule for blocks in
the new chain.
Headers Change Stage: This is the final stage of the hard fork where
the header format is made incompatible with merge mining, this is
activated ~50,000 blocks after the Merge Mine Stage and only at the
start of the 2016 block difficulty boundary.
There are serious issues with pooled mining such as block withhold
attacks that can only be fixed by making major changes to the headers
There are a number of other desirable header format changes that can
only be made in a non-merge mine compatible way.
There is a high risk of there being two viable chains if we don't have
a way to permanently disable the original chain.
Our solution is to use a two stage hard fork with a single lock in period.
The first stage is designed to kill off the previous chain by holding
back ntime to artificially increase network difficulty on the original
chain to the point where it would be extremely difficult to mine the
2016 blocks needed to trigger a difficulty adjustment. This also makes
it obvious to unupgraded clients that they are not syncing properly
and need to upgrade.
By locking in both stages at the same time we ensure that any clients
merge mining are also locked in for the headers change stage so that
the original chain is dead by the time the headers change takes place.
We timewarp over a year of merge mining to massively increase the
difficulty on the original chain to the point that it would be
incredibly expensive to reduce the difficulty enough that the chain
would be able to get caught up to current time.
==Backward Compatibility==
This hardfork will permanently disable all nodes, both full and light,
which do not explicitly add support for it.
However, their security will not be compromised due to the implementation.
To migrate, all nodes must choose to upgrade, and miners must express
supermajority support.
==Reference Implementation==

@_date: 2016-02-24 05:37:10
@_author: James Hilliard 
@_subject: [bitcoin-dev] Multi-Stage Merge-Mine Headers Hard-Fork BIP 
I've updated the BIP with your suggestions, would it make sense to
just move the activation condition to the 42 week boundary instead of
repeating the last header? Would that be at block 6048 from the start
of the timewarp?
On Wed, Feb 24, 2016 at 4:58 AM, Tier Nolan via bitcoin-dev

@_date: 2016-05-11 18:00:59
@_author: James Hilliard 
@_subject: [bitcoin-dev] Making AsicBoost irrelevant 
I was told that the patent appears to be owned exclusively by Bitmain
in China On Wed, May 11, 2016 at 4:50 PM, Matt Corallo via bitcoin-dev

@_date: 2017-04-04 09:59:12
@_author: James Hilliard 
@_subject: [bitcoin-dev] BIP draft: Extended block header hardfork 
It is a consensus rule
On Tue, Apr 4, 2017 at 6:47 AM, Tom Zander via bitcoin-dev

@_date: 2017-04-14 14:33:49
@_author: James Hilliard 
@_subject: [bitcoin-dev] I do not support the BIP 148 UASF 
This is false,
Those "everyone can spend" transactions are prohibited from being
mined due to policy rules. The risk is only in regards to mining on
top of an invalid block that intentionally mined an invalid SW

@_date: 2017-04-14 15:51:04
@_author: James Hilliard 
@_subject: [bitcoin-dev] I do not support the BIP 148 UASF 
Yes one can override policy rules and mine invalid SW transactions,
but that's not something that's likely to happen accidentally.
We don't depend on policy to avoid chain forks, policy however is
quite useful for making forks smoother since it can prevent miners
from accidentally mining invalid blocks and prevents users from
accepting invalid transactions accidentally.
This doesn't remove the need for consensus rule enforcement of course.

@_date: 2017-04-14 16:10:46
@_author: James Hilliard 
@_subject: [bitcoin-dev] I do not support the BIP 148 UASF 
On Fri, Apr 14, 2017 at 3:58 PM, Tom Zander via bitcoin-dev
Greg is correct. There is effectively no risk to a non-upgrade
accidentally mining a new invalid block itself, the only risk is that
a non-upgraded miner could itself mine on top of an invalid block. You
would have to intentionally modify the code to mine an invalid block
which is not something that would be likely to happen accidentally.

@_date: 2017-07-02 23:17:08
@_author: James Hilliard 
@_subject: [bitcoin-dev] BIP proposal: No chaining off replaceable 
This seems like something that might be better dealt with by modifying
the RBF eviction policy to calculate feerate separation between the
transactions in the mempool and opportunistically evict the sweep
transaction+parent if it has a sufficiently different feerate from the
bumped fee replacement. Basically you allow the fee bumped replacement
to evict the sweep transaction+parent if there is more than 1MB of
transactions(or whatever the block size/weight limit is) of
transactions between the sweep transaction+parent feerate and bumped
fee replacement feerate. This way the sweep transaction parent only
gets replaced if it is unlikely that miners would ever produce a block
template with transactions at the sweep transaction+parent feerate at
the same time as the replacement transaction feerate. From the miners
point of view this give a higher fee block template overall since it
would be unlikely that one would see transactions with the feerate of
both the CPFP sweep and the replacement parent in the same block
On Sun, Jul 2, 2017 at 10:02 PM, Rhavar via bitcoin-dev

@_date: 2017-06-06 19:56:10
@_author: James Hilliard 
@_subject: [bitcoin-dev] User Activated Soft Fork Split Protection 
Due to the proposed calendar( for the
SegWit2x agreement being too slow to activate SegWit mandatory
signalling ahead of BIP148 using BIP91 I would like to propose another
option that miners can use to prevent a chain split ahead of the Aug
1st BIP148 activation date.
The splitprotection soft fork is essentially BIP91 but using BIP8
instead of BIP9 with a lower activation threshold and immediate
mandatory signalling lock-in. This allows for a majority of miners to
activate mandatory SegWit signalling and prevent a potential chain
split ahead of BIP148 activation.
This BIP allows for miners to respond to market forces quickly ahead
of BIP148 activation by signalling for splitprotection. Any miners
already running BIP148 should be encouraged to use splitprotection.
  BIP: splitprotection
  Layer: Consensus (soft fork)
  Title: User Activated Soft Fork Split Protection
  Author: James Hilliard   Comments-Summary: No comments yet.
  Comments-URI:
  Status: Draft
  Type: Standards Track
  Created: 2017-05-22
  License: BSD-3-Clause
           CC0-1.0
This document specifies a coordination mechanism for a simple majority
of miners to prevent a chain split ahead of BIP148 activation.
"existing segwit deployment" refer to the BIP9 "segwit" deployment
using bit 1, between November 15th 2016 and November 15th 2017 to
activate BIP141, BIP143 and BIP147.
The biggest risk of BIP148 is an extended chain split, this BIP
provides a way for a simple majority of miners to eliminate that risk.
This BIP provides a way for a simple majority of miners to coordinate
activation of the existing segwit deployment with less than 95%
hashpower before BIP148 activation. Due to time constraints unless
immediately deployed BIP91 will likely not be able to enforce
mandatory signalling of segwit before the Aug 1st activation of
BIP148. This BIP provides a method for rapid miner activation of
SegWit mandatory signalling ahead of the BIP148 activation date. Since
the primary goal of this BIP is to reduce the chance of an extended
chain split as much as possible we activate using a simple miner
majority of 65% over a 504 block interval rather than a higher
percentage. This BIP also allows miners to signal their intention to
run BIP148 in order to prevent a chain split.
While this BIP is active, all blocks must set the nVersion header top
3 bits to 001 together with bit field (1<<1) (according to the
existing segwit deployment). Blocks that do not signal as required
will be rejected.
This BIP will be deployed by "version bits" with a 65%(this can be
adjusted if desired) activation threshold BIP9 with the name
"splitprotecion" and using bit 2.
This BIP starts immediately and is a BIP8 style soft fork since
mandatory signalling will start on midnight August 1st 2017 (epoch
time 1501545600) regardless of whether or not this BIP has reached its
own signalling threshold. This BIP will cease to be active when segwit
is locked-in.
=== Reference implementation ===
bool IsWitnessLockedIn(const CBlockIndex* pindexPrev, const
Consensus::Params& params)
    LOCK(cs_main);
    return (VersionBitsState(pindexPrev, params,
Consensus::DEPLOYMENT_SEGWIT, versionbitscache) ==
if ( VersionBitsState(pindex->pprev, chainparams.GetConsensus(),
Consensus::DEPLOYMENT_SPLITPROTECTION, versionbitscache) ==
THRESHOLD_LOCKED_IN &&
     !IsWitnessLockedIn(pindex->pprev, chainparams.GetConsensus()) &&
     !IsWitnessEnabled(pindex->pprev, chainparams.GetConsensus()) ) //
and is not active.
    bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) ==
    bool fSegbit = (pindex->nVersion &
Consensus::DEPLOYMENT_SEGWIT)) != 0;
    if (!(fVersionBits && fSegbit)) {
        return state.DoS(0, error("ConnectBlock(): relayed block must
signal for segwit, please upgrade"), REJECT_INVALID, "bad-no-segwit");
    }
int64_t nMedianTimePast = pindex->GetMedianTimePast();
if ( (nMedianTimePast >= 1501545600) &&  // Tue 01 Aug 2017 00:00:00 UTC
     (nMedianTimePast <= 1510704000) &&  // Wed 15 Nov 2017 00:00:00 UTC
     (!IsWitnessLockedIn(pindex->pprev, chainparams.GetConsensus()) &&
 // Segwit is not locked in
      !IsWitnessEnabled(pindex->pprev, chainparams.GetConsensus())) )
 // and is not active.
    bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) ==
    bool fSegbit = (pindex->nVersion &
Consensus::DEPLOYMENT_SEGWIT)) != 0;
    if (!(fVersionBits && fSegbit)) {
        return state.DoS(0, error("ConnectBlock(): relayed block must
signal for segwit, please upgrade"), REJECT_INVALID, "bad-no-segwit");
    }
==Backwards Compatibility==
This deployment is compatible with the existing "segwit" bit 1
deployment scheduled between midnight November 15th, 2016 and midnight
November 15th, 2017. This deployment is also compatible with the
existing BIP148 deployment. This BIP is compatible with BIP91 only if
BIP91 activates before it and before BIP148. Miners will need to
upgrade their nodes to support splitprotection otherwise they may
build on top of an invalid block. While this bip is active users
should either upgrade to splitprotection or wait for additional
confirmations when accepting payments.
Historically we have used IsSuperMajority() to activate soft forks
such as BIP66 which has a mandatory signalling requirement for miners
once activated, this ensures that miners are aware of new rules being
enforced. This technique can be leveraged to lower the signalling
threshold of a soft fork while it is in the process of being deployed
in a backwards compatible way. We also use a BIP8 style timeout to
ensure that this BIP is compatible with BIP148 and that BIP148
compatible mandatory signalling activates regardless of miner
signalling levels.
By orphaning non-signalling blocks during the BIP9 bit 1 "segwit"
deployment, this BIP can cause the existing "segwit" deployment to
activate without needing to release a new deployment. As we approach
BIP148 activation it may be desirable for a majority of miners to have
a method that will ensure that there is no chain split.
Mailing list discussion]
P2SH flag day activation]
*[[bip-0009.mediawiki|BIP9 Version bits with timeout and delay]]
*[[bip-0016.mediawiki|BIP16 Pay to Script Hash]]
*[[bip-0091.mediawiki|BIP91 Reduced threshold Segwit MASF]]
*[[bip-0141.mediawiki|BIP141 Segregated Witness (Consensus layer)]]
*[[bip-0143.mediawiki|BIP143 Transaction Signature Verification for
Version 0 Witness Program]]
*[[bip-0147.mediawiki|BIP147 Dealing with dummy stack element malleability]]
*[[bip-0148.mediawiki|BIP148 Mandatory activation of segwit deployment]]
*[[bip-0149.mediawiki|BIP149 Segregated Witness (second deployment)]]
*[ Segwit benefits]
This document is dual licensed as BSD 3-clause, and Creative Commons
CC0 1.0 Universal.

@_date: 2017-06-06 20:29:18
@_author: James Hilliard 
@_subject: [bitcoin-dev] User Activated Soft Fork Split Protection 
You need a majority of miners enforcing BIP148 upon BIP148 activation
to prevent a split, not just a majority signalling segwit. This
provides a miner coordination mechanism for BIP148 mandatory
signalling enforcement.
On Tue, Jun 6, 2017 at 8:11 PM, Karl Johan Alm

@_date: 2017-06-06 20:54:37
@_author: James Hilliard 
@_subject: [bitcoin-dev] User Activated Soft Fork Split Protection 
This is a BIP8 style soft fork so mandatory signalling will be active
after Aug 1st regardless.

@_date: 2017-06-07 05:13:43
@_author: James Hilliard 
@_subject: [bitcoin-dev] User Activated Soft Fork Split Protection 
I think even 55% would probably work out fine simply due to incentive
structures, once signalling is over 51% it's then clear to miners that
non-signalling blocks will be orphaned and the rest will rapidly
update to splitprotection/BIP148. The purpose of this BIP is to reduce
chain split risk for BIP148 since it's looking like BIP148 is going to
be run by a non-insignificant percentage of the economy at a minimum.

@_date: 2017-06-07 16:21:29
@_author: James Hilliard 
@_subject: [bitcoin-dev] User Activated Soft Fork Split Protection 
Keep in mind that this is only temporary until segwit has locked in,
after that happens it becomes optional for miners again.

@_date: 2017-06-07 16:42:52
@_author: James Hilliard 
@_subject: [bitcoin-dev] User Activated Soft Fork Split Protection 
I don't really see how this would increase the likelihood of an
extended chain split assuming BIP148 is going to have
non-insignificant economic backing. This BIP is designed to provide a
risk mitigation measure that miners can safely deploy. Since this BIP
only activates with a clear miner majority it should not increase the
risk of an extended chain split. At this point it is not completely
clear how much economic support there is for BIP148 but support
certainly seems to be growing and we have nearly 2 months until BIP148
activation. I intentionally used a shorter activation period here so
that decisions by miners can be made close to the BIP148 activation

@_date: 2017-06-07 16:44:52
@_author: James Hilliard 
@_subject: [bitcoin-dev] User Activated Soft Fork Split Protection 
Yes, this is the same as BIP148, there is no mandatory signalling
after segwit is locked in.

@_date: 2017-06-07 17:23:31
@_author: James Hilliard 
@_subject: [bitcoin-dev] User Activated Soft Fork Split Protection 
It's fairly trivial for miners to signal for BIP91 on bit4 or a
different bit at the same time as the code is trivial enough to
This does give miners another approach to activate segwit ahead of
BIP148, if segwit2x activation is rolled out and activated immediately
then this would not be needed however based on the timeline here
 it would not be possible for BIP91 to
enforce mandatory signalling ahead of BIP148. Maybe that can be
changed though, I've suggested an immediate rollout with a placeholder
client timeout instead of the HF code initially in order to accelerate
There are 2 primary factors involved here, economic support and
hashpower either of which is enough to make a permanent chain split
unlikely, miners will mine whichever chain is most profitable(see
ETH/ETC hashpower profitability equilibrium for an example of how this
works in practice) however there may be lag time immediately after the
split if there is an economic majority but not a hashpower majority
initially. This is risk mitigation that only requires miners support
however. The main issue is just one of activation timelines, BIP91 as
is takes too long to activate unless started ahead of the existing
segwit2x schedule and it's unlikely that BIP148 will get pushed back
any further.

@_date: 2017-06-07 18:11:00
@_author: James Hilliard 
@_subject: [bitcoin-dev] User Activated Soft Fork Split Protection 
Higher transaction fees on a minority chain can compensate miners for
a lower price which would likely be enough to get the BIP148 chain to
a difficulty reduction. BIP148 however is a consensus change that can
be rectified if it gets more work, this would act as an additional
incentive for mine the BIP148 side since there would be no wipeout
risk there. ETC replay protection was done after the fork on an as
needed basis(there are multiple reliable techniques that can be used
to split UTXO's), the same can happen with BIP148 and it is easier to
do with Bitcoin than with the ETH/ETC split IMO.
A big reason BIP148 still has support is because up until SegWit
actually activates there's no guarantee segwit2mb will actually have
the necessary support to activate SegWit.
This is largely an issue due to segwit2x's bundling, if the SW and HF
part of segwit2x were unbundled then there would be no reason to delay
BIP91 activation, this is especially a problem since it takes a good
deal of time to properly code and test a HF. Unfortunately segwit2x
has been quite inflexible in regards to the bundling aspect even
though there are clearly no technical reasons for it to be there.

@_date: 2017-06-07 19:01:19
@_author: James Hilliard 
@_subject: [bitcoin-dev] User Activated Soft Fork Split Protection 
Both are issues, but wipeout risk is different, the ETH/ETC split for
example didn't have any wipeout risk for either side the same is not
true for BIP148(and it is the non-BIP148 side that carries the risk of
chain wipeout).
Not really, there are a few relatively simple techniques such as RBF
which can be leveraged to get confirmations on on-side before double
spending on another. Once a transaction is confirmed on the non-BIP148
chain then the high fee transactions can be made on only the BIP148
side of the split using RBF. Exchanges will likely do this splitting
automatically for uses as well.
There wasn't proper replay protection at split time for ETH/ETC since
normal transactions would get executed on both sides originally,
however replay protection was added by wallets(mainly using splitting
contracts). I don't think a split is desirable however, which is why
I've proposed this BIP.
Yes, miners aren't likely to waste operational mining costs, that's
ultimately why miners would follow the BIP148 side of the chain
assuming it has sufficient economic support or if it's more profitable
to mine.
segwit2x has more issues since the HF part requires users to reach consensus
That's a political reason not a technical reason.

@_date: 2017-06-07 19:44:38
@_author: James Hilliard 
@_subject: [bitcoin-dev] User Activated Soft Fork Split Protection 
It's not automatic but exchanges will likely handle it on behalf of
the less technical users. BIP148 is not intended to cause a permanent
chain split however which is why this was not built in.
They are very likely to, most have contingency plans for this sort of
thing ready to go due to their experience with the ETH/ETC fork.
If you're looking for hard numbers at this point you aren't likely to
find them because not everything is easy to measure directly.
It's mostly economic support that will dictate this, not hashpower
support since the hashpower follows the economy.
We'll know more as we get closer to BIP148 activation by looking at the markets.
And yet segwit2x is insisting on activation bundling which needlessly
complicates and delays SegWit activation.
Sure, technical changes can be made for political reasons, we should
at least be clear in regards to why particular decisions are being
made. I'm supportive of a hard fork for technical reasons but not
political ones as are many others.

@_date: 2017-06-08 04:20:28
@_author: James Hilliard 
@_subject: [bitcoin-dev] User Activated Soft Fork Split Protection 
Right, it's not straight forward to measure because the hard numbers
that we do have tell an incomplete story. In addition the metric that
BIP148 primarily depends on(economic support) is much harder to
measure than other metrics such as hashpower support.
There will likely be some exchanges offering markets for each side of
a potential split separately ahead of BIP148 activation.
I think you've misunderstood the situation, SegWit has widespread
support but has been turned into a political bargaining chip for other
less desirable changes that do not have widespread support.

@_date: 2017-06-13 00:44:23
@_author: James Hilliard 
@_subject: [bitcoin-dev] Proposal: Demonstration of Phase in Full Network 
Wallet nodes being able to fully validate and choose whether or not to
accept a particular chain is an important part of bitcoins security
There is no way to guarantee a wallet node will accept a particular
block since that is always up to the user.
Sounds like this would cause issues with pre-signed time locked transactions.
Technically soft forks can be implemented at 55% hashpower already
without an orphaning period(like BIP16). Those that don't upgrade
would just be at risk of mining invalid blocks. One would not want to
use this method to try and activate a controversial hard fork since
it's trivial for miners to false signal. The orphaning period
effectively forces miners to make a decision but does not necessarily
force them to make a particular decision since they can simply choose
to reject the fork and false signal.
The widely deployed stratum based SPV mining does not really provide a
proper way to validate nversion of the previous block, it only lets
you see the nversion of the current stratum job since you don't get a
full bock header. There's always a risk here that miners build on top
of invalid blocks when SPV mining.
Previous consensus changes have largely been done in backwards
compatible ways which lets users opt-in to new features. In general
backwards compatibility is considered a good thing, this seems to make
that worse.
Miners can simply announce they are false signalling with coinbase
tags and other methods. This activation method would likely not be
viable for controversial changes.
Users would likely take into account markets and other factors when
deciding what to do, the total number of nodes doesn't really matter
much. Miner signalling is not necessarily indicative of economic and
user support.

@_date: 2017-06-13 02:19:24
@_author: James Hilliard 
@_subject: [bitcoin-dev] Proposal: Demonstration of Phase in Full Network 
Nakamoto consensus is used to determine the longest chain among
multiple valid chains, it's not enough to determine validity by
itself. For example in a hard fork if a minority of hashpower decided
not to fork then they would simply consider the forked chain invalid
and ignore it, even if that majority chain had significantly more
It's just problematic in general and I'm not sure there's a good way
around it other than putting as many safety nets as possible in place
to limit the amount of time miners mine on invalid work. For example
when an invalid BU blocks was mined on the network more than 50% of
hashpower mined on top of it for a short period of time.
I'm not seeing how it could be considered backwards compatible if
"they cannot send transactions or get any confirmations".
I'm referring to a potential situation where 55% of miners want a
change and 45% don't, the 45% could false signal.

@_date: 2017-06-13 03:37:43
@_author: James Hilliard 
@_subject: [bitcoin-dev] Proposal: Demonstration of Phase in Full Network 
They generally don't have to switch to an altcoin when they get to
choose which blocks they accept ultimately. This is a key component of
Bitcoin's incentive model since it makes it so miners are unlikely to
do a hard fork if their blocks would not be accepted by nodes/users.
For example if 55% of miners wanted to hard fork and change the block
reward back to 50 BTC the minority side would not need to switch to an
altcoin, they would just need to ignore those 50 BTC block reward
By backwards compatible I mean being able to continue functioning
without updating the node, soft forks are generally backwards
compatible because you can still transact even if you don't upgrade
your node to support the soft fork, you just won't be able to use the
new soft fork features.

@_date: 2017-06-13 05:20:11
@_author: James Hilliard 
@_subject: [bitcoin-dev] Proposal: Demonstration of Phase in Full Network 
I think that would cause problems with systems like lightning network
that rely on reliable confirmations of transactions as part of their
security models.

@_date: 2017-06-13 19:23:06
@_author: James Hilliard 
@_subject: [bitcoin-dev] Proposal: Demonstration of Phase in Full Network 
BU by default uses an "Accept Depth" parameter which effectively lets
miners decide block size rules and allows for resource requirements
that are too high for many users to validate. The block size settings
there are effectively placebo controls.
That's largely true that they typically don't decide the victor in
soft forks unless they are the ones to activate the rules
changes(satoshi did this a few times in the early days), however they
make it very difficult for a hard fork to be activated without
consent. Yes, I'm not advocating for having runtime consensus settings
for nodes either, I'm advocating that resource requirements be low
enough that full validation remains possible for a large percentage of
the economy.
More likely the false signal would be used during the orphaning period
to prevent blocks from being orphaned for miners that don't want to
follow the fork.
Yes, there is a good amount of risk with validationless mining right
now here since it's well known that over half of mining pools use
validationless mining to some degree. This may not be too bad though
due to fallbacks but the risk is probably fairly implementation

@_date: 2017-03-23 19:31:25
@_author: James Hilliard 
@_subject: [bitcoin-dev] Issolated Bitcoin Nodes 
There were bridge nodes being run on testnet at one point to prevent
forks On Thu, Mar 23, 2017 at 7:20 PM, Pieter Wuille via bitcoin-dev

@_date: 2017-05-09 09:33:34
@_author: James Hilliard 
@_subject: [bitcoin-dev] Some real-world results about the current Segwit 
The discount is designed to reduce UTXO bloat primarily, witness spam
data would not make it into the UTXO set. The discount brings the fee
of a transaction more in line with the actual costs to the network for
the transaction. A miner spamming the network with 4MB witness blocks
would have very little impact on the UTXO size compared with 1MB
non-witness blocks. UTXO size is a bigger issue than blockchain size
since full nodes can't prune the UTXO set.
The discount of 75% for the SegWit softfork doesn't really have any
effect on future hard forks as it can always be adjusted as needed
later on as part of a HF.
On Tue, May 9, 2017 at 8:49 AM, Sergio Demian Lerner via bitcoin-dev

@_date: 2017-05-09 11:27:59
@_author: James Hilliard 
@_subject: [bitcoin-dev] Some real-world results about the current Segwit 
Doing a second soft-fork from 50% to 75% sounds more difficult since
that's going from a more restrictive ruleset to less restrictive, you
might be able to hack around it but it wouldn't be a fully backwards
compatible change like going from 75% to 50% would be. 50% vs 75% does
affect max transactions/second in practice, the exact amount depends
on the real world usage of course though.
On Tue, May 9, 2017 at 11:19 AM, Sergio Demian Lerner via bitcoin-dev

@_date: 2017-05-18 08:57:08
@_author: James Hilliard 
@_subject: [bitcoin-dev] 
Locking the lower bits on the timestamp will likely break existing
hardware that relies on being able to roll ntime.
On Thu, May 18, 2017 at 8:44 AM, Cameron Garnham via bitcoin-dev

@_date: 2017-05-22 18:40:13
@_author: James Hilliard 
@_subject: [bitcoin-dev] Reduced signalling threshold activation of existing 
I would like to propose an implementation that accomplishes the first
part of the Barry Silbert proposal independently from the second:
"Activate Segregated Witness at an 80% threshold, signaling at bit 4"
in a way that
The goal here is to minimize chain split risk and network disruption
while maximizing backwards compatibility and still providing for rapid
activation of segwit at the 80% threshold using bit 4.
By activating segwit immediately and separately from any HF we can
scale quickly without risking a rushed combined segwit+HF that would
almost certainly cause widespread issues.
Draft proposal:
Proposal text:
  BIP: segsignal
  Layer: Consensus (soft fork)
  Title: Reduced signalling threshold activation of existing segwit deployment
  Author: James Hilliard   Status: Draft
  Type: Standards Track
  Created: 2017-05-22
  License: BSD-3-Clause
           CC0-1.0
This document specifies a method to activate the existing BIP9 segwit
deployment with a majority hashpower less than 95%.
"existing segwit deployment" refer to the BIP9 "segwit" deployment
using bit 1, between November 15th 2016 and November 15th 2017 to
activate BIP141, BIP143 and BIP147.
Segwit increases the blocksize, fixes transaction malleability, and
makes scripting easier to upgrade as well as bringing many other
[ benefits].
This BIP provides a way for a simple majority of miners to coordinate
activation of the existing segwit deployment with less than 95%
hashpower. For a number of reasons a complete redeployment of segwit
is difficulty to do until the existing deployment expires. This is due
to 0.13.1+ having many segwit related features active already,
including all the P2P components, the new network service flag, the
witness-tx and block messages, compact blocks v2 and preferential
peering. A redeployment of segwit will need to redefine all these
things and doing so before expiry would greatly complicate testing.
While this BIP is active, all blocks must set the nVersion header top
3 bits to 001 together with bit field (1<<1) (according to the
existing segwit deployment). Blocks that do not signal as required
will be rejected.
This BIP will be deployed by a "version bits" with an 80%(this can be
adjusted if desired) activation threshold BIP9 with the name
"segsignal" and using bit 4.
This BIP will have a start time of midnight June 1st, 2017 (epoch time
1496275200) and timeout on midnight November 15th 2017 (epoch time
1510704000). This BIP will cease to be active when segwit is
=== Reference implementation ===
bool IsWitnessLockedIn(const CBlockIndex* pindexPrev, const
Consensus::Params& params)
    LOCK(cs_main);
    return (VersionBitsState(pindexPrev, params,
Consensus::DEPLOYMENT_SEGWIT, versionbitscache) ==
if ( VersionBitsState(pindex->pprev, chainparams.GetConsensus(),
Consensus::DEPLOYMENT_SEGSIGNAL, versionbitscache) == THRESHOLD_ACTIVE
     !IsWitnessLockedIn(pindex->pprev, chainparams.GetConsensus()) &&
     !IsWitnessEnabled(pindex->pprev, chainparams.GetConsensus()) ) //
and is not active.
    bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) ==
    bool fSegbit = (pindex->nVersion &
Consensus::DEPLOYMENT_SEGWIT)) != 0;
    if (!(fVersionBits && fSegbit)) {
        return state.DoS(0, error("ConnectBlock(): relayed block must
signal for segwit, please upgrade"), REJECT_INVALID, "bad-no-segwit");
    }
==Backwards Compatibility==
This deployment is compatible with the existing "segwit" bit 1
deployment scheduled between midnight November 15th, 2016 and midnight
November 15th, 2017. Miners will need to upgrade their nodes to
support segsignal otherwise they may build on top of an invalid block.
While this bip is active users should either upgrade to segsignal or
wait for additional confirmations when accepting payments.
Historically we have used IsSuperMajority() to activate soft forks
such as BIP66 which has a mandatory signalling requirement for miners
once activated, this ensures that miners are aware of new rules being
enforced. This technique can be leveraged to lower the signalling
threshold of a soft fork while it is in the process of being deployed
in a backwards compatible way.
By orphaning non-signalling blocks during the BIP9 bit 1 "segwit"
deployment, this BIP can cause the existing "segwit" deployment to
activate without needing to release a new deployment.
Mailing list discussion]
P2SH flag day activation]
*[[bip-0009.mediawiki|BIP9 Version bits with timeout and delay]]
*[[bip-0016.mediawiki|BIP16 Pay to Script Hash]]
*[[bip-0141.mediawiki|BIP141 Segregated Witness (Consensus layer)]]
*[[bip-0143.mediawiki|BIP143 Transaction Signature Verification for
Version 0 Witness Program]]
*[[bip-0147.mediawiki|BIP147 Dealing with dummy stack element malleability]]
*[[bip-0148.mediawiki|BIP148 Mandatory activation of segwit deployment]]
*[[bip-0149.mediawiki|BIP149 Segregated Witness (second deployment)]]
*[ Segwit benefits]
This document is dual licensed as BSD 3-clause, and Creative Commons
CC0 1.0 Universal.

@_date: 2017-05-23 12:56:51
@_author: James Hilliard 
@_subject: [bitcoin-dev] Reduced signalling threshold activation of 
That can be done as a separate proposal, it's not mutually exclusive
to this one for those who intend to run BIP148.
I disagree that it should be only run by miners, enforcement of
segsignal mandatory signalling by economic nodes strongly discourages
any false signaling.
Those who can should still upgrade for segsignal, the more that
upgrade ahead of activation the more secure it is. Those who don't
upgrade would want to wait for more confirmations anyways. I didn't
think a lock in period was all that good an idea here due to the
fairly short deployment timeline.

@_date: 2017-05-23 16:42:46
@_author: James Hilliard 
@_subject: [bitcoin-dev] Reduced signalling threshold activation of 
That is incorrect, it is compatible with the current segwit
implementation because it triggers a mandatory signalling period that
will activate segwit on existing nodes.
On Tue, May 23, 2017 at 4:39 PM, Andrew Chow via bitcoin-dev

@_date: 2017-05-24 12:36:03
@_author: James Hilliard 
@_subject: [bitcoin-dev] Reduced signalling threshold activation of 
I would be fine with that, since segwit is widely deployed on the
network already a lower activation threshold should be safe.

@_date: 2017-05-26 17:30:37
@_author: James Hilliard 
@_subject: [bitcoin-dev] Barry Silbert segwit agreement 
Mandatory signalling is the only way to lock in segwit with less than
95% hashpower without a full redeployment(which for a number of
technical reasons isn't feasible until after the existing segwit
deployment expires). There's no reason not to signal BIP141 bit 1
while also signalling bit 4, but you would want to use bit 4 to
coordinate bit 1 mandatory signalling.
It would not be feasible to schedule any HF until one can be
completely sure BIP141 is active(at least not without waiting for the
timeout and doing a redeployment) due to activation/p2p codepath
complexity. This is why the mandatory signalling period is needed.
Since it is likely a HF will take months of development and testing I
see this or something similar as the fastest safe path forward:
1. Use BIP91 or similar to activate BIP141 via mandatory signalling
ASAP(likely using bit 4)
2. Develop HF code based on assumption that BIP141 is active so that
you only have to test the BIP141->HF upgrade/activation codepath.
3. Deploy HF after BIP141 lock in(bit 4 can be reused again here since
this will be after BIP91 expiration)
When rolling out some features it often makes sense to combine them
into a single fork for example BIP's 68, 112, 113 were rolled out at
the same time as are BIP's 141, 143, 144, 145 for segwit, however a HF
has required features that would conflict with with features in the
segwit rollout which is why attempting to simultaneously deploy them
would cause major complexity/testing issues(you would have to deal
with feature conflict resolution for multiple potential activation
scenarios). By doing a staged rollout of segwit and then a HF you get
a single testable upgrade path.
Based on past development experiences I wouldn't expect a 6 month
timeline to be realistic for a properly tested HF, but this proposed
upgrade path should be the fastest available for both SegWit and a HF
On Fri, May 26, 2017 at 4:10 PM, Jacob Eliosoff via bitcoin-dev

@_date: 2017-05-28 18:28:11
@_author: James Hilliard 
@_subject: [bitcoin-dev] Barry Silbert segwit agreement 
On Sun, May 28, 2017 at 3:51 PM, Tom Zander via bitcoin-dev
That would partition off those clients, which is not something we
would want to happen.
This isn't possible until either BIP141 segwit is active or BIP141
segwit has expired.
We don't know that since bip9 bit1 only needs 55% hashpower to be
triggered(see BIP91 activation method for how this can be done)
BIP91 activation is clearly superior than trying to fully redeploy, it
is far simpler and can be done almost immediately with only miners
needing to upgrade.

@_date: 2017-05-29 05:19:18
@_author: James Hilliard 
@_subject: [bitcoin-dev] Compatibility-Oriented Omnibus Proposal 
For the reasons listed
you should have it so that the HF can not lock in unless the existing
BIP141 segwit deployment is activated.
The biggest issue is that a safe HF is very unlikely to be able to be
coded and tested within 6 months.
On Sun, May 28, 2017 at 8:18 PM, CalvinRechner via bitcoin-dev

@_date: 2017-10-06 08:36:15
@_author: James Hilliard 
@_subject: [bitcoin-dev] A solution may solve Block Withholding Attack 
There have been some other proposals to deal with this such as
that may be possible to implement in existing miners.
On Tue, Oct 3, 2017 at 9:52 AM, ??? via bitcoin-dev

@_date: 2018-01-01 12:50:04
@_author: James Hilliard 
@_subject: [bitcoin-dev] Decoupling BIP70 Payment Protocol from Wallets 
Recently a large merchant payment processor has decided to drop
support for BIP21 payment URI's in favor of accepting exclusively
BIP70 payments which has brought to light a number of problems with
1. Many wallets do not support BIP70 and have no near term intention
of doing so.
2. BIP70 requires large complex PKI dependencies such as X.509 and TLS
support(usually via openssl) which have a large attack surface and
poor track record when it comes to vulnerabilities.
3. Signing transactions with keys resident in the same application as
that which handles TLS greatly increases the possibility of keys being
leaked due to vulnerabilities in TLS libraries such as
openssl(heartbleed etc).
4. Sending payments first to a BIP70 compatible wallet before sending
to the merchant increases fees and uses more block space than sending
directly since it is often not feasible for users to fully migrate
funds to a BIP70 compatible wallet.
5. Paying a BIP70 invoice with an incompatible wallet currently
requires manual non-user-friendly workarounds such as
I propose that we move the BIP70 protocol implementation into a
browser extension that can communicate with wallets over a simple IPC
mechanism such as
in addition to acting as a translation layer that can convert BIP70
URL's into standard BIP21 URI's for wallets that do not wish to
support BIP70 or other custom schemes.
This will provide a number of advantages over the current method of
implementing BIP70 directly within wallets:
1. It removes complex/risky dependencies from wallets and moves them
into the browser which already has to implement full PKI support.
2. It re-enables payment support for wallets that only support
BIP21/normal addresses.
3. It makes offline/custom signing schemes easier to use with BIP70.

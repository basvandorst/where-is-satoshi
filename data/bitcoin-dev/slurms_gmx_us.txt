
@_date: 2015-07-23 16:19:59
@_author: slurms@gmx.us 
@_subject: [bitcoin-dev] Bitcoin Node Speed Test 
On this day, the Bitcoin network was crawled and reachable nodes surveyed to find their maximum throughput in order to determine if it can safely support a faster block rate. Specifically this is an attempt to prove or disprove the common statement that 1MB blocks were only suitable slower internet connections in 2009 when Bitcoin launched, and that connection speeds have improved to the point of obviously supporting larger blocks.
The testing methodology is as follows:
?* Nodes were randomly selected from a peers.dat, 5% of the reachable nodes in the network were contacted.
?* A random selection of blocks was downloaded from each peer.
?* There is some bias towards higher connection speeds, very slow connections (<30KB/s) timed out in order to run the test at a reasonable rate.
?* The connecting node was in Amsterdam with a 1GB NIC.  * 37% of connected nodes failed to upload blocks faster than 1MB/s.
 * 16% of connected nodes uploaded blocks faster than 10MB/s.
 * Raw data, one line per connected node, kilobytes per second This does not support the theory that the network has the available bandwidth for increased block sizes, as in its current state 37% of nodes would fail to upload a 20MB block to a single peer in under 20 seconds (referencing a number quoted by Gavin). If the bar for suitability is placed at taking only 1% of the block time (6 seconds) to upload one block to one peer, then 69% of the network fails for 20MB blocks. For comparison, only 10% fail this metric for 1MB blocks.

@_date: 2015-07-23 17:56:05
@_author: Slurms MacKenzie 
@_subject: [bitcoin-dev] Electrum Server Speed Test 
Similar to the Bitcoin Node Speed Test, this is a quick quantitative look at how the Electrum server software handles under load. The Electrum wallet is extremely popular, and the distributed servers which power it are all hosted by volunteers without budget. The server requires a fully indexed Bitcoin Core daemon running, and produces sizable external index in order to allow SPV clients to quickly retrieve their history.     3.9G    electrum/utxo
    67M     electrum/undo
    19G     electrum/hist
    1.4G    electrum/addr
    24G     electrum/
Based on my own logs produced by the electrum-server console, it takes this server (Xeon, lots of memory, 7200 RPM RAID) approximately 3.7 minutes per megabyte of block to process into the index. This seems to hold true through the 10 or so blocks I have in my scroll buffer, the contents of blocks seem to be of approximately the same processing load. Continuing this trend with the current inter-block time of 9.8 minutes, an electrum-server instance running on modest-high end dedicated server is able to support up to 2.64 MB block sizes before permanently falling behind the chain.

@_date: 2015-07-23 20:12:35
@_author: Slurms MacKenzie 
@_subject: [bitcoin-dev] Bitcoin Core and hard forks 
You complained about the lack of quantitative analysis being used, I gave it to you. There's nothing "negative" about displaying data which doesn't completely back up what your position is, I made a sensible conclusion based on the facts I have in front of me. Ignoring the information I collected and presented for you is incredibly childish. I should stress that I didn't present that timing information as a dig against their software, it just happens to be something I have direct access to and can prevent clean data about. The point that I was attempting to make is that Bitcoin Core isn't the only piece of software in the ecosystem with performance problems, given that a large portion of users have Electrum wallets it would be insane not to consider the impact changes will have on the people that charitably run servers for the community. By the way, is that an offer to buy my dedicated server some new SSDs? Scaling up isn't tweaking parameters and ignoring the brickwork falling around your head. You mention that you think the merkle tree can hold an unlimited amount of information, that's all very well so long as people can actually validate the thing. Miners aren't even willing to validate their own blocks at the peril of losing $7000 USD (on two occasions now), so why would anybody else?

@_date: 2015-07-23 20:26:41
@_author: Slurms MacKenzie 
@_subject: [bitcoin-dev] Electrum Server Speed Test 
That's purely the time on the wall for electrum-server, validation in bitcoind happens before. As ThomasV has pointed out it is significantly faster with a solid state disk (but much more expensive to operate), if we get to that point it'll only be expensive servers with lots of SSD space which are able to keep up with the current software. I was mostly trying to make a point about other software being impacted in ways which aren't really discussed, rather than a specific dig about electrum-server. I should have made that more clear.

@_date: 2015-07-24 05:19:35
@_author: Slurms MacKenzie 
@_subject: [bitcoin-dev] Bitcoin Node Speed Test 
Yes that is completely doable for the next crawl, however I am not sure how much that reflects the behavior bitcoind would see when making connections. Nodes do not make any attempt to sync with close peers, which is an undesirable property if you are attempting to be sybil resistant. With some quick playing around it seems that you do get the expected speedup with close proximity, but it's not a particularly huge difference at present. I'll keep working on it and see where I get.

@_date: 2015-07-24 05:37:30
@_author: Slurms MacKenzie 
@_subject: [bitcoin-dev] Bitcoin Roadmap 2015, 
It's worth noting that even massive companies with $30M USD of funding don't run a single Bitcoin Core node, which is somewhat against the general concept people present of companies having an incentive to run their own to protect their own wallet.

@_date: 2015-07-24 05:42:07
@_author: Slurms MacKenzie 
@_subject: [bitcoin-dev] Making Electrum more anonymous 
Keep in mind this is the similar premise as claimed to be offered by BIP37 bloom filters, but faulty assumptions and implementation failure in BitcoinJ have meant that bloom filters uniquely identify the wallet and offer no privacy for the user no matter what the settings are. If you imagine a system where there is somehow complete separation and anonymization between all requests and subscriptions, the timing still leaks the association between the addresses to the listeners. The obvious solution to that is to use a very high latency mix network, but I somehow doubt that there's any desire for a wallet with SPV security that takes a week to return results.

@_date: 2015-07-24 11:38:44
@_author: Slurms MacKenzie 
@_subject: [bitcoin-dev] Making Electrum more anonymous 
Somewhat under discussed too, really. Peoples money doesn't fly out the window when their privacy is ripped out from under them, as such discussing it seems a little meaningless. As some of the most popular wallets don't even use change addresses, for the comfort of the developers and at the cost of the user. Which makes the general clambering for demise of the full node wallet all the more baffling.
Yep, any leak is a useful leak. Even if you only expose one single address request to me, I now have an idea of what timezone you are in and can eliminate it from other implausible ones. Onion routing is not a solution in my mind, you're just asking for people to sybil attack Electrum clients to capture as much timing data as possible. There's no defending against that.
Realistically this is all too broken to be building wallets on top of. SPV clients are neither secure nor private, we should feel guilty for ever promoting them.

@_date: 2015-07-24 11:43:00
@_author: Slurms MacKenzie 
@_subject: [bitcoin-dev] BIP 102 - kick the can down the road to 2MB 
I'll have better stats available soon, but this does not reflect the current state of the network. Only 4% of my initial crawl presented bandwidth above your stated 18MB/s.

@_date: 2015-07-24 23:12:38
@_author: Slurms MacKenzie 
@_subject: [bitcoin-dev] Bitcoin Roadmap 2015, 
They do not run anything but BitcoinJ (evidenced by them blindly following invalid chains), so no proper consensus checking going on here at all. Connected to my nodes is a bad peer (doesn?t relay inventory but downloads everything) from 37.187.136.15, with the user agent /BitcoinJ:0.12SNAPHOT/Satoshi:0.2.0/ which is owned by blockchain.info. You can also submit an invalid transaction through their /pushtx interface and get a mixture of noise and BitcoinJ error messages out of it as well. If even the people who have to their claim hundreds of thousands of wallets are relying on their security don?t bother running even a single node to sanity check against, who are we really going to expect people to in the future if the load goes 8x, 16x, 32x higher? Like CoinBase and others, these are the companies which are claimed will be the ones supporting the network with ludicrous sized blocks because they have a financial incentive to. Well, they don't even do it now when it could be achieved with a $5 VPS.

@_date: 2015-07-24 23:20:06
@_author: Slurms MacKenzie 
@_subject: [bitcoin-dev] Making Electrum more anonymous 
It leaks your timezone too. As pointed out in another thread running a electrum-server instance is no easy task and can't really be suggested to another as a sensible thing to run for themselves. Enthusiasts maybe, but they'll just want to run Bitcoin core and skip the behemoth middleman.

@_date: 2015-07-25 13:19:43
@_author: Slurms MacKenzie 
@_subject: [bitcoin-dev] Bitcoin Roadmap 2015, 
The answer to that is a less illegal than probing other peoples web servers. Up until recently the reverse name lookup for that IP address was markets.blockchain.info, which I resolve when I log incoming connections in an attempt to filter out some abusive clients coming from university connections. Other people have noticed these abusive clients too. There?s mentions of other connections running the same version of BitcoinJ coming from sources that appear to be blockchain.info which display similar behavior. A user in  was complaining about this client hammering closed ports with connections when they are kicked off.

@_date: 2015-07-25 13:22:24
@_author: Slurms MacKenzie 
@_subject: [bitcoin-dev] Bitcoin, Perceptions, and Expectations 
How do you explain to end users that a "validated" transaction can instantly become completely unspendable by a mined block? This seems like setting up people to just be Finney attacked even more.

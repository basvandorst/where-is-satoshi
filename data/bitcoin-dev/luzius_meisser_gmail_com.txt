
@_date: 2016-01-26 18:42:25
@_author: Luzius Meisser 
@_subject: [bitcoin-dev] Fee smoothing 
This post serves to convince you of the economic benefits of smoothing
the payout of fees across blocks. It incentivizes decentralization and
supports the establishment of a fee market.
Idea: currently, the total amount of fees collected in a block is paid
out in full to whoever mined that block. I propose to only pay out,
say, 10% of the collected fees, and to add the remaining 90% to the
collected fees of the next block. Thus, the payout to the miner
constitutes a rolling average of collected fees from the current and
past blocks. This reduces the marginal benefit of including an
additional transaction into a block by an order of magnitude and thus
aligns the incentives of individual miners better with those of the
whole network. As a side-effect, the disadvantage of mining with a
slow connection is reduced.
Example: currently, given a transaction with a fee of 1000 Satoshis
and global processing cost per transaction of 5000 Satoshis, an
individual miner would still include the transaction if it costs him
500 Satoshis to do so, as the remaining burden of 4500 Satoshis is
carried by others (a classic externality). However, with fee
smoothing, the immediate benefit of including that particular
transaction is reduced to 100 Satoshis, aligning the economic
incentives of the miner better with the whole network and leading the
miner to skip it. Generally, the fraction that is paid out immediately
(here 10%) can be used to adjust the incentive, but not arbitrarily.
1. The disadvantage of mining with a slow connection is reduced by an
order of magnitude. If it takes 30 seconds to download the latest
block, a miner loses 5% of the potential income from fees as he does
not know yet which transactions to include in the next block. With fee
smoothing, that loss is reduced to 0.5% as he would still earn 90% of
the average fees per block by mining an empty one based on the latest
2. This is a step towards a free fee market. In an ideal market,
prices form where supply and demand meet, with the fees asymptotically
approaching the marginal costs of a transaction. Currently, supply is
capped and only demand can adjust. Should we ever consider to let
miners decide about supply, it is essential that their marginal
benefit of including an additional transaction is aligned with the
global marginal cost incurred by that additional transaction. Fee
smoothing is a step in this direction.
3. The incentive to form mining pools is reduced. Currently,
solo-mining yields a very volatile income stream due to the random
nature of mining, leading to the formation of pools. This volatility
will increase to even higher levels once the amount of Bitcoins earned
per block is dominated by (volatile) collected fees and not by
(constant) freshly minted coins, thus increasing the economic pressure
to join a large pool. Fee smoothing reduces that volatility and
Problems: touching anything related to fee distribution is a political
minefield. This proposal probably requires a hard fork. Its technical
feasibility was only superficially verified.
This is my first post to this list and I am looking forward to your
comments. In case this proposal is received well, I plan to
specify/implement the idea more formally in order to kick off the
usual process for improvements.

@_date: 2016-01-27 11:12:02
@_author: Luzius Meisser 
@_subject: [bitcoin-dev] Fee smoothing 
2016-01-27 3:45 GMT+01:00 Warren Togami Jr. :
While I find the other points you raised debatable, the out-of-band
argument looks strong enough to kill the idea. To work around it, one
would need to create rules about the transactions that can be included
in a block, for example by mandating that all included transactions
must have a fee at least as high as 0.9 times the 5th percentile of
the transactions in the previous 10 blocks. However, having to tell
the miners what fees they are allowed to accept destroys some of the
elegance of the idea. Maybe I should put it to rest for now and see if
a more elegant solution comes to mind later.
I agree that flex cap is promising. However, for it to be a viable
long-term solution, it must not depend on significant block subsidies
to work as the block subsidy will become less and less relevant over
Picking up your thoughts, I guess this is how flex cap should be done:
1. There is a flexible block cap (e.g. 1 MB). This first MB is free to fill.
2. Miners can buy additional space for an exponentially increasing
fee. For example, the first KiB might cost 200 Satoshis, the second
KiB 400 Satoshis, the tenth KiB 102400 Satoshis etc.
3. The price of the purchased space is subtracted from the collected
fees and added to the reward of the next block.
4. The amount miners are willing to spend on additional space allows
to calculate the marginal costs of a transaction of a miner. For
example, if a miner pays 6000 Satoshis to include a 1 KB transaction
with a fee of 6100 Satoshis, the marginal costs must be below 100
Satoshis, assuming a rational miner. This cost is multiplied by say 50
to account for the costs of decentralization to get a global cost
estimate of 5000 Satoshis per KB.
5. Every 1000 blocks or so, the basic cap is adjusted upwards or
downwards (e.g. by 10%) depending on whether the average fees per KB
were above or below the global cost estimate.
Under such a scheme, prices should get very close to free market
prices. However, ruthless competition can get ugly in markets where
fixed costs dominate. We can currently witness this in the oil
industry. Thus, from an economic point of view, it might be more
advisable to simply let miners vote on block size, as has been
proposed by others. The drawback of voting is that it allows miners to
enforce a cartel among themselves and to charge monopoly prices
instead of competitive prices. However, monopoly prices would already
be much better than having an artificial cap.
Warren, thank you for your thoughts! I appreciate the opportunity to
discuss ideas at such a high level.
Luzius Meisser
President of Bitcoin Association Switzerland
MSc in Computer Science and MA in Economics

@_date: 2016-01-28 21:16:41
@_author: Luzius Meisser 
@_subject: [bitcoin-dev] Fee smoothing 
2016-01-28 13:00 GMT+01:00  Warren Togami Jr. :
The cost of the vote is completely irrelevant. What matters are the
resulting block sizes and transaction fees. Assuming rational,
profit-maximizing miners, BIP100 would allow them to effectively
enforce a cartel and to set block sizes (and thereby indirectly also
fees) at monopoly price levels. Charging something for a vote would
not affect that equilibrium and thus also neither affect block sizes
nor fees. Also note that monopoly prices are always at least as high
as competitive market prices. In other words: the transaction fees
that emerge under BIP100 will be higher than those that would emerge
with a flex cap mechanism that is based on the total marginal costs of
the miners. If you do not believe that, I'll happily go into the gory
There are two types of flex cap mechanisms: First, there mechanisms
like the one I described previously which ensures that supply is based
on the actual costs of the miners. If done right, they can lead to a
competitive equilibrium with free market prices. Second, there are
flex cap mechanisms that simply replace todays centrally planned
constant cap with a centrally planned supply curve. If you believe in
central planning, that's ok. I for one prefer to avoid it. Also, it is
not much better than the constant cap, maybe even worse.
Note that neither type of flex cap adjusts to the marginal cost of the
entire network, simply because none of them can measure the cost of
running a full node, yet alone reliably detect the number of running
full nodes. Any attempt to do so would be futile anyway because it
would too easy to pretend-run full nodes in order to manipulate the
mechanism. When reasoning about full nodes, completely different
forces are at play. The only connection between full nodes and the fee
market is that larger blocks make it more expensive to run a full
However, a holistic analysis must also reason about the benefits of
running a full node. I often see one-sided arguments saying that
increasing block sizes will make running one more expensive and thus
there will be fewer nodes. This logic is flawed because the economic
reasons for running a full node are not understood and taken into
account. An example reason could be the ability to monitor the network
and to verify transactions, which is very valuable to exchanges,
merchants and wallet services. To them, this value of running a full
node even grows with the number of customers. Thus, depending on the
circumstances, increase block sizes can counter-intuitively make it
more attractive to run a full node. The big picture from a systemic
perspective can look completely different than the conventional
micro-view that only sees first-order effects. Unfortunately, most
people are not great systems-thinkers.
2016-01-27 11:12 GMT+01:00 Luzius Meisser :

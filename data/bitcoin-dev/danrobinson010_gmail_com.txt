
@_date: 2016-11-03 07:37:29
@_author: Daniel Robinson 
@_subject: [bitcoin-dev] Implementing Covenants with 
Really cool!
How about "poison transactions," the other covenants use case proposed by
M?ser, Eyal, and Sirer? (I think OP_CHECKSIGFROMSTACKVERIFY will also make
it easier to check fraud proofs, the other prerequisite for poison
Seems a little wasteful to do those two "unnecessary" signature checks, and
to have to construct the entire transaction data structure, just to verify
a single output in the transaction. Any plans to add more flexible
introspection opcodes to Elements, such as OP_CHECKOUTPUTVERIFY?
Really minor nit: "Notice that we have appended 0x83 to the end of the
transaction data"?should this say "to the end of the signature"?
On Thu, Nov 3, 2016 at 12:28 AM Russell O'Connor via bitcoin-dev <
Right.  There are minor trade-offs to be made with regards to that design
point of OP_CHECKSIGFROMSTACKVERIFY.  Fortunately this covenant
construction isn't sensitive to that choice and can be made to work with
either implementation of OP_CHECKSIGFROMSTACKVERIFY.
Interesting. I have implemented OP_CHECKSIGFROMSTACKVERIFY in a different
way from the Elements. Instead of hashing the data on stack, I directly put
the 32 byte hash to the stack. This should be more flexible as not every
system are using double-SHA256
On 3 Nov 2016, at 01:30, Russell O'Connor via bitcoin-dev <
Hi all,
It is possible to implement covenants using two script extensions: OP_CAT
and OP_CHECKSIGFROMSTACKVERIFY.  Both of these op codes are already
available in the Elements Alpha sidechain, so it is possible to construct
covenants in Elements Alpha today.  I have detailed how the construction
works in a blog post at <
  As
an example, I've constructed scripts for the Moeser-Eyal-Sirer vault.
I'm interested in collecting and implementing other useful covenants, so if
people have ideas, please post them.
If there are any questions, I'd be happy to answer.

@_date: 2016-10-14 04:51:01
@_author: Daniel Robinson 
@_subject: [bitcoin-dev] DPL is not only not enough, 
Agreed. Also worth noting that it has a potential advantage over unilateral
patent disarmament, analogous to the advantage of copyleft licenses over
MIT/BSD: it provides an incentive (at least a theoretical one) for other
companies to adopt it too.
As many people have proposed, the best option, though one that would
require a lot of work, might be a dedicated Bitcoin-related defensive
patent pool?similar to Linux's Open Invention Network?that could
strategically deploy patent licenses to incentivize cooperation and punish
Along those lines, it'd be reasonable to consider changing the Bitcoin
I think Apache 2.0 would be a great license for Bitcoin Core. It not only
contains an explicit patent license grant (rather than MIT's implicit one),
but terminates that license if the licensee asserts a claim alleging that
the covered work infringes a patent. That might be an effective deterrent
against bringing patent claims based on alleged infringement in Bitcoin
Core. (I'm not sure I see a good reason to dual-license under the LGPL3,
but am curious to hear more.)
It would probably be feasible to upgrade to the Apache license for new
releases and contributions (leaving already-existing code and previous
releases under the MIT license?so basically a copyright "soft-fork"). Has
this been discussed before? Are there any obstacles or objections?
(These are my personal opinions, do not necessarily reflect the views of
any company, and are definitely not legal advice.)
On Fri, Oct 14, 2016 at 3:58 AM Peter Todd via bitcoin-dev <

@_date: 2016-10-14 21:07:01
@_author: Daniel Robinson 
@_subject: [bitcoin-dev] DPL is not only not enough, 
First, non-practicing entities are definitely a problem, but they're far
from the only companies involved in software patent litigation. As you say
yourself, one reason companies obtain patents is to "prevent
competition"?meaning they produce a competing product. Look at the
billion-dollar lawsuits in the smartphone patent wars.
(Unless you're referring to "patent privateers" that assert claims and are
only indirectly sponsored and controlled by real tech companies. I don't
think the Defensive Patent License directly addresses that problem?Section
7.1 defines an "affiliate" relatively narrowly?although the Apache 2.0
license arguably does, with its broad definition of "Legal Entity." I don't
profess to know anything about the reasoning behind the DPL's wording, and
I may be missing something; maybe a future version of the DPL will close
that loophole if it becomes an actual problem.)
Second, as several people have noted on this list, patent applications
unfortunately seem to be more effective than defensive publication at
getting prior art under the noses of the patent examiners. So obtaining a
patent for defensive purposes makes it more difficult for others to obtain
patents on the same subject matter.
(Usual disclaimers apply. Nothing you read on bitcoin-dev is legal advice;
don't take legal advice from mailing lists; come on)
On Fri, Oct 14, 2016 at 12:01 PM Nick ODell via bitcoin-dev <
Pledging to not use patents offensively defeats the point of owning patents.
The point of owning a patent is so that you can use it offensively, either
prevent competition, or get licensing fees.
Obtaining a patent for defense doesn't make sense. The litigants you need to
worry about do not produce or make anything. Their 'product' is patent
Unless you have a patent on using a mail-merge program to sue people, your
defensive patents are useless in that situation.
On Fri, Oct 14, 2016 at 4:57 AM, Peter Todd via bitcoin-dev
BIP nor
bitcoin-dev mailing list
bitcoin-dev at lists.linuxfoundation.org

@_date: 2017-04-06 15:41:32
@_author: Daniel Robinson 
@_subject: [bitcoin-dev] BIP proposal: Inhibiting a covert attack on the 
I think you're misreading Luv. He's defending the idea of blocking covert
ASICBOOST, not defending ASICBOOST.
On Thu, Apr 6, 2017 at 11:16 AM Jorge Tim?n via bitcoin-dev <

@_date: 2017-12-18 20:32:17
@_author: Daniel Robinson 
@_subject: [bitcoin-dev] Ivy: a higher-level language targeting Bitcoin Script 
Today, we?re releasing Ivy, a prototype higher-level language and
development environment for creating custom Bitcoin Script programs. You
can see the full announcement here
or check out the docs  and source code
Ivy is a simple smart contract language that can compile to Bitcoin Script.
It aims to improve on the useability of Bitcoin Script by adding
affordances like named variables and clauses, static (and domain-specific)
types, and familiar syntax for function calls.
To try out Ivy, you can use the Ivy Playground for Bitcoin
, which allows you to create and test
simulated contracts in a sandboxed environment.
This is prototype software intended for educational and research purposes
only. Please don't try to use Ivy to control real or testnet Bitcoins.

@_date: 2018-02-13 17:46:18
@_author: Daniel Robinson 
@_subject: [bitcoin-dev] Possible change to the MIT license 
Custom open-source licenses are basically never a good idea. Every
deviation in wording from universally-accepted open-source licensing terms
is a major compliance headache from the perspective of any organization
trying to use the software. You don?t want users having to clear their use
of Bitcoin Core through their employers? legal departments, whether or not
they would ultimately approve that use. For that reason alone I think such
a change is not viable, no matter how you phrased it.
On Tue, Feb 13, 2018 at 9:27 AM Adam Ficsor via bitcoin-dev <

@_date: 2018-02-21 00:59:45
@_author: Daniel Robinson 
@_subject: [bitcoin-dev] Multi CSV Transaction 
Yes, although it's a functionality of Bitcoin Script generally, not OP_CSV
in particular. Bitcoin Script allows you to use nested IF statements, and
enforce whatever different conditions you want in each branch.
Here's your contract in Ivy :
contract MultiCSV(
  bob: PublicKey,
  carol: PublicKey,
  bobDelay: Duration,
  carolDelay: Duration,
  val: Value
) {
  clause bobSpend(sig: Signature) {
    verify checkSig(bob, sig)
    verify older(bobDelay)
    unlock val
  }
  clause carolSpend(sig: Signature) {
    verify checkSig(carol, sig)
    verify older(carolDelay)
    unlock val
  }
  clause bothSpend(bobSig: Signature, carolSig: Signature) {
    verify checkMultiSig([bob, carol], [bobSig, carolSig])
    unlock val
  }
It compiles to the following Bitcoin Script:
PUSH(carolKey) PUSH(bobKey) 2 PICK 2 EQUAL IF ROT DROP 0 4 ROLL 4 ROLL 2
2ROT 2 CHECKMULTISIG ELSE ROT IF DROP CHECKSIGVERIFY PUSH(carolDelay)
CHECKSEQUENCEVERIFY DROP 1 ELSE NIP CHECKSIGVERIFY PUSH(bobDelay)
CHECKSEQUENCEVERIFY DROP 1 ENDIF ENDIF
On Tue, Feb 20, 2018 at 5:32 PM Praveen Baratam via bitcoin-dev <

@_date: 2018-01-15 22:39:05
@_author: Daniel Robinson 
@_subject: [bitcoin-dev] Ivy: a higher-level language targeting Bitcoin 
Hi Matt,
Thanks for raising this. Since the compiler only produces SegWit addresses,
I hadn't worried at all about malleability, but as you pointed out
out-of-band, malleability in the length of an argument can allow an
attacker to deflate the feerate of a transaction.
There was in fact a minor witness malleability problem with how the
compiler was handling clause selection. It's now been fixed in version
0.0.7 of the compiler.
As far as I can tell (and I haven't looked all that carefully), any
sensible Ivy contract won't have any witness malleability problem. (A funny
exception is the RevealCollision contract, since you can length-extend the
arguments to get another collision. But without a signature check, that one
has a more serious transaction malleability problem anyway.) But the
compiler currently doesn't prevent you from doing dumb unconstrained stuff
clause spend(a: Bytes, b: Bytes, sig: Signature) {
  verify a == b
  verify checkSig(publicKey, sig)
  unlock val
Maybe it should, particularly since there's no reason to include a trivial
condition like that anyway. But I think it would probably be about as easy
(and more generally useful) to build a static analyzer that solved this
problem for low-level Bitcoin Script.
On Sun, Jan 14, 2018 at 5:42 PM Matt Corallo

@_date: 2018-07-09 11:57:07
@_author: Dan Robinson 
@_subject: [bitcoin-dev] Multiparty signatures 
Can you please clarify which terms in that description are elliptic curve
points, and which are scalars?
On Mon, Jul 9, 2018 at 11:10 AM Erik Aronesty via bitcoin-dev <

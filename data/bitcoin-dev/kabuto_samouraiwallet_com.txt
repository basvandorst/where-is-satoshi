
@_date: 2017-09-05 14:00:04
@_author: Kabuto Samourai 
@_subject: [bitcoin-dev] Proposal: bip32 version bytes for segwit scripts 
We support a change to the version bits of the HD serialization that will
inform the receiving utility of the exact derivation method used for the
pubkeys. Third-parties handling xpubs must not require additional
information from the user about the derivation path or serialization format
of the addresses under that xpub. When you have to ask, "Is this a SegWit
xpub?" then you've already lost.
Avoiding a total UX nightmare is in everyone's interests.
I think Luke and Thomas may be talking past one another. When exporting a
root master HD seed, encoding the {x,y,z}{pub,prv} distinctions makes no
sense, as the root seed should derive all paths for all coins. Wallets may
need additional code to discover which paths have been used when importing
a root seed. But when exporting / importing an account-level seed for
watch-only and receive address generation, changing the serialization
version bytes is appropriate and (in our view) essential to avoid loss of
The Electrum approach is nice but may not go far enough, as xpub and zpub
both list "P2PKH or P2SH." Why not expand the number of version prefixes to
eliminate the ambiguity?
On Tue, Sep 5, 2017 at 1:09 PM, Thomas Voegtlin via bitcoin-dev <

@_date: 2017-09-06 08:47:20
@_author: Kabuto Samourai 
@_subject: [bitcoin-dev] Proposal: bip32 version bytes for segwit scripts 
Let's move forward with the simplest solution that solves the problem and
achieves consensus! Version bytes {x,y,z} fits the bill.
On Wed, Sep 6, 2017 at 4:26 AM, Thomas Voegtlin via bitcoin-dev <

@_date: 2017-09-06 22:52:57
@_author: Kabuto Samourai 
@_subject: [bitcoin-dev] Proposal: Extended serialization format for 
Thanks for the proposal. Aside from potential privacy implications of
revealing the derivation path for non BIP-44, 45, 49 HD nodes, this scheme
is superior to the alternate {x,y,z}pub idea. Since coin_type is part of
the path, the 'xpub' prefix may be shared across all coins if they so
choose. This format provides lock-in for BIP-49 going forward and opens the
door for a parallel native-SegWit BIP.
The birthday field is interesting. Could you provide some motivation for
its inclusion?
Could you also add some test vectors?
There are a few minor grammar / spelling errors, but we can nitpick those
after this goes to the pull request stage on bitcoin/bips.
On Wed, Sep 6, 2017 at 5:29 PM, Pavol Rusnak via bitcoin-dev <
PGP Fingerprint: 1A83 4A96 EDE7 E286 2C5A  B065 320F B934 A79B 6A99

@_date: 2017-09-07 11:30:06
@_author: Kabuto Samourai 
@_subject: [bitcoin-dev] Proposal: Extended serialization format for 
Why not make this block height, rather than a timestamp?

@_date: 2017-09-07 11:33:09
@_author: Kabuto Samourai 
@_subject: [bitcoin-dev] Proposal: Extended serialization format for 
OutputType byte solution is nearly equivalent to {x,y,z} and adds redundant
data. Implementations could erroneously (maliciously) assign the wrong
output type for the given purpose field.
We could reduce the scope of this improvement to BIP43, as suggested by
Thomas. BIP32-generic wallets may implement something else.
On Thu, Sep 7, 2017 at 11:23 AM, Pavol Rusnak via bitcoin-dev <

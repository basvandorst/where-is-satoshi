
@_date: 2017-04-07 15:06:39
@_author: Jimmy Song 
@_subject: [bitcoin-dev] A Small Modification to Segwit 
Hey everyone, This is an idea that I had about Segwit and Gregory's
proposal from yesterday that I wanted to run by everyone on this list. I'm
not at all sure what this would mean for non-upgraded nodes on the network
and would like feedback on that. This is not a formal BIP as it's a
modification to a previously submitted one, but I'm happy to formalize it
if it would help.
MotivationOne of the interesting aspects of Gregory Maxwell?s proposal is
that it only precludes the covert version of ASICBoost. He specifically
left the overt version alone.
Overt ASICBoost requires grinding on the version bits of the Block header
instead of the Merkle Root. This is likely more efficient than the Merkle
Root grinding (aka covert ASICBoost) and requires way less resources (much
less RAM, SHA256 calculations, no tx shuffling, etc).
If we combine Gregory Maxwell?s proposal with BIP-141 (Segwit) and add a
slight modification, this should, in theory, make ASICBoost a lot more
useful to miners and appeal to their financial interests.
The Modification
Currently, the version bits (currently 4 bytes, or 32 bits) in the header
are used for BIP9 signaling. We change the version bits to a nonce-space so
the miners can use it for overt ASICBoost. The 32-bits are now moved over
to the Coinbase transaction as part of the witness commitment. The witness
commitment goes from 38 bytes to 42 bytes, with the last 4 bytes being used
as the version bits in the block header previously. The witness commitment
becomes required as per Gregory Maxwell?s proposal.
First, this brings ASICBoost out into the open. Covert ASICBoost becomes
much more costly and overt ASICBoost is now encouraged.
Second, we can make this change relatively quickly. Most of the Segwit
testing stays valid and this change can be deployed relatively quickly.
Note on SPV clients
Currently Segwit stores the witness commitment in the Coinbase tx, so
lightweight clients will need to get the Coinbase tx + Merkle proof to
validate segwit transactions anyway. Putting block version information in
the Coinbase tx will not impose an extra burden on upgraded light clients.

@_date: 2017-04-07 19:05:16
@_author: Jimmy Song 
@_subject: [bitcoin-dev] A Small Modification to Segwit 
I've gotten feedback from Adam Back that you actually don't need all 32
bits in the header for overt ASICBoost, so I'm modifying my proposal. Of
the 32-bit version field, bits 16 to 23 are reserved for miners, the
witness commitment stays as defined in BIP-141 except that it's now
required. BIP9 then is modified so that bits 16 to 23 are now no longer

@_date: 2017-04-07 21:46:29
@_author: Jimmy Song 
@_subject: [bitcoin-dev] A Small Modification to Segwit 
Praxeology Guy,
Why would the actual end users of Bitcoin (the long term and short term
Certainly, if only one company made use of the extra nonce space, they
would have an advantage. But think of it this way, if some newer ASIC
optimization comes up, would you rather have a non-ASICBoosted hash rate to
defend with or an ASICBoosted hash rate? Certainly, the latter, being
higher will secure the Bitcoin network better against newer optimizations.
Is that patented in any jurisdiction, all jurisdictions or only certain
jurisdictions? Would a patent granted for SHA256 in Swaziland be sufficient
for Bitcoin to change the Proof of Work algorithm? This is a very
subjective judgment based on quasi-legality and I don't think that's a road
that Bitcoin should go down.
Certainly, it would be better if the patent for ASICBoost were
open-sourced, but the legality of such-and-such thing in such-and-such
jurisdiction should not affect Bitcoin policy as that in itself introduces
significant risk to the network. A sufficiently authoritarian government
can then grant a monopoly for various algorithms in their country and
negatively impact Bitcoin.
Indeed, there are already many individuals that disobey the laws of their
country to help the Bitcoin network run. I would expect the same with
patents. Should there come a time when a patent or some other legal
maneuvering gives one network actor a large advantage to the detriment of
the network, I believe that Bitcoin will handle that in the specific case.
In the meantime, I believe such changes increase the odds of Segwit
actually being accepted and activated as per BIP-141.

@_date: 2017-04-08 09:35:30
@_author: Jimmy Song 
@_subject: [bitcoin-dev] A Small Modification to Segwit 
Until all miners update (firmware or hardware), the change encourages
Certainly, there would have to be changes for stratum, pool software, etc.
But the monetary incentives align to all the changes needed.
Remember, overt ASICBoost can get something like a 12.5% efficiency boost
from toggling a single bit in the version (equivalent to 2 colliding work
items), 18.5% from 2 bits (equivalent to 4 colliding work items), 23.4%
from 4 bits (see In lieu of an explicit allowance of overt ASICBoost, the monetary
incentives lead to odd BIP9 signaling, especially if 4 or more proposals
signal at once. There really isn't a practical way to block overt ASICBoost
without forcing the version bits to be some value.
In other words, the question isn't about allowing/disallowing ASICBoost at
this point. The question is whether we want ASICBoost open or hidden.
This would only be the case if overt ASICBoost were not possible at all. It
is currently possible to use overt ASICBoost, so optimizations based on
overt ASICBoost would also be possible unless something were done to
actively block it.
Market incentives, I would imagine. How quickly that would be is not
something I'm qualified to answer.
I'm not adding support as much as explicitly allowing what's implicitly
allowed. Whatever risks you imagine for this proposal exist on the network
currently, with unmodified BIP-141 and with modified BIP-141. The
difference in adding the modification is that overt ASICBoost is explicitly
allowed in the modified BIP-141 as to not hide it.

@_date: 2017-04-08 10:17:47
@_author: Jimmy Song 
@_subject: [bitcoin-dev] A Small Modification to Segwit 
OK, that makes sense. I'll modify my proposal this way:
Beginning block X and until block Y the coinbase transaction of
each block MUST contain a BIP-141 segwit commitment
Overt ASICBoost is allowed on the network already. Until a proposal
explicitly blocking overt ASICBoost as a soft fork is activated, this seems
to be better than the current state which is that overt ASICBoost is
allowed, but at a cost to BIP9 signals.

@_date: 2017-04-08 11:16:05
@_author: Jimmy Song 
@_subject: [bitcoin-dev] A Small Modification to Segwit 
What's your definition of "allowed" then? Because a miner definitely can
mine only empty blocks and a miner definitely can do overt ASICBoost (using
as little as 1 bit of the version field) right now. I thought you meant
allowed in the sense that if a block is allowed, it is a valid block on the
network. It sounds like you mean something else, perhaps, "a block is
allowed if it doesn't cause harm to the network." I'm not sure how you
quantify that as that seems pretty subjective.

@_date: 2017-04-08 17:19:11
@_author: Jimmy Song 
@_subject: [bitcoin-dev] A Small Modification to Segwit 
I agree with you. I believe nonequivalent starting positions are the norm
in mining, not the exception and hence don't believe this to be a problem.
It certainly can be and from the responses I'm getting, I believe there
would be at least a few people that would enthusiastically support a BIP to
do that. That is, however, a separate issue than my proposal. My proposal
aims to bring ASICBoost out into the open *while it is still possible*. A
BIP to prevent ASICBoost completely is in that sense compatible.

@_date: 2017-04-08 17:26:25
@_author: Jimmy Song 
@_subject: [bitcoin-dev] A Small Modification to Segwit 
Suppose someone figures out an ASIC optimization that's completely
unrelated that gives X% speed boost over your non-ASICBoosted
implementation. If you ban ASICBoost, someone with this optimization can
get 51% of the network by adding N machines with their new optimization. If
you allow ASICBoost and assuming this gets a 20% speed boost over
non-ASICBoosted hardware, someone with this optimization would need 1.2N
machines to get 51%. The network in that sense is 20% stronger against this
attack in terms of cost.

@_date: 2017-04-09 09:01:01
@_author: Jimmy Song 
@_subject: [bitcoin-dev] A Small Modification to Segwit 
Why won't the attacker use asicboost too? (Please don't say because of
We're assuming the ASIC optimization in my example is incompatible with
ASICBoost. But if the new optimization were compatible with ASICBoost,
you're right, the network would be in an equivalent situation whether
ASICBoost was banned or not.
I want to point out again that overt ASICBoost can be used on the network
today. My proposal is to bring ASICBoost usage out into the open vs hiding
it. Banning ASICBoost via protocol changes is another issue completely.

@_date: 2017-04-11 09:40:28
@_author: Jimmy Song 
@_subject: [bitcoin-dev] A Small Modification to Segwit 
I've changed the proposal so only 8 bits are given to grinding so something
like 20 bits are available for signaling.
I have to say I'm at a loss here as to what's next? Should I make a new BIP
or try to convince the authors of BIP141 to modify their BIP? Could someone
inform me on the next part of the process?
On Tue, Apr 11, 2017 at 8:25 AM, Sancho Panza via bitcoin-dev <

@_date: 2017-04-11 18:42:41
@_author: Jimmy Song 
@_subject: [bitcoin-dev] A Small Modification to Segwit 
Jorge, I'll be happy to discuss with you more about whether allowing
ASICBoost would actually secure the network more or not, but that's not my
main motivation. My main motivation is to get more miners to accept segwit.
The version bit usage part, I don't believe requires any code changes as
those bits aren't being used by BIP9 anyway, though some cleanup to
restrict them later is probably a good idea.
The requiring witness commitment part would require some changes, but
according to Timo Hanke, that's actually not necessary as overt is so much
more efficient.
In any case, I'm happy to close this discussion until there's some
indication that more miners would accept segwit as a result of this change.

@_date: 2017-12-13 13:46:09
@_author: Jimmy Song 
@_subject: [bitcoin-dev] BIP Proposal: Utilization of bits denomination 
Hey all,
I am proposing an informational BIP to standardize the term "bits". The
term has been around a while, but having some formal informational standard
helps give structure to how the term is used.
Entire BIP included below (mediawiki format) for convenience.
    BIP: ????
    Title: Utilization of bits denomination
    Author: Jimmy Song     Comments-URI:      Status: Draft
    Type: Informational
    Created: 2017-12-12
    License: BSD-2-Clause
    License-Code: BSD-2
== Abstract ==
Bits is presented here as the standard term for 100 (one hundred) satoshis
or 1/1,000,000 (one one-millionth) of a bitcoin.
== Motivation ==
The bitcoin price has grown over the years and once the price is past
$10,000 USD or so, bitcoin amounts under $10 USD start having enough
decimal places that it's difficult to tell whether the user is off by a
factor of 10 or not. Switching the denomination to "bits" makes
comprehension easier. For example, when BTC is $15,000 USD, $10.50 is a
somewhat confusing 0.00067 BTC, versus 670 bits, which is a lot clearer.
Additonally, reverse comparisons are easier as 67 bits being $1 is easier
to comprehend for most people than 0.000067 BTC being $1. Similar
comparisons can be made to other currencies: 1 yen being 0.8 bits, 1 won
being 0.07 bits and so on.
Potential benefits of utilizing "bits" include:
# Reduce user error on small bitcoin amounts.
# Reduce unit bias for users that want a "whole" bitcoin.
# Allow easier comparisons of prices for most users.
# Allow easier bi-directional comparisons to fiat currencies.
# Allows all UTXO amounts to need at most 2 decimal places, which can be
easier to handle.
== Specification ==
Definition: 1 bit = 1/1,000,000 bitcoin.
Plural of "bit" is "bits". The terms "bit" and "bits" are not proper nouns
and thus should not be capitalized unless used at the start of a sentence,
All Bitcoin-denominated items are encouraged to also show the denomination
in bits, either as the default or as an option.
== Rationale ==
As bitcoin grows in price versus fiat currencies, it's important to give
users the ability to quickly and accurately calculate prices for
transactions, savings and other economic activities. "Bits" have been used
as a denomination within the Bitcoin ecosystem for some time. The idea of
this BIP is to formalize this name. Additionally, "bits" is likely the only
other denomination that will be needed for Bitcoin as 0.01 bit = 1 satoshi,
meaning that two decimal places will be sufficient to describe any current
Existing terms used in bitcoin such as satoshi, milli-bitcoin (mBTC) and
bitcoin (BTC) do not conflict as they operate at different orders of
The term micro-bitcoin (?BTC) can continue to exist in tandem with the term
== Backwards Compatibility ==
Software such as the Bitcoin Core GUI currently use the ?BTC denomination
and can continue to do so. There is no obligation to switch to "bits".
== Copyright ==
This BIP is licensed under the BSD 2-clause license.
== Credit ==
It's hard to ascertain exactly who invented the term "bits", but the term
has been around for a while and the author of this BIP does not take any
credit for inventing the term.

@_date: 2018-08-30 15:36:16
@_author: Jimmy Song 
@_subject: [bitcoin-dev] Testnet3 Reest 
Stupid question time:
Why don't we have multiple testnets?
On Thu, Aug 30, 2018 at 3:31 PM Peter Todd via bitcoin-dev <

@_date: 2019-05-23 12:36:19
@_author: Jimmy Song 
@_subject: [bitcoin-dev] An alternative: OP_CAT & OP_CHECKSIGFROMSTACK 
Hi Russell,
This is probably a dumb question, but I'd like to get some clarity on your
OP_CHECKSIGFROMSTACKVERIFY would pop off a signature, message and pubkey.
Presumably, the message would then have to get constructed as part of the
Script execution. What would such a message look like? What, in other
words, would you be signing and would that be similar to what signatures
sign now? Would it be a single blob that incorporates all the input/output
information in some hashed manner (like BIP143)? Or would you need separate
signatures for different parts of the transaction? Or is it something more
complicated like aggregating multiple signatures over different parts of
the transaction?
On Thu, May 23, 2019 at 8:35 AM Russell O'Connor via bitcoin-dev <

@_date: 2019-10-03 15:14:22
@_author: Jimmy Song 
@_subject: [bitcoin-dev] PSBT global key for network 
Hey all,
I wanted to propose a new key in the global context for BIP174,
Partially-Signed Bitcoin Transactions.
= Rationale
Each signer should make sure that the inputs being referenced in the PSBT
exist (with the exception of a Proof-of-Reserves input). In order to do
this, it's critical to know which network the coins are on (mainnet or
testnet). This could potentially be extended to other networks should they
want to use something like PSBT, much in the same way that HD keys from
BIP0044 reserved 0' and 1' as coins for mainnet Bitcoin and testnet Bitcoin
= Proposal
Add the key 0x03 for network in the global key-value store. Value is a
variable integer with 0x00 indicating Bitcoin mainnet and 0x01 indicating
Bitcoin testnet. Other coins that want to use the PSBT should use the coin
network number from SLIP-0044 with the high bit removed.

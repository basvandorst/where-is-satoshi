
@_date: 2018-06-24 04:19:00
@_author: Andrea 
@_subject: [bitcoin-dev] BIP 174 thoughts 
Hi, I think in the revised spec we can remove completely the "global types" as a map or even as typed record. Since there is only one type (the transaction) and it's compulsory to have one (and only one) we could just drop the definition of global type and the key associated with it, simply after the header + separator there must be a transaction.?? Having read all the discussion i also agree having per-input key derivation and per-output data is a lot more handy for signers, no special feeling regarding the encoding.Looking forward for the test vectors and the new spec.
Cheers, Andrea.
??????? Original Message ???????

@_date: 2018-06-24 05:00:53
@_author: Andrea 
@_subject: [bitcoin-dev] BIP 174 thoughts 
Keeping it for future extensions is a good point, my understanding was that since we always need exactly one transaction it could be part of the definition of PSBT instead of being a key-value (although it is more of a breaking change). Cheers, Andrea.
??????? Original Message ???????

@_date: 2018-06-27 09:39:02
@_author: Andrea 
@_subject: [bitcoin-dev] BIP 174 thoughts 
Hi William, Andrew, list,
As noted by William there are some types missing in the global-types definition, because the number of each map for I/O must be known to the parser in order to use the correct definitions for the types. At the moment a parser reading a key-value record does not know whether it should read it as per-input type or per-output, a way to address this is to declare in advance the number of maps and ensure they are ordered (inputs first). If you haven't already worked out some types for that i propose using:
Number of inputs
- key (None, only the type): PSBT_GLOBAL_INPUT_NUMBER = 0x01  - value: Varint Number of outputs
- key (none, only the type): PSBT_GLOBAL_OUTPUT_NUMBER = 0x02
- value: Varint
On another note I think we can set a hard limit on the size of the PSBT, currently is 'legal' to produce a very large PSBT with an excessive number of Inputs and Outputs. By excessive I mean that even in the best case scenario (using the smallest possible scriptPubKey as in P2WPKH) it is possible to create a PSBT that would certainly create an invalid transaction (because of its size) when finalized. I haven't found anything related to this in the previous discussions, please ignore this if it was already proposed/discussed.
Cheers, Andrea.
??????? Original Message ???????

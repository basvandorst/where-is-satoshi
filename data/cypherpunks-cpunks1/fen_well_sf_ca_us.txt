
@_date: 1992-11-21 00:35:00
@_author: Fen Labalme 
@_subject: The Cypherpunks Mail Project 
I may disagree with this (I say, "I may" as there are many sides to this
compicated issue, but the side I currently agree with I will state here)
and I hesitate to bring this up as I don't want to slow down the (imo) much-needed development of encrypted mailers.  But I think that an approach may exist that has better long-term consequences than the one
that advocates shoe-horning PGP into every mailer.
There is an attempt to to create a new mail standard on top (or next to)
the current so-called RFC-822 mail standard that will allow multi-part
typed messages.  This proposed standard, known as MIME (for Multipurpose
Internet Mail Extensions) is nearly complete and will allow rich text,
binary and other formats to be included in a single internet mail message.
There has been a disagreement between the PEM (Privacy Enhanced Mail) and
MIME communities as to which should be integrated into the other;  simply
put, the PEM folk feel that you simply encrypt an entire MIME message, and
the MIME folk think that PEM messages are just another one of the many
types of content parts that a MIME message can contain.
I tend to agree with the latter camp, as it appears to be more flexible.
For example, what happens if I wish to start communications with someone
using a different standard than PGP (gasp - they may be using RSA's
mailsafe), or even a newer, perhaps incompatible version of PGP?  Or maybe I want to send them a message partly encrypted and partly in the clear?  MIME is designed to handle these scenarios (and more).
I must admit that this thought coalesced in my head due to the confluence of two different streams of communications both heading towards this
solution at the same time:
1)  I asked Steve Dorner (author of the excellent Eudora Macintosh email     reader) if he was considering adding encryption to his mailer     (specifically PGP) and he replied no, but that he was integrating     MIME into it;
2)  The pem-dev email list, which has been discussing threads on PGP and     MIME, recently carried an interesting proposal on MIME-PEM integration
    (though I expect to see the other camp come out with their PEM-MIME     integration plan soon!).
I think this latter document is excellent reading, and I will forward it in a followup message to this one.  By the way, it has a short set of six
references that I consider required reading for anyone interested in doing
serious work on Internet mailers.
In case all this is new to you, I've included at the bottom a blurb from
the RFC-index explaining how to find these RFCs and more.
My $0.02.
Many RFCs are available online; if not, this is indicated by (Not online). Online copies are available via FTP or Kermit from NIC.DDN.MIL as rfc/rfc or rfc/rfc ( is the RFC number without leading Additionally, RFCs may be requested through electronic mail from the
automated NIC mail server by sending a message to SERVICE at NIC.DDN.MIL
with a subject line of "rfc  for text versions or a subject line
of "rfc  for PostScript versions.  To obtain the RFC index,
the subject line of your message should read "rfc index".

@_date: 1992-11-21 00:42:36
@_author: Fen Labalme 
@_subject: The Cypherpunks Mail Project 
Reply-To: ietf-822 at dimacs.rutgers.edu
------- =_aaaaaaaaaa0
Friends, at the request of the participants at the SAAG meeting this afternoon, I am posting a draft regarding the interaction of MIME and PEM. I believe that this draft will be presented by Ned Freed at the PEM meeting on Wednesday (which, regrettably, I will be unable to attend due to a conflict.)
Although Steve, Ned and I think that the draft is fairly complete, there are likely some issues which remain to be resolved or at least given greater exposition. As such, your comments are most certainly welcome! ------- =_aaaaaaaaaa0
draft	MIME-PEM Interaction	Nov 92
MIME-PEM Interaction
Mon Nov 16 15:51:54 1992
Steve Crocker
Trusted Information Systems
crocker at tis.com
Ned Freed
Innosoft International, Inc.
ned at innosoft.com
Marshall T. Rose
Dover Beach Consulting, Inc.
mrose at dbc.mtview.ca.us
1. Status of this Memo
This document is an Internet Draft. Internet Drafts are working documents of the Internet Engineering Task Force (IETF), its Areas, and its Working Groups. Note that other groups may also distribute working documents as Internet Drafts.
Internet Drafts are valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time. It is inappropriate to use Internet Drafts as reference material or to cite them other than as a "work in progress". 2. Abstract
This memo defines a framework for interaction between MIME and PEM services.
Expires May 16, 1993	[Page 1]
draft	MIME-PEM Interaction	Nov 92
3. Introduction
In the Internet community, an electronic mail message has two parts: the headers and the body. The headers form a collection of field/value pairs structured according to RFC 822 [1], whilst the body, if structured, is defined according to Multipurpose Internet Mail Extensions (MIME) [2]. Privacy Enhanced Mail (PEM) [3-6] allows encryption and authentication services to be applied to an electronic mail message.
This memo defines a framework whereby the services provided by MIME and PEM are used in a complementary fashion. In order to provide for MIME-PEM interaction, two content types, "multipart/pem" and "application/pem", are defined. Then, the relationship between MIME and PEM is described in terms of two functions: message composition and message delivery.
Expires May 16, 1993	[Page 2]
draft	MIME-PEM Interaction	Nov 92
4. Definiton of new Content Types
4.1. Definition of the multipart/pem Content Type (1) MIME type name: multipart
(2) MIME subtype name: pem
(3) Required parameters: boundary, privacy (4) Optional parameters: none
(5) Encoding considerations: always 7bit (6) Security Considerations: see [3]
This subtype of multipart always contains two body parts: the first is an arbitrary content; and, the second is an application/pem content which describes the privacy- enhancements which resulted in the first body part. The value of the first body part corresponds to  as defined in [3]. Note that if  is represented using the base64 encoding, then a a Content-Transfer-Encoding: header is present which indicates use of the base64 content encoding. Otherwise, if a Content-Transfer-Encoding: header is present, it indicates use of the 7bit content encoding. The syntax and semantics of the boundary parameter is defined in [2].
The syntax of the privacy parameter, using the ABNF notation of [1], is:
privacy-value ::= "ENCRYPTED"
with each value conveying the intent as specified in [3]. Expires May 16, 1993	[Page 3]
draft	MIME-PEM Interaction	Nov 92
4.2. Definition of the application/pem Content Type (1) MIME type name: application
(2) MIME subtype name: pem
(3) Required parameters: none
(4) Optional parameters: none
(5) Encoding considerations: always 7bit (6) Security Considerations: see [3]
The syntax of this content type corresponds to the  production defined in [3].
Expires May 16, 1993	[Page 4]
draft	MIME-PEM Interaction	Nov 92
5. Message Composition
When a user composes a message, it is the responsibility of the user agent to use the Content-Type: header. This allows the receiving user agent to unambiguously interpret the body and process it accordingly.
This memo introduces a new header field, "Content-Privacy", which is used to indicate that the message should undergo privacy-enhancement prior to submission. The syntax of this header field corresponds to the  production defined above.
5.1. Pre-Submission Algorithm
Prior to submission, the user agent applies this algorithm: (1) If the content does not contain the Content-Privacy: header, then the user agent sees if the content is either multipart or message. If so, it then recursively applies this algorithm to the encapsulated body parts; if not, it terminates processing for this content.
(2) If the content does contain the Content-Privacy: header, the content is transformed from local form to its canonical form. Note that if a Content-Transfer- Encoding: header is present, then the content encoding is reversed as a part of this process.
(3) If the canonical form of the content uses octet values outside of the NVT ASCII repertoire, and if the value of the Content-Privacy: header is MIC-CLEAR, then this inconsistency is reported to the user and the algorithm aborts.
(4) Otherwise, the privacy-enhancement indicated by the Content-Privacy: header is performed, constructing a new content. The Content- headers, other than Content- Transfer-Encoding: and Content-Privacy:, are taken from the original content, if any.
(5) If the value of the Content-Privacy: header is not MIC- CLEAR, then the base64 content encoding is applied and a Content-Transfer-Encoding: header is added to the new Expires May 16, 1993	[Page 5]
draft	MIME-PEM Interaction	Nov 92
(6) Finally, a multipart/pem content is constructed, whcih contains the new content and a corresponding application/pem content. The multipart/pem content replaces the original content.
Expires May 16, 1993	[Page 6]
draft	MIME-PEM Interaction	Nov 92
6. Message Delivery
When a user receives a message containing an multipart/pem content, the user agent may transform the content back into its original content type. This operation, the post-delivery algorithm, is performed by reversing the steps performed during the pre-submission algorithm.
When the original content is reconstituted into canonical form, it may use octet values outside of the NVT ASCII repertoire. If the user agent replaces the multipart/pem content with the original content, then it must select an appropriate transfer encoding and include the appropriate Content-Transfer-Encoding: header.
Upon successful completion of the post-delivery algorithm for each content, the user agent adds a new header field, "Content-Annotation", which is used to indicate the privacy- enhancements that were in effect when the content was submitted. The syntax of this header field, using the ABNF notation of [1], is:
content-annotation ::= "Content-Annotation" ":" annotation-value ::=  ";"  with  corresponding to the privacy-enhancements that was in effect during submission, and , defined in [1], indicates the date and time that the privacy- enhancements were verified by the receiving user agent. It must be strongly emphasized that the user's level of trust in the value of the Content-Annotation: header should be no higher than the user's level of trust in the message store employed by the user agent. Expires May 16, 1993	[Page 7]
draft	MIME-PEM Interaction	Nov 92
7. An Example
For example, suppose the following message was being readied for submission:
Hi Ned. See how much nicer this works!
After applying pre-submission algorithm, the message submitted for delivery would appear as:
Hi Ned. See how much nicer this works!
Proc-Type: 4,MIC-CLEAR
Content-Domain: RFC822
Originator-ID-Asymmetric: ...
MIC-Info: RSA-MD5,RSA, ...
Expires May 16, 1993	[Page 8]
draft	MIME-PEM Interaction	Nov 92
After applying the post-delivery algorithm, the resulting message would appear as:
Content-Annotation: mic-clear;
Thu, 12 Nov 1992 22:13:40 -0800
(integrity verified)
Hi Ned. See how much nicer this works!
Of course, as the message being submitted was only plain text, the Content-Type: header could be ommitted. In that case, after applying the pre-submission algorithm, the message submitted for delivery would appear as:
Hi Ned. See how much nicer this works!
Proc-Type: 4,MIC-CLEAR
Content-Domain: RFC822
Originator-ID-Asymmetric: ...
MIC-Info: RSA-MD5,RSA, ...
Expires May 16, 1993	[Page 9]
draft	MIME-PEM Interaction	Nov 92
8. Observations
The use of the pre-submission and post-delivery algorithms exhibit several properties:
(1) It allows privacy-enhancement of an arbitrary content, not just an RFC 822 message.
(2) For a multipart or message content, it allows the user to decide whether the structure of the content should receive privacy-enhancement.
(3) It allows a message to contain several privacy enhanced contents, thereby removing the requirement for PEM software to be able to generate or interpret a single content which intermixes both unenhanced and enhanced components.
(4) It minimizes confusion when viewing a MIC-CLEAR content without a PEM-capable user agent.
(5) It minimizes confusing when viewing a MIC-ONLY content with a MIME-capable user agent that is not PEM-capable. 9. Acknowledgements
David H. Crocker suggested the use of a multipart structure for MIME-PEM interaction.
Expires May 16, 1993	[Page 10]
draft	MIME-PEM Interaction	Nov 92
10. References
[1] D.H. Crocker. Standard for the Format of ARPA Internet Text Messages. Request for Comments 822, (August, 1982). [2] N. Borenstein, N. Freed, Multipurpose Internet Mail Extensions. Request for Comments 1341, (June, 1992). [3] J. Linn, Privacy Enhancement for Internet Electronic Mail -- Part I: Message Encryption and Authentication Procedures. Internet-Draft, (July 23, 1992). [4] S. Kent, Privacy Enhancement for Internet Electronic Mail -- Part II: Certificate-Based Key Management. Internet-Draft, (August 6, 1992).
[5] D. Balenson, Privacy Enhancement for Internet Electronic Mail -- Part III: Algorithms, Modes, and Identifiers. Internet-Draft, (September 3, 1992).
[6] B. Kaliski, Privacy Enhancement for Internet Electronic Mail -- Part IV: Key Certification and Related Services Internet-Draft, (September 1, 1992).
Expires May 16, 1993	[Page 11]
draft	MIME-PEM Interaction	Nov 92
Table of Contents
1 Status of this Memo ................................... 1 2 Abstract .............................................. 1 3 Introduction .......................................... 2 4 Definiton of new Content Types ........................ 3 4.1 Definition of the multipart/pem Content Type ........ 3 4.2 Definition of the application/pem Content Type ...... 4 5 Message Composition ................................... 5 5.1 Pre-Submission Algorithm ............................ 5 6 Message Delivery ...................................... 7 7 An Example ............................................ 8 8 Observations .......................................... 10 9 Acknowledgements ...................................... 10 10 References ........................................... 11 Expires May 16, 1993	[Page 12]
------- =_aaaaaaaaaa0--
[ sorry for the double spacing - my mailer's acting up and I'm too
tired to fight with it anymore.  What we need MORE than encrypted mailers
is mailers that do the standard stuff right...  The one on the WELL sux!]


@_date: 2003-02-03 20:01:01
@_author: Roger Dingledine 
@_subject: [freehaven-dev] CFP: Workshop on Economics of P2P Systems 
[Please forward this to any other appropriate lists. -RD]
Workshop on Economics of Peer-to-Peer Systems Berkeley, California June 5-6 2003  From file-sharing to distributed computation, from application layer
overlays to mobile ad hoc networking, the ultimate success of a
peer-to-peer system rests on the twin pillars of scalable and robust
system design and alignment of economic interests among the
participating peers. The Workshop on Economics of Peer-to-Peer Systems
will bring together for the first time researchers and practitioners
from multiple disciplines to discuss the economic characteristics of P2P
systems, application of economic theories to P2P system design, and
future directions and challenges in this area. Topics of interest
include, but are not limited to: - incentives and disincentives for cooperation - distributed algorithmic mechanism design - reputation and trust - reliability, identity, and attack resistance - network externalities and scale economies - public goods and club formation - accounting and settlement mechanisms - payment and currency systems - user behavior and system performance - measurement studies - leveraging heterogeneity without compromising anonymity - economic impact to network providers - interconnection of P2P networks The program of the workshop will be a combination of invited talks,
paper presentations, and discussion. Workshop attendance will be limited
to ensure a productive environment. Each potential participant should
submit a position paper that expresses a novel or interesting problem,
offers a specific solution, reports on actual experience, or advances a
research agenda. Participants will be invited based on the originality,
technical merit and topical relevance of their submissions, as well as
the likelihood that the ideas expressed in their submissions will lead
to insightful discussions at the workshop. Accepted papers will be
published on the workshop website. Submission guidelines: Submissions of position papers are due March 27, 2003, and should not
exceed 5 pages. Two column papers are acceptable, but the font size
should be no smaller than 11pt. Papers must be submitted electronically
in postscript or PDF format to . Important Dates : Submission due: March 27 Notification of acceptance: April 25 Revised version due: May 22 Workshop: June 5-6 Program Committee: John Chuang, UC Berkeley (chair) Roger Dingledine, The Free Haven Project Ian Foster, University of Chicago and Argonne National Lab Bernardo Huberman, HP Labs Ramayya Krishnan, CMU (co-chair) H.T. Kung, Harvard University David Parkes, Harvard University Paul Resnick, University of Michigan Scott Shenker, ICSI Michael D. Smith, CMU Hal Varian, UC Berkeley

@_date: 2004-12-06 02:00:23
@_author: Roger Dingledine 
@_subject: Tor 0.0.9rc6 is out 
This release improves reliability for clients. It's not perfect yet,
but I think it's better. Let me know if it breaks something.
tarball:   signature: win32 exe: win32 sig: (use -dPr tor-0_0_9rc6 if you want to check out from cvs)
  o Bugfixes on 0.0.9pre:
    - Clean up some more integer underflow opportunities (not exploitable
      we think).
    - While hibernating, hup should not regrow our listeners.
    - Send an end to the streams we close when we hibernate, rather
      than just chopping them off.
    - React to eof immediately on non-open edge connections.
  o Bugfixes on 0.0.8.1:
    - Calculate timeout for waiting for a connected cell from the time
      we sent the begin cell, not from the time the stream started. If
      it took a long time to establish the circuit, we would time out
      right after sending the begin cell.
    - Fix router_compare_addr_to_addr_policy: it was not treating a port
      of * as always matching, so we were picking reject *:* nodes as
      exit nodes too. Oops.
  o Features:
    - New circuit building strategy: keep a list of ports that we've
      used in the past 6 hours, and always try to have 2 circuits open
      or on the way that will handle each such port. Seed us with port
      80 so web users won't complain that Tor is "slow to start up".
    - Make kill -USR1 dump more useful stats about circuits.
    - When warning about retrying or giving up, print the address, so
      the user knows which one it's talking about.
    - If you haven't used a clean circuit in an hour, throw it away,
      just to be on the safe side. (This means after 6 hours a totally
      unused Tor client will have no circuits open.)
Eugen* Leitl leitl
ICBM: 48.07078, 11.61144            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
         [demime 1.01d removed an attachment of type application/pgp-signature]

@_date: 2004-12-11 13:24:55
@_author: Roger Dingledine 
@_subject: Tor 0.0.9 is imminent 
Hi folks,
If you've been stunned by the frequency of new release candidates and
you've been waiting for The Actual Release Candidate, 0.0.9rc7 is it.
If you have a free moment this weekend, please pull it down and try to
break it. If no major problems come up, we'll be releasing 0.0.9 in a
few days.
Eugen* Leitl leitl
ICBM: 48.07078, 11.61144            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
         [demime 1.01d removed an attachment of type application/pgp-signature]

@_date: 2004-12-12 20:51:51
@_author: Roger Dingledine 
@_subject: Tor 0.0.9 is out 
Aside from the many bug fixes, 0.0.9 includes a win32 installer, better
circuit building algorithms, bandwidth accounting and hibernation,
more efficient directory fetching, and support for a separate Tor GUI
controller program (once somebody writes one for us).
tarball:   signature: win32 exe: win32 sig: (use -dPr tor-0_0_9 if you want to check out from cvs)
  o Bugfixes on 0.0.8.1 (Crashes and asserts):
    - Catch and ignore SIGXFSZ signals when log files exceed 2GB; our
      write() call will fail and we handle it there.
    - When we run out of disk space, or other log writing error, don't
      crash. Just stop logging to that log and continue.
    - Fix isspace() and friends so they still make Solaris happy
      but also so they don't trigger asserts on win32.
    - Fix assert failure on malformed socks4a requests.
    - Fix an assert bug where a hidden service provider would fail if
      the first hop of his rendezvous circuit was down.
    - Better handling of size_t vs int, so we're more robust on 64
      bit platforms.
  o Bugfixes on 0.0.8.1 (Win32):
    - Make windows sockets actually non-blocking (oops), and handle
      win32 socket errors better.
    - Fix parse_iso_time on platforms without strptime (eg win32).
    - win32: when being multithreaded, leave parent fdarray open.
    - Better handling of winsock includes on non-MSV win32 compilers.
    - Change our file IO stuff (especially wrt OpenSSL) so win32 is
      happier.
    - Make unit tests work on win32.
  o Bugfixes on 0.0.8.1 (Path selection and streams):
    - Calculate timeout for waiting for a connected cell from the time
      we sent the begin cell, not from the time the stream started. If
      it took a long time to establish the circuit, we would time out
      right after sending the begin cell.
    - Fix router_compare_addr_to_addr_policy: it was not treating a port
      of * as always matching, so we were picking reject *:* nodes as
      exit nodes too. Oops.
    - When read() failed on a stream, we would close it without sending
      back an end. So 'connection refused' would simply be ignored and
      the user would get no response.
    - Stop a sigpipe: when an 'end' cell races with eof from the app,
      we shouldn't hold-open-until-flush if the eof arrived first.
    - Let resolve conns retry/expire also, rather than sticking around
      forever.
    - Fix more dns related bugs: send back resolve_failed and end cells
      more reliably when the resolve fails, rather than closing the
      circuit and then trying to send the cell. Also attach dummy resolve
      connections to a circuit *before* calling dns_resolve(), to fix
      a bug where cached answers would never be sent in RESOLVED cells.
  o Bugfixes on 0.0.8.1 (Circuits):
    - Finally fix a bug that's been plaguing us for a year:
      With high load, circuit package window was reaching 0. Whenever
      we got a circuit-level sendme, we were reading a lot on each
      socket, but only writing out a bit. So we would eventually reach
      eof. This would be noticed and acted on even when there were still
      bytes sitting in the inbuf.
    - Use identity comparison, not nickname comparison, to choose which
      half of circuit-ID-space each side gets to use. This is needed
      because sometimes we think of a router as a nickname, and sometimes
      as a hex ID, and we can't predict what the other side will do.
  o Bugfixes on 0.0.8.1 (Other):
    - Fix a whole slew of memory leaks.
    - Disallow NDEBUG. We don't ever want anybody to turn off debug.
    - If we are using select, make sure we stay within FD_SETSIZE.
    - When poll() is interrupted, we shouldn't believe the revents values.
    - Add a FAST_SMARTLIST define to optionally inline smartlist_get
      and smartlist_len, which are two major profiling offenders.
    - If do_hup fails, actually notice.
    - Flush the log file descriptor after we print "Tor opening log file",
      so we don't see those messages days later.
    - Hidden service operators now correctly handle version 1 style
      INTRODUCE1 cells (nobody generates them still, so not a critical
      bug).
    - Handle more errnos from accept() without closing the listener.
      Some OpenBSD machines were closing their listeners because
      they ran out of file descriptors.
    - Some people had wrapped their tor client/server in a script
      that would restart it whenever it died. This did not play well
      with our "shut down if your version is obsolete" code. Now people
      don't fetch a new directory if their local cached version is
      recent enough.
    - Make our autogen.sh work on ksh as well as bash.
    - Better torrc example lines for dirbindaddress and orbindaddress.
    - Improved bounds checking on parsed ints (e.g. config options and
      the ones we find in directories.)
    - Stop using separate defaults for no-config-file and
      empty-config-file. Now you have to explicitly turn off SocksPort,
      if you don't want it open.
    - We were starting to daemonize before we opened our logs, so if
      there were any problems opening logs, we would complain to stderr,
      which wouldn't work, and then mysteriously exit.
    - If a verified OR connects to us before he's uploaded his descriptor,
      or we verify him and hup but he still has the original TLS
      connection, then conn->nickname is still set like he's unverified.
  o Code security improvements, inspired by Ilja:
    - tor_snprintf wrapper over snprintf with consistent (though not C99)
      overflow behavior.
    - Replace sprintf with tor_snprintf. (I think they were all safe, but
      hey.)
    - Replace strcpy/strncpy with strlcpy in more places.
    - Avoid strcat; use tor_snprintf or strlcat instead.
  o Features (circuits and streams):
    - New circuit building strategy: keep a list of ports that we've
      used in the past 6 hours, and always try to have 2 circuits open
      or on the way that will handle each such port. Seed us with port
      80 so web users won't complain that Tor is "slow to start up".
    - Make kill -USR1 dump more useful stats about circuits.
    - When warning about retrying or giving up, print the address, so
      the user knows which one it's talking about.
    - If you haven't used a clean circuit in an hour, throw it away,
      just to be on the safe side. (This means after 6 hours a totally
      unused Tor client will have no circuits open.)
    - Support "foo.nickname.exit" addresses, to let Alice request the
      address "foo" as viewed by exit node "nickname". Based on a patch
      from Geoff Goodell.
    - If your requested entry or exit node has advertised bandwidth 0,
      pick it anyway.
    - Be more greedy about filling up relay cells -- we try reading again
      once we've processed the stuff we read, in case enough has arrived
      to fill the last cell completely.
    - Refuse application socks connections to port 0.
    - Use only 0.0.9pre1 and later servers for resolve cells.
  o Features (bandwidth):
    - Hibernation: New config option "AccountingMax" lets you
      set how many bytes per month (in each direction) you want to
      allow your server to consume. Rather than spreading those
      bytes out evenly over the month, we instead hibernate for some
      of the month and pop up at a deterministic time, work until
      the bytes are consumed, then hibernate again. Config option
      "MonthlyAccountingStart" lets you specify which day of the month
      your billing cycle starts on.
    - Implement weekly/monthly/daily accounting: now you specify your
      hibernation properties by
      AccountingMax N bytes|KB|MB|GB|TB
      AccountingStart day|week|month [day] HH:MM
        Defaults to "month 1 0:00".
    - Let bandwidth and interval config options be specified as 5 bytes,
      kb, kilobytes, etc; and as seconds, minutes, hours, days, weeks.
  o Features (directories):
    - New "router-status" line in directory, to better bind each verified
      nickname to its identity key.
    - Clients can ask dirservers for /dir.z to get a compressed version
      of the directory. Only works for servers running 0.0.9, of course.
    - Make clients cache directories and use them to seed their router
      lists at startup. This means clients have a datadir again.
    - Respond to content-encoding headers by trying to uncompress as
      appropriate.
    - Clients and servers now fetch running-routers; cache
      running-routers; compress running-routers; serve compressed
      running-routers.z
    - Make moria2 advertise a dirport of 80, so people behind firewalls
      will be able to get a directory.
    - Http proxy support
      - Dirservers translate requests for  to /x
      - You can specify "HttpProxy %s[:%d]" and all dir fetches will
        be routed through this host.
      - Clients ask for /tor/x rather than /x for new enough dirservers.
        This way we can one day coexist peacefully with apache.
      - Clients specify a "Host: %s%d" http header, to be compatible
        with more proxies, and so running squid on an exit node can work.
    - Protect dirservers from overzealous descriptor uploading -- wait
      10 seconds after directory gets dirty, before regenerating.
  o Features (packages and install):
    - Add NSI installer contributed by J Doe.
    - Apply NT service patch from Osamu Fujino. Still needs more work.
    - Commit VC6 and VC7 workspace/project files.
    - Commit a tor.spec for making RPM files, with help from jbash.
    - Add contrib/torctl.in contributed by Glenn Fink.
    - Make expand_filename handle ~ and ~username.
    - Use autoconf to enable largefile support where necessary. Use
      ftello where available, since ftell can fail at 2GB.
    - Ship src/win32/ in the tarball, so people can use it to build.
    - Make old win32 fall back to CWD if SHGetSpecialFolderLocation
      is broken.
  o Features (ui controller):
    - Control interface: a separate program can now talk to your
      client/server over a socket, and get/set config options, receive
      notifications of circuits and streams starting/finishing/dying,
      bandwidth used, etc. The next step is to get some GUIs working.
      Let us know if you want to help out. See doc/control-spec.txt .
    - Ship a contrib/tor-control.py as an example script to interact
      with the control port.
    - "tor --hash-password zzyxz" will output a salted password for
      use in authenticating to the control interface.
    - Implement the control-spec's SAVECONF command, to write your
      configuration to torrc.
    - Get cookie authentication for the controller closer to working.
    - When set_conf changes our server descriptor, upload a new copy.
      But don't upload it too often if there are frequent changes.
  o Features (config and command-line):
    - Deprecate unofficial config option abbreviations, and abbreviations
      not on the command line.
    - Configuration infrastructure support for warning on obsolete
      options.
    - Give a slightly more useful output for "tor -h".
    - Break DirFetchPostPeriod into:
      - DirFetchPeriod for fetching full directory,
      - StatusFetchPeriod for fetching running-routers,
      - DirPostPeriod for posting server descriptor,
      - RendPostPeriod for posting hidden service descriptors.
    - New log format in config:
      "Log minsev[-maxsev] stdout|stderr|syslog" or
      "Log minsev[-maxsev] file /var/foo"
    - DirPolicy config option, to let people reject incoming addresses
      from their dirserver.
    - "tor --list-fingerprint" will list your identity key fingerprint
      and then exit.
    - Make tor --version --version dump the cvs Id of every file.
    - New 'MyFamily nick1,...' config option for a server to
      specify other servers that shouldn't be used in the same circuit
      with it. Only believed if nick1 also specifies us.
    - New 'NodeFamily nick1,nick2,...' config option for a client to
      specify nodes that it doesn't want to use in the same circuit.
    - New 'Redirectexit pattern address:port' config option for a
      server to redirect exit connections, e.g. to a local squid.
    - Add "pass" target for RedirectExit, to make it easier to break
      out of a sequence of RedirectExit rules.
    - Make the dirservers file obsolete.
      - Include a dir-signing-key token in directories to tell the
        parsing entity which key is being used to sign.
      - Remove the built-in bulky default dirservers string.
      - New config option "Dirserver %s:%d [fingerprint]", which can be
        repeated as many times as needed. If no dirservers specified,
        default to moria1,moria2,tor26.
      - Make 'Routerfile' config option obsolete.
    - Discourage people from setting their dirfetchpostperiod more often
      than once per minute.
  o Features (other):
    - kill -USR2 now moves all logs to loglevel debug (kill -HUP to
      get back to normal.)
    - Accept *:706 (silc) in default exit policy.
    - Implement new versioning format for post 0.1.
    - Distinguish between TOR_TLS_CLOSE and TOR_TLS_ERROR, so we can
      log more informatively.
    - Check clock skew for verified servers, but allow unverified
      servers and clients to have any clock skew.
    - Make sure the hidden service descriptors are at a random offset
      from each other, to hinder linkability.
    - Clients now generate a TLS cert too, in preparation for having
      them act more like real nodes.
    - Add a pure-C tor-resolve implementation.
    - Use getrlimit and friends to ensure we can reach MaxConn (currently
      1024) file descriptors.
    - Raise the max dns workers from 50 to 100.
Eugen* Leitl leitl
ICBM: 48.07078, 11.61144            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
         [demime 1.01d removed an attachment of type application/pgp-signature]

@_date: 2004-05-20 02:24:46
@_author: Roger Dingledine 
@_subject: [p2p-hackers] Onion Routing Economy 
Check out "Using Payments to Promote Cooperation in Anonymity Protocols"
by Figueiredo et al, ftp://gaia.cs.umass.edu/pub/Anon_Incentive_03-31.pdf
for a pretty good introduction to the problem. There are a lot of unsolved
problems here though. For example:
One could imagine a payment protocol where the initiator delivers to
node i+1 a coin which is only valuable to node i, and if all is going
well then i+1 hands the coin to i. But what about paying the last node
in the path? External sites (e.g. webservers) don't know about your
protocol. So either you don't pay the last hop, in which case there's
no incentive for anybody to honor that, or you give him the money and
hope for the best, which again isn't so good incentive-wise.
This is critical because of another sort of free-riding on systems
like onion routing: many users would prefer to run middleman nodes
(relaying traffic only inside the network, and allowing nothing to exit
from their node).
Another issue to consider is collusion. If nodes work together, can
they take your money without providing service? An incentive/payment
scheme should at the least tolerate some amount of this, especially in
the context of Sybil attacks: Does the payment system enable the adversary to attract more traffic by
performing well? See "Reliable MIX Cascade Networks through Reputation"
for more details around this issue: Rather than explicitly trying to reward good behavior, you might also
consider implicit incentives. For example, running a node (and relaying
traffic) can provide *better anonymity* for a user, so he should want to
do it, and the most plausible cover traffic is actual other traffic. See
"On the Economics of Anonymity", Another area to look at is the token-based incentive scheme in GNUnet --
 and
There's a lot still to be worked out here.
How do you make sure the guy you just paid gets the guys later in the
path to perform well?
Is "credit" local (relative to just you) or global (I do something for
Janet, then get to use Jane's resources)? If global, how do I tell people
that somebody has performed well/poorly without revealing that I just
used them?
Do I choose nodes for my paths based on my view of peoples' credit, so
an adversary who tracks my perspective could guess which paths are mine
based on which nodes are in the path? (Or worse, he could influence my
view of the network so I'm likely to pick nodes that nobody else picks,
making me even more partitioned.)
How do you distinguish between somebody who's legitimately down sometimes
and somebody who provides selective service (relays some traffic, but
always just takes Jane's money and ignores her)?
What incentive do nodes have to pass traffic *back*? Most requests
in Tor (the deployed second-generation onion routing system, see
 send a few bytes forward and get many bytes
in return.
If the credits are local, here's another attack: the adversary shows
up and uses your node, then gives you a token so you can use his. He's
just bought the right to relay some of your traffic. Depending on the
design, either you get to choose the later hops in the path, in which
case you'll probably have to pay for them too (meaning you'll have
gathered tokens for them -- and how did you do that? Some nice guy
showed up and used your node, then gave you a token to use him back),
or the adversary gets to choose your next hop, and we all know where
that leads (cf I've written a bit more discussion about these topics in
 including some questions about
reputation and currency in section 6.
It might sound like I'm trying to convince you this is an impossible
problem. But I actually think we're getting closer to finding some sort
of halfway-decent incentive scheme in the next couple of years. I figure
the first step is to understand it well enough to figure out which parts
we can ignore. Maybe enumerating the problems will drive somebody to
show me how easy it is? :)
p2p-hackers mailing list
p2p-hackers at zgp.org
Here is a web page listing P2P Conferences:
--- end forwarded text

@_date: 2004-10-01 03:19:44
@_author: Roger Dingledine 
@_subject: Tor 0.0.9pre1 is out 
We've fixed quite a few bugs. We've also added compression for
directories, and client-side directory caching on disk so you'll have
a directory when Tor restarts.
tarball:   signature: (use -dPr tor-0_0_9pre1 if you want to check out from cvs)
Changes from 0.0.8:
  o Bugfixes:
    - Stop using separate defaults for no-config-file and
      empty-config-file. Now you have to explicitly turn off SocksPort,
      if you don't want it open.
    - Fix a bug in OutboundBindAddress so it (hopefully) works.
    - Improve man page to mention more of the 0.0.8 features.
    - Fix a rare seg fault for people running hidden services on
      intermittent connections.
    - Change our file IO stuff (especially wrt OpenSSL) so win32 is
      happier.
    - Fix more dns related bugs: send back resolve_failed and end cells
      more reliably when the resolve fails, rather than closing the
      circuit and then trying to send the cell. Also attach dummy resolve
      connections to a circuit *before* calling dns_resolve(), to fix
      a bug where cached answers would never be sent in RESOLVED cells.
    - When we run out of disk space, or other log writing error, don't
      crash. Just stop logging to that log and continue.
    - We were starting to daemonize before we opened our logs, so if
      there were any problems opening logs, we would complain to stderr,
      which wouldn't work, and then mysteriously exit.
    - Fix a rare bug where sometimes a verified OR would connect to us
      before he'd uploaded his descriptor, which would cause us to
      assign conn->nickname as though he's unverified. Now we look through
      the fingerprint list to see if he's there.
    - Fix a rare assert trigger, where routerinfos for entries in
      our cpath would expire while we're building the path.
  o Features:
    - Clients can ask dirservers for /dir.z to get a compressed version
      of the directory. Only works for servers running 0.0.9, of course.
    - Make clients cache directories and use them to seed their router
      lists at startup. This means clients have a datadir again.
    - Configuration infrastructure support for warning on obsolete
      options.
    - Respond to content-encoding headers by trying to uncompress as
      appropriate.
    - Reply with a deflated directory when a client asks for "dir.z".
      We could use allow-encodings instead, but allow-encodings isn't
      specified in HTTP 1.0.
    - Raise the max dns workers from 50 to 100.
    - Discourage people from setting their dirfetchpostperiod more often
      than once per minute
    - Protect dirservers from overzealous descriptor uploading -- wait
      10 seconds after directory gets dirty, before regenerating.
Eugen* Leitl leitl
ICBM: 48.07078, 11.61144            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
         [demime 1.01d removed an attachment of type application/pgp-signature]

@_date: 2004-10-14 06:36:18
@_author: Roger Dingledine 
@_subject: Tor 0.0.9pre3 is out 
Along with the bugfixes from 0.0.8.1, plus more bugfixes, this release
makes the dirservers file obsolete (finally) in favor of config option
lines to specify the location and fingerprint of each dirserver you
want to trust. We also now support the use of an http proxy for fetching
tarball:   signature: (use -dPr tor-0_0_9pre3 if you want to check out from cvs)
  o Bugfixes on 0.0.8.1:
    - Better torrc example lines for dirbindaddress and orbindaddress.
    - Improved bounds checking on parsed ints (e.g. config options and
      the ones we find in directories.)
    - Better handling of size_t vs int, so we're more robust on 64
      bit platforms.
    - Fix the rest of the bug where a newly started OR would appear
      as unverified even after we've added his fingerprint and hupped
      the dirserver.
    - Fix a bug from 0.0.7: when read() failed on a stream, we would
      close it without sending back an end. So 'connection refused'
      would simply be ignored and the user would get no response.
  o Bugfixes on 0.0.9pre2:
    - Serving the cached-on-disk directory to people is bad. We now
      provide no directory until we've fetched a fresh one.
    - Workaround for bug on windows where cached-directories get crlf
      corruption.
    - Make get_default_conf_file() work on older windows too.
    - If we write a *:* exit policy line in the descriptor, don't write
      any more exit policy lines.
  o Features:
    - Use only 0.0.9pre1 and later servers for resolve cells.
    - Make the dirservers file obsolete.
      - Include a dir-signing-key token in directories to tell the
        parsing entity which key is being used to sign.
      - Remove the built-in bulky default dirservers string.
      - New config option "Dirserver %s:%d [fingerprint]", which can be
        repeated as many times as needed. If no dirservers specified,
        default to moria1,moria2,tor26.
    - Make moria2 advertise a dirport of 80, so people behind firewalls
      will be able to get a directory.
    - Http proxy support
      - Dirservers translate requests for  to /x
      - You can specify "HttpProxy %s[:%d]" and all dir fetches will
        be routed through this host.
      - Clients ask for /tor/x rather than /x for new enough dirservers.
        This way we can one day coexist peacefully with apache.
      - Clients specify a "Host: %s%d" http header, to be compatible
        with more proxies, and so running squid on an exit node can work.
Eugen* Leitl leitl
ICBM: 48.07078, 11.61144            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
         [demime 1.01d removed an attachment of type application/pgp-signature]

@_date: 2005-12-11 02:29:03
@_author: Roger Dingledine 
@_subject: Tor 0.1.1.10-alpha is out 
This is the tenth development snapshot for the 0.1.1.x series. We fix
more crash bugs, fix some anonymity-related problems, and provide major
performance speedups and use less memory than the previous alphas.
Changes in version 0.1.1.10-alpha - 2005-12-11
  o Correctness bugfixes on 0.1.0.x:
    - On Windows, build with a libevent patch from "I-M Weasel" to avoid
      corrupting the heap, losing FDs, or crashing when we need to resize
      the fd_sets. (This affects the Win32 binaries, not Tor's sources.)
    - Stop doing the complex voodoo overkill checking for insecure
      Diffie-Hellman keys. Just check if it's in [2,p-2] and be happy.
    - When we were closing connections, there was a rare case that
      stomped on memory, triggering seg faults and asserts.
    - We were neglecting to unlink marked circuits from soon-to-close OR
      connections, which caused some rare scribbling on freed memory.
    - When we're deciding whether a stream has enough circuits around
      that can handle it, count the freshly dirty ones and not the ones
      that are so dirty they won't be able to handle it.
    - Recover better from TCP connections to Tor servers that are
      broken but don't tell you (it happens!); and rotate TLS
      connections once a week.
    - When we're expiring old circuits, we had a logic error that caused
      us to close new rendezvous circuits rather than old ones.
    - Fix a scary-looking but apparently harmless bug where circuits
      would sometimes start out in state CIRCUIT_STATE_OR_WAIT at
      servers, and never switch to state CIRCUIT_STATE_OPEN.
    - When building with -static or on Solaris, we sometimes needed to
      build with -ldl.
    - Give a useful message when people run Tor as the wrong user,
      rather than telling them to start chowning random directories.
    - We were failing to inform the controller about new .onion streams.
  o Security bugfixes on 0.1.0.x:
    - Refuse server descriptors if the fingerprint line doesn't match
      the included identity key. Tor doesn't care, but other apps (and
      humans) might actually be trusting the fingerprint line.
    - We used to kill the circuit when we receive a relay command we
      don't recognize. Now we just drop it.
    - Start obeying our firewall options more rigorously:
      . If we can't get to a dirserver directly, try going via Tor.
      . Don't ever try to connect (as a client) to a place our
        firewall options forbid.
      . If we specify a proxy and also firewall options, obey the
        firewall options even when we're using the proxy: some proxies
        can only proxy to certain destinations.
    - Fix a bug found by Lasse Overlier: when we were making internal
      circuits (intended to be cannibalized later for rendezvous and
      introduction circuits), we were picking them so that they had
      useful exit nodes. There was no need for this, and it actually
      aids some statistical attacks.
    - Start treating internal circuits and exit circuits separately.
      It's important to keep them separate because internal circuits
      have their last hops picked like middle hops, rather than like
      exit hops. So exiting on them will break the user's expectations.
  o Bugfixes on 0.1.1.x:
    - Take out the mis-feature where we tried to detect IP address
      flapping for people with DynDNS, and chose not to upload a new
      server descriptor sometimes.
    - Try to be compatible with OpenSSL 0.9.6 again.
    - Log fix: when the controller is logging about .onion addresses,
      sometimes it didn't include the ".onion" part of the address.
    - Don't try to modify options->DirServers internally -- if the
      user didn't specify any, just add the default ones directly to
      the trusted dirserver list. This fixes a bug where people running
      controllers would use SETCONF on some totally unrelated config
      option, and Tor would start yelling at them about changing their
      DirServer lines.
    - Let the controller's redirectstream command specify a port, in
      case the controller wants to change that too.
    - When we requested a pile of server descriptors, we sometimes
      accidentally launched a duplicate request for the first one.
    - Bugfix for trackhostexits: write down the fingerprint of the
      chosen exit, not its nickname, because the chosen exit might not
      be verified.
    - When parsing foo.exit, if foo is unknown, and we are leaving
      circuits unattached, set the chosen_exit field and leave the
      address empty. This matters because controllers got confused
      otherwise.
    - Directory authorities no longer try to download server
      descriptors that they know they will reject.
  o Features and updates:
    - Replace balanced trees with hash tables: this should make stuff
      significantly faster.
    - Resume using the AES counter-mode implementation that we ship,
      rather than OpenSSL's. Ours is significantly faster.
    - Many other CPU and memory improvements.
    - Add a new config option FastFirstHopPK (on by default) so clients
      do a trivial crypto handshake for their first hop, since TLS has
      already taken care of confidentiality and authentication.
    - Add a new config option TestSocks so people can see if their
      applications are using socks4, socks4a, socks5-with-ip, or
      socks5-with-hostname. This way they don't have to keep mucking
      with tcpdump and wondering if something got cached somewhere.
    - Warn when listening on a public address for socks. I suspect a
      lot of people are setting themselves up as open socks proxies,
      and they have no idea that jerks on the Internet are using them,
      since they simply proxy the traffic into the Tor network.
    - Add "private:*" as an alias in configuration for policies. Now
      you can simplify your exit policy rather than needing to list
      every single internal or nonroutable network space.
    - Add a new controller event type that allows controllers to get
      all server descriptors that were uploaded to a router in its role
      as authoritative dirserver.
    - Start shipping socks-extensions.txt, tor-doc-unix.html,
      tor-doc-server.html, and stylesheet.css in the tarball.
    - Stop shipping tor-doc.html in the tarball.
Eugen* Leitl leitl ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2005-12-15 02:35:06
@_author: Roger Dingledine 
@_subject: [declan@well.com: [Politech] E.U. Parliament votes to force "data 
retention" on telecom, Net firms [priv]]
User-Agent: Mutt/1.5.9i
Reply-To: or-talk at freehaven.net
Alas, I think Jeffrey has it right. Tor aims to provide protection in
a scenario where the adversary cannot observe the whole network (or
a substantial piece of it). The EU data retention directives directly
threaten the security that the current Tor design can provide.
There are some anonymity designs that aim to provide protection against
this strong level of adversary -- see e.g.  --
but they carry unacceptably high latency for Tor-style connections.
As I understand it we're still a ways off from understanding exactly
what laws will be passed in each country, and only a while after that
will we start to understand what each law will mean. It may turn out
to be impractical (or illegal) to put out a blanket query to every ISP
in Europe saying "please tell me all users who connected to any of the
following 1000 IP addresses in this 10 second period".
But even so, once we have a sense of what sorts of attacks are likely,
we can also start looking at some specialized padding techniques for
Tor users to blend together better without paying too high a price in
overhead. The goal is not to beat arbitrary statistical attacks, but
to increase false positives (and maybe false negatives) with respect to
specific attacks.
We may also be able to take advantage of the fact that these adversaries
are only partial attackers: even in the best attacks they can only
observe perhaps half the network. We may be able to arrange things to
increase the doubt in their findings -- though as Jeffrey points out,
a patient attacker will use statistics to become increasingly convinced
that he has found his target.
It really is a shame that Europe has chosen to cripple the security of
its citizens and companies in this way. The bad people will continue to
break laws and not get caught by this (breaking into computers around the
world and using them as stepping stones, using open wireless networks,
using botnets, you name it), and honest people and organizations in Europe
will always be wondering who has broken into their ISP and grabbed their
traffic data -- for espionage, for advertising purposes, for stalking,
for who knows.
This is reminiscent of the U.S.'s earlier crypto export fiasco, when they
chose to undermine their position as the world leader in cryptography,
as well as ensure that the good guys were vulnerable while the bad guys
were safe. I wonder how this one will turn out.
Eugen* Leitl leitl ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2005-12-20 02:13:09
@_author: Roger Dingledine 
@_subject: We have a new Windows Tor installer 
Hi folks,
Matt Edman has created a "package bundle" that includes Tor, TorCP,
and Privoxy. We've rewritten the Tor win32 instructions to tell people
to use that rather than doing all the steps manually:
If you're a Windows user, please take a look and let us know if there
are any installation problems, and if there are any documentation things
we should fix.
Eugen* Leitl leitl ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2005-12-23 05:22:46
@_author: Roger Dingledine 
@_subject: EFF no longer funding Tor (was Re: ATTN: for-profit Tor 
User-Agent: Mutt/1.5.9i
Reply-To: or-talk at freehaven.net
I've put up a donations page for Tor here:
Nick and I are continuing to work on Tor in our spare time, but as you
can see, the user base is growing faster than our development can keep
up. Please help us to put our attention back on Tor development rather
than getting day jobs.
Eugen* Leitl leitl ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2005-12-23 18:39:05
@_author: Roger Dingledine 
@_subject: EFF no longer funding Tor (was Re: ATTN: for-profit Tor 
User-Agent: Mutt/1.5.9i
Reply-To: or-talk at freehaven.net
Good idea. I've added a few more paragraphs to
with details on this, plus other options.
Let me know if I've left out anything else that's important. :)
Eugen* Leitl leitl ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2005-02-03 03:42:31
@_author: Roger Dingledine 
@_subject: Tor: Please block these file-sharing ports from your exit policy 
Hi folks,
You're getting this mail because you've registered a Tor server. Thanks
for contributing to the Tor network! We've been getting a lot of nodes
lately from people saying they're happy Tor exists because now they can
publish anonymously, reach websites that are blocked from their country,
etc etc. This is all possible because of people like you.
There are two parts to this mail: (1) asking how Tor servers are doing
and reminding you to upgrade / restart them, and (2) asking you to
prepend some more exit policy lines in their torrc.
****** Part one: ******
If your Tor server has crashed and you haven't noticed, please notice,
and consider upgrading to at least 0.0.9.3 and restarting it. :) If it
was running 0.0.9.3 when it crashed, please let me know of any hints
(e.g. core files and error messages) you might have for us.
If you've turned off your Tor server because it's eating too much of your
bandwidth/CPU, please consider setting BandwidthRate and BandwidthBurst
and starting it up again. Bandwidth limiting also limits the cpu use,
since it's tied to how many bytes you process. Even cable and DSL
rates are usable and useful to us. Also, note that we've implemented
Hibernation, which lets you set a maximum number of bytes to handle per
day/week/month, and your server goes to sleep in between. Let me know if
you need help choosing good configuration parameters; I'm happy to help.
If you're feeling adventurous, feel free to try the code in CVS:
It hasn't crashed on us lately, and it uses pthreads rather than forking
so the "using lots of memory for each dnsworker" problem should be
resolved. We'll be putting out an actual package for 0.1.0-alpha in a
week or two, if you prefer to wait.
If you're feeling adventurous and still have bandwidth to spare, feel free
to set your BandwidthRate to something higher than the 780 KB default.
 shows the
daily top servers by usefulness, for those with a competitive streak. :)
And if you have any wishlist items or other comments, we'd love to
hear them.
****** Part two: ******
In the past weeks, file-sharing has been pummeling the Tor network:
While we don't have any legal or moral opinions about this particular
traffic, we need to take technical measures to make the network usable
again. One solution would be to enumerate the ten or so ports that
we know we want to accept, and reject the rest. We may end up needing
to do that, but we'd like to try an intermediate approach first. So,
please prepend the following line to your exit policy, by putting this
line in your torrc file:
ExitPolicy reject *:4661-4666,reject *:6346-6429,reject *:6881-6999
There's no need to do this if you're a middleman node, or your chosen
exit policy already rejects these. But otherwise, please do it even
if you personally do not mind carrying traffic for these ports: Tor's
architecture means that most of the hops in the circuit don't know what
traffic they're carrying, and at least for now we'd like to crank down
the overall bandwidth used by applications on these ports. Hopefully in
the future we'll have a better (e.g. more decentralized) Tor that can
handle it, but there's no point letting the network die in the meantime.
Eugen* Leitl leitl
ICBM: 48.07078, 11.61144            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
         [demime 1.01d removed an attachment of type application/pgp-signature]

@_date: 2005-02-04 01:18:40
@_author: Roger Dingledine 
@_subject: Tor 0.0.9.4 is out 
Tor 0.0.9.4 fixes a server bug that took down most of the network (if
you're running a server, please upgrade; or if you're running cvs,
please cvs update). It also makes us more robust to running out of
file descriptors.
  o Bugfixes on 0.0.9:
    - Fix an assert bug that took down most of our servers: when
      a server claims to have 1 GB of bandwidthburst, don't
      freak out.
    - Don't crash as badly if we have spawned the max allowed number
      of dnsworkers, or we're out of file descriptors.
    - Block more file-sharing ports in the default exit policy.
    - MaxConn is now automatically set to the hard limit of max
      file descriptors we're allowed (ulimit -n), minus a few for
      logs, etc.
    - Give a clearer message when servers need to raise their
      ulimit -n when they start running out of file descriptors.
    - SGI Compatibility patches from Jan Schaumann.
    - Tolerate a corrupt cached directory better.
    - When a dirserver hasn't approved your server, list which one.
    - Go into soft hibernation after 95% of the bandwidth is used,
      not 99%. This is especially important for daily hibernators who
      have a small accounting max. Hopefully it will result in fewer
      cut connections when the hard hibernation starts.
    - Load-balance better when using servers that claim more than
      800kB/s of capacity.
Eugen* Leitl leitl
ICBM: 48.07078, 11.61144            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
         [demime 1.01d removed an attachment of type application/pgp-signature]

@_date: 2005-01-22 01:54:42
@_author: Roger Dingledine 
@_subject: Tor 0.0.9.3 is out 
Tor 0.0.9.3 improves cpu usage, works better when the network was recently
offline and you try to use Tor, and makes hidden services less unbearable.
  o Bugfixes on 0.0.9:
    - Backport the cpu use fixes from main branch, so busy servers won't
      need as much processor time.
    - Work better when we go offline and then come back, or when we
      run Tor at boot before the network is up. We do this by
      optimistically trying to fetch a new directory whenever an
      application request comes in and we think we're offline -- the
      human is hopefully a good measure of when the network is back.
    - Backport some minimal hidserv bugfixes: keep rend circuits open as
      long as you keep using them; actually publish hidserv descriptors
      shortly after they change, rather than waiting 20-40 minutes.
    - Enable Mac startup script by default.
    - Fix duplicate dns_cancel_pending_resolve reported by Giorgos Pallas.
    - When you update AllowUnverifiedNodes or FirewallPorts via the
      controller's setconf feature, we were always appending, never
      resetting.
    - When you update HiddenServiceDir via setconf, it was screwing up
      the order of reading the lines, making it fail.
    - Do not rewrite a cached directory back to the cache; otherwise we
      will think it is recent and not fetch a newer one on startup.
    - Workaround for webservers that lie about Content-Encoding: Tor
      now tries to autodetect compressed directories and compression
      itself. This lets us Proxypass dir fetches through apache.
Eugen* Leitl leitl
ICBM: 48.07078, 11.61144            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
         [demime 1.01d removed an attachment of type application/pgp-signature]

@_date: 2005-06-14 17:59:34
@_author: Roger Dingledine 
@_subject: Tor 0.1.0.10 is released 
Tor 0.1.0.10, the first stable release of the 0.1.0.x branch, is
finally ready.
This release features cleanup on Windows, including making NT
services work; many performance improvements, including libevent to
use poll/epoll/kqueue when available, and pthreads and better buffer
management to avoid so much memory bloat; better performance and
reliability for hidden services; automated self-reachability testing by
servers; http and https proxy support for clients; and much more support
for the Tor controller protocol.
  o Fixes on Win32:
    - Make NT services work and start on startup on Win32 (based on
      patch by Matt Edman). See the FAQ entry for details.
    - Make 'platform' string in descriptor more accurate for Win32
      servers, so it's not just "unknown platform".
    - REUSEADDR on normal platforms means you can rebind to the port
      right after somebody else has let it go. But REUSEADDR on Win32
      means you can bind to the port _even when somebody else already
      has it bound_! So, don't do that on Win32.
    - Clean up the log messages when starting on Win32 with no config
      file.
    - Allow seeding the RNG on Win32 even when you're not running as
      Administrator. If seeding the RNG on Win32 fails, quit.
  o Assert / crash bugs:
    - Refuse relay cells that claim to have a length larger than the
      maximum allowed. This prevents a potential attack that could read
      arbitrary memory (e.g. keys) from an exit server's process.
    - If unofficial Tor clients connect and send weird TLS certs, our
      Tor server triggers an assert. Stop asserting, and start handling
      TLS errors better in other situations too.
    - Fix a race condition that can trigger an assert when we have a
      pending create cell and an OR connection attempt fails.
  o Resource leaks:
    - Use pthreads for worker processes rather than forking. This was
      forced because when we forked, we ended up wasting a lot of
      duplicate ram over time.
      - Also switch to foo_r versions of some library calls to allow
        reentry and threadsafeness.
      - Implement --disable-threads configure option. Disable threads on
        netbsd and openbsd by default, because they have no reentrant
        resolver functions (!), and on solaris since it has other
        threading issues.
    - Fix possible bug on threading platforms (e.g. win32) which was
      leaking a file descriptor whenever a cpuworker or dnsworker died.
    - Fix a minor memory leak when somebody establishes an introduction
      point at your Tor server.
    - Fix possible memory leak in tor_lookup_hostname(). (Thanks to
      Adam Langley.)
    - Add ./configure --with-dmalloc option, to track memory leaks.
    - And try to free all memory on closing, so we can detect what
      we're leaking.
  o Protocol correctness:
    - When we've connected to an OR and handshaked but didn't like
      the result, we were closing the conn without sending destroy
      cells back for pending circuits. Now send those destroys.
    - Start sending 'truncated' cells back rather than destroy cells
      if the circuit closes in front of you. This means we won't have
      to abandon partially built circuits.
    - Handle changed router status correctly when dirserver reloads
      fingerprint file. We used to be dropping all unverified descriptors
      right then. The bug was hidden because we would immediately
      fetch a directory from another dirserver, which would include the
      descriptors we just dropped.
    - Revise tor-spec to add more/better stream end reasons.
    - Revise all calls to connection_edge_end to avoid sending 'misc',
      and to take errno into account where possible.
    - Client now retries when streams end early for 'hibernating' or
      'resource limit' reasons, rather than failing them.
    - Try to be more zealous about calling connection_edge_end when
      things go bad with edge conns in connection.c.
  o Robustness improvements:
    - Better handling for heterogeneous / unreliable nodes:
      - Annotate circuits with whether they aim to contain high uptime
        nodes and/or high capacity nodes. When building circuits, choose
        appropriate nodes.
      - This means that every single node in an intro rend circuit,
        not just the last one, will have a minimum uptime.
      - New config option LongLivedPorts to indicate application streams
        that will want high uptime circuits.
      - Servers reset uptime when a dir fetch entirely fails. This
        hopefully reflects stability of the server's network connectivity.
      - If somebody starts his tor server in Jan 2004 and then fixes his
        clock, don't make his published uptime be a year.
      - Reset published uptime when we wake up from hibernation.
    - Introduce a notion of 'internal' circs, which are chosen without
      regard to the exit policy of the last hop. Intro and rendezvous
      circs must be internal circs, to avoid leaking information. Resolve
      and connect streams can use internal circs if they want.
    - New circuit pooling algorithm: keep track of what destination ports
      we've used recently (start out assuming we'll want to use 80), and
      make sure to have enough circs around to satisfy these ports. Also
      make sure to have 2 internal circs around if we've required internal
      circs lately (and with high uptime if we've seen that lately too).
    - Turn addr_policy_compare from a tristate to a quadstate; this should
      help address our "Ah, you allow 1.2.3.4:80. You are a good choice
      for google.com" problem.
    - When a client asks us for a dir mirror and we don't have one,
      launch an attempt to get a fresh one.
    - First cut at support for "create-fast" cells. Clients can use
      these when extending to their first hop, since the TLS already
      provides forward secrecy and authentication. Not enabled on
      clients yet.
  o Reachability testing.
    - Your Tor server will automatically try to see if its ORPort and
      DirPort are reachable from the outside, and it won't upload its
      descriptor until it decides at least ORPort is reachable (when
      DirPort is not yet found reachable, publish it as zero).
    - When building testing circs for ORPort testing, use only
      high-bandwidth nodes, so fewer circuits fail.
    - Notice when our IP changes, and reset stats/uptime/reachability.
    - Authdirservers don't do ORPort reachability detection, since
      they're in clique mode, so it will be rare to find a server not
      already connected to them.
    - Authdirservers now automatically approve nodes running 0.1.0.2-rc
      or later.
  o Dirserver fixes:
    - Now we allow two unverified servers with the same nickname
      but different keys. But if a nickname is verified, only that
      nickname+key are allowed.
    - If you're an authdirserver connecting to an address:port,
      and it's not the OR you were expecting, forget about that
      descriptor. If he *was* the one you were expecting, then forget
      about all other descriptors for that address:port.
    - Allow servers to publish descriptors from 12 hours in the future.
      Corollary: only whine about clock skew from the dirserver if
      he's a trusted dirserver (since now even verified servers could
      have quite wrong clocks).
    - Require servers that use the default dirservers to have public IP
      addresses. We have too many servers that are configured with private
      IPs and their admins never notice the log entries complaining that
      their descriptors are being rejected.
  o Efficiency improvements:
    - Use libevent. Now we can use faster async cores (like epoll, kpoll,
      and /dev/poll), and hopefully work better on Windows too.
      - Apple's OS X 10.4.0 ships with a broken kqueue API, and using
        kqueue on 10.3.9 causes kernel panics. Don't use kqueue on OS X.
      - Find libevent even if it's hiding in /usr/local/ and your
        CFLAGS and LDFLAGS don't tell you to look there.
      - Be able to link with libevent as a shared library (the default
        after 1.0d), even if it's hiding in /usr/local/lib and even
        if you haven't added /usr/local/lib to your /etc/ld.so.conf,
        assuming you're running gcc. Otherwise fail and give a useful
        error message.
    - Switch to a new buffer management algorithm, which tries to avoid
      reallocing and copying quite as much. In first tests it looks like
      it uses *more* memory on average, but less cpu.
    - Switch our internal buffers implementation to use a ring buffer,
      to hopefully improve performance for fast servers a lot.
    - Reenable the part of the code that tries to flush as soon as an
      OR outbuf has a full TLS record available. Perhaps this will make
      OR outbufs not grow as huge except in rare cases, thus saving lots
      of CPU time plus memory.
    - Improve performance for dirservers: stop re-parsing the whole
      directory every time you regenerate it.
    - Keep a big splay tree of (circid,orconn)->circuit mappings to make
      it much faster to look up a circuit for each relay cell.
    - Remove most calls to assert_all_pending_dns_resolves_ok(),
      since they're eating our cpu on exit nodes.
    - Stop wasting time doing a case insensitive comparison for every
      dns name every time we do any lookup. Canonicalize the names to
      lowercase when you first see them.
  o Hidden services:
    - Handle unavailable hidden services better. Handle slow or busy
      hidden services better.
    - Cannibalize GENERAL circs to be C_REND, C_INTRO, S_INTRO, and S_REND
      circ as necessary, if there are any completed ones lying around
      when we try to launch one.
    - Make hidden services try to establish a rendezvous for 30 seconds
      after fetching the descriptor, rather than for n (where n=3)
      attempts to build a circuit.
    - Adjust maximum skew and age for rendezvous descriptors: let skew
      be 48 hours rather than 90 minutes.
    - Reject malformed .onion addresses rather then passing them on as
      normal web requests.
  o Controller:
    - More Tor controller support. See
       for all the new features,
      including signals to emulate unix signals from any platform;
      redirectstream; extendcircuit; mapaddress; getinfo; postdescriptor;
      closestream; closecircuit; etc.
    - Encode hashed controller passwords in hex instead of base64,
      to make it easier to write controllers.
    - Revise control spec and implementation to allow all log messages to
      be sent to controller with their severities intact (suggested by
      Matt Edman). Disable debug-level logs while delivering a debug-level
      log to the controller, to prevent loop. Update TorControl to handle
      new log event types.
  o New config options/defaults:
    - Begin scrubbing sensitive strings from logs by default. Turn off
      the config option SafeLogging if you need to do debugging.
    - New exit policy: accept most low-numbered ports, rather than
      rejecting most low-numbered ports.
    - Put a note in the torrc about abuse potential with the default
      exit policy.
    - Add support for CONNECTing through https proxies, with "HttpsProxy"
      config option.
    - Add HttpProxyAuthenticator and HttpsProxyAuthenticator support
      based on patch from Adam Langley (basic auth only).
    - Bump the default BandwidthRate from 1 MB to 2 MB, to accommodate
      the fast servers that have been joining lately. (Clients are now
      willing to load balance over up to 2 MB of advertised bandwidth
      capacity too.)
    - New config option MaxAdvertisedBandwidth which lets you advertise
      a low bandwidthrate (to not attract as many circuits) while still
      allowing a higher bandwidthrate in reality.
    - Require BandwidthRate to be at least 20kB/s for servers.
    - Add a NoPublish config option, so you can be a server (e.g. for
      testing running Tor servers in other Tor networks) without
      publishing your descriptor to the primary dirservers.
    - Add a new AddressMap config directive to rewrite incoming socks
      addresses. This lets you, for example, declare an implicit
      required exit node for certain sites.
    - Add a new TrackHostExits config directive to trigger addressmaps
      for certain incoming socks addresses -- for sites that break when
      your exit keeps changing (based on patch from Mike Perry).
    - Split NewCircuitPeriod option into NewCircuitPeriod (30 secs),
      which describes how often we retry making new circuits if current
      ones are dirty, and MaxCircuitDirtiness (10 mins), which describes
      how long we're willing to make use of an already-dirty circuit.
    - Change compiled-in SHUTDOWN_WAIT_LENGTH from a fixed 30 secs to
      a config option "ShutdownWaitLength" (when using kill -INT on
      servers).
    - Fix an edge case in parsing config options: if they say "--"
      on the commandline, it's not a config option (thanks weasel).
    - New config option DirAllowPrivateAddresses for authdirservers.
      Now by default they refuse router descriptors that have non-IP or
      private-IP addresses.
    - Change DirFetchPeriod/StatusFetchPeriod to have a special "Be
      smart" default value: low for servers and high for clients.
    - Some people were putting "Address  " in their torrc, and they had
      a buggy resolver that resolved " " to 0.0.0.0. Oops.
    - If DataDir is ~/.tor, and that expands to /.tor, then default to
      LOCALSTATEDIR/tor instead.
    - Implement --verify-config command-line option to check if your torrc
      is valid without actually launching Tor.
  o Logging improvements:
    - When dirservers refuse a server descriptor, we now log its
      contactinfo, platform, and the poster's IP address.
    - Only warn once per nickname from add_nickname_list_to_smartlist()
      per failure, so an entrynode or exitnode choice that's down won't
      yell so much.
    - When we're connecting to an OR and he's got a different nickname/key
      than we were expecting, only complain loudly if we're an OP or a
      dirserver. Complaining loudly to the OR admins just confuses them.
    - Whine at you if you're a server and you don't set your contactinfo.
    - Warn when exit policy implicitly allows local addresses.
    - Give a better warning when some other server advertises an
      ORPort that is actually an apache running ssl.
    - If we get an incredibly skewed timestamp from a dirserver mirror
      that isn't a verified OR, don't warn -- it's probably him that's
      wrong.
    - When a dirserver causes you to give a warn, mention which dirserver
      it was.
    - Initialize libevent later in the startup process, so the logs are
      already established by the time we start logging libevent warns.
    - Use correct errno on win32 if libevent fails.
    - Check and warn about known-bad/slow libevent versions.
    - Stop warning about sigpipes in the logs. We're going to
      pretend that getting these occassionally is normal and fine.
  o New contrib scripts:
    - New experimental script tor/contrib/exitlist: a simple python
      script to parse directories and find Tor nodes that exit to listed
      addresses/ports.
    - New experimental script tor/contrib/ExerciseServer.py (needs more
      work) that uses the controller interface to build circuits and
      fetch pages over them. This will help us bootstrap servers that
      have lots of capacity but haven't noticed it yet.
    - New experimental script tor/contrib/PathDemo.py (needs more work)
      that uses the controller interface to let you choose whole paths
      via addresses like
      "...path"
    - New contributed script "privoxy-tor-toggle" to toggle whether
      Privoxy uses Tor. Seems to be configured for Debian by default.
    - Have torctl.in/tor.sh.in check for location of su binary (needed
      on FreeBSD)
  o Misc bugfixes:
    - chdir() to your datadirectory at the *end* of the daemonize process,
      not the beginning. This was a problem because the first time you
      run tor, if your datadir isn't there, and you have runasdaemon set
      to 1, it will try to chdir to it before it tries to create it. Oops.
    - Fix several double-mark-for-close bugs, e.g. where we were finding
      a conn for a cell even if that conn is already marked for close.
    - Stop most cases of hanging up on a socks connection without sending
      the socks reject.
    - Fix a bug in the RPM package: set home directory for _tor to
      something more reasonable when first installing.
    - Stop putting nodename in the Platform string in server descriptors.
      It doesn't actually help, and it is confusing/upsetting some people.
    - When using preferred entry or exit nodes, ignore whether the
      circuit wants uptime or capacity. They asked for the nodes, they
      get the nodes.
    - Tie MAX_DIR_SIZE to MAX_BUF_SIZE, so now directory sizes won't get
      artificially capped at 500kB.
    - Cache local dns resolves correctly even when they're .exit
      addresses.
    - If we're hibernating and we get a SIGINT, exit immediately.
    - tor-resolve requests were ignoring .exit if there was a working circuit
      they could use instead.
    - Pay more attention to the ClientOnly config option.
    - Resolve OS X installer bugs: stop claiming to be 0.0.9.2 in certain
      installer screens; and don't put stuff into StartupItems unless
      the user asks you to.
  o Misc features:
    - Rewrite address "serifos.exit" to "externalIP.serifos.exit"
      rather than just rejecting it.
    - If our clock jumps forward by 100 seconds or more, assume something
      has gone wrong with our network and abandon all not-yet-used circs.
    - When an application is using socks5, give him the whole variety of
      potential socks5 responses (connect refused, host unreachable, etc),
      rather than just "success" or "failure".
    - A more sane version numbering system. See
       for details.
    - Change version parsing logic: a version is "obsolete" if it is not
      recommended and (1) there is a newer recommended version in the
      same series, or (2) there are no recommended versions in the same
      series, but there are some recommended versions in a newer series.
      A version is "new" if it is newer than any recommended version in
      the same series.
    - Report HTTP reasons to client when getting a response from directory
      servers -- so you can actually know what went wrong.
    - Reject odd-looking addresses at the client (e.g. addresses that
      contain a colon), rather than having the server drop them because
      they're malformed.
    - Stop publishing socksport in the directory, since it's not
      actually meant to be public. For compatibility, publish a 0 there
      for now.
    - Since we ship our own Privoxy on OS X, tweak it so it doesn't write
      cookies to disk and doesn't log each web request to disk. (Thanks
      to Brett Carrington for pointing this out.)
    - Add OSX uninstall instructions. An actual uninstall script will
      come later.
    - Add "opt hibernating 1" to server descriptor to make it clearer
      whether the server is hibernating.
Eugen* Leitl leitl
ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2005-05-04 18:19:28
@_author: Roger Dingledine 
@_subject: EFF event on Tor, San Francisco, May 10 
Free Tor t-shirt if you run a Tor server. Hope to see some of you
there. :)
Explore the World of Anonymous Communication Online
Join EFF at 111 Minna Gallery to Hear Stories From the Trenches
About the Creation of Tor, an Anonymous Internet Communication System
Tuesday, May 10th, 2005
7:00 p.m. to 9:30 p.m.
Tor: A Brief History of the Most Important Privacy Software Since PGP
Tor is a free/open source software project to create an anonymous
system on the Internet.  Tor runs on all major platforms (Windows, Mac
OS X, and
Roger Dingledine - Tor Project - tor.eff.org
Roger Dingledine is the chief researcher and developer of Tor and has
worked on anonymity and security software at MIT, Reputation Technologies,
and his own Freehaven Project.  Roger will share his personal experiences
about the creation of Tor.
Chris Palmer - Electronic Frontier Foundation - Chris Palmer is EFF's Technology Manager.  He will discuss EFF's goals
and reasons for supporting the Tor Project.
111 Minna Gallery
111 Minna Street
San Francisco, CA 94105
Tel: (415) 974-1719
This event is free and open to the general public.  You must be 21+.
Refreshments will be served.  Free t-shirts for people currently running
Tor nodes. (Bring your IP address.) To learn how to set up a Tor node,
see Please RSVP to (415) 436-9333 x129 or bayff-rsvp at eff.org
111 Minna Gallery is accessible via BART. Get off at the Montgomery
station and exit at 2nd and Market.  Walk south on 2nd Street for
a block and a half, and take a right down the Minna Street Alley.
111 Minna Street is located between Mission and Howard.
The Electronic Frontier Foundation is the leading civil liberties
organization working to protect rights in the digital world.  EFF is a
member-supported organization and maintains one of the most linked-to
websites in the world: Eugen* Leitl leitl
ICBM: 48.07078, 11.61144            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
         [demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2005-10-07 18:26:23
@_author: Roger Dingledine 
@_subject: Tor 0.1.1.8-alpha is out 
This is the eighth development snapshot for the 0.1.1.x series. The
main changes are that clients now use the new directory protocol, that
servers that are tight on resources stop advertising their DirPort,
and that we use OpenSSL's AES if it's available.
Changes in version 0.1.1.8-alpha - 2005-10-07
  o New features (major):
    - Clients don't download or use the directory anymore. Now they
      download and use network-statuses from the trusted dirservers,
      and fetch individual server descriptors as needed from mirrors.
      See dir-spec.txt for all the gory details.
    - Be more conservative about whether to advertise our DirPort.
      The main change is to not advertise if we're running at capacity
      and either a) we could hibernate or b) our capacity is low and
      we're using a default DirPort.
    - Use OpenSSL's AES when OpenSSL has version 0.9.7 or later.
  o New features (minor):
    - Try to be smart about when to retry network-status and
      server-descriptor fetches. Still needs some tuning.
    - Stop parsing, storing, or using running-routers output (but
      mirrors still cache and serve it).
    - Consider a threshold of versioning dirservers (dirservers who have
      an opinion about which Tor versions are still recommended) before
      deciding whether to warn the user that he's obsolete.
    - Dirservers can now reject/invalidate by key and IP, with the
      config options "AuthDirInvalid" and "AuthDirReject". This is
      useful since currently we automatically list servers as running
      and usable even if we know they're jerks.
    - Provide dire warnings to any users who set DirServer; move it out
      of torrc.sample and into torrc.complete.
    - Add MyFamily to torrc.sample in the server section.
    - Add nicknames to the DirServer line, so we can refer to them
      without requiring all our users to memorize their IP addresses.
    - When we get an EOF or a timeout on a directory connection, note
      how many bytes of serverdesc we are dropping. This will help
      us determine whether it is smart to parse incomplete serverdesc
      responses.
    - Add a new function to "change pseudonyms" -- that is, to stop
      using any currently-dirty circuits for new streams, so we don't
      link new actions to old actions. Currently it's only called on
      HUP (or SIGNAL RELOAD).
    - On sighup, if UseHelperNodes changed to 1, use new circuits.
    - Start using RAND_bytes rather than RAND_pseudo_bytes from
      OpenSSL. Also, reseed our entropy every hour, not just at
      startup. And entropy in 512-bit chunks, not 160-bit chunks.
  o Fixes on 0.1.1.7-alpha:
    - Nobody ever implemented EVENT_ADDRMAP for control protocol
      version 0, so don't let version 0 controllers ask for it.
    - If you requested something with too many newlines via the
      v1 controller protocol, you could crash tor.
    - Fix a number of memory leaks, including some pretty serious ones.
    - Re-enable DirPort testing again, so Tor servers will be willing
      to advertise their DirPort if it's reachable.
    - On TLS handshake, only check the other router's nickname against
      its expected nickname if is_named is set.
  o Fixes forward-ported from 0.1.0.15:
    - Don't crash when we don't have any spare file descriptors and we
      try to spawn a dns or cpu worker.
    - Make the numbers in read-history and write-history into uint64s,
      so they don't overflow and publish negatives in the descriptor.
  o Fixes on 0.1.0.x:
    - For the OS X package's modified privoxy config file, comment
      out the "logfile" line so we don't log everything passed
      through privoxy.
    - We were whining about using socks4 or socks5-with-local-lookup
      even when it's an IP in the "virtual" range we designed exactly
      for this case.
    - We were leaking some memory every time the client changes IPs.
    - Never call free() on tor_malloc()d memory. This will help us
      use dmalloc to detect memory leaks.
    - Check for named servers when looking them up by nickname;
      warn when we'recalling a non-named server by its nickname;
      don't warn twice about the same name.
    - Try to list MyFamily elements by key, not by nickname, and warn
      if we've not heard of the server.
    - Make windows platform detection (uname equivalent) smarter.
    - It turns out sparc64 doesn't like unaligned access either.
Eugen* Leitl leitl
ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2005-10-23 23:41:20
@_author: Roger Dingledine 
@_subject: Publicizing Hidden Services 
bytes in 57 lines about:
And the more canonical one is
which is linked from
but could also be helpfully linked from overview.html and
documentation.html (which was why this thread started).
I've just linked them more loudly from both of these places. Let
me know if you think that helps.
I couldn't actually access the one phobos provided. Which leads to the
more important point -- we need to work on speed and reliability of
hidden services before we try to make them more popular. That's on the
todo list, but it's pretty far down the list at this point, at least
until somebody with funding decides that this is important to them.
Eugen* Leitl leitl
ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2005-10-26 16:55:36
@_author: Roger Dingledine 
@_subject: EFF is looking for Tor DMCA test case volunteers 
Fred asked me to forward this to the list. If you have legal questions
(and probably most questions about this count as legal questions), you
should contact Fred and Kevin directly (fred at eff.org and bankston at
eff.org). Fred also reminds us that any correspondence you have with me
or others here would be discoverable, so that's an added incentive to
go to them directly.
Please look through this checklist, and decide if you match the profile
they're looking for. I'd like to encourage you to contact them even
if there are a few points you don't match so well -- I'd rather have a
big pile of pretty-good volunteers than have everybody hold off because
they are not perfectly suited -- then Fred and Kevin can make their own
decisions from there.
If record label and movie studio representatives continue sending
infringement notices to Tor node operators and their upstream ISPs,
it will become increasingly important to set a clear legal precedent
establishing that merely running a node does not create copyright
liability for either node operators or their bandwidth providers. In
order to establish such a precedent, it will be necessary to bring or
defend a test case. EFF is actively seeking clients willing to be the
test case.
Picking the right client is half the battle in any test case.
Accordingly, we cannot promise that we will be able to defend any and
all Tor node operators. There are several factors that are relevant
in finding the right test case client. Here are some of them:
1. You must have received a complaint from a copyright owner about
operating a Tor node. Complaints from your ISP about running a proxy
do not count, even if they mention copyright infringement as the
reason for their objection -- that's a contractual fight between you
and your bandwidth provider. We are looking for node operators who
have either received copyright complaints directly, or forwarded to
them from their ISPs.
2. You should not be an infringer yourself, or be engaged in any
other kind of unlawful activity. In litigation, the copyright owners
will want to examine every hard drive and email message in your
possession or control, looking for evidence that you are running Tor
because you want to encourage people to infringe copyright. So if you
are a big file-sharer, warez trader, or are involved in any other
unlawful activities (even if unrelated to Tor), you are probably not
the right person.
3. You should have a legitimate reason to run Tor. If you are the
client for the test case, you will be deposed under oath and asked
why you run Tor. You should be able to truthfully respond in a way
that does not suggest that you are doing it to encourage any illegal
activity, including copyright infringement. For example, running it
because you value free speech is a legitimate reason. Same if you are
running it for research purposes. Any documentary evidence from your
past (e.g., emails, papers presented, etc) should not contradict your
story. Most Tor node operators will qualify under this criteria, but
if you wrote a bunch of emails and bulletin board posts describing
how great Tor will be for the coming copyright revolution, you are
probably not the ideal client.
4. You should be willing to see the case through. Litigation takes
time -- often several years. The process will occasionally involve
some inconvenience, including depositions and allowing the other side
to go through most documents in your possession or control (including
email, hard drives, etc). EFF will provide the legal services for
free. But there is some risk of personal liability for damages,
perhaps amounting to several thousand dollars, if we lose. We will do
everything to minimize the risk, but cannot eliminate it altogether.
5. You should be located in the United States. Your Tor server should
also be located in the United States.
6. You should have an upstream bandwidth provider who will stand by
you. It would be less than ideal if your upstream ISP terminates your
account before we ever get to court.
Eugen* Leitl leitl
ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2005-09-02 22:00:53
@_author: Roger Dingledine 
@_subject: Greetings/Question - Was: RE: Have some consideration for 
User-Agent: Mutt/1.5.9i
Reply-To: or-talk at freehaven.net
Tor servers publish an "uptime" in their server descriptor, which is
the time they've been available/working at their current IP.
If servers die suddenly, Tor circuits that use them are broken. If
somebody is using one of those circuits (e.g. for his irc connection),
then it gets cut.
Tor clients have a config option "LongLivedPorts" which defaults to
"21,22,706,1863,5050,5190,5222,5223,6667,8300,8888". If a socks request
asks for one of these ports, then it uses a circuit constructed entirely
of nodes with uptimes of at least a day. The theory is that if they've
been up that long, they'll probably be up a while longer.
So for things like port 80 where the request is typically quite quick,
a flaky node is fine, since it's either up during the request or it's not
(in which case we'll keep building circuits until we get one that works).
The answer to your question is "If your node is always like this, then
it's probably not worth while to run a Tor node. But if it's fine for
most days and it has this behavior one afternoon a week, then it's useful
to have it."
Hope that helps,
Eugen* Leitl leitl
ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2005-09-27 15:54:38
@_author: Roger Dingledine 
@_subject: Wikipedia & Tor 
To be fair, this answer is yes. People have used Tor to deface Wikipedia
pages, along with Slashdot pages, certain IRC networks, and so on. I
think that counts as spam at least in a broad sense.
As I understand it, Jimmy is hoping that we will develop and maintain
this notion. We would run both "halves" of the Tor network, and when they
complain about a user, we would cut that user out of the authenticated
Jimmy and I talked about Tor-and-Wikipedia many months ago, and the
conclusion was that they (mediawiki) would be willing to try a variety of
technological solutions to see if they work (i.e. cut down on vandalism
and aren't too much of a burden to run). My favorite is to simply have
certain address classes where the block expires after 15 minutes or
so. Brandon Wiley proposed a similar idea but where the block timeout is
exponentially longer for repeated abuse, so services that are frequently
blocked will stay blocked longer. This is great. But somebody needs to
actually code it.
Wikipedia already needs this sort of thing because of AOL IPs -- they
have similar characteristics to Tor, in that a single IP produces lots
of behavior, some good some bad. The two differences as I understand
them are that AOL will cancel user accounts if you complain loudly enough
(but there's constant tension here because in plenty of cases AOL decides
not to cancel the account, so Wikipedia has to deal some other way like
temporarily blocking the IP), and that it's not clear enough to the
Wikipedia operators that there *are* good Tor users.
(One might argue that it's hard for Wikipedia to change their perception
and learn about any good Tor uses, firstly because good users will
blend in and nobody will notice, and secondly because they've prevented
them all from editing so there are no data points either way.)
So I've been content to wait and watch things progress. Perhaps we will
find a volunteer who wants to help hack the mediawiki codebase to be more
authentication-friendly (or have more powerful blocking config options).
Perhaps we'll find a volunteer to help build the blind-signature
pseudonymous authenticated identity management infrastructure that Nick
refers to. Perhaps the Wikimedia operators will increasingly get a sense
that Tor has something to offer besides vandalism. (I presume this thread
re-surfaced because Tor users and operators are periodically telling
Wikipedia that they don't like being blocked.) Maybe we will come to
the point eventually that it makes sense to do something different than
blocking the Tor IP addresses from editing Wikipedia. (Which, we should
all remember compared the Gentoo forum situation, is a great step above
blocking them from both reading and writing.)
It could be that we never reach that point. Certain services on the
Internet (like some IRC networks) that are really prone to abuse are
probably doing the right thing by blocking all Tor users (and all AOL
users, and all open proxies, and ...). And we want to keep Tor easy
to block, or we're really going to start getting the other communities
angry at us.
In summary, I'm not too unhappy with the status quo for now. Tor needs
way more basic development / usability work still. In the absence of
actual volunteers-who-code on the side of Tor _or_ Wikipedia to resolve
the problem, I'm going to focus on continuing to make Tor better, so
down the road maybe we'll be able to see better answers.
Eugen* Leitl leitl
ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2005-09-30 18:46:01
@_author: Roger Dingledine 
@_subject: Why some Tor servers are slow (was Re: TOR Park Exit Node Question) 
Tonga is using dual AMD64's. Moria also uses those CPUs. They seem to
be extremely fast at crypto (and everything else).
Tonga also advertises port 80 and 443, so it's useful for people
stuck behind fascist firewalls.
Tonga also opened up its exit policy to attract more traffic. Servers
that have lots of unused capacity, and are fast and have high uptime, and
offer unusual ports like the default file-sharing ports, will bootstrap
themselves by advertising a little bit, attracting more clients, and
so on.
(I'm not sure I actually like the fact that Tonga opened up its file
sharing ports, since it puts more load on the rest of the network too,
but I guess since we're still in development, a little bit of stress
like this can be good for us.)
Actually, the default MaxAdvertisedBandwidth is 128 TB. I believe
you're thinking of BandwidthRate.
There is something wrong with the masquerade Tor server. You can see it
yourself (you may have to try from someplace other than masquerade's LAN,
though) -- run "telnet 155.207.113.227 9001" and hit enter about 10 times.
Notice how it's really sluggish and takes a long time before it hangs up.
Now run "telnet 82.94.251.206 443" and do the same thing. Notice how it
realizes the ssl handshake has failed after about 5 lines. This is how
it's supposed to be.
So masquerade is somehow not putting much attention into its ssl
handshakes. This could be because its network connection is actually
through a proxy or a firewall that is dropping some of the packets or
slowing things down tremendously. It could also be that it's running on
a 100 mhz 486, or its ulimits are set to something crazy-low, or it's
busy ray-tracing a movie, or something else.
I'd be curious to learn what's up with it. I've seen this behavior before
on Windows machines behind cable modems and crappy NAT boxes.
Eugen* Leitl leitl
ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2006-04-02 06:22:52
@_author: Roger Dingledine 
@_subject: Update: Torbutton 1.0.1 
I've just changed the Tor installation docs to recommend Torbutton rather
than SwitchProxy: If you all could please give it a try and let us know if you can find
any compatibility problems, bugs, etc, that would be great. I'd like to
get all the issues worked out so we can have a stable plugin to recommend.
Eugen* Leitl leitl ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2006-04-10 18:07:21
@_author: Roger Dingledine 
@_subject: Tor 0.1.1.18-rc is out 
This is the fourth release candidate for the 0.1.1.x series.
Please let us know if you find bugs, because I expect only one
more release candidate before the real thing.
It adds a fifth authoritative directory server, and fixes a lot
of bugs in threshold decisions around directories.
Changes in version 0.1.1.18-rc - 2006-04-10
  o Major fixes:
    - Work harder to download live network-statuses from all the
      directory authorities we know about. Improve the threshold
      decision logic so we're more robust to edge cases.
    - When fetching rendezvous descriptors, we were willing to ask
      v2 authorities too, which would always return 404.
  o Minor fixes:
    - Stop listing down or invalid nodes in the v1 directory. This will
      reduce its bulk by about 1/3, and reduce load on directory
      mirrors.
    - When deciding whether a router is Fast or Guard-worthy, consider
      his advertised BandwidthRate and not just the BandwidthCapacity.
    - No longer ship INSTALL and README files -- they are useless now.
    - Force rpmbuild to behave and honor target_cpu.
    - Avoid warnings about machine/limits.h on Debian GNU/kFreeBSD.
    - Start to include translated versions of the tor-doc-*.html
      files, along with the screenshots. Still needs more work.
    - Start sending back 512 and 451 errors if mapaddress fails,
      rather than not sending anything back at all.
    - When we fail to bind or listen on an incoming or outgoing
      socket, we should close it before failing. otherwise we just
      leak it. (thanks to weasel for finding.)
    - Allow "getinfo dir/status/foo" to work, as long as your DirPort
      is enabled. (This is a hack, and will be fixed in 0.1.2.x.)
    - Make NoPublish (even though deprecated) work again.
    - Fix a minor security flaw where a versioning auth dirserver
      could list a recommended version many times in a row to make
      clients more convinced that it's recommended.
    - Fix crash bug if there are two unregistered servers running
      with the same nickname, one of them is down, and you ask for
      them by nickname in your EntryNodes or ExitNodes. Also, try
      to pick the one that's running rather than an arbitrary one.
    - Fix an infinite loop we could hit if we go offline for too long.
    - Complain when we hit WSAENOBUFS on recv() or write() too.
      Perhaps this will help us hunt the bug.
    - If you're not a versioning dirserver, don't put the string
      "client-versions \nserver-versions \n" in your network-status.
    - Lower the minimum required number of file descriptors to 1000,
      so we can have some overhead for Valgrind on Linux, where the
      default ulimit -n is 1024.
  o New features:
    - Add tor.dizum.com as the fifth authoritative directory server.
    - Add a new config option FetchUselessDescriptors, off by default,
      for when you plan to run "exitlist" on your client and you want
      to know about even the non-running descriptors.
Eugen* Leitl leitl ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2006-02-19 16:14:31
@_author: Roger Dingledine 
@_subject: Tor 0.1.0.17 is released 
Tor 0.1.0.17 fixes a crash bug for servers that enable hibernation,
lets Windows servers scale better, and tries to reduce the bandwidth
overhead from the old-style directory protocol. Both clients and servers
are encouraged to upgrade.
Changes in version 0.1.0.17 - 2006-02-17
  o Crash bugfixes on 0.1.0.x:
    - When servers with a non-zero DirPort came out of hibernation,
      sometimes they would trigger an assert.
  o Other important bugfixes:
    - On platforms that don't have getrlimit (like Windows), we were
      artificially constraining ourselves to a max of 1024
      connections. Now just assume that we can handle as many as 15000
      connections. Hopefully this won't cause other problems.
  o Backported features:
    - When we're a server, a client asks for an old-style directory,
      and our write bucket is empty, don't give it to him. This way
      small servers can continue to serve the directory *sometimes*,
      without getting overloaded.
    - Whenever you get a 503 in response to a directory fetch, try
      once more. This will become important once servers start sending
      503's whenever they feel busy.
    - Fetch a new directory every 120 minutes, not every 40 minutes.
      Now that we have hundreds of thousands of users running the old
      directory algorithm, it's starting to hurt a lot.
    - Bump up the period for forcing a hidden service descriptor upload
      from 20 minutes to 1 hour.
Eugen* Leitl leitl ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2006-01-11 00:12:55
@_author: Roger Dingledine 
@_subject: Tor 0.1.1.11-alpha is out 
This is the eleventh development snapshot for the 0.1.1.x series.
This release implements entry guard nodes: it automatically chooses a
handful of entry nodes and sticks with them for all circuits. The logs
about entry guards are still pretty chatty, but hopefully that will help
us track down any problems. Please let us know whether it works for you.
The release also reduces directory bandwidth overhead substantially,
makes Tor servers with dynamic IP addresses useful again, and makes IRC
and IM connections over Tor more reliable.
Everybody who runs a hidden service should upgrade.
Changes in version 0.1.1.11-alpha - 2006-01-10
  o Crashes in 0.1.1.x:
    - Include all the assert/crash fixes from 0.1.0.16.
    - If you start Tor and then quit very quickly, there were some
      races that tried to free things that weren't allocated yet.
    - Fix a rare memory stomp if you're running hidden services.
    - Fix segfault when specifying DirServer in config without nickname.
    - Fix a seg fault when you finish connecting to a server but at
      that moment you dump his server descriptor.
    - Extendcircuit and Attachstream controller commands would
      assert/crash if you don't give them enough arguments.
    - Fix an assert error when we're out of space in the connection_list
      and we try to post a hidden service descriptor (reported by weasel).
    - If you specify a relative torrc path and you set RunAsDaemon in
      your torrc, then it chdir()'s to the new directory. If you HUP,
      it tries to load the new torrc location, fails, and exits.
      The fix: no longer allow a relative path to torrc using -f.
  o Major features:
    - Implement "entry guards": automatically choose a handful of entry
      nodes and stick with them for all circuits. Only pick new guards
      when the ones you have are unsuitable, and if the old guards
      become suitable again, switch back. This will increase security
      dramatically against certain end-point attacks. The EntryNodes
      config option now provides some hints about which entry guards you
      want to use most; and StrictEntryNodes means to only use those.
    - New directory logic: download by descriptor digest, not by
      fingerprint. Caches try to download all listed digests from
      authorities; clients try to download "best" digests from caches.
      This avoids partitioning and isolating attacks better.
    - Make the "stable" router flag in network-status be the median of
      the uptimes of running valid servers, and make clients pay
      attention to the network-status flags. Thus the cutoff adapts
      to the stability of the network as a whole, making IRC, IM, etc
      connections more reliable.
  o Major fixes:
    - Tor servers with dynamic IP addresses were needing to wait 18
      hours before they could start doing reachability testing using
      the new IP address and ports. This is because they were using
      the internal descriptor to learn what to test, yet they were only
      rebuilding the descriptor once they decided they were reachable.
    - Tor 0.1.1.9 and 0.1.1.10 had a serious bug that caused clients
      to download certain server descriptors, throw them away, and then
      fetch them again after 30 minutes. Now mirrors throw away these
      server descriptors so clients can't get them.
    - We were leaving duplicate connections to other ORs open for a week,
      rather than closing them once we detect a duplicate. This only
      really affected authdirservers, but it affected them a lot.
    - Spread the authdirservers' reachability testing over the entire
      testing interval, so we don't try to do 500 TLS's at once every
      20 minutes.
  o Minor fixes:
    - If the network is down, and we try to connect to a conn because
      we have a circuit in mind, and we timeout (30 seconds) because the
      network never answers, we were expiring the circuit, but we weren't
      obsoleting the connection or telling the entry_guards functions.
    - Some Tor servers process billions of cells per day. These statistics
      need to be uint64_t's.
    - Check for integer overflows in more places, when adding elements
      to smartlists. This could possibly prevent a buffer overflow
      on malicious huge inputs. I don't see any, but I haven't looked
      carefully.
    - ReachableAddresses kept growing new "reject *:*" lines on every
      setconf/reload.
    - When you "setconf log" via the controller, it should remove all
      logs. We were automatically adding back in a "log notice stdout".
    - Newly bootstrapped Tor networks couldn't establish hidden service
      circuits until they had nodes with high uptime. Be more tolerant.
    - We were marking servers down when they could not answer every piece
      of the directory request we sent them. This was far too harsh.
    - Fix the torify (tsocks) config file to not use Tor for localhost
      connections.
    - Directory authorities now go to the proper authority when asking for
      a networkstatus, even when they want a compressed one.
    - Fix a harmless bug that was causing Tor servers to log
      "Got an end because of misc error, but we're not an AP. Closing."
    - Authorities were treating their own descriptor changes as cosmetic,
      meaning the descriptor available in the network-status and the
      descriptor that clients downloaded were different.
    - The OS X installer was adding a symlink for tor_resolve but
      the binary was called tor-resolve (reported by Thomas Hardly).
    - Workaround a problem with some http proxies where they refuse GET
      requests that specify "Content-Length: 0" (reported by Adrian).
    - Fix wrong log message when you add a "HiddenServiceNodes" config
      line without any HiddenServiceDir line (reported by Chris Thomas).
  o Minor features:
    - Write the TorVersion into the state file so we have a prayer of
      keeping forward and backward compatibility.
    - Revive the FascistFirewall config option rather than eliminating it:
      now it's a synonym for ReachableAddresses *:80,*:443.
    - Clients choose directory servers from the network status lists,
      not from their internal list of router descriptors. Now they can
      go to caches directly rather than needing to go to authorities
      to bootstrap.
    - Directory authorities ignore router descriptors that have only
      cosmetic differences: do this for 0.1.0.x servers now too.
    - Add a new flag to network-status indicating whether the server
      can answer v2 directory requests too.
    - Authdirs now stop whining so loudly about bad descriptors that
      they fetch from other dirservers. So when there's a log complaint,
      it's for sure from a freshly uploaded descriptor.
    - Reduce memory requirements in our structs by changing the order
      of fields.
    - There used to be two ways to specify your listening ports in a
      server descriptor: on the "router" line and with a separate "ports"
      line. Remove support for the "ports" line.
    - New config option "AuthDirRejectUnlisted" for auth dirservers as
      a panic button: if we get flooded with unusable servers we can
      revert to only listing servers in the approved-routers file.
    - Auth dir servers can now mark a fingerprint as "!reject" or
      "!invalid" in the approved-routers file (as its nickname), to
      refuse descriptors outright or include them but marked as invalid.
    - Servers store bandwidth history across restarts/crashes.
    - Add reasons to DESTROY and RELAY_TRUNCATED cells, so clients can
      get a better idea of why their circuits failed. Not used yet.
    - Directory mirrors now cache up to 16 unrecognized network-status
      docs. Now we can add new authdirservers and they'll be cached too.
    - When picking a random directory, prefer non-authorities if any
      are known.
    - New controller option "getinfo desc/all-recent" to fetch the
      latest server descriptor for every router that Tor knows about.
Eugen* Leitl leitl ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2006-01-12 18:03:40
@_author: Roger Dingledine 
@_subject: Tor security advisory: hidden services can be located quickly 
Versions affected: all stable versions, and all experimental versions
up through 0.1.1.10-alpha.
Impact: If you offer a Tor hidden service, an adversary who can run a
fast Tor server and who knows some basic statistics can find the location
of your hidden service in a matter of minutes to hours.
Solution: You have three options:
1) Upgrade to Tor 0.1.1.12-alpha from the Tor download page [1]. You're
   all set, though be aware that this is an alpha release so there may
   be other bugs. You may also want to look through the release notes [2].
2) Turn off your hidden service until the final 0.1.1.x release is out.
   It may be several months.
3) Stick with Tor 0.1.0.16 and manually configure a half dozen
   EntryNodes. See the FAQ entry [3] for some hints about how to do this.
The details:
Tor researchers Lasse ?verlier and Paul Syverson have confirmed
that a previously theoretical attack on Tor works very well in
practice. Specifically, they found that a malicious Tor server can locate
a hidden service more quickly than was previously believed. The attack
is simple: access the hidden service repeatedly, and keep track of who
builds circuits through you shortly after each access. Because you can
induce your victim to build a new circuit on demand, eventually one of
his circuits will start at your node.
To slow this attack, our latest experimental release implements a
new feature called "guard nodes": it automatically chooses a handful
of entry nodes and sticks with them for all circuits. This idea is
adapted from the "helper node" concept published by Wright et al [4],
but with improved reliability: rather than picking a set of entry nodes
and refusing to access the Tor network if they all become unreachable,
Tor's design dynamically picks new guards as needed, yet switches back
to the old ones when they become reachable again. Therefore Tor users
still have the same level of robustness as before, but the chance of a
successful attack by a limited adversary is greatly reduced.
More details will be presented on January 14 at Shmoocon [5] and January
26 at Black Hat Federal [6].
[1] [2]     [3] [4] [5] Eugen* Leitl leitl ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2006-03-20 01:16:10
@_author: Roger Dingledine 
@_subject: Tor 0.1.1.16-rc is out 
This is the second release candidate for the 0.1.1.x series.
It fixes a variety of odds and ends, including getting started
on making it easier to add new authoritative dirservers.
Changes in version 0.1.1.16-rc - 2006-03-18
  o Bugfixes on 0.1.1.15-rc:
    - Fix assert when the controller asks to attachstream a connect-wait
      or resolve-wait stream.
    - Now do address rewriting when the controller asks us to attach
      to a particular circuit too. This will let Blossom specify
      "moria2.exit" without having to learn what moria2's IP address is.
    - Make the "tor --verify-config" command-line work again, so people
      can automatically check if their torrc will parse.
    - Authoritative dirservers no longer require an open connection from
      a server to consider him "reachable". We need this change because
      when we add new auth dirservers, old servers won't know not to
      hang up on them.
    - Let Tor build on Sun CC again.
    - Fix an off-by-one buffer size in dirserv.c that magically never
      hit our three authorities but broke sjmurdoch's own tor network.
    - If we as a directory mirror don't know of any v1 directory
      authorities, then don't try to cache any v1 directories.
    - Stop warning about unknown servers in our family when they are
      given as hex digests.
    - Stop complaining as quickly to the server operator that he
      hasn't registered his nickname/key binding.
    - Various cleanups so we can add new V2 Auth Dirservers.
    - Change "AllowUnverifiedNodes" to "AllowInvalidNodes", to
      reflect the updated flags in our v2 dir protocol.
    - Resume allowing non-printable characters for exit streams (both
      for connecting and for resolving). Now we tolerate applications
      that don't follow the RFCs. But continue to block malformed names
      at the socks side.
  o Bugfixes on 0.1.0.x:
    - Fix assert bug in close_logs(): when we close and delete logs,
      remove them all from the global "logfiles" list.
    - Fix minor integer overflow in calculating when we expect to use up
      our bandwidth allocation before hibernating.
    - Fix a couple of bugs in OpenSSL detection. Also, deal better when
      there are multiple SSLs installed with different versions.
    - When we try to be a server and Address is not explicitly set and
      our hostname resolves to a private IP address, try to use an
      interface address if it has a public address. Now Windows machines
      that think of themselves as localhost can work by default.
  o New features:
    - Let the controller ask for GETINFO dir/server/foo so it can ask
      directly rather than connecting to the dir port.
    - Let the controller tell us about certain router descriptors
      that it doesn't want Tor to use in circuits. Implement
      SETROUTERPURPOSE and modify +POSTDESCRIPTOR to do this.
    - New config option SafeSocks to reject all application connections
      using unsafe socks protocols. Defaults to off.
Eugen* Leitl leitl ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2006-03-28 20:11:36
@_author: Roger Dingledine 
@_subject: Tor 0.1.1.17-rc is out 
This is the third release candidate for the 0.1.1.x series.
It fixes several major bugs for clients and servers. It also adds
a fourth authoritative directory server (finally).
Changes in version 0.1.1.17-rc - 2006-03-28
  o Major fixes:
    - Clients and servers since 0.1.1.10-alpha have been expiring
      connections whenever they are idle for 5 minutes and they *do*
      have circuits on them. Oops. With this new version, clients will
      discard their previous entry guard choices and avoid choosing
      entry guards running these flawed versions.
    - Fix memory leak when uncompressing concatenated zlib streams. This
      was causing substantial leaks over time on Tor servers.
    - The v1 directory was including servers as much as 48 hours old,
      because that's how the new routerlist->routers works. Now only
      include them if they're 20 hours old or less.
  o Minor fixes:
    - Resume building on irix64, netbsd 2.0, etc.
    - On non-gcc compilers (e.g. solaris), use "-g -O" instead of
      "-Wall -g -O2".
    - Stop writing the "router.desc" file, ever. Nothing uses it anymore,
      and it is confusing some users.
    - Mirrors stop caching the v1 directory so often.
    - Make the max number of old descriptors that a cache will hold
      rise with the number of directory authorities, so we can scale.
    - Change our win32 uname() hack to be more forgiving about what
      win32 versions it thinks it's found.
  o New features:
    - Add lefkada.eecs.harvard.edu as a fourth authoritative directory
      server.
    - When the controller's *setconf commands fail, collect an error
      message in a string and hand it back to the controller.
    - Make the v2 dir's "Fast" flag based on relative capacity, just
      like "Stable" is based on median uptime. Name everything in the
      top 7/8 Fast, and only the top 1/2 gets to be a Guard.
    - Log server fingerprint on startup, so new server operators don't
      have to go hunting around their filesystem for it.
    - Return a robots.txt on our dirport to discourage google indexing.
    - Let the controller ask for GETINFO dir/status/foo so it can ask
      directly rather than connecting to the dir port. Only works when
      dirport is set for now.
  o New config options rather than constants in the code:
    - SocksTimeout: How long do we let a socks connection wait
      unattached before we fail it?
    - CircuitBuildTimeout: Cull non-open circuits that were born
      at least this many seconds ago.
    - CircuitIdleTimeout: Cull open clean circuits that were born
      at least this many seconds ago.
Eugen* Leitl leitl ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2006-05-24 08:19:20
@_author: Roger Dingledine 
@_subject: Tor 0.1.1.20 is released 
Tor 0.1.1.20, the first stable release of the 0.1.1.x branch, is
finally ready.
This release features some major security fixes, including entry guards
to protect the beginning of the circuit, exit enclaves to protect the
end, and better firewall support; a new directory protocol that improves
bandwidth use and keeps clients more up to date; two new directory
authorities; a new ascii-based controller protocol that lets people
easily write applications to interact with Tor; and many scalability
and performance improvements.
Changes in version 0.1.1.20 - 2006-05-23
  o Crash and assert fixes from 0.1.0.17:
    - Fix assert bug in close_logs() on exit: when we close and delete
      logs, remove them all from the global "logfiles" list.
    - Fix an assert error when we're out of space in the connection_list
      and we try to post a hidden service descriptor (reported by Peter
      Palfrader).
    - Fix a rare assert error when we've tried all intro points for
      a hidden service and we try fetching the service descriptor again:
      "Assertion conn->state != AP_CONN_STATE_RENDDESC_WAIT failed".
    - Setconf SocksListenAddress kills Tor if it fails to bind. Now back
      out and refuse the setconf if it would fail.
    - If you specify a relative torrc path and you set RunAsDaemon in
      your torrc, then it chdir()'s to the new directory. If you then
      HUP, it tries to load the new torrc location, fails, and exits.
      The fix: no longer allow a relative path to torrc when using -f.
    - Check for integer overflows in more places, when adding elements
      to smartlists. This could possibly prevent a buffer overflow
      on malicious huge inputs.
  o Security fixes, major:
    - When we're printing strings from the network, don't try to print
      non-printable characters. Now we're safer against shell escape
      sequence exploits, and also against attacks to fool users into
      misreading their logs.
    - Implement entry guards: automatically choose a handful of entry
      nodes and stick with them for all circuits. Only pick new guards
      when the ones you have are unsuitable, and if the old guards
      become suitable again, switch back. This will increase security
      dramatically against certain end-point attacks. The EntryNodes
      config option now provides some hints about which entry guards you
      want to use most; and StrictEntryNodes means to only use those.
      Fixes CVE-2006-0414.
    - Implement exit enclaves: if we know an IP address for the
      destination, and there's a running Tor server at that address
      which allows exit to the destination, then extend the circuit to
      that exit first. This provides end-to-end encryption and end-to-end
      authentication. Also, if the user wants a .exit address or enclave,
      use 4 hops rather than 3, and cannibalize a general circ for it
      if you can.
    - Obey our firewall options more faithfully:
      . If we can't get to a dirserver directly, try going via Tor.
      . Don't ever try to connect (as a client) to a place our
        firewall options forbid.
      . If we specify a proxy and also firewall options, obey the
        firewall options even when we're using the proxy: some proxies
        can only proxy to certain destinations.
    - Make clients regenerate their keys when their IP address changes.
    - For the OS X package's modified privoxy config file, comment
      out the "logfile" line so we don't log everything passed
      through privoxy.
    - Our TLS handshakes were generating a single public/private
      keypair for the TLS context, rather than making a new one for
      each new connection. Oops. (But we were still rotating them
      periodically, so it's not so bad.)
    - When we were cannibalizing a circuit with a particular exit
      node in mind, we weren't checking to see if that exit node was
      already present earlier in the circuit. Now we are.
    - Require server descriptors to list IPv4 addresses -- hostnames
      are no longer allowed. This also fixes potential vulnerabilities
      to servers providing hostnames as their address and then
      preferentially resolving them so they can partition users.
    - Our logic to decide if the OR we connected to was the right guy
      was brittle and maybe open to a mitm for invalid routers.
  o Security fixes, minor:
    - Adjust tor-spec.txt to parameterize cell and key lengths. Now
      Ian Goldberg can prove things about our handshake protocol more
      easily.
    - Make directory authorities generate a separate "guard" flag to
      mean "would make a good entry guard". Clients now honor the
      is_guard flag rather than looking at is_fast or is_stable.
    - Try to list MyFamily elements by key, not by nickname, and warn
      if we've not heard of a server.
    - Start using RAND_bytes rather than RAND_pseudo_bytes from
      OpenSSL. Also, reseed our entropy every hour, not just at
      startup. And add entropy in 512-bit chunks, not 160-bit chunks.
    - Refuse server descriptors where the fingerprint line doesn't match
      the included identity key. Tor doesn't care, but other apps (and
      humans) might actually be trusting the fingerprint line.
    - We used to kill the circuit when we receive a relay command we
      don't recognize. Now we just drop that cell.
    - Fix a bug found by Lasse Overlier: when we were making internal
      circuits (intended to be cannibalized later for rendezvous and
      introduction circuits), we were picking them so that they had
      useful exit nodes. There was no need for this, and it actually
      aids some statistical attacks.
    - Start treating internal circuits and exit circuits separately.
      It's important to keep them separate because internal circuits
      have their last hops picked like middle hops, rather than like
      exit hops. So exiting on them will break the user's expectations.
    - Fix a possible way to DoS dirservers.
    - When the client asked for a rendezvous port that the hidden
      service didn't want to provide, we were sending an IP address
      back along with the end cell. Fortunately, it was zero. But stop
      that anyway.
  o Packaging improvements:
    - Implement --with-libevent-dir option to ./configure. Improve
      search techniques to find libevent, and use those for openssl too.
    - Fix a couple of bugs in OpenSSL detection. Deal better when
      there are multiple SSLs installed with different versions.
    - Avoid warnings about machine/limits.h on Debian GNU/kFreeBSD.
    - On non-gcc compilers (e.g. Solaris's cc), use "-g -O" instead of
      "-Wall -g -O2".
    - Make unit tests (and other invocations that aren't the real Tor)
      run without launching listeners, creating subdirectories, and so on.
    - The OS X installer was adding a symlink for tor_resolve but
      the binary was called tor-resolve (reported by Thomas Hardly).
    - Now we can target arch and OS in rpm builds (contributed by
      Phobos). Also make the resulting dist-rpm filename match the
      target arch.
    - Apply Matt Ghali's --with-syslog-facility patch to ./configure
      if you log to syslog and want something other than LOG_DAEMON.
    - Fix the torify (tsocks) config file to not use Tor for localhost
      connections.
    - Start shipping socks-extensions.txt, tor-doc-unix.html,
      tor-doc-server.html, and stylesheet.css in the tarball.
    - Stop shipping tor-doc.html, INSTALL, and README in the tarball.
      They are useless now.
    - Add Peter Palfrader's contributed check-tor script. It lets you
      easily check whether a given server (referenced by nickname)
      is reachable by you.
    - Add BSD-style contributed startup script "rc.subr" from Peter
      Thoenen.
  o Directory improvements -- new directory protocol:
    - See tor/doc/dir-spec.txt for all the juicy details. Key points:
    - Authorities and caches publish individual descriptors (by
      digest, by fingerprint, by "all", and by "tell me yours").
    - Clients don't download or use the old directory anymore. Now they
      download network-statuses from the directory authorities, and
      fetch individual server descriptors as needed from mirrors.
    - Clients don't download descriptors of non-running servers.
    - Download descriptors by digest, not by fingerprint. Caches try to
      download all listed digests from authorities; clients try to
      download "best" digests from caches. This avoids partitioning
      and isolating attacks better.
    - Only upload a new server descriptor when options change, 18
      hours have passed, uptime is reset, or bandwidth changes a lot.
    - Directory authorities silently throw away new descriptors that
      haven't changed much if the timestamps are similar. We do this to
      tolerate older Tor servers that upload a new descriptor every 15
      minutes. (It seemed like a good idea at the time.)
    - Clients choose directory servers from the network status lists,
      not from their internal list of router descriptors. Now they can
      go to caches directly rather than needing to go to authorities
      to bootstrap the first set of descriptors.
    - When picking a random directory, prefer non-authorities if any
      are known.
    - Add a new flag to network-status indicating whether the server
      can answer v2 directory requests too.
    - Directory mirrors now cache up to 16 unrecognized network-status
      docs, so new directory authorities will be cached too.
    - Stop parsing, storing, or using running-routers output (but
      mirrors still cache and serve it).
    - Clients consider a threshold of "versioning" directory authorities
      before deciding whether to warn the user that he's obsolete.
    - Authorities publish separate sorted lists of recommended versions
      for clients and for servers.
    - Change DirServers config line to note which dirs are v1 authorities.
    - Put nicknames on the DirServer line, so we can refer to them
      without requiring all our users to memorize their IP addresses.
    - Remove option when getting directory cache to see whether they
      support running-routers; they all do now. Replace it with one
      to see whether caches support v2 stuff.
    - Stop listing down or invalid nodes in the v1 directory. This
      reduces its bulk by about 1/3, and reduces load on mirrors.
    - Mirrors no longer cache the v1 directory as often.
    - If we as a directory mirror don't know of any v1 directory
      authorities, then don't try to cache any v1 directories.
  o Other directory improvements:
    - Add lefkada.eecs.harvard.edu and tor.dizum.com as fourth and
      fifth authoritative directory servers.
    - Directory authorities no longer require an open connection from
      a server to consider him "reachable". We need this change because
      when we add new directory authorities, old servers won't know not
      to hang up on them.
    - Dir authorities now do their own external reachability testing
      of each server, and only list as running the ones they found to
      be reachable. We also send back warnings to the server's logs if
      it uploads a descriptor that we already believe is unreachable.
    - Spread the directory authorities' reachability testing over the
      entire testing interval, so we don't try to do 500 TLS's at once
      every 20 minutes.
    - Make the "stable" router flag in network-status be the median of
      the uptimes of running valid servers, and make clients pay
      attention to the network-status flags. Thus the cutoff adapts
      to the stability of the network as a whole, making IRC, IM, etc
      connections more reliable.
    - Make the v2 dir's "Fast" flag based on relative capacity, just
      like "Stable" is based on median uptime. Name everything in the
      top 7/8 Fast, and only the top 1/2 gets to be a Guard.
    - Retry directory requests if we fail to get an answer we like
      from a given dirserver (we were retrying before, but only if
      we fail to connect).
    - Return a robots.txt on our dirport to discourage google indexing.
  o Controller protocol improvements:
    - Revised controller protocol (version 1) that uses ascii rather
      than binary: tor/doc/control-spec.txt. Add supporting libraries
      in python and java and c# so you can use the controller from your
      applications without caring how our protocol works.
    - Allow the DEBUG controller event to work again. Mark certain log
      entries as "don't tell this to controllers", so we avoid cycles.
    - New controller function "getinfo accounting", to ask how
      many bytes we've used in this time period.
    - Add a "resetconf" command so you can set config options like
      AllowUnverifiedNodes and LongLivedPorts to "". Also, if you give
      a config option in the torrc with no value, then it clears it
      entirely (rather than setting it to its default).
    - Add a "getinfo config-file" to tell us where torrc is. Also
      expose guard nodes, config options/names.
    - Add a "quit" command (when when using the controller manually).
    - Add a new signal "newnym" to "change pseudonyms" -- that is, to
      stop using any currently-dirty circuits for new streams, so we
      don't link new actions to old actions. This also occurs on HUP
      or "signal reload".
    - If we would close a stream early (e.g. it asks for a .exit that
      we know would refuse it) but the LeaveStreamsUnattached config
      option is set by the controller, then don't close it.
    - Add a new controller event type "authdir_newdescs" that allows
      controllers to get all server descriptors that were uploaded to
      a router in its role as directory authority.
    - New controller option "getinfo desc/all-recent" to fetch the
      latest server descriptor for every router that Tor knows about.
    - Fix the controller's "attachstream 0" command to treat conn like
      it just connected, doing address remapping, handling .exit and
      .onion idioms, and so on. Now we're more uniform in making sure
      that the controller hears about new and closing connections.
    - Permit transitioning from ORPort==0 to ORPort!=0, and back, from
      the controller. Also, rotate dns and cpu workers if the controller
      changes options that will affect them; and initialize the dns
      worker cache tree whether or not we start out as a server.
    - Add a new circuit purpose 'controller' to let the controller ask
      for a circuit that Tor won't try to use. Extend the "extendcircuit"
      controller command to let you specify the purpose if you're starting
      a new circuit.  Add a new "setcircuitpurpose" controller command to
      let you change a circuit's purpose after it's been created.
    - Let the controller ask for "getinfo dir/server/foo" so it can ask
      directly rather than connecting to the dir port. "getinfo
      dir/status/foo" also works, but currently only if your DirPort
      is enabled.
    - Let the controller tell us about certain router descriptors
      that it doesn't want Tor to use in circuits. Implement
      "setrouterpurpose" and modify "+postdescriptor" to do this.
    - If the controller's *setconf commands fail, collect an error
      message in a string and hand it back to the controller -- don't
      just tell them to go read their logs.
  o Scalability, resource management, and performance:
    - Fix a major load balance bug: we were round-robin reading in 16 KB
      chunks, and servers with bandwidthrate of 20 KB, while downloading
      a 600 KB directory, would starve their other connections. Now we
      try to be a bit more fair.
    - Be more conservative about whether to advertise our DirPort.
      The main change is to not advertise if we're running at capacity
      and either a) we could hibernate ever or b) our capacity is low
      and we're using a default DirPort.
    - We weren't cannibalizing circuits correctly for
      CIRCUIT_PURPOSE_C_ESTABLISH_REND and
      CIRCUIT_PURPOSE_S_ESTABLISH_INTRO, so we were being forced to
      build those from scratch. This should make hidden services faster.
    - Predict required circuits better, with an eye toward making hidden
      services faster on the service end.
    - Compress exit policies even more: look for duplicate lines and
      remove them.
    - Generate 18.0.0.0/8 address policy format in descs when we can;
      warn when the mask is not reducible to a bit-prefix.
    - There used to be two ways to specify your listening ports in a
      server descriptor: on the "router" line and with a separate "ports"
      line. Remove support for the "ports" line.
    - Reduce memory requirements in our structs by changing the order
      of fields. Replace balanced trees with hash tables. Inline
      bottleneck smartlist functions. Add a "Map from digest to void*"
      abstraction so we can do less hex encoding/decoding, and use it
      in router_get_by_digest(). Many other CPU and memory improvements.
    - Allow tor_gzip_uncompress to extract as much as possible from
      truncated compressed data. Try to extract as many
      descriptors as possible from truncated http responses (when
      purpose is DIR_PURPOSE_FETCH_ROUTERDESC).
    - Make circ->onionskin a pointer, not a static array. moria2 was using
      125000 circuit_t's after it had been up for a few weeks, which
      translates to 20+ megs of wasted space.
    - The private half of our EDH handshake keys are now chosen out
      of 320 bits, not 1024 bits. (Suggested by Ian Goldberg.)
    - Stop doing the complex voodoo overkill checking for insecure
      Diffie-Hellman keys. Just check if it's in [2,p-2] and be happy.
    - Do round-robin writes for TLS of at most 16 kB per write. This
      might be more fair on loaded Tor servers.
    - Do not use unaligned memory access on alpha, mips, or mipsel.
      It *works*, but is very slow, so we treat them as if it doesn't.
  o Other bugfixes and improvements:
    - Start storing useful information to $DATADIR/state, so we can
      remember things across invocations of Tor. Retain unrecognized
      lines so we can be forward-compatible, and write a TorVersion line
      so we can be backward-compatible.
    - If ORPort is set, Address is not explicitly set, and our hostname
      resolves to a private IP address, try to use an interface address
      if it has a public address. Now Windows machines that think of
      themselves as localhost can guess their address.
    - Regenerate our local descriptor if it's dirty and we try to use
      it locally (e.g. if it changes during reachability detection).
      This was causing some Tor servers to keep publishing the same
      initial descriptor forever.
    - Tor servers with dynamic IP addresses were needing to wait 18
      hours before they could start doing reachability testing using
      the new IP address and ports. This is because they were using
      the internal descriptor to learn what to test, yet they were only
      rebuilding the descriptor once they decided they were reachable.
    - It turns out we couldn't bootstrap a network since we added
      reachability detection in 0.1.0.1-rc. Good thing the Tor network
      has never gone down. Add an AssumeReachable config option to let
      servers and authorities bootstrap. When we're trying to build a
      high-uptime or high-bandwidth circuit but there aren't enough
      suitable servers, try being less picky rather than simply failing.
    - Newly bootstrapped Tor networks couldn't establish hidden service
      circuits until they had nodes with high uptime. Be more tolerant.
    - Really busy servers were keeping enough circuits open on stable
      connections that they were wrapping around the circuit_id
      space. (It's only two bytes.) This exposed a bug where we would
      feel free to reuse a circuit_id even if it still exists but has
      been marked for close. Try to fix this bug. Some bug remains.
    - When we fail to bind or listen on an incoming or outgoing
      socket, we now close it before refusing, rather than just
      leaking it. (Thanks to Peter Palfrader for finding.)
    - Fix a file descriptor leak in start_daemon().
    - On Windows, you can't always reopen a port right after you've
      closed it. So change retry_listeners() to only close and re-open
      ports that have changed.
    - Workaround a problem with some http proxies that refuse GET
      requests that specify "Content-Length: 0". Reported by Adrian.
    - Recover better from TCP connections to Tor servers that are
      broken but don't tell you (it happens!); and rotate TLS
      connections once a week.
    - Fix a scary-looking but apparently harmless bug where circuits
      would sometimes start out in state CIRCUIT_STATE_OR_WAIT at
      servers, and never switch to state CIRCUIT_STATE_OPEN.
    - Check for even more Windows version flags when writing the platform
      string in server descriptors, and note any we don't recognize.
    - Add reasons to DESTROY and RELAY_TRUNCATED cells, so clients can
      get a better idea of why their circuits failed. Not used yet.
    - Add TTLs to RESOLVED, CONNECTED, and END_REASON_EXITPOLICY cells.
      We don't use them yet, but maybe one day our DNS resolver will be
      able to discover them.
    - Let people type "tor --install" as well as "tor -install" when they
      want to make it an NT service.
    - Looks like we were never delivering deflated (i.e. compressed)
      running-routers lists, even when asked. Oops.
    - We were leaking some memory every time the client changed IPs.
    - Clean up more of the OpenSSL memory when exiting, so we can detect
      memory leaks better.
    - Never call free() on tor_malloc()d memory. This will help us
      use dmalloc to detect memory leaks.
    - Some Tor servers process billions of cells per day. These
      statistics are now uint64_t's.
    - Check [X-]Forwarded-For headers in HTTP requests when generating
      log messages. This lets people run dirservers (and caches) behind
      Apache but still know which IP addresses are causing warnings.
    - Fix minor integer overflow in calculating when we expect to use up
      our bandwidth allocation before hibernating.
    - Lower the minimum required number of file descriptors to 1000,
      so we can have some overhead for Valgrind on Linux, where the
      default ulimit -n is 1024.
    - Stop writing the "router.desc" file, ever. Nothing uses it anymore,
      and its existence is confusing some users.
  o Config option fixes:
    - Add a new config option ExitPolicyRejectPrivate which defaults
      to on. Now all exit policies will begin with rejecting private
      addresses, unless the server operator explicitly turns it off.
    - Bump the default bandwidthrate to 3 MB, and burst to 6 MB.
    - Add new ReachableORAddresses and ReachableDirAddresses options
      that understand address policies. FascistFirewall is now a synonym
      for "ReachableORAddresses *:443", "ReachableDirAddresses *:80".
    - Start calling it FooListenAddress rather than FooBindAddress,
      since few of our users know what it means to bind an address
      or port.
    - If the user gave Tor an odd number of command-line arguments,
      we were silently ignoring the last one. Now we complain and fail.
      This wins the oldest-bug prize -- this bug has been present since
      November 2002, as released in Tor 0.0.0.
    - If you write "HiddenServicePort 6667 127.0.0.1 6668" in your
      torrc rather than "HiddenServicePort 6667 127.0.0.1:6668",
      it would silently ignore the 6668.
    - If we get a linelist or linelist_s config option from the torrc,
      e.g. ExitPolicy, and it has no value, warn and skip rather than
      silently resetting it to its default.
    - Setconf was appending items to linelists, not clearing them.
    - Add MyFamily to torrc.sample in the server section, so operators
      will be more likely to learn that it exists.
    - Make ContactInfo mandatory for authoritative directory servers.
    - MaxConn has been obsolete for a while now. Document the ConnLimit
      config option, which is a *minimum* number of file descriptors
      that must be available else Tor refuses to start.
    - Get rid of IgnoreVersion undocumented config option, and make us
      only warn, never exit, when we're running an obsolete version.
    - Make MonthlyAccountingStart config option truly obsolete now.
    - Correct the man page entry on TrackHostExitsExpire.
    - Let directory authorities start even if they don't specify an
      Address config option.
    - Change "AllowUnverifiedNodes" to "AllowInvalidNodes", to
      reflect the updated flags in our v2 dir protocol.
  o Config option features:
    - Add a new config option FastFirstHopPK (on by default) so clients
      do a trivial crypto handshake for their first hop, since TLS has
      already taken care of confidentiality and authentication.
    - Let the user set ControlListenAddress in the torrc. This can be
      dangerous, but there are some cases (like a secured LAN) where it
      makes sense.
    - New config options to help controllers: FetchServerDescriptors
      and FetchHidServDescriptors for whether to fetch server
      info and hidserv info or let the controller do it, and
      PublishServerDescriptor and PublishHidServDescriptors.
    - Also let the controller set the __AllDirActionsPrivate config
      option if you want all directory fetches/publishes to happen via
      Tor (it assumes your controller bootstraps your circuits).
    - Add "HardwareAccel" config option: support for crypto hardware
      accelerators via OpenSSL. Off by default, until we find somebody
      smart who can test it for us. (It appears to produce seg faults
      in at least some cases.)
    - New config option "AuthDirRejectUnlisted" for directory authorities
      as a panic button: if we get flooded with unusable servers we can
      revert to only listing servers in the approved-routers file.
    - Directory authorities can now reject/invalidate by key and IP,
      with the config options "AuthDirInvalid" and "AuthDirReject", or
      by marking a fingerprint as "!reject" or "!invalid" (as its
      nickname) in the approved-routers file. This is useful since
      currently we automatically list servers as running and usable
      even if we know they're jerks.
    - Add a new config option TestSocks so people can see whether their
      applications are using socks4, socks4a, socks5-with-ip, or
      socks5-with-fqdn. This way they don't have to keep mucking
      with tcpdump and wondering if something got cached somewhere.
    - Add "private:*" as an alias in configuration for policies. Now
      you can simplify your exit policy rather than needing to list
      every single internal or nonroutable network space.
    - Accept "private:*" in routerdesc exit policies; not generated yet
      because older Tors do not understand it.
    - Add configuration option "V1AuthoritativeDirectory 1" which
      moria1, moria2, and tor26 have set.
    - Implement an option, VirtualAddrMask, to set which addresses
      get handed out in response to mapaddress requests. This works
      around a bug in tsocks where 127.0.0.0/8 is never socksified.
    - Add a new config option FetchUselessDescriptors, off by default,
      for when you plan to run "exitlist" on your client and you want
      to know about even the non-running descriptors.
    - SocksTimeout: How long do we let a socks connection wait
      unattached before we fail it?
    - CircuitBuildTimeout: Cull non-open circuits that were born
      at least this many seconds ago.
    - CircuitIdleTimeout: Cull open clean circuits that were born
      at least this many seconds ago.
    - New config option SafeSocks to reject all application connections
      using unsafe socks protocols. Defaults to off.
  o Improved and clearer log messages:
    - Reduce clutter in server logs. We're going to try to make
      them actually usable now. New config option ProtocolWarnings that
      lets you hear about how _other Tors_ are breaking the protocol. Off
      by default.
    - Divide log messages into logging domains. Once we put some sort
      of interface on this, it will let people looking at more verbose
      log levels specify the topics they want to hear more about.
    - Log server fingerprint on startup, so new server operators don't
      have to go hunting around their filesystem for it.
    - Provide dire warnings to any users who set DirServer manually;
      move it out of torrc.sample and into torrc.complete.
    - Make the log message less scary when all the dirservers are
      temporarily unreachable.
    - When tor_socketpair() fails in Windows, give a reasonable
      Windows-style errno back.
    - Improve tor_gettimeofday() granularity on windows.
    - We were printing the number of idle dns workers incorrectly when
      culling them.
    - Handle duplicate lines in approved-routers files without warning.
    - We were whining about using socks4 or socks5-with-local-lookup
      even when it's an IP address in the "virtual" range we designed
      exactly for this case.
    - Check for named servers when looking them up by nickname;
      warn when we're calling a non-named server by its nickname;
      don't warn twice about the same name.
    - Downgrade the dirserver log messages when whining about
      unreachability.
    - Correct "your server is reachable" log entries to indicate that
      it was self-testing that told us so.
    - If we're trying to be a Tor server and running Windows 95/98/ME
      as a server, explain that we'll likely crash.
    - Provide a more useful warn message when our onion queue gets full:
      the CPU is too slow or the exit policy is too liberal.
    - Don't warn when we receive a 503 from a dirserver/cache -- this
      will pave the way for them being able to refuse if they're busy.
    - When we fail to bind a listener, try to provide a more useful
      log message: e.g., "Is Tor already running?"
    - Only start testing reachability once we've established a
      circuit. This will make startup on dir authorities less noisy.
    - Don't try to upload hidden service descriptors until we have
      established a circuit.
    - Tor didn't warn when it failed to open a log file.
    - Warn when listening on a public address for socks. We suspect a
      lot of people are setting themselves up as open socks proxies,
      and they have no idea that jerks on the Internet are using them,
      since they simply proxy the traffic into the Tor network.
    - Give a useful message when people run Tor as the wrong user,
      rather than telling them to start chowning random directories.
    - Fix a harmless bug that was causing Tor servers to log
      "Got an end because of misc error, but we're not an AP. Closing."
    - Fix wrong log message when you add a "HiddenServiceNodes" config
      line without any HiddenServiceDir line (reported by Chris Thomas).
    - Directory authorities now stop whining so loudly about bad
      descriptors that they fetch from other dirservers. So when there's
      a log complaint, it's for sure from a freshly uploaded descriptor.
    - When logging via syslog, include the pid whenever we provide
      a log entry. Suggested by Todd Fries.
    - When we're shutting down and we do something like try to post a
      server descriptor or rendezvous descriptor, don't complain that
      we seem to be unreachable. Of course we are, we're shutting down.
    - Change log line for unreachability to explicitly suggest /etc/hosts
      as the culprit. Also make it clearer what IP address and ports we're
      testing for reachability.
    - Put quotes around user-supplied strings when logging so users are
      more likely to realize if they add bad characters (like quotes)
      to the torrc.
    - NT service patch from Matt Edman to improve error messages on Win32.
Eugen* Leitl leitl ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2007-04-13 12:50:00
@_author: Roger Dingledine 
@_subject: [Fwd: High-traffic Colluding Tor Routers in Washington, D.C.  Confirmed] 
...snip...
Yeah. This happened in mid 2006. I don't know why some random person
just picked it up now.
We (mainly Steven Murdoch and Richard Clayton) tracked down the fellow
running them. It turned out to be an innocent mistake. He's still running
quite a few, on the same network, but now he sets the MyFamily torrc
option on them.
This issue also prompted us to speed up the fix/feature in 0.1.2.1-alpha:
"Automatically avoid picking more than one node from the same
For a more interesting (and more conclusive imo) method of deciding
they're the same, check out slide 28 in Steven's slides from his CCS
paper and 23C3 talk, where he investigated these servers:

@_date: 2007-04-13 12:50:00
@_author: Roger Dingledine 
@_subject: [Fwd: High-traffic Colluding Tor Routers in Washington, D.C.  Confirmed] 
...snip...
Yeah. This happened in mid 2006. I don't know why some random person
just picked it up now.
We (mainly Steven Murdoch and Richard Clayton) tracked down the fellow
running them. It turned out to be an innocent mistake. He's still running
quite a few, on the same network, but now he sets the MyFamily torrc
option on them.
This issue also prompted us to speed up the fix/feature in 0.1.2.1-alpha:
"Automatically avoid picking more than one node from the same
For a more interesting (and more conclusive imo) method of deciding
they're the same, check out slide 28 in Steven's slides from his CCS
paper and 23C3 talk, where he investigated these servers:

@_date: 2007-04-13 12:50:00
@_author: Roger Dingledine 
@_subject: [Fwd: High-traffic Colluding Tor Routers in Washington, D.C.  Confirmed] 
Yeah. This happened in mid 2006. I don't know why some random person
just picked it up now.
We (mainly Steven Murdoch and Richard Clayton) tracked down the fellow
running them. It turned out to be an innocent mistake. He's still running
quite a few, on the same network, but now he sets the MyFamily torrc
option on them.
This issue also prompted us to speed up the fix/feature in 0.1.2.1-alpha:
"Automatically avoid picking more than one node from the same
For a more interesting (and more conclusive imo) method of deciding
they're the same, check out slide 28 in Steven's slides from his CCS
paper and 23C3 talk, where he investigated these servers:

@_date: 2007-04-18 01:01:55
@_author: Roger Dingledine 
@_subject: [Fwd: High-traffic Colluding Tor Routers in Washington, D.C.  Confirmed] 
"Nostra2004 at Safe-mail.net" sent me some follow-up questions, which
I'll answer here so we can keep the thread in one place. Maybe this
will finally put the topic to rest. :)
I believe they made some phone calls to their friends who work in the
network operations center at psinet.
They know the person who was running them. It was somebody in the security
field who was helping out but was embarrassed to realize that he was
actually putting the network at risk by helping out quite so much. :)
The fellow felt that private embarrassment was adequate, and asked not
to be publically named. I trust them, and they trust him, so from my
perspective it is now fine.
Yep. I agree. The Tor network may seem large, but it still needs to grow
a lot larger to resist even medium sized attackers.
If you launch a bunch of Tor servers that together push upwards of
200MBit/s each way sustained, ...that's a lot of bytes.
Tor weights path selection by bandwidth -- otherwise Tor performance
would be extremely miserable rather than just miserable.
There are even several research projects currently looking at how to
trade off a bit more privacy for better performance, including one of
our GSoC interns. See also item  on
Yes. See the previous post:
  This issue also prompted us to speed up the fix/feature in
  0.1.2.1-alpha:
  "Automatically avoid picking more than one node from the same
  /16 network when constructing a circuit."
  But the issue still exists with respect to people who control different
they can).
Well, the Tor directory authorities list servers, and can mark each
server as invalid, badexit, etc. So in effect the authority operators
can collude to blacklist nodes that we agree are behaving badly. A
majority of authority operators need to claim something before clients
will believe it. See for a few more details.
Yes, there is actually a video, courtesy the 23C3 folks:
look for talk 1513. For example,
Hope that helps,

@_date: 2007-04-25 13:03:42
@_author: Roger Dingledine 
@_subject: Tor 0.1.2.13 is released 
Tor 0.1.2.13, the first stable release of the 0.1.2.x branch, is
finally ready.
This release features some major anonymity fixes, such as safer path
selection; better client performance; faster bootstrapping, better address
detection, and better DNS support for servers; write limiting as well
as read limiting to make servers easier to run; and a huge pile of other
features and bug fixes. The bundles also ship with Vidalia 0.0.11.
Tor 0.1.2.13 is released in memory of Rob Levin (1955-2006), aka lilo
of the Freenode IRC network, remembering his patience and vision for
free speech on the Internet.
Changes in version 0.1.2.13 - 2007-04-24
  o Major features, client performance:
    - Weight directory requests by advertised bandwidth. Now we can
      let servers enable write limiting but still allow most clients to
      succeed at their directory requests. (We still ignore weights when
      choosing a directory authority; I hope this is a feature.)
    - Stop overloading exit nodes -- avoid choosing them for entry or
      middle hops when the total bandwidth available from non-exit nodes
      is much higher than the total bandwidth available from exit nodes.
    - Rather than waiting a fixed amount of time between retrying
      application connections, we wait only 10 seconds for the first,
      10 seconds for the second, and 15 seconds for each retry after
      that. Hopefully this will improve the expected user experience.
    - Sometimes we didn't bother sending a RELAY_END cell when an attempt
      to open a stream fails; now we do in more cases. This should
      make clients able to find a good exit faster in some cases, since
      unhandleable requests will now get an error rather than timing out.
  o Major features, client functionality:
    - Implement BEGIN_DIR cells, so we can connect to a directory
      server via TLS to do encrypted directory requests rather than
      plaintext. Enable via the TunnelDirConns and PreferTunneledDirConns
      config options if you like. For now, this feature only works if
      you already have a descriptor for the destination dirserver.
    - Add support for transparent application connections: this basically
      bundles the functionality of trans-proxy-tor into the Tor
      mainline. Now hosts with compliant pf/netfilter implementations
      can redirect TCP connections straight to Tor without diverting
      through SOCKS. (Based on patch from tup.)
    - Add support for using natd; this allows FreeBSDs earlier than
      5.1.2 to have ipfw send connections through Tor without using
      SOCKS. (Patch from Zajcev Evgeny with tweaks from tup.)
  o Major features, servers:
    - Setting up a dyndns name for your server is now optional: servers
      with no hostname or IP address will learn their IP address by
      asking the directory authorities. This code only kicks in when you
      would normally have exited with a "no address" error. Nothing's
      authenticated, so use with care.
    - Directory servers now spool server descriptors, v1 directories,
      and v2 networkstatus objects to buffers as needed rather than en
      masse. They also mmap the cached-routers files. These steps save
      lots of memory.
    - Stop requiring clients to have well-formed certificates, and stop
      checking nicknames in certificates. (Clients have certificates so
      that they can look like Tor servers, but in the future we might want
      to allow them to look like regular TLS clients instead. Nicknames
      in certificates serve no purpose other than making our protocol
      easier to recognize on the wire.) Implements proposal 106.
  o Improvements on DNS support:
    - Add "eventdns" asynchronous dns library originally based on code
      from Adam Langley. Now we can discard the old rickety dnsworker
      concept, and support a wider variety of DNS functions. Allows
      multithreaded builds on NetBSD and OpenBSD again.
    - Add server-side support for "reverse" DNS lookups (using PTR
      records so clients can determine the canonical hostname for a given
      IPv4 address). Only supported by servers using eventdns; servers
      now announce in their descriptors if they don't support eventdns.
    - Workaround for name servers (like Earthlink's) that hijack failing
      DNS requests and replace the no-such-server answer with a "helpful"
      redirect to an advertising-driven search portal. Also work around
      DNS hijackers who "helpfully" decline to hijack known-invalid
      RFC2606 addresses. Config option "ServerDNSDetectHijacking 0"
      lets you turn it off.
    - Servers now check for the case when common DNS requests are going to
      wildcarded addresses (i.e. all getting the same answer), and change
      their exit policy to reject *:* if it's happening.
    - When asked to resolve a hostname, don't use non-exit servers unless
      requested to do so. This allows servers with broken DNS to be
      useful to the network.
    - Start passing "ipv4" hints to getaddrinfo(), so servers don't do
      useless IPv6 DNS resolves.
    - Specify and implement client-side SOCKS5 interface for reverse DNS
      lookups (see doc/socks-extensions.txt). Also cache them.
    - When we change nameservers or IP addresses, reset and re-launch
      our tests for DNS hijacking.
  o Improvements on reachability testing:
    - Servers send out a burst of long-range padding cells once they've
      established that they're reachable. Spread them over 4 circuits,
      so hopefully a few will be fast. This exercises bandwidth and
      bootstraps them into the directory more quickly.
    - When we find our DirPort to be reachable, publish a new descriptor
      so we'll tell the world (reported by pnx).
    - Directory authorities now only decide that routers are reachable
      if their identity keys are as expected.
    - Do DirPort reachability tests less often, since a single test
      chews through many circuits before giving up.
    - Avoid some false positives during reachability testing: don't try
      to test via a server that's on the same /24 network as us.
    - Start publishing one minute or so after we find our ORPort
      to be reachable. This will help reduce the number of descriptors
      we have for ourselves floating around, since it's quite likely
      other things (e.g. DirPort) will change during that minute too.
    - Routers no longer try to rebuild long-term connections to directory
      authorities, and directory authorities no longer try to rebuild
      long-term connections to all servers. We still don't hang up
      connections in these two cases though -- we need to look at it
      more carefully to avoid flapping, and we likely need to wait til
      0.1.1.x is obsolete.
  o Improvements on rate limiting:
    - Enable write limiting as well as read limiting. Now we sacrifice
      capacity if we're pushing out lots of directory traffic, rather
      than overrunning the user's intended bandwidth limits.
    - Include TLS overhead when counting bandwidth usage; previously, we
      would count only the bytes sent over TLS, but not the bytes used
      to send them.
    - Servers decline directory requests much more aggressively when
      they're low on bandwidth. Otherwise they end up queueing more and
      more directory responses, which can't be good for latency.
    - But never refuse directory requests from local addresses.
    - Be willing to read or write on local connections (e.g. controller
      connections) even when the global rate limiting buckets are empty.
    - Flush local controller connection buffers periodically as we're
      writing to them, so we avoid queueing 4+ megabytes of data before
      trying to flush.
    - Revise and clean up the torrc.sample that we ship with; add
      a section for BandwidthRate and BandwidthBurst.
  o Major features, NT services:
    - Install as NT_AUTHORITY\LocalService rather than as SYSTEM; add a
      command-line flag so that admins can override the default by saying
      "tor --service install --user "SomeUser"". This will not affect
      existing installed services. Also, warn the user that the service
      will look for its configuration file in the service user's
      %appdata% directory. (We can't do the "hardwire the user's appdata
      directory" trick any more, since we may not have read access to that
      directory.)
    - Support running the Tor service with a torrc not in the same
      directory as tor.exe and default to using the torrc located in
      the %appdata%\Tor\ of the user who installed the service. Patch
      from Matt Edman.
    - Add an --ignore-missing-torrc command-line option so that we can
      get the "use sensible defaults if the configuration file doesn't
      exist" behavior even when specifying a torrc location on the
      command line.
    - When stopping an NT service, wait up to 10 sec for it to actually
      stop. (Patch from Matt Edman; resolves bug 295.)
  o Directory authority improvements:
    - Stop letting hibernating or obsolete servers affect uptime and
      bandwidth cutoffs.
    - Stop listing hibernating servers in the v1 directory.
    - Authorities no longer recommend exits as guards if this would shift
      too much load to the exit nodes.
    - Authorities now specify server versions in networkstatus. This adds
      about 2% to the size of compressed networkstatus docs, and allows
      clients to tell which servers support BEGIN_DIR and which don't.
      The implementation is forward-compatible with a proposed future
      protocol version scheme not tied to Tor versions.
    - DirServer configuration lines now have an orport= option so
      clients can open encrypted tunnels to the authorities without
      having downloaded their descriptors yet. Enabled for moria1,
      moria2, tor26, and lefkada now in the default configuration.
    - Add a BadDirectory flag to network status docs so that authorities
      can (eventually) tell clients about caches they believe to be
      broken. Not used yet.
    - Allow authorities to list nodes as bad exits in their
      approved-routers file by fingerprint or by address. If most
      authorities set a BadExit flag for a server, clients don't think
      of it as a general-purpose exit. Clients only consider authorities
      that advertise themselves as listing bad exits.
    - Patch from Steve Hildrey: Generate network status correctly on
      non-versioning dirservers.
    - Have directory authorities allow larger amounts of drift in uptime
      without replacing the server descriptor: previously, a server that
      restarted every 30 minutes could have 48 "interesting" descriptors
      per day.
    - Reserve the nickname "Unnamed" for routers that can't pick
      a hostname: any router can call itself Unnamed; directory
      authorities will never allocate Unnamed to any particular router;
      clients won't believe that any router is the canonical Unnamed.
  o Directory mirrors and clients:
    - Discard any v1 directory info that's over 1 month old (for
      directories) or over 1 week old (for running-routers lists).
    - Clients track responses with status 503 from dirservers. After a
      dirserver has given us a 503, we try not to use it until an hour has
      gone by, or until we have no dirservers that haven't given us a 503.
    - When we get a 503 from a directory, and we're not a server, we no
      longer count the failure against the total number of failures
      allowed for the object we're trying to download.
    - Prepare for servers to publish descriptors less often: never
      discard a descriptor simply for being too old until either it is
      recommended by no authorities, or until we get a better one for
      the same router. Make caches consider retaining old recommended
      routers for even longer.
    - Directory servers now provide 'Pragma: no-cache' and 'Expires'
      headers for content, so that we can work better in the presence of
      caching HTTP proxies.
    - Stop fetching descriptors if you're not a dir mirror and you
      haven't tried to establish any circuits lately. (This currently
      causes some dangerous behavior, because when you start up again
      you'll use your ancient server descriptors.)
  o Major fixes, crashes:
    - Stop crashing when the controller asks us to resetconf more than
      one config option at once. (Vidalia 0.0.11 does this.)
    - Fix a longstanding obscure crash bug that could occur when we run
      out of DNS worker processes, if we're not using eventdns. (Resolves
      bug 390.)
    - Fix an assert that could trigger if a controller quickly set then
      cleared EntryNodes. (Bug found by Udo van den Heuvel.)
    - Avoid crash when telling controller about stream-status and a
      stream is detached.
    - Avoid sending junk to controllers or segfaulting when a controller
      uses EVENT_NEW_DESC with verbose nicknames.
    - Stop triggering asserts if the controller tries to extend hidden
      service circuits (reported by mwenge).
    - If we start a server with ClientOnly 1, then set ClientOnly to 0
      and hup, stop triggering an assert based on an empty onion_key.
    - Mask out all signals in sub-threads; only the libevent signal
      handler should be processing them. This should prevent some crashes
      on some machines using pthreads. (Patch from coderman.)
    - Disable kqueue on OS X 10.3 and earlier, to fix bug 371.
  o Major fixes, anonymity/security:
    - Automatically avoid picking more than one node from the same
      /16 network when constructing a circuit. Add an
      "EnforceDistinctSubnets" option to let people disable it if they
      want to operate private test networks on a single subnet.
    - When generating bandwidth history, round down to the nearest
      1k. When storing accounting data, round up to the nearest 1k.
    - When we're running as a server, remember when we last rotated onion
      keys, so that we will rotate keys once they're a week old even if
      we never stay up for a week ourselves.
    - If a client asked for a server by name, and there's a named server
      in our network-status but we don't have its descriptor yet, we
      could return an unnamed server instead.
    - Reject (most) attempts to use Tor circuits with length one. (If
      many people start using Tor as a one-hop proxy, exit nodes become
      a more attractive target for compromise.)
    - Just because your DirPort is open doesn't mean people should be
      able to remotely teach you about hidden service descriptors. Now
      only accept rendezvous posts if you've got HSAuthoritativeDir set.
    - Fix a potential race condition in the rpm installer. Found by
      Stefan Nordhausen.
    - Do not log IPs with TLS failures for incoming TLS
      connections. (Fixes bug 382.)
  o Major fixes, other:
    - If our system clock jumps back in time, don't publish a negative
      uptime in the descriptor.
    - When we start during an accounting interval before it's time to wake
      up, remember to wake up at the correct time. (May fix bug 342.)
    - Previously, we would cache up to 16 old networkstatus documents
      indefinitely, if they came from nontrusted authorities. Now we
      discard them if they are more than 10 days old.
    - When we have a state file we cannot parse, tell the user and
      move it aside. Now we avoid situations where the user starts
      Tor in 1904, Tor writes a state file with that timestamp in it,
      the user fixes her clock, and Tor refuses to start.
    - Publish a new descriptor after we hup/reload. This is important
      if our config has changed such that we'll want to start advertising
      our DirPort now, etc.
    - If we are using an exit enclave and we can't connect, e.g. because
      its webserver is misconfigured to not listen on localhost, then
      back off and try connecting from somewhere else before we fail.
  o New config options or behaviors:
    - When EntryNodes are configured, rebuild the guard list to contain,
      in order: the EntryNodes that were guards before; the rest of the
      EntryNodes; the nodes that were guards before.
    - Do not warn when individual nodes in the configuration's EntryNodes,
      ExitNodes, etc are down: warn only when all possible nodes
      are down. (Fixes bug 348.)
    - Put a lower-bound on MaxAdvertisedBandwidth.
    - Start using the state file to store bandwidth accounting data:
      the bw_accounting file is now obsolete. We'll keep generating it
      for a while for people who are still using 0.1.2.4-alpha.
    - Try to batch changes to the state file so that we do as few
      disk writes as possible while still storing important things in
      a timely fashion.
    - The state file and the bw_accounting file get saved less often when
      the AvoidDiskWrites config option is set.
    - Make PIDFile work on Windows.
    - Add internal descriptions for a bunch of configuration options:
      accessible via controller interface and in comments in saved
      options files.
    - Reject *:563 (NNTPS) in the default exit policy. We already reject
      NNTP by default, so this seems like a sensible addition.
    - Clients now reject hostnames with invalid characters. This should
      avoid some inadvertent info leaks. Add an option
      AllowNonRFC953Hostnames to disable this behavior, in case somebody
      is running a private network with hosts called  !, and     - Check for addresses with invalid characters at the exit as well,
      and warn less verbosely when they fail. You can override this by
      setting ServerDNSAllowNonRFC953Addresses to 1.
    - Remove some options that have been deprecated since at least
      0.1.0.x: AccountingMaxKB, LogFile, DebugLogFile, LogLevel, and
      SysLog. Use AccountingMax instead of AccountingMaxKB, and use Log
      to set log options. Mark PathlenCoinWeight as obsolete.
    - Stop accepting certain malformed ports in configured exit policies.
    - When the user uses bad syntax in the Log config line, stop
      suggesting other bad syntax as a replacement.
    - Add new config option "ResolvConf" to let the server operator
      choose an alternate resolve.conf file when using eventdns.
    - If one of our entry guards is on the ExcludeNodes list, or the
      directory authorities don't think it's a good guard, treat it as
      if it were unlisted: stop using it as a guard, and throw it off
      the guards list if it stays that way for a long time.
    - Allow directory authorities to be marked separately as authorities
      for the v1 directory protocol, the v2 directory protocol, and
      as hidden service directories, to make it easier to retire old
      authorities. V1 authorities should set "HSAuthoritativeDir 1"
      to continue being hidden service authorities too.
    - Remove 8888 as a LongLivedPort, and add 6697 (IRCS).
    - Make TrackExitHosts case-insensitive, and fix the behavior of
      ".suffix" TrackExitHosts items to avoid matching in the middle of
      an address.
    - New DirPort behavior: if you have your dirport set, you download
      descriptors aggressively like a directory mirror, whether or not
      your ORPort is set.
  o Docs:
    - Create a new file ReleaseNotes which was the old ChangeLog. The
      new ChangeLog file now includes the notes for all development
      versions too.
    - Add a new address-spec.txt document to describe our special-case
      addresses: .exit, .onion, and .noconnnect.
    - Fork the v1 directory protocol into its own spec document,
      and mark dir-spec.txt as the currently correct (v2) spec.
  o Packaging, porting, and contrib
    - "tor --verify-config" now exits with -1(255) or 0 depending on
      whether the config options are bad or good.
    - The Debian package now uses --verify-config when (re)starting,
      to distinguish configuration errors from other errors.
    - Adapt a patch from goodell to let the contrib/exitlist script
      take arguments rather than require direct editing.
    - Prevent the contrib/exitlist script from printing the same
      result more than once.
    - Add support to tor-resolve tool for reverse lookups and SOCKS5.
    - In the hidden service example in torrc.sample, stop recommending
      esoteric and discouraged hidden service options.
    - Patch from Michael Mohr to contrib/cross.sh, so it checks more
      values before failing, and always enables eventdns.
    - Try to detect Windows correctly when cross-compiling.
    - Libevent-1.2 exports, but does not define in its headers, strlcpy.
      Try to fix this in configure.in by checking for most functions
      before we check for libevent.
    - Update RPMs to require libevent 1.2.
    - Experimentally re-enable kqueue on OSX when using libevent 1.1b
      or later. Log when we are doing this, so we can diagnose it when
      it fails. (Also, recommend libevent 1.1b for kqueue and
      win32 methods; deprecate libevent 1.0b harder; make libevent
      recommendation system saner.)
    - Build with recent (1.3+) libevents on platforms that do not
      define the nonstandard types "u_int8_t" and friends.
    - Remove architecture from OS X builds. The official builds are
      now universal binaries.
    - Run correctly on OS X platforms with case-sensitive filesystems.
    - Correctly set maximum connection limit on Cygwin. (This time
      for sure!)
    - Start compiling on MinGW on Windows (patches from Mike Chiussi
      and many others).
    - Start compiling on MSVC6 on Windows (patches from Frediano Ziglio).
    - Finally fix the openssl warnings from newer gccs that believe that
      ignoring a return value is okay, but casting a return value and
      then ignoring it is a sign of madness.
    - On architectures where sizeof(int)>4, still clamp declarable
      bandwidth to INT32_MAX.
  o Minor features, controller:
    - Warn the user when an application uses the obsolete binary v0
      control protocol. We're planning to remove support for it during
      the next development series, so it's good to give people some
      advance warning.
    - Add STREAM_BW events to report per-entry-stream bandwidth
      use. (Patch from Robert Hogan.)
    - Rate-limit SIGNEWNYM signals in response to controllers that
      impolitely generate them for every single stream. (Patch from
      mwenge; closes bug 394.)
    - Add a REMAP status to stream events to note that a stream's
      address has changed because of a cached address or a MapAddress
      directive.
    - Make REMAP stream events have a SOURCE (cache or exit), and
      make them generated in every case where we get a successful
      connected or resolved cell.
    - Track reasons for OR connection failure; make these reasons
      available via the controller interface. (Patch from Mike Perry.)
    - Add a SOCKS_BAD_HOSTNAME client status event so controllers
      can learn when clients are sending malformed hostnames to Tor.
    - Specify and implement some of the controller status events.
    - Have GETINFO dir/status/* work on hosts with DirPort disabled.
    - Reimplement GETINFO so that info/names stays in sync with the
      actual keys.
    - Implement "GETINFO fingerprint".
    - Implement "SETEVENTS GUARD" so controllers can get updates on
      entry guard status as it changes.
    - Make all connections to addresses of the form ".noconnect"
      immediately get closed. This lets application/controller combos
      successfully test whether they're talking to the same Tor by
      watching for STREAM events.
    - Add a REASON field to CIRC events; for backward compatibility, this
      field is sent only to controllers that have enabled the extended
      event format. Also, add additional reason codes to explain why
      a given circuit has been destroyed or truncated. (Patches from
      Mike Perry)
    - Add a REMOTE_REASON field to extended CIRC events to tell the
      controller why a remote OR told us to close a circuit.
    - Stream events also now have REASON and REMOTE_REASON fields,
      working much like those for circuit events.
    - There's now a GETINFO ns/... field so that controllers can ask Tor
      about the current status of a router.
    - A new event type "NS" to inform a controller when our opinion of
      a router's status has changed.
    - Add a GETINFO events/names and GETINFO features/names so controllers
      can tell which events and features are supported.
    - A new CLEARDNSCACHE signal to allow controllers to clear the
      client-side DNS cache without expiring circuits.
    - Fix CIRC controller events so that controllers can learn the
      identity digests of non-Named servers used in circuit paths.
    - Let controllers ask for more useful identifiers for servers. Instead
      of learning identity digests for un-Named servers and nicknames
      for Named servers, the new identifiers include digest, nickname,
      and indication of Named status. Off by default; see control-spec.txt
      for more information.
    - Add a "getinfo address" controller command so it can display Tor's
      best guess to the user.
    - New controller event to alert the controller when our server
      descriptor has changed.
    - Give more meaningful errors on controller authentication failure.
    - Export the default exit policy via the control port, so controllers
      don't need to guess what it is / will be later.
  o Minor bugfixes, controller:
    - When creating a circuit via the controller, send a 'launched'
      event when we're done, so we follow the spec better.
    - Correct the control spec to match how the code actually responds
      to 'getinfo addr-mappings/*'. Reported by daejees.
    - The control spec described a GUARDS event, but the code
      implemented a GUARD event. Standardize on GUARD, but let people
      ask for GUARDS too. Reported by daejees.
    - Give the controller END_STREAM_REASON_DESTROY events _before_ we
      clear the corresponding on_circuit variable, and remember later
      that we don't need to send a redundant CLOSED event. (Resolves part
      3 of bug 367.)
    - Report events where a resolve succeeded or where we got a socks
      protocol error correctly, rather than calling both of them
      "INTERNAL".
    - Change reported stream target addresses to IP consistently when
      we finally get the IP from an exit node.
    - Send log messages to the controller even if they happen to be very
      long.
    - Flush ERR-level controller status events just like we currently
      flush ERR-level log events, so that a Tor shutdown doesn't prevent
      the controller from learning about current events.
    - Report the circuit number correctly in STREAM CLOSED events. Bug
      reported by Mike Perry.
    - Do not report bizarre values for results of accounting GETINFOs
      when the last second's write or read exceeds the allotted bandwidth.
    - Report "unrecognized key" rather than an empty string when the
      controller tries to fetch a networkstatus that doesn't exist.
    - When the controller does a "GETINFO network-status", tell it
      about even those routers whose descriptors are very old, and use
      long nicknames where appropriate.
    - Fix handling of verbose nicknames with ORCONN controller events:
      make them show up exactly when requested, rather than exactly when
      not requested.
    - Controller signals now work on non-Unix platforms that don't define
      SIGUSR1 and SIGUSR2 the way we expect.
    - Respond to SIGNAL command before we execute the signal, in case
      the signal shuts us down. Suggested by Karsten Loesing.
    - Handle reporting OR_CONN_EVENT_NEW events to the controller.
  o Minor features, code performance:
    - Major performance improvement on inserting descriptors: change
      algorithm from O(n^2) to O(n).
    - Do not rotate onion key immediately after setting it for the first
      time.
    - Call router_have_min_dir_info half as often. (This is showing up in
      some profiles, but not others.)
    - When using GCC, make log_debug never get called at all, and its
      arguments never get evaluated, when no debug logs are configured.
      (This is showing up in some profiles, but not others.)
    - Statistics dumped by -USR2 now include a breakdown of public key
      operations, for profiling.
    - Make the common memory allocation path faster on machines where
      malloc(0) returns a pointer.
    - Split circuit_t into origin_circuit_t and or_circuit_t, and
      split connection_t into edge, or, dir, control, and base structs.
      These will save quite a bit of memory on busy servers, and they'll
      also help us track down bugs in the code and bugs in the spec.
    - Use OpenSSL's AES implementation on platforms where it's faster.
      This could save us as much as 10% CPU usage.
  o Minor features, descriptors and descriptor handling:
    - Avoid duplicate entries on MyFamily line in server descriptor.
    - When Tor receives a router descriptor that it asked for, but
      no longer wants (because it has received fresh networkstatuses
      in the meantime), do not warn the user. Cache the descriptor if
      we're a cache; drop it if we aren't.
    - Servers no longer ever list themselves in their "family" line,
      even if configured to do so. This makes it easier to configure
      family lists conveniently.
  o Minor fixes, confusing/misleading log messages:
    - Display correct results when reporting which versions are
      recommended, and how recommended they are. (Resolves bug 383.)
    - Inform the server operator when we decide not to advertise a
      DirPort due to AccountingMax enabled or a low BandwidthRate.
    - Only include function names in log messages for info/debug messages.
      For notice/warn/err, the content of the message should be clear on
      its own, and printing the function name only confuses users.
    - Remove even more protocol-related warnings from Tor server logs,
      such as bad TLS handshakes and malformed begin cells.
    - Fix bug 314: Tor clients issued "unsafe socks" warnings even
      when the IP address is mapped through MapAddress to a hostname.
    - Fix misleading log messages: an entry guard that is "unlisted",
      as well as not known to be "down" (because we've never heard
      of it), is not therefore "up".
  o Minor fixes, old/obsolete behavior:
    - Start assuming we can use a create_fast cell if we don't know
      what version a router is running.
    - We no longer look for identity and onion keys in "identity.key" and
      "onion.key" -- these were replaced by secret_id_key and
      secret_onion_key in 0.0.8pre1.
    - We no longer require unrecognized directory entries to be
      preceded by "opt".
    - Drop compatibility with obsolete Tors that permit create cells
      to have the wrong circ_id_type.
    - Remove code to special-case "-cvs" ending, since it has not
      actually mattered since 0.0.9.
    - Don't re-write the fingerprint file every restart, unless it has
      changed.
  o Minor fixes, misc client-side behavior:
    - Always remove expired routers and networkstatus docs before checking
      whether we have enough information to build circuits. (Fixes
      bug 373.)
    - When computing clock skew from directory HTTP headers, consider what
      time it was when we finished asking for the directory, not what
      time it is now.
    - Make our socks5 handling more robust to broken socks clients:
      throw out everything waiting on the buffer in between socks
      handshake phases, since they can't possibly (so the theory
      goes) have predicted what we plan to respond to them.
    - Expire socks connections if they spend too long waiting for the
      handshake to finish. Previously we would let them sit around for
      days, if the connecting application didn't close them either.
    - And if the socks handshake hasn't started, don't send a
      "DNS resolve socks failed" handshake reply; just close it.
    - If the user asks to use invalid exit nodes, be willing to use
      unstable ones.
    - Track unreachable entry guards correctly: don't conflate
      'unreachable by us right now' with 'listed as down by the directory
      authorities'. With the old code, if a guard was unreachable by us
      but listed as running, it would clog our guard list forever.
    - Behave correctly in case we ever have a network with more than
      2GB/s total advertised capacity.
    - Claim a commonname of Tor, rather than TOR, in TLS handshakes.
    - Fix a memory leak when we ask for "all" networkstatuses and we
      get one we don't recognize.

@_date: 2007-02-27 01:45:28
@_author: Roger Dingledine 
@_subject: Tor 0.1.2.8-beta is out 
This is the eighth development snapshot for the 0.1.2.x series. You'll
notice that it's a beta -- more mature than an alpha but not yet a
release candidate. It fixes a few crash bugs, and generally continues
to clean things up. We're getting close!
The bundles also come with Vidalia 0.0.11.
Changes in version 0.1.2.8-beta - 2007-02-26
  o Major bugfixes (crashes):
    - Stop crashing when the controller asks us to resetconf more than
      one config option at once. (Vidalia 0.0.11 does this.)
    - Fix a crash that happened on Win98 when we're given command-line
      arguments: don't try to load NT service functions from advapi32.dll
      except when we need them. (Bug introduced in 0.1.2.7-alpha;
      resolves bug 389.)
    - Fix a longstanding obscure crash bug that could occur when
      we run out of DNS worker processes. (Resolves bug 390.)
  o Major bugfixes (hidden services):
    - Correctly detect whether hidden service descriptor downloads are
      in-progress. (Suggested by Karsten Loesing; fixes bug 399.)
  o Major bugfixes (accounting):
    - When we start during an accounting interval before it's time to wake
      up, remember to wake up at the correct time. (May fix bug 342.)
  o Minor bugfixes (controller):
    - Give the controller END_STREAM_REASON_DESTROY events _before_ we
      clear the corresponding on_circuit variable, and remember later
      that we don't need to send a redundant CLOSED event.  (Resolves part
      3 of bug 367.)
    - Report events where a resolve succeeded or where we got a socks
      protocol error correctly, rather than calling both of them
      "INTERNAL".
    - Change reported stream target addresses to IP consistently when
      we finally get the IP from an exit node.
    - Send log messages to the controller even if they happen to be very
      long.
  o Minor bugfixes (other):
    - Display correct results when reporting which versions are
      recommended, and how recommended they are. (Resolves bug 383.)
    - Improve our estimates for directory bandwidth to be less random:
      guess that an unrecognized directory will have the average bandwidth
      from all known directories, not that it will have the average
      bandwidth from those directories earlier than it on the list.
    - If we start a server with ClientOnly 1, then set ClientOnly to 0
      and hup, stop triggering an assert based on an empty onion_key.
    - On platforms with no working mmap() equivalent, don't warn the
      user when cached-routers doesn't exist.
    - Warn the user when mmap() [or its equivalent] fails for some reason
      other than file-not-found.
    - Don't warn the user when cached-routers.new doesn't exist: that's
      perfectly fine when starting up for the first time.
    - When EntryNodes are configured, rebuild the guard list to contain,
      in order: the EntryNodes that were guards before; the rest of the
      EntryNodes; the nodes that were guards before.
    - Mask out all signals in sub-threads; only the libevent signal
      handler should be processing them. This should prevent some crashes
      on some machines using pthreads. (Patch from coderman.)
    - Fix switched arguments on memset in the implementation of
      tor_munmap() for systems with no mmap() call.
    - When Tor receives a router descriptor that it asked for, but
      no longer wants (because it has received fresh networkstatuses
      in the meantime), do not warn the user.  Cache the descriptor if
      we're a cache; drop it if we aren't.
    - Make earlier entry guards _really_ get retried when the network
      comes back online.
    - On a malformed DNS reply, always give an error to the corresponding
      DNS request.
    - Build with recent libevents on platforms that do not define the
      nonstandard types "u_int8_t" and friends.
  o Minor features (controller):
    - Warn the user when an application uses the obsolete binary v0
      control protocol.  We're planning to remove support for it during
      the next development series, so it's good to give people some
      advance warning.
    - Add STREAM_BW events to report per-entry-stream bandwidth
      use. (Patch from Robert Hogan.)
    - Rate-limit SIGNEWNYM signals in response to controllers that
      impolitely generate them for every single stream. (Patch from
      mwenge; closes bug 394.)
    - Make REMAP stream events have a SOURCE (cache or exit), and
      make them generated in every case where we get a successful
      connected or resolved cell.
  o Minor bugfixes (performance):
    - Call router_have_min_dir_info half as often. (This is showing up in
      some profiles, but not others.)
    - When using GCC, make log_debug never get called at all, and its
      arguments never get evaluated, when no debug logs are configured.
      (This is showing up in some profiles, but not others.)
  o Minor features:
    - Remove some never-implemented options.  Mark PathlenCoinWeight as
      obsolete.
    - Implement proposal 106: Stop requiring clients to have well-formed
      certificates; stop checking nicknames in certificates. (Clients
      have certificates so that they can look like Tor servers, but in
      the future we might want to allow them to look like regular TLS
      clients instead. Nicknames in certificates serve no purpose other
      than making our protocol easier to recognize on the wire.)
    - Revise messages on handshake failure again to be even more clear about
      which are incoming connections and which are outgoing.
    - Discard any v1 directory info that's over 1 month old (for
      directories) or over 1 week old (for running-routers lists).
    - Do not warn when individual nodes in the configuration's EntryNodes,
      ExitNodes, etc are down: warn only when all possible nodes
      are down. (Fixes bug 348.)
    - Always remove expired routers and networkstatus docs before checking
      whether we have enough information to build circuits. (Fixes
      bug 373.)
    - Put a lower-bound on MaxAdvertisedBandwidth.
Eugen* Leitl leitl ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2007-03-16 03:17:00
@_author: Roger Dingledine 
@_subject: Work on Tor this summer, get paid by Google 
Hi folks,
We (EFF and Tor working together) have been accepted into Google's
Summer of Code 2007. This means they'll fund several students to work
with us this summer on projects related to Tor. International students
are welcome too.
The deadline for students submitting applications is _MARCH 24_.
I've put up a page with more details here:
and there's a big list of potential projects here:
Please let us know if you're interested, and spread the word. The
more applications we get, the more likely Google is to give us good
students. So if you haven't filled up your summer plans yet, consider
spending some time working with us to make Tor better!
Eugen* Leitl leitl ICBM: 48.07100, 11.36820            8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
[demime 1.01d removed an attachment of type application/pgp-signature which had a name of signature.asc]

@_date: 2007-03-26 15:46:14
@_author: Roger Dingledine 
@_subject: Anonymity through decentralization (was Re: Ultimate solution) 
I'm leaving the licensing discussion alone for now, but I wanted to
respond to this technical point. Tor's security [1] comes from two
components. The first is its large and diverse user base -- as the user
base expands, the mere use of Tor doesn't narrow you down to a specific
user community or specific few people who are known to have fetched the
program [2]. The second is the diversity of the relays -- as the Tor
network expands, fewer adversaries are able to be in enough places on
the network to succeed at linking senders to recipients.
Now, it's still an open research question what metrics we should use
for these components (that is, how exactly we measure the security we
get from them), but my intuition is that after a certain point the first
component doesn't contribute much more to security -- meaning in Tor's
current state, its security grows primarily as the network grows.
And remember that by "being in enough places", I mean being in a position
to watch (or otherwise measure [3]) the traffic; the best attacks we know
right now only look at characteristics of the traffic flow [4], because
any sort of coordinated compromise of many relays is probably harder.
I'm not saying Tor's design is perfect. We are still grappling with
Sybil attack questions, and as you say we need to encourage our users to
employ end-to-end encryption and authentication when appropriate. And
we're still not happy that a widely dispersed attacker can probably do
very well against Tor.
But a central organization that administers all the relays, even if it
puts them in different places geographically, and even if it promises to
do perfect audits and employ only perfect people, aims for a fundamentally
different sort of security than Tor aims to provide. The traffic analysis
attacks above are still just as much of a concern, but insider attacks and
other attacks on/by the organization are now a significant question too.
You can launch a new single-hop proxy service, commercial or not,
proprietary or not. You can also launch a multi-hop service where you
control every hop. And the license of the Tor software lets you use it
if you find it useful for your purposes. But please don't deceive your
users by changing the security context and then encouraging them to think
that just because the Tor software is present somewhere in the picture,
they are benefitting from the type of security that Tor aims to provide.
[1] By "security", I'm talking primarily about unlinkability here;
but that's a different thread.
[2] [3] [4]

@_date: 2007-11-25 08:26:52
@_author: Roger Dingledine 
@_subject: Tor blocking german nodes 
Alas, I fear it's more complex than that. There are two anonymity-related
issues that people here aren't considering enough:
a) Tor's security doesn't come from having any single honest (unobserved)
relay on the path. It comes from the adversary not being able to see
(measure) traffic on both ends of the circuit. See e.g.
So for example if the destination website is in Germany, and it logs all
the packets it sees, then a logging entry relay would be sufficient to
give away the game.
b) If the Tor relay's ISP is logging enough, then it doesn't matter what
the Tor relay itself logs. I'm still hoping to hear an answer to Mike
Perry's question at
Then see If sufficient logging becomes pervasive at the ISP or IX level, then it
would seem that either we'll need to excise those jurisdictions from the
Tor network (and worse, give up on providing anonymity to users there),
or work on anonymity designs that tolerate this level of attack while
still remaining usable.
And that's where the actual definition of "traffic headers" or "traffic
data" becomes critical -- and as I understand it, nobody yet knows
what definitions will be used in practice. So it is premature to start
deploying any alternate designs.
But yes, if it gets to that point, we will be working hard on ways to
avoiding leaving as many tracks in these large central databases. Even
if I entirely trusted the authorities to only use the data in critical
situations, what scares me most is the poor track record of large
organizations at securing huge piles of sensitive data. We don't have
to look very far for stunning examples of data leaks. These extra
requirements like realtime access just make the task even more impossible.
Right. If you would like to start logging early, please instead turn
off your Tor relay.
And if the authorities try to force you to start logging early, please
also turn off your Tor relay, and then find some lawyers to help you
figure out how to notify the world safely.
Good luck!

@_date: 2008-08-21 15:44:21
@_author: Roger Dingledine 
@_subject: Tor 0.2.0.30 is released 
Tor 0.2.0.30 switches to a more efficient directory distribution design,
adds features to make connections to the Tor network harder to block,
allows Tor to act as a DNS proxy, adds separate rate limiting for relayed
traffic to make it easier for clients to become relays, fixes a variety
of potential anonymity problems, and includes the usual huge pile of
other features and bug fixes.
Changes in version 0.2.0.30 - 2008-07-15
  o New v3 directory design:
    - Tor now uses a new way to learn about and distribute information
      about the network: the directory authorities vote on a common
      network status document rather than each publishing their own
      opinion. Now clients and caches download only one networkstatus
      document to bootstrap, rather than downloading one for each
      authority. Clients only download router descriptors listed in
      the consensus. Implements proposal 101; see doc/spec/dir-spec.txt
      for details.
    - Set up moria1, tor26, and dizum as v3 directory authorities
      in addition to being v2 authorities. Also add three new ones:
      ides (run by Mike Perry), gabelmoo (run by Karsten Loesing), and
      dannenberg (run by CCC).
    - Switch to multi-level keys for directory authorities: now their
      long-term identity key can be kept offline, and they periodically
      generate a new signing key. Clients fetch the "key certificates"
      to keep up to date on the right keys. Add a standalone tool
      "tor-gencert" to generate key certificates. Implements proposal 103.
    - Add a new V3AuthUseLegacyKey config option to make it easier for
      v3 authorities to change their identity keys if another bug like
      Debian's OpenSSL RNG flaw appears.
    - Authorities and caches fetch the v2 networkstatus documents
      less often, now that v3 is recommended.
  o Make Tor connections stand out less on the wire:
    - Use an improved TLS handshake designed by Steven Murdoch in proposal
      124, as revised in proposal 130. The new handshake is meant to
      be harder for censors to fingerprint, and it adds the ability
      to detect certain kinds of man-in-the-middle traffic analysis
      attacks. The new handshake format includes version negotiation for
      OR connections as described in proposal 105, which will allow us
      to improve Tor's link protocol more safely in the future.
    - Enable encrypted directory connections by default for non-relays,
      so censor tools that block Tor directory connections based on their
      plaintext patterns will no longer work. This means Tor works in
      certain censored countries by default again.
    - Stop including recognizeable strings in the commonname part of
      Tor's x509 certificates.
  o Implement bridge relays:
    - Bridge relays (or "bridges" for short) are Tor relays that aren't
      listed in the main Tor directory. Since there is no complete public
      list of them, even an ISP that is filtering connections to all the
      known Tor relays probably won't be able to block all the bridges.
      See doc/design-paper/blocking.pdf and proposal 125 for details.
    - New config option BridgeRelay that specifies you want to be a
      bridge relay rather than a normal relay. When BridgeRelay is set
      to 1, then a) you cache dir info even if your DirPort ins't on,
      and b) the default for PublishServerDescriptor is now "bridge"
      rather than "v2,v3".
    - New config option "UseBridges 1" for clients that want to use bridge
      relays instead of ordinary entry guards. Clients then specify
      bridge relays by adding "Bridge" lines to their config file. Users
      can learn about a bridge relay either manually through word of
      mouth, or by one of our rate-limited mechanisms for giving out
      bridge addresses without letting an attacker easily enumerate them
      all. See  for details.
    - Bridge relays behave like clients with respect to time intervals
      for downloading new v3 consensus documents -- otherwise they
      stand out. Bridge users now wait until the end of the interval,
      so their bridge relay will be sure to have a new consensus document.
  o Implement bridge directory authorities:
    - Bridge authorities are like normal directory authorities, except
      they don't serve a list of known bridges. Therefore users that know
      a bridge's fingerprint can fetch a relay descriptor for that bridge,
      including fetching updates e.g. if the bridge changes IP address,
      yet an attacker can't just fetch a list of all the bridges.
    - Set up Tonga as the default bridge directory authority.
    - Bridge authorities refuse to serve bridge descriptors or other
      bridge information over unencrypted connections (that is, when
      responding to direct DirPort requests rather than begin_dir cells.)
    - Bridge directory authorities do reachability testing on the
      bridges they know. They provide router status summaries to the
      controller via "getinfo ns/purpose/bridge", and also dump summaries
      to a file periodically, so we can keep internal stats about which
      bridges are functioning.
    - If bridge users set the UpdateBridgesFromAuthority config option,
      but the digest they ask for is a 404 on the bridge authority,
      they fall back to contacting the bridge directly.
    - Bridges always use begin_dir to publish their server descriptor to
      the bridge authority using an anonymous encrypted tunnel.
    - Early work on a "bridge community" design: if bridge authorities set
      the BridgePassword config option, they will serve a snapshot of
      known bridge routerstatuses from their DirPort to anybody who
      knows that password. Unset by default.
    - Tor now includes an IP-to-country GeoIP file, so bridge relays can
      report sanitized aggregated summaries in their extra-info documents
      privately to the bridge authority, listing which countries are
      able to reach them. We hope this mechanism will let us learn when
      certain countries start trying to block bridges.
    - Bridge authorities write bridge descriptors to disk, so they can
      reload them after a reboot. They can also export the descriptors
      to other programs, so we can distribute them to blocked users via
      the BridgeDB interface, e.g. via       and bridges at torproject.org.
  o Tor can be a DNS proxy:
    - The new client-side DNS proxy feature replaces the need for
      dns-proxy-tor: Just set "DNSPort 9999", and Tor will now listen
      for DNS requests on port 9999, use the Tor network to resolve them
      anonymously, and send the reply back like a regular DNS server.
      The code still only implements a subset of DNS.
    - Add a new AutomapHostsOnResolve option: when it is enabled, any
      resolve request for hosts matching a given pattern causes Tor to
      generate an internal virtual address mapping for that host. This
      allows DNSPort to work sensibly with hidden service users. By
      default, .exit and .onion addresses are remapped; the list of
      patterns can be reconfigured with AutomapHostsSuffixes.
    - Add an "-F" option to tor-resolve to force a resolve for a .onion
      address. Thanks to the AutomapHostsOnResolve option, this is no
      longer a completely silly thing to do.
  o Major features (relay usability):
    - New config options RelayBandwidthRate and RelayBandwidthBurst:
      a separate set of token buckets for relayed traffic. Right now
      relayed traffic is defined as answers to directory requests, and
      OR connections that don't have any local circuits on them. See
      proposal 111 for details.
    - Create listener connections before we setuid to the configured
      User and Group. Now non-Windows users can choose port values
      under 1024, start Tor as root, and have Tor bind those ports
      before it changes to another UID. (Windows users could already
      pick these ports.)
    - Added a new ConstrainedSockets config option to set SO_SNDBUF and
      SO_RCVBUF on TCP sockets. Hopefully useful for Tor servers running
      on "vserver" accounts. Patch from coderman.
  o Major features (directory authorities):
    - Directory authorities track weighted fractional uptime and weighted
      mean-time-between failures for relays. WFU is suitable for deciding
      whether a node is "usually up", while MTBF is suitable for deciding
      whether a node is "likely to stay up." We need both, because
      "usually up" is a good requirement for guards, while "likely to
      stay up" is a good requirement for long-lived connections.
    - Directory authorities use a new formula for selecting which relays
      to advertise as Guards: they must be in the top 7/8 in terms of
      how long we have known about them, and above the median of those
      nodes in terms of weighted fractional uptime.
    - Directory authorities use a new formula for selecting which relays
      to advertise as Stable: when we have 4 or more days of data, use
      median measured MTBF rather than median declared uptime. Implements
      proposal 108.
    - Directory authorities accept and serve "extra info" documents for
      routers. Routers now publish their bandwidth-history lines in the
      extra-info docs rather than the main descriptor. This step saves
      60% (!) on compressed router descriptor downloads. Servers upload
      extra-info docs to any authority that accepts them; directory
      authorities now allow multiple router descriptors and/or extra
      info documents to be uploaded in a single go. Authorities, and
      caches that have been configured to download extra-info documents,
      download them as needed. Implements proposal 104.
    - Authorities now list relays who have the same nickname as
      a different named relay, but list them with a new flag:
      "Unnamed". Now we can make use of relays that happen to pick the
      same nickname as a server that registered two years ago and then
      disappeared. Implements proposal 122.
    - Store routers in a file called cached-descriptors instead of in
      cached-routers. Initialize cached-descriptors from cached-routers
      if the old format is around. The new format allows us to store
      annotations along with descriptors, to record the time we received
      each descriptor, its source, and its purpose: currently one of
      general, controller, or bridge.
  o Major features (other):
    - New config options WarnPlaintextPorts and RejectPlaintextPorts so
      Tor can warn and/or refuse connections to ports commonly used with
      vulnerable-plaintext protocols. Currently we warn on ports 23,
      109, 110, and 143, but we don't reject any. Based on proposal 129
      by Kevin Bauer and Damon McCoy.
    - Integrate Karsten Loesing's Google Summer of Code project to publish
      hidden service descriptors on a set of redundant relays that are a
      function of the hidden service address. Now we don't have to rely
      on three central hidden service authorities for publishing and
      fetching every hidden service descriptor. Implements proposal 114.
    - Allow tunnelled directory connections to ask for an encrypted
      "begin_dir" connection or an anonymized "uses a full Tor circuit"
      connection independently. Now we can make anonymized begin_dir
      connections for (e.g.) more secure hidden service posting and
      fetching.
  o Major bugfixes (crashes and assert failures):
    - Stop imposing an arbitrary maximum on the number of file descriptors
      used for busy servers. Bug reported by Olaf Selke; patch from
      Sebastian Hahn.
    - Avoid possible failures when generating a directory with routers
      with over-long versions strings, or too many flags set.
    - Fix a rare assert error when we're closing one of our threads:
      use a mutex to protect the list of logs, so we never write to the
      list as it's being freed. Fixes the very rare bug 575, which is
      kind of the revenge of bug 222.
    - Avoid segfault in the case where a badly behaved v2 versioning
      directory sends a signed networkstatus with missing client-versions.
    - When we hit an EOF on a log (probably because we're shutting down),
      don't try to remove the log from the list: just mark it as
      unusable. (Bulletproofs against bug 222.)
  o Major bugfixes (code security fixes):
    - Detect size overflow in zlib code. Reported by Justin Ferguson and
      Dan Kaminsky.
    - Rewrite directory tokenization code to never run off the end of
      a string. Fixes bug 455. Patch from croup.
    - Be more paranoid about overwriting sensitive memory on free(),
      as a defensive programming tactic to ensure forward secrecy.
  o Major bugfixes (anonymity fixes):
    - Reject requests for reverse-dns lookup of names that are in
      a private address space. Patch from lodger.
    - Never report that we've used more bandwidth than we're willing to
      relay: it leaks how much non-relay traffic we're using. Resolves
      bug 516.
    - As a client, do not believe any server that tells us that an
      address maps to an internal address space.
    - Warn about unsafe ControlPort configurations.
    - Directory authorities now call routers Fast if their bandwidth is
      at least 100KB/s, and consider their bandwidth adequate to be a
      Guard if it is at least 250KB/s, no matter the medians. This fix
      complements proposal 107.
    - Directory authorities now never mark more than 2 servers per IP as
      Valid and Running (or 5 on addresses shared by authorities).
      Implements proposal 109, by Kevin Bauer and Damon McCoy.
    - If we're a relay, avoid picking ourselves as an introduction point,
      a rendezvous point, or as the final hop for internal circuits. Bug
      reported by taranis and lodger.
    - Exit relays that are used as a client can now reach themselves
      using the .exit notation, rather than just launching an infinite
      pile of circuits. Fixes bug 641. Reported by Sebastian Hahn.
    - Fix a bug where, when we were choosing the 'end stream reason' to
      put in our relay end cell that we send to the exit relay, Tor
      clients on Windows were sometimes sending the wrong 'reason'. The
      anonymity problem is that exit relays may be able to guess whether
      the client is running Windows, thus helping partition the anonymity
      set. Down the road we should stop sending reasons to exit relays,
      or otherwise prevent future versions of this bug.
    - Only update guard status (usable / not usable) once we have
      enough directory information. This was causing us to discard all our
      guards on startup if we hadn't been running for a few weeks. Fixes
      bug 448.
    - When our directory information has been expired for a while, stop
      being willing to build circuits using it. Fixes bug 401.
  o Major bugfixes (peace of mind for relay operators)
    - Non-exit relays no longer answer "resolve" relay cells, so they
      can't be induced to do arbitrary DNS requests. (Tor clients already
      avoid using non-exit relays for resolve cells, but now servers
      enforce this too.) Fixes bug 619. Patch from lodger.
    - When we setconf ClientOnly to 1, close any current OR and Dir
      listeners. Reported by mwenge.
  o Major bugfixes (other):
    - If we only ever used Tor for hidden service lookups or posts, we
      would stop building circuits and start refusing connections after
      24 hours, since we falsely believed that Tor was dormant. Reported
      by nwf.
    - Add a new __HashedControlSessionPassword option for controllers
      to use for one-off session password hashes that shouldn't get
      saved to disk by SAVECONF --- Vidalia users were accumulating a
      pile of HashedControlPassword lines in their torrc files, one for
      each time they had restarted Tor and then clicked Save. Make Tor
      automatically convert "HashedControlPassword" to this new option but
      only when it's given on the command line. Partial fix for bug 586.
    - Patch from "Andrew S. Lists" to catch when we contact a directory
      mirror at IP address X and he says we look like we're coming from
      IP address X. Otherwise this would screw up our address detection.
    - Reject uploaded descriptors and extrainfo documents if they're
      huge. Otherwise we'll cache them all over the network and it'll
      clog everything up. Suggested by Aljosha Judmayer.
    - When a hidden service was trying to establish an introduction point,
      and Tor *did* manage to reuse one of the preemptively built
      circuits, it didn't correctly remember which one it used,
      so it asked for another one soon after, until there were no
      more preemptive circuits, at which point it launched one from
      scratch. Bugfix on 0.0.9.x.
  o Rate limiting and load balancing improvements:
    - When we add data to a write buffer in response to the data on that
      write buffer getting low because of a flush, do not consider the
      newly added data as a candidate for immediate flushing, but rather
      make it wait until the next round of writing. Otherwise, we flush
      and refill recursively, and a single greedy TLS connection can
      eat all of our bandwidth.
    - When counting the number of bytes written on a TLS connection,
      look at the BIO actually used for writing to the network, not
      at the BIO used (sometimes) to buffer data for the network.
      Looking at different BIOs could result in write counts on the
      order of ULONG_MAX. Fixes bug 614.
    - If we change our MaxAdvertisedBandwidth and then reload torrc,
      Tor won't realize it should publish a new relay descriptor. Fixes
      bug 688, reported by mfr.
    - Avoid using too little bandwidth when our clock skips a few seconds.
    - Choose which bridge to use proportional to its advertised bandwidth,
      rather than uniformly at random. This should speed up Tor for
      bridge users. Also do this for people who set StrictEntryNodes.
  o Bootstrapping faster and building circuits more intelligently:
    - Fix bug 660 that was preventing us from knowing that we should
      preemptively build circuits to handle expected directory requests.
    - When we're checking if we have enough dir info for each relay
      to begin establishing circuits, make sure that we actually have
      the descriptor listed in the consensus, not just any descriptor.
    - Correctly notify one-hop connections when a circuit build has
      failed. Possible fix for bug 669. Found by lodger.
    - Clients now hold circuitless TLS connections open for 1.5 times
      MaxCircuitDirtiness (15 minutes), since it is likely that they'll
      rebuild a new circuit over them within that timeframe. Previously,
      they held them open only for KeepalivePeriod (5 minutes).
  o Performance improvements (memory):
    - Add OpenBSD malloc code from "phk" as an optional malloc
      replacement on Linux: some glibc libraries do very poorly with
      Tor's memory allocation patterns. Pass --enable-openbsd-malloc to
      ./configure to get the replacement malloc code.
    - Switch our old ring buffer implementation for one more like that
      used by free Unix kernels. The wasted space in a buffer with 1mb
      of data will now be more like 8k than 1mb. The new implementation
      also avoids realloc();realloc(); patterns that can contribute to
      memory fragmentation.
    - Change the way that Tor buffers data that it is waiting to write.
      Instead of queueing data cells in an enormous ring buffer for each
      client->OR or OR->OR connection, we now queue cells on a separate
      queue for each circuit. This lets us use less slack memory, and
      will eventually let us be smarter about prioritizing different kinds
      of traffic.
    - Reference-count and share copies of address policy entries; only 5%
      of them were actually distinct.
    - Tune parameters for cell pool allocation to minimize amount of
      RAM overhead used.
    - Keep unused 4k and 16k buffers on free lists, rather than wasting 8k
      for every single inactive connection_t. Free items from the
      4k/16k-buffer free lists when they haven't been used for a while.
    - Make memory debugging information describe more about history
      of cell allocation, so we can help reduce our memory use.
    - Be even more aggressive about releasing RAM from small
      empty buffers. Thanks to our free-list code, this shouldn't be too
      performance-intensive.
    - Log malloc statistics from mallinfo() on platforms where it exists.
    - Use memory pools to allocate cells with better speed and memory
      efficiency, especially on platforms where malloc() is inefficient.
    - Add a --with-tcmalloc option to the configure script to link
      against tcmalloc (if present). Does not yet search for non-system
      include paths.
  o Performance improvements (socket management):
    - Count the number of open sockets separately from the number of
      active connection_t objects. This will let us avoid underusing
      our allocated connection limit.
    - We no longer use socket pairs to link an edge connection to an
      anonymous directory connection or a DirPort test connection.
      Instead, we track the link internally and transfer the data
      in-process. This saves two sockets per "linked" connection (at the
      client and at the server), and avoids the nasty Windows socketpair()
      workaround.
    - We were leaking a file descriptor if Tor started with a zero-length
      cached-descriptors file. Patch by "freddy77".
  o Performance improvements (CPU use):
    - Never walk through the list of logs if we know that no log target
      is interested in a given message.
    - Call routerlist_remove_old_routers() much less often. This should
      speed startup, especially on directory caches.
    - Base64 decoding was actually showing up on our profile when parsing
      the initial descriptor file; switch to an in-process all-at-once
      implementation that's about 3.5x times faster than calling out to
      OpenSSL.
    - Use a slightly simpler string hashing algorithm (copying Python's
      instead of Java's) and optimize our digest hashing algorithm to take
      advantage of 64-bit platforms and to remove some possibly-costly
      voodoo.
    - When implementing AES counter mode, update only the portions of the
      counter buffer that need to change, and don't keep separate
      network-order and host-order counters on big-endian hosts (where
      they are the same).
    - Add an in-place version of aes_crypt() so that we can avoid doing a
      needless memcpy() call on each cell payload.
    - Use Critical Sections rather than Mutexes for synchronizing threads
      on win32; Mutexes are heavier-weight, and designed for synchronizing
      between processes.
  o Performance improvements (bandwidth use):
    - Don't try to launch new descriptor downloads quite so often when we
      already have enough directory information to build circuits.
    - Version 1 directories are no longer generated in full. Instead,
      authorities generate and serve "stub" v1 directories that list
      no servers. This will stop Tor versions 0.1.0.x and earlier from
      working, but (for security reasons) nobody should be running those
      versions anyway.
    - Avoid going directly to the directory authorities even if you're a
      relay, if you haven't found yourself reachable yet or if you've
      decided not to advertise your dirport yet. Addresses bug 556.
    - If we've gone 12 hours since our last bandwidth check, and we
      estimate we have less than 50KB bandwidth capacity but we could
      handle more, do another bandwidth test.
    - Support "If-Modified-Since" when answering HTTP requests for
      directories, running-routers documents, and v2 and v3 networkstatus
      documents. (There's no need to support it for router descriptors,
      since those are downloaded by descriptor digest.)
    - Stop fetching directory info so aggressively if your DirPort is
      on but your ORPort is off; stop fetching v2 dir info entirely.
      You can override these choices with the new FetchDirInfoEarly
      config option.
  o Changed config option behavior (features):
    - Configuration files now accept C-style strings as values. This
      helps encode characters not allowed in the current configuration
      file format, such as newline or  Addresses bug 557.
    - Add hidden services and DNSPorts to the list of things that make
      Tor accept that it has running ports. Change starting Tor with no
      ports from a fatal error to a warning; we might change it back if
      this turns out to confuse anybody. Fixes bug 579.
    - Make PublishServerDescriptor default to 1, so the default doesn't
      have to change as we invent new directory protocol versions.
    - Allow people to say PreferTunnelledDirConns rather than
      PreferTunneledDirConns, for those alternate-spellers out there.
    - Raise the default BandwidthRate/BandwidthBurst to 5MB/10MB, to
      accommodate the growing number of servers that use the default
      and are reaching it.
    - Make it possible to enable HashedControlPassword and
      CookieAuthentication at the same time.
    - When a TrackHostExits-chosen exit fails too many times in a row,
      stop using it. Fixes bug 437.
  o Changed config option behavior (bugfixes):
    - Do not read the configuration file when we've only been told to
      generate a password hash. Fixes bug 643. Bugfix on 0.0.9pre5. Fix
      based on patch from Sebastian Hahn.
    - Actually validate the options passed to AuthDirReject,
      AuthDirInvalid, AuthDirBadDir, and AuthDirBadExit.
    - Make "ClientOnly 1" config option disable directory ports too.
    - Don't stop fetching descriptors when FetchUselessDescriptors is
      set, even if we stop asking for circuits. Bug reported by tup
      and ioerror.
    - Servers used to decline to publish their DirPort if their
      BandwidthRate or MaxAdvertisedBandwidth were below a threshold. Now
      they look only at BandwidthRate and RelayBandwidthRate.
    - Treat "2gb" when given in torrc for a bandwidth as meaning 2gb,
      minus 1 byte: the actual maximum declared bandwidth.
    - Make "TrackHostExits ." actually work. Bugfix on 0.1.0.x.
    - Make the NodeFamilies config option work. (Reported by
      lodger -- it has never actually worked, even though we added it
      in Oct 2004.)
    - If Tor is invoked from something that isn't a shell (e.g. Vidalia),
      now we expand "-f ~/.tor/torrc" correctly. Suggested by Matt Edman.
  o New config options:
    - New configuration options AuthDirMaxServersPerAddr and
      AuthDirMaxServersperAuthAddr to override default maximum number
      of servers allowed on a single IP address. This is important for
      running a test network on a single host.
    - Three new config options (AlternateDirAuthority,
      AlternateBridgeAuthority, and AlternateHSAuthority) that let the
      user selectively replace the default directory authorities by type,
      rather than the all-or-nothing replacement that DirServer offers.
    - New config options AuthDirBadDir and AuthDirListBadDirs for
      authorities to mark certain relays as "bad directories" in the
      networkstatus documents. Also supports the "!baddir" directive in
      the approved-routers file.
    - New config option V2AuthoritativeDirectory that all v2 directory
      authorities must set. This lets v3 authorities choose not to serve
      v2 directory information.
  o Minor features (other):
    - When we're not serving v2 directory information, there is no reason
      to actually keep any around. Remove the obsolete files and directory
      on startup if they are very old and we aren't going to serve them.
    - When we negotiate a v2 link-layer connection (not yet implemented),
      accept RELAY_EARLY cells and turn them into RELAY cells if we've
      negotiated a v1 connection for their next step. Initial steps for
      proposal 110.
    - When we have no consensus, check FallbackNetworkstatusFile (defaults
      to $PREFIX/share/tor/fallback-consensus) for a consensus. This way
      we can start out knowing some directory caches. We don't ship with
      a fallback consensus by default though, because it was making
      bootstrapping take too long while we tried many down relays.
    - Authorities send back an X-Descriptor-Not-New header in response to
      an accepted-but-discarded descriptor upload. Partially implements
      fix for bug 535.
    - If we find a cached-routers file that's been sitting around for more
      than 28 days unmodified, then most likely it's a leftover from
      when we upgraded to 0.2.0.8-alpha. Remove it. It has no good
      routers anyway.
    - When we (as a cache) download a descriptor because it was listed
      in a consensus, remember when the consensus was supposed to expire,
      and don't expire the descriptor until then.
    - Optionally (if built with -DEXPORTMALLINFO) export the output
      of mallinfo via http, as tor/mallinfo.txt. Only accessible
      from localhost.
    - Tag every guard node in our state file with the version that
      we believe added it, or with our own version if we add it. This way,
      if a user temporarily runs an old version of Tor and then switches
      back to a new one, she doesn't automatically lose her guards.
    - When somebody requests a list of statuses or servers, and we have
      none of those, return a 404 rather than an empty 200.
    - Merge in some (as-yet-unused) IPv6 address manipulation code. (Patch
      from croup.)
    - Add an HSAuthorityRecordStats option that hidden service authorities
      can use to track statistics of overall hidden service usage without
      logging information that would be as useful to an attacker.
    - Allow multiple HiddenServicePort directives with the same virtual
      port; when they occur, the user is sent round-robin to one
      of the target ports chosen at random.  Partially fixes bug 393 by
      adding limited ad-hoc round-robining.
    - Revamp file-writing logic so we don't need to have the entire
      contents of a file in memory at once before we write to disk. Tor,
      meet stdio.
  o Minor bugfixes (other):
    - Alter the code that tries to recover from unhandled write
      errors, to not try to flush onto a socket that's given us
      unhandled errors.
    - Directory mirrors no longer include a guess at the client's IP
      address if the connection appears to be coming from the same /24
      network; it was producing too many wrong guesses.
    - If we're trying to flush the last bytes on a connection (for
      example, when answering a directory request), reset the
      time-to-give-up timeout every time we manage to write something
      on the socket.
    - Reject router descriptors with out-of-range bandwidthcapacity or
      bandwidthburst values.
    - If we can't expand our list of entry guards (e.g. because we're
      using bridges or we have StrictEntryNodes set), don't mark relays
      down when they fail a directory request. Otherwise we're too quick
      to mark all our entry points down.
    - Authorities no longer send back "400 you're unreachable please fix
      it" errors to Tor servers that aren't online all the time. We're
      supposed to tolerate these servers now.
    - Let directory authorities startup even when they can't generate
      a descriptor immediately, e.g. because they don't know their
      address.
    - Correctly enforce that elements of directory objects do not appear
      more often than they are allowed to appear.
    - Stop allowing hibernating servers to be "stable" or "fast".
    - On Windows, we were preventing other processes from reading
      cached-routers while Tor was running. (Reported by janbar)
    - Check return values from pthread_mutex functions.
    - When opening /dev/null in finish_daemonize(), do not pass the
      O_CREAT flag. Fortify was complaining, and correctly so. Fixes
      bug 742; fix from Michael Scherer. Bugfix on 0.0.2pre19.
  o Controller features:
    - The GETCONF command now escapes and quotes configuration values
      that don't otherwise fit into the torrc file.
    - The SETCONF command now handles quoted values correctly.
    - Add "GETINFO/desc-annotations/id/" so controllers can
      ask about source, timestamp of arrival, purpose, etc. We need
      something like this to help Vidalia not do GeoIP lookups on bridge
      addresses.
    - Allow multiple HashedControlPassword config lines, to support
      multiple controller passwords.
    - Accept LF instead of CRLF on controller, since some software has a
      hard time generating real Internet newlines.
    - Add GETINFO values for the server status events
      "REACHABILITY_SUCCEEDED" and "GOOD_SERVER_DESCRIPTOR". Patch from
      Robert Hogan.
    - There is now an ugly, temporary "desc/all-recent-extrainfo-hack"
      GETINFO for Torstat to use until it can switch to using extrainfos.
    - New config option CookieAuthFile to choose a new location for the
      cookie authentication file, and config option
      CookieAuthFileGroupReadable to make it group-readable.
    - Add a SOURCE_ADDR field to STREAM NEW events so that controllers can
      match requests to applications. Patch from Robert Hogan.
    - Add a RESOLVE command to launch hostname lookups. Original patch
      from Robert Hogan.
    - Add GETINFO status/enough-dir-info to let controllers tell whether
      Tor has downloaded sufficient directory information. Patch from Tup.
    - You can now use the ControlSocket option to tell Tor to listen for
      controller connections on Unix domain sockets on systems that
      support them. Patch from Peter Palfrader.
    - New "GETINFO address-mappings/*" command to get address mappings
      with expiry information. "addr-mappings/*" is now deprecated.
      Patch from Tup.
    - Add a new config option __DisablePredictedCircuits designed for
      use by the controller, when we don't want Tor to build any circuits
      preemptively.
    - Let the controller specify HOP=%d as an argument to ATTACHSTREAM,
      so we can exit from the middle of the circuit.
    - Implement "getinfo status/circuit-established".
    - Implement "getinfo status/version/..." so a controller can tell
      whether the current version is recommended, and whether any versions
      are good, and how many authorities agree. Patch from "shibz".
    - Controllers should now specify cache=no or cache=yes when using
      the +POSTDESCRIPTOR command.
    - Add a "PURPOSE=" argument to "STREAM NEW" events, as suggested by
      Robert Hogan. Fixes the first part of bug 681.
    - When reporting clock skew, and we know that the clock is _at least
      as skewed_ as some value, but we don't know the actual value,
      report the value as a "minimum skew."
  o Controller bugfixes:
    - Generate "STATUS_SERVER" events rather than misspelled
      "STATUS_SEVER" events. Caught by mwenge.
    - Reject controller commands over 1MB in length, so rogue
      processes can't run us out of memory.
    - Change the behavior of "getinfo status/good-server-descriptor"
      so it doesn't return failure when any authority disappears.
    - Send NAMESERVER_STATUS messages for a single failed nameserver
      correctly.
    - When the DANGEROUS_VERSION controller status event told us we're
      running an obsolete version, it used the string "OLD" to describe
      it. Yet the "getinfo" interface used the string "OBSOLETE". Now use
      "OBSOLETE" in both cases.
    - Respond to INT and TERM SIGNAL commands before we execute the
      signal, in case the signal shuts us down. We had a patch in
      0.1.2.1-alpha that tried to do this by queueing the response on
      the connection's buffer before shutting down, but that really
      isn't the same thing at all. Bug located by Matt Edman.
    - Provide DNS expiry times in GMT, not in local time. For backward
      compatibility, ADDRMAP events only provide GMT expiry in an extended
      field. "GETINFO address-mappings" always does the right thing.
    - Use CRLF line endings properly in NS events.
    - Make 'getinfo fingerprint' return a 551 error if we're not a
      server, so we match what the control spec claims we do. Reported
      by daejees.
    - Fix a typo in an error message when extendcircuit fails that
      caused us to not follow the \r\n-based delimiter protocol. Reported
      by daejees.
    - When tunneling an encrypted directory connection, and its first
      circuit fails, do not leave it unattached and ask the controller
      to deal. Fixes the second part of bug 681.
    - Treat some 403 responses from directory servers as INFO rather than
      WARN-severity events.
  o Portability / building / compiling:
    - When building with --enable-gcc-warnings, check for whether Apple's
      warning "-Wshorten-64-to-32" is available.
    - Support compilation to target iPhone; patch from cjacker huang.
      To build for iPhone, pass the --enable-iphone option to configure.
    - Detect non-ASCII platforms (if any still exist) and refuse to
      build there: some of our code assumes that 'A' is 65 and so on.
    - Clear up some MIPSPro compiler warnings.
    - Make autoconf search for libevent, openssl, and zlib consistently.
    - Update deprecated macros in configure.in.
    - When warning about missing headers, tell the user to let us
      know if the compile succeeds anyway, so we can downgrade the
      warning.
    - Include the current subversion revision as part of the version
      string: either fetch it directly if we're in an SVN checkout, do
      some magic to guess it if we're in an SVK checkout, or use
      the last-detected version if we're building from a .tar.gz.
      Use this version consistently in log messages.
    - Correctly report platform name on Windows 95 OSR2 and Windows 98 SE.
    - Read resolv.conf files correctly on platforms where read() returns
      partial results on small file reads.
    - Build without verbose warnings even on gcc 4.2 and 4.3.
    - On Windows, correctly detect errors when listing the contents of
      a directory. Fix from lodger.
    - Run 'make test' as part of 'make dist', so we stop releasing so
      many development snapshots that fail their unit tests.
    - Add support to detect Libevent versions in the 1.4.x series
      on mingw.
    - Add command-line arguments to unit-test executable so that we can
      invoke any chosen test from the command line rather than having
      to run the whole test suite at once; and so that we can turn on
      logging for the unit tests.
    - Do not automatically run configure from autogen.sh. This
      non-standard behavior tended to annoy people who have built other
      programs.
    - Fix a macro/CPP interaction that was confusing some compilers:
      some GCCs don't like  pairs inside macro arguments.
      Fixes bug 707.
    - Fix macro collision between OpenSSL 0.9.8h and Windows headers.
      Fixes bug 704; fix from Steven Murdoch.
    - Correctly detect transparent proxy support on Linux hosts that
      require in.h to be included before netfilter_ipv4.h.  Patch
      from coderman.
  o Logging improvements:
    - When we haven't had any application requests lately, don't bother
      logging that we have expired a bunch of descriptors.
    - When attempting to open a logfile fails, tell us why.
    - Only log guard node status when guard node status has changed.
    - Downgrade the 3 most common "INFO" messages to "DEBUG". This will
      make "INFO" 75% less verbose.
    - When SafeLogging is disabled, log addresses along with all TLS
      errors.
    - Report TLS "zero return" case as a "clean close" and "IO error"
      as a "close". Stop calling closes "unexpected closes": existing
      Tors don't use SSL_close(), so having a connection close without
      the TLS shutdown handshake is hardly unexpected.
    - When we receive a consensus from the future, warn about skew.
    - Make "not enough dir info yet" warnings describe *why* Tor feels
      it doesn't have enough directory info yet.
    - On the USR1 signal, when dmalloc is in use, log the top 10 memory
      consumers. (We already do this on HUP.)
    - Give more descriptive well-formedness errors for out-of-range
      hidden service descriptor/protocol versions.
    - Stop recommending that every server operator send mail to tor-ops.
      Resolves bug 597. Bugfix on 0.1.2.x.
    - Improve skew reporting: try to give the user a better log message
      about how skewed they are, and how much this matters.
    - New --quiet command-line option to suppress the default console log.
      Good in combination with --hash-password.
    - Don't complain that "your server has not managed to confirm that its
      ports are reachable" if we haven't been able to build any circuits
      yet.
    - Detect the reason for failing to mmap a descriptor file we just
      wrote, and give a more useful log message.  Fixes bug 533.
    - Always prepend "Bug: " to any log message about a bug.
    - When dumping memory usage, list bytes used in buffer memory
      free-lists.
    - When running with dmalloc, dump more stats on hup and on exit.
    - Put a platform string (e.g. "Linux i686") in the startup log
      message, so when people paste just their logs, we know if it's
      OpenBSD or Windows or what.
    - When logging memory usage, break down memory used in buffers by
      buffer type.
    - When we are reporting the DirServer line we just parsed, we were
      logging the second stanza of the key fingerprint, not the first.
    - Even though Windows is equally happy with / and \ as path separators,
      try to use \ consistently on Windows and / consistently on Unix: it
      makes the log messages nicer.
     - On OSX, stop warning the user that kqueue support in libevent is
      "experimental", since it seems to have worked fine for ages.
  o Contributed scripts and tools:
    - Update linux-tor-prio.sh script to allow QoS based on the uid of
      the Tor process. Patch from Marco Bonetti with tweaks from Mike
      Perry.
    - Include the "tor-ctrl.sh" bash script by Stefan Behte to provide
      Unix users an easy way to script their Tor process (e.g. by
      adjusting bandwidth based on the time of the day).
    - In the exitlist script, only consider the most recently published
      server descriptor for each server. Also, when the user requests
      a list of servers that _reject_ connections to a given address,
      explicitly exclude the IPs that also have servers that accept
      connections to that address. Resolves bug 405.
    - Include a new contrib/tor-exit-notice.html file that exit relay
      operators can put on their website to help reduce abuse queries.
  o Newly deprecated features:
    - The status/version/num-versioning and status/version/num-concurring
      GETINFO controller options are no longer useful in the v3 directory
      protocol: treat them as deprecated, and warn when they're used.
    - The RedirectExits config option is now deprecated.
  o Removed features:
    - Drop the old code to choke directory connections when the
      corresponding OR connections got full: thanks to the cell queue
      feature, OR conns don't get full any more.
    - Remove the old "dns worker" server DNS code: it hasn't been default
      since 0.1.2.2-alpha, and all the servers are using the new
      eventdns code.
    - Remove the code to generate the oldest (v1) directory format.
    - Remove support for the old bw_accounting file: we've been storing
      bandwidth accounting information in the state file since
      0.1.2.5-alpha. This may result in bandwidth accounting errors
      if you try to upgrade from 0.1.1.x or earlier, or if you try to
      downgrade to 0.1.1.x or earlier.
    - Drop support for OpenSSL version 0.9.6. Just about nobody was using
      it, it had no AES, and it hasn't seen any security patches since
      2004.
    - Stop overloading the circuit_t.onionskin field for both "onionskin
      from a CREATE cell that we are waiting for a cpuworker to be
      assigned" and "onionskin from an EXTEND cell that we are going to
      send to an OR as soon as we are connected". Might help with bug 600.
    - Remove the tor_strpartition() function: its logic was confused,
      and it was only used for one thing that could be implemented far
      more easily.
    - Remove the contrib scripts ExerciseServer.py, PathDemo.py,
      and TorControl.py, as they use the old v0 controller protocol,
      and are obsoleted by TorFlow anyway.
    - Drop support for v1 rendezvous descriptors, since we never used
      them anyway, and the code has probably rotted by now. Based on
      patch from Karsten Loesing.
    - Stop allowing address masks that do not correspond to bit prefixes.
      We have warned about these for a really long time; now it's time
      to reject them. (Patch from croup.)
    - Remove an optimization in the AES counter-mode code that assumed
      that the counter never exceeded 2^68. When the counter can be set
      arbitrarily as an IV (as it is by Karsten's new hidden services
      code), this assumption no longer holds.
    - Disable the SETROUTERPURPOSE controller command: it is now
      obsolete.

@_date: 2008-12-24 18:58:17
@_author: Roger Dingledine 
@_subject: Tor's three-year development roadmap 
Hi folks,
I've finally finished writing up our three-year development roadmap. This
document describes Tor research and development items that should happen
on a three-year timeframe to move Tor forward at being both a useful
circumvention tool and a useful privacy tool:
We've got enough funding to get good starts on many of the items in
the roadmap (more detail on that coming soon), but of course we could
use some more to get even further. So if you know anybody interested in
these topics, please let them know -- and let us know. :)
While The Tor Project makes sure to do a great job at being transparent
in our research and design discussions and outcomes ("how Tor works and
why" from the researcher perspective), we haven't done as good a job
lately at being transparent to our *users* about what we're working on,
what we hope to work on next, who's working on what, etc. Hopefully this
pdf will help change that.
Andrew also produced an actual press release for us, so we can become more
press friendly and provide a way for the media to start a conversation
with us:
You may also be interested to follow the more detailed TODO list I've
been maintaining to help keep all the developers coordinated:

@_date: 2008-01-09 08:14:32
@_author: Roger Dingledine 
@_subject: 24C3: Current events in Tor development 
Hi folks,
My talk at 24C3 in Berlin is now up on the web in various formats.
Basically I gave an overview of some of the big technical things we did
in 2007, some of the policy/legal issues that we're tackling, and some of
the technical things that need to come next. The focus was on Germany,
so it included some discussion of the upcoming data retention problems,
and of the general issue with police in Germany seizing servers.
You can download the high-quality version here:
or watch the low-quality version here:
and the slides are here:

@_date: 2008-10-11 21:46:43
@_author: Roger Dingledine 
@_subject: Thesis: Improving Tor using a TCP-over-DTLS Tunnel 
Hi folks,
Joel Reardon has finished his thesis at U Waterloo under the guidance
of Ian Goldberg. He looked at switching Tor's transport from TCP to
UDP. There are still many unsolved problems before we can do the switch,
but the thesis walks through a lot of the issues as well as future
work. It's definitely worth a look.

@_date: 2008-10-18 16:13:53
@_author: Roger Dingledine 
@_subject: German data rentention law 
The JonDos folks are nice people, but they seem to be taking the approach
"let's work with law enforcement to comply with what they wanted the law
to include." I would rather take the approach "let's figure out how we
can keep Tor users and relay operators as safe as possible even if ISPs
in Germany start logging things."
Talking with law enforcement is generally a good idea, but asking them
for clarification and then believing that's the law may not be such a
good idea.
In my opinion we really have to look at the endpoints of the Tor circuit,
which is where Tor is most vulnerable (via end-to-end correlation
attacks): we are worried about A) an attacker who can watch the Tor user,
or its network connection, or its entry relay; and B) an attacker who
can watch the destination site, or its network connection, or the exit
relay. From that perspective, an attacker who can watch the website
doesn't really care where the exit relay is -- he's already got that
half of the conversation, and if he can combine it with knowing something
about the beginning of the circuit, he wins.
Consider instead my proposal from last week on or-dev:
The basic proposal there is:
1) Never assign the Guard flag to Tor relays in Germany.
2) Maybe, consider starting circuits unpredictably before we want to
attach a stream to them (we already mostly do that, since we build
circuits preemptively), and closing circuits unpredictably after we are
done using them. The idea there is to make the TCP connection logs at
ISPs not correlate with when a given Tor stream started or stopped. I say
"maybe" because it's far from clear that all ISPs will be forced to log
TCP connection start and stop timestamps.
Note that this strategy is designed to make it safe to have Tor relays
running at *ISPs* that log. Even if no German Tor relays log, data
retention poses a serious risk to Tor users if enough ISPs are logging
There will be no such thing as a Tor relay that logs. (If you wish to
run a Tor relay that logs all its connections in a way that's useful
to attackers, please do us the favor of shutting it off instead. If you
find a way to keep logs that are absolutely useless but that you think
will keep the police from hassling you, please talk to us first.)
Idea  above solves this issue: we can take the Guard flag away at the
authorities, so only the directory authorities need to upgrade.
Even if all German Tor relays became non-exit relays, we would still have
the worry that a user visited a German website using a German *entry*
point. According to our research if an attacker manages to get data from
both sides, this appears sufficient for linking the user to the website.
So no, I think that is not a sufficient fix. :)
In any case, I don't want to reach conclusions like "therefore all
German nodes have to stop providing exit service." The law is vague --
so let's fight the law, through lawsuits and other mechanisms, not try
to guess what it might mean and obey that guess.
There *will* be people in Germany who continue to run their Tor relay
(exit or not) and do not log anything. So we need to figure out how to
make successful test cases from the organizations that have the resources
and inclination to defend themselves. (This does mean, though, that
if you're running an exit relay in Germany and you're not comfortable
fighting this law, then you should consider becoming a non-exit in
January until things get more clear.)
There will be much more discussion at 25C3 I hope!

@_date: 2008-09-09 00:17:25
@_author: Roger Dingledine 
@_subject: Tor 0.2.0.31 is released 
Tor 0.2.0.31 addresses two potential anonymity issues, starts to fix
a big bug we're seeing where in rare cases traffic from one Tor stream
gets mixed into another stream, and fixes a variety of smaller issues.
Changes in version 0.2.0.31 - 2008-09-03
  o Major bugfixes:
    - Make sure that two circuits can never exist on the same connection
      with the same circuit ID, even if one is marked for close. This
      is conceivably a bugfix for bug 779. Bugfix on 0.1.0.4-rc.
    - Relays now reject risky extend cells: if the extend cell includes
      a digest of all zeroes, or asks to extend back to the relay that
      sent the extend cell, tear down the circuit. Ideas suggested
      by rovv.
    - If not enough of our entry guards are available so we add a new
      one, we might use the new one even if it overlapped with the
      current circuit's exit relay (or its family). Anonymity bugfix
      pointed out by rovv.
  o Minor bugfixes:
    - Recover 3-7 bytes that were wasted per memory chunk. Fixes bug
      794; bug spotted by rovv. Bugfix on 0.2.0.1-alpha.
    - Correctly detect the presence of the linux/netfilter_ipv4.h header
      when building against recent kernels. Bugfix on 0.1.2.1-alpha.
    - Pick size of default geoip filename string correctly on windows.
      Fixes bug 806. Bugfix on 0.2.0.30.
    - Make the autoconf script accept the obsolete --with-ssl-dir
      option as an alias for the actually-working --with-openssl-dir
      option. Fix the help documentation to recommend --with-openssl-dir.
      Based on a patch by "Dave". Bugfix on 0.2.0.1-alpha.
    - Disallow session resumption attempts during the renegotiation
      stage of the v2 handshake protocol. Clients should never be trying
      session resumption at this point, but apparently some did, in
      ways that caused the handshake to fail. Bug found by Geoff Goodell.
      Bugfix on 0.2.0.20-rc.
    - When using the TransPort option on OpenBSD, and using the User
      option to change UID and drop privileges, make sure to open
      /dev/pf before dropping privileges. Fixes bug 782. Patch from
      Christopher Davis. Bugfix on 0.1.2.1-alpha.
    - Try to attach connections immediately upon receiving a RENDEZVOUS2
      or RENDEZVOUS_ESTABLISHED cell. This can save a second or two
      on the client side when connecting to a hidden service. Bugfix
      on 0.0.6pre1. Found and fixed by Christian Wilms; resolves bug 743.
    - When closing an application-side connection because its circuit is
      getting torn down, generate the stream event correctly. Bugfix on
      0.1.2.x. Anonymous patch.

@_date: 2009-04-14 10:27:46
@_author: Roger Dingledine 
@_subject: Tor 0.2.1.14-rc is out 
Tor 0.2.1.14-rc marks the first release candidate for the 0.2.1.x
series. It begins fixing some major performance problems, and also finally
addresses the bug that was causing relays on dynamic IP addresses to
fall out of the directory.
This is a release candidate! That means that we don't know of any
remaining show-stopping bugs, and this will become the new stable if
there are no problems. Please test it, and tell us about any problems
that you find.
Changes in version 0.2.1.14-rc - 2009-04-12
  o Major features:
    - Clients replace entry guards that were chosen more than a few months
      ago. This change should significantly improve client performance,
      especially once more people upgrade, since relays that have been
      a guard for a long time are currently overloaded.
  o Major bugfixes (on 0.2.0):
    - Finally fix the bug where dynamic-IP relays disappear when their
      IP address changes: directory mirrors were mistakenly telling
      them their old address if they asked via begin_dir, so they
      never got an accurate answer about their new address, so they
      just vanished after a day. For belt-and-suspenders, relays that
      don't set Address in their config now avoid using begin_dir for
      all direct connections. Should fix bugs 827, 883, and 900.
    - Relays were falling out of the networkstatus consensus for
      part of a day if they changed their local config but the
      authorities discarded their new descriptor as "not sufficiently
      different". Now directory authorities accept a descriptor as changed
      if bandwidthrate or bandwidthburst changed. Partial fix for bug 962;
      patch by Sebastian.
    - Avoid crashing in the presence of certain malformed descriptors.
      Found by lark, and by automated fuzzing.
  o Minor features:
    - When generating circuit events with verbose nicknames for
      controllers, try harder to look up nicknames for routers on a
      circuit. (Previously, we would look in the router descriptors we had
      for nicknames, but not in the consensus.) Partial fix for bug 941.
    - If the bridge config line doesn't specify a port, assume 443.
      This makes bridge lines a bit smaller and easier for users to
      understand.
    - Raise the minimum bandwidth to be a relay from 20000 bytes to 20480
      bytes (aka 20KB/s), to match our documentation. Also update
      directory authorities so they always assign the Fast flag to relays
      with 20KB/s of capacity. Now people running relays won't suddenly
      find themselves not seeing any use, if the network gets faster
      on average.
    - Update to the "April 3 2009" ip-to-country file.
  o Minor bugfixes:
    - Avoid trying to print raw memory to the logs when we decide to
      give up on downloading a given relay descriptor. Bugfix on
      0.2.1.9-alpha.
    - In tor-resolve, when the Tor client to use is specified by
      :, actually use the specified port rather than
      defaulting to 9050. Bugfix on 0.2.1.6-alpha.
    - Make directory usage recording work again. Bugfix on 0.2.1.6-alpha.
    - When starting with a cache over a few days old, do not leak
      memory for the obsolete router descriptors in it. Bugfix on
      0.2.0.33.
    - Avoid double-free on list of successfully uploaded hidden
      service discriptors. Fix for bug 948. Bugfix on 0.2.1.6-alpha.
    - Change memarea_strndup() implementation to work even when
      duplicating a string at the end of a page. This bug was
      harmless for now, but could have meant crashes later. Fix by
      lark. Bugfix on 0.2.1.1-alpha.
    - Limit uploaded directory documents to be 16M rather than 500K.
      The directory authorities were refusing v3 consensus votes from
      other authorities, since the votes are now 504K. Fixes bug 959;
      bugfix on 0.0.2pre17 (where we raised it from 50K to 500K ;).
    - Directory authorities should never send a 503 "busy" response to
      requests for votes or keys. Bugfix on 0.2.0.8-alpha; exposed by
      bug 959.

@_date: 2009-06-25 20:24:02
@_author: Roger Dingledine 
@_subject: Tor 0.2.0.35 is released 
Tor 0.2.0.35 fixes a big bug that was causing Tor relays with dynamic
IP addresses to disappear from the network. It also fixes a rare crash
bug on fast exit relays.
Changes in version 0.2.0.35 - 2009-06-24
  o Security fix:
    - Avoid crashing in the presence of certain malformed descriptors.
      Found by lark, and by automated fuzzing.
    - Fix an edge case where a malicious exit relay could convince a
      controller that the client's DNS question resolves to an internal IP
      address. Bug found and fixed by "optimist"; bugfix on 0.1.2.8-beta.
  o Major bugfixes:
    - Finally fix the bug where dynamic-IP relays disappear when their
      IP address changes: directory mirrors were mistakenly telling
      them their old address if they asked via begin_dir, so they
      never got an accurate answer about their new address, so they
      just vanished after a day. For belt-and-suspenders, relays that
      don't set Address in their config now avoid using begin_dir for
      all direct connections. Should fix bugs 827, 883, and 900.
    - Fix a timing-dependent, allocator-dependent, DNS-related crash bug
      that would occur on some exit nodes when DNS failures and timeouts
      occurred in certain patterns. Fix for bug 957.
  o Minor bugfixes:
    - When starting with a cache over a few days old, do not leak
      memory for the obsolete router descriptors in it. Bugfix on
      0.2.0.33; fixes bug 672.
    - Hidden service clients didn't use a cached service descriptor that
      was older than 15 minutes, but wouldn't fetch a new one either,
      because there was already one in the cache. Now, fetch a v2
      descriptor unless the same descriptor was added to the cache within
      the last 15 minutes. Fixes bug 997; reported by Marcus Griep.

@_date: 2009-06-26 10:45:44
@_author: Roger Dingledine 
@_subject: A Few Random Thoughts... 
Sounds great. Let us know if you have any questions or run into any
Depending on how you're installing, you might like the development
version (currently 0.2.1.16-rc). The 0.2.1.x series is going to become
the new "stable" soon (it's already probably more stable in practice
than 0.2.0.35), and it's way better in a number of other ways.
But either 0.2.0.x or 0.2.1.x is fine, really.
That's a really good point.
Especially since a lot of the people who really hate/fear Tor are IT
folks who don't understand it.
Yep. The next step is to come up with some really good clean simple
example sentences for our new category. Those examples will dictate the
title we give it -- "Security experts use Tor", "Sysadmins use Tor",
"Computer experts use Tor", or something else.
If anybody knows good places, please let us know. :) There's a small
list being built here:
Another concern is that if we centralize all the exit relays in a few
places, we reduce the anonymity that the Tor network can provide. But I
don't think we're anywhere near doing that yet, so it's just something
to keep in the back of our minds.
Me too. Don't worry, we won't do it. But see also

@_date: 2009-11-21 22:48:26
@_author: Roger Dingledine 
@_subject: Tor 0.2.2.6-alpha is out 
Tor 0.2.2.6-alpha lays the groundwork for many upcoming features:
support for the new lower-footprint "microdescriptor" directory design,
future-proofing our consensus format against new hash functions or
other changes, and an Android port. It also makes Tor compatible with
the upcoming OpenSSL 0.9.8l release, and fixes a variety of bugs.
Changes in version 0.2.2.6-alpha - 2009-11-19
  o Major features:
    - Directory authorities can now create, vote on, and serve multiple
      parallel formats of directory data as part of their voting process.
      Partially implements Proposal 162: "Publish the consensus in
      multiple flavors".
    - Directory authorities can now agree on and publish small summaries
      of router information that clients can use in place of regular
      server descriptors. This transition will eventually allow clients
      to use far less bandwidth for downloading information about the
      network. Begins the implementation of Proposal 158: "Clients
      download consensus + microdescriptors".
    - The directory voting system is now extensible to use multiple hash
      algorithms for signatures and resource selection. Newer formats
      are signed with SHA256, with a possibility for moving to a better
      hash algorithm in the future.
    - New DisableAllSwap option. If set to 1, Tor will attempt to lock all
      current and future memory pages via mlockall(). On supported
      platforms (modern Linux and probably BSD but not Windows or OS X),
      this should effectively disable any and all attempts to page out
      memory. This option requires that you start your Tor as root --
      if you use DisableAllSwap, please consider using the User option
      to properly reduce the privileges of your Tor.
    - Numerous changes, bugfixes, and workarounds from Nathan Freitas
      to help Tor build correctly for Android phones.
  o Major bugfixes:
    - Work around a security feature in OpenSSL 0.9.8l that prevents our
      handshake from working unless we explicitly tell OpenSSL that we
      are using SSL renegotiation safely. We are, but OpenSSL 0.9.8l
      won't work unless we say we are.
  o Minor bugfixes:
    - Fix a crash bug when trying to initialize the evdns module in
      Libevent 2. Bugfix on 0.2.1.16-rc.
    - Stop logging at severity 'warn' when some other Tor client tries
      to establish a circuit with us using weak DH keys. It's a protocol
      violation, but that doesn't mean ordinary users need to hear about
      it. Fixes the bug part of bug 1114. Bugfix on 0.1.0.13.
    - Do not refuse to learn about authority certs and v2 networkstatus
      documents that are older than the latest consensus. This bug might
      have degraded client bootstrapping. Bugfix on 0.2.0.10-alpha.
      Spotted and fixed by xmux.
    - Fix numerous small code-flaws found by Coverity Scan Rung 3.
    - If all authorities restart at once right before a consensus vote,
      nobody will vote about "Running", and clients will get a consensus
      with no usable relays. Instead, authorities refuse to build a
      consensus if this happens. Bugfix on 0.2.0.10-alpha; fixes bug 1066.
    - If your relay can't keep up with the number of incoming create
      cells, it would log one warning per failure into your logs. Limit
      warnings to 1 per minute. Bugfix on 0.0.2pre10; fixes bug 1042.
    - Bridges now use "reject *:*" as their default exit policy. Bugfix
      on 0.2.0.3-alpha; fixes bug 1113.
    - Fix a memory leak on directory authorities during voting that was
      introduced in 0.2.2.1-alpha. Found via valgrind.

@_date: 2010-07-13 15:51:29
@_author: Roger Dingledine 
@_subject: Tor 0.2.2.14-alpha is out 
Tor 0.2.2.14-alpha greatly improves client-side handling of circuit build
timeouts, which are used to estimate speed and improve performance. We
also move to a much better GeoIP database, port Tor to Windows CE,
introduce new compile flags that improve code security, add an eighth
v3 directory authority, and address a lot of more minor issues.
Packages will be appearing over the next few days or weeks. (We've decided
to start announcing alpha versions when they're released, rather than
waiting for all the packages first.)
Changes in version 0.2.2.14-alpha - 2010-07-12
  o Major bugfixes:
    - Tor directory authorities no longer crash when started with a
      cached-microdesc-consensus file in their data directory. Bugfix
      on 0.2.2.6-alpha; fixes bug 1532.
    - Treat an unset $HOME like an empty $HOME rather than triggering an
      assert. Bugfix on 0.0.8pre1; fixes bug 1522.
    - Ignore negative and large circuit build timeout values that can
      happen during a suspend or hibernate. These values caused various
      asserts to fire. Bugfix on 0.2.2.2-alpha; fixes bug 1245.
    - Alter calculation of Pareto distribution parameter 'Xm' for
      Circuit Build Timeout learning to use the weighted average of the
      top N=3 modes (because we have three entry guards). Considering
      multiple modes should improve the timeout calculation in some cases,
      and prevent extremely high timeout values. Bugfix on 0.2.2.2-alpha;
      fixes bug 1335.
    - Alter calculation of Pareto distribution parameter 'Alpha' to use a
      right censored distribution model. This approach improves over the
      synthetic timeout generation approach that was producing insanely
      high timeout values. Now we calculate build timeouts using truncated
      times. Bugfix on 0.2.2.2-alpha; fixes bugs 1245 and 1335.
    - Do not close circuits that are under construction when they reach
      the circuit build timeout. Instead, leave them building (but do not
      use them) for up until the time corresponding to the 95th percentile
      on the Pareto CDF or 60 seconds, whichever is greater. This is done
      to provide better data for the new Pareto model. This percentile
      can be controlled by the consensus.
  o Major features:
    - Move to the June 2010 Maxmind GeoLite country db (rather than the
      June 2009 ip-to-country GeoIP db) for our statistics that count
      how many users relays are seeing from each country. Now we have
      more accurate data for many African countries.
    - Port Tor to build and run correctly on Windows CE systems, using
      the wcecompat library. Contributed by Valerio Lupi.
    - New "--enable-gcc-hardening" ./configure flag (off by default)
      to turn on gcc compile time hardening options. It ensures
      that signed ints have defined behavior (-fwrapv), enables
      -D_FORTIFY_SOURCE=2 (requiring -O2), adds stack smashing protection
      with canaries (-fstack-protector-all), turns on ASLR protection if
      supported by the kernel (-fPIE, -pie), and adds additional security
      related warnings. Verified to work on Mac OS X and Debian Lenny.
    - New "--enable-linker-hardening" ./configure flag (off by default)
      to turn on ELF specific hardening features (relro, now). This does
      not work with Mac OS X or any other non-ELF binary format.
  o New directory authorities:
    - Set up maatuska (run by Linus Nordberg) as the eighth v3 directory
      authority.
  o Minor features:
    - New config option "WarnUnsafeSocks 0" disables the warning that
      occurs whenever Tor receives only an IP address instead of a
      hostname. Setups that do DNS locally over Tor are fine, and we
      shouldn't spam the logs in that case.
    - Convert the HACKING file to asciidoc, and add a few new sections
      to it, explaining how we use Git, how we make changelogs, and
      what should go in a patch.
    - Add a TIMEOUT_RATE keyword to the BUILDTIMEOUT_SET control port
      event, to give information on the current rate of circuit timeouts
      over our stored history.
    - Add ability to disable circuit build time learning via consensus
      parameter and via a LearnCircuitBuildTimeout config option. Also
      automatically disable circuit build time calculation if we are
      either a AuthoritativeDirectory, or if we fail to write our state
      file. Fixes bug 1296.
    - More gracefully handle corrupt state files, removing asserts
      in favor of saving a backup and resetting state.
    - Rename the "log.h" header to "torlog.h" so as to conflict with fewer
      system headers.
  o Minor bugfixes:
    - Build correctly on OSX with zlib 1.2.4 and higher with all warnings
      enabled.
    - When a2x fails, mention that the user could disable manpages instead
      of trying to fix their asciidoc installation.
    - Where available, use Libevent 2.0's periodic timers so that our
      once-per-second cleanup code gets called even more closely to
      once per second than it would otherwise. Fixes bug 943.
    - If you run a bridge that listens on multiple IP addresses, and
      some user configures a bridge address that uses a different IP
      address than your bridge writes in its router descriptor, and the
      user doesn't specify an identity key, their Tor would discard the
      descriptor because "it isn't one of our configured bridges", and
      fail to bootstrap. Now believe the descriptor and bootstrap anyway.
      Bugfix on 0.2.0.3-alpha.
    - If OpenSSL fails to make a duplicate of a private or public key, log
      an error message and try to exit cleanly. May help with debugging
      if bug 1209 ever remanifests.
    - Save a couple bytes in memory allocation every time we escape
      certain characters in a string. Patch from Florian Zumbiehl.
    - Make it explicit that we don't cannibalize one-hop circuits. This
      happens in the wild, but doesn't turn out to be a problem because
      we fortunately don't use those circuits. Many thanks to outofwords
      for the initial analysis and to swissknife who confirmed that
      two-hop circuits are actually created.
    - Make directory mirrors report non-zero dirreq-v[23]-shares again.
      Fixes bug 1564; bugfix on 0.2.2.9-alpha.
    - Eliminate a case where a circuit build time warning was displayed
      after network connectivity resumed. Bugfix on 0.2.2.2-alpha.

@_date: 2010-11-26 03:27:40
@_author: Roger Dingledine 
@_subject: Tor 0.2.1.27 is released 
Tor 0.2.1.27 makes relays work with OpenSSL 0.9.8p and 1.0.0.b --
yet another OpenSSL security patch broke its compatibility with Tor.
We also took this opportunity to fix several crash bugs, integrate a
new directory authority, and update the bundled GeoIP database.
If you operate a relay, please upgrade.
Changes in version 0.2.1.27 - 2010-11-23
  o Major bugfixes:
    - Resolve an incompatibility with OpenSSL 0.9.8p and OpenSSL 1.0.0b:
      No longer set the tlsext_host_name extension on server SSL objects;
      but continue to set it on client SSL objects. Our goal in setting
      it was to imitate a browser, not a vhosting server. Fixes bug 2204;
      bugfix on 0.2.1.1-alpha.
    - Do not log messages to the controller while shrinking buffer
      freelists. Doing so would sometimes make the controller connection
      try to allocate a buffer chunk, which would mess up the internals
      of the freelist and cause an assertion failure. Fixes bug 1125;
      fixed by Robert Ransom. Bugfix on 0.2.0.16-alpha.
    - Learn our external IP address when we're a relay or bridge, even if
      we set PublishServerDescriptor to 0. Bugfix on 0.2.0.3-alpha,
      where we introduced bridge relays that don't need to publish to
      be useful. Fixes bug 2050.
    - Do even more to reject (and not just ignore) annotations on
      router descriptors received anywhere but from the cache. Previously
      we would ignore such annotations at first, but cache them to disk
      anyway. Bugfix on 0.2.0.8-alpha. Found by piebeer.
    - When you're using bridges and your network goes away and your
      bridges get marked as down, recover when you attempt a new socks
      connection (if the network is back), rather than waiting up to an
      hour to try fetching new descriptors for your bridges. Bugfix on
      0.2.0.3-alpha; fixes bug 1981.
  o Major features:
    - Move to the November 2010 Maxmind GeoLite country db (rather
      than the June 2009 ip-to-country GeoIP db) for our statistics that
      count how many users relays are seeing from each country. Now we'll
      have more accurate data, especially for many African countries.
  o New directory authorities:
    - Set up maatuska (run by Linus Nordberg) as the eighth v3 directory
      authority.
  o Minor bugfixes:
    - Fix an assertion failure that could occur in directory caches or
      bridge users when using a very short voting interval on a testing
      network. Diagnosed by Robert Hogan. Fixes bug 1141; bugfix on
      0.2.0.8-alpha.
    - Enforce multiplicity rules when parsing annotations. Bugfix on
      0.2.0.8-alpha. Found by piebeer.
    - Allow handshaking OR connections to take a full KeepalivePeriod
      seconds to handshake. Previously, we would close them after
      IDLE_OR_CONN_TIMEOUT (180) seconds, the same timeout as if they
      were open. Bugfix on 0.2.1.26; fixes bug 1840. Thanks to mingw-san
      for analysis help.
    - When building with --enable-gcc-warnings on OpenBSD, disable
      warnings in system headers. This makes --enable-gcc-warnings
      pass on OpenBSD 4.8.
  o Minor features:
    - Exit nodes didn't recognize EHOSTUNREACH as a plausible error code,
      and so sent back END_STREAM_REASON_MISC. Clients now recognize a new
      stream ending reason for this case: END_STREAM_REASON_NOROUTE.
      Servers can start sending this code when enough clients recognize
      it. Bugfix on 0.1.0.1-rc; fixes part of bug 1793.
    - Build correctly on mingw with more recent versions of OpenSSL 0.9.8.
      Patch from mingw-san.
  o Removed files:
    - Remove the old debian/ directory from the main Tor distribution.
      The official Tor-for-debian git repository lives at the URL
          - Stop shipping the old doc/website/ directory in the tarball. We
      changed the website format in late 2010, and what we shipped in
      0.2.1.26 really wasn't that useful anyway.

@_date: 2010-09-21 17:56:58
@_author: Roger Dingledine 
@_subject: Tor 0.2.2.16-alpha is out 
Tor 0.2.2.16-alpha fixes a variety of old stream fairness bugs (most
evident at exit relays), and also continues to resolve all the little
bugs that have been filling up trac lately.
Packages will be appearing over the next few days or weeks (except
on Windows, which apparently doesn't build -- stay tuned for an
0.2.2.17-alpha in that case).
Changes in version 0.2.2.16-alpha - 2010-09-17
  o Major bugfixes (stream-level fairness):
    - When receiving a circuit-level SENDME for a blocked circuit, try
      to package cells fairly from all the streams that had previously
      been blocked on that circuit. Previously, we had started with the
      oldest stream, and allowed each stream to potentially exhaust
      the circuit's package window. This gave older streams on any
      given circuit priority over newer ones. Fixes bug 1937. Detected
      originally by Camilo Viecco. This bug was introduced before the
      first Tor release, in svn commit r152: it is the new winner of
      the longest-lived bug prize.
    - When the exit relay got a circuit-level sendme cell, it started
      reading on the exit streams, even if had 500 cells queued in the
      circuit queue already, so the circuit queue just grew and grew in
      some cases. We fix this by not re-enabling reading on receipt of a
      sendme cell when the cell queue is blocked. Fixes bug 1653. Bugfix
      on 0.2.0.1-alpha. Detected by Mashael AlSabah. Original patch by
      "yetonetime".
    - Newly created streams were allowed to read cells onto circuits,
      even if the circuit's cell queue was blocked and waiting to drain.
      This created potential unfairness, as older streams would be
      blocked, but newer streams would gladly fill the queue completely.
      We add code to detect this situation and prevent any stream from
      getting more than one free cell. Bugfix on 0.2.0.1-alpha. Partially
      fixes bug 1298.
  o Minor features:
    - Update to the September 1 2010 Maxmind GeoLite Country database.
    - Warn when CookieAuthFileGroupReadable is set but CookieAuthFile is
      not. This would lead to a cookie that is still not group readable.
      Closes bug 1843. Suggested by katmagic.
    - When logging a rate-limited warning, we now mention how many messages
      got suppressed since the last warning.
    - Add new "perconnbwrate" and "perconnbwburst" consensus params to
      do individual connection-level rate limiting of clients. The torrc
      config options with the same names trump the consensus params, if
      both are present. Replaces the old "bwconnrate" and "bwconnburst"
      consensus params which were broken from 0.2.2.7-alpha through
      0.2.2.14-alpha. Closes bug 1947.
    - When a router changes IP address or port, authorities now launch
      a new reachability test for it. Implements ticket 1899.
    - Make the formerly ugly "2 unknown, 7 missing key, 0 good, 0 bad,
      2 no signature, 4 required" messages about consensus signatures
      easier to read, and make sure they get logged at the same severity
      as the messages explaining which keys are which. Fixes bug 1290.
    - Don't warn when we have a consensus that we can't verify because
      of missing certificates, unless those certificates are ones
      that we have been trying and failing to download. Fixes bug 1145.
    - If you configure your bridge with a known identity fingerprint,
      and the bridge authority is unreachable (as it is in at least
      one country now), fall back to directly requesting the descriptor
      from the bridge. Finishes the feature started in 0.2.0.10-alpha;
      closes bug 1138.
    - When building with --enable-gcc-warnings on OpenBSD, disable
      warnings in system headers. This makes --enable-gcc-warnings
      pass on OpenBSD 4.8.
  o Minor bugfixes (on 0.2.1.x and earlier):
    - Authorities will now attempt to download consensuses if their
      own efforts to make a live consensus have failed. This change
      means authorities that restart will fetch a valid consensus, and
      it means authorities that didn't agree with the current consensus
      will still fetch and serve it if it has enough signatures. Bugfix
      on 0.2.0.9-alpha; fixes bug 1300.
    - Ensure DNS requests launched by "RESOLVE" commands from the
      controller respect the __LeaveStreamsUnattached setconf options. The
      same goes for requests launched via DNSPort or transparent
      proxying. Bugfix on 0.2.0.1-alpha; fixes bug 1525.
    - Allow handshaking OR connections to take a full KeepalivePeriod
      seconds to handshake. Previously, we would close them after
      IDLE_OR_CONN_TIMEOUT (180) seconds, the same timeout as if they
      were open. Bugfix on 0.2.1.26; fixes bug 1840. Thanks to mingw-san
      for analysis help.
    - Rate-limit "Failed to hand off onionskin" warnings.
    - Never relay a cell for a circuit we have already destroyed.
      Between marking a circuit as closeable and finally closing it,
      it may have been possible for a few queued cells to get relayed,
      even though they would have been immediately dropped by the next
      OR in the circuit. Fixes bug 1184; bugfix on 0.2.0.1-alpha.
    - Never queue a cell for a circuit that's already been marked
      for close.
    - Never vote for a server as "Running" if we have a descriptor for
      it claiming to be hibernating, and that descriptor was published
      more recently than our last contact with the server. Bugfix on
      0.2.0.3-alpha; fixes bug 911.
    - Squash a compile warning on OpenBSD. Reported by Tas; fixes
      bug 1848.
  o Minor bugfixes (on 0.2.2.x):
    - Fix a regression introduced in 0.2.2.7-alpha that marked relays
      down if a directory fetch fails and you've configured either
      bridges or EntryNodes. The intent was to mark the relay as down
      _unless_ you're using bridges or EntryNodes, since if you are
      then you could quickly run out of entry points.
    - Fix the Windows directory-listing code. A bug introduced in
      0.2.2.14-alpha could make Windows directory servers forget to load
      some of their cached v2 networkstatus files.
    - Really allow clients to use relays as bridges. Fixes bug 1776;
      bugfix on 0.2.2.15-alpha.
    - Demote a warn to info that happens when the CellStatistics option
      was just enabled. Bugfix on 0.2.2.15-alpha; fixes bug 1921.
      Reported by Moritz Bartl.
    - On Windows, build correctly either with or without Unicode support.
      This is necessary so that Tor can support fringe platforms like
      Windows 98 (which has no Unicode), or Windows CE (which has no
      non-Unicode). Bugfix on 0.2.2.14-alpha; fixes bug 1797.
  o Testing
    - Add a unit test for cross-platform directory-listing code.

@_date: 2011-01-04 08:14:36
@_author: Roger Dingledine 
@_subject: The Skype begin refusing payments making on their site through 
You're missing the diversity of adversaries that various Tor users might
care about.
For example, imagine you're using Tor to prevent a local observer (e.g.
your government-owned ISP) from discovering that you're going to Skype's
payment page.
More generally, there are people who use Tor to ssh to a server somewhere

@_date: 2011-09-01 09:24:54
@_author: Roger Dingledine 
@_subject: [tor-talk] Dutch police break into webservers over hidden services 
Several people have asked us on irc about recent news articles like
Apparently the Dutch police exploited vulnerabilities in the webservers
reachable over the hidden services. Some people are confusing this issue
with an attack on Tor. Tor just transports bytes back and forth. If you
have an instant messaging conversation with a Tor user and convince her
to tell you her address, did you break Tor? Having an http conversation
with a webserver running over a Tor hidden service, and convincing it
to tell you its address, is not much different.
So what lessons can we learn here, other than the usual "criminals
are not as smart as your average bear"? (If only we could count on bad
people to run insecure software, and good people to secure their software
correctly, the world would be a much simpler place.) One lesson is that
there are a lot of non-Tor components that can go wrong in keeping a
hidden service hidden -- just as we have a laundry list of security
and privacy issues to consider when using Tor as a normal client (at
the bottom of  )
there's a whole other set of issues, mostly unexplored, for hidden
service operators to keep in mind:
tor-talk mailing list
tor-talk at lists.torproject.org

@_date: 2011-09-03 04:39:53
@_author: Roger Dingledine 
@_subject: [tor-talk] massive automated bridge requests: why? 
Hi folks,
Over the past few months the number of bridge users has spiked, most
prominently in Italy, but also plenty in Spain, Brazil, Israel, and
I believe it started out with a Tor bundle that somebody made that had
three bridges pre-configured -- we found a torrc file along with an
unofficial Windows Tor bundle. At the beginning, those few bridges had
tens of thousands of users each, and that was it.
Since then, we've seen an enormous spike in automated connections to
 -- more than a million requests an hour.
Now just about every bridge that's given out via the https pool (as
opposed to the gmail pool or the reserve pool) is seeing many many
thousands of users from Italy and these other countries.
It seems clear that somebody's unofficial Tor bundle automatically grabs
some bridges for its users, and that this somebody didn't understand
the notion of being polite to a remote service -- I think each user is
hitting the bridges page roughly every 30 seconds.
We've taken steps to defend the bridgedb service from this overload. And
I can imagine further steps, like finally rolling out a captcha on that
page, to block people from using it like a remote API (which I always
thought was kind of a neat option). Or heck, just moving to a different
URL and abandoning that one.
But the question first is: what's going on? Can those of you near or in
these countries please ask around and try to get some answers?
I don't think it's a censoring adversary trying to collect the list of
bridges. For one, it's way overkill; for another, why use the bridges
I don't think it's malware or some automated botnet that happens to
use bridges -- if it were, we should be seeing spikes in well-connected
countries like Japan.
tor-talk mailing list
tor-talk at lists.torproject.org

@_date: 2012-04-19 23:45:51
@_author: Roger Dingledine 
@_subject: [tor-talk] We're looking for another dedicated core Tor developer 
Your job would be to work on all aspects of the main Tor network daemon
and other open-source software. This would be a contractor position for
2012 (starting as soon as you're ready and with plenty of work to keep
you busy), with the possibility of 2013 and beyond.
Being a core Tor developer includes triaging, diagnosing, and fixing bugs;
looking for and resolving security issues; and working collaboratively
with coworkers and volunteers on implementing new features and protocol
changes at every stage from design to maintenance. We'd also need help
making our code more scalable, testable, and maintainable. Sometimes,
we need to drop everything and scramble to implement last-minute
anticensorship schemes, or to deploy urgent security updates. You'd also
be reviewing other people's code and designs, and looking for ways to
improve it. For an idea of the breadth and depth of the work you'd be
doing, have a look at the ChangeLog file from the Tor source distribution:
See our new jobs page for details:
tor-talk mailing list
tor-talk at lists.torproject.org

@_date: 2012-08-08 05:50:46
@_author: Roger Dingledine 
@_subject: [tor-talk] Roger's status report, July 2012 
Here's what I said at the beginning of July that I hoped to do:
Done. It was a great dev meeting and hack fest -- we had something like
40 Tor developers in one place. How the community has grown!
Thanks again to Gunner for helping us making sure everything went smoothly
and we kept moving forward:
David Fifield gave a fantastic talk on our Flash Proxy design:
I talked to Greg Norcie a lot about Tor Browser usability issues, progress
we've made so far, and what remains to be done:
If we had enough money we should totally be funding research grants for
people like Greg to do further usability analysis. On the other hand, we
have a pile of known problems and not enough developers to actually fix
them -- so accruing *more* known problems, while great, maybe shouldn't
be the most immediate goal.
I should also draw your attention to Yossi Gilad's paper, "Spying in
the Dark: TCP and Tor Traffic Analysis":
It's another in the line of congestion-based traffic analysis papers
(watch Alice's connection into the Tor network, send some packets to the
suspected exit relay and/or destination website to reduce its TCP window,
and then see if the flow on Alice's side slows down). It's unclear how
bad it is in practice (i.e. how practical the attack is), but it's a
nice example of how congestion attacks are not yet fully understood.
The next PETS will be at Indiana University next summer.
The ecrypt workshop was a tough combination of people who already did
Tor research and people who didn't know that Tor doesn't mix. It ended
up being in part a group discussion of Tor's toughest research attacks,
to try to raise awareness of issues rather than suggest solutions.
Done. I met with EFF people for a day (mainly Peter Eckersley, talking
with Mike Perry and Isis about how to salvage our browser situation
in the face of both Firefox and Chrome including new privacy-invasive
features at a faster clip than we can keep up with).
I had lunch with Prateek Mittal, a post-doc at Berkeley who used to be in
Nikita Borisov's lab at Illinois. Prateek is working on Sybil resistance
and social-network-based security -- e.g. routing through your social
network to resist some of the attacks that Tor has problems with.
I also met briefly with Doug Tygar, a Berkeley prof who is working on
evaluating circumvention tools, and with Vern Paxson's group at ICSI,
who are looking into how to reason about pluggable transports and find
ways to do better at the arms race.
I talked to Karsten and Rob about performance work at the dev meeting,
and we moved each ticket forward individually. I haven't had a chance to
sit down and organize them en masse though:
Nickm now has a list of specific Tor development tasks (mostly of the form
"clean up this patch so it's something we'd be willing to merge").
And Rob has been doing simulations on our current patches to help us
decide which ones should actually help:
I helped Mike get the Tor Browser Hacker job description up and announced:
Now we need to get enough applications and interest that we have great
people to select from.
I just added Andrea to the core people page, along with some other
people who have been core people for a while but never made it onto
the page. We continue to have a blurry line between which of our fine
volunteers happens to make it into the core people page. I think we
should probably put more of them on it -- isis and Moritz come to mind,
as well as David Fifield, Philipp Winter, the Tails people, Ian Goldberg,
and others.
All that said, I don't think we've actually done any sort of announcement
or acknowledgement about the core dev spot. Should we?
Tariq, Ian, I, and others ended up adapting the paper into a WPES
submission, which focuses on Tariq's framework for how to answer questions
about bridge churn.
I still think the investigation has uncovered a really interesting
privacy vulnerability: if the Tor client has perfect connectivity, it
will pick three guards, and if one of them goes offline it will continue
in a degraded "two guard" state rather than picking a fourth guard
and risking showing its circuits to a new relay. So far so good. But a
client with bad connectivity will end up with dozens or even hundreds
of guards on its list, and when one of its top three goes away it will
move to a fourth. Somewhere in there it would seem this is suboptimal
behavior. More research required, as they say.
We released 0.2.3.19-rc on 2012-07-06.
I spent much of my second half of July on this topic, including individual
mail threads with many of the fast exit and non-exit relay operators,
to strengthen the community and learn who is in a good position for
growing their relay.
We have several trac tickets following the "diversity metrics" side:
I also talked to Sathya about having him do his undergrad thesis on the
question of measuring and tracking diversity in the Tor network. It would
be great to see more Tor research groups take an interest and give him
some guidance.
Next steps for me on the exit relay front are to hit up my contacts
at universities (Boston University and University of Waterloo run fast
exits, but many more want to if I just help them enough); figure out how
logistically we can get money to the exit relay operators who need it;
and figure out how to integrate Moritz into the "continuing to strengthen
the relay operator community" role.
Not started. Should do rsn.
I talked to Ian Goldberg about it, and got him talking to George (asn)
at PETS. I believe they have a plan, and I think Brandon Wiley (our
gsoc student) is even planning to integrate it into his python pluggable
transport library. Stay tuned for more details.

@_date: 2012-08-21 19:11:07
@_author: Roger Dingledine 
@_subject: [tor-talk] End-to-end correlation for fun and profit 
I think your numbers may not be right (there are a lot of other subtleties
to the calculation), but your point is still generally correct. The Tor
network doesn't have enough diversity relative to an ideal Tor network we
could imagine. Worse, the Internet itself doesn't have as much diversity
as we'd like either.
all examine AS-level path diversity.
See also for another worrying concern about bottlenecks besides ASes. I also
worry about the bottleneck created by trans-ocean cables.
For more details calculating diversity, see
Help appreciated on those tickets!
Really? Across jurisdictions? And for 'all traffic of those relays'?
I don't want to downplay the risk too far, but I think you overestimate
"unsophisticated law enforcement operations".
Well, do you have an alternative design that scales adequately to 6 or
7 figures of users, provides roughly-real-time browsing and other TCP
connections, works on the Internet that we have, and has better traffic
confirmation resistance?
Or said another way, how well do other usable low-latency anonymity
systems hold up to ongoing wiretaps at 25 arbitrary network locations? I
believe the answer is 'mostly less well than Tor'.
tagnaq pointed to my response to a similar question on the tor-relays
talking about the tradeoff between "make it faster but more concentrated"
vs "make it less fast but less concentrated".
It would be interesting to see your stats on as AS level rather than
a /24 netblock level. But the challenge really is that we need to know
what networks the traffic flows traverse upstream -- e.g. how pervasive
a surveiller of Tor traffic could Deutsch Telekom be? This topic goes
back to my earlier blog post:
I think we still do a pretty good job explaining the risks and limitations
of using a system like Tor, e.g. in each Tor talk.
Tor used to print a warning message on start, to explain that it isn't
perfect. But a) no Windows users saw it, and b) it backfired in surprising
ways, like having journalists write "Tor recommends that you use something
else for now, since they're not ready yet":
Thanks for presenting the code too!
tor-talk mailing list
tor-talk at lists.torproject.org

@_date: 2012-07-23 14:58:54
@_author: Roger Dingledine 
@_subject: [tor-relays] Call for discussion: turning funding into more exit 
For a few years now, funders have been asking if they can pay Tor to
run more relays. I kept telling them their money was better spent on
code and design improvements:
since a) network load would just grow to fill whatever new capacity we
have, especially if we don't deal with the tiny fraction of users who
do bulk downloads, and b) reducing diversity of relay operator control
can harm anonymity.
But lately the Tor network has become noticeably faster, and I think it
has a lot to do with the growing amount of excess relay capacity relative
to network load:
At the same time, much of our performance improvement comes from better
load balancing -- that is, concentrating traffic on the relays that can
handle it better. The result though is a direct tradeoff with relay
diversity: on today's network, clients choose one of the fastest 5 exit
relays around 25-30% of the time, and 80% of their choices come from a
pool of 40-50 relays.
Since extra capacity is clearly good for performance, and since we're
not doing particularly well at diversity with the current approach,
we're going to try an experiment: we'll connect funding to exit relay
operators so they can run bigger and/or better exit relays.
If we do it right (make more faster exit relays that aren't the current
biggest ones, so there are more to choose from), we will improve the
network's diversity as well as being able to handle more users.
We've lined up our first funder (BBG, aka and they're excited to have us start as soon as we can. They want to
sponsor 125+ fast exits.

@_date: 2012-06-23 18:20:31
@_author: Roger Dingledine 
@_subject: [tor-talk] Roger's status report, May 2012 
Hi folks!
As the Tor Project has grown in scope, we've been struggling to keep up
with simultaneously a) doing all the development that needs to be done
(including meeting deliverables for our funders), and b) keeping the
community up-to-date on our in-progress work.
Lately I've been writing monthly status summaries, much like what we have
our GSoC students do. In an effort to be more transparent, I'm going to
start sending them to tor-talk rather than just to the other developers.
Note that I will need to omit or anonymize things sometimes -- some
research groups I meet with don't want to announce their paper draft
until it gets accepted at a conference, some funders don't want the
publicity that would come from admitting their interest in Internet
freedom, etc. I'll try to err on the side of sunlight though.
For those here who are totally taken by surprise by this email (and
the fact that Tor does things :), I encourage you to to lurk on the irc
channels if you want to follow along more closely.
And finally, please do ask questions! Here's your chance to understand my
role in Tor and how it fits with what other people are doing. But since
the root of the problem here has been that we do too many things and
don't have time to do more, please focus on your most burning question(s).

@_date: 2012-10-04 17:21:23
@_author: Roger Dingledine 
@_subject: [liberationtech] The Tor Project is looking for a Project 
We have funding for a full-time person. Please spread the word!
A project coordinator is the person who brings order to chaos. You will
coordinate and help track deliverables, progress, and metrics of current
projects. You will also help plan future projects through proposals.
Your impact will involve:
* Deriving deliverables, deadlines, and milestones for each active contract.
* Developing timelines and schedules for completion of milestones and
deliverables for each active, and occasionally proposed, contract.
* Collecting ideas and potential deliverables for the future.
* Raising concerns, timeline slips, and probability of missed deadlines
to management.
* Helping with managing people's schedules, work load, and keeping
various people or teams in communication with one another.
* Tracking deliverable completion.
* Developing and maintaining metrics about project completion rate
and other measures as based on evidence-based project management or
something similar.
* Helping contractors develop their contract deliverables for six month
periods based on expected workload.
* Maintaining project status pages on trac (or whatever system we have)
with deliverables, tickets, and monthly summaries of progress.
* Helping to write the monthly progress reports required for contracts.
See the job posting for information on how to apply and what you need
to send in with your application:
Unsubscribe, change to digest, or change password at:

@_date: 2012-09-07 05:11:58
@_author: Roger Dingledine 
@_subject: [tor-talk] Roger's status report, August 2012 
Here's what I said at the beginning of August that I hoped to do:
Done. FOCI went really well -- we had 30-40 people there, and I think
most of the talks were interesting.
I've attempted to pass the torch to Jed Crandall and Joss Wright
for next year's FOCI. But it looks like there will be some early
stumbling blocks around whether Usenix wants to keep FOCI attached
to Usenix Security. We'll see how that plays out.
I spent much of my Usenix Security talking to research groups about
setting up fast exit relays. See more about that below.
I also talked to George Kadianakis about Tor network diversity metrics,
and got him talking to a wide variety of other researchers for further
I talked to him, but we didn't come to any conclusions. Most of the fixes
are delicate and have poorly understood tradeoffs. I left him with the
plan that he would write a Tor design proposal or two, so we can think
through the implications.
Done. We did a bunch of huge simulations using Amazon EC2, and ended
up finding that mysterious bugs were ruining our results. We decided
to focus on the simplest simulation question, and try to sort out the
bugs. You can read our saga here:
and as of early September, we've found and/or solved some good ones. Hard
to say how many more remain before Shadow can solve all our problems, but
I think we're getting closer.
Continued. You can read some of my discussions at
George suggested that we try to turn them into a survey list of Tor
attacks. Feel free to get that started if you like the idea.
We have a few fast bridges running. The real challenge here will be the
traditional bridge distribution strategy question: we need to give them
out to people who need them without letting the bad guy find them. We're
trying out some not-so-automated strategies first.  I think the handful
of fast stable bridges we have should be enough for now, on the principle
that for any strategy that doesn't tell so many people that the bad guy
learns too, a stable 100mbit bridge can handle all the good users who
learn about it. In parallel we should continue exploring tricks like
Philipp Winter's brdgrd tool:
and maybe later on we'll move on to alternate transports like Obfsproxy.
We've got immediate plans from CMU and Penn that I know of, and promises
from Georgia Tech and Michigan:
Moritz and I wrote up
which has so far been useful.
Steve Bellovin at Columbia suggested that we get EFF to write a letter
that university professors can hand to their general counsel, explaining
what Tor is. I'm still talking to EFF people about what exactly they
could write.
There's also now a tor-relays-universities list as a support group for
people trying to run exit relays at universities:
Not done. I believe Andrew met with Tor's lawyers to discuss how to
position it so that we continue to pass our audits, etc. (Making new
organizational and bureaucratic ways to attack Tor doesn't sound great,
at least not until we understand them better.) I'm hoping to team up
with a couple of other organizations so that we can give them large bulk
grants, and they can divide the money up further. If that should be you,
please let us know!
I'm hoping Moritz can take charge of this topic and make it happen.
I got 0.2.3.20-rc out:
Turns out 0.2.3.21-rc waited until September.
Not done, but done in September.
Done. I'm going to Berlin next week:
Dagstuhl after that:
and ETH Zurich after that to do a talk at Srdjan Capkun's group on
Sept 25.
Still unsorted.
Not yet scheduled. The other PIs are overloaded with other things,
so I guess there's no rush, so long as we're doing useful research things.
He's written the web page, but hasn't announced it or linked it yet. I
guess I'll leave that timing up to him
Done. I even managed to be on vacation for some of it.

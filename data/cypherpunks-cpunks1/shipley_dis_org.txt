
@_date: 1993-02-01 04:30:16
@_author: shipley@dis.org 
@_subject: mh wrappers for pgp. 
# pgpedit V1.0
# Mon Feb  1 04:10:42 PST 1993
# Peter Shipley (shipley at utter.dis.org -or- shipley at berkeley.edu)
# to install (mh instructions)
# place this script in your path (eg ~/bin)
# create few links:
#       ln -s /usr/local/mh/bin/repl ~/bin/pgprepl
#       ln -s /usr/local/mh/bin/comp ~/bin/pgpcomp
# Add the following to your .mh_profile:
#       pgprepl: -editor pgpedit
#       pgpcomp: -editor pgpedit
# To use just use the commands pgprepl or pgpcomp instead of repl or comp
require "sys/wait.ph";
 stuff here
 editor
$pgpcommand="/usr/local/bin/pgp -sta +clearsig=on";
 the arg count
    die "bad argument count" if ($ > 0);
 the umask to something really paranoid
    umask(07177);
 the path if there is not one
    $ENV{'PATH'} = '/bin:/usr/ucp:/usr/bin' unless $ENV{'PATH'};
# get the editor
    if ($ENV{'VISUAL'}) {
    } elsif ($ENV{'EDITOR'}) {
    } else {
    }
    $editor = $defaulteditor if $editor =~ /pgpedit/ ;
# prepare the file.
    &prepfile($ARGV[0]);
# run the editor
    &runeditor($ARGV[0]);
# have pgp sign the file
    &SignMailFile($ARGV[0]);
# the end
    exit 0;
sub SignMailFile {
    local($INPUT) =     local($BODY) = "/tmp/pgp$$.body";
    local($PGPBODY) = "$BODY".".asc";
    print "$INPUT \n" if ($debug);
    open(INPUT, "+>>$INPUT" ) || die "failed to open $INPUT: $!\n";
    seek(INPUT,0, 0);
    open(BODY, "+>$BODY") || die "failed to open $BODY: $!\n";
    select(BODY); $| = 1; select(STDOUT);
    while () {
    }
    print STDERR "$BODY \n" if ($debug);
    while () {
    }
    print STDERR  "$pgpcommand $BODY\n" if ($debug);
    `$pgpcommand $BODY`;
    truncate(BODY, 0); unlink($BODY); close(BODY);
    open(PGPBODY) || die "failed to open $PGPBODY: $!\n";
    truncate(INPUT,$where) || warn "failed to truncate file $FILE: $!\n";
    seek(INPUT,$where,0);
    print INPUT "\n\n";
    print INPUT ;
    truncate(PGPBODY, 0); unlink($PGPBODY); close(PGPBODY);
    return;
sub prepfile {
    local($FILE) =     local(
    open(FILE, "+>>$FILE" ) || die "failed to open $FILE: $!\n";
    seek(FILE, 0, 0);
    while() { push ( $_); last if ( /^--------/ ); }
#	push ( "\n\n\n");
    while() { last if (/^-----BEGIN PGP SIGNED MESSAGE-----/); }
    if( !eof(FILE) ) {
    }
    close(FILE);
    return;
sub runeditor {
    local($file) =     local($pid);
FORK: {
    return;

@_date: 1993-01-31 16:01:44
@_author: shipley@dis.org 
@_subject: party... 
============================== START ==============================
-----BEGIN PGP SIGNED MESSAGE-----
I run a party mailing list if anyone is intrested, anyone holding a party
can email a invite to it the address is "ba-party at utter.dis.org" for
those in Santa Curz there is a mailing list called "party at amory.com"
email me if anyone is intrested ba-party.
PS: henry, I added you to the list already.
PPS: enough of this non-pgp stuff, anyone want to help me setup a remailer

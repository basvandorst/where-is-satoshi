
@_date: 2007-08-27 16:26:06
@_author: Jon McLachlan 
@_subject: Has anyone had the identity revealed in Tor? 
It is trivial for global passive adversaries, like the government or large telcom companies, to link true sources and true destinations of Tor traffic.
Tor aims to provide anonymity against weaker, local adversaries - and even then, adversaries can win, as investigated in these papers.
Or, for a lot of papers on anonymity,
I would bet it happens more often than we'd like to think, as practical low-cost anonymity is still an open problem.

@_date: 2007-05-17 10:33:03
@_author: mcla0181@umn.edu 
@_subject: nighteffect.us gone 
Here's a starting point,
Domain Name: NIGHTEFFECT.US
Domain ID: D11683632-US
Sponsoring Registrar: ABACUS AMERICA, INC. D/B/A NAMES4EVER.COM
Domain Status: ok
Registrant ID: 2BKXK
Registrant Name: Joseph Kowalski
Registrant Address1: Address Withheld
Registrant City: City Withheld
Registrant State/Province: State Withheld
Registrant Postal Code: 00000
Registrant Country: United States
Registrant Country Code: US
Registrant Phone Number: +1.0000000000
Registrant Email: jbk at hush.ai
Registrant Application Purpose: P1
Registrant Nexus Category: C11
Administrative Contact ID: 2BKXK
Administrative Contact Name: Joseph Kowalski
Administrative Contact Address1: Address Withheld
Administrative Contact City: City Withheld
Administrative Contact State/Province: State Withheld
Administrative Contact Postal Code: 00000
Administrative Contact Country: United States
Administrative Contact Country Code: US
Administrative Contact Phone Number: +1.0000000000
Administrative Contact Email: jbk at hush.ai
Administrative Application Purpose: P1
Administrative Nexus Category: C11
Billing Contact ID: 2BKXK
Billing Contact Name: Joseph Kowalski
Billing Contact Address1: Address Withheld
Billing Contact City: City Withheld
Billing Contact State/Province: State Withheld
Billing Contact Postal Code: 00000
Billing Contact Country: United States
Billing Contact Country Code: US
Billing Contact Phone Number: +1.0000000000
Billing Contact Email: jbk at hush.ai
Billing Application Purpose: P1
Billing Nexus Category: C11
Technical Contact ID: 2BKXK
Technical Contact Name: Joseph Kowalski
Technical Contact Address1: Address Withheld
Technical Contact City: City Withheld
Technical Contact State/Province: State Withheld
Technical Contact Postal Code: 00000
Technical Contact Country: United States
Technical Contact Country Code: US
Technical Contact Phone Number: +1.0000000000
Technical Contact Email: jbk at hush.ai
Technical Application Purpose: P1
Technical Nexus Category: C11
Name Server: NS7.ZONEEDIT.COM
Name Server: NS8.ZONEEDIT.COM
Created by Registrar: ABACUS AMERICA, INC. D/B/A NAMES4EVER.COM
Last Updated by Registrar: ABACUS AMERICA, INC. D/B/A NAMES4EVER.COM
Domain Registration Date: Thu Jan 11 17:59:01 GMT 2007
Domain Expiration Date: Tue Jan 10 23:59:59 GMT 2012
Domain Last Updated Date: Thu Jan 11 19:11:35 GMT 2007

@_date: 2008-12-04 10:42:09
@_author: Jon McLachlan 
@_subject: Tor bridges email discovery... 
Hey everyone,
   Is the email based bridge discovery mechanism described here* not  functional?  I've tried from a few valid gmail accounts but have  received no responses.
*

@_date: 2008-02-20 11:02:41
@_author: Jon McLachlan 
@_subject: Tor relay shutted down by ISP 
If you just run a middle node, nothing "that bad" should come spewing out of your box.  I would be curious if you were running an exit node originally, or if it was just a middle node.
In the tor-config file, there's some exit policies -> if you reject *:*, then you're essentially a middle-node, in which everything is both 1) encrypted and 2) between tor-to-tor traffic (which will almost certainly generate no future complaints)....

@_date: 2008-01-04 11:05:32
@_author: Jon McLachlan 
@_subject: (tor + linux).install() 
tor user,
  Thank's for the suggestions.  I actually ended up compiling the tor binary on a different machine with identical architecture, a fully updated Ubuntu machine (complete with the latest versions of openssl / libevent successfully installed), manually inserting the "-static" compiler flag into the Makefile located in tor-dir/src/or.  Then, I took the binary and simply scp'ed it over the this bare-minimum machine.  This trick seemed to successfully eliminate the broken library dependencies.
Best Regards,

@_date: 2008-01-08 14:15:05
@_author: Jon McLachlan 
@_subject: What to do at IP number change? 
I think this depends largely on what type of traffic analysis we're talking about.  Traffic analysis, just looking at traffic, almost always divulges some level of information.  For example, if a local passive adversary simply watched a Tor Relay that was suspected to also contain a Tor Client, then one could imagine a simple traffic analysis as follows:
1)  Establish running totals of all incoming and outgoing traffic from the machine.
2)  Then, closely monitory when it is the case that the outgoing traffic level "spikes" or when the incoming traffic level "spikes" as they could indicate that a Tor Client was using the relay as an entry point.  How much it "spikes" could fingerprint a website ... or even be a maliciously modulated signal from an evil server might you might have connected to via your tunnel.
This exploits the behavior of a basic Tor Relay, in which everything that enters a relay must [immediately] leave that relay.  This traffic alone would generate what appears equal/average incoming and outgoing msgs.  Any spikes in the entering / leaving traffic is therefore probably not from the Tor Relay itself, but, from something else.  (or course, this ignorse dir service lookups, bridges, and prly a few other Sounds like an interesting research project.
Best Regards,

@_date: 2008-01-08 22:32:23
@_author: Jon McLachlan 
@_subject: What to do at IP number change? 
Yeah, I guess I was making synchronized assumptions, haha :).  But, I am having trouble imagining circuit based Tor relay traffic causing "spikes" in the differences between total incoming traffic and total outgoing traffic - since, if there were large discrepancies between these two totals, it would more or less be a kind of measure on your own relay's lag.  In a low-latnecy system, one of the centric goals is to minimize this - and in Tor, I believe several design decisions were based around this.  So, even if things are async, it seems likely that (large, consistent) discrepancies between total incoming/outgoing traffic would prly be due to "other" local traffic that either originates or exits form the relay.  But yes, I was also assuming a strong local passive adversary that is able to distinguish between circuit relay traffic and all other (ignored) network traffic.

@_date: 2008-01-10 19:29:16
@_author: Jon McLachlan 
@_subject: via ControlPort, can we build a circuit to a bridge? 
Referring to the spec  (in 3.10) it seems like we may have the ability to build/extend circuits through specific Tor relays.  The spec seems ambiguous if the defined ServerSpec is specifically a Tor relay and/or Tor bridge.  Reading the Tor bridge spec ( the bridge seems uniquely disjoint from Tor relays, in that bridges publish bridge descriptors to bridge authorities instead of directory servers.  So, what I am wondering is, can ServerSpec (as defined in the control-spec above) be used to reference a known bridge, in the extension of a circuit?
Best Regards,

@_date: 2008-01-11 16:02:28
@_author: Jon McLachlan 
@_subject: Possible attack method?? Question.. 
(please correct me if I'm incorrect but...)
if the adversary controls your entry-guard (which is nearly impossible to detect and considered a 'strong' adversary)
if the adversary controls input to your tunnel (like text in an email, which is easy)
and, if you do not use end to end encryption,
Then, the adversary can perform traffic analysis on the exit node, and the adversary can easily discover your true ip.

@_date: 2008-01-13 00:44:51
@_author: Jon McLachlan 
@_subject: RemoteControl dev trouble (510 Unrecognized command) 
I have been having some trouble with a python based Tor controller.  After setting my local ControlPort in the Tor settings, and connecting, I am able to successfully authenticate, but then I am unable to get Tor to recognize any other commands.
More precisely,
    cx.sendall("authenticate " + pw + "\n\r")
    s = cx.recv(1024)
    print "Tor:", s
produces the response: Tor: 250 OK
But after authentication,
    cmd = "GETINFO version\n\r"
    cx.sendall(cmd)
    s = cx.recv(1024)
    print "Tor: ", s
produces, Tor: 510 Unrecognized command ""
I have also tried other commands, and none seem to be recognized.  The command's case also does not matter.  I have also tried injecting NL characters (chr(0) in python, the ascii character composed of 8 bits of value 0 in binary) before/after the \n\r, after the command (getinfo), after keyword (version).
If anyone has had previous experience, or might think they may know the root of the problem, I would be very grateful for any guidance / advice.
Just FYI for folks, I have been trying to follow the spec:
PS - I have set no cookie or salted hashed password for the auth, but I don't think effect functionality matters.
Best Regards,

@_date: 2008-01-13 08:33:31
@_author: Jon McLachlan 
@_subject: RemoteControl dev trouble (510 Unrecognized command) 
Many thanks!  The correct CRLS in the authentication made all the difference for subsequent cmds.

@_date: 2008-01-16 11:09:57
@_author: Jon McLachlan 
@_subject: via ControlPort, postdescriptor w/ purpose=general fails 
From the contolPort + API, I am able to grab descriptors of or's using,
GETINFO desc/name/[someNickName],
I am then able to parse these descriptors out of the response, and send these descriptors to other onion routers (ones, that are not fetching descriptors from the dirservers).  At these disconnect or's, I attempt to post these descriptors via the controlPort as,
"+POSTDESCRIPTOR purpose=controller cache=no"+CRLF+desc+CRLF+"."+CRLF
"+POSTDESCRIPTOR purpose=general cache=no"+CRLF+desc+CRLF+"."+CRLF
However, when I post the descriptor with the latter (purpose=general), Tor trips an assert on line 3115 in routerlist.c.  It seems to be indicating an error that did not recieve a proper log msg from the "attempted inserting" of the descriptor (the msg is null).  If I set purpose=controller, the posted descriptor is accepted.  My question is two fold:  If a descriptor has purpose=controller, is there documentation somewhere that explains what significance this has on the desc / tunnels constructed through this or?  Secondly, anyone else have this issue or might know of a work around (or cause, maybe)?
As always, any advice or comments would be most appreciated :)
Best Regards,

@_date: 2008-01-17 14:58:53
@_author: Jon McLachlan 
@_subject: attachstream via control port, permission denied? 
Running, version 0.2.0.16-alpha, I am...
1) extend one new tunnel, of length 2 through (1st hop) OR w/ purpose=bridge, (2nd hop) OR w/ purpose=controller
Note, Tor indicates one built circuit of length 2:
250-circuit-status=50 BUILT $[some-hex-value],$[some-other-hex-value]
250 OK
2) connecting to Tor via privoxy with an http request,
Note, Tor indicates a stream-request (unattached):
250-stream-status=27 NEW 0 [some-ip]:[some-port]
250 OK
3)  Attempt to manually attach the stream to the circuit by sending via the controlPort (I've also noticed that it will not automatically attach the stream):
To Tor:  ATTACHSTREAM 27 50
 From Tor:  555 Connection is not managed by controller.
 From these, it almost seems like because the Tor controller did not init the stream, that the attach is rejected.  It doesn't seem like streams have purposes, but do they?  Might I need to set the purpose of the new stream to purpose=controller?  If this is not the case, maybe there is a way that the controller could init a special stream?
As always, any comments or advice would be most valuable and very much appreciated :)
Best Regards,

@_date: 2008-01-18 11:14:10
@_author: Jon McLachlan 
@_subject: attachstream via control port, permission denied? [FIXED] 
Ahh, I have discovered what was causing this issue.  The [ip]:[port] location was a service running on the Exit OR.  I believe setting the configuration variable,
ExitPolicyRejectPrivate 0
fixed the problem reported below.
Best Regards,

@_date: 2008-01-22 16:38:42
@_author: Jon McLachlan 
@_subject: Hostname 
In fact, autonomous system diversity in a Tor circuit is a wonderful thing, for better anonymity against pseudo-global adversaries (such as ISP's).  Then, different ISP's would have to collude to short circuit a Tor tunnel.  Just be careful of those Internet eXchanges, as IX level adversaries can [probabilistically]  short circuit Tor's tunnels.

@_date: 2008-01-23 15:47:42
@_author: Jon McLachlan 
@_subject: quick circuit tear down question 
Hey all,
  Maybe more for developers... but, does anyone know a way to tear down only the last relay on an already constructed anonymous Tor circuit, in such a way that the circuit remains unchanged except for the disappearance of the last hop?  It doesn't seem like this is documented/viable in the ControlPort given the spec @  but maybe someone knows of a neat or hackish trick?  :)  Or maybe future releases of Tor might...
Best Regards,

@_date: 2008-01-30 10:11:30
@_author: Jon McLachlan 
@_subject: bridges.torproject.org certificate 
Just a very small fyi,
It seems the certificate has expired for bridges.torproject.org

@_date: 2008-01-30 10:13:37
@_author: Jon McLachlan 
@_subject: quick circuit tear down question 
Many thanks for the help on understanding the issues and concerns around tearing down an ultimate node on a circuit :)

@_date: 2008-01-30 14:37:03
@_author: Jon McLachlan 
@_subject: Can nickname be duplicate? 
Part of what makes Tor anonymous is a that it has a large # of relays that may or may not be supporting any particular anonymous stream.  When one indefinitely restricts, for instance, the exit relays (or entry relays) that one uses to construct anonymous tunnels, then this does hurt one's anonymity simply because the "cloud" of used relays of what it could have been, is reduced to less than what it could have been.  This is of course assuming that the trust of any particular relay is uniformly distributed over all relays... so, of course if there's a totalitarian censorship somewhere, then yeah, don't trust those relays... otherwise... might not be in the best interest of anonymity...

@_date: 2008-01-02 22:44:49
@_author: Jon McLachlan 
@_subject: (tor + linux).install() 
I have a bare-minimum linux box, much like a planetlab node that I'd like to use to deploy a Tor relay.  In installing Tor, I am having trouble satisfying the dependencies for the latest stable tor linux source tarball (tor-0.1.2.18.tar.gz).  I (believe I) have successfully installed the latest stable version of libevent, version 1.3e (libevent-1.3e.tar.gz).  The "make verify" of the installed libevent library seemed to pass all provided tests.  However, when I run "./configure" in the untared tor-dir, I receive the following error message:
checking for u_int16_t... yes
checking for u_int8_t... yes
checking for libevent directory... (system)
checking whether we need extra options to link libevent... configure: error: Found linkable libevent in (system), but it doesn't run, even with -R.  Maybe specify another using --with-libevent-dir?
Any advice, comments, or suggestions on why this might be happening or how to go about satisfying this dependency would be very much appreciated.
Best Regards,

@_date: 2008-07-28 17:08:48
@_author: Jon McLachlan 
@_subject: circuits, streams, and their attachment 
Hey Everyone,
  Does anyone know why automatic attaching of streams to circuits may fail, aside from the "stale" timeout that is currently on TorCircuits, defaulted at 10 min?  I am using the Tor Controller to construct custom private circuit (with purpose=general, from posted TorDescriptors with their purpose=controller).  Those purpose's settings seemed to be the only way to get the descriptors and circuitExtention calls to work nicely together, AND still achieve automatic stream attachment.  Maybe Tor fails to attached streams to circuit if the circuit appears to be   Also, is there any risk in setting the remote connection host's IP to be 0.0.0.1 in the socks4a headers from the application to the Tor SocksPort?  This way, it forces Tor to do a DNS lookup on the hostname to grab its IP?  Maybe this "hack" is connected with the previous problem?
  I've noticed Tor gives a cute warning msg if the IP is valid but the hostname is absent in the socks4a handshake.  :)
  Are there any statistics (or guestimates? :) ) on how long it should take Tor to extend a circuit by one more additional hop, in a privately controlled environment, ie, not wild?  How about how long for a posted Tor Descriptor (posted from the control port) to become operational?
  Many thanks for any help or comments.
Best Regards,

@_date: 2008-06-20 12:46:24
@_author: Jon McLachlan 
@_subject: light weight proxy 
I am seeking the most light weight proxy to use with Tor, and I am curious if anyone knows of something better than the following:  I am familiar with 2 proxy services that have 4a-socks forward abilities:  privoxy and polipo.  Neither are what I would consider very "light weight," as I'll be running Tor + python scripts + forward/proxy services in an virtual machine environment.  I know socat is very light weight in comparison.  Socat would be ideal, but it has the disadvantage of requiring both (1) the local Tor connection information and (2) the remote host connection information on the command line at startup.  Now (1) is not a problem, but (2) implies that a new instance of socat must be fired up for every new stream to a new endpoint outside of Tor.  It would be ideal to have socat parse out the ip:port of the remote host for (2) just as a typical proxy does, but short from editing socat's source code, I am not sure if this is a possibility.
  Has anyone else run into problems or issues like this that might be willing to nudge me towards a more appropriate approach? :)
Many Thanks,

@_date: 2008-11-10 11:36:12
@_author: Jon McLachlan 
@_subject: Dir servers on private networks 
Hey everyone,
   Our research team is a bit stuck on a problem of bootstrapping  generic Tor on a private network in planetlab.  The two authoritative  directory servers that we are running continuously complain that,
Nov 10 12:22:35.487 [info] router_pick_trusteddirserver(): No trusted  dirservers are reachable. Trying them all again.
Nov 10 12:22:35.487 [info] router_pick_directory_server(): No  reachable router entries for dirservers. Trying them all again.
Nov 10 12:22:35.487 [info] directory_get_from_dirserver(): No router  found for consensus network-status fetch; falling back to dirserver  Nov 10 12:22:35.487 [info] router_pick_trusteddirserver(): No trusted  dirservers are reachable. Trying them all again.
Nov 10 12:22:35.487 [notice] While fetching directory info, no running  dirservers known. Will try again later. (purpose 14)
However, OR's in the network seem to think that they are publishing  their descriptors without any problem.  When we attempt to browse to   into the Dir port of either of the two  authoritative dir servers, it consistently responds with zero content  - we are assuming this is why clients are OR's are not yet  communicating with each other.  We've attempted this setup on both V1  and V2 dir servers.
We have exhausted the specific guidance for running a private Tor  network found here:
Any comments, suggestions, ideas, or guidance would be most  appreciated.  :)

@_date: 2008-11-10 14:33:11
@_author: Jon McLachlan 
@_subject: Dir servers on private networks 
We didn't put the info into the config.c list of auth. dir servers,  because it seems like the torrc options regarding Dirserver will  override the hardcoded entries.  Perhaps this is a false assumption?

@_date: 2008-11-10 14:40:07
@_author: Jon McLachlan 
@_subject: Dir servers on private networks 
OR's are definitely posing their descriptors to the Dir, and the dir  is collecting them, voting on them (V3), and publishing lists of them to
At the same time as the above statement is true, router descriptors  are not being shared, as this dir log msg suggests:
Nov 10 14:39:25.176 [info]  update_consensus_router_descriptor_downloads(): 0 router descriptors  downloadable. 0 delayed; 0 present (0 of those were in old_routers); 0  would_reject; 0 wouldnt_use; 0 in progress.
Maybe there is a way to force downloadablility of OR descriptors on  dir servers instantly?

@_date: 2008-10-16 18:03:13
@_author: Jon McLachlan 
@_subject: Tor Socks4a handshake error? 
Hey everyone,
  This is a long shot, but...
  I'm developing on top of Tor through it's API.  I am running Tor as an OP, and I am continuously being rejected by the socks port during the handshake, returning the SOCKS4a error code 91 (or 0x5b = [generic] request rejected or failed).  The reject occurs after an attempt to connect through a single hop tunnel in planetlab, in which the remote node is a an exit OR servicing the requested address/port.  I am referencing the address in the request with an unresolved domain name (not an IP).  Further, the circuit was extended using the API successfully (circuit status = built or extended, does not seem to matter).
Now comes the strange part:  When I make the OP and OR (by giving it an ORPort), it works.  Any thoughts?
PS - using the tor binary, 0.2.0.15-alpha

@_date: 2008-10-16 18:30:54
@_author: Jon McLachlan 
@_subject: Tor Socks4a handshake error? 
Many thanks for the very prompt and very helpful feedback! :)

@_date: 2009-09-23 11:12:07
@_author: Jon McLachlan 
@_subject: Random chaff [was: more work for Grobbages] 
See below :)
That's something that exists in "that box" over there, not "Tor's  box" ;)
AKA, as little of latency as possible... which is still quite a bit  actually, thank you bittorrent :(
If all clients in the network created Tor circuits of the same length,  all at the same time, wouldn't that mangle that analysis of who's  telescoping circuit-extension request is who's?  I know that's not  what cover traffic does... but if Tor has some sort of "heart beat"  that would make it more difficult to distinguish between which circuit- extension request is who's... that's only feasible because all clients  have a stake in circuits, not the same for external-to-to requests,  like webpages etc etc...
But not necessarily tested in the wild... Even the Bauer et al.  demonstrates those ideas in a fake Tor network, yes, on recommendation  from Tor not to do the experiment in Tor, but still.  And on PL, the  VM environment is particularly prone to latency, so of course timing  analysis attacks will stick out like a sore thumb...
so there might actually be something to deploying that exp on the real  what does that mean?  :)

@_date: 2009-09-09 12:45:04
@_author: Jon McLachlan 
@_subject: The Register article about making online anonymity illegal in  Australia 
I disagree. I'd say that "valuing control" and "seeking freedom" more  accurately describe the actual state of affairs.

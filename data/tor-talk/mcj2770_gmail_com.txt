
@_date: 2013-11-12 14:38:10
@_author: M C J 
@_subject: [tor-talk] FreeBSD PF (firewall) ruleset 
I'm unable to connect to Tor with PF enabled. Without PF, Tor connects and
runs fine (with Privoxy). Soon as PF is enabled, Tor will either disconnect
if already running, or fail to connect if I try.
I've used a very basic pf.conf ruleset:
block in all
pass out all keep state
And had no success. I, assume, I need a redirect rule, maybe something like:
pass in on lo1 proto tcp from lo1 to ath0 port any \
rdr-to 127.0.0.1 port 8118
I really don't know. Maybe some allowances for Privoxy need to be made too?
Tor and Privoxy run perfectly with PF disabled, but I would like an active

@_date: 2013-11-13 01:40:24
@_author: M C J 
@_subject: [tor-talk] 5281E5AD.4080204@gmail.com 
Thanks, Lars! This very simple option made it work. Thank you very much.
Usually loopback is not filtered[1].  You could try adding this ahead of
the above two rules:
  set skip on lo0
If Tor is listening on an external interface, then you should just need
to open that particular port
  pass in quick on $ext_if inet proto tcp to ( $ext_if ) port 8118
Otherwise, try logging blocked packets and see how it is trying to connect.
[1]

@_date: 2013-11-13 01:41:42
@_author: M C J 
@_subject: [tor-talk]  FreeBSD PF (firewall) ruleset 
Thanks, Lars! This very simple option made it work. Thank you very much.

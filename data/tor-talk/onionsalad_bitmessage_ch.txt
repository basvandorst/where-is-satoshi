
@_date: 2016-02-11 08:06:02
@_author: onionsalad 
@_subject: [tor-talk] Isolating transparent proxy 
Hash: SHA512
Hello there,
I'm trying to set up a "isolating transparent proxy" a la Whonix,
where there are a gateway node and a workstation node.
Connected to the internet
 eth0 -- 192.168.27.x
 eth1 -- 192.168.42.1
 eth0 -- 192.168.42.x
* `dig check.torproject.org` on Workstation works.
* `torsocks curl  works and properly
anonymized, of course.
* No non-tor traffic can go out from Workstation. No transparent proxy
means no internet connection, rather than leaks.
Now, I need to allow 'normal' traffic to work using a transparent
proxy, on Workstation, because some programs don't support a proxy (of
any kind) at all. This is not a desktop setup, and stream isolation is
not critical here.
There are tutorials on transparent proxying online, but not for remote
TransPort one. What kind of iptables rules do I need to make this work?
There should be instructions to do so online. I searched through
trac.torproject.org, whonix.org and whonix Github, but I found nothing.
What should happen (on Workstaion):
Try to connect to TCP check.torproject.org:443
- -> Linux captures with iptables
- -> forwarded to 192.168.42.1:9040 (TransPort)
Can anyone help me?

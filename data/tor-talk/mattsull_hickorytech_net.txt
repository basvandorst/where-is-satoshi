
@_date: 2005-06-17 22:08:20
@_author: Matthew Sullivan 
@_subject: (FWD) Re: ISP Cutoff 
In my experience problems with connections dieing after a while are due to
crappy NAT routers.  I have had this problem with a Lucent DSL NAT
Router/modem, and a DLink WiFi router.  The problem seems to be with
excessively small NAT connection tracking tables, and then when the tables
get full, the routers are either unable to purge old connections before they
time-out or do a lousy job of doing so (ie they purge important
My advice would be to setup a Linux or OpenBSD box as router. (I run TOR on
my Linux router).  Either that or get a hardware router that runs Linux such
as the Linksys WRT54G(S) Then set the number of tracked connections to a
very large number such as:
echo "32768" > /proc/sys/net/ipv4/ip_conntrack_max
see: I assume that something similar can be done to *BSD
google for info on messing with the WRT54G (you probably want to use a
custom Firmware of some sort that has SSH)
information: Are you sure it isn't just a stability problem with your router? People
are quick to assume that everybody is out to censor them, when often
nobody is paying attention at all. :)
(The rate limiting option will help with instability problems too.)

@_date: 2005-06-18 00:26:15
@_author: Matthew Sullivan 
@_subject: (FWD) Re: ISP Cutoff 
Probably rate limiting will help, though in my experience with a DI-614+ and
the Lucent, you will still find that the router crashes after a weak or so.
If resetting just the router fixes your internet, it is probably the
Check and make sure you have the latest firmware, it probably won't help,
but it doesn't hurt to try.
The main problem it seems to me is that P2P applications such as TOR
generate incredible numbers of connections, many of which are not properly
closed (because home users computers tend to go off line erratically)
My personal recommendation would be to purchase an old computer, (even a
Pentium 200 will work (I bought one 2 weeks ago for $1USD, try garage sales,
hamfests, etc), though try to get at least 64MB RAM), stick two ethernet
adapters in it, and use it as your router.  With a little fooling around,
the DLink, can be used as just and AP, and Ethernet switch, without routing
(just disable DHCP, and set the LAN address to be something on the network
you setup using the Linux box as the router (not the same address though),
and don't plug anything into the the DLink WAN port)
If you plan on running Tor on your router get something better than a P200
A simpler, though more expensive option would be to buy a Linksys WRT54g and
stick the SveaSoft firmware on it:
Don't buy the firmware from SveaSoft, as they are scum, and should not be
Somewhat more difficult to use, but more flexible and ethical would be the
OpenWRT firmware at Anyhow, google is your friend
Sent: Friday, June 17, 2005 11:08 PM
In my experience problems with connections dieing after a while are due to
crappy NAT routers.  I have had this problem with a Lucent DSL NAT
Router/modem, and a DLink WiFi router.  The problem seems to be with
excessively small NAT connection tracking tables, and then when the tables
get full, the routers are either unable to purge old connections before they
time-out or do a lousy job of doing so (ie they purge important
My advice would be to setup a Linux or OpenBSD box as router. (I run TOR on
my Linux router).  Either that or get a hardware router that runs Linux such
as the Linksys WRT54G(S) Then set the number of tracked connections to a
very large number such as:
echo "32768" > /proc/sys/net/ipv4/ip_conntrack_max
see: I assume that something similar can be done to *BSD google for info on
messing with the WRT54G (you probably want to use a custom Firmware of some
sort that has SSH)
information: Are you sure it isn't just a stability problem with your router? People are
quick to assume that everybody is out to censor them, when often nobody is
paying attention at all. :)
(The rate limiting option will help with instability problems too.)

@_date: 2005-06-18 00:37:51
@_author: Matthew Sullivan 
@_subject: (FWD) Re: ISP Cutoff 
On second thought, maybe a firmware update will help see forinstance:
note that the release notes for version 2.33 say older versions crash after
1000 NAT entries (ouch, at the moment, my linux box says I have greater than
500 tracked connections, and I'm not doing anything.)
So... Try a firmware update first


@_date: 2012-06-02 17:18:06
@_author: Henry Story 
@_subject: [tor-talk] Creating distributed social networks with WebId 
Will do. Currently I am working on getting the main read-write-web application working in Play2.0,
which is a web application framework written in Scala and very good at asynchronous IO...
(scala and akka.io would probably be a very good framework to implement Tor like functionality)
I think this will take me a few more weeks - probably the whole month - to get things working smoothly again.
I'd need to play with Tor a little bit so that I can work out what the core issues are
to get a WebID-type protocol working. I would need to dig into the following:
 A. TLS over Tor
   - the client needs to be able to use Tor URLs encryption so that it  can know that it has    connected to the right server, without using Certificate Authorities of course. [1]        I suppose I should be able to tweak the TLS libs on the java side to be able to     make this trust decision, without too much difficulty....    - once that is done having the server request the client certificate should be great.
 B. Read-Write-Web
    I'd need to look into what writing a bit of RDF using Tor URLs would look like. Perhaps you can
   help here: could you (or anyone else here) develop a simple foaf profile using Tor URLs, and put that    on a server behind Tor, which I could use some Tor enhanced curl to GET?
     If Tor URLs allow for relative URLs (which my httpk:// sketching in mentioned previously [1]   would have done), then one should be able to express the graph like this in Turtle [2]
    foaf:  .
   < a foaf:Person;
      foaf:knows  .
   Given the location the GET was made on, I should be able to turn those relative urls into
   absolute Tor ones, that I could then add to my WebID profile [3] as a link back.    That would of course not be secured, but it would show that the underlying data layer was functional    inside of Tor.
   Just with that I could already enhance my crawlers to crawl Tor based RDF.
[1] I had thought of something similar over a year ago with the httpk scheme.
   [2] [3] Social Web Architect

@_date: 2012-05-15 11:34:43
@_author: Henry Story 
@_subject: [tor-talk] Creating distributed social networks with WebId behind 
Recently in Berlin I was lucky to met Jacob Applebaum at the CCCB as he arrived to talk at the re:publica conference. I had been wondering for some time if it would be possible to use WebID for distributed social networks using linked data behind Tor, but I had not yet had time to make it a priority . From the discussion with Jacob, it seems like this should be feasible, and indeed relatively easy, but of course only real implementations can tell.
   Here of course a bit of background on WebId is needed (  ). There are a number of ways of thinking of WebID. At one level it is an application of mathematical logic and web architecture to the  problem of identity. At another it is a philosophical hack of TLS, whose effect is to shift the Trust in TLS from a hierarchical system into a web of trust.     To understand its power one has to understand LinkedData and RESTful web services. But those are in fact exceedingly easy: REST is easy and well known, and LinkedData is just the idea that one applies the concept of hypertext to data - indeed some have called it hyperdata. Hyperdata allows one to create distributed social networks, the same way we have created the world wide web - allowing each individual person or organisation to control access to their data (web site). Place the web site behind Tor, use .onion URLs and you now have a web site - as I understand it - that can't be located by IP address. Place your (linked-)data behind tor, use .onion URLs and you should be able to publish data without anyone knowing where the server is. This of course creates issues of trust, and this is where distributed Social Networks can help.
  In order to understand distributed social networks built using LinkedData it helps not to start with TOR. Indeed
it helps to start without TLS, and just use plain HTTP. This way we have been able to create distributed social networks
with millions of users using the foaf (friend of a friend) ontology. ( I go into how that works in detail in a presentation
"Philosophy of the Social Web"  ). But of course that does not address the serious issues of privacy. So this lead me to add a layer around http with TLS and use client side certificates to identify people in a distributed social web that can use access control to limit who can see what. ( the  has a diagram that makes that clear ). But TLS with WebID still reveals the users IP address. So this is where we should be able add another layer to our onion: Tor.   All we need are Tor onion URIs. Place an onion URI for your profile in your X509 certificate and you should now be able to authenticate to any web site without the server you are authenticating to knowing where your identity Profile is located. If that server wishes to know more about you than your public key, your server can let it know as much or as little as you wish it to know by requiring it to authenticate with WebID and then calculating its position in your web of trust. (WebID is a recursive protocol). In such a social web you can allow your friends to post to your wall, and you can interact happily as if you were on Facebook, but with no big brother in the loop. Anyone else will just see your onion URL and a public key.
 There is a short screen cast showing how this works with current browsers at  .
 So how does one proceed to test this out? I think there are a 3 stages, of increasing complexity
 1. build a foaf social web behind Tor
   Instead of links such as the following ( which you can find in my foaf-profile at  )
    foaf:  .
    a foaf:Person;
                foaf:knows   .
   you need to write the above using .onion URIs and make those publicly available on the tor network. It should be possible to follow the links from one profile to another, deference the second url and get more information... using well known LinkedData principles. It is best if those files are on different machines to make it real.
 2. if the above works then you can add your X509 public key to your profile as explained in the    cert:key [ cert:modulus "...."^^xsd:hexBinary; cert:exponent 65537 ] .
 2.1 then create a service behind tor that authenticates users with X509 WebId certificates with .onion urls and see if you can log in there.
 If the above can be done, then adding access control is just one more step that is relatively easy. I am currently building a server in Scala that can do this type of work very efficiently, but there are others who
have done it already in php/python and C# .
 Currently I am focusing on building the server with access control using plain https without Tor. If I am right in believing the above to be workable, then it should be quite easy to add Tor to such a server. Jacob suggested I look at JTor, as I am working in the Java ecosystem  . But perhaps others will want to explore some of this before I get around to doing it, or indeed perhaps there are some Scala/Java people who are interested in working with me on this a bit more closely (so we can move faster).
  I hope that helps and would be interested in your feedback,
Social Web Architect

@_date: 2012-05-15 22:32:42
@_author: Henry Story 
@_subject: [tor-talk] Creating distributed social networks with WebId 
Yes, this is a point worth exploring. The advantage of https for
WebId is that the TLS protocol comes with the tools for the server
to ask for a client certificate, and that this is built into all browsers (desktop ones at least). It is also very useful for robots
since they can then do work on behalf of the user, and authenticate
as themselves or as the user they are working for, without one needing to develop a login protocol.
Does Tor have its own method for the server to request the client
certificate too? Then one could apply the webid principles to that
protocol too.
If the issue is minimising the number of encryption layers needed then
servers behind TOR could negotiate the null encryption layer. Clearly
that would have its own issues. There may be other ways to do this...
I am working with the initial assumption that we would have our own
freedom boxes. Would that address this point, or have I misunderstood it?
Yes, that would be possible with a freedom box. I am assuming that in this
set up as it simplifies the architecture at this point. Social Web Architect

@_date: 2012-05-16 12:18:42
@_author: Henry Story 
@_subject: [tor-talk] Creating distributed social networks with WebId 
It is also possible to imagine that the server you use ends up being the
one hosting your profile, in which case necessarily the server you use would
always be on when using it. I think those are things one can push back to later research, as it is impossible
to consider all interesting ideas simultaneously. My interest is at present to
see if I can use WebID behind Tor with onion urls. Social Web Architect

@_date: 2012-05-16 17:41:49
@_author: Henry Story 
@_subject: [tor-talk] Encryption on Http 
I suppose you are speaking to me, and my proposal of doing WebID with onion urls.
(using the protocol described at  )
We know how to do WebID with SSL, but not yet how to do it with Tor encryption. Perhaps the same technique could be applied to Tor encryption too (I don't know
how Tor works in detail, so I can't tell yet).
Thinking about this I can now see that one issue with using WebID+TLS with Tor encryption: namely how to the client can authenticate the server with TLS. When we are not dealing with Tor, we can rely on Certificate Authorities (not an ideal solution, but one that allows us to get going, that works in most browsers,
and that is satisfactory for business, that need legal backing anyway to operate), or in the future with  IETF's DANE (  )
I don't think either of these would work with Tor though. A year ago, when thinking
about how one could do WebID without using DNS, I came up with an httpk scheme on the
FreedomBox mailing list   This was before I had heard of Tor. The idea was that one could have urls of the form
  httpk://ash12sdfs19kd3/my/foaf
where the public key would be part of the URL ( ash12sdfs19kd3 above) and
that this could then be used by a modified TLS client to verify the authenticity of the server it had connected to. Of course this won't be
something that is part of the browser at this point, but it could be part
of the FreedomBox stack, and we could use our freedombox to interact with
other FreedbomBoxes using this protocol. httpk does not seem very far
from onion urls (but I don't know exactly how onion urls work - any good   If onion urls work like my suggested httpk scheme, then perhaps there
is something that can be done at that level.
I think that if https is forbidden, then Tor is forbidden too. A country where
encryption is forbidden will of course quickly loose its ability to compete
in the internet world, as they won't be able to keep secrets from their enemies/
I think the problem with https is at a different layer as explained above: the client
has to be able to authenticate the server somehow. Tor does this. So the question
is can we use something in Tor to do what client certificates do in TLS?
Social Web Architect

@_date: 2014-03-14 07:10:57
@_author: henry.story@bblfish.net 
@_subject: [tor-talk] X509 S/MIME certificate. Was: Another fake key for 
Completely agree, except that I think one can do better with ClientCertificates
by using WebID  . These allow one to create certificates
witout even needing a CA at all (given DNS-SEC and DANE )( We just released a new more modular spec at the W3C for that )
I am developing an implementation of WebID+TLS+LDP+WebAccessControl in a small
company  . Some available info:
 ? git wiki  ? main git repo: This currently does not use TOR, but it should not be too difficult to add. We are just doing the "simple" things first.
Btw. there was an interesting thread on the TLS mailing list recently on an improvement for TLS1.3   For those of you who are really good at crypto, please follow up on those.
Much more info on  on these protocols.
All the best,
Social Web Architect

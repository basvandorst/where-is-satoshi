
@_date: 2012-12-18 20:43:03
@_author: David Fifield 
@_subject: [tor-talk] Pluggable Transports metrics? 
I don't have this data in an automated way, but I was able to construct
a graph from the facilitator log. (The facilitator logs when a proxy
connects to it, but not the IP address, so this might be counting some
Over the last three months it looks like we usually have between 20 and
40 proxies.
I too would like to be able to see this information in closer to real
time. The facilitator could accept a command to print the average number
of proxies over the last 24 hours, for example.
The facilitator code is not very complicated; maybe someone can make a
patch? It could be a new command like COUNT.
David Fifield

@_date: 2012-11-10 15:00:58
@_author: David Fifield 
@_subject: [tor-talk] Slides about the Tor Project and the Flash Proxy 
This is quite an impressive summary of the technology involved. The
blocking of port 25, preventing flashproxy-reg-email from working, is a
real issue. I've started making usability notes here:
You marked some question in red circles, so I will answer them.
Flash proxies are not going to give you better anonymity. You are
basically in the same situation as someone having to use a bridge, in
that your first hop is always the same, except that there is
additionally a flash proxy in front of that first hop. Here is a ticket
about the use of dumb proxies (like flash proxies) instead of Tor relays
as bridges:
That is correct. We are using a third-party WebSocket proxy called
websockify:  But there is a ticket
to make our own implementation, so it can work as a managed proxy and
provide better metrics.
Allowing the client to choose the entry relay would require some
meta-protocol like SOCKS to happen inside the flash proxy, which would
also mean that the client has to somehow embed an address in its
communication with the flash proxy, which increases fingerprintability.
Additionally, we don't want to allow a malicious client to connect
someone's browser to an arbitrary address. The flash proxy JavaScript
takes its orders of what relay to use from the facilitator. The
facilitator only hands out Tor relays supporting the websocket
The client doesn't know the address and port of the server transport
plugin. The flash proxy learns that information from the facilitator,
and the client gets connected to wherever the flash proxy connects.
Remember that the client transport plugin doesn't actually "connect" to
anything; it only receives connections from outside (from flash
proxies), and doesn't control where those connections come from. You
give an address in the Bridge line only because the protocol requires
it. It is a fake address (0.0.1.0:1) and is not used.
David Fifield

@_date: 2012-10-06 10:36:53
@_author: David Fifield 
@_subject: [tor-talk] Flashproxy questions. (Badge config, 
I think this section should have been written differently; it is
misleading because it wasn't kept up to date with development. (You can
tell by how it refers to a "Flash object," when by the time it was
published we had moved completely to JavaScript.) The proxy badge
doesn't have code to do these things, apart from the mobile device
detection. About geographic limitations, I think it was an idea that
didn't get implemented. Opt-in vs. opt-out should be a default supported
option, though.
I think we should add a default opt-in option, even if it is just a
parameter to the embed.html that participating sites can activate on an
individual basis. The fact of default opt-out is the thing that bothers
me personally the most about the system, and other thoughtful people
have told me the same thing. If there are enough participants, then
perhaps we can just make it opt-in across the board.
What this means is that the JavaScript would run, but not actually do
anything until clicked.
Either the proxy or the facilitator could use a geoip database, I think
is what we were thinking. I agree that this feature is not necessary and
I don't think it's a good fit for the deployment that exists now.
It's going to create two independent proxies. It doesn't break anything,
but each one will have its own bandwidth and connection limits. The
facilitator, though, could refuse to give too many clients to one proxy
IP address. (The deployed facilitator doesn't do this but a branch under
development will; see ticket
It breaks existing connections. However, it hardly matters, because the
system is designed to deal with proxies going offline all the time.
Each tab is only going to load the embed code once, which is a few
kilobytes of HTML and JavaScript, and even then your browser is going to
cache all of them but the first, so connections to crypto.stanford.edu
are not a problem. The bigger concern is load on the facilitator,
because it answers polling requests while each proxy is running. There
are some easy solutions if the facilitator load becomes too great, the
first of which is to increase the polling interval and the second is to
deploy more facilitators, so I'm not too worried about this.
Each one is an independent proxy, possibly subject to
facilitator-imposed restrictions. The proxy should disable itself when
running in TBB but does not, because I don't know how to detect that;
see ticket Nice questions, please keep them coming.
David Fifield

@_date: 2012-10-07 08:06:22
@_author: David Fifield 
@_subject: [tor-talk] Flashproxy questions. (Badge config, 
This is what I am thinking. Something like
The query parameters are easier to handle from a code point of view. The
way it works now is cookierequired=false. With cookierequired=true,
clicking on the badge will bring up a yes/no dialog, and set a cookie if
yes. I think it's reasonable for the cookie to grant permission across
all web sites.
David Fifield

@_date: 2012-10-13 01:58:24
@_author: David Fifield 
@_subject: [tor-talk] Flashproxy bridge operators and proxy provider 
I don't quite understand your question, but I think it might be
confusion of terminology. When someone is viewing a flash proxy badge,
their browser starts running a "flash proxy" and we sometimes refer to
the browser user as a flash proxy "operator," even though they're not
doing any technical "operation" like the owner of a Tor relay does.
We deliberately decided not to use the term "bridge" with flash proxies,
to avoid confusion with actual Tor bridges, which are full-fledged
relays that do TLS and everything. Flash proxies just copy bytes from
one address to another.
Flash proxies can only connect to relays that support the websocket
pluggable transport (
There is only one of these that I know of, tor1.bamsoftware.com:9901
which I run, though there is a section "How to run a relay" in the
README so you could run your own.
So what I think you are asking is, if you were to run a Tor relay with
the websocket transport, on your home Internet connection, say, and also
simultaneously acted as a JavaScript flash proxy from the same IP
address, would there be a problem? First, nothing would happen
immediately because it is a manual process to add a new relay address to
the facilitator; you would have to tell us about it. But suppose the
facilitator automatically got a list of websocket relays from BridgeDB.
I don't think there is a problem doing both from the same IP address,
but our threat model assumes that a censor will block any long-running
bridge at a static IP address. So your IP address might get blocked by a
censor not because you are a flash proxy, but because you are a Tor
relay. For example, if I were to somehow run a browser from
tor1.bamsoftware.com, we wouldn't expect it to be reachable, because we
would expect the censor to already have blocked that bridge.
David Fifield

@_date: 2012-10-13 02:18:04
@_author: David Fifield 
@_subject: [tor-talk] Flashproxys' impact on Tors' fingerprint 
No, using a flash proxy doesn't in principle make protocol detection any
harder. We just encode the TLS byte stream and package it within a
WebSocket stream. A filter could unpack the WebSocket stuff, reassemble
the inside stream, and reuse whatever traffic inspection it is already
using to block Tor.
A few things work in our favor in terms of making it more cumbersome to
fingerprint traffic within a WebSocket stream:
As I see it, there are two axes to censorship circumvention, which are
IP/port blocking, and protocol inspection. obfsproxy, for example, aims
to defeat protocol inspection, but still uses a relatively small,
relatively static set of obfsproxy bridges. Flash proxies have the
opposite problem: flash proxy addresses are hard to block because they
change all the time, but they don't do anything to disguise the traffic
A combined solution to both problems would be very nice. For example, we
could use obfsproxy-style obfuscation inside of the WebSocket stream. We
can't, ultimately, disguise the fact that the outermost layer is
WebSocket, but we can disguise the payloads. To do such a thing is not
conceptually difficult, it just requires a proposal, and someone willing
to do it, and deployment of code to the necessary places.
Unfortunately, though TLS-wrapped WebSocket is standard, we can't easily
use it because the clients that the flash proxy connects to do not have
CA-issued certs.
I don't really know the range of things WebSocket is used for. One cool
application I've seen is this:  which is
a VNC client that uses WebSocket and HTML canvas.
David Fifield

@_date: 2012-10-14 09:44:46
@_author: David Fifield 
@_subject: [tor-talk] Flashproxys' impact on Tors' fingerprint 
Thank you for your reply. I think you have a misunderstanding of how the
system works. Check the client doesn't connect to the proxy; rather the proxy connects to
the client. We don't have control of certificate verification--that's
built into the browsers running the proxies. Every censored client would
need a CA cert recognized by the major browsers, and a domain to attach
it to.
For example, the flash proxy JavaScript contacts the facilitator and
gets back a reply stating "your relay is "relay.example.com:9901 and
your client is 1.2.3.4:9000." The JavaScript opens two WebSockets:
For the first of these, we actually could use TLS (using a wss:// URL
rather than ws://) between the proxy and the relay. It would cost the
relay operators money, and it's also kind of pointless, because the
proxy?relay path is not the one being censored. It's the path between
the proxy and 1.2.3.4 what we want to obfuscate. As far as I know there's
no way from JavaScript to say, "don't do certificate verification for
this one WebSocket connection."
If we had full control of all participants in the communication, we
could of course do all sorts of fancy things, but we're limited on the
proxy to what we can do in JavaScript.
David Fifield

@_date: 2013-04-09 14:05:32
@_author: David Fifield 
@_subject: [tor-talk] How to use flashproxy-reg-url 
The latest pluggable transports bundles and flashproxy source releases
contain a new rendezvous program called flashproxy-reg-url. Like
flashproxy-reg-email, which is the default, it provides a covert way to
send your address so that you can receive a connection from a flash
proxy. Unlike flashproxy-reg-email, it is still experimental and doesn't
work out of the box: you need to find your own URL retrieval service.
This post is about how to make it work.
When you run the flashproxy-reg-url program and give it your external IP
address and the port that flashproxy-client is listening on, it will
print out a URL. The URL encodes an encrypted representation of your
address and port. When this URL is retrieved--by anyone or anything--the
facilitator decrypts the message and registers your address, and you
should get a flash proxy connection right away.
For example, if you run
the program will print out a long URL like
Now is where you must get creative. Of course you can paste the URL into
a browser yourself, but we're assuming that a censor will block direct
access to this web server. You can email the URL to someone you trust
who is not being censored. There are also a lot of services on the web
that will take any URL you give them and try to retrieve it--any of
those that are not blocked by the firewall will work.
The censorship-resistance of this approach comes from the idea that
there are so many ways to cause a URL to be retrieved that they cannot
all be blocked. If the service you use uses encryption (for example
HTTPS), then the censor cannot filter on the distinctive form of the
URLs either.
How do I find out my IP address and port number? By default the port
number is 9000, but you might have changed it with the instructions at
 The IP
address can be IPv4 or IPv6. You can find out your address using a
service like Here is the program man page:
Here is the ticket about the creation of the program:
David Fifield

@_date: 2013-02-05 22:57:40
@_author: David Fifield 
@_subject: [tor-talk] Flash proxy talk Feb 20 
I will be giving a talk about flash proxies 16:15?17:30 PST on
Wednesday, February 20.
The talk is open to the public, and will also be broadcast on the web.
The web video is viewable in VLC.
This will be my first talk about flash proxies since the system started
to become more widely known. I hope to be able to share some numbers on
usage since we started distributing browser bundles.
I'm happy to talk to people one-on-one or in a group after the talk. If
you attend in person, just find me afterward and tell me you're from
tor-talk and we can talk.
David Fifield

@_date: 2013-02-07 08:34:28
@_author: David Fifield 
@_subject: [tor-talk] Cupcake Bridge update 
There are many more proxies than clients, so the chance that any one
proxy gets a client is small. Don't be discouraged if you don't see a
light blue badge, because it happens rarely. We claimed in the paper
that having lots of legitimate, but unused, proxies helps defend against
some attacks on the facilitator by malicious proxies. You are still
helping, even if nobody is using your badge.
David Fifield

@_date: 2013-02-09 23:51:14
@_author: David Fifield 
@_subject: [tor-talk] Cupcake Bridge update 
How do I install this in Chrome or Firefox? Assume I've never installed
a browser extension before. Is there a way to do it from a github clone,
so that I know what code the browser is loading?
David Fifield

@_date: 2013-02-20 11:39:06
@_author: David Fifield 
@_subject: [tor-talk] [EE CS Colloq] JavaScript anticensorship proxies * 
Reminder, this talk is happening today.
I think this is the link to watch the video stream:
("Open Network Stream" in VLC.)
These are the speaking materials I'll be using.
I tried to put everyone who has contributed code on the credits page. If
I left you out, let me know and I'll fix it; it is only because of
scatterbrainedness and not for any lack of love.
David Fifield

@_date: 2013-02-21 09:31:53
@_author: David Fifield 
@_subject: [tor-talk] Some more FlashProxy questions 
It is a technical limitation. But remember, we designed the whole system
around it. Proxies don't have to live forever.
I think early on the research group talked to Facebook but I wasn't part
of that meeting.
Currently we don't lack proxy capacity. We have plenty of that. What we
lack is *opted-in* proxy capacity, which we would like to see more of.
Check these graphs from my talk yesterday.
Not necessarily right away, but if they get a client from the
facilitator, then they will connect to a Tor relay.
A whitelist defeats almost everything, including flash proxy. But you
must look at it in terms of cost. Nothing works against an adversary
with unlimited resources. A whitelist is expensive to maintain in that
people are unhappy if, e.g., their Skype stops working--they blame the
censor for it and somehow the censor has to deal with that. This is what
we call "collateral damage" in the paper, and different censors probably
have different levels of damage they can tolerate.
David Fifield

@_date: 2013-01-03 21:35:07
@_author: David Fifield 
@_subject: [tor-talk] Pluggable Transports metrics? 
Here's another graph showing a recent huge increase in proxy capacity,
probably a result of attention following CCC.
It looks like there is something limiting the number of proxies to
around 150, perhaps an Apache configuration. I will check it out but
I've also increased the facilitator polling interval.
David Fifield

@_date: 2013-01-04 14:57:29
@_author: David Fifield 
@_subject: [tor-talk] [tor-dev] Cupcake: browser extension for flash 
Thank you for doing this. Would you please add this information to the
ticket at  This is
the ticket for creating a browser addon. You can create an account or
use the anonymous account cypherpunks:writecode. There are people
watching the ticket who will be interested in helping you test.
We will probably be moving to an all-opt-in model for flash proxy. Your
addon should send the flashproxy-allow=1 cookie, if it doesn't already,
so that it will continue to work by default when we make that change.
At this point, it will help if you can keep it pointing to the same
embed page. As we are on the verge of deployment, we may need to make
changes to the proxy program quickly.
David Fifield

@_date: 2013-01-10 08:43:24
@_author: David Fifield 
@_subject: [tor-talk] Combined flash proxy + pyobfsproxy alpha browser bundles 
Please help us test new bundles that have flash proxy and pyobfsproxy
enabled by default.
Flash proxy ( is a transport
that uses proxies running in web browsers as access points into the Tor
network. pyobfsproxy is a Python implementation of the obfsproxy modular
transport (
 that makes
network traffic look unlike normal Tor traffic. Both of these
technologies make it harder to block access to Tor.
Flash proxy works differently than other pluggable transports, and you
need to take extra steps to make it work. In particular, *you will
probably need to configure port forwarding*, by default port 9000, in
order to receive connections from browser proxies. There are
instructions and hints on how to do that at this page:
pyobfsproxy doesn't require any special setup. These bundles contain
fresh obfs2 bridge addresses, which may work for you even if obfsproxy
was blocked for you previously. The bundle also includes an experimental
obfs3 bridge--obfs3 is a new protocol designed to be harder to identify
than the previous obfs2. If your bridges become blocked, the solution is
not to download a new bundle but to find new bridges:
Windows 64-bit
OS X 64-bit
GNU/Linux 32-bit
GNU/Linux 64-bit
We are looking for feedback on how well the bundles work. Please leave
comments on this wiki page or ticket, or as replies to this message:
Alexandre Allaire, George Kadianakis, and I worked together to build
these bundles.
David Fifield

@_date: 2013-01-10 14:33:15
@_author: David Fifield 
@_subject: [tor-talk] Combined flash proxy + pyobfsproxy alpha browser 
I'm afraid I don't know what you mean. Do you mean you can deploy 200
browser proxies? That just means opening 200 web browsers. If you can do
that, please do. Another way to help is to install the proxy code on a
web page you control, as described at
Another way you can help is by trying out the bundle and recording your
experience at David Fifield

@_date: 2013-01-11 12:56:52
@_author: David Fifield 
@_subject: [tor-talk] Combined flash proxy + pyobfsproxy alpha browser 
My understanding is that it treats all of the Bridge lines as separate
bridges and uses the normal mechanisms to decide which to use.
This was only a snafu with the package building process. Alexandre is
working on making corresponding 32-bit packages. Thank you for letting
us know that this is important to you.
David Fifield

@_date: 2013-01-11 12:58:08
@_author: David Fifield 
@_subject: [tor-talk] Combined flash proxy + pyobfsproxy alpha browser 
This is a nice idea. Would you consider opening a ticket on
Maybe you could run flashproxy.js with the Rhino JavaScript interpreter
(we already use Rhino for some of our tests). You would need to make
some changes to flashproxy.js to remvoe some of the browser assumptions.
David Fifield

@_date: 2013-01-13 11:15:55
@_author: David Fifield 
@_subject: [tor-talk] Testing flashproxy 
You should start without a facilitator. Just make your standalone
program take a client and relay address on the command line. The client
can be 127.0.0.1 (you run flashproxy-client locally) and the relay can
be tor1.bamsoftware.com:9901. flashproxy.js can also be run in this way,
bypassing the facilitator:
The websocket server transport plugin is in a branch of the flashproxy
source code. It's not hard to install if you have the golang tools
We previously used a third-party WebSocket transport called websockify.
When you want to run with your own facilitator, documentation for doing
it is here. You can omit most of the instructions; basically you just
need to run an Apache CGI and another process locally. You won't be able
to use the Gmail-based rendezvous because that requires secret keys, but
you can use the trivial HTTP-based rendezvous for testing.
This is intentional. If there's any error the proxy disables itself. We
err towards the side of a proxy going silent rather than going haywire.

@_date: 2013-01-13 16:52:34
@_author: David Fifield 
@_subject: [tor-talk] Combined flash proxy + pyobfsproxy alpha browser 
Alexandre prepared new 32-bit packages for Windows and OS X. Here are
all the links again.
Windows 32-bit
Windows 64-bit
OS X 32-bit
OS X 64-bit
GNU/Linux 32-bit
GNU/Linux 64-bit
David Fifield

@_date: 2013-05-01 12:34:56
@_author: David Fifield 
@_subject: [tor-talk] FlashProxy and HTTPS 
Serving the iframe contents over HTTP actually does seem to work. I
tried it in This could work, but only for a standalone flash proxies, not those
running in a browser. And for standalone proxies, mixed-content warnings
and the browser's trust store is not even an issue. Aside from the fact
that it breaks the "visit this web page to become a proxy" idea, acking
people to install new certificates in their browser is bad for their
I don't think this idea works, because anyone wanting to go through the
trouble of making it work might as well just run a standalone proxy or
even a plain old Tor bridge.
David Fifield

@_date: 2014-06-11 08:41:23
@_author: David Fifield 
@_subject: [tor-talk] Please try and test bundles with the "meek" pluggable 
We have been working on a new pluggable transport called "meek." Here
are bundles, based on 3.6.2, that have support for meek. Please try them
and report your experience. You need to answer Yes to the question "Does
your Internet Service Provider (ISP) block or otherwise censor
connections to the Tor Network?" and then select "meek" from the
dropdown box.
The files are signed with my key 0xC11F6276 from:
meek works by reflecting your traffic through a third-party server that
is difficult for the censor to block--in these bundles, the third-party
server is Google. For a more detailed description, see
 I think
these bundles stand a good chance of working everywhere pluggable
transports are required, except for China, where access to Google has
been blocked since the beginning of June. We're investigating providers
other than Google that may work in China--see
 if
you can help.
I'm going to ask for meek to be merged into the mainline bundles if
nothing major goes wrong after this announcement.
David Fifield

@_date: 2014-06-11 19:57:07
@_author: David Fifield 
@_subject: [tor-talk] Please try and test bundles with the "meek" 
I picked a good day to announce this :) Google App Engine's URLFetch
service, which is the link between Google and meek's Tor bridge, has
been not working for about the last hour (since 18:30 PDT).
The bundles won't work until the problem is resolved. If you want to
read about research into other diverse web services that may be
supported as alternatives to Google, see
David Fifield

@_date: 2014-06-11 21:44:21
@_author: David Fifield 
@_subject: [tor-talk] Please try and test bundles with the "meek" 
It seems to be working again.
"We have identified the issue affecting Google App Engine UrlFetch
service and latency is returning to normal. We will provide another
update by 22:00 Pacific."
David Fifield

@_date: 2014-06-17 18:21:09
@_author: David Fifield 
@_subject: [tor-talk] Meek bridges request 
Thank you for testing meek, and I'm sorry it's slow for you.
Unfortunately it's not something you can fix by using a different bridge
address. meek doesn't really use bridge addresses--your first hop is
always to App Engine, and I suspect that accounts for most of the
latency from Brazil.
I can't offer you any advice for improving the speed right now, but I
can show you two things we're working on to make it faster.
We're going to try some web services other than App Engine, which might
provide better performance in different parts of the world. These ideas
aren't deployed yet, but we have some notes here:
More importantly, we're going to extend the meek protocol so that
requests and responses don't have to be strictly serialized. How it
works now, is that if you have two pieces of data to send, you can't
send the second one until the first one has been sent, and a response
received. It causes a delay that increases the farther away you are from
App Engine, even if you have fast bandwidth. It will be better when the
protocol allows you to send more than one piece of data at a time.
David Fifield

@_date: 2014-06-19 16:50:36
@_author: David Fifield 
@_subject: [tor-talk] Meek bridges request 
Unless I'm mistaken, both obfsproxy and fte should work with an HTTPS
proxy in the 3.6.2 bundles. You should be able to set the proxy in the
network settings window.
David Fifield

@_date: 2015-08-05 14:02:12
@_author: David Fifield 
@_subject: [tor-talk] Outage of meek-azure (workaround) 
In addition to the above workaround, you can make meek-azure work again
by installing Tor Browser 5.0a4.
5.0a4's default configuration matches the workaround posted above. Other
future releases will also work.

@_date: 2015-08-14 15:01:40
@_author: David Fifield 
@_subject: [tor-talk] Outage of meek-azure 
The outage is resolved. Anyone who was using the old meek-azure
configuration, you meek will start working again. But by now everyone
should have upgraded to the latest 5.0 or 5.5a1 version of Tor Browser,
which have an updated configuration and were working even before now.

@_date: 2015-01-03 01:30:58
@_author: David Fifield 
@_subject: [tor-talk] Blocking event in Kazakhstan, October 2014? 
Did something happen in Kazakhstan in the first week of October 2014?
There big decrease in relay users (about 40%) accompanied by a
simultaneous big increase in bridge users (about 800%).
Take a look at the graphs (also attached):
I wrote a program to look for blocking events by looking for unlikely
increases/decreases in relays and bridges simultaneously. This
Kazakhstan event was one of the highest-scored finds by the program. I'm
not aware of a Tor blocking event in Kazakhstan at that time, but it's
the same pattern (decrease in relays and increase in bridges) that we've
seen in Iran in late July 2014:
David Fifield

@_date: 2015-01-06 13:56:06
@_author: David Fifield 
@_subject: [tor-talk] What to do if meek gets blocked 
The meek pluggable transport has had good success so far.
It works differently than other transports, so it's been able to reach a
new group of users. It now has something like 1000 simultaneous users,
which is only about 1/10 of obfs3, but presumably they are users for
whom obfs3 and other transports don't work.
Increasing use is going to mean increasing pressure on censors to find a
way to block it. meek is not unblockable--that's the wrong way to think
about the problem--but it is designed to be difficult and expensive to
block, by hiding behind an important domain name (the "front domain")
and looking like browser HTTPS. Ideally (ignoring many details), the
censor can't distinguish between someone using meek and someone surfing
 (or another important domain). The censor must
either allow some circumvention traffic, or block a domain that has many
beneficial uses. But suppose a censor makes that call, and blocks
Google/Amazon/whatever. What then?
The first thing you should try is a different backend. If you use
meek-google, try meek-amazon or meek-azure. Maybe your censor has
blocked one but not all of them. This is already the case for users in
China, where meek-google is blocked because Google is blocked, but the
others are not.
You can also try using a different DNS server. The most common way to
block a domain name is by DNS poisoning; i.e., the IP address behind the
name is accessible, but the local DNS server gives you a false address.
Try a public DNS server such as 8.8.8.8. But if that works, be aware
that's it's probably only a temporary fix, as censors have historically
figured out the alternate-DNS trick pretty fast.
What you really want to do, if the easy things don't work, is choose a
different front domain. The "domain fronting" trick is meek's core idea.
It lets you talk to one domain while appearing to talk to another. Tor
Browser comes with some built-in front domains, but you can also
configure your own. The current list of front domains is at
You can also find it in Browser/TorBrowser/Data/Browser/profile.default/preferences/extension-overrides.js
inside the Tor Browser distribution . These are the default bridge lines
you get when you select meek-google, meek-amazon, or meek-azure from the
bridge configuration screen. But you can also enter them manually (under
"Enter custom bridges"), and then you can change the front domain. I
attached a screenshot that shows how.
Let's take a closer look at what this means:
The first part "meek" is the transport name; don't forget that. The
address "0.0.2.0:1" is ignored. You can set it to anything (just don't
use 0.0.0.X or port 0 because those are used internally by tor). The
next part, "url= says where your
traffic is *really* going--to a Tor bridge. You can't change the "url="
part unless you set up your own CDN account. The last part,
"front= is the domain that you hide behind--where the
censor sees you going. The "front=" part is what you can change.
Let's say  is blocked. In its place, you can use virtually
any domain that's operated by Google. For example,
Or you can try a country-specific domain:
In fact there are tons of domains operated by Google. Even
long-forgotten ones like  work. Suppose you're behind a
firewall that blocks the Google search page but allows a small number of
whitelisted sites. If any of those sites use Google Analytics or
DoubleClick ads, you're good.
With meek-amazon, you can use front domains that are on Amazon
CloudFront. The default a0.awsstatic.com is one of them, but you can
find others with some research. Here's a short list of some
*.cloudfront.net domains: ("Where do visitors go on cloudfront.net?"). You can use any of them
(remember to change the "front=" part, not the "url=" part):
A lot of sites use their own domain name (CNAME) that aliases a
cloudfront.net domain. If you can find one of them, it will work too.
The situation with meek-azure is similar. The default front domain,
ajax.aspnetcdn.com, is used by many web sites to host JavaScript files,
so we think it will be hard to block. You can also use subdomains of
vo.msecnd.net, which belong to the Azure CDN. You can find some with a
web search. This one seems to be related to Microsoft Office:
It's important to understand that even if you change the front domain,
you're not sticking some random person with a bandwidth bill. It's the
owner of the "url=" that gets charged, not the owner of the "front=",
and the "url=" has to be specially set up to accept meek connections.
The "url="s in this email are set up for public use (i.e., they are
what's getting paid for in the "Summary of meek's costs" emails I send
to tor-dev).
Be aware that you may increase your exposure if you choose an unpopular
front domain. If you're the only one using it, a censor may easily see
that and block you.
Finally, you can always set up your own web app, and point it at a Tor
relay running meek-server. As long as it's only used by few people, it's
unlikely to be blocked. This is basically the same as setting up your
own proxy server, except it's easier because you just need a web hosting
account somewhere, and you get HTTPS camouflage for free. We have such
"reflector" web apps for App Engine, Nginx, PHP, and Python WSGI:
Let's say you are using the PHP one. Just upload the index.php file to a
web hosting service that supports HTTPS. Let's say its URL is
 Then you would enter this into Tor
In this case you don't use a front because you're relying on the domain
itself being hard to block, either because it's too obscure or because
it hosts other useful data. You should still definitely use HTTPS, not
plain HTTP.
David Fifield

@_date: 2015-01-06 14:57:11
@_author: David Fifield 
@_subject: [tor-talk] What to do if meek gets blocked 
That might work and it might not. Give it a try. I know that at least
with Amazon CloudFront, you have to declare in advance which CNAMEs are
allowed to alias your CDN domain name. But I don't know if they enforce
it at the TLS layer or the HTTP layer. In any case you can for sure set
up your own CloudFront distribution, point whatever CNAMEs you want at
it, and then use those CNAMEs to front for the public URL.
Oh, I guess the list removed it or something. I added the screenshot to
a new section on the wiki page.
David Fifield

@_date: 2015-07-04 08:20:52
@_author: David Fifield 
@_subject: [tor-talk] Fwd: CALL FOR TESTING: new port scanning subsystem 
Yeah. Jacek's post wasn't about adding proxy support to Nmap per se--Nmap
has been able to use a proxy for certain operations for quite some time
now, through the --proxies command line option. The proxy support worked
for things like version detection and NSE (Nmap Scripting Engine), but
it notably did not work for port scanning, because the port-scanning
code in Nmap uses sockets much differently than the rest of it. Jacek's
patch is about overcoming certain architectural difficulties and
extending proxy support to the port scanning phase too.
The patch doesn't actually add new SOCKS code to Nmap. It just uses what
is already there. Supporting SOCKS5 is a good project but it is separate
from this one.
Doing domain name resolution through the proxy (which would prevent DNS
leaks and enable scanning of onion sites) is also a separate and kind of
large project. Many parts of Nmap's code assume that they have an IP
address to work with, so it will take some rearchitecting too.

@_date: 2015-07-19 21:08:42
@_author: David Fifield 
@_subject: [tor-talk] Outage of meek-azure 
A few hours ago the meek-azure CDN endpoint stopped working and is now
serving an error code 403. The outage is caused by an error in account
management and I think it will be temporary. I am talking with support
about it now.
What happened is Microsoft transitioned users from one kind of sponsored
account (Microsoft Azure Pass) to another kind (Microsoft Azure
Sponsorship). While I created the new sponsorship account, I did not
realize that you had to separately transfer all your services to the new
account. The old account finally expired today and the services abruptly
stopped working.

@_date: 2015-07-21 21:40:35
@_author: David Fifield 
@_subject: [tor-talk] Outage of meek-azure (workaround) 
I'm still working on getting the old CDN settings moved to the new
account :(
But I set up a new endpoint under the new account, and it seems to be
working. You just have to configure it manually.
On the startup dialog, click "Configure". (Or if Tor Browser is already
running, click the onion icon and then "Tor Network Settings...".) Check
"My ISP blocks connections to the Tor network" and click the "Enter
custom bridges" button. In the box, enter the line:
meek 0.0.2.0:3 A2C13B7DFCAB1CBF3A884B6EB99A98067AB6EF44 url= front=ajax.aspnetcdn.com
Here's a screenshot of the screen you should be seeing. The only
difference is you will enter the bridge line above instead of what the
screenshot shows.
If you're curious, the only thing different in the bridge line above
compared to the default meek-azure configuration is the url. It replaces
 the currently broken CDN endpoint under
my old account, with  a new CDN endpoint
I just set up under the new account.

@_date: 2015-11-01 16:08:30
@_author: David Fifield 
@_subject: [tor-talk] Changed fingerprint for meek-amazon bridge (attn support) 
Hash: SHA512
The meek-amazon bridge has changed its fingerprint. The old fingerprint
The new fingerprint is:
A side effect of the fingerprint change is that current versions of Tor
Browser will not connect using the default meek-amazon bridge. The
fingerprint changed as a result of an oversight; sorry about that.
Upcoming releases of Tor Browser will have the new fingerprint. To use
meek-amazon before upgrading, paste the following bridge line into the
Tor Network Settings window:
meek 0.0.2.0:2 B9E7141C594AF25699E0079C1F0146F409495296 url= front=a0.awsstatic.com
Here is the ticket for the fingerprint change:
Note that the ticket refers to another fingerprint 6DDD... that was
briefly used before we settled on this one.

@_date: 2015-10-02 15:50:33
@_author: David Fifield 
@_subject: [tor-talk] meek-azure now rate-limited 
Today I rate-limited the bridge behind meek-azure to 1.1 MB/s. Our free
grant is expired and now it will start costing money. This is the same
rate that meek-google and meek-amazon are set to.

@_date: 2015-10-03 20:43:56
@_author: David Fifield 
@_subject: [tor-talk] meek-azure now rate-limited 
It was getting about 2?4 MB/s reading and the same writing. Since
yesterday you can see it crashing down to 1.1 MB/s as a result of the
rate limiting.
(Click on "1 month".)

@_date: 2015-10-08 19:09:05
@_author: David Fifield 
@_subject: [tor-talk] Outage of meek-amazon 
The meek-amazon transport has been not working since September 30. The
cause is an expired HTTPS certificate on the bridge that we are working
on fixing now.

@_date: 2016-02-08 15:02:03
@_author: David Fifield 
@_subject: [tor-talk] meek-azure was blocked in China for about 4 days 
For about four days (January 29 to February 1, 2016), meek-azure was
blocked in China. The blocking may not have been intended for
meek-azure, and may not have been deliberate blocking, but it had the
effect of blocking the service. It is unblocked again since February 2.
The nature of the event seems to be dropping of HTTPS connections to a
specific Azure CDN edge server, cs3.wpc.v0cdn.net, which at the time had
an IP address of 68.232.45.200. Plain HTTP connections were not
affected. The blocking was not DNS blocking of a specific domain name,
nor was it TLS SNI (Server Name Indication) filtering: all domain names
we tried for the IP address failed equally.
Here you can see a history of the event, based on GreatFire.org
measurements. Click on a calendar square for more details. Red is
blocked and orange/green is unblocked.
        On February 2, the domain name changed to a different IP address,
68.232.45.201. That may be what caused the end of the block. I don't
know whether HTTPS connections to the old IP address are still being
dropped in the same way.
It's a good idea to be prepared in case of events like this. Here are
some links on technical ways to work around certain kinds of meek
blocking. (In this case, changing the front domain would have worked
only if you found a name that resolved to a different IP address.)

@_date: 2016-02-09 13:49:47
@_author: David Fifield 
@_subject: [tor-talk] meek-azure was blocked in China for about 4 days 
It would work on any alternate port, but there's no reason why Azure
would open up an extra HTTPS port. We're not in control of that part.
I don't know if the TLS blocking was affecting any other ports. I only
tested using the GreatFire.org testing service.

@_date: 2016-01-13 12:53:07
@_author: David Fifield 
@_subject: [tor-talk] Support: are there any recent support requests regarding 
Dear support, has anyone asked for help with flash proxy since it was
removed as an option in Tor Browser 5.5a4 (November 4, 2015)? We are
about to remove the flash proxy software from the browser and it would
be good to know if we ruined anyone's setup when we disabled the bridge
lines as a first step.

@_date: 2016-07-24 01:04:35
@_author: David Fifield 
@_subject: [tor-talk] FortiGuard firewall blocks meek by TLS signature 
Recently, we had reports of Cyberoam firewalls blocking meek by TLS
I got a similar report, this time for a FortiGuard firewall.
The story is basically the same as last time: the firewall looks for TLS
that has the signature of a specific version of Firefox and is also
destined to one of the default front domains. This time it is the
signature of Firefox 45 they're looking for. They also were not blocking
the domain  so meek-google would work if it hadn't been
shut down recently.
Here are workarounds to try if you find yourself in this situation. See
also: What to do if meek gets blocked.
First try changing the front domain. This is easy to do; you don't have
to edit any files.
These alternative bridge lines worked in this case:
The second workaround is to disable the Firefox TLS camouflage and use
naked Golang TLS. To do that, edit the file
Browser/TorBrowser/Data/Tor/torrc-defaults and change the line
I.e., remove the meek-client-torbrowser wrapper program. The format of
the line will differ slightly depending on your operating system, but it
should be pretty easy to figure out.
The third workaround is to set up your own App Engine app. This isn't
very hard to do. Instructions are here:

@_date: 2016-06-01 18:32:27
@_author: David Fifield 
@_subject: [tor-talk] meek-google suspended for terms of service violations 
meek-google has not been working since May 13, 2016. It is not because
censors figured out how to block it, but because Google Cloud Platform
suspended the reflector web application (
The reason given is:
However, I have not been able to find out any greater level of detail,
not get a response of any kind from Google Cloud Platform. There is a
form to submit an appeal, which I have tried many times to no avail. (It
says, "You will receive a response within 2 business days.") I wrote to
the google-cloud-compliance at google.com email address and similarly got
no reply.
I will continue to try to find out what's going on. As it is, though, I
don't know anything even about the nature of the presumed violation.
In the meantime, you can use meek-amazon or meek-azure. If you set up
your own CDN instance and point it to the origin domain
 it will be faster than the default meek
bridges that come in Tor Browser. (The default ones are rate-limited and
shared among many users.)

@_date: 2016-06-30 11:57:37
@_author: David Fifield 
@_subject: [tor-talk] meek-google suspended for terms of service 
I managed to get a little clarity on the situation. There was a botnet
using Tor and meek-google for command communication. The Google Cloud
Platform operators shut it down because of that.
Your alternative options are to switch to meek-azure or meek-amazon, or
(even better) to set up your own App Engine app and configure your Tor
Browser to use it, which will be faster for you and save us money. Here
is how to set up your own app.
Go to the Cloud Platform Console and log in (you can use a gmail.com
Create a new project. The project ID determines the URL where the app
will live. For example, if you choose "myproject", then the app will be
at Download the meek source code. The code you need is in the "appengine"
If you don't have Git, you can manually download the two files you need:
Download the App Engine SDK. It has the "goapp" program you need to
upload the project.
To upload the project, run
(Replace "myproject" with your own project ID.) It will probably ask you
to re-enter your Google password. If it works, you can go to
 and see the message "Iâ€™m just a happy
little web server."
Finally, in Tor Browser, click the onion icon and then "Tor Network
Settings...". Check the box for "My Internet Service Provider (ISP)
blocks connections to the Tor network, then click "Enter custom
bridges". In the box, enter this line (replace "myproject" with your
project ID):
Then restart Tor Browser.

@_date: 2016-05-08 13:37:47
@_author: David Fifield 
@_subject: [tor-talk] Pluggable Transports and DPI 
Thanks for this information. With obfs3, obfs4, and scramblesuit, are
you using the default built-in bridges, or are you using custom bridge
lines? If you are using the default bridges, it might just be that
Cyberoam blocked the IP addresses.
Try altering your bridge lines so that instead of "iat-mode=0", it has
"iat-mode=1". That will alter the packet timing signature (only in the
client?server direction) and it would be interesting to know if that
gets through the firewall.
With the meek blocking, it might be that they are doing some kind of
timing analysis, or it might be that we screwed up something simple like
the TLS signature. Could you try it in these configurations?
TB 6.0a5 uses a different version of Firefox than 5.5.5, so the TLS
signature might be different (I haven't checked yet). To run meek_lite,
use a torrc file like this one:

@_date: 2016-05-11 19:40:17
@_author: David Fifield 
@_subject: [tor-talk] Pluggable Transports and DPI 
Justin helped me by running some tests and we think we know how this
Cyberoam device is blocking meek connections. It blocks TLS connections
that have the Firefox 38's TLS signature and that have an SNI field that
is one of our front domains:  a0.awsstatic.com,
This blocking policy incurs some collateral damage: it blocks ordinary
Firefox 38 when visiting one of the above domains (we tried it)--but
changing the name even slightly, such as using google.com in place of
 works. Perhaps there are few enough users of Firefox 38
that the level of false blocking is acceptable.
 says that Firefox 38 is now only 0.38% of
browsers (compared to 11.36% in June 2015 and Firefox 45's 9.73% now).
If this blocking affects you, one way to solve it is to use the 6.0a5
alpha release, which is based on Firefox 45 and has a different TLS
Another solution is to change the front domain to something else, for
exmaple using google.com instead of  Instructions for
changing the front domain are here:

@_date: 2016-05-14 13:24:50
@_author: David Fifield 
@_subject: [tor-talk] Pluggable Transports and DPI 
I don't think there's a point to doing that. Sure, it would temporarily
mitigate this specific instance, but it's going back to the
cat-and-mouse methods that I don't like. If the firewall vendor is okay
with blocking all Firefox 38 users from  they aren't
going to have a problem with also blocking other domains. The weakness
in this case, I think, was the obsolete TLS signature, not the domain

@_date: 2016-05-14 13:29:20
@_author: David Fifield 
@_subject: [tor-talk] Pluggable Transports and DPI 
No, we didn't find out how they were blocking obfs4. Justin suspects
it's not an IP blacklist because neither the default Tor Browser bridges
nor custom bridges worked. He tried setting iat-mode=1 (activating
packet timing obfuscation) on the client, and obfs4 was still detected.
We didn't have an iat-mode=1 server to test timing obfuscation in both

@_date: 2016-05-20 18:42:57
@_author: David Fifield 
@_subject: [tor-talk] Pluggable Transports and DPI 
If you're curious about what changed in the TLS fingerprint between
Firefox 38 and 45, I did a dissection of the first client hello. The
only difference is in the Application Layer Protocol Negotiation
extension (RFC 7301). The new fingerprint omits support for draft
versions of HTTP/2 (h2-14, h2-15, h2-16).
 Secure Sockets Layer
     TLSv1.2 Record Layer: Handshake Protocol: Client Hello
         Content Type: Handshake (22)
         Version: TLS 1.0 (0x0301)
-        Length: 205
+        Length: 187
         Handshake Protocol: Client Hello
             Handshake Type: Client Hello (1)
-            Length: 201
+            Length: 183
             Version: TLS 1.2 (0x0303)
             Random
-                GMT Unix Time: Jul  7, 2073 20:16:39.000000000 PDT
-                Random Bytes: ffb333dea40c3d3d9b1fec5a4597a4775586382abfe0ee05...
+                GMT Unix Time: Feb 20, 2060 19:25:19.000000000 PST
+                Random Bytes: 54f218375ad711853b36f8becbd4b085f0e3f53bb48d4149...
             Session ID Length: 0
             Cipher Suites Length: 22
             Cipher Suites (11 suites)
                 Cipher Suite: TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256 (0xc02b)
                 Cipher Suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 (0xc02f)
                 Cipher Suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA (0xc00a)
                 Cipher Suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA (0xc009)
                 Cipher Suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA (0xc013)
                 Cipher Suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA (0xc014)
                 Cipher Suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA (0x0033)
                 Cipher Suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA (0x0039)
                 Cipher Suite: TLS_RSA_WITH_AES_128_CBC_SHA (0x002f)
                 Cipher Suite: TLS_RSA_WITH_AES_256_CBC_SHA (0x0035)
                 Cipher Suite: TLS_RSA_WITH_3DES_EDE_CBC_SHA (0x000a)
             Compression Methods Length: 1
             Compression Methods (1 method)
                 Compression Method: null (0)
-            Extensions Length: 138
+            Extensions Length: 120
             Extension: server_name
                 Type: server_name (0x0000)
                 Length: 23
                 Server Name Indication extension
                     Server Name list length: 21
                     Server Name Type: host_name (0)
                     Server Name length: 18
                     Server Name: ajax.aspnetcdn.com
             Extension: renegotiation_info
                 Type: renegotiation_info (0xff01)
                 Length: 1
                 Renegotiation Info extension
                     Renegotiation info extension length: 0
             Extension: elliptic_curves
                 Type: elliptic_curves (0x000a)
                 Length: 8
                 Elliptic Curves Length: 6
                 Elliptic curves (3 curves)
                     Elliptic curve: secp256r1 (0x0017)
                     Elliptic curve: secp384r1 (0x0018)
                     Elliptic curve: secp521r1 (0x0019)
             Extension: ec_point_formats
                 Type: ec_point_formats (0x000b)
                 Length: 2
                 EC point formats Length: 1
                 Elliptic curves point formats (1)
                     EC point format: uncompressed (0)
             Extension: SessionTicket TLS
                 Type: SessionTicket TLS (0x0023)
                 Length: 0
                 Data (0 bytes)
             Extension: next_protocol_negotiation
                 Type: next_protocol_negotiation (0x3374)
                 Length: 0
             Extension: Application Layer Protocol Negotiation
                 Type: Application Layer Protocol Negotiation (0x0010)
-                Length: 41
-                ALPN Extension Length: 39
+                Length: 23
+                ALPN Extension Length: 21
                 ALPN Protocol
-                    ALPN string length: 5
-                    ALPN Next Protocol: h2-16
-                    ALPN string length: 5
-                    ALPN Next Protocol: h2-15
-                    ALPN string length: 5
-                    ALPN Next Protocol: h2-14
                     ALPN string length: 2
                     ALPN Next Protocol: h2
                     ALPN string length: 8
                     ALPN Next Protocol: spdy/3.1
                     ALPN string length: 8
                     ALPN Next Protocol: http/1.1
             Extension: status_request
                 Type: status_request (0x0005)
                 Length: 5
                 Certificate Status Type: OCSP (1)
                 Responder ID list Length: 0
                 Request Extensions Length: 0
             Extension: signature_algorithms
                 Type: signature_algorithms (0x000d)
                 Length: 22
                 Signature Hash Algorithms Length: 20
                 Signature Hash Algorithms (10 algorithms)
                     Signature Hash Algorithm: 0x0401
                         Signature Hash Algorithm Hash: SHA256 (4)
                         Signature Hash Algorithm Signature: RSA (1)
                     Signature Hash Algorithm: 0x0501
                         Signature Hash Algorithm Hash: SHA384 (5)
                         Signature Hash Algorithm Signature: RSA (1)
                     Signature Hash Algorithm: 0x0601
                         Signature Hash Algorithm Hash: SHA512 (6)
                         Signature Hash Algorithm Signature: RSA (1)
                     Signature Hash Algorithm: 0x0201
                         Signature Hash Algorithm Hash: SHA1 (2)
                         Signature Hash Algorithm Signature: RSA (1)
                     Signature Hash Algorithm: 0x0403
                         Signature Hash Algorithm Hash: SHA256 (4)
                         Signature Hash Algorithm Signature: ECDSA (3)
                     Signature Hash Algorithm: 0x0503
                         Signature Hash Algorithm Hash: SHA384 (5)
                         Signature Hash Algorithm Signature: ECDSA (3)
                     Signature Hash Algorithm: 0x0603
                         Signature Hash Algorithm Hash: SHA512 (6)
                         Signature Hash Algorithm Signature: ECDSA (3)
                     Signature Hash Algorithm: 0x0203
                         Signature Hash Algorithm Hash: SHA1 (2)
                         Signature Hash Algorithm Signature: ECDSA (3)
                     Signature Hash Algorithm: 0x0402
                         Signature Hash Algorithm Hash: SHA256 (4)
                         Signature Hash Algorithm Signature: DSA (2)
                     Signature Hash Algorithm: 0x0202
                         Signature Hash Algorithm Hash: SHA1 (2)
                         Signature Hash Algorithm Signature: DSA (2)

@_date: 2017-07-21 18:34:57
@_author: David Fifield 
@_subject: [tor-talk] .onion domains in Cisco Umbrella most popular domains 
I just learned of the Cisco Umbrella domain popularity list, which is
based on counting DNS queries.
I checked if there were any .onion names in the list and there were 7.
$ grep -E '\.onion\s*$' top-1m.csv
398255,nnmclub5toro7u65.onion - torrent tracker
774619,57g7spgrzlojinas.onion - WannaCry
781311,cwwnhwhlz52maqm7.onion - WannaCry
791633,xxlvbrloxvriy2c5.onion - WannaCry
797827,76jdd2ir2embyv47.onion - WannaCry
805653,gx7ekbenv2riucmf.onion - WannaCry
884438,uj3wazyk5u4hnvtk.onion - Pirate Bay

@_date: 2017-05-22 08:36:23
@_author: David Fifield 
@_subject: [tor-talk] Other Metrics events 
Good finds. Could you add these events to the wiki page of metrics
events? You can put them under "Unknown" at the bottom.
To edit a page you need to create an account
 and then click the
Edit button at the bottom of the page.

@_date: 2020-04-13 01:04:38
@_author: David Fifield 
@_subject: [tor-talk] Invitation to try experimental Snowflake Tor Browser 
This is a merge candidate for the experimental Snowflake packages that
make Snowflake more reliable by allowing a session to span multiple
temporary proxies. They are based on the current 9.5a11.
To enable Snowflake the first time you run the browser:
 * Click "Configure"
 * Click "Tor is censored in my country"
 * Click "Select a built-in bridge"
 * Select "snowflake" from the menu
If the browser is already running:
 * Go to about:preferences (open the Preferences menu then click Tor
   on the left side)
 * Look at the "Bridges" section
 * Click "Use a bridge"
 * Click "Select a built-in bridge"
 * Select "snowflake" from the menu
These packages are set not to automatically install updates, because an
update would remove the features of the branch we are testing. The
browser will still download updates and ask to install them, so you'll
have to click "Not Now" whenever it asks.
Because this is a merge candidate, logging for snowflake-client is
disabled by default. To enable logging, edit the file
Browser/TorBrowser/Data/Tor/torrc-defaults and add
to the "ClientTransportPlugin snowflake" line. The log will appear in

@_date: 2020-04-23 17:02:19
@_author: David Fifield 
@_subject: [tor-talk] Invitation to try experimental Snowflake Tor Browser 
As of 2020-04-24, the Snowflake bridge supports only for the "kcp"
version of the turbotunnel packages, not the "quic" version. If you were
using the "quic" version, you need to update to these newer packages:
If you were already using the newer packages, you don't need to change

@_date: 2020-08-21 09:14:53
@_author: David Fifield 
@_subject: [tor-talk] >600 Tor relays without ContactInfo and similar 
============================== START ==============================
The point nusenu is making is not that these relays should have contact
info; it's that they all have similar properties (among which is a lack
of contact info) that indicate that they are being run by the same

@_date: 2020-02-26 23:02:10
@_author: David Fifield 
@_subject: [tor-talk] Invitation to try experimental Snowflake Tor Browser 
The anti-censorship team is looking for people to try Tor Browser
packages built from an experimental branch of Snowflake that is supposed
to make Snowflake more reliable. There are two versions; you can try
either one or both of them. If you have feedback, tell us whether you
are using the "kcp" or "quic" version.
To enable Snowflake the first time you run the browser:
 * Click "Configure"
 * Click "Tor is censored in my country"
 * Click "Select a built-in bridge"
 * Select "snowflake" from the menu
If the browser is already running:
 * Go to about:preferences (open the Preferences menu then click Tor
   on the left side)
 * Look at the "Bridges" section
 * Click "Use a bridge"
 * Click "Select a built-in bridge"
 * Select "snowflake" from the menu
What's different about these experimental packages? As you may know,
Snowflake is already part of alpha Tor Browser. Snowflake works by
routing your connection through temporary proxies before they reach a
bridge, but until now there wasn't a way to switch to a new proxy when
the one you are using stops working--the connection would just stop
working. These packages solve the problem by putting a session protocol
under the temporary Snowflake layer. (That's why there are two options.
We are testing two session protocols: KCP and QUIC.) If you are curious
about the background:
These special packages are made not to auto-update until 2020-04-23.
After that, they will update and become a normal Tor Browser alpha.
What to expect. You should be able to use these browsers all day without
the connection breaking. The speed of the Snowflake connection depends
on the temporary proxy you get assigned. If you think you have a slow
proxy, try this trick: go to about:preferences switch to obfs4 for
1 second, then switch back to snowflake. That will restart the pluggable
transport and give you a chance at a different proxy. It takes 30
seconds to detect a failed proxy. So if your proxy dies, it will be at
least 30 seconds before your connection starts working again. It may be
even longer than that, if you happen to be assigned another bad proxy
right away. You can see what's going on by watching the log file:
Here's a guide to reading the log file:
Traffic Bytes (in|out): 0 | 972
Traffic Bytes (in|out): 52457 | 7270
WebRTC: No messages received for 30s -- closing stale connection
redialing on same connection
It's possible to run multiple Tor Browsers at the same time, if you want
to run one of these Snowflake browsers alongside your normal Tor
Browser, or run the "kcp" and "quic" versions at the same time. I posted
instructions to but the short summary is you have to set a couple of environment

@_date: 2020-02-27 19:32:25
@_author: David Fifield 
@_subject: [tor-talk] Invitation to try experimental Snowflake Tor Browser 
50% is the point where Tor needs to download the consensus, which can
take a few minutes the first time you run the browser. (Because it's
several megabytes and Tor doesn't have a cached copy yet.) If you wait a
few minutes it should make progress past 50%. It's possible that your
Snowflake proxy stopped working in the middle of the bootstrap process.
If you restart the browser it should work the second time.
If you keep getting stuck at 50%, click "Copy the Tor log" and let us
know what it says.
You don't need to open any ports. Thanks for testing.

@_date: 2020-03-03 01:51:47
@_author: David Fifield 
@_subject: [tor-talk] Invitation to try experimental Snowflake Tor Browser 
The prefs I tried setting to disable automatic updates didn't work. If
you were using one of these special packages today, you got updated to a
normal Tor Browser 9.5a6 without Turbo Tunnel Snowflake.
If this happened to you, you need to re-download the package, and the
first time you run it, set app.update.auto=false in about:config.
Alternatively, go to Preferences, General, and select "Check for updates
but let you choose to install them." The browser will tell you there is
an update but won't install it automatically.

@_date: 2020-03-03 02:15:31
@_author: David Fifield 
@_subject: [tor-talk] Invitation to try experimental Snowflake Tor Browser 
You're right, it does require UDP connections. There's no way to
configure it to use specific ports, because the peer-to-peer WebRTC
connection with a Snowflake proxy doesn't work like that. I don't think
that Snowflake will work if you have a deny-by-default local firewall.

@_date: 2020-03-06 01:28:32
@_author: David Fifield 
@_subject: [tor-talk] Invitation to try experimental Snowflake Tor Browser 
You will need to open at least UDP port 19302 for communication with the
STUN server, but even after that there is a peer-to-peer WebRTC
connection that I believe just uses random ephemeral UDP ports.
There's no way to restrict to port selection. Snowflake isn't meant to
work in an environment where UDP is blocked by default; that would
require a different set of design tradeoffs. So don't feel obliged to
try to make it work with your local firewall. Thanks for giving it a

@_date: 2020-03-19 18:08:27
@_author: David Fifield 
@_subject: [tor-talk] Invitation to try experimental Snowflake Tor Browser 
Here is a small update to the experimental Snowflake packages. They fix
a hang that would happen if tor opened more than one connection through
the pluggable transport client. More details: To enable Snowflake the first time you run the browser:
 * Click "Configure"
 * Click "Tor is censored in my country"
 * Click "Select a built-in bridge"
 * Select "snowflake" from the menu
If the browser is already running:
 * Go to about:preferences (open the Preferences menu then click Tor
   on the left side)
 * Look at the "Bridges" section
 * Click "Use a bridge"
 * Click "Select a built-in bridge"
 * Select "snowflake" from the menu
These packages are set not to automatically install updates, because an
update would remove the features of the branch we are testing. The
browser will still download updates and ask to install them, so you'll
have to click "Not Now" whenever it asks.
You can see what's going on by watching the log file:
Here's a guide to reading the log file:
Traffic Bytes (in|out): 0 | 972
Traffic Bytes (in|out): 52457 | 7270
WebRTC: No messages received for 30s -- closing stale connection
redialing on same connection

@_date: 2020-05-23 13:28:09
@_author: David Fifield 
@_subject: [tor-talk] Invitation to try experimental Snowflake Tor Browser 
These experimental session persistence features for Snowflake are now
standard in Tor Browser 9.5a13.
To enable Snowflake the first time you run the browser:
 * Click "Configure"
 * Click "Tor is censored in my country"
 * Click "Select a built-in bridge"
 * Select "snowflake" from the menu
If the browser is already running:
 * Go to about:preferences (open the Preferences menu then click Tor
   on the left side)
 * Look at the "Bridges" section
 * Click "Use a bridge"
 * Click "Select a built-in bridge"
 * Select "snowflake" from the menu
Logging is disabled by default. To enable Snowflake logging, edit the
file Browser/TorBrowser/Data/Tor/torrc-defaults (or
Contents/Resources/TorBrowser/Tor/torrc-defaults on Mac) and append the
following options to the ClientTransportPlugin snowflake line:
The log will appear in
Browser/TorBrowser/Data/Tor/pt_state/snowflake-client.log (or
Depending on what kind of NAT you have, it may take several minutes to
connect (or reconnect, when a proxy disappears).

@_date: 2020-09-15 12:07:10
@_author: David Fifield 
@_subject: [tor-talk] Why are all Snowflake proxies connecting to a single 
Using Snowflake, you can only connect to a bridge that has the Snowflake
server pluggable transport installed. It's the same with obfs4 or any
other pluggable transport. Pluggable transport protocols are generally
not compatible with the TCP/TLS OR protocol that all relays support, so
there needs to be a component on the bridge that converts from one
protocol to the other. In Snowflake, the pluggable transport connection
happens to use WebSocket, because web browsers do not support direct TCP
connections but they do support WebSocket. The bridge must know how to
unwrap the WebSocket connection and convert it back into the OR
protocol, which means installing custom software.
If there were multiple bridges with the Snowflake server pluggable
transport installed, then yes, in principle a client could connect
through a Snowflake proxy to any of those bridges. For the purposes of
circumvention (ignoring anonymity for a moment), there's no reason to
have more than one bridge. It's different from obfs4, which requires
lots of bridges because the censor slowly discovers and blocks them. The
idea of Snowflake is that the censor does not benefit from blocking the
bridge directly. We move the blocking activity to separate layer before
the bridge -- the Snowflake proxies, which are supposed to be cheaper
and easier to set up than full bridges.
One reason not to give the client full control over where to connect to
is to prevent abuse of Snowflake proxies. If a client could cause a
Snowflake proxy to make a WebSocket connection to any IP address, then
people would misuse Snowflake proxies to attack third-party WebSocket
applications. People who volunteer to run Snowflake proxies need to know
that their connection will be used for Tor-related circumvention, and
only that. If we added the ability for the Snowflake client to choose
its destination, the Snowflake proxy would still have to enforce a
whitelist or something, and permit connections only to known Snowflake
bridges. This kind of design is not impossible, but it would take
additional maintenance, and so far the benefits have not been perceived
to be worth the costs. There's some discussion on running multiple
Snowflake bridges here:
Yes, maybe, but it's the same with all bridges, really. Arguably, when
you use a bridge, with or without a pluggable transport, your Tor client
should make four-hop circuits:
But as it is, when you use a bridge, the bridge takes the place of your
The Snowflake proxy hop doesn't count as an onion routing hop. It
doesn't do any decryption/encryption and doesn't have an identity key.
Conceptually, it's no different from a network router, transporting
bytes from a source to a destination without modifying them. When you
use Tor without a bridge, your connection also goes through many routers
on the way to the guard, but those don't count as "hops" in the overlay
Tor circuit. Or if you configure a standard network proxy, the proxy
doesn't show up in the circuit display.


@_date: 2005-07-30 11:18:12
@_author: Bob 
@_subject: forums.gentoo.org = blocked for Tor users 
I can't even view it without tor: and I don't even have an exit to port 80
on my server...

@_date: 2005-07-31 11:56:15
@_author: Bob 
@_subject: forums.gentoo.org = blocked for Tor users 
I have a feeling that this was a quick and dirty solution, something like:
If (tor)

@_date: 2005-07-06 14:42:12
@_author: Bob 
@_subject: I'm seeing someone else's localhost.localdomain 
Hash: SHA1
 Following this thread, what comes to mind is:
This seems like a job for tor-resolve, but I have no idea how to set
it up in windoze, nor how to make that the default way to resolve
Is there anywhere to find the information on how to make this work
(either for dns to use tcp through tor, or use tor-resolve) on win32?
- -Bob

@_date: 2005-07-19 16:54:10
@_author: Bob 
@_subject: question 
Hash: SHA1
  I'm running tor 0.1.0.11 win32 as an exit server.  I came home
after a meeting today, and found a virus warning for the Trojan.phel
virus in my temp directory.
  A side-effect of my virus program is that it also logs all port 80
exits from my tor server, and it had the following entries:
(WARNING!!!!! These sites contain the trojan!!!!!)
7/19/2005 12:47:27
7/19/2005 12:47:01
7/19/2005 12:47:00
7/19/2005 12:47:00
7/19/2005 12:46:59
7/19/2005 12:46:59
7/19/2005 12:46:43
7/19/2005 12:46:42
Which coincides with the infection times, and is also a time when
both my kids were at work, and I was not home.  Assuming that I do
not have some other backdoor program (several different AV products
say this system is clean), and I did not have a physical break-in at
this computer (I hope I can assume this), I have to conclude that it
was a result of the tor server serving the pages through this system.
 Is there a way to verify this (i.e., force another machine to use my
tor server as the exit server and see what happens when I hit this
Unfortunately, my firewall connection log only holds about 30-45
minutes of information when my tor server is running, and overwrites
older connections, so I cannot use that for checking into this, but
this particular trojan relies on the M$ Help system to function, so
the times that I browsed to this site show up in my event log as:
"This operation can only function within HTML Help.,
The above times show no such message, so I assume that the appearance
of the trojan was not through a browser operation.  I've also ruled
out email.
- -Bob
Tor Server: DodgersSuck
(go Padres!!!)

@_date: 2005-07-19 20:10:35
@_author: Bob 
@_subject: question 
Hash: SHA1
Apparently, Norton Internet Security 2005 monitors http requests
going out from port 80, it seems to pick up anything that exits my
tor server also, in fact, on further examination, it is also doing
some privacy blocking on cookies.
I wasn't infected, the AV program caught it: as a file in my temp
folder.  Now I'm not sure if the AV is sniffing the http packets and
then writing the bad stuff to a file in my tmp directory and deleting
it.  Does tor write to the temp directory at all?  This particular
trojan would only work through the M$ Help system in XP, and the
vulnerability was addressed with a patch release in January.
I have SafeLogging=1 in my torrc, so I can't see directly what ip is
making the requests (nor would I want to).  I've turned off the
logging in NIS for cookies and web histories now, to totally
obfuscate and disable my ability to infer who does what, I will have
to disable connection logging also.
I will try this and see if I can duplicate the alert....

@_date: 2005-07-20 11:53:58
@_author: Bob 
@_subject: question 
Hash: SHA1
So far, I've only figured out how to disable the logging of the
traffic.  I agree that this is a problem for a tor server
(particularly filter cookies), however benign, as it could be used in
a "non-benignly" way.
So far, I haven't seen a way to disable this sniffing, this may
exclude me from being able to operate an exit server.
By the way, I did the test with forcing another box to use my tor
server as the exit server, and it did catch the trojan on the server,
which didn't make it back to the client machine.  I can see that it
was never in danger of infecting my server, but my av pulled the
malicious item out of the packets for that connection.  I guess, if I
want to continue to use the AV on my pc (which I do) I will have to
operate as only a middle-man server, which is what I will do.
- -Bob

@_date: 2005-07-20 17:11:01
@_author: Bob 
@_subject: question 
I'm guessing that the Norton program is only checking port 80 traffic.  Plus
all middleman traffic on a tor server would have layers of encryption around
it. A tor exit server is sending unencrypted traffic out to the 'net, and
receiving unencrypted (except for things like ssl and ssh, etc..) traffic
back to send through the onion routers .  A tor middleman has no exit ports
(ExitPolicy reject *.*).

@_date: 2005-07-21 22:27:39
@_author: Bob 
@_subject: I get this rather often... 
Hash: SHA1
What exactly is this warning message telling me?
Jul 21 21:55:11.671 [warn] rend_service_intro_has_opened():
Unrecognized service ID aaaaaaaaaaaaaaaa on introduction circuit
Jul 21 21:55:12.718 [warn] rend_service_intro_has_opened():
Unrecognized service ID aaaaaaaaaaaaaaaa on introduction circuit

@_date: 2005-06-10 02:04:08
@_author: Bob 
@_subject: PEBCAK error while upgrading to 0.1.0.9-rc 
Hash: SHA1
Whilst upgrading from .8-rc to .9-rc, I deleted my secret onion keys,
and now have a new fingerprint.  I tried just spoofing the
fingerprint, thankfully that didn't work.
Now, the TLS connection fails to servers (even to myself from myself)
and is dropped immediately.  Is it recommended to send in the new
fingerprint with a different nickname or to send it in under my old
nickname.... :-0 oops...
- -Bob

@_date: 2005-06-22 23:37:07
@_author: Bob 
@_subject: Tor as windows service 
Hash: SHA1
I am running a Tor client at work, and I was wondering how I could get rid
of the Tor window (the shell window).
I read somewhere that it was possible to run Tor as a NT service. How do I
run  start Tor as a NT service, I can't find anything in the manuals etc.
I'm running it on win2000 without admin rights.

@_date: 2005-06-23 00:22:08
@_author: Bob 
@_subject: Tor as windows service 
I think when I set it up as a service, first I copied all of the stuff from
my Application Data\Tor folder (under documents and settings\username), and
then made changes to the torrc file in the program files\tor directory:
===> "Log notice file C:\Program Files\Tor\debug.log"
===> "DataDirectory C:\Program Files\Tor" - I think this is the important
Basically, it all runs out of the program files\tor directory, so you have
to make sure your keys are there...
If you change the "Log" line from "notice" to "info" or "debug", making sure
its going to a file you should be able to get it all cleared up pretty
-----Original Message-----
Behalf Of Bradley
Sent: Thursday, June 23, 2005 12:11 AM
I cant seem to get my service working correctly. I followed the
instructions in the wiki, but it always seems to crash and get an
error when the service tries to start ("Could not start the service
tor win32 on Local Computer - Error 0xffffffff: 0xffffffff").. seems
to work fine from the command line though. Im running WinXP Corp...

@_date: 2005-06-27 14:20:22
@_author: Bob 
@_subject: Banned from /. 
Hash: SHA1
Well, I've been banned from slashdot again, saying my ip addressed
has been used to abuse their system.
I have the following line in my torrc file:
ExitPolicy reject 66.35.250.0/24	# don't get myself banned from /.
Which should prevent any exit from my tor server to /.'s servers (and
probably several others, also).  I have had this exit policy in place
since before I started the dhcp lease on my current ip address, so,
if this line is correct, nothing should have gotten to /. Using my
current ip, except me, and I don't post more than 3 or 4 times a
Is there any way that my ip address would appear on /.'s logs from
people using tor?
I sent email to banned at slashdot.org, but they NEVER respond to anyone
regarding this, as pointed out on /., see "Tor Named One of the
Year's Best Products":
&tid=185 , from June 11th.
- -Bob

@_date: 2005-06-30 12:49:12
@_author: Bob 
@_subject: Is exit policy broken? 
I have the following statement in my exit policy:
ExitPolicy reject 66.35.250.0/24
This is the first line in my exit policy.
Yet, in my info file, I have several entries showing connections established
to *.slashdot.org:
Jun 30 06:47:44.171 [info] dnsworker_main(): Resolved address
Jun 30 06:47:44.187 [info] connection_add(): new conn type Exit, socket
2696, nfds 147.
Jun 30 06:47:44.218 [info] connection_edge_finished_connecting(): Exit
connection to slashdot.org:80 established.
Jun 30 07:30:40.062 [info] dnsworker_main(): Resolved address
Jun 30 07:30:40.062 [info] connection_add(): new conn type Exit, socket
2180, nfds 195.
Jun 30 07:30:40.062 [info] connection_add(): new conn type Exit, socket
3132, nfds 196.
Jun 30 07:30:40.093 [info] connection_edge_finished_connecting(): Exit
connection to images.slashdot.org:80 established.
Jun 30 07:30:40.093 [info] connection_edge_finished_connecting(): Exit
connection to images.slashdot.org:80 established.
Jun 30 07:30:40.171 [info] command_process_destroy_cell(): Received for
circID 58259.
Jun 30 07:30:40.281 [info] connection_add(): new conn type Exit, socket
2976, nfds 197.
Jun 30 07:30:40.281 [info] connection_add(): new conn type Exit, socket
3312, nfds 198.
Jun 30 07:30:40.312 [info] connection_edge_finished_connecting(): Exit
connection to images.slashdot.org:80 established.
Jun 30 07:30:40.312 [info] connection_edge_finished_connecting(): Exit
connection to images.slashdot.org:80 established.
Jun 30 07:30:40.546 [info] connection_edge_reached_eof(): conn (fd 2180)
reached eof. Closing.
Jun 30 07:30:40.546 [info] conn_close_if_marked(): Cleaning up connection
(fd 2180).
Jun 30 07:30:40.546 [info] connection_remove(): removing socket 2180 (type
Exit), nfds now 197
Jun 30 07:30:40.546 [info] _connection_free(): closing fd 2180.
Jun 30 07:30:40.562 [info] connection_edge_reached_eof(): conn (fd 3132)
reached eof. Closing.
Jun 30 07:30:40.562 [info] conn_close_if_marked(): Cleaning up connection
(fd 3132).
Jun 30 07:30:40.562 [info] connection_remove(): removing socket 3132 (type
Exit), nfds now 196
Jun 30 07:30:40.562 [info] _connection_free(): closing fd 3132.
Showing that a connection was established, used, closed and cleaned up.
Why is this happening?

@_date: 2005-06-30 15:11:44
@_author: Bob 
@_subject: Is exit policy broken? 
Hash: SHA1
 It seems to accept either one, I'll try it with the ":*" and see if
 that makes a difference...

@_date: 2005-06-30 16:06:09
@_author: Bob 
@_subject: Is exit policy broken? 
The version of tor is  0.1.0.10 on winxp sp2, and I did restart it.  I
always get something in the 66.35.250.0/24 range for slashdot, here's a
Looking up at the 5 slashdot.org. parent servers:
Server					Response		Time
ns1.osdn.com 	[66.35.250.10]	66.35.250.150 	108ms
ns1.vasoftware.com [12.152.184.135]	66.35.250.150 	109ms
ns2.osdn.com 	[66.35.250.11]	66.35.250.150 	109ms
ns3.vasoftware.com [66.35.250.12]	66.35.250.150 	109ms
ns2.vasoftware.com [12.152.184.136]	[Error: Socket error 10054 [s=4728
tcp=0]]	218ms
So, as far as I know these are the correct address ranges (thereabouts...).
I don't know if the behavior was duplicated  in previous versions.
Btw, for now it is set up with reject *:* (middleman only), until I figure
this out, so are these entries normal for that?
Jun 30 16:04:25.875 [info] connection_edge_finished_connecting(): Exit
connection to 69.44.153.178:2710 established.
Jun 30 16:04:25.890 [info] connection_edge_finished_connecting(): Exit
connection to 83.140.65.130:80 established.
Or, am I misreading what the log means by "Exit connection"?
-----Original Message-----
Behalf Of Roger Dingledine
Sent: Thursday, June 30, 2005 3:28 PM
Which Tor server is this?
Which version of Tor?
Are you sure it is running with the exit policy you described? That
is, you restarted (or hupped) it after changing the torrc.
Is your DNS server always returning an IP for slashdot.org that's
within the range in your line above, or is it (sometimes) returning some
other IP?
Does this behavior show up for you with earlier versions of Tor too?

@_date: 2005-06-09 01:39:00
@_author: Bob 
@_subject: Exit policies by site? 
Hash: SHA1
I can see that this could be a slippery slope to go down, could be
seen as censorship, BUT, is there anyway to set up exit policies that
reference ip addresses or fqdns?
I've had a tor server with the default exit policy running for about
18 - 24 hours now, and MY ip is already on the /. ban list.
If I can't tighten up my exit policy the way I want to, I'm gonna
have to be just a middleman, and then I can't get the bitchin'

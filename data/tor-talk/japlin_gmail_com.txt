
@_date: 2011-08-14 20:47:13
@_author: Justin Aplin 
@_subject: [tor-talk] Any problem installing TBB & Vidalia bundle on same 
Alternatively, as a hackish fix, you could modify your "permanent" installation to bind to ports that won't conflict with TBB. Off the top of my head, I think you'd want to pick non-default values for ControlPort and SocksPort in your torrc (with matching values in Vidalia), as well as a non-default value for proxyPort in Polipo's config file, and changing socksParentProxy (also in Polipo's config file) to point to the new value you've given to torrc's SocksPort.
I don't have TorButton to fenangle with on this computer, but I'm sure somewhere in its options or in about:config you can change the port it looks for Polipo on, or plug it directly into Tor's socks port if you're not using Polipo.
The ultimate goal here is to have your "permanent" installation of Tor/Vidalia/Polipo/Firefox/Torbutton use a completely different set of ports than TBB. Like I said, hackish, but the result should be worth it if you use both often.
~Justin Aplin

@_date: 2011-08-15 18:41:01
@_author: Justin Aplin 
@_subject: [tor-talk] Any problem installing TBB & Vidalia bundle on same 
They are the defaults, yes, but they can be overridden. You can use either SocksPort or SocksListenAddress in your torrc to specify a different port (other than 9050) for Tor to listen for SOCKS connections, and you can use proxyPort in Polio's config file to specify a different port (other than 8118) for Polipo to listen for HTTP/SSL connections on. The Polipo config option socksParentProxy specifies *where* the data received from proxyPort should be fed to, so in this case you would want it to match SocksPort, so that your HTTP/SSL data gets fed into the Tor SOCKS port.
The idea is that you could use TBB "stock", without editing any options (ie, all default ports: 8118, 9050, 9051, etc), where all data from the TBB instance of Firefox is fed into the TBB instance of Polipo on 8118, piped to the TBB instance of Tor on 9050, and controlled on port 9051 by the TBB instance of Vidalia.
What you're trying to edit is your "permanent" installations of these programs, where the data from the permanent instance of Firefox is fed into the permanent instance of Polipo on a custom port you define, piped to the permanent instance of Tor on a custom port you define, and controlled by the permanent instance of Vidalia on a custom port you define.
What you end up with is two different "sets" of Firefox/Polipo/Tor/Vidalia operating independently, which I think is what you were trying to accomplish in the first place. The only thing I'm not sure of is where Torbutton fits into all this, but I get the feeling that it shouldn't require too much fenangling with the options in the "permanent" instance's options to get things up and running.
~Justin Aplin

@_date: 2011-08-21 15:28:44
@_author: Justin Aplin 
@_subject: [tor-talk] New Tor Browser Bundles with Firefox 6 
What you're doing here is switching from a bundle of software that has *known*, readily-exploitable security issues, to a bundle which fixes those particular issues but *might* have unknown security issues. Some of these unknown issues may have also existed in the previous version(s), some may be new. Since software will rarely, if ever, be "exploit-free", by upgrading in this manner you're taking a small risk of opening yourself up to new exploits in order to greatly reduce your risk of being exposed to current ones.
In my experience, developers usually say this because they don't want to be held responsible (read: blamed) for compromising the stability of production machines. This applies to Tor as well, since the alpha and beta branches tend to crash more frequently than the stable branch does. But since the alpha and beta branches tend to include new features, and since the majority of new features in Tor are geared toward improving security, the same logic as above applies.
~Justin Aplin

@_date: 2011-12-21 21:35:26
@_author: Justin Aplin 
@_subject: [tor-talk] How can I get Vidalia to work when I am loading Tor 
How are you killing it? I imagine most of your issues are caused by an unclean process shutdown. Try sending a SIGTERM or SIGINT and see if the issue persists.
I do this all the time without issue, except that Vidalia is connecting to the control socket on the instance of tor that automatically starts with my system (i.e., I have the same setup without the kill step).
Why don't you change the system default torrc, instead of manually pointing it at your custom one? Or if that's not possible, then change the system startup script for tor to include a command-line option pointing to your custom torrc?
~Justin Aplin

@_date: 2011-12-21 21:43:36
@_author: Justin Aplin 
@_subject: [tor-talk] Tor on two computers, one IP? 
You've got it right. Many of our biggest relays are actually multi-core systems with one tor instance running on each core, all on the same network connection (since processor utilization tends to bottom out before network bandwidth). Each separate instance (whether on one machine or several) should have a unique ORPort and DirPort, and your router should forward the proper set of ports to the proper machine. Each machine should have the corresponding two ports opened in their firewall. Technically, each node you run should have each of the other's fingerprint(s) in the MyFamily option of their torrc, but since tor never builds circuits within the same /16 subnet anyway, a circuit will never be built with two nodes coming from the same IP. Otherwise, the authorities don't care at all.
Thanks for contributing!
~Justin Aplin

@_date: 2011-12-21 21:59:08
@_author: Justin Aplin 
@_subject: [tor-talk] Automatic vulnerability scanning of Tor Network? 
While I totally get both sides of this argument *in theory*, all of this sounds a lot to me like getting pissed off about someone ringing your doorbell because they didn't mail you an opt-in form first. Certainly I'd be pissed if someone decided to test my home security by trying to jimmy a lock or force a door (or even going around seeing if any doors are unlocked, despite that being my own bad), but if I'm going to provide a service (tor/doorbell) it has to be expected that occasionally someone unexpected is going to use it, whether this is a pleasant surprise (girl-scouts/friendly-researcher) or a hell of an annoyance (traveling-salesman/malicious-hacker).
At any rate, since you've found that your view of ethics clearly does not match many others' on the internet, and have since taken your node(s) down, why is this still an issue?
Mike's advice is really the best way to go here.
~Justin Aplin

@_date: 2011-07-10 12:42:52
@_author: Justin Aplin 
@_subject: [tor-talk] Downloading Firefox add-ons trough Tor. Safe? 
HTTPS transport should prevent the type of modification you're talking about, so just double-check your URIs before downloading anything. For example, NoScript:
And TorButton:
~Justin Aplin

@_date: 2011-07-11 00:26:14
@_author: Justin Aplin 
@_subject: [tor-talk] Downloading Firefox add-ons trough Tor. Safe? 
I honestly don't know, but if you're *that* paranoid about your downloads being tampered with, navigating to  and looking up the add-ons manually is only a few extra clicks.
~Justin Aplin

@_date: 2011-06-20 15:45:30
@_author: Justin Aplin 
@_subject: [tor-talk] How to choose to get connected to a specific relay? 
The "abcd.com" in that example is any website you want to visit, followed by a dot, the fingerprint of the exit you want your traffic to exit from, and then ".exit". The fingerprint of a router is its unique identifier, and can be found in the "Network Map" window of Vidalia by right-clicking on the desired router's name, selecting "copy", and then "fingerprint". They are also available on the status websites, notably So, for example, to visit "torproject.org" and route your traffic through the "blutmagie" exit, you would enable torbutton and point your browser to ~Justin Aplin

@_date: 2011-06-20 19:34:42
@_author: Justin Aplin 
@_subject: [tor-talk] How to choose to get connected to a specific relay? 
Adding a " to the address makes it work properly: I'm actually not sure why that happens; I'm guessing it's a security feature not allowing domain redirections. A technical explanation would be appreciated, if anyone happens to know :-)
~Justin Aplin

@_date: 2011-06-21 18:13:27
@_author: Justin Aplin 
@_subject: [tor-talk] Tor 0.2.2.29-beta is out 
This is the latest in the stable branch. 0.2.2.x is the beta branch, and 0.2.3.x is the alpha branch.
If you want the beta branch on Lucid, add this line just under the one you already have in /etc/apt/sources.list:
deb  experimental-lucid main
The keys are the same, so once you have both deb lines in place, a simple apt-get update and apt-get upgrade will install the latest 0.2.2.x package available. (There may be a delay between source releases and package releases.)
If you want the alpha branch, I believe you'll have to build it yourself. Sources are available at  if you feel like venturing into that territory.
~Justin Aplin

@_date: 2011-10-08 16:57:27
@_author: Justin Aplin 
@_subject: [tor-talk] using bridge directly 
I'm not sure what you're looking for. If you want to be able to specify a particular *exit* in the address bar, check out the AllowDotExit entry in the manual. Picking a particular *entry* node, as far as I know, would require you to use the Bridge and UseBridges entries in your torrc, which isn't nearly as flexible.
~Justin Aplin

@_date: 2011-09-19 21:47:13
@_author: Justin Aplin 
@_subject: [tor-talk] NT Service installation does not handle ``bridge 
Windows uses a special account, with it's own home directory and separate set of environmental variables, to run NT services. Odds are, when you start the service, tor has no idea where your torrc is, and is dropping to "reasonable default" values. This is why the default ORPort of 9050 is being used.
The trick is declaring a path to the torrc you want to use in the service invocation (using the -f flag), making sure the SERVICE account has permission to read the torrc (which could be an issue if it's in one of your personal home folders), and making sure DataDirectory is declared in your torrc (to ensure the same keys are being used every time).
This is covered in a bit more detail in this archive thread: ~Justin Aplin

@_date: 2011-09-20 10:49:20
@_author: Justin Aplin 
@_subject: [tor-talk] NT Service installation does not handle ``bridge 
Honestly, I haven't messed with service installation since that post was made; I imagine the installation process has been changed. I don't have a Windows computer handy to mess around with the new versions, but if you're feeling adventurous, you could add the parameters in manually by going to the HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tor key in the registry, finding the entry that contains the --nt-service tag, and adding "-f" "C:\blah\torrc" to the tail end of it. Alternatively, you could guess where Tor is looking for the torrc (probably Application Data\Vidalia in the service account's home directory) and try placing a copy of your torrc there.
~Justin Aplin

@_date: 2011-09-20 21:36:51
@_author: Justin Aplin 
@_subject: [tor-talk] Updating problem - failed to fetch URL 
Use the Lucid repos, or use the instructions here to build your own .debs: ~Justin Aplin

@_date: 2012-04-12 17:23:55
@_author: Justin Aplin 
@_subject: [tor-talk] Tor relay data usage 
There are two ways to do this, either by capping the average bandwidth that Tor uses to relay, or by setting the relay to go into hibernation after a certain amount of data has been relayed. Assuming you only want Tor to use about 30GB of data per month, you could set "RelayBandwidthRate 12 KB" in your torrc; although this isn't a strict cap, Tor will automatically average out bandwidth usage for relayed traffic to this rate. Alternatively, you can set "AccountingMax 30 GB" and "AccountingStart month 1 0:00" in the torrc, which will cause Tor to stop relaying traffic after using 30GB of data in a 28-day period, without limiting the bandwidth within that period. You can also set both as a safety measure, although it's a bit redundant.
Since 12 KBps is sort of a sad rate for a relay, I'd probably go the second route in your case and just set a monthly accounting limit, leaving the rate uncapped unless Tor is interfering with your normal internet activities (in which case, I'd set it to, say, 80% of your provider's advertised bandwidth, or whatever else you find appropriate, which will limit Tor enough to leave your internet connection usable, but still run up against the limit set by AccountingMax eventually).
~Justin Aplin

@_date: 2012-08-04 23:39:38
@_author: Justin Aplin 
@_subject: [tor-talk] transfer .onion addreess to another server 
I'm going to assume that you're migrating your entire Tor node (including the hidden service) to a new physical server, instead of trying to move the hidden service from one Tor node to another.
Moving the "keys" directory (and all its contents) and the "fingerprint" file from the DataDirectory of your current node to the DataDirectory of your new node will preserve the identity of your node. Moving the "private_key" and "hostname" files from the HiddenServiceDirectory of your current node to the HiddenServiceDirectory of your new node will preserve the identity of your hidden service.
If you do both of these, nobody should be able to tell that anything has been changed. When you've made sure everything is running as expected, you can delete the DataDirectory and HiddenServiceDirectory on the old hardware to prevent duplicate server descriptors (which will result in odd behavior, like your hidden service only being reachable some of the time). If you plan to continue running a Tor node on the old hardware, a new set of keys and a new fingerprint will automatically be generated.
~Justin Aplin

@_date: 2012-02-15 13:52:57
@_author: Justin Aplin 
@_subject: [tor-talk] shutdown latencies 
If this is actually set to 30 minutes, and not 30 seconds, I believe that's your problem; read below.
It signals your node to stop accepting new connections, and not renew existing ones when they end. This allows those clients who were connected through your node to smoothly transition to a new node without interruption. At the end of the ShutdownWaitLength timeout, all connections are killed regardless, and the node shuts down. The red Vidalia icon indicates that the node is in the middle of this process, but has not yet shut down.
As far as I know, the red icon indicates the former, as my nodes have a 30 second wait time, but frequently only sit in the "red phase" for 10-15 seconds.
~Justin Aplin

@_date: 2012-02-15 17:47:41
@_author: Justin Aplin 
@_subject: [tor-talk] shutdown latencies 
I think you're misunderstanding the point of the clean shutdown procedure slightly. Bridges, exits, and middle nodes publish new server descriptors every time they start, regardless of what their shutdown state was. So when you reboot your machine, it's not coming back up "before the bridge goes down", the bridge was "down" as soon as its process was killed in the shutdown. The new instance on the newly rebooted machine will be added to the network as soon as Tor starts again.
People who already have your IP/fingerprint listed as one of their bridges will be able to resume using your node as soon as the Tor process starts running again.
This is true as long as the user has more than one bridge listed. When yours stops accepting connections, their client will automatically switch to another, (hopefully) providing an uninterrupted connection. The same is true for users not using bridges, except that they have a much larger pool of new nodes to pull from, since they don't have to list which ones to use manually.
Since your node stops accepting new connections as soon as its shutdown process starts, it may actually better serve the network to have a short shutdown time (say, a minute or so). Say, theoretically, several people usually use your node at once, and only one of them is holding up the shutdown process, this limits the usability of your bridge for that half hour or so to just that one person. If you get the reboot over with quickly, however, you get the node back up in its fully-working state, able to accept multiple connections, much faster.
The fact that Tor is taking the full 30 minutes to shut down is bothering me, as I've never seen that behavior before. I have a hunch that there is one or more people out there for whom you are the only bridge (or the only working bridge) on their list, so they have nobody to switch to when you shut down. There's nothing you can do about that, however, and I'd still recommend the shorter timeout above.
Thanks for running a bridge!
~Justin Aplin

@_date: 2012-02-15 20:07:06
@_author: Justin Aplin 
@_subject: [tor-talk] Win32 expert bundle link broken 
The link to the win32 expert bundle on the project website is broken and should be corrected to ~Justin Aplin

@_date: 2012-02-19 23:51:09
@_author: Justin Aplin 
@_subject: [tor-talk] Tor directory servers 
It's well-known that all non-bridge node information is maintained on the metrics website, as well as in the data directory of every running client. There's nothing secret about it. As far as blocking exit nodes, the Tor DNSBL is publicly provided for this reason precisely.
~Justin Aplin

@_date: 2012-03-02 10:16:55
@_author: Justin Aplin 
@_subject: [tor-talk] How tor skip firewall ? 
It's less to do with encryption and more to do with how Tor routes traffic. The iptables rules you've implemented prevent connections from your machine to the particular sites you've blocked; however, all Tor connections are between your machine and entry nodes, which are allowed connections in your iptables. The connection to the site itself occurs at the exit node.
~Justin Aplin

@_date: 2012-05-02 10:32:37
@_author: Justin Aplin 
@_subject: [tor-talk] fingerprint/IP 
As long as "Publishing server descriptor" appears in your tor log, everything should be fine. Several nodes per IP (or even several nodes per box, if CPU core usage is topping out before bandwidth usage) isn't terribly uncommon.
~Justin Aplin

@_date: 2012-05-18 23:59:40
@_author: Justin Aplin 
@_subject: [tor-talk] Is my ISP censoring my access to Tor? 
I believe this is true for all but the Windows packages, in order to avoid interference with other Tor instances (i.e. other TBB instances or an exit/relay). The only reason this isn't default behavior in Windows packages is because the code used to randomize port selection seems to trigger an inordinate number of antivirus warnings.
~Justin Aplin

@_date: 2012-09-05 02:15:21
@_author: Justin Aplin 
@_subject: [tor-talk] Disable anything but hidden services 
Do you mean you're running a hidden service, and only want other people to be able to access your hidden service (and nothing else) through your node? If so, set up your hidden service normally [1], and then add the following to your torrc:
ExitPolicy accept 127.0.0.1:*
ExitPolicy reject *:*
This will allow exiting (connecting) to the local machine (where the hidden service should be listening) on all ports, and reject all other traffic.
If, on the other hand, you mean you want to connect to only hidden services *as a client*, without allowing any other traffic to exit your computer, then you've got me stumped. I'd like to know the solution if there is one, though.
[1] ~Justin Aplin

@_date: 2012-09-05 04:37:05
@_author: Justin Aplin 
@_subject: [tor-talk] Disable anything but hidden services 
Ahh, you're correct, I forgot that HIddenServicePort did port mappings automatically. I'm not sure the first line would have any security consequences, as 127.0.0.1 is the origin point, and would allow traffic originating from the machine to exit via the same machine, which would only happen with very strange configurations (i.e. all of the single-hop options set to true), if at all. But I do see that it is useless at best.
~Justin Aplin

@_date: 2013-04-12 07:13:00
@_author: Justin Aplin 
@_subject: [tor-talk] geoip6 
Geoip6 is simply a text list of the approximate physical address of IPv6 addresses. Having this makes it easy to do things like display the locations of exits on a map (as Vidalia can do). It's not at all necessary for Tor to work properly, and won't affect either client or server function, but it's a nifty feature.
If you like, you can grab geoip6 from [1] and save it in your data directory alongside geoip. If that doesn't fix the message, you can add the following line to your torrc:
GeoIPv6File \path\to\your\datadir\geoip6
Feel free to ignore them; the only thing that will happen is that IPv6 exits won't show up on Vidalia's map. Traffic won't be affected in any way.
[1] ~Justin Aplin

@_date: 2013-03-13 19:03:56
@_author: Justin Aplin 
@_subject: [tor-talk] Tor 0.2.4.11-alpha is out 
Initial runs are producing the following in the log:
Anything to worry about?
~Justin Aplin

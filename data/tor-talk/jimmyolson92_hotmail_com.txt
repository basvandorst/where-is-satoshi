
@_date: 2013-09-04 11:52:59
@_author: Jimmy Olson 
@_subject: [tor-talk] Tor using KVM/bridge/iptable filters 
Hi I am following the instructions on this page except it was wrong and the comment here fixes the problem
I would like a VM to use tor and be able to use flash and anything w/o leaks. My problem is I don't understand this part of linux and how to use iptables. I'd like to drop everything except TCP. I don't know what DNS lookup uses (is it TCP?) but there are plenty of other protocols besides tcp and udp How do I write rules that will drop everything except TCP and route it through tor?
My other question is instead of setting up a bridge on the host machine I'd like to do it on a VM. Then have qemu/kvm use the said bridge on the VM. However I don't know how to make the host machine see the bridge. Or how to create a bridge that goes from TorGuestVM<-(->HostMachine<-)->TorHostVM
I'm open to other ways as long as I can have a VM running with qemu/kvm that cannot communicate to the internet except through tor. Which I prefer to be in its own VM but the host is ok if I must.
I have looked at qubes. Qubes and xen doesn't seem to work on my hardware which is a disappointment.

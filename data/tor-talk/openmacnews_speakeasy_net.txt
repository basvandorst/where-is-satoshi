
@_date: 2005-08-20 13:58:34
@_author: OpenMacNews 
@_subject: tor w/ dansguardian & squid on remote box? 
hi all,
new to Tor
a client install on OSX works fine, as advertised.
rather than the 'default' setup of:
i'd rather not 'bog down' my local box.
on my gateway, i've already installed/use:
how would i go about implementing either:
all on that gateway box, making it accessible to any/all browser clients on my internal network?
is filtering-proxy-other-than-privoxy (e.g. DansGuardian) even an option?
digging around on the wiki, i'm wondering whether an SSH tunnel is the right/simplest approach, but -- 4 now -- i'm still in noob/learn-mode ...
thx 4 any pointers!

@_date: 2005-08-20 20:55:20
@_author: OpenMacNews 
@_subject: tor './configure' issues: DIR spec'ns not being honored ...  
hi all,
i'm building tor-0.1.1.5-alpha on OSX 10.4.2 from src.
after a:
i get a clean binary:
version 0.9.7)
current version 0.9.7)
version 2.2.0)
next, given 'typical' configure behavior, and my params as above, i'd expect to (1) the tor bin in:
and, it is.
(2) the tor config file, 'torrc' to end up in:
       /var/Settings/Tor/torrc
but it isn't.  instead, i find it pointed here:
       /var/Settings/Tor/tor/torrc
(3) the tor process' "keys and other data" in:
              The configuration file, which contains "option value" pairs.
       /var/Process/ (where i'd usually find its PID)
             or, at least:
       /var/Process/Tor (or somesuch tor-specific dir)
but rather, they're to be found in:
       /var/Process/lib/tor/
is there some reason that these 'placements' are non-standard?
is there a workaround to actually put things where i want them to be?

@_date: 2005-08-20 21:09:25
@_author: OpenMacNews 
@_subject: tor-0.1.1.5-alpha 'make check' failure on OSX 10.4.2 
hi all,
i'm building tor-0.1.1.5-alpha on OSX 10.4.2 from src.
the built binary seems to run fine, but a 'make check' fails with:
    % make check
        Making check in src
        Making check in common
        make[2]: Nothing to be done for `check'.
        Making check in or
        make  check-TESTS
        config.c:1343 config_init: Assertion (fmt)->magic ==
        *(uint32_t*)(((char*)(options))+fmt->magic_offset) failed; aborting.
        FAIL: test
        ===================
        1 of 1 tests failed
        ===================
        make[3]: *** [check-TESTS] Error 1
        make[2]: *** [check-am] Error 2
        make[1]: *** [check-recursive] Error 1
        make: *** [check-recursive] Error 1

@_date: 2005-08-21 14:14:55
@_author: OpenMacNews 
@_subject: tor-0.1.1.5-alpha 'make check' failure on OSX 10.4.2 
heh. fair nuf. thought you wer asking cuz you *did* have a fix on OSX ...
hence, i'll wait patiently and/or re-ping the list later ...

@_date: 2005-08-23 09:49:24
@_author: OpenMacNews 
@_subject: [take 2] tor-0.1.1.5-alpha 'make check' failure on OSX 10.4.2 
let's try this again ...
is this a problem to be concerned about?
hi all,
i'm building tor-0.1.1.5-alpha on OSX 10.4.2 from src.
the built binary seems to run fine, but a 'make check' fails with:
    % make check
        Making check in src
        Making check in common
        make[2]: Nothing to be done for `check'.
        Making check in or
        make  check-TESTS
        config.c:1343 config_init: Assertion (fmt)->magic ==
        *(uint32_t*)(((char*)(options))+fmt->magic_offset) failed; aborting.
        FAIL: test
        ===================
        1 of 1 tests failed
        ===================
        make[3]: *** [check-TESTS] Error 1
        make[2]: *** [check-am] Error 2
        make[1]: *** [check-recursive] Error 1
        make: *** [check-recursive] Error 1

@_date: 2005-08-23 11:31:48
@_author: OpenMacNews 
@_subject: [take 2] tor-0.1.1.5-alpha 'make check' failure on OSX 10.4.2 
no. it's a standard part of the gnu build system ...
per, e.g., "Support for test suites. You can very easily write test suite code, and by adding one extra line in your `Makefile.am' make a check target available such that you can compile and run the entire test suite by running make check."
if i'm reading the makefile correctly, a 'check' target *is* defined here ...

@_date: 2005-08-24 21:06:05
@_author: OpenMacNews 
@_subject: PIDFile not written/missing in  tor-0.1.1.5-alpha-cvs 
hi all,
i've built TOR v0.1.1.5-alpha-cvs from src, and installed on OSX 10.4.2.
my binary is running ...
and i've defined the PIDFile in tor.conf
but when I look for the PID, i find nothing ...
i can't find any trace of it in 'the usual locations' either ...
error?  am i missing something?

@_date: 2005-08-24 22:22:08
@_author: OpenMacNews 
@_subject: PIDFile not written/missing in  tor-0.1.1.5-alpha-cvs 
thanks 4 the reply =)
ok, let's try some games ...
in each of the following cases for changing tor.conf -->
i find NO pid file ...
% ls /var/Process/tor.pid
checking my syslog, i find in each case:
Aug 24 21:58:37 devbox Tor: Initialized libevent version 1.1a using method poll. Good.
Aug 24 21:58:37 devbox Tor: write_pidfile(): Unable to open  No such file or directory
Aug 24 21:58:37 devbox Tor: connection_create_listener(): Opening Socks listener on 127.0.0.1:9050
Aug 24 21:58:37 devbox Tor: connection_create_listener(): Opening Control listener on 127.0.0.1:9051
Aug 24 21:58:43 devbox Tor: Tor has successfully opened a circuit. Looks like it's working.
hmmmm.  it's running ... but no pid.
looking for write_pidfile() in src/or/config.c ...
  ...
  /* Write our pid to the pid file. If we do not have write permissions we
   * will log a warning */
  if (options->PidFile)
    write_pidfile(options->PidFile);
  ...
do i have a perms issue?
% ls -ald /var/Process
shouldn't be :-/
something's odd ... is it me?

@_date: 2005-08-24 23:31:13
@_author: OpenMacNews 
@_subject: PIDFile not written/missing in  tor-0.1.1.5-alpha-cvs 
hi thomas,
this just checked in the case-change, but not the ongoing problem (well, *mine*, anyway ...) of the PidFile not being written ...
or, were you suggesting that there was 'more' to the fix?

@_date: 2005-08-25 09:20:49
@_author: OpenMacNews 
@_subject: PIDFile not written/missing in  tor-0.1.1.5-alpha-cvs 
heh. yeah, well. THERE'S a surprise!  ;-D
yes.  from my tor.conf (torrc):
    User devuser
    Group devgrp
    % ls -ald /var/Process
        drwxrwxr-x  6 devuser devgrp 204 Aug 24 21:35 /var/Process
    % ps -aux
    ...
    devuser   878   0.0  0.4    30424   3472  ??  S     9:17AM   0:06.42     ...
all looks as it should ... argh. grumble.

@_date: 2005-08-25 10:21:43
@_author: OpenMacNews 
@_subject: PIDFile not written/missing in  tor-0.1.1.5-alpha-cvs 
fair question.
short answer:  nope.
if i try to launch my build with 'stock' torrc, i get no launch, and no errors in my syslog.  i'll worry abt this later ...
so, instead i commented out the pidfile stmt, letting it fall back to default:
editing in .../tor.conf,
on launch, syslog -->
poll. Good.
 No such file or directory
listener on 127.0.0.1:9050
listener on 127.0.0.1:9051
it's working.
still complaining abt the missing pidfile ...
on launch, syslog -->
poll. Good.
listener on 127.0.0.1:9050
listener on 127.0.0.1:9051
it's working.
no error, but i can STILL find no trace of Tor.pid (the default ...)
p.s.  silly question:  what is "or-talk at freehaven.net", which is set as your reply: string, rather than the list addr of "or-talk at seul.org"?  i presume it's a mirror ... but have completely missed any reference to it @

@_date: 2005-08-26 08:16:35
@_author: OpenMacNews 
@_subject: PIDFile not written/missing in  tor-0.1.1.5-alpha-cvs 
well, not _really_.  but, fwiw, here are my build notes:
% unsetenv CFLAGS CPPFLAGS CXX CXXFLAGS LDFLAGS LDDLFLAGS LD_PREBIND LC_ALL LANG LINGUAS
% setenv LDFLAGS "-L/usr/local/lib -lz"
% setenv CPPFLAGS "-I/usr/local/include"
% autoreconf -i -f
% ./configure \
  --prefix=/usr/local/tor \
  --localstatedir=/var/Process \
  --sysconfdir=/var/Settings/Tor  \
  --mandir=/var/Documentation/man \
--enable-debug \
--enable-threads \
--enable-largefile \
   ...
% make
% make install
% /usr/local/tor/bin/tor -V
software. Do not rely on it for strong anonymity.
poll. Good.
listener on 127.0.0.1:9050
need to, and you probably shouldn't.
it's working.
% otool -L /usr/local/tor/bin/tor
version 0.9.7)
version 0.9.7)
version 2.2.0)
make check
happy to help track this down further ... just let me know what you need.
i'll start a 'near-stock' build here in a second ... w/
    ./configure --prefix=/usr/local/tor-test

@_date: 2005-08-26 08:48:25
@_author: OpenMacNews 
@_subject: PIDFile not written/missing in  tor-0.1.1.5-alpha-cvs 
well so far ... yes.
but given my current svcs mgr script depends on a pidfile existing w/ correct content, just a little inconvevient ...
not that i can't quickly cobble up a fix, of course ...
that said, the pidfile not being written -- and not having the prpb w/ any other app -- makes be a bit concerned abt the code's mgmt of files/dirs/perms especially for a public (eventually) service!
could be just a prob specific to this one file, or a broader issue .... just dunno yet.

@_date: 2005-08-26 10:38:08
@_author: OpenMacNews 
@_subject: PIDFile not written/missing in  tor-0.1.1.5-alpha-cvs 
given a clean/stock build as:
% cvs -d :pserver:guest at cvs.seul.org:/home/or/cvsroot co -d tor-cvs tor
% unsetenv CFLAGS CPPFLAGS CXX CXXFLAGS LDFLAGS LDDLFLAGS LD_PREBIND LC_ALL LANG LINGUAS
% cd ./tor-cvs
% autoreconf -i -f
% ./configure \
   --prefix=/usr/local/tor-test
% make
% make install
% cp /usr/local/tor-test/etc/tor/torrc.sample /usr/local/tor-test/etc/tor/torrc
% cp torrc.sample torrc
% /usr/local/tor-test/etc/tor
syslog shows:
    ...
    Aug 26 10:24:18.708 [notice] Tor v0.1.1.5-alpha-cvs. This is experimental
    software. Do not rely on it for strong anonymity.
    Aug 26 10:24:18.712 [notice] Initialized libevent version 1.1a using method
    poll. Good.
    Aug 26 10:24:18.713 [notice] connection_create_listener(): Opening Socks
    listener on 127.0.0.1:9050
    Aug 26 10:24:18.715 [warn] tor_init(): You are running Tor as root. You
    don't need to, and you probably shouldn't.
    Aug 26 10:24:35.487 [notice] Tor has successfully opened a circuit. Looks
    like it's working.
% ps -ax | grep tor
  525  p2  R+     0:04.37 ./tor
but, alas:
% ls -al /private/var/run/Tor.pid
no pidfile is being written.
soooo, per my earlier points ... is this indicative of any OTHER file/dir/perms problems in tor, or JUST this particular file?
i suspect it may be the former ... but, again, simply dunno.
thoughts/next steps?

@_date: 2005-08-26 11:09:53
@_author: OpenMacNews 
@_subject: PIDFile not written/missing in  tor-0.1.1.5-alpha-cvs 
certainly.  tho i didn't _think_ i saw any issues ...
nonetheless, i'll forward it to you directly as an attach, rather than 'torture' the list ...

@_date: 2005-08-26 11:58:40
@_author: OpenMacNews 
@_subject: [resolved] Re: PIDFile not written/missing in  tor-0.1.1.5-alpha-cvs 
hi roger,
well, those quotes i stuck in there sometime during the futz-around-with-capitalization-of-pidfile procedure ...
                      grumble ... mumble ... stomp around ...  ;-)
ok. two things need changing in tor.conf ...
    PIDFile --> PidFile
    PidFile "/var/Process/tor.pid" --> PidFile /var/Process/tor.pid
i was just having some ADDITIONAL wierdness with latest cvs no longer building w/o a make error ... which went away with a delete-everything-and-re-DL ... soooooo, FINALLY, with the changees to the capitalization & quotes in torrc as ./configure \
  --prefix=/usr/local/tor \
  --localstatedir=/var/Process \
  --sysconfdir=/var/Settings/Tor  \
  --mandir=/var/Documentation/man \
--enable-debug \
--enable-threads \
--enable-largefile \
now builds/isntalls/executes without error, and ...
% ls -al /var/Process/tor.pid
    -rw-r--r--  1 devuser devgrp 6 Aug 26 11:49 /var/Process/tor.pid
jeesh, what a firedrill ;-)
thx for the pointers, folks ... now off to actually USE this thing!

@_date: 2005-08-27 15:06:24
@_author: OpenMacNews 
@_subject: question abt Squid3 usage w/ Tor 
i've Squid25 + Privoxy303 + Tor 0115alpha-cvs on OSX 10.4.2.
i've DL'd installed Squid30-alpha.
the Tor wiki's suggested config for squid.conf has a bunch of 'header_access" in squid3, 'header_access' seems to have been superceded by TWO directives ...
    request_header_access
    reply_header_access
for use with Tor, now, which of the 2 *new* directives should my old config stmts be replaced with, or should i *duplicate* the section, once for each directive ...
thinking abt header 'flows' w.r.t. has got me just a little confused ...

@_date: 2005-08-29 20:06:39
@_author: OpenMacNews 
@_subject: selecting Node lists by  criteria? 
hi all,
is it possible to specify Node 'collections', i.e. the arg lists for:
    NodeFamily
    EntryNodes
    ExitNodes
    ExcludeNodes
    RendNodes
by individual criteria?
    EntryNodes == ONLY nodes in US
    ExcludeNodes == nodes w/ bandwidth bet AAA & BBB
    RendNode == anything BUT china

@_date: 2005-08-30 09:38:17
@_author: OpenMacNews 
@_subject: google search redirected to language/country of Tor exit node 
hi all,
i'm experiencing a bit of oddness with Google Search when using Tor ...
i'm using FireFox106 thru a Squid+Privoxy+Tor setup on OSX.
if i navigate to a site while Tor'd, and find that my exit point is, e.g. in Poland, and then enter a search via the Google toolbar, my search results page comes up as  -- in Polish.
this behavior SEEMS to indepdendent of my google prefs ... set to English at the moment.
is this an expected behavior, for any given exit point?  or some sort of preference (Google? Squid? Tor?) setting that i haven't yet ferreted out?

@_date: 2005-08-30 10:19:15
@_author: OpenMacNews 
@_subject: google search redirected to language/country of Tor exit node 
ok, so who REALLY expects a well written FAQ ... ;-}
    > But we consider this a feature with Tor, not a bug
fair enuf.  that's a choice.
but i i'd were to choose to bypass/circumvent this geolocation detection behavior, what's the most appropriate way to do this?
i can, of course, set the general proxy behavior at the OS level to bypass proxy completely for google.com ... but that's not a clean solution.
is it possible to force navigation to specific URL's/Domains etc to open a new circuit through a specific set of endpoints, say US only?

@_date: 2005-08-30 10:23:30
@_author: OpenMacNews 
@_subject: google search redirected to language/country of Tor exit node 
hi matt,
the approach is clear/simple.
the immediate question for me is whether to "do it" in:
  (a) the /etc/hosts
  (b) my local DNS server's records
  (c) the Squid/Privoxy/Tor config files
and whether, by any of the above methods, I'm then complicating the whole DNS-leak matter I've been reading abt in the Privoxy/Firefox thread ...

@_date: 2005-08-30 10:51:42
@_author: OpenMacNews 
@_subject: configure/verify SSH connect thru Squid+Privoxy+Tor? 
hi all,
i've a proxy gateway configured with Squid + Privxy + Tor for anonymized works fine-n-dandy for web browsing.
now i'd LIKE to SSH to a remote shell with:
    pubkey session authentication
    routing via the Tor OR network
    SSL end-to-end encryption of the stream
the question is HOW?
a simple:
    ssh -l USER -L 8888:FQDN_OF_PROXY:8888 fqdn.of.target
connects, but seems to be INSENSITIVE to the  spec'n -- i.e., ANYTHING seems to work ...
i HAVE read in the FAQ (see, i CAN be trained!) about/around:
    "If you would like to enable a non-SSL client ... to connect to a server through Tor using SSL or TLS, you can use sslredir."
    "Our first answer is "then use end-to-end encryption such as SSL", which is great but not always practical."
    "If you want to use a service directly through the SOCKS interface (eg. ssh via connect.c), you'll probably have to set up an internal mapping in your configuration file using MapAddress"
but, frankly, in general, and given that I've added Squid to the mix ... I'm not at all certain how to
        (a) properly configure the SSH connect to use Tor, and
        (b) verify that the SSH session DID route through the OR network (unlike, e.g., using showmyip.com for web browsing ...)
in my config, squid listens on:
    http_port         10.0.0.6:8888
    http_port         127.0.0.1:8888
and forces connects to privoxy as a cahce_peer:
    acl Divert        myport        8888
    cache_peer                      127.0.0.1 parent 8118 7 no-query default
    never_direct      allow         Divert
where privoxy is listening/forwarding on:
    listen-address    127.0.0.1:8118
    permit-access     127.0.0.1
    forward-socks4a / 127.0.0.1:9050 .
and Tor catches the pass with:
    SocksPort 9050
    SocksBindAddress 127.0.0.1:9050
    SocksPolicy accept 127.0.0.1
    SocksPolicy reject *

@_date: 2005-08-30 11:33:26
@_author: OpenMacNews 
@_subject: configure/verify SSH connect thru Squid+Privoxy+Tor? 
well thanks again. though this is 'thick' enuf, i have to print it out to stare at it ... i know, so very "90's".
but  ...
"Torify". hmmmm. a new verb.
    "To Google, or NOT to Google, that is the question ..."
should it be"
    "To Torify, or NOT to Torify, that is the question ..."
or, rather, simply:
    "To Tor, or NOT to Tor, that is the question ..."

@_date: 2005-08-30 17:39:29
@_author: OpenMacNews 
@_subject: Google geolocation 
hi matt,
well, one way "around" this is in firefox is to use:
rather than the 'default' firefox toolbar
and specify English/US (or whatever ...) as the option for search in the toolbar.  then, search seems to be sent to a specific site w/ specific parameters, regardless of the exit point ...
at some point, i still suspect this is config'able in the Tor 'mappings' ... but gotta read/play more.

@_date: 2005-09-04 23:35:07
@_author: OpenMacNews 
@_subject: selecting Node lists by  criteria? 
hi all,
is it possible to specify Node 'collections', i.e. the arg lists for:
    NodeFamily
    EntryNodes
    ExitNodes
    ExcludeNodes
    RendNodes
by individual criteria?
    EntryNodes == ONLY nodes in US
    ExcludeNodes == nodes w/ bandwidth bet AAA & BBB
    RendNode == anything BUT china

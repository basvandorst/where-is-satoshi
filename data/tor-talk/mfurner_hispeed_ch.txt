
@_date: 2007-03-14 07:57:24
@_author: Mark Furner 
@_subject: Tor server crashes on a Linksys WRT54GL 
I am experimenting with a tor server on my Linux router, but it starts 5 processes and hogs all my CPU before crashing. I am using a Linksys WRT54GL with OpenWRT (White Russian RC6). An nmap scan did not show the port open (I have opened TCP ports 9001 and 9030 on my firewall). Any tips so I can get this working? I would like to donate more bandwidth during the night, and think I could start/stop the tor server with a different torrc config file. If someone has a better idea how to do this, then please also let me know.
Thanks for any help or pointers,
** uname -a **
Linux OpenWrt 2.4.30  Mon Nov 6 17:35:21 PST 2006 mips unknown
** top output: shows CPU hogging. After about 5 mins it seems to crash, during the worst stage DHCP and connections freeze. **
Mem: 11020K used, 3276K free, 0K shrd, 556K buff, 3400K cached
Load average: 0.12, 0.07, 0.02 ? ?(State: S=sleeping R=running, W=waiting)
? PID USER ? ? STATUS ? RSS ?PPID %CPU %MEM COMMAND
? 563 root ? ? R ? ? ? ?256 ? 560 ?1.3 ?1.7 top
? 559 root ? ? S ? ? ? ?264 ? 538 ?0.3 ?1.8 dropbear
? ? 3 root ? ? SWN ? ? ? ?0 ? ? 1 ?0.1 ?0.0 ksoftirqd_CPU0
? 752 tor ? ? ?S ? ? ? 3048 ? ? 1 ?0.0 21.3 tor
? 755 tor ? ? ?S ? ? ? 3048 ? 753 ?0.0 21.3 tor
? 754 tor ? ? ?S ? ? ? 3048 ? 753 ?0.0 21.3 tor
? 756 tor ? ? ?S ? ? ? 3048 ? 753 ?0.0 21.3 tor
? 753 tor ? ? ?S ? ? ? 3048 ? 752 ?0.0 21.3 tor
? 757 tor ? ? ?S ? ? ? 3048 ? 753 ?0.0 21.3 tor
? 565 root ? ? S ? ? ? ?380 ? 564 ?0.0 ?2.6 ash
? 530 nobody ? S ? ? ? ?336 ? ? 1 ?0.0 ?2.3 dnsmasq
? 547 root ? ? S ? ? ? ?312 ? ? 1 ?0.0 ?2.1 crond
? 512 root ? ? S ? ? ? ?312 ? ? 1 ?0.0 ?2.1 udhcpc
? 564 root ? ? S ? ? ? ?264 ? 538 ?0.0 ?1.8 dropbear
? ?94 root ? ? S ? ? ? ?252 ? ? 1 ?0.0 ?1.7 syslogd
? 441 root ? ? S ? ? ? ?132 ? ? 1 ?0.0 ?0.9 wifi
? ? 1 root ? ? S ? ? ? ? 96 ? ? 0 ?0.0 ?0.6 init
? 560 root ? ? S ? ? ? ? 72 ? 559 ?0.0 ?0.5 ash
? 543 root ? ? S ? ? ? ? 68 ? ? 1 ?0.0 ?0.4 httpd
**My torrc (with removed blanks and comments) **
SocksPort 0
AllowUnverifiedNodes middle,rendezvous
RunAsDaemon 1
DataDirectory /tmp/tor
nickname toerricht
Address toerricht.dyndns.org
ContactInfo E5066067/7725 75E4 AC6F 8233 D85E 20B2 938B EB06 E506 6067 [NAME REMOVED] ORPort 9001
ExitPolicy reject *:* # middleman only -- no exits allowed
BandwidthRate 20 KB
BandwidthBurst 20 KB
User tor
Group tor
PidFile /var/run/tor.pid

@_date: 2007-03-14 09:14:55
@_author: Mark Furner 
@_subject: Tor server crashes on a Linksys WRT54GL 
Hi Roger
The WRT54GL has about 16MB RAM. I was using an OpenWRT package of TOR version, 0.1.0.17. There is no gcc etc. on the box, and I doubt whether the thing could be compiled on it: will TOR run on such as puny system?
Thanks for the tips about bandwidth changes. If I ever get this thing working, I could donate more bandwidth when I ought be sleeping... BTW nmap can scan higher port nos if you set with a port range (-p1-65535 ) but I take your point about netstat (on the box itself).
Thanks for the tips
On Wednesday 14 March 2007 08:20, Roger Dingledine (Roger Dingledine ) may have written:

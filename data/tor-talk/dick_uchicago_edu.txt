
@_date: 2005-06-06 18:23:57
@_author: dick@uchicago.edu 
@_subject: tor+privoxy on openbsd: problems 
i've installed tor and privoxy on one of my openbsd boxen, as
described in the howto
. i am having issues with "dead" connections not being closed
and the resultant tor+privoxy combo being stalled with packets
just sitting. here is the output of netstat -la on the box in
$ netstat -la
Active Internet connections (including servers)
Proto Recv-Q Send-Q  Local Address          Foreign Address       (state)
tcp        0      0  cloaker.1067          mylinuxsys.net.6667    ESTABLISHED
tcp      539      0  cloaker.8118           chimaera.44067        CLOSE_WAIT
tcp      204      0  cloaker.8118           chimaera.29444        ESTABLISHED
tcp      482      0  cloaker.8118           chimaera.33199        CLOSE_WAIT
tcp      524      0  cloaker.8118           corporeal.23786       CLOSE_WAIT
tcp      398      0  cloaker.8118           corporeal.18186       CLOSE_WAIT
tcp      398      0  cloaker.8118           corporeal.17236       CLOSE_WAIT
tcp      400      0  cloaker.8118           corporeal.34635       ESTABLISHED
tcp      396      0  cloaker.8118           corporeal.1377        ESTABLISHED
tcp        0      0  cloaker.8118           corporeal.29005       CLOSE_WAIT
tcp        0      0  *.9050                 *.*                   LISTEN
tcp        0    368  cloaker.ssh            corporeal.7750        ESTABLISHED
tcp        0      0  *.8118                 *.*                   LISTEN
tcp        0      0  cloaker.ssh            corporeal.43708       ESTABLISHED
tcp        0      0  cloaker.ssh            corporeal.27471       ESTABLISHED
tcp        0      0  *.ssh                  *.*                   LISTEN
i know this doesn't look that great without code tags, but do
note the 539, 204, etc. in the leftmost column. these packets
are queued to go, but are just sitting. cloaker is my tor box
and chimaera and corporeal are remote boxen on my network.
i am running the privoxy-3.0.3p0 package for openbsd
3.7-release and have compiled tor 0.0.9.5 from source. i
suspect this is a problem with privoxy and not so much with
tor (especially when you note that it's privoxy with all the
hanging TCP sessions). however, i can't be sure of this since
i have no familiarity with either application.
my guess is that there's a configuration issue with privoxy,
but i only changed it as recommended in the aforementioned
howto. i don't have PF running on this box yet, maybe i should
change the TCP timeout settings?
in the meantime i'll try to install tor from the newest source
and be eagerly awaiting advice, as this relates to part of a
development project i'm working on.
if i can get tor+privoxy to reliably proxy http and https, i
will start up a server right quick and give back one of the
few things i can right now, bandwidth.

@_date: 2005-11-09 23:39:29
@_author: dick@uchicago.edu 
@_subject: Prerelease version of Torpark 
why no farsi?
fee, fi, fo fum, do i smell the blood of a zionist chum? even if that's the
case, giving iranian dissidents a means to communicate anonymously would serve
your interests.
or is it just a matter of there being no demand?
---- Original message ----

@_date: 2005-10-12 07:43:04
@_author: dick@uchicago.edu 
@_subject: Interoperating with p2p traffic 
mechanism?  Not
numbers?  Tor
through ssh
that kind
does anyone have an estimate of the percentage of tor traffic
which is from p2p? what is the overall outproxy bandwidth of
the tor network?
i think that throttling based on bandwidth usage would be a
good idea. it makes sense that the less you use the network,
the more priority you should have in doing so. i also think
that content filtering is bogus, but people using tor just to
download the latest crappy warez/music isn't any less so.
i heard that the newer versions of snort are able to filter
p2p traffic pretty effectively by working in conjunction with
the IDS "plugins" (e.g. snort2pf). maybe exit node operators
could setup a configuration like this to prevent p2p traffic
from coming out of their node? if i have time to set this up
i'll post back about it.

@_date: 2005-10-27 20:57:42
@_author: dick@uchicago.edu 
@_subject: update_router_descriptor_downloads problem? 
i've not been able to use tor yesterday evening and i took a
peek at the logs to see what's been happening. here's what i saw:
Oct 26 20:44:57.497 [debug] conn_write_callback(): socket 8
wants to write.
Oct 26 20:44:57.498 [info] connection_handle_write():
in-progress connect failed. Removing.
Oct 26 20:44:57.498 [info] connection_close_immediate(): fd 8,
type Directory, state connecting, 118 bytes on outbuf.
Oct 26 20:44:57.498 [info] conn_close_if_marked(): Cleaning up
connection (fd -1).
Oct 26 20:44:57.498 [debug] router_mark_as_down(): Marking
router 'peacetime' as down.
Oct 26 20:44:57.498 [info] connection_dir_request_failed():
Giving up on directory server at '18.244.0.188'; retrying
Oct 26 20:44:57.498 [info] connection_remove(): removing
socket -1 (type Directory), nfds now 4
Oct 26 20:45:08.561 [info] router_list_downloadable(): 1
router descriptors are downloadable; 339 are up to date; 0 a
re in progress; 0 are not ready to retry; 1 are not published
recently enough to be worthwhile; 3 are running pre-0.1
.1.6 Tors and aren't stale enough to replace.
Oct 26 20:45:08.561 [debug]
update_router_descriptor_downloads(): There are not many
downloadable routerdescs; waitin
g till we have some more.
Oct 26 20:45:19.671 [info] router_list_downloadable(): 1
router descriptors are downloadable; 339 are up to date; 0 a
re in progress; 0 are not ready to retry; 1 are not published
recently enough to be worthwhile; 3 are running pre-0.1
.1.6 Tors and aren't stale enough to replace.
Oct 26 20:45:19.671 [debug]
update_router_descriptor_downloads(): There are not many
downloadable routerdescs; waitin
g till we have some more.
i'm not sure what's going on here. any suggestions are
appreciated. maybe i should update to 0.1.1.8-alpha-cvs from
also, this is the third time i've tried to send this email to
the mailing list. i got 2 "undeliverable mail" messages when i
tried to send it last night.

@_date: 2005-09-15 12:21:41
@_author: dick@uchicago.edu 
@_subject: openbsd+0.1.1.7-alpha: packet backup 
i've posted here about this very same problem before (see
 i
figured that staying on the mailing list and watching the
progress would allow me to stay up-to-date with things so i
could give it a go again.
having now done so i find the same sorts of problems, but
they're lesser in magnitude. here's my netstat output when i
try to connect to maps.google.com:
X = my source public IP
Active Internet connections (including servers)
Proto Recv-Q Send-Q  Local Address          Foreign Address       (state)
tcp        0      0  10.0.3.2.45683         64.95.182.163.9001
    ESTABLISHED
tcp      498      0  10.0.3.2.8118          X.4575     ESTABLISHED
tcp      498      0  10.0.3.2.8118          X.4574     ESTABLISHED
tcp      498      0  10.0.3.2.8118          X.4573     ESTABLISHED
tcp        0      0  10.0.3.2.8118          X.4572     ESTABLISHED
tcp        0      0  10.0.3.2.27048         164.8.213.91.9001
     ESTABLISHED
tcp        0      0  *.8118                 *.*                   LISTEN
tcp        0      0  127.0.0.1.9050         *.*                   LISTEN
it appears that the packet backup issue is here to stay. any
advice on how to resolve this would be great.
i'm running openbsd 3.7-release, tor-0.1.1.7-alpha,
libevent-1.1a, and privoxy-3.0.3p0. tor does correctly load
the newer version of libevent and i made this work a la the
earlier posts on that topic (see
 the
problems occur when i connect with firefox to the privoxy
server i have (it's listening on all interfaces, not just
loopback; see netstat output above).
since tyranix spent a bunch of time writing the openbsd chroot
howto, i'd imagine that this configuration works for some
people. assistance would be much appreciated.

@_date: 2006-08-27 11:13:04
@_author: Jacob Yocom-Piatt 
@_subject: Skype Call Traced 
LOL! all i can say is that i'm glad kobi alexander blew his cover, he's a first
class corporate POS.
i'm suddenly feeling the drive to write volumes upon volumes of paranoia driven
stories about the future.

@_date: 2006-05-15 09:11:47
@_author: Jacob Yocom-Piatt 
@_subject: Some legal trouble with TOR in France 
i am to understand that it's a bit of a mess to have the root partition of any
*nix machine encrypted. netbsd's cgd is pretty solid, provided one only puts
sensitive data on it post cgd setup. cgd only works for non-root partitions.

@_date: 2006-09-19 09:21:17
@_author: Jacob Yocom-Piatt 
@_subject: [INFO] new anonymizing software 
when i got i2p running about a year ago i was sorely disappointed to discover
that there was almost 0 support for outproxying. not to mention that java is,
IMO, an unnecessary layer of complexity that has low utility unless you're
writing web-oriented or large sprawling apps.
maybe i2p is a good idea if you need to have a higher level of anonymity w/out
outproxying, but i wouldn't put my faith in the security of anything that is
java based.

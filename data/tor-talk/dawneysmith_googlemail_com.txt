
@_date: 2008-08-16 14:59:33
@_author: Dawney Smith 
@_subject: Update to default exit policy 
I know this has been discussed before, but I thought I'd bring it up
again. The following rules are in the default exit policy and I can't
see any reason why they would be:
reject *:465
reject *:587
Those are ports used for mail submission, not for mail relay. They wont
be abused by spammers. ISPs often block their consumer broadband users
from connecting to port 25 on servers outside of their network, to
prevent spam. They don't block 465 and 587, because they're not problem
ports and the point of them is, that you authenticate before sending
mail, unlike port 25. You wouldn't block port 443 to prevent spammers
submitting mail via  so why block these ports?
As I write this, there are only 28 exit nodes spread across 6 countries
that will exit to smtp.gmail.com:465. There's no advantage to blocking
this port, but a clear reduction in anonymity by limiting the nodes
exiting to it.

@_date: 2008-08-16 19:11:34
@_author: Dawney Smith 
@_subject: Update to default exit policy 
Hash: SHA1
Of course people can misconfigure their mail servers.
Well, yes, but that's not really relevant. The default exit policy of
blocking port 25 has nothing to do with stopping the abuse of open relays.
Lets assume port the exit policy is updated, and the ports opened, and I
want to send a spam to a gmail user.
Tor prevents me making a direct connection to their MX on port 25 to
deliver the spam to them. That's the point of blocking 25 by default.
Open relays don't come into it.
Opening port 465 or 587 doesn't change that. The only way I could
"abuse" ports 465/587 through Tor was if I found a misconfigured open
relay running on those ports. If a misconfigured open relay sends a load
of spam, people block the open relay, and don't concern themselves with
the initiating IP. If an open relays sends a load of spam, it is the
admin's fault of that relay for not locking it down properly.
Abusing an open relay through Tor is no different to abusing a website
through Tor.

@_date: 2008-08-19 10:20:27
@_author: Dawney Smith 
@_subject: Update to default exit policy 
Hash: SHA1
1.) Can anyone here show me a mail server that runs on port 587 or port
465 that doesn't require authentication to send email?
2.) Now can anyone here show me a mail server that runs on port 25 that
doesn't require authentication to send email?
I suspect the answer to 1 is either "no", or a list of a couple of
servers. I suspect the answer to number 2 is, yes, here's a list of a
few hundred thousand.
Lets be a little pragmatic here. After all, the exit policy in question
was done for purely pragmatic and not technical reasons. Opening ports
465 and 587 will *not* cause the spam problem that blocking them was
intending to prevent. The number of mailboxes that would be able to be
spammed through those two ports without authentication is
insignificantly small (I can't demonstrate one, can you?) Blocking those
two ports by default achieves nothing.

@_date: 2008-08-19 16:46:54
@_author: Dawney Smith 
@_subject: Update to default exit policy 
Hash: SHA1
There is a clear misunderstanding of the issue at hand by many people
here. The exit policy was put in place to prevent connections between
Tor users and the last hop (the end MX server), *not* to prevent
connections between Tor users and SMTP relays, which is what everybody
keeps repeating.
There is no problem with a Tor user connecting to an SMTP relay and
sending email. If they can do it using Tor, they can do it without using
Tor, faster. In those cases, it is the administrator of the SMTP relay
that is responsible to stop spam.
Just to repeat the problem. It is Tor users connecting to the
destination MX server that is the problem. Mail relay, not mail submission.
Ports 465 and 587 are mail submission ports. Port 25 is for both
submission *and* relay.
I have a *lot* of experience with email administration on a very large
scale, I know what I'm talking about.

@_date: 2008-08-20 11:34:41
@_author: Dawney Smith 
@_subject: Update to default exit policy 
Hash: SHA1
No problem. Hopefully the relevant people are taking note. Who exactly
is responsible for setting the default exit policy, and what is their
opinion on this matter?
Only a couple of dozen though unfortunately. If you ignore German and US
exit nodes, I can only see 4 at the moment that will let me exit on port

@_date: 2008-08-20 13:02:51
@_author: Dawney Smith 
@_subject: Update to default exit policy 
Hash: SHA1
Lots of protocols that can be used over Tor are potentially leaky. There
are tonnes of exit nodes that allow IRC traffic for example, which can
easily leak your username/hostname if you don't configure it correctly.
I'm not sure what makes SMTP submission special when it comes to the
exit policy.
As you said, the main issue is your hostname being leaked along with the
EHLO, or your client loading remote images without using Tor.
Personally, I use Thunderbird inside a virtual machine which can only
access the Internet via Tor and has no personally identifiable
information, including a random hostname and username etc.

@_date: 2008-08-20 18:58:50
@_author: Dawney Smith 
@_subject: Update to default exit policy 
Hash: SHA1
The only reason that your 10.100.145.215 IP appears in the headers there
is because your email client sends it. Your email client doesn't need to
send it, and as someone else mentioned, it's "scrubbed" if you're using
TorButton with Thunderbird for example.
It's at least as safe as using a webmail interface if you configure your
email client correctly.

@_date: 2008-08-21 09:29:49
@_author: Dawney Smith 
@_subject: xB Mail: Anonymous Email Client 
Hash: SHA1
Here are some suggestions. Some of them ere also mentioned in the other
thread about changing the default exit policy.
1.) Block remote image loading
2.) Obfuscate the data sent in the EHLO so it doesn't leak the hostname/ip
3.) Even using an obfuscated EHLO, that can still leak information. If
you're using TLS rather than SSL on connect when sending an email, the
exit node can see what is sent in the EHLO. The fact that you send the
same EHLO every time could potentially let the exit node identify you if
you come back. Therefore, although it's not the standard, SSL on connect
 on port 465 is preferable to TLS on port 587/25 when submitting email
over Tor.
4.) The "Use secure connection" account settings should never be "TLS if
available" as a mitm attack could stop you from negotiating SSL without
5.) The "Check for new messages every" option could leak to the exit
node that it is the same client coming back, if you set it to an unusual
value like 17 minutes for example. Changing from the default should be
6.) If people use a Torified account alongside a non Torified account
(I'd make it advise people to use a separate profile). But if they do,
do that, then it needs to make sure the two accounts don't share the
same LDAP server.
7.) Turn off return receipts and Junk filtering
8.) For convenience rather than security, I'd make it automatically turn
on the options to download the full messages to disk.
Oh. It would also be nice if you could add a list of keywords that
Thunderbird shouldn't allow you to send in an email, in case you
accidently sign a message with your own name for example.

@_date: 2008-08-21 15:31:06
@_author: Dawney Smith 
@_subject: xB Mail: Anonymous Email Client 
Hash: SHA1
I provided my reasons in the explanation directly above.
I'll stick with 465 as long as it's supported so I get a completely
encrypted connection. Given a choice, why would you use 587 over Tor?
Pragmatically speaking. 465 is going to be a service provided by many
mail systems for a long time to come, and it has clear advantages over
Tor compared to port 587.
All I'm saying is, the implications of using one over the other should
be made clear to the user, so they can then make their own decision.

@_date: 2008-08-21 16:00:27
@_author: Dawney Smith 
@_subject: xB Mail: Anonymous Email Client 
Hash: SHA1
Me.) Port 465 should be used because it's more secure
You.) Why do you believe it should be used
Me.) Because it's more secure
You.) I don't see an explanation of why you think it should be used.
No idea what the point you're trying to make there is. Many services
(including gmail) offer an ssl on connect service on port 465 for mail,
for legacy reasons. I'm just saying, use it if you can. Running SSH on
port 995 really isn't irrelevant to that.
The Internet isn't that simple. People who provide a mail service can
run it on whatever port they want. They don't have to justify that
choice to anyone. Stealing doesn't come into it. It can cause
interoperability problems in certain circumstances. This isn't one of
them. I'm not talking in theoretical terms here, I'm discussing the
reality of the situation.
Yes. It's an unfortunate situation. Nonetheless, the fact of the matter
is that for legacy reasons, there is an SSL on connect service running
for mail submission by many people, which, when combined with Tor is
better than using the "correct" port.

@_date: 2008-08-22 10:41:48
@_author: Dawney Smith 
@_subject: xB Mail: Anonymous Email Client 
Hash: SHA1
It must be possible as TorButton manages to do it.
The main reason I mentioned this one is because it is an unknown
quantity to me. I'm not sure if Thunderbird leaks any information with
it's Spam filtering. Even if it doesn't now, I'm not sure if an upgrade
wouldn't cause it to in future. So to be safe, I leave it off.
Yeah, I prefer IMAP, but I like a local copy of the mail so it doesn't
need to connect to the server over Tor every time I want to read a
message. Encrypted on disk would be a nice option.
Another thing worth looking at would be how Thunderbird performs
automatic extension updates. Oh, and generating a list of extensions
that are safe/unsafe to use with Thunderbird.

@_date: 2008-08-22 10:45:08
@_author: Dawney Smith 
@_subject: Update to default exit policy 
Hash: SHA1
Just so people know. I'm not going to let this discussion die off until
I've had a definitive yes or no from the people who are responsible for
setting the default exit policy. Can someone point me in the direction
of who that might be please? I get the feeling it's one of those topics
that the people developing Tor want to avoid...

@_date: 2008-08-22 10:55:33
@_author: Dawney Smith 
@_subject: xB Mail: Anonymous Email Client 
Hash: SHA1
I had thought about that idea. It wouldn't be as flexible as a Socks
proxy though as you'd need to configure it to connect to a particular
SMTP server over Tor. Perhaps in your torrc:
SMTPPort     25
SMTPRelay    smtp.gmail.com:465
SMTPRelaySSL On
SMTPRelayUser username
SMTPRelayPass password
It could strip a variety of headers, check for keywords, obfuscate the
timezone in the Date header etc etc. You could even configure it to
reject mail that isn't pgp signed or encrypted. Could give it a
whitelist of addresses that you're allowed to email. That sort of thing.
That would be neat. I'm not sure if anyone would be willing to put in
the work though. I wish I could code C.
Or of course, you could have an entirely separate application to do all
that, ala privoxy/polipo.

@_date: 2008-08-31 16:32:29
@_author: Dawney Smith 
@_subject: Update to default exit policy 
Hash: SHA1
So is there going to be a change to the default Exit Policy?

@_date: 2008-08-13 10:49:30
@_author: Dawney Smith 
@_subject: polipo - choosing an exit 
I'm using polipo. When I choose an exit node by sticking node.exit on
the end of a url, I think that is actually passed on with the Host
header. How do I get polipo to strip that off?
For example, " doesn't work as it
has no vhost set up for Also, if the html returned by that page contained eg:
 am I correct in thinking
that that request wouldn't necessarily go out via the same exit node I
chose for the main page?

@_date: 2008-08-14 09:49:48
@_author: Dawney Smith 
@_subject: Vidalia exit-country 
I just downloaded/compiled/installed the Linux version on my Ubuntu
system and went to choose a country to use. The dropdown list of
countries contained one country only, named "(??)(626)"

@_date: 2008-07-18 15:05:53
@_author: Dawney Smith 
@_subject: Exit node connection statistics 
Hash: SHA1
Figuring out which exit node you are should be fairly trivial. There are
about 1000 exit nodes that exit on port 80, and you are one of them.
If I just send loads of http requests through half of those exit nodes
to my own server one day and then check if my IP appears on your
webpage, I've halved the number of possible exit nodes you are. If I
then halve it again and repeat this every day, it should only take about
a week and a half. I'll start with a possibility of 1024 exit nodes just
for ease of maths:
Day 1 : Test 512 of the 1024 remaining exit nodes
Day 2 : Test 256 of the  512 remaining exit nodes
Day 3 : Test 128 of the  256 remaining exit nodes
Day 4 : Test  64 of the  128 remaining exit nodes
Day 5 : Test  32 of the   64 remaining exit nodes
Day 6 : Test  16 of the   32 remaining exit nodes
Day 7 : Test   8 of the   16 remaining exit nodes
Day 8 : Test   4 of the    8 remaining exit nodes
Day 9 : Test   2 of the    4 remaining exit nodes
Day 10: Test   1 of the    2 remaining exit nodes - Success
This process becomes quicker if you have more than 1 ip to test with.
I'm making the assumption that it can't be that difficult to send enough
http requests to get to the 100th or above place on your list. You don't
publish total number of connections, only percentage of total, but it
seems likely to me that the number of connections made to the site that
is number 100 on your list should be easy to exceed.
I'm not going to bother of course, because I don't care that much. But
just so you know, don't use that same onion address for anything that
*needs* to be anonymous, because it wont be.

@_date: 2008-07-04 09:50:16
@_author: Dawney Smith 
@_subject: Idle client bandwidth usage 
Hash: SHA1
Are there any figures on how much bandwidth an idle tor client uses just
to tick over? Ie, when it's not actually being used. Also, are there any
configuration parameters that can be tweaked to reduce the bandwidth usage?
best wishes,

@_date: 2008-07-14 10:17:55
@_author: Dawney Smith 
@_subject: email hidden service 
Hash: SHA1
Are there any hidden service email services in existance?

@_date: 2008-07-14 11:07:16
@_author: Dawney Smith 
@_subject: email hidden service 
Hash: SHA1
Thanks for the information. Out of interest, how did shells.onion manage
to get a .onion address that starts "shells" ? That can't just be a
coincidence surely?

@_date: 2008-06-28 12:30:48
@_author: Dawney Smith 
@_subject: icann opening up of tld's 
Hash: SHA1
Regarding icann's announcement on Thursday about the opening up of TLD's
detailed at this url:
What would be the hidden service privacy implications of someone
registering the .onion tld? Is this something the tor project should
look into doing next year?

@_date: 2008-09-04 18:16:05
@_author: Dawney Smith 
@_subject: Ports 465/587 in exit policy (was Re: Update to default exit 
Hash: SHA1
Excellent. Thank you for taking the time to look into this Roger.

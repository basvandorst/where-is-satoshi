
@_date: 2013-01-19 13:39:01
@_author: benjaminlincoln@lavabit.com 
@_subject: [tor-talk] torbrowser with tor 0.2.3.25 
I noticed Tor Browser does not use the official stable release of tor.
Does using Tor Browser's firefox with tor 0.2.3.25 hurt anonymity?

@_date: 2013-01-19 13:53:06
@_author: benjaminlincoln@lavabit.com 
@_subject: [tor-talk] Open streams on the fly 
The implementation of proposal 171 and subsequent release of tor 0.2.3.25
fills my heart with joy. Yet, as far as I can tell, there is one use case
that is not adequately covered. I would like to open and close Streams
(TransPort's, DNSPort's and SOCKSPort's) at run-time without interfering
with other, existing Streams and Circuits.  SETCONF does not work here
because it resets all existing streams.
What am I missing?
Other than that, is it possible to reset the circuit(s) of a specific
Stream (ID).

@_date: 2013-01-19 17:02:39
@_author: benjaminlincoln@lavabit.com 
@_subject: [tor-talk] Open streams on the fly 
I think tor lacks an isolation flag which specifies to isolate each and
every stream, even those going to the same address and port.

@_date: 2013-01-19 17:13:57
@_author: benjaminlincoln@lavabit.com 
@_subject: [tor-talk] Open streams on the fly 
I see, tor already implements such a flag, ISO_STREAM.
 ISO_DESTPORT    (1u<<0)
 ISO_STREAM      (1u<<7)
diff --git a/src/or/config.c b/src/or/config.c
index 90a5dfb..648bfba 100644
--- a/src/or/config.c
+++ b/src/or/config.c
 -5929,6 +5929,8  parse_port_config(smartlist_t *out,
           isoflag = ISO_CLIENTPROTO;
         } else if (!strcasecmp(elt, "IsolateClientAddr")) {
           isoflag = ISO_CLIENTADDR;
+	} else if (!strcasecmp(elt, "IsolateStream")) {
+          isoflag = ISO_STREAM;
         } else {
           log_warn(LD_CONFIG, "Unrecognized %sPort option '%s'",
                    portname, escaped(elt_orig));
This looks like a reasonable addition to me - an addition that could be
backported to 0.2.3.x.

@_date: 2013-01-19 17:31:43
@_author: benjaminlincoln@lavabit.com 
@_subject: [tor-talk] [tor-dev]  Open streams on the fly 
diff --git a/doc/tor.1.txt b/doc/tor.1.txt
index 773fccf..6da4147 100644
--- a/doc/tor.1.txt
+++ b/doc/tor.1.txt
 -888,6 +888,8  The following options are useful only for clients
(that is, if
     **IsolateDestAddr**;;
         Don't share circuits with streams targetting a different
         destination address.
+    **IsolateDestAddr**;;
+        Don't share circuits with other streams at all.
     **SessionGroup=**__INT__;;
         If no other isolation rules would prevent it, allow streams
         on this port to share circuits with streams from every other
diff --git a/src/or/config.c b/src/or/config.c
index 90a5dfb..1dc3d55 100644
--- a/src/or/config.c
+++ b/src/or/config.c
 -5919,7 +5919,9  parse_port_config(smartlist_t *out,
         if (!strcasecmpend(elt, "s"))
           elt[strlen(elt)-1] = '\0'; /* kill plurals. */
-        if (!strcasecmp(elt, "IsolateDestPort")) {
+	if (!strcasecmp(elt, "IsolateStream")) {
+          isoflag = ISO_STREAM;
+	} else if (!strcasecmp(elt, "IsolateDestPort")) {
           isoflag = ISO_DESTPORT;
         } else if (!strcasecmp(elt, "IsolateDestAddr")) {
           isoflag = ISO_DESTADDR;
diff --git a/src/or/or.h b/src/or/or.h
index 51c23d3..8a21c09 100644
--- a/src/or/or.h
+++ b/src/or/or.h
 -2868,22 +2868,22  typedef enum invalid_router_usage_t {
      */
+/** Isolate all streams. */
+ ISO_STREAM      (1u<<0)
 /** Isolate based on destination port */
- ISO_DESTPORT    (1u<<0)
+ ISO_DESTPORT    (1u<<1)
 /** Isolate based on destination address */
- ISO_DESTADDR    (1u<<1)
+ ISO_DESTADDR    (1u<<2)
 /** Isolate based on SOCKS authentication */
- ISO_SOCKSAUTH   (1u<<2)
+ ISO_SOCKSAUTH   (1u<<3)
 /** Isolate based on client protocol choice */
- ISO_CLIENTPROTO (1u<<3)
+ ISO_CLIENTPROTO (1u<<4)
 /** Isolate based on client address */
- ISO_CLIENTADDR  (1u<<4)
+ ISO_CLIENTADDR  (1u<<5)
 /** Isolate based on session group (always on). */
- ISO_SESSIONGRP  (1u<<5)
+ ISO_SESSIONGRP  (1u<<6)
 /** Isolate based on newnym epoch (always on). */
- ISO_NYM_EPOCH   (1u<<6)
-/** Isolate all streams (Internal only). */
- ISO_STREAM      (1u<<7)
+ ISO_NYM_EPOCH   (1u<<7)
 /**
 /** Default isolation level for ports. */

@_date: 2013-01-20 02:00:59
@_author: benjaminlincoln@lavabit.com 
@_subject: [tor-talk] torbrowser with tor 0.2.3.25 
Oops, I mistaked Tor Browser Bundle alpha for the stable Tor Browser
Bundle.  Thank you, Andrew.

@_date: 2013-01-21 09:56:08
@_author: benjaminlincoln@lavabit.com 
@_subject: [tor-talk] [tor-dev]  Open streams on the fly 
I attached a simple formal proposal for this idea. Please discuss.

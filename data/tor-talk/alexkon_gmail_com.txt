
@_date: 2012-02-28 11:09:06
@_author: Alexander Konovalenko 
@_subject: [tor-talk] Cannot finish handshake with directory server 
I'm trying to use Tor from Almaty, Kazakhstan. It cannot connect to
the Tor network.
The error message says:
Problem bootstrapping. Stuck at 10%: Finishing handshake with
directory server. (DONE; DONE; count 35; recommendation warn)
My ISP is Almatytelecom (service trade name Megaline). Almatytelecom
is a branch of Kazakhtelecom which is notorious for its country-wide
Internet censorship. They usually block websites by IP address and TCP
port. For example, connections to all three IP addresses of
 (38.229.72.14, 38.229.72.16 and 86.59.30.36) on
port 443 are currently blocked, while ICMP pings to the same IPs work
I downloaded the latest Tor Browser Bundle for Linux
(tor-browser-gnu-linux-i686-2.2.35-7.2-dev-en-US.tar.gz) from a
torproject.org mirror via SSL and have carefully verified the
tarball's GPG signature and the fingerprint of its signer, Sebastian
I have configured Tor to use 12 bridges which were collected from
 over the past few days. TCP connections
are not blocked to at least 3 of the bridges. Still, Tor cannot
connect to the Tor network. A couple of days ago Tor couldn't connect
with the default settings, but everything worked fine once I
configured some bridges.
How do I debug this further? Any pointers will be highly appreciated.
 -- Alexander
Software versions used:
Tor 0.2.2.35
Vidalia 0.2.17
Ubuntu 10.04 with latest updates
Full Tor log copied from Vidalia:
Feb 28 09:48:01.659 [Notice] Tor v0.2.2.35 (git-b04388f9e7546a9f).
This is experimental software. Do not rely on it for strong anonymity.
(Running on Linux i686)
Feb 28 09:48:01.660 [Notice] Initialized libevent version
2.0.17-stable using method epoll. Good.
Feb 28 09:48:01.661 [Notice] Opening Socks listener on 127.0.0.1:9050
Feb 28 09:48:01.662 [Notice] Opening Control listener on 127.0.0.1:9051
Feb 28 09:48:01.663 [Notice] Parsing GEOIP file ./Data/Tor/geoip.
Feb 28 09:48:01.664 [Notice] OpenSSL OpenSSL 1.0.0g 18 Jan 2012 looks
like version 0.9.8m or later; I will try SSL_OP to enable
Feb 28 09:48:01.664 [Notice] I learned some more directory
information, but not enough to build a circuit: We have no recent
network-status consensus.
Feb 28 09:48:01.666 [Notice] New control connection opened.
Feb 28 09:48:01.667 [Notice] Bootstrapped 5%: Connecting to directory server.
Feb 28 09:48:01.669 [Notice] Bootstrapped 10%: Finishing handshake
with directory server.
Feb 28 09:51:10.800 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (Connection timed out;
TIMEOUT; count 1; recommendation warn)
Feb 28 09:53:01.139 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 2;
recommendation warn)
Feb 28 09:53:01.243 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 3;
recommendation warn)
Feb 28 09:53:01.409 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 4;
recommendation warn)
Feb 28 09:53:01.414 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 5;
recommendation warn)
Feb 28 09:53:01.420 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 6;
recommendation warn)
Feb 28 09:53:01.424 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 7;
recommendation warn)
Feb 28 09:53:01.429 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 8;
recommendation warn)
Feb 28 09:53:01.438 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 9;
recommendation warn)
Feb 28 09:53:01.447 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 10;
recommendation warn)
Feb 28 09:53:01.453 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 11;
recommendation warn)
Feb 28 09:53:01.461 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 12;
recommendation warn)
Feb 28 10:06:22.672 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (Connection timed out;
TIMEOUT; count 13; recommendation warn)
Feb 28 10:08:12.140 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 14;
recommendation warn)
Feb 28 10:08:12.334 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 15;
recommendation warn)
Feb 28 10:08:12.399 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 16;
recommendation warn)
Feb 28 10:08:12.401 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 17;
recommendation warn)
Feb 28 10:08:12.405 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 18;
recommendation warn)
Feb 28 10:08:12.406 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 19;
recommendation warn)
Feb 28 10:08:12.407 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 20;
recommendation warn)
Feb 28 10:08:12.408 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 21;
recommendation warn)
Feb 28 10:08:12.408 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 22;
recommendation warn)
Feb 28 10:08:12.409 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 23;
recommendation warn)
Feb 28 10:08:12.410 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 24;
recommendation warn)
Feb 28 10:21:21.743 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (Connection timed out;
TIMEOUT; count 25; recommendation warn)
Feb 28 10:23:06.241 [Notice] Learned fingerprint
9DE769A788D9BC848C1AF7A7C243A073BCA4FF6E for bridge 66.225.195.38:443
Feb 28 10:23:11.996 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 26;
recommendation warn)
Feb 28 10:23:12.114 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 27;
recommendation warn)
Feb 28 10:23:12.146 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 28;
recommendation warn)
Feb 28 10:23:12.398 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 29;
recommendation warn)
Feb 28 10:23:12.400 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 30;
recommendation warn)
Feb 28 10:23:12.402 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 31;
recommendation warn)
Feb 28 10:23:12.406 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 32;
recommendation warn)
Feb 28 10:23:12.407 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 33;
recommendation warn)
Feb 28 10:23:12.408 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 34;
recommendation warn)
Feb 28 10:23:12.408 [Warning] Problem bootstrapping. Stuck at 10%:
Finishing handshake with directory server. (DONE; DONE; count 35;
recommendation warn)

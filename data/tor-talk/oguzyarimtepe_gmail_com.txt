
@_date: 2014-12-28 22:13:39
@_author: =?UTF-8?B?T8SfdXogWWFyxLFtdGVwZQ==?= 
@_subject: [tor-talk] tor setup on wt3020h with openwrt problem 
I installed openwrt on wt3020h router. Plugged LAN port to my wireles
modem. Assuming that after installing the tor and setting up config files i
was assuming i will be able to surf through tor. But even dns resolving is
not working when i connected to the openwrt ssid.
What am i doing wrong?
Below is the config files:
Or can read here:
==> config/dhcp <==
config dnsmasq
    option domainneeded '1'
    option boguspriv '1'
    option filterwin2k '0'
    option localise_queries '1'
    option rebind_protection '1'
    option rebind_localhost '1'
    option local '/lan/'
    option domain 'lan'
    option expandhosts '1'
    option nonegcache '0'
    option authoritative '1'
    option readethers '1'
    option leasefile '/tmp/dhcp.leases'
    option resolvfile '/tmp/resolv.conf.auto'
config dhcp 'lan'
    option interface 'lan'
    option start '100'
    option limit '150'
    option leasetime '12h'
    option dhcpv6 'server'
    option ra 'server'
config dhcp 'wan'
    option interface 'wan'
    option ignore '1'
config odhcpd 'odhcpd'
    option maindhcp '0'
    option leasefile '/tmp/hosts/odhcpd'
    option leasetrigger '/usr/sbin/odhcpd-update'
# added manually
config dhcp 'transtor'
    option start '100'
    option leasetime '12h'
    option limit '150'
    option interface 'transtor'
==> config/dropbear <==
config dropbear
    option PasswordAuth 'on'
    option Port '22'
config dropbear
    option Port '22'
    option PasswordAuth 'on'
    option RootPasswordAuth 'on'
    option GatewayPorts 'off'
==> config/firewall <==
config defaults
    option syn_flood    1
    option input        ACCEPT
    option output        ACCEPT
    option forward        REJECT
# Uncomment this line to disable ipv6 rules
#    option disable_ipv6    1
config zone
    option name        lan
    list   network        'lan'
    option input        ACCEPT
    option output        ACCEPT
    option forward        ACCEPT
config zone
    option name        wan
    list   network        'wan'
    list   network        'wan6'
    option input        REJECT
    option output        ACCEPT
    option forward        REJECT
    option masq        1
    option mtu_fix        1
config forwarding
    option src        lan
    option dest        wan
# We need to accept udp packets on port 68,
# see config rule
    option name        Allow-DHCP-Renew
    option src        wan
    option proto        udp
    option dest_port    68
    option target        ACCEPT
    option family        ipv4
# Allow IPv4 ping
config rule
    option name        Allow-Ping
    option src        wan
    option proto        icmp
    option icmp_type    echo-request
    option family        ipv4
    option target        ACCEPT
# Allow DHCPv6 replies
# see config rule
    option name        Allow-DHCPv6
    option src        wan
    option proto        udp
    option src_ip        fe80::/10
    option src_port        547
    option dest_ip        fe80::/10
    option dest_port    546
    option family        ipv6
    option target        ACCEPT
# Allow essential incoming IPv6 ICMP traffic
config rule
    option name        Allow-ICMPv6-Input
    option src        wan
    option proto    icmp
    list icmp_type        echo-request
    list icmp_type        echo-reply
    list icmp_type        destination-unreachable
    list icmp_type        packet-too-big
    list icmp_type        time-exceeded
    list icmp_type        bad-header
    list icmp_type        unknown-header-type
    list icmp_type        router-solicitation
    list icmp_type        neighbour-solicitation
    list icmp_type        router-advertisement
    list icmp_type        neighbour-advertisement
    option limit        1000/sec
    option family        ipv6
    option target        ACCEPT
# Allow essential forwarded IPv6 ICMP traffic
config rule
    option name        Allow-ICMPv6-Forward
    option src        wan
    option dest        *
    option proto        icmp
    list icmp_type        echo-request
    list icmp_type        echo-reply
    list icmp_type        destination-unreachable
    list icmp_type        packet-too-big
    list icmp_type        time-exceeded
    list icmp_type        bad-header
    list icmp_type        unknown-header-type
    option limit        1000/sec
    option family        ipv6
    option target        ACCEPT
# include a file with users custom iptables rules
config include
    option path /etc/firewall.user
 EXAMPLE CONFIG SECTIONS
# do not allow a specific ip to access wan
 rule
#    option src        lan
#    option src_ip    192.168.45.2
#    option dest        wan
#    option proto    tcp
#    option target    REJECT
# block a specific mac on wan
 rule
#    option dest        wan
#    option src_mac    00:11:22:33:44:66
#    option target    REJECT
# block incoming ICMP traffic on a zone
 rule
#    option src        lan
#    option proto    ICMP
#    option target    DROP
# port redirect port coming in on wan to lan
 redirect
#    option src            wan
#    option src_dport    80
#    option dest            lan
#    option dest_ip        192.168.16.235
#    option dest_port    80
#    option proto        tcp
# port redirect of remapped ssh port (22001) on wan
 redirect
#    option src        wan
#    option src_dport    22001
#    option dest        lan
#    option dest_port    22
#    option proto        tcp
# allow IPsec/ESP and ISAKMP passthrough
 rule
#    option src        wan
#    option dest        lan
#    option protocol        esp
#    option target        ACCEPT
 rule
#    option src        wan
#    option dest        lan
#    option src_port        500
#    option dest_port    500
#    option proto        udp
#    option target        ACCEPT
 FULL CONFIG SECTIONS
 rule
#    option src        lan
#    option src_ip    192.168.45.2
#    option src_mac    00:11:22:33:44:55
#    option src_port    80
#    option dest        wan
#    option dest_ip    194.25.2.129
#    option dest_port    120
#    option proto    tcp
#    option target    REJECT
 redirect
#    option src        lan
#    option src_ip    192.168.45.2
#    option src_mac    00:11:22:33:44:55
#    option src_port        1024
#    option src_dport    80
#    option dest_ip    194.25.2.129
#    option dest_port    120
#    option proto    tcp
 manually
 zone
#    option name 'tor'
    option input 'ACCEPT'
#    option forward 'REJECT'
#    option output 'ACCEPT'
#    option network 'tor'
 Tor Bridge incoming for censored users
config rule
        option src wan
        option proto tcp
        option dest_port 443
        option target ACCEPT
config zone
        option name     transtor
        option input    REJECT
        option output   ACCEPT
        option forward  REJECT
        option syn_flood 1
        option conntrack 1  setting is mandatory
# Allow Transparent clients the ability to DHCP an address
# XXX TODO: Audit this to ensure it doesn't leak UDP port 67 to the net!
config rule
    option name         'Allow-Tor-DHCP'
        option src              transtor
        option proto            udp
        option dest_port        67
        option target           ACCEPT
# Tor transparent-proxy-port (set in /etc/tor/torrc)
config rule
    option name         'Allow-Tor-Transparent'
        option src              transtor
        option proto            tcp
        option dest_port        9040
        option target           ACCEPT
# Tor DNS-proxy-port (set in /etc/tor/torrc)
config rule
    option name         'Allow-Tor-DNS'
        option src              transtor
        option proto            udp
        option dest_port        9053
        option target           ACCEPT
==> config/luci <==
config core 'main'
    option lang 'auto'
    option mediaurlbase '/luci-static/openwrt.org'
    option resourcebase '/luci-static/resources'
config extern 'flash_keep'
    option uci '/etc/config/'
    option dropbear '/etc/dropbear/'
    option openvpn '/etc/openvpn/'
    option passwd '/etc/passwd'
    option opkg '/etc/opkg.conf'
    option firewall '/etc/firewall.user'
    option uploads '/lib/uci/upload/'
config internal 'languages'
    option en 'English'
config internal 'sauth'
    option sessionpath '/tmp/luci-sessions'
    option sessiontime '3600'
config internal 'ccache'
    option enable '1'
config internal 'themes'
    option Bootstrap '/luci-static/bootstrap'
==> config/network <==
config interface 'loopback'
    option ifname 'lo'
    option proto 'static'
    option ipaddr '127.0.0.1'
    option netmask '255.0.0.0'
config globals 'globals'
    option ula_prefix 'fd80:0fb3:b4e3::/48'
config interface 'lan'
    option ifname 'eth0.1'
    option force_link '1'
    option macaddr '20:28:18:a0:a8:fe'
    option type 'bridge'
    option proto 'static'
    option ipaddr '192.168.1.1'
    option netmask '255.255.255.0'
    option ip6assign '60'
    # added manually
    # option conntrack '1'
    # option delegate '0'
    # option dns '192.168.1.1'
   option defaultroute 0
     option peerdns 0
config interface 'wan'
    option ifname 'eth0.2'
    option force_link '1'
    option macaddr '20:28:18:a0:a8:ff'
    option proto 'dhcp'
config interface 'wan6'
    option ifname 'eth0.2'
    option proto 'dhcpv6'
config switch
    option name 'switch0'
    option reset '1'
    option enable_vlan '1'
config switch_vlan
    option device 'switch0'
    option vlan '1'
    option ports '1 2 3 4 6t'
config switch_vlan
    option device 'switch0'
    option vlan '2'
    option ports '0 6t'
# added manually
config interface transtor
        option ifname   "wlan0"
        option proto    static
        option ipaddr 192.168.2.1
        option netmask 255.255.255.0
==> config/system <==
config system
    option hostname 'OpenWrt'
    option timezone 'UTC'
config timeserver 'ntp'
    list server '0.openwrt.pool.ntp.org'
    list server '1.openwrt.pool.ntp.org'
    list server '2.openwrt.pool.ntp.org'
    list server '3.openwrt.pool.ntp.org'
    option enabled '1'
    option enable_server '0'
config led 'led_power'
    option name 'power'
    option sysfs 'nexx:blue:power'
    option default '0'
==> config/ucitrack <==
config network
    option init network
    list affects dhcp
    list affects radvd
config wireless
    list affects network
config firewall
    option init firewall
    list affects luci-splash
    list affects qos
    list affects miniupnpd
config olsr
    option init olsrd
config dhcp
    option init dnsmasq
config dropbear
    option init dropbear
config httpd
    option init httpd
config fstab
    option init fstab
config qos
    option init qos
config system
    option init led
    list affects luci_statistics
config luci_splash
    option init luci_splash
config upnpd
    option init miniupnpd
config ntpclient
    option init ntpclient
config samba
    option init samba
config tinyproxy
    option init tinyproxy
config 6relayd
    option init 6relayd
==> config/uhttpd <==
config uhttpd 'main'
    list listen_http '0.0.0.0:80'
    list listen_http '[::]:80'
    list listen_https '0.0.0.0:443'
    list listen_https '[::]:443'
    option home '/www'
    option rfc1918_filter '1'
    option max_requests '3'
    option max_connections '100'
    option cert '/etc/uhttpd.crt'
    option key '/etc/uhttpd.key'
    option cgi_prefix '/cgi-bin'
    option script_timeout '60'
    option network_timeout '30'
    option http_keepalive '20'
    option tcp_keepalive '1'
    option ubus_prefix '/ubus'
config cert 'px5g'
    option days '730'
    option bits '1024'
    option country 'DE'
    option state 'Berlin'
    option location 'Berlin'
    option commonname 'OpenWrt'
==> config/wireless <==
config wifi-device 'radio0'
    option type 'mac80211'
    option channel '11'
    option hwmode '11g'
    option path '10180000.wmac'
    option htmode 'HT20'
config wifi-iface
    option device 'radio0'
    option network 'transtor'
    option mode 'ap'
    option encryption 'none'
    option ssid 'OnionWRT'
==> config/wireless.bak <==
config wifi-device  radio0
    option type     mac80211
    option channel  11
    option hwmode    11g
    option path    '10180000.wmac'
    option htmode    HT20
config wifi-iface
    option device   radio0
    option network  lan
    option mode     ap
    option ssid     OpenWrt
    option encryption none
I installed tor and running. I can see that the ports 9040 and 9053 is
listened. So will be happy if anyone had such an openwrt experience helps.

@_date: 2014-12-28 22:43:53
@_author: =?UTF-8?B?T8SfdXogWWFyxLFtdGVwZQ==?= 
@_subject: [tor-talk] tor setup on wt3020h with openwrt problem 
iptables -t nat -A PREROUTING -i wlan0 -p udp --dport 53 -j
I have these at my /etc/firewal.user file
iptables -t nat -A PREROUTING -i wlan0 -p udp --dport 53 -j REDIRECT
--to-ports 9053
 -t nat -A PREROUTING -i wlan0 -p tcp --dport ! 53 --syn -j
REDIRECT --to-ports 9040
iptables -t nat -A PREROUTING -i wlan0 -p tcp --syn -j REDIRECT --to-ports
iptables -t nat -A OUTPUT -p tcp -d 10.192.0.0/10 -j REDIRECT --to-ports

@_date: 2014-12-28 23:04:41
@_author: =?UTF-8?B?T8SfdXogWWFyxLFtdGVwZQ==?= 
@_subject: [tor-talk] tor setup on wt3020h with openwrt problem 
Hum? Seems good so :'(
Here is the iptables-save output
I have and adsl modem. Connected to Internet. I plugged its lan port, to my
new small router wt3020. And i am connecting to the new ssid. Betwrrn adsl
and wt3020, there is rj45 and yes dhcp is active at the adsl modem.
# Generated by iptables-save v1.4.21 on Sun Dec 28 10:30:12 2014
:PREROUTING ACCEPT [1:345]
:INPUT ACCEPT [19:1522]
:OUTPUT ACCEPT [201:14140]
:POSTROUTING ACCEPT [201:14140]
:delegate_postrouting - [0:0]
:delegate_prerouting - [0:0]
:postrouting_lan_rule - [0:0]
:postrouting_rule - [0:0]
:postrouting_transtor_rule - [0:0]
:postrouting_wan_rule - [0:0]
:prerouting_lan_rule - [0:0]
:prerouting_rule - [0:0]
:prerouting_transtor_rule - [0:0]
:prerouting_wan_rule - [0:0]
:zone_lan_postrouting - [0:0]
:zone_lan_prerouting - [0:0]
:zone_transtor_postrouting - [0:0]
:zone_transtor_prerouting - [0:0]
:zone_wan_postrouting - [0:0]
:zone_wan_prerouting - [0:0]
-A PREROUTING -j delegate_prerouting
-A PREROUTING -i wlan0 -p udp -m udp --dport 53 -j REDIRECT --to-ports 9053
-A PREROUTING -i wlan0 -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -j
REDIRECT --to-ports 9040
-A OUTPUT -d 10.192.0.0/10 -p tcp -j REDIRECT --to-ports 9040
-A POSTROUTING -j delegate_postrouting
-A delegate_postrouting -m comment --comment "user chain for postrouting"
-j postrouting_rule
-A delegate_postrouting -o br-lan -j zone_lan_postrouting
-A delegate_postrouting -o eth0.2 -j zone_wan_postrouting
-A delegate_prerouting -m comment --comment "user chain for prerouting" -j
-A delegate_prerouting -i br-lan -j zone_lan_prerouting
-A delegate_prerouting -i eth0.2 -j zone_wan_prerouting
-A zone_lan_postrouting -m comment --comment "user chain for postrouting"
-j postrouting_lan_rule
-A zone_lan_prerouting -m comment --comment "user chain for prerouting" -j
-A zone_transtor_postrouting -m comment --comment "user chain for
postrouting" -j postrouting_transtor_rule
-A zone_transtor_prerouting -m comment --comment "user chain for
prerouting" -j prerouting_transtor_rule
-A zone_wan_postrouting -m comment --comment "user chain for postrouting"
-j postrouting_wan_rule
-A zone_wan_postrouting -j MASQUERADE
-A zone_wan_prerouting -m comment --comment "user chain for prerouting" -j
# Completed on Sun Dec 28 10:30:12 2014
# Generated by iptables-save v1.4.21 on Sun Dec 28 10:30:12 2014
:PREROUTING ACCEPT [689:59343]
:OUTPUT ACCEPT [556:45097]
:delegate_notrack - [0:0]
:zone_lan_notrack - [0:0]
-A PREROUTING -j delegate_notrack
-A delegate_notrack -i br-lan -j zone_lan_notrack
-A zone_lan_notrack -j CT --notrack
# Completed on Sun Dec 28 10:30:12 2014
# Generated by iptables-save v1.4.21 on Sun Dec 28 10:30:12 2014
:PREROUTING ACCEPT [689:59343]
:INPUT ACCEPT [621:51385]
:FORWARD ACCEPT [17:1020]
:OUTPUT ACCEPT [556:45097]
:POSTROUTING ACCEPT [556:45097]
:fwmark - [0:0]
:mssfix - [0:0]
-A PREROUTING -j fwmark
-A FORWARD -j mssfix
-A mssfix -o eth0.2 -p tcp -m tcp --tcp-flags SYN,RST SYN -m comment
--comment "wan (mtu_fix)" -j TCPMSS --clamp-mss-to-pmtu
# Completed on Sun Dec 28 10:30:12 2014
# Generated by iptables-save v1.4.21 on Sun Dec 28 10:30:12 2014
:INPUT ACCEPT [33:2723]
:FORWARD DROP [0:0]
:OUTPUT ACCEPT [2:702]
:delegate_forward - [0:0]
:delegate_input - [0:0]
:delegate_output - [0:0]
:forwarding_lan_rule - [0:0]
:forwarding_rule - [0:0]
:forwarding_transtor_rule - [0:0]
:forwarding_wan_rule - [0:0]
:input_lan_rule - [0:0]
:input_rule - [0:0]
:input_transtor_rule - [0:0]
:input_wan_rule - [0:0]
:output_lan_rule - [0:0]
:output_rule - [0:0]
:output_transtor_rule - [0:0]
:output_wan_rule - [0:0]
:reject - [0:0]
:syn_flood - [0:0]
:zone_lan_dest_ACCEPT - [0:0]
:zone_lan_forward - [0:0]
:zone_lan_input - [0:0]
:zone_lan_output - [0:0]
:zone_lan_src_ACCEPT - [0:0]
:zone_transtor_dest_ACCEPT - [0:0]
:zone_transtor_dest_REJECT - [0:0]
:zone_transtor_forward - [0:0]
:zone_transtor_input - [0:0]
:zone_transtor_output - [0:0]
:zone_transtor_src_REJECT - [0:0]
:zone_wan_dest_ACCEPT - [0:0]
:zone_wan_dest_REJECT - [0:0]
:zone_wan_forward - [0:0]
:zone_wan_input - [0:0]
:zone_wan_output - [0:0]
:zone_wan_src_REJECT - [0:0]
-A INPUT -j delegate_input
-A FORWARD -j delegate_forward
-A OUTPUT -j delegate_output
-A delegate_forward -m comment --comment "user chain for forwarding" -j
-A delegate_forward -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
-A delegate_forward -i br-lan -j zone_lan_forward
-A delegate_forward -i eth0.2 -j zone_wan_forward
-A delegate_forward -j reject
-A delegate_input -i lo -j ACCEPT
-A delegate_input -m comment --comment "user chain for input" -j input_rule
-A delegate_input -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
-A delegate_input -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -j syn_flood
-A delegate_input -i br-lan -j zone_lan_input
-A delegate_input -i eth0.2 -j zone_wan_input
-A delegate_output -o lo -j ACCEPT
-A delegate_output -m comment --comment "user chain for output" -j
-A delegate_output -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
-A delegate_output -o br-lan -j zone_lan_output
-A delegate_output -o eth0.2 -j zone_wan_output
-A reject -p tcp -j REJECT --reject-with tcp-reset
-A reject -j REJECT --reject-with icmp-port-unreachable
-A syn_flood -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -m limit --limit
25/sec --limit-burst 50 -j RETURN
-A syn_flood -j DROP
-A zone_lan_dest_ACCEPT -o br-lan -j ACCEPT
-A zone_lan_forward -m comment --comment "user chain for forwarding" -j
-A zone_lan_forward -m conntrack --ctstate DNAT -m comment --comment
"Accept port forwards" -j ACCEPT
-A zone_lan_forward -j zone_lan_dest_ACCEPT
-A zone_lan_input -m comment --comment "user chain for input" -j
-A zone_lan_input -m conntrack --ctstate DNAT -m comment --comment "Accept
port redirections" -j ACCEPT
-A zone_lan_input -j zone_lan_src_ACCEPT
-A zone_lan_output -m comment --comment "user chain for output" -j
-A zone_lan_output -j zone_lan_dest_ACCEPT
-A zone_lan_src_ACCEPT -i br-lan -j ACCEPT
-A zone_transtor_forward -m comment --comment "user chain for forwarding"
-j forwarding_transtor_rule
-A zone_transtor_forward -m conntrack --ctstate DNAT -m comment --comment
"Accept port forwards" -j ACCEPT
-A zone_transtor_forward -j zone_transtor_dest_REJECT
-A zone_transtor_input -m comment --comment "user chain for input" -j
-A zone_transtor_input -p udp -m udp --dport 67 -m comment --comment
Allow-Tor-DHCP -j ACCEPT
-A zone_transtor_input -p tcp -m tcp --dport 9040 -m comment --comment
Allow-Tor-Transparent -j ACCEPT
-A zone_transtor_input -p udp -m udp --dport 9053 -m comment --comment
Allow-Tor-DNS -j ACCEPT
-A zone_transtor_input -m conntrack --ctstate DNAT -m comment --comment
"Accept port redirections" -j ACCEPT
-A zone_transtor_input -j zone_transtor_src_REJECT
-A zone_transtor_output -m comment --comment "user chain for output" -j
-A zone_transtor_output -j zone_transtor_dest_ACCEPT
-A zone_wan_dest_ACCEPT -o eth0.2 -j ACCEPT
-A zone_wan_dest_REJECT -o eth0.2 -j reject
-A zone_wan_forward -m comment --comment "user chain for forwarding" -j
-A zone_wan_forward -m conntrack --ctstate DNAT -m comment --comment
"Accept port forwards" -j ACCEPT
-A zone_wan_forward -j zone_wan_dest_REJECT
-A zone_wan_input -m comment --comment "user chain for input" -j
-A zone_wan_input -p udp -m udp --dport 68 -m comment --comment
Allow-DHCP-Renew -j ACCEPT
-A zone_wan_input -p icmp -m icmp --icmp-type 8 -m comment --comment
Allow-Ping -j ACCEPT
-A zone_wan_input -p tcp -m tcp --dport 443 -m comment --comment "
-j ACCEPT
-A zone_wan_input -m conntrack --ctstate DNAT -m comment --comment "Accept
port redirections" -j ACCEPT
-A zone_wan_input -j zone_wan_src_REJECT
-A zone_wan_output -m comment --comment "user chain for output" -j
-A zone_wan_output -j zone_wan_dest_ACCEPT
-A zone_wan_src_REJECT -i eth0.2 -j reject
# Completed on Sun Dec 28 10:30:12 2014

@_date: 2014-12-29 20:45:44
@_author: =?UTF-8?B?T8SfdXogWWFyxLFtdGVwZQ==?= 
@_subject: [tor-talk] tor setup on wt3020h with openwrt problem 
I added this to firewall.user and saw that UDP messages are somehow blocked.
[ 2539.100000] iptables denied: IN=wlan0 OUT=
MAC=20:28:18:a0:a8:fe:e0:b9:a5:9d:7b:4f:08:00 SRC=192.168.2.171
DST=192.168.2.1 LEN=66 TOS=0x00 PREC=0x00 TTL=64 ID=38735 DF PROTO=UDP
SPT=48397 DPT=9053 LEN=46
[ 2550.550000] iptables denied: IN=wlan0 OUT=
MAC=20:28:18:a0:a8:fe:e0:b9:a5:9d:7b:4f:08:00 SRC=192.168.2.171
DST=192.168.2.1 LEN=70 TOS=0x00 PREC=0x00 TTL=64 ID=40926 DF PROTO=UDP
SPT=47905 DPT=9053 LEN=50
[ 2563.880000] iptables denied: IN=wlan0 OUT=
MAC=20:28:18:a0:a8:fe:e0:b9:a5:9d:7b:4f:08:00 SRC=192.168.2.171
DST=192.168.2.1 LEN=64 TOS=0x00 PREC=0x00 TTL=64 ID=43508 DF PROTO=UDP
SPT=37506 DPT=9053 LEN=44
[ 2574.950000] iptables denied: IN=wlan0 OUT=
MAC=20:28:18:a0:a8:fe:68:48:98:59:97:36:08:00 SRC=192.168.2.148
DST=192.168.2.1 LEN=70 TOS=0x00 PREC=0x00 TTL=64 ID=54347 DF PROTO=UDP
SPT=28425 DPT=9053 LEN=50
[ 2586.200000] iptables denied: IN=wlan0 OUT=
MAC=20:28:18:a0:a8:fe:e0:b9:a5:9d:7b:4f:08:00 SRC=192.168.2.171
DST=192.168.2.1 LEN=66 TOS=0x00 PREC=0x00 TTL=64 ID=46793 DF PROTO=UDP
SPT=37394 DPT=9053 LEN=46
[ 2598.680000] iptables denied: IN=wlan0 OUT=
MAC=20:28:18:a0:a8:fe:e0:b9:a5:9d:7b:4f:08:00 SRC=192.168.2.171
DST=192.168.2.1 LEN=64 TOS=0x00 PREC=0x00 TTL=64 ID=48473 DF PROTO=UDP
SPT=57058 DPT=9053 LEN=44
[ 2611.290000] iptables denied: IN=wlan0 OUT=
MAC=20:28:18:a0:a8:fe:68:48:98:59:97:36:08:00 SRC=192.168.2.148
DST=192.168.2.1 LEN=68 TOS=0x00 PREC=0x00 TTL=64 ID=58998 DF PROTO=UDP
SPT=58128 DPT=9053 LEN=48
route -n was strange
# route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use
192.168.1.0     0.0.0.0         255.255.255.0   U     0      0        0
192.168.2.0     0.0.0.0         255.255.255.0   U     0      0        0
netstat -pantu says the ports are right
 netstat -pantu
 Active Internet connections (servers and established)
 Proto Recv-Q Send-Q Local Address           Foreign Address
State       PID/Program name
 tcp        0      0 192.168.2.1:9040        0.0.0.0:*
LISTEN      734/tor
 tcp        0      0 0.0.0.0:80              0.0.0.0:*
LISTEN      756/uhttpd
 tcp        0      0 0.0.0.0:53              0.0.0.0:*
LISTEN      1059/dnsmasq
 tcp        0      0 0.0.0.0:22              0.0.0.0:*
LISTEN      699/dropbear
 tcp        0      0 0.0.0.0:443             0.0.0.0:*
LISTEN      734/tor
 tcp        0    248 192.168.2.1:22          192.168.2.171:44694
ESTABLISHED 1062/dropbear
 tcp        0      0 :::80                   :::*
LISTEN      756/uhttpd
 tcp        0      0 :::53                   :::*
LISTEN      1059/dnsmasq
 tcp        0      0 :::22                   :::*
LISTEN      699/dropbear
 udp        0      0 0.0.0.0:53              0.0.0.0:*
 udp        0      0 0.0.0.0:67              0.0.0.0:*
 udp        0      0 192.168.2.1:9053        0.0.0.0:*
 udp        0      0 :::546
:::*                                812/odhcp6c
 udp        0      0 :::547
:::*                                669/odhcpd
 udp        0      0 :::53
:::*                                1059/dnsmasq
here is iptables -L
Chain INPUT (policy ACCEPT)
target     prot opt source               destination
delegate_input  all  --  anywhere             anywhere
LOG        all  --  anywhere             anywhere             limit: avg
5/min burst 5 LOG level debug prefix "iptables denied: "
Chain FORWARD (policy DROP)
target     prot opt source               destination
delegate_forward  all  --  anywhere             anywhere
Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination
delegate_output  all  --  anywhere             anywhere
Chain delegate_forward (1 references)
target     prot opt source               destination
forwarding_rule  all  --  anywhere             anywhere             /* user
chain for forwarding */
ACCEPT     all  --  anywhere             anywhere             ctstate
zone_lan_forward  all  --  anywhere             anywhere
zone_wan_forward  all  --  anywhere             anywhere
reject     all  --  anywhere             anywhere
Chain delegate_input (1 references)
target     prot opt source               destination
ACCEPT     all  --  anywhere             anywhere
input_rule  all  --  anywhere             anywhere             /* user
chain for input */
ACCEPT     all  --  anywhere             anywhere             ctstate
syn_flood  tcp  --  anywhere             anywhere             tcp
zone_lan_input  all  --  anywhere             anywhere
zone_wan_input  all  --  anywhere             anywhere
Chain delegate_output (1 references)
target     prot opt source               destination
ACCEPT     all  --  anywhere             anywhere
output_rule  all  --  anywhere             anywhere             /* user
chain for output */
ACCEPT     all  --  anywhere             anywhere             ctstate
zone_lan_output  all  --  anywhere             anywhere
zone_wan_output  all  --  anywhere             anywhere
Chain forwarding_lan_rule (1 references)
target     prot opt source               destination
Chain forwarding_rule (1 references)
target     prot opt source               destination
Chain forwarding_transtor_rule (1 references)
target     prot opt source               destination
Chain forwarding_wan_rule (1 references)
target     prot opt source               destination
Chain input_lan_rule (1 references)
target     prot opt source               destination
Chain input_rule (1 references)
target     prot opt source               destination
Chain input_transtor_rule (1 references)
target     prot opt source               destination
Chain input_wan_rule (1 references)
target     prot opt source               destination
Chain output_lan_rule (1 references)
target     prot opt source               destination
Chain output_rule (1 references)
target     prot opt source               destination
Chain output_transtor_rule (1 references)
target     prot opt source               destination
Chain output_wan_rule (1 references)
target     prot opt source               destination
Chain reject (3 references)
target     prot opt source               destination
REJECT     tcp  --  anywhere             anywhere             reject-with
REJECT     all  --  anywhere             anywhere             reject-with
Chain syn_flood (1 references)
target     prot opt source               destination
RETURN     tcp  --  anywhere             anywhere             tcp
flags:FIN,SYN,RST,ACK/SYN limit: avg 25/sec burst 50
DROP       all  --  anywhere             anywhere
Chain zone_lan_dest_ACCEPT (2 references)
target     prot opt source               destination
ACCEPT     all  --  anywhere             anywhere
Chain zone_lan_forward (1 references)
target     prot opt source               destination
forwarding_lan_rule  all  --  anywhere             anywhere             /*
user chain for forwarding */
ACCEPT     all  --  anywhere             anywhere             ctstate DNAT
zone_lan_dest_ACCEPT  all  --  anywhere             anywhere
Chain zone_lan_input (1 references)
target     prot opt source               destination
input_lan_rule  all  --  anywhere             anywhere             /* user
chain for input */
ACCEPT     all  --  anywhere             anywhere             ctstate DNAT
zone_lan_src_ACCEPT  all  --  anywhere             anywhere
Chain zone_lan_output (1 references)
target     prot opt source               destination
output_lan_rule  all  --  anywhere             anywhere             /* user
chain for output */
zone_lan_dest_ACCEPT  all  --  anywhere             anywhere
Chain zone_lan_src_ACCEPT (1 references)
target     prot opt source               destination
ACCEPT     all  --  anywhere             anywhere
Chain zone_transtor_dest_ACCEPT (1 references)
target     prot opt source               destination
Chain zone_transtor_dest_REJECT (1 references)
target     prot opt source               destination
Chain zone_transtor_forward (0 references)
target     prot opt source               destination
forwarding_transtor_rule  all  --  anywhere
anywhere             /* user chain for forwarding */
ACCEPT     all  --  anywhere             anywhere             ctstate DNAT
zone_transtor_dest_REJECT  all  --  anywhere
Chain zone_transtor_input (0 references)
target     prot opt source               destination
input_transtor_rule  all  --  anywhere             anywhere             /*
user chain for input */
ACCEPT     udp  --  anywhere             anywhere             udp
dpt:bootps /* Allow-Tor-DHCP */
ACCEPT     tcp  --  anywhere             anywhere             tcp dpt:9040
ACCEPT     udp  --  anywhere             anywhere             udp dpt:9053
ACCEPT     all  --  anywhere             anywhere             ctstate DNAT
zone_transtor_src_REJECT  all  --  anywhere             anywhere
Chain zone_transtor_output (0 references)
target     prot opt source               destination
output_transtor_rule  all  --  anywhere             anywhere             /*
user chain for output */
zone_transtor_dest_ACCEPT  all  --  anywhere
Chain zone_transtor_src_REJECT (1 references)
target     prot opt source               destination
Chain zone_wan_dest_ACCEPT (1 references)
target     prot opt source               destination
ACCEPT     all  --  anywhere             anywhere
Chain zone_wan_dest_REJECT (1 references)
target     prot opt source               destination
reject     all  --  anywhere             anywhere
Chain zone_wan_forward (1 references)
target     prot opt source               destination
forwarding_wan_rule  all  --  anywhere             anywhere             /*
user chain for forwarding */
ACCEPT     all  --  anywhere             anywhere             ctstate DNAT
zone_wan_dest_REJECT  all  --  anywhere             anywhere
Chain zone_wan_input (1 references)
target     prot opt source               destination
input_wan_rule  all  --  anywhere             anywhere             /* user
chain for input */
ACCEPT     udp  --  anywhere             anywhere             udp
dpt:bootpc /* Allow-DHCP-Renew */
ACCEPT     icmp --  anywhere             anywhere             icmp
echo-request /* Allow-Ping */
ACCEPT     tcp  --  anywhere             anywhere             tcp dpt:https
ACCEPT     all  --  anywhere             anywhere             ctstate DNAT
zone_wan_src_REJECT  all  --  anywhere             anywhere
Chain zone_wan_output (1 references)
target     prot opt source               destination
output_wan_rule  all  --  anywhere             anywhere             /* user
chain for output */
zone_wan_dest_ACCEPT  all  --  anywhere             anywhere
Chain zone_wan_src_REJECT (1 references)
target     prot opt source               destination
reject     all  --  anywhere             anywhere
I started to lost my Internet connection for other adsl users. When they
connected to normal adsl ssid while the tor router is plugged, they started
to lost connection.
Seems there is a firewall or network problem.
Anyone can figure it out?

@_date: 2015-01-03 00:54:35
@_author: =?UTF-8?B?T8SfdXogWWFyxLFtdGVwZQ==?= 
@_subject: [tor-talk] tor setup on wt3020h with openwrt problem 
I changed the firewall rules.
 This file is interpreted as shell script.
# Put your custom iptables rules here, they will
# be executed with each firewall (re-)start.
# Internal uci firewall chains are flushed and recreated on reload, so
# put custom rules into the root chains e.g. INPUT or FORWARD or into the
# special user chains, e.g. input_wan_rule or postrouting_lan_rule.
 -A INPUT -m limit --limit 5/min -j LOG --log-prefix "iptables
denied: " --log-level 7
iptables -t nat -A PREROUTING -p tcp --dport 80 -j ACCEPT
iptables -t nat -A PREROUTING -p tcp --dport 22 -j ACCEPT
iptables -t nat -A PREROUTING -i wlan0 -p udp --dport 53 -j REDIRECT
--to-ports 9053
iptables -t nat -A PREROUTING -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN
-j REDIRECT --to-ports 9040
 -t nat -A PREROUTING -i wlan0 -p tcp --syn -j REDIRECT --to-ports
config defaults
  option syn_flood  1
  option input    ACCEPT
  option output   ACCEPT
  option forward  ACCEPT
# Uncomment this line to disable ipv6 rules
  option disable_ipv6 1
config zone
    option name 'lan'
    option input 'ACCEPT'
    option output 'ACCEPT'
    option forward 'ACCEPT'
    option network 'lan'
config zone
        option name             wan
        list   network          'wan'
        option input            ACCEPT
        option output           ACCEPT
        option forward          ACCEPT
        option masq             1
        option mtu_fix          1
config zone
        option name     transtor
        option input    ACCEPT
        option output   ACCEPT
        option forward  ACCEPT
         syn_flood 1
        option conntrack 1  setting is mandatory
# Allow Transparent clients the ability to DHCP an address
# XXX TODO: Audit this to ensure it doesn't leak UDP port 67 to the net!
config rule
        option name             'Allow-Tor-DHCP'
        option src              transtor
        option proto            udp
        option dest_port        67
        option target           ACCEPT
# Tor transparent-proxy-port (set in /etc/tor/torrc)
config rule
option name             'Allow-Tor-Transparent'
        option src              transtor
        option proto            tcp
        option dest_port        9040
        option target           ACCEPT
# Tor DNS-proxy-port (set in /etc/tor/torrc)
config rule
        option name             'Allow-Tor-DNS'
        option src              transtor
        option proto            udp
        option dest_port        9053
        option target           ACCEPT
 rule
#    option name 'Allow-DHCP-Renew'
#    option src 'transtor'
#    option proto 'wan'
#    option dest_port '68'
#    option target 'ACCEPT'
#    option family 'ipv4'
config forwarding
        option src wan
        option dst lan
config include
    option path '/etc/firewall.user'
netstat -pantu
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address
State       PID/Program name
tcp        0      0 192.168.2.1:9040        0.0.0.0:*
LISTEN      883/tor
tcp        0      0 127.0.0.1:9040          0.0.0.0:*
LISTEN      883/tor
tcp        0      0 0.0.0.0:80              0.0.0.0:*
LISTEN      911/uhttpd
tcp        0      0 0.0.0.0:53              0.0.0.0:*
LISTEN      1016/dnsmasq
tcp        0      0 0.0.0.0:22              0.0.0.0:*
LISTEN      700/dropbear
tcp        0      0 192.168.2.1:9050        0.0.0.0:*
LISTEN      883/tor
tcp        0      0 192.168.2.1:9040        192.168.2.171:39140
ESTABLISHED 883/tor
tcp        0      0 192.168.1.104:56891     216.17.99.144:9001
ESTABLISHED 883/tor
tcp        0      0 192.168.2.1:9040        192.168.2.171:33555
ESTABLISHED 883/tor
tcp        0      0 192.168.1.104:55734     171.25.193.9:80
TIME_WAIT   -
tcp        0      0 192.168.2.1:22          192.168.2.171:38308
ESTABLISHED 1147/dropbear
tcp        0      0 192.168.2.1:9040        192.168.2.171:53402
ESTABLISHED 883/tor
tcp        0      0 192.168.2.1:9040        192.168.2.171:39141
ESTABLISHED 883/tor
tcp        0      0 192.168.1.104:54953     154.35.32.5:443
TIME_WAIT   -
tcp        0      0 192.168.1.104:51428     86.59.119.83:443
ESTABLISHED 883/tor
tcp        0      0 192.168.1.104:48492     37.143.86.26:443
ESTABLISHED 883/tor
tcp        0      0 :::80                   :::*
LISTEN      911/uhttpd
tcp        0      0 :::53                   :::*
LISTEN      1016/dnsmasq
tcp        0      0 :::22                   :::*
LISTEN      700/dropbear
udp        0      0 0.0.0.0:53              0.0.0.0:*
udp        0      0 0.0.0.0:67              0.0.0.0:*
udp        0      0 192.168.2.1:9053        0.0.0.0:*
udp        0      0 127.0.0.1:9053          0.0.0.0:*
udp        0      0 :::546
:::*                                764/odhcp6c
udp        0      0 :::547
:::*                                674/odhcpd
udp        0      0 :::53
:::*                                1016/dnsmasq
When i entered  it says i am using tor. But
when i entered i  i still see my ADSL ip not
the one tor check says.
So something is not the way i wishe. I think dns queries are still not
going through tor.
# Generated by iptables-save v1.4.21 on Fri Jan  2 22:51:39 2015
:PREROUTING ACCEPT [79:16807]
:INPUT ACCEPT [121:11370]
:OUTPUT ACCEPT [87:7496]
:POSTROUTING ACCEPT [6:1420]
:delegate_postrouting - [0:0]
:delegate_prerouting - [0:0]
:postrouting_lan_rule - [0:0]
:postrouting_rule - [0:0]
:postrouting_transtor_rule - [0:0]
:postrouting_wan_rule - [0:0]
:prerouting_lan_rule - [0:0]
:prerouting_rule - [0:0]
:prerouting_transtor_rule - [0:0]
:prerouting_wan_rule - [0:0]
:zone_lan_postrouting - [0:0]
:zone_lan_prerouting - [0:0]
:zone_transtor_postrouting - [0:0]
:zone_transtor_prerouting - [0:0]
:zone_wan_postrouting - [0:0]
:zone_wan_prerouting - [0:0]
-A PREROUTING -j delegate_prerouting
-A PREROUTING -p tcp -m tcp --dport 80 -j ACCEPT
-A PREROUTING -p tcp -m tcp --dport 22 -j ACCEPT
-A PREROUTING -i wlan0 -p udp -m udp --dport 53 -j REDIRECT --to-ports 9053
-A PREROUTING -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -j REDIRECT
--to-ports 9040
-A POSTROUTING -j delegate_postrouting
-A delegate_postrouting -m comment --comment "user chain for postrouting"
-j postrouting_rule
-A delegate_postrouting -o br-lan -j zone_lan_postrouting
-A delegate_postrouting -o eth0.2 -j zone_wan_postrouting
-A delegate_prerouting -m comment --comment "user chain for prerouting" -j
-A delegate_prerouting -i br-lan -j zone_lan_prerouting
-A delegate_prerouting -i eth0.2 -j zone_wan_prerouting
-A zone_lan_postrouting -m comment --comment "user chain for postrouting"
-j postrouting_lan_rule
-A zone_lan_prerouting -m comment --comment "user chain for prerouting" -j
-A zone_transtor_postrouting -m comment --comment "user chain for
postrouting" -j postrouting_transtor_rule
-A zone_transtor_prerouting -m comment --comment "user chain for
prerouting" -j prerouting_transtor_rule
-A zone_wan_postrouting -m comment --comment "user chain for postrouting"
-j postrouting_wan_rule
-A zone_wan_postrouting -j MASQUERADE
-A zone_wan_prerouting -m comment --comment "user chain for prerouting" -j
# Completed on Fri Jan  2 22:51:39 2015
# Generated by iptables-save v1.4.21 on Fri Jan  2 22:51:39 2015
:PREROUTING ACCEPT [8382:5506270]
:OUTPUT ACCEPT [6460:3708106]
:delegate_notrack - [0:0]
:zone_lan_notrack - [0:0]
-A PREROUTING -j delegate_notrack
-A delegate_notrack -i br-lan -j zone_lan_notrack
-A zone_lan_notrack -j CT --notrack
# Completed on Fri Jan  2 22:51:39 2015
# Generated by iptables-save v1.4.21 on Fri Jan  2 22:51:39 2015
:PREROUTING ACCEPT [8382:5506270]
:INPUT ACCEPT [8270:5488440]
:FORWARD ACCEPT [46:5444]
:OUTPUT ACCEPT [6460:3708106]
:POSTROUTING ACCEPT [6508:3714206]
:fwmark - [0:0]
:mssfix - [0:0]
-A PREROUTING -j fwmark
-A FORWARD -j mssfix
-A mssfix -o eth0.2 -p tcp -m tcp --tcp-flags SYN,RST SYN -m comment
--comment "wan (mtu_fix)" -j TCPMSS --clamp-mss-to-pmtu
# Completed on Fri Jan  2 22:51:39 2015
# Generated by iptables-save v1.4.21 on Fri Jan  2 22:51:39 2015
:INPUT ACCEPT [251:24620]
:FORWARD ACCEPT [2:120]
:OUTPUT ACCEPT [8:2086]
:delegate_forward - [0:0]
:delegate_input - [0:0]
:delegate_output - [0:0]
:forwarding_lan_rule - [0:0]
:forwarding_rule - [0:0]
:forwarding_transtor_rule - [0:0]
:forwarding_wan_rule - [0:0]
:input_lan_rule - [0:0]
:input_rule - [0:0]
:input_transtor_rule - [0:0]
:input_wan_rule - [0:0]
:output_lan_rule - [0:0]
:output_rule - [0:0]
:output_transtor_rule - [0:0]
:output_wan_rule - [0:0]
:reject - [0:0]
:syn_flood - [0:0]
:zone_lan_dest_ACCEPT - [0:0]
:zone_lan_forward - [0:0]
:zone_lan_input - [0:0]
:zone_lan_output - [0:0]
:zone_lan_src_ACCEPT - [0:0]
:zone_transtor_dest_ACCEPT - [0:0]
:zone_transtor_forward - [0:0]
:zone_transtor_input - [0:0]
:zone_transtor_output - [0:0]
:zone_transtor_src_ACCEPT - [0:0]
:zone_wan_dest_ACCEPT - [0:0]
:zone_wan_forward - [0:0]
:zone_wan_input - [0:0]
:zone_wan_output - [0:0]
:zone_wan_src_ACCEPT - [0:0]
-A INPUT -j delegate_input
-A FORWARD -j delegate_forward
-A OUTPUT -j delegate_output
-A delegate_forward -m comment --comment "user chain for forwarding" -j
-A delegate_forward -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
-A delegate_forward -i br-lan -j zone_lan_forward
-A delegate_forward -i eth0.2 -j zone_wan_forward
-A delegate_input -i lo -j ACCEPT
-A delegate_input -m comment --comment "user chain for input" -j input_rule
-A delegate_input -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
-A delegate_input -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -j syn_flood
-A delegate_input -i br-lan -j zone_lan_input
-A delegate_input -i eth0.2 -j zone_wan_input
-A delegate_output -o lo -j ACCEPT
-A delegate_output -m comment --comment "user chain for output" -j
-A delegate_output -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
-A delegate_output -o br-lan -j zone_lan_output
-A delegate_output -o eth0.2 -j zone_wan_output
-A reject -p tcp -j REJECT --reject-with tcp-reset
-A reject -j REJECT --reject-with icmp-port-unreachable
-A syn_flood -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -m limit --limit
25/sec --limit-burst 50 -j RETURN
-A syn_flood -j DROP
-A zone_lan_dest_ACCEPT -o br-lan -j ACCEPT
-A zone_lan_forward -m comment --comment "user chain for forwarding" -j
-A zone_lan_forward -m conntrack --ctstate DNAT -m comment --comment
"Accept port forwards" -j ACCEPT
-A zone_lan_forward -j zone_lan_dest_ACCEPT
-A zone_lan_input -m comment --comment "user chain for input" -j
-A zone_lan_input -m conntrack --ctstate DNAT -m comment --comment "Accept
port redirections" -j ACCEPT
-A zone_lan_input -j zone_lan_src_ACCEPT
-A zone_lan_output -m comment --comment "user chain for output" -j
-A zone_lan_output -j zone_lan_dest_ACCEPT
-A zone_lan_src_ACCEPT -i br-lan -j ACCEPT
-A zone_transtor_forward -m comment --comment "user chain for forwarding"
-j forwarding_transtor_rule
-A zone_transtor_forward -m conntrack --ctstate DNAT -m comment --comment
"Accept port forwards" -j ACCEPT
-A zone_transtor_forward -j zone_transtor_dest_ACCEPT
-A zone_transtor_input -m comment --comment "user chain for input" -j
-A zone_transtor_input -p udp -m udp --dport 67 -m comment --comment
Allow-Tor-DHCP -j ACCEPT
-A zone_transtor_input -p tcp -m tcp --dport 9040 -m comment --comment
Allow-Tor-Transparent -j ACCEPT
-A zone_transtor_input -p udp -m udp --dport 9053 -m comment --comment
Allow-Tor-DNS -j ACCEPT
-A zone_transtor_input -m conntrack --ctstate DNAT -m comment --comment
"Accept port redirections" -j ACCEPT
-A zone_transtor_input -j zone_transtor_src_ACCEPT
-A zone_transtor_output -m comment --comment "user chain for output" -j
-A zone_transtor_output -j zone_transtor_dest_ACCEPT
-A zone_wan_dest_ACCEPT -o eth0.2 -j ACCEPT
-A zone_wan_forward -m comment --comment "user chain for forwarding" -j
-A zone_wan_forward -m comment --comment "forwarding wan -> *" -j ACCEPT
-A zone_wan_forward -m conntrack --ctstate DNAT -m comment --comment
"Accept port forwards" -j ACCEPT
-A zone_wan_forward -j zone_wan_dest_ACCEPT
-A zone_wan_input -m comment --comment "user chain for input" -j
-A zone_wan_input -m conntrack --ctstate DNAT -m comment --comment "Accept
port redirections" -j ACCEPT
-A zone_wan_input -j zone_wan_src_ACCEPT
-A zone_wan_output -m comment --comment "user chain for output" -j
-A zone_wan_output -j zone_wan_dest_ACCEPT
-A zone_wan_src_ACCEPT -i eth0.2 -j ACCEPT
# Completed on Fri Jan  2 22:51:39 2015
Any idea what should i reject at the firewall rules?

@_date: 2015-06-09 20:40:23
@_author: =?UTF-8?B?T8SfdXogWWFyxLFtdGVwZQ==?= 
@_subject: [tor-talk] onion routing using browser 
I am trying to use web browsers as a relay or a node of the onion routing.
Planning to use each web browser user to also become a part of the routing
network. Is there any way to implement it or any work that is done on it or
any idea, tip?
Will be great if you show some guidance.

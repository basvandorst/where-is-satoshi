
@_date: 2014-06-16 01:32:36
@_author: Zhuo Zhongliu 
@_subject: [tor-talk] Strange problmes when building Tor private network 
To someone might concerns, Hi~ Recently I was building a tor private network in local lan for experiment, one of my dirs is configured as follows:
Address 192.168.1.115
ORPort 5003
ORListenAddress 192.168.1.115:5003
SocksPort 7003
NickName dir3
DataDirectory /home/xxx/experiment/routers/3
TestingTorNetwork 1
ExitPolicyRejectPrivate 0
Log notice file /home/xxx/experiment/routers/3/log
Log debug file /home/xxx/experiment/routers/3/logdebug
SafeLogging 0
UseMicrodescriptors 1
ExitPolicy reject *:25
ExitPolicy reject *:119
ExitPolicy reject *:135-139
ExitPolicy reject *:445
ExitPolicy reject *:563
ExitPolicy reject *:1214
ExitPolicy reject *:4661-4666
ExitPolicy reject *:6346-6429
ExitPolicy reject *:6699
ExitPolicy reject *:6881-6999
ExitPolicy accept *:*
RelayBandwidthRate 75 MB
RelayBandwidthBurst 75 MB
ContactInfo dir3 at dir3.com
DirPort 10003
DirListenAddress 192.168.1.115:10003
V3AuthoritativeDirectory 1
V2AuthoritativeDirectory 1
AuthoritativeDirectory 1
RecommendedVersions 0.2.4.19,0.2.4.20,0.4.2.21
DirServer dir1 v3ident=A16D7E41A4CDE487E1B430825FD89581268F33E3 orport=5001 192.168.1.167:10001 E782 525F 08D9 D7A8 2A99 4CA5 D44F BFB9 2671 77EE
DirServer dir2 v3ident=6323D6E95D1D6670E6C2D87A2BEB86D35702A4B8 orport=5002 192.168.1.178:10002 970D E51E 5307 8F3F 0017 786B C612 FD23 DC6A 9F93
DirServer dir3 v3ident=3F35F22D49E8DDF6B61912009549CC8AF24BD1CB orport=5003 192.168.1.115:10003 7856 81F0 4DBC B1C2 4511 2122 1420 3E04 5A9D 48B6
DirServer dir4 v3ident=2C0C3D5B3EC9FB119D2481E3FE2000773E721DF6 orport=5004 192.168.1.141:10004 85A5 B8C3 FB36 7250 82F5 10D9 59EF AB57 7C55 59F6
DirServer dir5 v3ident=425B092EC22C06C6CBBBBA4B8F051A5DD5DA5A0D orport=5005 192.168.1.167:10005 740B 6BC3 EAC4 D93E 2CED 4147 9041 AB90 B2B2 075F
However, when my tor client connected to those dirs, it got the cached-consensus correctly. The only thing which makes me confused is that the client-version and the server-version content in Cached-Consensus as well as the directory-footer is MISSING!!! After checking the log, I found the warning "Consensus with empty bandwidth: G=0 M=0 E=176 D=489 T=665".
So my questions are 1)how tor decides the bandwidth in LAN in the consensus file? RelayBandwidthRate or else? It turns out that no matter how I changed the RelayBandwidthRate, the bandwidth in consensus file still the same as before.
2) compared with the real tor network, why some contents are missing in the Cached-Consensus file? 3) is it possible to control the flags in the LAN private tor network?
could someone help me out? Thanks in advance~

@_date: 2014-06-17 18:23:16
@_author: =?UTF-8?B?5Y2T5Lit5rWB?= 
@_subject: [tor-talk] Strange problmes when building Tor private network 
I really appreciate your help Nick, it helps a lot, now it seems the
consensus file is correct~
BTW, I Googled the proposal 161 but there was no section 8 ~
and one last thing, what does "Unmeasured =1  which is based on a threshold
of 3 or more measurements" mean in consensus file? Much obliged.


@_date: 2011-12-04 21:53:01
@_author: Pascal 
@_subject: [tor-talk] How important is it that the MyFamily option be set 
While looking through  I noticed a couple relays that appear to be related but were not listed in each others' family.  Out of curiosity I whipped up a quick Perl script to check all relays with identical contact info to see if they are listed in each others' family.  On this basis alone I found 142 relays that are not correctly listed.
The config file says to see  for more information about this option, but this URL appears broken.

@_date: 2011-12-05 16:17:16
@_author: Pascal 
@_subject: [tor-talk] How important is it that the MyFamily option be set 
Removing relays in the same /16 leaves me with 120.  Matching contact strings based solely on alphanumeric characters adds 4.  Adding a unidirectional association check brings me up to 142.  Adding a search for similarly named relays (such as Pascal0 and Pascal1) brings the total to 171.  Keep in mind there are probably some listed in here that are not really related.
I have posted the script and its output at

@_date: 2011-12-05 18:36:09
@_author: Pascal 
@_subject: [tor-talk] How important is it that the MyFamily option be set 
Actually, your servers were the ones that got me looking in the first place.  Based upon reverse dns (which the Perl script doesn't use) it appears saeed and hazare are both your servers and are both missing from your other servers.  raskin especially seems to be missing a lot of servers in your family.
Note that it does not hurt a server to have itself listed in MyFamily. The easiest way to maintain this line is to make a list of all your servers and paste that line verbatim on all of your servers.

@_date: 2011-12-06 12:37:57
@_author: Pascal 
@_subject: [tor-talk] How important is it that the MyFamily option be set 
When an experienced operator like Moritz who actually reads this list and wants to configure this correctly is unable to do so, there is definitely something wrong.
Torservers.net apparently publishes their config file.  There appear to be a number of relays using this config file that are not associated with each other or Torservers.net.  How would your proposal be affected by this?
There is an open request to add an include option to the config file that may help to mitigate this: The current framework allows multiple operators to manage multiple overlapping nodes without forcing every node to be in the same family. For example, if operator A has access to nodes 1 and 2 and operator B has access to nodes 2 and 3, then currently nodes 1 and 3 do not need to be in the same family.  No idea if anyone actually uses it this way.
As long as a node need not and can not be in multiple families at the same time, is there really a need for the family string to be secret? The only reason that unidirectional associations are currently ignored is to prevent a node from claiming that every other node is in their family.  Does it really hurt anything if an unassociated node claims they are in your family alone?
 From the results of the script I just posted, it appears to be much more likely that ContactInfo will be set consistently across all nodes in a family than MyFamily will actually be set correctly.
Rather than supplanting the existing family system, I would suggest a secondary system be added.  A FamilyName (or similar) option be added to the config file.  If not set, ContactInfo would automatically be used in its place (not published as the FamilyName, but used in its place by anyone looking for a path).  Nodes would then avoid using two relays with the same FamilyName (or ContactInfo).  Note that a case insensitive alphanumeric match would probably be best.  Users do not always type the exact same thing into ContactInfo.
This way users who want their nodes associated but don't want to set ContactInfo can do so, existing bidirectional associations continue to work, and families automagically get created for anyone who did set

@_date: 2011-12-17 14:22:02
@_author: Pascal 
@_subject: [tor-talk] 2 tests failing on 0.2.3.9 and 0.2.3.10 
Anyone else seeing two failed tests in "make test" on 0.2.3.9 and 0.2.3.10?  0.2.3.8 has no failed tests.

@_date: 2012-04-21 12:23:27
@_author: Pascal 
@_subject: [tor-talk] Problem with TransPort etc. 
Basically what you have done by using DNAT is changed the destination ip and port for any outbound traffic to be the tor service on the server. By doing so the traffic no longer contains the original destination ip and port so tor has no idea what to do with it.  What you need to do is direct the traffic to tor, while leaving the original destination intact.
There is a tutorial on how to do this at

@_date: 2012-04-21 13:41:21
@_author: Pascal 
@_subject: [tor-talk] Retroactive traffic confirmation attacks on Tor 
MAC addresses are used by layer 2 protocols (see  ).  Once an IP packet traverses a layer 3 device (such as a router) the srcMac has been changed to that of the router's egress interface.  Unless your ISP provided your router, srcMac identifies only which router the packet came from, not the particular client.
Decent routers randomize source ports to prevent traffic correlation (makes it harder to confirm that two streams from the same router came from the same client).
If you need deniability, don't use an ISP provided router, make sure your router randomizes source ports, and have an open guest wifi network (though obviously make sure the guest network can only access the Internet, not your LAN).

@_date: 2012-01-04 14:21:33
@_author: Pascal 
@_subject: [tor-talk] "Invalid Server Certificate" accessing 
The tool at  does a good job of showing what is going on with a web site's certs.  Traditionally a website is expected to send its own server cert and all intermediate certs, but not the root cert.  You can run  through that tool to see how this looks.  Running freenet.us.to through that tool shows how a site including the root cert looks.  Running  through there shows that there are actually 2 intermediate certs required for the server cert used, but only 1 of them is being included.

@_date: 2012-01-04 14:30:14
@_author: Pascal 
@_subject: [tor-talk] "Invalid Server Certificate" accessing 
Running  through that tool shows the 2nd intermediate certificate that needs to be included.

@_date: 2012-01-05 09:57:08
@_author: Pascal 
@_subject: [tor-talk] Deterministic builds? 
Just because the build is good, does not mean it will work when run.  I recently ran into a problem with Tor (bug 4779) where even a good build would not work correctly due to a bug in OpenSSL.  I ran a broken node for about a month before I realized what had happened.
I would submit there are actually two parts to this problem:
Bug 4780:  Verifying the build works before allowing it to be installed.   There are already tests in place to do this via "make test", but currently the Makefile does not require "make test" to complete successfully during a "make install".  Note that it does currently require "make test" to pass during a "make dist".
Bug 4781:  Verifying the build works in its runtime environment.  Again, the tests are already in place, they are just not being utilized.  I would suggest that during node startup every test that is run via "make test" be run again, and the node refuse to start if any of them fail.

@_date: 2012-01-11 23:11:59
@_author: Pascal 
@_subject: [tor-talk] Tor Survey 
The posted script uses the "openssl speed" command to evaluate the node's encryption performance.  This command iterates through every algorithm OpenSSL supports, most of which Tor doesn't use.  There is also a bug in OpenSSL where the speed command alone does not utilize encryption accelerators, so the output of this part of the script is completely useless to the study anyway.  To get the actual performance Tor sees you have to test each algorithm Tor uses independently with "-evp".  For example, on one of my Tor nodes "openssl speed" gives me:
type             16 bytes     64 bytes    256 bytes   1024 bytes   8192 aes-256 cbc      66979.82k    72147.67k    75580.48k    72884.57k while "openssl speed -evp aes-256-cbc" gives:
aes-256-cbc     442163.07k   472286.16k   477768.11k   485609.13k So Tor actually has available to it over 6x the performance for this algorithm of what the script will show.  No idea which algorithms Tor actually uses though.
--- snip ---

@_date: 2012-03-21 01:29:18
@_author: Pascal 
@_subject: [tor-talk] "Invalid Server Certificate" accessing 
Though the cert chain for  is now fixed on 38.229.72.14 and 38.229.72.16, it is still broken on 86.59.30.36.

@_date: 2012-05-31 10:44:44
@_author: Pascal 
@_subject: [tor-talk] Pirate Linux 1.5 
Looks like the first bug you need to fix is with NTP.  Your clock is not even close to right.

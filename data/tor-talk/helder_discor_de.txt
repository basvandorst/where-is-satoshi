
@_date: 2014-07-02 20:18:16
@_author: Helder Ribeiro 
@_subject: [tor-talk] High-latency hidden services (was: Re: Secure Hidden 
High-latency web browsing is actually a great use case and could
benefit from the extra security.
Apps like Pocket ( work as a "read it later"
queue, downloading things for offline reading. While you're reading an
offline article, you can also follow links and click to add them to
your queue. They'll be fetched when you're online so you can read them
"Offline mode" in current browsers unfortunately don't have this
queueing feature (I think), but it would be a fantastic addition to
An activist with limited internet connectivity could do their research
offline (Wikipedia, blogs, online news), follow links and queue them
all for download. When they get to a wifi hotspot, internet cafe,
etc., they can "sync" their TorBrowser and be free to go through the
material elsewhere (possibly more private).
Pushing latency a little further, this queue could even add sneakernet
support where it asks the user to plug in a USB drive and loads it
with a download script. User runs it somewhere with an internet
connection (or hands it to someone else), then loads it back in.
(Briar? to mind.)

@_date: 2014-07-10 21:06:47
@_author: Helder Ribeiro 
@_subject: [tor-talk] Can NAT traversal be Tor's killer feature? 
tl;dr: how about a virtual global flat LAN that maps static IPs to
onion addresses?
We all know the story. Random feature gets unintentionally picked up
as the main reason for buying/using a certain product, despite the
creator's intention being different or more general. (PC:
spreadsheets; Internet: porn; smartphones: messaging.)
Exhibit 1: Ricochet IM ( uses onion addresses
(each client runs a hidden service) as a sort of *static anonymous IP
address* and, because it's static, it's the user's identity too, in a
p2p/serverless chat app. It's dead simple, works like a charm behind
the firewall at work, and protects metadata, which no other chat
app/protocol I know does.
Exhibit 2: OnionShare ( does the same for file
sharing, and it's actually a much *easier* user experience to send
large files this way than any other. Why? "Static anomyous IP" (onion
address) and NAT traversal because all hidden services work by making
*outgoing* connections to Tor relays and don't need any open ports.
Those are two great apps that, unlike Tor Browser (which I love very
much, but hear me out), *improve* the user experience, through Tor, in
comparison with the mainstream (OnionShare even more so). The user
might not even care about security or anonymity, it's just a better
experience, period.
In this case, you don't have to convince people to make sacrifices in
the name of privacy, you just have to show them something they want.
That's when natural demands kicks in and suddenly you're not pushing
water uphill anymore, you've changed the landscape and it flows in the
direction you want. Like when Tesla made electric cars that people buy
*despite* being electric, not because of it.
As good as Ricochet and OnionShare are, they still had to go through
the trouble of integrating hidden services themselves.
If there is a virtual network interface that transparently maps static
IPs to onion addresses, all sorts of things could benefit from the
backward compatibility (old games, IP-based voip, screensharing,
real-time collaborative writing, etc.) and new ones could be built a
*lot* more easily.
[ZeroTierOne (
does this, but doesn't worry about privacy.]
Of course massive use would probably crush the current network, but
uptake would be gradual, and I imagine demand has a greater power to
drive capacity than the other way around.
The only thing better than serving the privacy-conscious is serving
privacy to those who don't even know they want it.
I'm nowhere near an expert and I could be just talking out of my ass,
so please let me know if this is completely stupid and would never
work. Thanks!

@_date: 2014-07-11 02:25:04
@_author: Helder Ribeiro 
@_subject: [tor-talk] Can NAT traversal be Tor's killer feature? 
Yeah, since all these connections will be made without leaving the Tor
network, it doesn't seem like it would be a bad thing to make all
nodes relays by default. Would they be exposing themselves to any
*extra* political risk than that of running a hidden service?
(Bandwidth correlation is a technical one, will open new thread.)
Although, as I said, with enough demand, I think capacity finds a way
of taking care of itself. If it's something people want, they'll find
out about "how to make X faster" and learn that it's based on Tor and
that you should become a relay or donate money here so that your
connection can get faster.
Oh, and for every 100 new relays, you gain on average X extra kbytes
of bandwidth: help us get to this month's goal of another 100 by
donating 5 bucks a month!
It's easier to convince people to improve something they want (games,
collaboration, p2p madness!) rather than convince them they need
something they're not sure what for (a browser that's slower but..
private? what's that?).
Great point. Hadn't thought of "in-between" approaches to either
"everyone a relay by default" or "opt-in only".
I still think people would be vocally against _automatically_ turning
a client into a relay given certain conditions, but Tor could at least
*suggest* it to the user:
"Hey, it seems like you are in great shape to be a relay, and that
would help everyone else a *lot*. It's not recommended in this, this,
and that case, but otherwise, it's up to you. Can I Get an Amen?"
Btw, there are some great comments here:

@_date: 2014-07-11 02:28:57
@_author: Helder Ribeiro 
@_subject: [tor-talk] Decoupling hidden service from relay behavior on the 
The issue with turning the user's machine into both a hidden service
and a relay is that by hitting the hidden service with heavy traffic
and checking whether a particular relay has gone down or changed its
available bandwidth an attacker can correlate both, and relay IP
addresses are publicly known.
But doesn't that fall under ?traffic confirmation?, which is not
something Tor tries to protect against?
Also, for behavior other than both going offline at the same time,
there might be something that can be done to isolate resources for the
relay and hidden service processes so that the fact that one has maxed
out their share doesn't show up in the other's externally observable
behavior. Don't shared hosting/virtualization solutions do this?

@_date: 2014-07-11 17:27:45
@_author: Helder Ribeiro 
@_subject: [tor-talk] Can NAT traversal be Tor's killer feature? 
That's awesome! Didn't know about it, thanks to you and Lunar for
pointing it out. Will research further.
This seems like an excellent Summer of Code job :) I'm not at all
familiar with any tor-related codebase and I'm a security noob, but
this is something I could try putting together.
Good point. If complete transparency isn't possible for all cases, it
might be for a good enough subset.
Otherwise, having a dead-simple library that makes it easy for
developers to abstract out the IP parts and allow using hidden
services instead could be a close second.

@_date: 2014-07-11 18:12:18
@_author: Helder Ribeiro 
@_subject: [tor-talk] Putting the "Tor" back in Torrent 
How a Popcorn Time fork could incentivize people to run thousands of
new Tor relays
Thinking about NAT traversal as Tor's killer feature lead to this
discussion: **If torrents are P2P's killer application, and NAT traversal/"static
IP" are Tor's (via hidden services), putting them together could prove
to be the best incentivization scheme for growing the Tor network
other than cold crypto cash[1].**
 You're stupid
Everybody knows you're not supposed to use torrents with tor[2], right?
But the problem there is using _existing_ bittorent clients and how
they leak IPs to trackers, etc. Drop those stones for a second and
hear me out. We're not proxying traffic from regular bittorrent
clients through tor, we're making something new.
 Onion Popcorn
Say we do the following:
1. Make a DHT that serves out peer onion addresses (OAs?) instead of
IP addresses;
2. Fork Popcorn Time, make it create a hidden service for the user and
connect to the OA DHT to fetch peers;
3. Connect to peers via their hidden services.
 Stop righ there, you'll break the network!
Oh, I forgot:
4. Make the Popcorn Time fork also **be a relay by default* whenever possible**.
Nobody would agree to do this on the main tor software for a thousand
reasons, but it's an *app* and you can decide to do that in it
independently. If you're going to add a lot of load to the network,
you have to give back.
This "Onion Popcorn" could also **soft-enforce download limits** based
on the amount of traffic the user has relayed. **Sane defaults and
interface nudges can go a long way.** (Popcorn Time itself doesn't
even expose network/bandwidth adjustments to the user and, for the
mainstream, we can count on hiding some options as something easier to
do than coming up with a proof-of-correctness anti-leeching scheme.)
Bandwidth at first probably wouldn't be enough to _stream_ anything,
but otherwise should work for downloading and watching.
**The end result is that you're incentivizing Tor "miners" by giving
them something they want (so bad, in fact, that it takes up most of
the Internet's traffic) in exchange for relaying traffic for the rest
of the Tor network.**
To boot, you end up with a very, very private torrent network that
never touches any exit node.
 You'll _still_ break the network!
Even if these torrent nodes are a net positive in terms of relay
capacity, this much usage of hidden services would probably put an
unanticipated load on hidden service directories and introduction
points. That could turn out to be a problem.
With enough demand, though, I think capacity finds a way of taking
care of itself. Isn't "the whole Internet is all of a sudden trying to
get private!" the thing we want the most? Much better problem trying
to scale a network that a lot of people want to use, than trying to
convince people to use something they don't see a need for.
If it's something people want, they'll find out about "how to make X
faster" and learn that it's based on Tor and that you should become a
relay or donate money here so that your connection gets faster.
Oh, and for every 100 new relays, you gain on average X extra kbytes
of download speed: help us get to this month's goal of another 100 by
donating 5 bucks a month!
 What do you say?
Alright, now back to me being stupid: please tear this idea down :) Thanks!
*: There are issues with running a relay and a hiddens service on the
same machine. Discussion here:
P.S.: you can follow me  on Twitter.
P.S.2: comments on Hacker News: [1]: [2]:

@_date: 2014-07-11 19:56:39
@_author: Helder Ribeiro 
@_subject: [tor-talk] Putting the "Tor" back in Torrent 
True. Hopefully, if the app is popular enough and this happens, there
will be enough pressure from users to unban relays (after all non-exit
relays are harmless to website operators).
Good point. As an optimization, users could pick relays for their
circuits from the torrent DHT itself (not necessarily nodes
hosting/downloading the same file). That would at least make them
neutral in terms of bandwidth consumption for the network.
The interface/"tit for tat" mechanism could also encourage users to
keep running the app longer.
Other than that, there could be a way to authenticate relays so that
they keep certain flags across sessions, and have regular tor clients
pick them for short-lived circuits like for HTTP traffic. No idea
aobut privacy implications either :/

@_date: 2014-06-12 02:05:52
@_author: Helder Ribeiro 
@_subject: [tor-talk] Tor trademark policy for local user communities 
I'm thinking of starting a forum for tor users in a specific geography and
append its name to "tor" as, for example, "ruby-sp" is a group for ruby
users in Sao Paulo. Is that allowed? Could "torsp", for instance, be used
as a domain name? Thanks!

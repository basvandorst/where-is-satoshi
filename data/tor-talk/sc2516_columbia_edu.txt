
@_date: 2008-11-11 14:50:14
@_author: Sambuddho Chakravarty 
@_subject: determining which are the ORs a Tor circuit is using 
Hello All
 I have a general question. I am using the default torrc (without
specifying which ORs to select and letting the client determine the
"best" ones for itself). Is there a way to detect which are the ORs the
client picks up for the entry , middleman and exit nodes (rather than
hacking into the source code of the tor client). I am using a rather
dated version of the client - 0.1.2.18.

@_date: 2008-11-11 15:54:56
@_author: Sambuddho Chakravarty 
@_subject: determining which are the ORs a Tor circuit is using 
I taking the following route circuitbuild.c-> circuit_send_next_onionskin->
 		I take the 'circ' pointer and -> crypt_path_t pointer ->
extend_info_t pointer -> nickname/addr
Should that work ?
Sambuddho

@_date: 2008-11-11 18:15:55
@_author: Sambuddho Chakravarty 
@_subject: determining which are the ORs a Tor circuit is using 
Hello Roger
 Thanks a lot. I thought I had emailed to a wrong group initially so I
emailed to all the groups. Sorry about that spamming.
Ill go through this and get back.

@_date: 2008-11-11 18:43:47
@_author: Sambuddho Chakravarty 
@_subject: determining which are the ORs a Tor circuit is using 
Hello Does this correlate to the place in the code in the file circuitbuilt.c
where you are signalling a circiut to go from closed state to open
state.  {
  ..  if (!hop) {
      /* done building the circuit. whew. */
      circuit_set_state(TO_CIRCUIT(circ), CIRCUIT_STATE_OPEN);
      log_info(LD_CIRC,"circuit built!");
      circuit_reset_failure_count(0);
      if (!has_completed_circuit && !circ->build_state->onehop_tunnel) {
        or_options_t *options = get_options();
        has_completed_circuit=1;
        /* FFFF Log a count of known routers here */
        log(LOG_NOTICE, LD_GENERAL,
            "Tor has successfully opened a circuit. "
            "Looks like client functionality is working.");
  }

@_date: 2009-12-07 17:53:42
@_author: Sambuddho Chakravarty 
@_subject: Problems with setting up a private Tor network and setting up your  
Dear Tor users
 I have two issues with the setting up a private Tor network and with
setting up my own Tor relay
Problem with setting up a private Tor network

@_date: 2009-12-08 14:06:06
@_author: Sambuddho Chakravarty 
@_subject: about the mailing list 
Dear Roger
 I think my mails are not reaching the mailing list. I don't see my own
mails being forwarded to my inbox. Has my membership revoked ? If so , can I
re-invoke my membership.

@_date: 2009-12-01 14:51:02
@_author: Sambuddho Chakravarty 
@_subject: problems with setting up a private Tor network 
Dear all
 I am trying to set up my own private Tor network . I am referring to the
instructions on the FAQ page :
In step 2 .
   I am planning to use 3 relays and one authority directory server. So I
should be creating 3 *data directories* for each of the relays. Is this a
correct interpretation of the instructions ? For each of my each of my *data
directory  *I should be typing the following command ? :
*tor --list-fingerprint --DataDirectory /path/to/datadir/ -f tmp.torrc
In step 3.
 As per the instructions
  "   Pick a password you like, then move the created authority_certificate
and authority_signing_key into the keys directory inside your first
authority's data directory. "
 What do you mean by -  first authority's data directory  ? I have three
data directory for each of my relays...

@_date: 2009-01-17 18:48:25
@_author: Sambuddho Chakravarty 
@_subject: Problem running tor-0.2.0.32 on Ubuntu 8.04 
Hello All
 I tried compiling tor-0.2.0.32 on Ubuntu 8.04 (off the shelf version - running kernel 2.6.24-23-generic , glibc - 2.7 , gcc 4.2.4) . Compilation went fine but when trying to run , I get the following error
*** glibc detected *** /bin/tor: malloc(): memory corruption: 0x08101de8 ***
======= Backtrace: =========
======= Memory map: ========
08048000-080ee000 r-xp 00000000 08:06 971319     /bin/tor
080ee000-080f1000 rw-p 000a5000 08:06 971319     /bin/tor
080f1000-08121000 rw-p 080f1000 00:00 0          [heap]
b7b00000-b7b21000 rw-p b7b00000 00:00 0
b7b21000-b7c00000 ---p b7b21000 00:00 0
b7c31000-b7c3b000 r-xp 00000000 08:06 897621     /lib/libgcc_s.so.1
b7c3b000-b7c3c000 rw-p 0000a000 08:06 897621     /lib/libgcc_s.so.1
b7c48000-b7c4a000 rw-p b7c48000 00:00 0
b7c4a000-b7c59000 r-xp 00000000 08:06 914930     b7c59000-b7c5b000 rw-p 0000f000 08:06 914930     b7c5b000-b7c5d000 rw-p b7c5b000 00:00 0
b7c5d000-b7c64000 r-xp 00000000 08:06 914931     b7c64000-b7c66000 rw-p 00006000 08:06 914931     b7c66000-b7c7a000 r-xp 00000000 08:06 914921     b7c7a000-b7c7c000 rw-p 00013000 08:06 914921     b7c7c000-b7c7f000 rw-p b7c7c000 00:00 0
b7c7f000-b7dc8000 r-xp 00000000 08:06 914915     b7dc8000-b7dc9000 r--p 00149000 08:06 914915     b7dc9000-b7dcb000 rw-p 0014a000 08:06 914915     b7dcb000-b7dce000 rw-p b7dcb000 00:00 0
b7dce000-b7de1000 r-xp 00000000 08:06 1158756    b7de1000-b7de2000 rw-p 00013000 08:06 1158756    b7de2000-b7de3000 rw-p b7de2000 00:00 0
b7de3000-b7de5000 r-xp 00000000 08:06 914918     b7de5000-b7de7000 rw-p 00001000 08:06 914918     b7de7000-b7dfb000 r-xp 00000000 08:06 914929     b7dfb000-b7dfd000 rw-p 00013000 08:06 914929     b7dfd000-b7dff000 rw-p b7dfd000 00:00 0
b7dff000-b7f29000 r-xp 00000000 08:06 1436739    b7f29000-b7f3e000 rw-p 00129000 08:06 1436739    b7f3e000-b7f42000 rw-p b7f3e000 00:00 0
b7f42000-b7f80000 r-xp 00000000 08:06 1436741    b7f80000-b7f84000 rw-p 0003d000 08:06 1436741    b7f84000-b7f98000 r-xp 00000000 08:06 1413862    /usr/lib/libz.so.1.2.3.3
b7f98000-b7f99000 rw-p 00013000 08:06 1413862    /usr/lib/libz.so.1.2.3.3
b7fa4000-b7fa7000 rw-p b7fa4000 00:00 0
b7fa7000-b7fa8000 r-xp b7fa7000 00:00 0          [vdso]
b7fa8000-b7fc2000 r-xp 00000000 08:06 897612     /lib/ld-2.7.so
b7fc2000-b7fc4000 rw-p 00019000 08:06 897612     /lib/ld-2.7.so
bfeea000-bfeff000 rw-p bffeb000 00:00 0          [stack]
Any reason why I am getting this ? How can this be fixed ?

@_date: 2009-01-18 02:56:51
@_author: Sambuddho Chakravarty 
@_subject: Problem running tor-0.2.0.32 on Ubuntu 8.04 
Hello Roger
Yes I shall take care of this from now on.
I am using the default torrc with the following lines
SocksPort 9050
SocksListenAddress 127.0.0.1
Yes this happens at startup. I didn't notice anything strange during the Through valgrind though it is able to start a circuit. (But not otherwise)
 valgrind /bin/tor -f /etc/tor/torrc
==24176== Memcheck, a memory error detector.
==24176== Copyright (C) 2002-2007, and GNU GPL'd, by Julian Seward et al.
==24176== Using LibVEX rev 1804, a library for dynamic binary translation.
==24176== Copyright (C) 2004-2007, and GNU GPL'd, by OpenWorks LLP.
==24176== Using valgrind-3.3.0-Debian, a dynamic binary instrumentation ==24176== Copyright (C) 2000-2007, and GNU GPL'd, by Julian Seward et al.
==24176== For more details, rerun with: -v
Jan 18 02:54:27.299 [notice] Tor v0.2.0.32 (r17346). This is experimental software. Do not rely on it for strong anonymity. (Running on Linux i686)
Jan 18 02:54:29.028 [notice] Initialized libevent version 1.3e using method epoll. Good.
Jan 18 02:54:29.165 [notice] Opening Socks listener on 127.0.0.1:9050
==24176== Invalid write of size 4
==24176==    at 0x404CBFF: event_set (in /usr/lib/libevent-1.3e.so.1.0.3)
==24176==    by 0x80A5935: connection_add (main.c:135)
==24176==    by 0x806FC9B: retry_listeners (connection.c:872)
==24176==    by 0x80704E1: retry_all_listeners (connection.c:1367)
==24176==    by 0x8069C4D: set_options (config.c:1016)
==24176==    by 0x806A7DE: options_init_from_torrc (config.c:3704)
==24176==    by 0x80A4B7A: tor_init (main.c:1802)
==24176==    by 0x80A8A37: tor_main (main.c:1985)

@_date: 2009-07-10 21:51:35
@_author: Sambuddho Chakravarty 
@_subject: problem with connecting to a hidden service 
Hello All
 I have a web server which I run as hidden service. The configuration file is the default configuration supplied with the Tor source code with appropriate changes to specify the hidden service directory and service IP etc. I observe only intermittent successful connections to the service. I to monitor the log messages of the Tor client. This is what I see on unsuccessful connection attempts
Jul 11 04:37:56.513 [notice] Tried for 120 seconds to get a connection to [scrubbed]:80. Giving up. (waiting for rendezvous desc)
Jul 11 04:44:02.957 [notice] Tried for 120 seconds to get a connection to [scrubbed]:80. Giving up. (waiting for rendezvous desc)
The web client (wget) used to  connect to the server fails with 503 Forwarding Failure.
What could possibly be the problem ?

@_date: 2009-07-13 13:24:11
@_author: Sambuddho Chakravarty 
@_subject: problem with connecting to a hidden service 
Hi All
 Is it possibly due to some firewall rules. But I have made sure that the host that runs the server is not filtering any packets... Still not sure why I get this . Infact you can try it out yourself
the URI is :
It is a simple webserver  hosting some files. You can down load the file :  gdfiftvclsmx6wqs.onion/verylargefile.

@_date: 2009-07-13 14:20:34
@_author: Sambuddho Chakravarty 
@_subject: problem with connecting to a hidden service 
Hello Andrew
 Thanks a lot. Seems to be working right now for me... but I the behaviour is at times erratic...

@_date: 2009-07-13 17:46:33
@_author: Sambuddho Chakravarty 
@_subject: problem with connecting to a hidden service 
Pardon me my lack of knowledge of English language , but do you mean that 4 out of 10 chances you are able to connect to your hidden service and earlier you had higher success rate (7 out of 10 ) ?

@_date: 2009-07-13 20:58:26
@_author: Sambuddho Chakravarty 
@_subject: problem with connecting to a hidden service 
I can send you folks the debug and notice dump files which have recorded the debug and notice information while a connection attempt failed. Should I paste them here (they are pretty huge).

@_date: 2009-07-14 14:55:36
@_author: Sambuddho Chakravarty 
@_subject: problem with connecting to a hidden service 
Hello Roger
 Do you then think that I should put up a bug report ?

@_date: 2009-07-17 20:40:08
@_author: Sambuddho Chakravarty 
@_subject: problem with connecting to a hidden service 
Hello Roger and everyone else
 I have filed in a bug report for the issue. If you need the debug.log and notices.log files at some point do let me know , I can email them separately as attachments to appropriate email ids. They were too big to fit into the bug description page.

@_date: 2009-06-12 18:53:34
@_author: Sambuddho Chakravarty 
@_subject: trying to use specific country for node selection in tor 
Hello All
 I am trying to use specific country selection in the torrc as per the FAQs in the Tor website. The following is a snippet from my torrc
EntryNodes {us}
ExitNodes {us}
StrictEntryNode 1
StrictExitNode 1
However when I run tor - 0.2.1.15 with this configuration , I get the following error message :-
Jun 13 01:49:15.860 [warn] Failed to parse/validate config: IPs or countries are not yet supported in EntryNodes.
Am I doing something wrong ? Is there some other way to specify which countries to use for entry,middleman and exit node selection  ?

@_date: 2009-06-02 18:54:03
@_author: Sambuddho Chakravarty 
@_subject: tor controller hangs / doesn't reply 
Hello All
I use the TorExample.py with slight modification to suit my purpose to access the tor control service. However I see it hang often and there is no response from the tor control service. I am not sure what could possibly be the problem . Its quite non-deterministic . There is no fixed pattern or occurrences which cause the server to stop responding. However the situation corresponds to no data being transferred through a TCP stream using the Tor circuit to which it is assigned. A 'wget' session which uses Tor to perform the download shows no throughput in the throughput indicator.

@_date: 2009-06-03 17:26:03
@_author: Sambuddho Chakravarty 
@_subject: somewhat OT: http_proxy format (was: tor controller hangs / doesn't 
Hello Scott and Drake
  Changing http_proxy= with http_proxy=localhost:8118 doesn't show any difference . Eventually the tor controller hangs and fails to response to commands (and the wget session fails as well). I am not sure weather the problem is with wget or with tor ...

@_date: 2009-06-03 19:48:22
@_author: Sambuddho Chakravarty 
@_subject: single hop tor circuits (tor-0.2.1.15-rc) 
Hello All
 I see some single hop tor circuits being reported through a 'getinfo circuit-status' being also created at times .  Is that normal ? In older tor version (the previous one I tested was 0.1.2.18) allowed only 3 hop circuits by default.

@_date: 2009-06-03 19:50:16
@_author: Sambuddho Chakravarty 
@_subject: tor controller hangs / doesn't reply 
Right; next time I see this behaviour I am doing to post snippets from the 'debug' messages.

@_date: 2009-06-04 01:03:29
@_author: Sambuddho Chakravarty 
@_subject: GETINFO argument to dertermine OR IP addresses 
Hello Roger
 Thanks a ton for those helpful replies. Yeah I have figured  out how to determine IP addresses. I am able to get to that.
But the problem with Tor control service not replying to queries (and simultaneous wget download stalling remains). I shall determine the point where it possibly hangs and send you more updates soon.

@_date: 2009-06-01 17:38:43
@_author: Sambuddho Chakravarty 
@_subject: Issue about selection of Tor relays when using the default torrc 
Hello all
 I am running tor-0.2.1.15-rc ; source downloaded from the tor website .  For my purpose I am tapping into the function circuituse.c:circuit_has_opened()  to determine which relays are being used in a stream (assuming only one stream is using Tor). However the IP address of the relays I see here don't match the list of relays for the stream when I determine them using
'get_info stream-status'. Which one should I rely upon to determine which circuit is being used ? Common sense tells me to rely on 'get_info stream_status'. However , I see the client crash at times when I connect to the control port .

@_date: 2009-06-01 18:57:30
@_author: Sambuddho Chakravarty 
@_subject: GETINFO argument to dertermine OR IP addresses 
Hello All
 Can you please tell me if there is any argument to GETINFO which can be used to determine the IP address of ORs ? If there is none then what is the possible way to determine IP address of ORs ?

@_date: 2009-05-29 17:17:33
@_author: Sambuddho Chakravarty 
@_subject: Issue about selection of Tor relays when using the default torrc 
Hello All
 I am using the default torrc without giving any information on what relays to select for circuit creation. But apparently tor (from what I experience) Tor doesn't change the relays selected in a long time. So each time (over a period of 2 - 3 hours) I start the tor client it seems to be selecting the same relays  . Is there a way I can ensure different relay selection over each time I start the tor client.

@_date: 2009-05-30 15:12:50
@_author: Sambuddho Chakravarty 
@_subject: Issue about selection of Tor relays when using the default torrc 
Hello Scott and Roger
 Sorry for my late response. Thanks for you prompt response to my question . I am looking into it right now. Will get back later

@_date: 2009-05-31 02:59:01
@_author: Sambuddho Chakravarty 
@_subject: Issue about selection of Tor relays when using the default torrc 
Hello Scott
 Thanks for you help. However , is there no way that I can cause tor client to reload a new set of entry guard nodes  ?  I have tried both NEWNYM and HUP signals through *nc* to communicate to tor controller . However , in both cases only a small set of (infact 3) entry guards are

@_date: 2009-05-31 03:00:59
@_author: Sambuddho Chakravarty 
@_subject: Issue about selection of Tor relays when using the default torrc 
Also , in continuation to my previous email , where can I download the torctl python libraries from ? Do I need the library or I can just make do by sending text command to the tor controller to play around and test with ?

@_date: 2009-11-11 21:27:24
@_author: Sambuddho Chakravarty 
@_subject: About running Tor on a private network 
Hello All
 I am trying to deploy Tor on a private network. What is it that I need to
do / know. I suppose there should be a way to create a directory service of
some form which can be looked up during circuit creation and which may be
populated with the router information of the relays that I deploy on the
private network .

@_date: 2010-06-10 15:44:43
@_author: Sambuddho Chakravarty 
@_subject: issues with running a Tor relay 
Hi All
 I am running a Tor relay and have set the "RelayBandwidthRate" to 40 MBytes
and "RelayBandwidthBurst" to 60 MBytes. However the Tor status page only
lists it to be 122 Kbytes/sec. I don't understand what is the reason for
this discrepancy ? Does the Tor software restrict me from advertising a
certain bandwidth ? If so , why is that being done ? Can I not advertise
higher bandwidth if I have available bandwidth to spare ?

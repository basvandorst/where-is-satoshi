
@_date: 2015-06-19 02:56:47
@_author: =?utf-8?B?w4dhxJ/EsWwgUC4gxZ5lc3Rv?= 
@_subject: [tor-talk] Some observations running tor and privoxy 
if you (still) use privoxy version 3.0.11 or higher, you may notice
that the actions (regexes) like img-reorder are not really white-space
friendly. If you run/use a webservices that sign or checksum entites
or checks signatures on static content, you get a lot of false positives
like in "OMG!11!1, the government, the nsa, my isp, that exitnode
manipulates/injects data into every bit I receive via Tor". :)
An application we did for a printshop, which detects if images
were tampered with (proxies for mobile phones do that), made some people
really paranoid.
Anyway, since everybody is using TLS nowadays or very soon, I reduced
my actions to a few lines and my family and I are very happy with the
# 1- Remove x-forwarded-for
{ +change-x-forwarded-for{block} }
# 2- Hide Tor exit notation in Host and Referer Headers
{ +client-header-filter{hide-tor-exit-notation} }
# 3- Remove expiry from cookies
{ +session-cookies-only }
# 4- Remove DNT Header
{ +crunch-client-header{DNT:} }
1) if you run more proxies like personal firewalls or whatever
antiviri, these headers may get added and they need to go away.
They leak information of your internal network, which may be very unique.
2) nobody wants to say, hey watch me, I am using tor and this
exit with your site. They have blacklists and CDNs for that. :)
3) is very helpful if you have clients, that fetch data like weather
via http, or feedreaders and IOT-thingies. The embedded browsing-engines
usually don't care or don't manage cookies, so most cookies will
expire when you close the application (I am talking about you liferea
and any other tablet that uses webkit).
4) it is more effective to turn the geoapi off.
Another Option is to rewrite all clientheaders like:
{ +hide-user-agent{ spoofed chrome or apple header work fine} }
Since privoxy can only rewrite non-TLS Traffic, its perfectly fine for
Tor and CDNs: Someone told me a joke about tor devs/users waving signs
with captchas at cloudflare employees and denying them passage until
they solve them. I didn't got it at that time. Since I use tor more often, I feel tempted to do the same.
Another complaint about Tor, I hear very often, that tor is slow. A
great countermeasure against CDNs and tor being slow is a caching
proxy like squid. Within our family is is usually like:
Alice: look at that cute cat picture at ...
Bob, Mallory and Trent doesn't need to solve another captcha, since the
image comes directly from the proxy.
Squid runs fine with a little space in tmpfs chained behind
privoxy and logging to /dev/null. Btw., Grandma runs a client and a hidden service so we can connect to her, the hiddenservice is much more
reliable than most of the Dyn-DNS services we tried.
I felt like I share some insight of us using tor,
along with problems we encountered with the privoxy regexes.
If you have questions about our setup, feel free to ask.
Happy realying.

@_date: 2015-06-20 20:26:26
@_author: =?utf-8?B?w4dhxJ/EsWwgUC4gxZ5lc3Rv?= 
@_subject: [tor-talk] do Cloudfare captchas ever work? 
TL;DR: If you can, consider not using that services/sites find
alternatives and promote them.
I like to confirm that, and I like to add, that to get those captchas
you are doing at least two requests not related to the site you are
visiting, one is to g**gle.com (for the captcha) and one to
ajax.clo*dflare.com. So you need Javascript and additional sites
whitelisted in noscript or your other favorite blocking tool.
If cl*udflare is involved, you may requesting data from them too.
If javascript stays enabled, your session (until cookies expire or
your filesystem cache is cleared) is very trackable by either
g**gle (analytics i.e.) and/or cl*udflare (their cdn), as long
as sites you visit use at least one of their many services like
g**gle analytics or cl*udflare cdn. In terms of cdns, turning
javascript off isn't enough (see E-tags and Cache-Control like
One reason may be that the captcha process isn't working anymore.
Sopisticated adversaries break those captchas, thats the reason
you get so many of them. The idea of proving you are human is
insane, imho you are proving you are no bot and worth tracking
when you solve the easy captchas, and doing google a favor
doing OCR for their whatever-services.
Consider charging them for that. :)
If cl*udflare would care, the process would be, solve that
captcha provided by cl*udflare or use their "Darknet CDN" and
visit the site under the following onion adress. Because their
customers care about tor users etc. But they are busy in terms of legal compliance, certainty. :)
There are many other options - and in my experiance most cl*udflare customers don't know or don't understand that.
cl*udflare is cheap (in implementation and price) and solves
these problems for their customers, they consider us site-effects.
Anyway, many popular sites that have content and community
using cl*udflare, project.h*neyblock or simliar blacklists.
They are easy to implement and keep the trolls and trouble at
I've tried to reason with some sites to keep the site at least
read only or offer a hiddenservice, most to no avail.
Often, if it comes to offer a hiddenservice someone insists that tor
isn't safe enough. :)
Seems like most software hasn't such elaborate and fine grained
acls, it seems.
Site operators are frustrated and won't give tor users an inch.
If you understand that, you have solved half of the equation.
Their assumption is, that one identifies users by ip, and by using
tor you become indistinguishable from the bad bots and possible
adversaries, so you are not allowed to participate or denied usage.
Btw, that is proof enough, that tor is working very well for most of
my thread models which involve malicous or clueless siteoperators,
users that may compromise my privacy or anonymity.
I like to elaborate about the presumption of innocence, that is
reversed on tor-users: If you use tor you are presumed an adversary
or bot by those entities and have to jump through their hoops to proof
you are a good person (worth tracking).
It is usually not enough to whitelist two sites, you may need
various other cdns for liraries, g**gly fonts and apis and what not
to let these "programs" render the data in a way you can receive
them (you can't simply "view" them anymore).
This sounds like bad news, but the www is so diverse, finding
a replacement site is in most cases a matter of breaking with some
habits - usually one can migrate members to the newfound site too.
Some food for thought, since you usally provide valuable personal
information to those entities or sites, do you really think their
security, which based on the assumption earlier, is good enough to
protect your data?
In my experiance it isn't, if so, they wouldn't need such desperate measures and tolerate such a high rate of false positives when it comes
to tor-users.
Personlly, I find it amusing, that webdevelopers still believe I accidently
turend off javascript or I am not understanding my client well
enough, and need to be reminded to turn it on again. :)
Or try this reasonsing: Do you like to do business with, receive information, data, content from or participate in a community provied or hosted by an entity that considers you, or tor users in general bad persons or
adversaries while itself waives any responsibility for your data, your privacy, your anonymity?
Yes, **** ****!
Feel free to remind them, that tor users, in most cases aren't adversaries,
they are using tor to circumvent censorship, blocking or insisting on
some form of privacy or anonymity.
It is we, who have to use such desperate measures to protect our privacy
or anonymity. They could try to respect that, they are not interested.
Sorry for being so elaborate, and using the term adversary so often.
"Darknet CDN" is meant ironically, if that wasn't clear.
I can haz udp too in the future pls. :)

@_date: 2015-06-22 16:36:19
@_author: =?utf-8?B?w4dhxJ/EsWwgUC4gxZ5lc3Rv?= 
@_subject: [tor-talk] do Cloudfare captchas ever work? 
My observations and conclusions:
- two captchas, both unreadable : the tarpit for robots, you usally
  don't get other captchas until you turn js on.
- two captchas, one readable, one unreadble : the original captcha
  approach as seen in recaptcha (it is considered broken since 2010).
- one captcha (usally parts of google streetview): they consider you
  human, you usually need javascript to get those (easy to ocr).
I wouldn't count on that.
I don't think it helps much to change exit nodes, you may need to clear your
filesystem cache and cookies too (or not). Someone who abuses exitrelays just
tries one after another until he succeeds. Could be worth to automate
TBB and check. Most services which try to detect abuse automatically use
blacklists and/or signatures/fingerprints.
If you like to understand captchas better see:
 There are some papers from 2005 and 2010 were captchas got ocr'd and
broken. Adam Langley had some more information on his blog, some of
it got lost, somehow.
A cdn like clouldflare can track you very easy over various exits, tor currently has 1115 relays that are exits, its possible to mark all of them
"malicious" on a blacklist-providers sensor in 15-30 minutes.
You may also see messages like:
Your IP address *.25.103.* has been flagged as a scanner. Scanners
are not permitted. If you are seeing this message in error, please
contact security
And that says it all:
- its not my ip :)
- you can't flag an ip :)
- I am not a scanner :)
- I won't contact them - BTDT :)
Even if I would contact them, all I can tell them, its not my ip and
their assumptions are all false and their service is prone to false
As said earlier, if the site you are visiting is one of a kind, it may
be worth your time to talk to them and about cloudflare, usually they
are not interested.
Reddit gives a good example, how to treat tor-users.
CC;DR - Cloudflare captcha, didn't read.
Anyway, funny is pirates are using cloudflare too, I consider them busy
until they solve that problem. :)

@_date: 2015-06-22 16:49:40
@_author: =?utf-8?B?w4dhxJ/EsWwgUC4gxZ5lc3Rv?= 
@_subject: [tor-talk] (no subject) 
See  and
beisdes that, it is considered good practice to do backups.
There may be tools available thay may decrypt your data.

@_date: 2015-06-22 20:43:50
@_author: =?utf-8?B?w4dhxJ/EsWwgUC4gxZ5lc3Rv?= 
@_subject: [tor-talk] Tor-ramdisk 20150616 released 
Is source available, or is that binary only? Couldn't find any on the
And I actually really doubt that no infomation survives a reboot, but I
can't tell without the source.
If its run inside a vm, it's worse. :)
Just my five euro-cent. I can't tell more, my gentoo box got a

@_date: 2015-06-23 06:03:08
@_author: =?utf-8?B?w4dhxJ/EsWwgUC4gxZ5lc3Rv?= 
@_subject: [tor-talk] Tor-ramdisk 20150616 released 
Not really, depending on memory controller and memorytype most
of the data, especially ram based static stuff is easy to extract.
If you put stuff into ram, I may find it in 6 of 10 cases. That is 2 reboots. On arm (sunxi) the same.
Another option is to suspend the device and make it dump the memory
to disk/swap (try it, you'd be suprised what you find).
If the target has some kind of sharedmemory, you are able to extract
complete framebuffer images (console or desktop).
I am not talking about keys that are somehow in use, I am talking data
like keys that reside in a rambased fs like tmpfs, or ramdisks with a filesystem (like the kernelbased ramdisks w/fixed size which were popular way before tmpfs).
If you put stuff into ram, most people don't realize it may also end in
swap (depending on usage patterns, load an the like).
You mentioned coldboot, the tresor-patches only work with aes.
They are awesome if you use luks and isolate mbr, boot partition and the luks header from the disk to an usb stick or a memory card.
A host (x86, arm) is a brick with random data without the removable
device, when powered down. Don't forget the nail polish on the screws if
it has a case.
Me considers that a viable option if you distrust smartcards like yubi
and so on. You can't even boot it without the isolated parts.
Inputting a password isn't possible, and you'd be stupid to travel with both devices. :)
Tor in a vm is nice for isolation and leak prevention but considered
harmful if you can't trust the host/Dom0. I am at point were I would
only run a client maybe a middle relay inside a vm.
Aren't you worried about GPL violation? Since the school were you
distribute the images has no sources. Some of your components are
LGPL/GPL. First thought was, ah thats the school were all the embedded
engineers learn to properly violate the L/GPL and distribute binary only. :)
Anyway, thanks for all the links and for building the ram-disk, given the
low memoryfootprint I should be able to run it on my old soekris, which collects dust since I have 1GHz dual core arms with 1GB Ram ethernet and
wireless and SATA and and and ... :)

@_date: 2015-06-23 21:27:42
@_author: =?utf-8?B?w4dhxJ/EsWwgUC4gxZ5lc3Rv?= 
@_subject: [tor-talk] do Cloudfare captchas ever work? 
If one doesn't use TLS that is a valid claim.
Since the captcha image delivery should originate from google with https in most
cases, you only need to redirect the cloudflare redirect, and since
cloudflare promotes and encourages TLS itself, it depends soley on the
tor user or the site participating in the cf-cdn using HSTS and CSP.
If you don't use TLS you may run into problems I mentioned earlier with
the privoxy filters and you are wide open to many scary injection and
XSS attacks.

@_date: 2015-06-23 22:41:54
@_author: =?utf-8?B?w4dhxJ/EsWwgUC4gxZ5lc3Rv?= 
@_subject: [tor-talk] do Cloudfare captchas ever work? 
Tor can't protect you, if your browser emits cookies or information
about cached content back to an entity that operates global scale cdn
or services:
Lets make it easy:
You are you (joe) and there is google (gog) and cloudflare (clo):
You are ordering pizza via tor-exit1 (tex1) and watch some cats while
eating that pizza on tor-exit2 (tex2).
In your first session, you request content, a picture of said pizza from a cdn (clo) and with that request comes caching information and cookies from (clo) along with that picture.
(clo) knows you now as an entity, you are emitting cookies back to (clo)
with every use of his cdn.
Lets assume the pizza service uses a website analytics service from
(gog) under the premise of customer statisfaction:
Your browser, requests 1x1pixel from that service, with that pixel comes
another cookie, you are now knowm to (gog) as an pizza eating entity too.
Every time you visit another site using (gog) analytics, you are the
same pizza eating entity.
Its time to go to the loo, and the pizza is delivered. The tor-client did
his awesome job and has build new circuits, (joe) is know using (tex2).
So, whats better than pizza? Pizza and cats:
(joe) requests a embedded catmovie from some catmovie site, bad for him
the catmovie is delivered via (clo) cdn, the browser adds the cookie
to the request and (clo) adds that information to the record they
startet about you earlier. Unfortunately catmovies uses the (gog) analytics
service too (because its free, so who would mind), and (gog) gets their
cookie back from earlier.
Sorry to say, I am under the impression, you have watched to much VPN
advertising, if it comes to your browser, your ip is no longer of
interest. You really should get rid of that misconception that you are
a ip address or somebody uses ip address to track people, since the
inception of tor and vpn networks thats plain stupid.
If you don't like to third parties from knowing that you are into the
cat thing, the right thing to do would to use your browser to order
pizza and using TBB to watch cats - that works.
That example works with plain http or https, were https is recommended
while using tor. There was no active content involved.
It gets nasty and scary with active content involved, tor is only a
network, it can hide your ip, but thats not always the solution.
If one only has one tool, lets say a hammer, one tends to see every
problem as nail, thats what you are doing.
Please consider which parts of your personal habits and needs you like
to expose in which way. So order pizza with your whatever browser and do
the lewd cats thing with TBB. I know, not very convenient, but privacy
or anonymity aren't avaliable in a convenient way anymore. Your ip has
nothing to do with that anymore.
That said, it isn't impossible. I still try to convice site owners to
respect visitors and not exclude, track or sell their anonymity or
privacy for some funky graphs.

@_date: 2015-06-23 22:48:36
@_author: =?utf-8?B?w4dhxJ/EsWwgUC4gxZ5lc3Rv?= 
@_subject: [tor-talk] do Cloudfare captchas ever work? 
Thats, why cloudflare should offer them, to distribute their content via
a HS via their cdn, and that would be fun for all involved parties.
Since a cdn is always part-authorative for their customers content, it
is the most interesting thing they could do.

@_date: 2015-06-24 02:14:13
@_author: =?utf-8?B?w4dhxJ/EsWwgUC4gxZ5lc3Rv?= 
@_subject: [tor-talk] Matryoshka: Are TOR holes intentional? 
There is no benefit in padding, it does the opposite what endpoints want from tor: data and anonymity.
Find an application that moves data, and the application that comes to mind
is filesharing. Face it, tor would grow into a massive network. If you consider
the size of 6000 relays, this idea is scary. Node participation in filesharing networks is often tenfold the size of tor nodes recorded in consensus.
Or video streaming via HS, distribute the data to your clients, peer
them together in a DHT.
These approaches are better than feeding nonsensical data into
circuits, let's feed real data into them, it is beneficiary for
the networks participants, they want it.
Anoter approach is to attract traffic inbound and make the same destination
emit at various places that aren't strictly in the consensus: cdn as HS can do that, without any modification of tor protocol or consensus.
Imagine wikipedia, the mozilla foundation running a HS. I'd rather see
my browser and my extensions coming from official mozilla hidden service
cdn, than via shady exitnode (no offense to all you sweet exits).
If you operate a CDN run a HS on an isolated edge. It won't emit
anything that you already have seen, since users may access your net
already via tor. Adversaries already try to compromise it using tor.
Technically, there is no difference in operations.
If you operate a CDN that has excess capacity, consider running
an exit at your leisure, with an exit policy that benefits you, your
customers. You don't have to serve all the participants of the tor
If you utilize a CDN ask them about running a HS or an exit for you, since it may be beneficiary for your customers that already use tor.
The only centric idea of tor, its the authoriry of distributing consensus data,
it works suprisingly well. I really doubt you find better suited individuals
for that job.

@_date: 2015-06-24 03:10:48
@_author: =?utf-8?B?w4dhxJ/EsWwgUC4gxZ5lc3Rv?= 
@_subject: [tor-talk] Tor-ramdisk 20150616 released 
No, Tor-Ramdisk works only on Intel/AMD 32/64Bit x86 and compatible cpus,
and MIPS Atheros AR7161, PI has an Broadcom ARM cpu, the LeMaker
Banana PI use a Allwinner A20 cpu.
See  for Rhasberry
and  for Banana.

@_date: 2015-06-24 04:46:49
@_author: =?utf-8?B?w4dhxJ/EsWwgUC4gxZ5lc3Rv?= 
@_subject: [tor-talk] do Cloudfare captchas ever work? 
You are welcome.
My Example should illustrate, that the amount of privacy or anonymity
you get out of tor, when using a browser depends much more on you
as on the software (TBB) or the anonymizing network and you should
take that into account. How you operate your browser matters.
On a network layer, the cdn may be completly transpartent to your
browser, only difference are headers in the response, depending
on the cdn. So, the site you requesting from is a proxy on, or that cdn
and no different entity. This behavior is often not taken into account.
Depending on setting, cookies may stay arbitrary amounts of time,
depending on cookie orignator and your browser settings. I prefer
to nomalize them all into session cookies, they expire when I close
the browser.
That, or even worse settings are often the default. Like cookies, cached
content can, depending on your browsers history or chache settings stay
arbitrary amounts of time, esp. with TBB and many open tabs over long
periods of time, for example.
The new identiy feature is awesome, and my observation that humans
should use it more often before watching cats and not deem it
As said earlier, I can't tell specifics/interna about TBB, and I am not aware
of said discussion. It depends also on plugins like Noscript and their
configuration and so on, the usage of TLS and so on. My example uses a
default browser and tor thats what I use at the moment.
It is not a multi site tracker, its an entity or organization that runs a
huge network of hosts, that delivers either content for said organisation or
content of behalf of their customers (a cdn).
It can't read content in your cache, it is your browser, that sends
information about the state of your cookies file and your filesystem
cache back to said entities, with every request you may send to them.
Depending hugely on the way, how you utilize TBB.
It dependes soley on your browser, and the ability of said entities to
access certain apis (functionalty in your browser) that may or may not
be available at the moment you request data from them.
media.peerconnection is disabled in TBB, which is great and they
patch OCSP and PKIX code too, which I consider awesome.
I didn't say that, I don't doubt the TBB Devs doing a great job. I think
you can't get more privacy than from TBB, but you have to understand
how it works, to let it protect you.
It says "(isolated) using the URL bar domain." if a cdn, is in part
or fully authorative for said URL bar domain, than identifiers may be
linkable. If in doubt, request a new identity via tor button.
This is great, and if you use it between ordering pizza and watching
lewd cats, all is well.
You should read  and and take that information into consideration.
My hourly consulting fee should be donated to the tor-project.org.
TYVM :)

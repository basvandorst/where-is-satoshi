
@_date: 2012-12-11 16:10:44
@_author: Abel Luck 
@_subject: [tor-talk] Interested in a Tor Browser update script for Debian, 
Link to the script?
It can do everything automatically. It

@_date: 2012-11-20 23:40:20
@_author: Abel Luck 
@_subject: [tor-talk] Question about using Thunderbird + EnigMail/GnuPG 
Anthony Papillion:
You should look at TorBirdy[1], an extension to thunderbird that
functions the way TorButton does for Firefox.
It is an official Tor project[2]	
There are issues, and TorBirdy addresses them (read the wiki page [2]).
[1]: [2]:

@_date: 2012-10-13 17:16:20
@_author: Abel Luck 
@_subject: [tor-talk] Review request: TorVM implementation in Qubes OS 
Hey folks,
I've implemented a TorVM service for Qubes OS [1] and I am seeking
feedback from more knowledgeable eyes on the tor+iptables configuration.
Quick background to give this context:
Qubes is an OS based on Xen and Linux that isolates applications to
domains. Each domain is a virtual machine. Even networking takes place
in virtual machines.
My TorVM configuration is essentially an anonymizing middlebox for it's
network client VMs.
For a visual model of what this looks like see this image [2].
The relevant config is here:
I'm using tor-0.2.3 to take advantage of stream isolation.
Please scan the documentation for an idea of the goals of TorVM:
Soon I hope to provide a TorBrowser package (that doesn't use bundled
tor+vidalia to prevent tor-inside-tor scenarios).
[1]: [2]:      that image from this blogpost
(NOTE: the configuration in this blog post is not what I've implemented,
see the script above)

@_date: 2012-10-15 14:55:42
@_author: Abel Luck 
@_subject: [tor-talk] Review request: TorVM implementation in Qubes OS 
The script is GPL v2 licensed, as the rest of Qubes. You can see that in
the header [1].

@_date: 2012-10-16 14:28:37
@_author: Abel Luck 
@_subject: [tor-talk] Review request: TorVM implementation in Qubes OS 
This is exactly the type of feedback I wanted, thanks. See responses inline.
I need to do more research into what it would take to protect the
localtime. For example, what are the consequences (technically and
UX-wise) of changing the local timezone to, presumably, UTC?
All Qubes VMs use the username "user", only the VM host (aka dom0) has a
user configured username
Yea client leaks are something I don't have a desire to solve directly,
rather I would like to make users aware of them. I would love to see a
repository of tor-safe configurations for apps along the lines of
TorBirdy and TorBrowser.
Qubes automatically configures networking for client VMs (where client
in these case means clients of a ProxyVM that is providing NAT).
So, the answer to your question is, whatever the default gateway is.
It should be noted that AppVms are isolated from eachother on the local
network too.
Hm, yes. After reading past discussion on this subject [1] I'm inclined
to disable these options on the default setup, and, instead provide
several more SOCKS ports with usecases (and defaults set accordingly).
I haven't thought about this enough yet.
One problem, Vidalia's "New Identity" button doesn't make sense when you
have many stream contexts :|
Regarding persistence, do you suggest not making it so?
Yup, I'm aware. Really I've no plans to move forward here until
something more concrete develops. (I'm looking at who Tails and Whonix,
who've discussed this issue extensively).
XMPP SRV lookups for one. Not a pressing issue of course.
There is no good reason I can think of yet, I'm just concerened a user
misunderstanding what a TorVM does (provides torified networking to
other AppVms), and opening firefox on it or something.
This is actually fixed. Tor disliked then OpenSSL ciphers available, but
upgrading openssl fixed it.

@_date: 2012-10-16 14:34:34
@_author: Abel Luck 
@_subject: [tor-talk] Review request: TorVM implementation in Qubes OS 
Regarding deletion of the VM: I was under the impression secure deletion
was not possible on modern SSDs.
On the other hand, it should be possible to create an AppVM whose
writeable diskspace lies in enitrely in RAM.  I'll investigate this.
I've not configured this explicitly, do you have any suggestions?
Here's the tor config:
I'm fairly certain this is the case, seeing as how these are all VMs
(xen is the hypervisor), but I've not verifier the hunch so I can't make
this claim
Hm, if you use the Qubes feature that lets you assign PCI (or USB)
devices to a VM, then obviously, no.
Thanks for the link, I'll investigate some more.

@_date: 2012-10-16 16:02:45
@_author: Abel Luck 
@_subject: [tor-talk] registration for youtube, 
fakefake at tormail.org:
Hm, I'm sensing a web service that uses twilio to provide short-term
SMS+voice access for this reason. It could even offer a tor hidden service.
Of course this seems like a good way to get all of Twilio's number pool
blacklisted. Though, perhaps that would not be possible? Maybe that
number pool is too large, or unknown, or used by too many others?
Hm, what about a webapp, that spinned up an ephemeral VPN on Amazon's
EC2 for several minutes? Surely EC2 can't be blacklisted?
Just some ideas.

@_date: 2012-10-16 17:01:41
@_author: Abel Luck 
@_subject: [tor-talk] registration for youtube, 
Mike Hearn:
Thanks for the frank and upfront information Mike. It's refreshing :)

@_date: 2012-10-17 11:15:28
@_author: Abel Luck 
@_subject: [tor-talk] Tor Browser script pack 0.3: (multiple) Tor Browser, 
Since we're sharing I do it a little differently:
cd tor-browser_en-US
export TOR_SOCKS_HOST
export TOR_SOCKS_PORT
export MOZ_NO_REMOTE
export TZ
./App/Firefox/firefox -no-remote -profile ./Data/profile

@_date: 2012-10-19 10:21:31
@_author: Abel Luck 
@_subject: [tor-talk] Review request: TorVM implementation in Qubes OS 
That's exactly what I was worried about. Qubes might be lucky here, in
that the system tray is in dom0 (the VM host), so the VMs can use their
own time and the user's systray applet will still be in their localtime.
Of course the time as displayed inside apps, browsers, email clients,
will be UTC.

@_date: 2012-10-19 10:18:25
@_author: Abel Luck 
@_subject: [tor-talk] Review request: TorVM implementation in Qubes OS 
Hm, interesting. I definitely need to implement persistent entry guards
then, but providing an amnesiac option will be difficult. When would the
user choose such an option, and where?

@_date: 2012-10-19 10:25:54
@_author: Abel Luck 
@_subject: [tor-talk] Review request: TorVM implementation in Qubes OS 
Abel Luck:
This already exists! In Qubes the DisposableVM is RAM only by default.

@_date: 2012-10-19 10:33:52
@_author: Abel Luck 
@_subject: [tor-talk] Review request: TorVM implementation in Qubes OS: 
No, no, nothing is updated from dom0.  All these problems still apply to
Qubes.  A further problem is at tor runtime I need to detect the IP
address of the internal interface, so a static torrc doesn't work.
Moreover, wrt the New Identity button. With several client VMs, multiple
apps using different SOCKSPorts, the behavior of New Identity is confusing.
Vidalia is extremely useful however, so I need to find some way to
include it. I wonder if the "best" solution isn't to scrap Vidalia and
make something new?
Look at the NetworkManager architecture. It lets the user control system
settings through a client app and daemon. In our case Tor == the daemon
and Vidalia the client.
Of course Vidalia needs permissions to start/stop Tor, which is problematic.

@_date: 2012-09-28 00:14:40
@_author: Abel Luck 
@_subject: [tor-talk] TBB advantages in VM 
Given the following conditions:
1) Firefox (15.0 lets say) is running in an isolated VM, and only
Firefox is running (i.e., no other user apps)
2) The VM is being properly transparently proxied by another machine
running tor in transparent proxy mode
3) The proxy machine fails cosed upon Tor exit/disconnect
What are the benefits to running the TBB, specifically, what are the
benefits of the patched Firefox+TorButton?
My first thoughts are:
* Identity correlation through circuit sharing is eliminated (TBB uses
its own tor circuits)
* Uniform Firefox fingerprint to blend in with other tor users

@_date: 2012-09-28 02:18:39
@_author: Abel Luck 
@_subject: [tor-talk] TBB advantages in VM 
Yup, my thoughts too. The uniform fingerprint is one of TBBs great assets.
Ah good idea :) I was thinking about compiling the patched Firefox
myself, but hacking the startup script is much easier heh. Gonna steal
this one.. thanks.
While that is a good idea, it's not relevant to my use case, see below.
Interesting reading, thanks! My use case is different. It's running
Qubes-OS [1] with a specific TorVM acting as a transparent proxy for
other AppVms.
The AnonBrowserVM is a VM that only has Firefox (soon TBB without tor).
OS updates are handled separately in a different VM. The root FS is
read-only (technically COW, but never written, see [2]).
Looking at your attack comparison matrix, I believe a proper Qubes
w/TorVM+AnonAppVM setup is safe for all attacks except those involving a
vm exploit and an attack against the tor process or network.
[1]: [2]:

@_date: 2012-09-28 15:53:29
@_author: Abel Luck 
@_subject: [tor-talk] TBB advantages in VM 
It's interesting to say the least. A few of its drawbacks are its
resource demand (8GB recommended RAM, 20GB HD space, just for the OS),
and it's hardware support (doesn't support new Ivy Bridge intel GPUs).
But it's a new project that will tackle these issues in time I'm sure.
Yup, this was the basis for my setup, though I'm using the Tor RPM repo
for 2.3.x w/ stream isolation.
Plus, it exposes a few SocksPorts for added isolation for certain
Now I'm brainstorming on how to solve the DNS issue, I'd like to be able
to resolve non-A records. ttdnsd is pretty broken.

@_date: 2013-06-17 07:07:01
@_author: Abel Luck 
@_subject: [tor-talk] Tor Browser Bundle 3.0alpha1 test builds 
Mike Perry:
Is using the TorBrowser with a transparent tor router no longer
supported in this version?
I couldn't find an such option in the startup wizard.

@_date: 2013-03-09 23:51:00
@_author: Abel Luck 
@_subject: [tor-talk] RPM packaging back on track 
Ondrej Mikle:
Hi there Ondrej,
Any idea when the fc18 repo will be available?
Abel Luck

@_date: 2014-04-01 17:45:42
@_author: Abel Luck 
@_subject: [tor-talk] [tor-dev] Linux kernel transproxy packet leak (w/ 
As the maintainer of the qubes-tor (TorVM) plugin for Qubes, I'm definitely interested in this answer as I imagine Patrick @ whonix is too.
I'll see if I can reproduce this bug with the Qubes context [0]
[0]:

@_date: 2014-04-01 18:41:07
@_author: Abel Luck 
@_subject: [tor-talk] corridor, a Tor traffic whitelisting gateway 
qubes-tor maintainer here.. playing with corridor in a Qubes ProxyVM right now As to the spoofing question, Qubes doesn't suffer from this problem.
While there is only one gateway/torvm to many-workstation/appvm, each appvm uses a separate interface and subnet, so appvms can't impersonate or affect

@_date: 2014-04-09 19:50:24
@_author: Abel Luck 
@_subject: [tor-talk] [tor-dev] Linux kernel transproxy packet leak (w/ 
Abel Luck:
Yup, qubes-tor (TorVM) does leak these packets. If explicit egress was
configured, it wouldn't have, but it isn't. Fix is incoming!

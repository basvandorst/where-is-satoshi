
@_date: 2004-12-02 12:52:35
@_author: Myers Carpenter 
@_subject: Error in the Java Standard Library while using Tor sock proxy 
I'm using a Java program as a network client on TOR.  It uses the standard Java support for SOCKS.  I'm currently using the SOCKS4 protocol, but I've gotten the same error while using 4, 4a, and 5.  The stack trace looks something like this:
Caused by: java.net.SocketException: Reply from SOCKS server contains wrong code
         at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:401)
I googled this error message and found someone had put up the source code to the JDK uncompressed and browseable on the web (how useful! Wish Sun would do that themselves and let google at it).
You searching on that page you can find where it happens, it's right after it contacts the SOCKS server for the first time and it's reading the response from the server.  It's expecting a int that will signify a IPv4 (1) or IPv6 (3) connect request, a DNS lookup request (2), and the TOR socks server seems to be returning something that it's not expecting.  (Wouldn't have been nice if that error message told us what it got that it didn't expect?)
Any ideas?

@_date: 2004-12-03 09:53:21
@_author: Myers Carpenter 
@_subject: Error in the Java Standard Library while using Tor sock proxy 
Thanks for the help Roger.  Turns out, when i upgraded from 0.9pre4 to 0.9rc5 I no longer got the error messages.

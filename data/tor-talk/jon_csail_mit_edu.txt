
@_date: 2005-04-14 09:06:32
@_author: Jonathan D. Proulx 
@_subject: performance tuning... 
:No, I think the limit you're running into is that there isn't much more
:traffic that needs to be carried.
Ah, I hadn't even considered that possibility!
:high bandwidth servers will be able to attract more use. (The tradeoff
:is that I don't want somebody to advertise an incredibly huge bandwidth
:and attract most of the circuits -- so I'm slowly raising the cap as
:the overall network capacity grows.)
Makes sense to keep this bounded in some way.  For now the hardcoded
cap seems fine, looking forward to the pie in the sky future perhaps
this could be cased on some run time hueristic like N standard
deviations above mean advertized bandwidth (I don't have a clue what's
a resonable value for N).
This is how we handled storage quotas at the old AI lab, storage isn't
network but they both have a certain gaseous nature...
:Well, you could always run spoon2 on the same machine. :)
:(If you do, please set the MyFamily torrc directive.)
I've been thinking of setting up a second system (had Borg0, but I
broke the OS hard, not quite sure how...)

@_date: 2005-04-14 17:37:13
@_author: Jonathan D. Proulx 
@_subject: Ideal Tor Server & ExitNode? 
:> 1. How much bandwith? :I don't think we're at the point yet where we want to set limits. There :is the potential that a high-capacity node might get more traffic, and :thus if that node is compromised (from the point of view of a particular :user), then it's a greater risk than it would otherwise be. But we're :still in experimental mode, and capacity and debugging opportunities are Roger stated in a recent mail to the list that there's a cap on
the ammount of bandwidth that's used for this weigting ranging from
800k to 2000k (increasing with newer code releases) to deal with this
sort of threat (a super high speed node funnelling all traffic)

@_date: 2005-04-15 10:13:19
@_author: Jonathan D. Proulx 
@_subject: TOR dying 
My TOR server (0.1.0.3-rc) crashed at some point yesterday.  It had
been running fine for a few days so I don't think too much of it
untill I came in this morning and found it dead again.
The relevent log section seems to be the second of these (others given
for context):
Apr 15 08:47:14.853 [warn] rend_mid_rendezvous(): Rejecting RENDEZVOUS1 cell wit
h unrecognized rendezvous cookie 38D49D1D
Apr 15 09:12:44.957 [err] do_main_loop(): libevent poll failed: Invalid argument
 [22]
Apr 15 09:31:01.705 [notice] Tor 0.1.0.3-rc opening log file.
I'm running Debian "unstable" with TOR from the noreply.org
experimental repository (0.1.0.3-rc-200504080730-1)

@_date: 2005-04-15 10:45:25
@_author: Jonathan D. Proulx 
@_subject: TOR dying 
:Thanks for your report.  I have also been running into the same problem,
:and I submitted it as a bug report:
:My suspicion is that the problem is related to the fact that both rodos
:(my server with the problem) and spoon (presumably your server with the
:problem) are among the very fastest, with allocation of the most file
:I also suspect that you and I are both running the ancient version of
:libevent that exists in the form of a Debian package.  Perhaps if we
:could pester Niels Provos nicely, he might be inclined to give us
:something that does not have the rare bug exposed by fast Tor servers.
:;)  Anyway, just a thought.
Ah, hadn't noticed the BTS yet.  Spoon is mine and it does look like
the same issue, I guess I'l ping Niels about getting a modern libevent
packaged, though since there're actually trying for a relese changing
version is officially frowned upon right now.
I'll also look at just building an new libevent and see if that helps.

@_date: 2005-04-19 19:32:52
@_author: Jonathan D. Proulx 
@_subject: (FWD) New Hidden Service 
:This sounds great, but the service seems to be inaccessible presently.
Worked for me (many hours later than you).  My connections to the
hidden wiki are a bit hit and miss (using 0.1.0.3-rc on my end at
least though I seem to be suffering a buggy libevent). I've only
manged to get to a couple of the listed hidden services listed there,
but that may be because they just aren't up any more.
Back to the site at hand, looks spiffy if sparse.  I wonder about the
security exposure though, seems to use cookies for session management,
I've looked at a few of these content management engines (looks like
drupal?) there tends to be a lot going on under the hood.  I wonder
how closely "Nomen" here has looked at that to see what it may be
giving away?
-jon :> [Forwarding because our good friend Nomen is not subscribed to the
:> list. Remember that the 0.1.0.x Tor releases will work better for
:> accessing/providing hidden services. -RD]
:> :> ----- Forwarded message from owner-or-talk at freehaven.net -----
:> :> From: nobody at dizum.com (Nomen Nescio)
:> Comments: This message did not originate from the Sender address above.
:> 	It was remailed automatically by anonymizing remailer software.
:> 	Please report problems or inappropriate use to the
:> 	remailer administrator at .
:> To: or-talk at freehaven.net
:> Subject: New Hidden Service
:> Date: Mon, 18 Apr 2005 22:20:36 +0200 (CEST)
:> :> "Notes from the underground"  currently
:> seeking submissions.
:> :> "Notes from the Underground" is a user generated content site featuring,
:> articals, blogs, discussion forums, personal messaging, and personal image
:> galleries, or will once users are generating content.
:> :> -administrix
:> :> ----- End forwarded message -----

@_date: 2005-04-21 22:10:10
@_author: Jonathan D. Proulx 
@_subject: performance tuning... 
:Actually, I was serious about setting up a spoon2, if you want to try to
:get closer to the cpu limit. You would then be passing twice the traffic,
:since the load balancing scheme would treat your new server as different
:even if it's on the same machine.
:In any case, the more the merrier. Your choice. :)
Problems with libevent crahes have got me down so I'm back to 0.0.9.8
or whatever on spoon, so not so many spare cycles any more.  This is a
bit tangent but I tried building libevent from source and only go the
.a file not the .so, this puzzles me but haven't chased it down.
I did setup "cup" also running 0.0.9.x though

@_date: 2005-04-25 13:12:21
@_author: Jonathan D. Proulx 
@_subject: strange behaviour... 
I've had a couple of issues recently with "spoon"
right now I'm running 0.1.0.4-rc, there are multiple tor process
running and I'm seeing a trickle of traffic inbound on port 9001, but
I don't seem to be listed in the directory (looking at localhost:9030)
probably unrelatedly I'd been trying to get 0.1.0.3-rc built with
libevent-1.0d (as opposed to 1.0b that debian has and causes the
server to die at random intervals), after building and installing the
new libevent I ran:
apt-get -b source tor
and installed the resultant .deb it said it was using the right
version of libevent, and made no complaints in the log file but dies
silently just after noting it the log that it was "Tor 0.1.0.3-rc
opening log file."  Tried again after 0.1.0.4-rc came out and got the
same results (modulo version name in the log)
thinking on these perhaps it's because the new package is built
against libevent-1.0b but the runtimelibraties on my system are

@_date: 2005-04-26 09:14:22
@_author: Jonathan D. Proulx 
@_subject: Tor on LAN 
:Set the "address" parameter to the externally reachable Internet IP address
:associated with the TOR server.
you will also need to be sure the router (NAT box) forwrds port 9001
to your TOR server's pirvate IP.
if you advertize your public IP remote systems will try to connect to
that IP which is your router not your server.
:----- Original Message ----- :From: :To: :Sent: Tuesday, April 26, 2005 2:10 AM
:Subject: Tor on LAN
:> I can?t get Tor server to work properly from behind a LAN. This should be
:straightforward but I
:> can?t figure it out.
:> If I don't use the "Address" setting in torrc, Tor will not guess my IP
:correctly (it reports the
:> internal private IP). I?ve set it manually to reflect the WAN.
:> The client functions Ok and the DirPort is reachable from the outside. But
:the ORPort is not.
:> Both are deafult and are properly forwarded in the router.
:> Any troubleshooting tips?

@_date: 2005-04-27 09:33:03
@_author: Jonathan D. Proulx 
@_subject: strange behaviour... 
:I've had a couple of issues recently with "spoon"
:right now I'm running 0.1.0.4-rc, there are multiple tor process
:running and I'm seeing a trickle of traffic inbound on port 9001, but
:I don't seem to be listed in the directory (looking at localhost:9030)
for the record my IP routing was screwed up in particularly odd ways
(machine is multihomed), ultimately not tor related...

@_date: 2005-04-06 12:08:15
@_author: Jonathan D. Proulx 
@_subject: hidden wiki et al. 
It seems hidden services are at the bottom of the development queue,
which is fine by me, but I'm wondering what type of connectivity I
should expect...
I'm running TOR 0.0.9.7 from Debian unstable along with what ever
prepackaged version of privox is shipping as of about 9am EDT today
when I last dist-upgraded.  Seems I connect to  on only about 20%
of attempts, failures are the typical privoxy 503 "connection could
not be established"
I hadn't looked much at hidden services before though I seem to recall
connecting to be slow but more stable.

@_date: 2005-04-06 14:11:41
@_author: Jonathan D. Proulx 
@_subject: hidden wiki et al. 
:It varies a lot, depending on how hosed that particular service is, and
:how hosed the network is.
It does, particularly the link to experimental apt sources, I'd been
meaning to get around to trying the 0.1pre whatever "apt-get install"
makes that a much shorter path.

@_date: 2005-04-11 10:45:47
@_author: Jonathan D. Proulx 
@_subject: performance tuning... 
Hi All,
I'm wondering what if anything I can due to tune my system (spoon) for
maximum tor performance (and I suppose how to judge what that is).
This may be a bit gratuitous since it's usually in the top 3 as listed
on  but
I'm confused by it's wandering bandwidth claims, from about 1M -> 1.5M
as this doesn't seem to relate to system load.
I'm running 0.1.0.3-rc on Linux (Debian Sid) on a fast machine (dual
2.4GHz Xeon 2G RAM) with a fast network connection (1G localally with
dual 100M exits to the internet at large).
Tor currently uses a good bit of CPU, but not to the point it
interferes with the normal operation of this machine, I'd liek to get
it to the point that it does and then back off from there a bit.
So any dark voodoo in syctl settings or anything that people have to
offer? Would it be worth recompiling with -march=pentium4 or other

@_date: 2005-04-12 20:35:30
@_author: Jonathan D. Proulx 
@_subject: performance tuning... 
: From the tor-spec.txt (documenting the descriptor line):
:   "bandwidth" bandwidth-avg bandwidth-burst bandwidth-observed
:      Estimated bandwidth for this router, in bytes per second.  The
:      "average" bandwidth is the volume per second that the OR is willing
:      to sustain over long periods; the "burst" bandwidth is the volume
:      that the OR is willing to sustain in very short intervals.  The
:      "observed" value is an estimate of the capacity this server can
:      handle.  The server remembers the max bandwidth sustained output
:      over any ten second period in the past day, and another sustained
:      input.  The "observed" value is the lesser of these two numbers.
:Check out
:for a bit more info.
:Let us know what you find. The 0.1.0.3-rc release has some more
:cpu improvements, but the main pain comes from crypto, and that is
:proportional to the number of clients who are asking you to handle a
:circuit for them. In any case, you won't be filling up all 100Mb yet --
:see the lower graph of :Also check out
I am running  0.1.0.3-rc and it has greatly decreased CPU utilization,
though it doesn't seem to have increased "bandwidth-observed", this in
retrospect is why I brought up the question.  My thought being perhaps there
was something in the TCP stack that was bottle necking.
In the barest terms my CPU runs about 50% idle and my pipes aren't nearly
full seems like it could be doing more work. Perhaps I've done all I can do.
I already have NumCpus set to 2, perhaps increasing it will help...

@_date: 2005-08-08 14:50:53
@_author: Jonathan D. Proulx 
@_subject: Gentoo's response on them blocking access to their forums via Tor 
:suggesting that Gentoo implement only user bans
:instead of IP bans?
That seems more "The Right Thing" to me
:Or is there another solution?
yes, you can allow http GETs from anywhere but disallow POSTs from TOR exit
nodes this works out to allowing reading but not writing

@_date: 2005-12-22 11:45:32
@_author: Jonathan D. Proulx 
@_subject: P2P wanted? 
:I think we should encourage use of p2p over the tor network because
:- p2p users may want anonymity too
:- more traffic can lead to more anonymity
While your statements are true I disagree with the conclusion you've
drawn wrt encouraging p2p.
Tor is designed a a low latency anonymizing network, p2p doesn't care
so much about latency which is why this is a bad fit.
p2p could use a more secure higher latency system to greater benefit.
p2p's tolerance for latency is detrimental to performance for those of
us who do care about latency because they have less incentive to
contribute bandwidth, they generally take more out of the system than
is put in.  This is addressed in p2p networks through tit for tat
mechanisms that are difficult to impossible to prove in an anonymous
content agnostic system such as TOR.

@_date: 2005-07-15 13:02:52
@_author: Jonathan D. Proulx 
@_subject: Confirm new Tor server working? 
:Within torrc I called it: sharealike
:It is on a box called 1080amg at the domain sharealike.org, that is,
:1080amg.sharealike.org. The IP begins 64.36... and searching for any of
:this on the moria.seul.org:9031 list gives no results.
looks like (atleast) one of the packet filters is still blocking port
9030. I should be able to connect with a web browser and get the
directory listing, but the connection just times out (I'd get refused
quickly if the port was open in the firewall but there wasn't anything
listening on your machine)

@_date: 2005-06-29 22:35:52
@_author: Jonathan D. Proulx 
@_subject: Help-Linux-Newbe 
:Jun 30 00:10:52.467 [warn] /var/lib/tor is not owned by this UID (1000).
:You must fix this to proceed.
this is the error you care about.  Dis you install from a .deb with "apt-get install tor"?  This should take
care of all the permissions and directories and stuff and start it for you.
also how are you trying to start it?  If you're using the packages vresion
you should run (as root):
Though as I said the installer should do this for you.  I suspect you're
trying to start it improperly as UID (user id) 1000 is you (the first
"normal" user account) and debian creates a special UID for tor to run
under, where as if you installed from source I'd expect it would try to run
as root (UID 0) by default not as you, though I'm not sure about that last

@_date: 2005-06-29 22:35:52
@_author: Jonathan D. Proulx 
@_subject: Help-Linux-Newbe 
:Jun 30 00:10:52.467 [warn] /var/lib/tor is not owned by this UID (1000).
:You must fix this to proceed.
this is the error you care about.  Dis you install from a .deb with "apt-get install tor"?  This should take
care of all the permissions and directories and stuff and start it for you.
also how are you trying to start it?  If you're using the packages vresion
you should run (as root):
Though as I said the installer should do this for you.  I suspect you're
trying to start it improperly as UID (user id) 1000 is you (the first
"normal" user account) and debian creates a special UID for tor to run
under, where as if you installed from source I'd expect it would try to run
as root (UID 0) by default not as you, though I'm not sure about that last

@_date: 2005-06-08 13:54:54
@_author: Jonathan D. Proulx 
@_subject: IRCNet abuse 
:You could port sniff outbound 6667 ports with tcpdump or ethereal.
that's a bit rude, quite possible though.
I get direct abuse complaints since I'm my own ISP as it were, I don't
know how ISPs filter down or ignore abuse complaints, so don't know
howmany people this applies to.  If you are running on a fixed IP
address with a domain name you control attached to it you'll know.

@_date: 2005-06-08 15:06:33
@_author: Jonathan D. Proulx 
@_subject: IRCNet abuse 
:Not only rude, but illegal in several countries. Of
:course, this can be done in secrecy, but I think
:advocating sniffing in the context of a privacy
:network is Not A Good Idea (tm).
Advocating bad.
Knowing it's possible and behaving accordingly good.

@_date: 2005-06-08 15:52:26
@_author: Jonathan D. Proulx 
@_subject: IRCNet abuse 
:Gee... if it can be exposed by sniffing then it isnt much of a privacy :network. The network doesn't protect people from themselves.  Talking on
unencrypted IRC and expecting privacy is silly.
:Tor operators/developers should Always sniff their servers :traffic at least occasionally to see if holes or information is being statistical analysis of traffic patterns is one thing, reading
people's IRC conversations is another entirely.
: A tor/patcher who always sniffs his server traffic
:   a tor user
:ps not only is it NOT rude it is completely legal in the US at least to :monitor the traffic to/from a given server if you own that server, this :is completely a legal action under ECPA.
INAL, but I wouldn't want to put that to the test in court.  Can your
ISP admins read your mail?  I don't think so (employers are
different), and this is directly analogous.
I make no determination on the legality on the US or elsewhere, but it
is most certainly rude and unethical.

@_date: 2005-06-02 16:56:31
@_author: Jonathan D. Proulx 
@_subject: evil nodes 
Only the exit node has access to your content, middle man nodes can't
inject information since the stream is encrypted.
You could disable javascript or keep the java console open, then
atleast you'd see if this attack took place.

@_date: 2005-03-04 09:26:25
@_author: Jonathan D. Proulx 
@_subject: "cracks" via tor 
:This also includes the United States. However I would not operate a tor :server in the United States myself due to the fact that people in the :United States have a tradition of sueing each other for all kinds of :strange stuff (like drying dogs in the microwave or burning youself on :hot coffee). And believe it or not these people have also won the case :in court.
It would be interesting to get a (semi)legal opinion on the tangled
mass of US law.
I recently tightened my exit policy because of a DMCA enforcement
request by the Entertainment Software Association ("ESA").  I probably
could have made my case to the people who handle these sort of things
at MIT, but I chose not to make a stand on bittorrent sharing of
Starwars games.  Hopefully this will give me firmer standing with the
lawyers if someone ever comes knocking about http or something (well
atleast not mark me as a "pain")
Seems that operating a TOR server should be equivelent to operating a
public phone, you don't know who's placing the calls or what they're
saying so you can't be liable if they're making bomb threats or
planning a robbery.  No I have no idea if the Law sees things this

@_date: 2005-03-04 11:10:38
@_author: Jonathan D. Proulx 
@_subject: "cracks" via tor 
:You operate spoon, yes?  I would be more worried that you were serving
:as an exit node for Usenet traffic.  But of course, we must all choose
:our battles.
definately a matter of picking battles. Usenet has degenerated and no
doubt serves all kinds of illegal material, but within that chaff is
some discourse I personally deem valuable.
p2p holds the promise of samizdat type publishing that may need or
warrant strong protections, but I've yet to see this material.  I'm
willing to reconsider if someone has a good counter argument.
So that's my personal biases, and I'm aware that port utilization is
arbitrary and many services have port 80 options to circumvent
port filtering.
:Regarding DMCA, I recommend that you consider this template:
:(ignore the link to receive the document from tor.eff.org.)
:The DMCA safe harbor provisions should actually protect you in this
:case, or so EFF believes.
:For the record, in response to two DMCA notices, I presented this
:template to members of the Harvard General Counsel, and they were
:satisfied.  I suspect that the reaction of MIT lawyers will be similar.
:Remember that Tor is a system with substantial benefits both to research
:and to privacy.  If institutions such as MIT do not support this, then
:who will?
MIT has a good record of protecting privacy research here from these
sorts of assertions.  I would not want to make it seem otherwise.

@_date: 2005-03-04 14:47:37
@_author: Jonathan D. Proulx 
@_subject: exit node only server 
:And some just using GPRS and other low-bandwidth connection (mobile,
:especially with per Mb payment) prohibiting them to pass others'
:traffic. In tit-for-tat scenario all those people will have to abandon
:Tor network at all.
Aside from the research aspects of actually implementing this
mentioned earlier...from a policy stand point this can be adressed.
a certain threshhold bandwidth can be allowed "free" corresponding to
the current conception of "low bandwidth" thus true lowbandwidth users
can do so without penalty and people with otherwise fast connections
can choose a slow TOR path if they don't want to (or can't) share.
allowing server operators to adjust this setting is also desirable
(within a range), such that people can be generous if they desire.

@_date: 2005-03-11 15:24:53
@_author: Jonathan D. Proulx 
@_subject: reconsidering default exit policy 
:To demonstrate this principle, set your firewall to block port 80.
While I mostly agree with you, and admint there's a class of
administrator that some how seems to miss the fact that they server
their users not the othe way around, in this case I think it is fair
to class them as distinct audiences.
The admin typically prefers to have things disabled unless needed
where the use typically prefers to have things enabled unless and
untill they become a problem.  These both approach the same level but
from differing directions.
Admins however should also be expected to RTFM or suffer the
consequences.  TOR's exit policy specification is very simple, if we
want to make it even simpler we could distribute some restrictive
examples that admins could cut and paste.
When it comes down to it port based "security" as a bout as clever as
IP based "security" and networks ar for pasing traffic.  I like the
proposal and think that TOR by default should have a liberal exit

@_date: 2005-03-14 10:06:02
@_author: Jonathan D. Proulx 
@_subject: reconsidering default exit policy 
Good points all.  I didn't reliza what a BOFH I was being...
:Of course, not everyone who we want to have running a tor node can be in as
:central a position.  Nor will most be as careful in advance.
This is perhaps my myopia, being not only in a central position in the
network/systems area but also at an extremely acccepting political
environment.  I didn't have to convince anyone, and other andmins know
which systems are "my hosts" and will happily point and laugh when I
get abuse complaints (just as we all laugh when we get abuse
complaints about w3c.org abuse because some dumb scanner found a dtd
uri in html spam)
The most reasonable suggestion I heard for determining a default exit
policy is the eating our own dogfood metric. Is there a to compile
some statistics on the percent of running tor routers that allow a
given port to exit?  Canonicalizing existing practice is probably a
good place to start.
as a bit of an aside how can exit policy defend against abuse of
google groups?  seems this is all port 80 and would require digging
into the application layer (i would be strongly apposed to interfering
with anonyimity in google searches).  It seems this has bprobably been
discussed so I should probably just go Read The Fine Archives :)

@_date: 2005-03-14 12:55:31
@_author: Jonathan D. Proulx 
@_subject: reconsidering default exit policy 
:I allowed exiting on Port 80 until I read this list and saw that
:folks were getting abuse reports due to Google Groups.  That's when I
:stopped it. What's the point of TOR if you limit or eliminate port 80?

@_date: 2005-03-15 12:05:08
@_author: Jonathan D. Proulx 
@_subject: reconsidering default exit policy 
:As a compromise, how about blocking 6667 and 80 in the default tor
:ExitPolicy, then having in the supplied torrc:
:# Port 80 (HTTP)   Administrators running routers with port 80 open
:# have received abuse reports regarding Google Groups, and been
:# added to the IP blacklist at Wikipedia
: accept *:80
:Easy to enable if you want to, and the server operator is aware of
:the risk.
I like the placement, but I think people are too quick to default 80
to closed.  Though I agree it's vital people are informed of the risks.
I'd like to see some mention in the blurb that the usefulness of tor
for web brouwsing is limited by the numbe rof nodes willing to allow
exit to port 80 (hopefully a better writer can condense that to
somehting people will read).
I'd also like to see it default to open.

@_date: 2005-05-25 19:42:34
@_author: Jonathan D. Proulx 
@_subject: FW: I still do not understand... 
:Why do exit nodes have to be published? Why does the address of *any*
:node have to be published. Is this an inherent property of the design,
:or just an implementation shortcoming? Why can not the node resolution
:be done dynamically as one joins the net. I can easily the possibility
:of starting a connection, having the local tor consult a central server
:(call a root node, just as DNS) and then go from there.
your proposal of a dynamic dns style directory presents the same amount of
information to the client it just skips the "registration" aspect.  The list
is still published and needs to be discoverable or how will you build circuts?
You might be able to design a dynamic discovery protocol that would not give
out global views but only a small nodes that meed a given criteria, but then
you put even more faith in this central brokerage and a determined mapper
could still get a pretty good view through repeated use as a client.
So I don't see it as a moral of philosophical issue

@_date: 2005-05-25 19:51:24
@_author: Jonathan D. Proulx 
@_subject: Bandwidth hogging 
Fail is a bit harsh, don't you think....
I agree that a nice QoS wraper would be desirable, but cross platform it
isn't maintainable, TOR runs on linux, *BSD, MacOS, Windows, and Solaris
looking through  (though the
lonely Solaris system comes and goes)
There's quite a number of things around the edges that would help, like web
caches on the exit nodes.  These however aren't central to TOR's continued
survival and are better left to interested third parties not drain core
resources, atleast not untill the system matures to a stable rather than
experimental level.
All that said, if you send me the info or a pointer to it off list I'll see
if it's somehting I can wrap my head around and make into a distributable

@_date: 2005-05-26 15:04:49
@_author: Jonathan D. Proulx 
@_subject: Memory use 
:It also uses a metric ton of CPU power when it's under heavy load. I've :had it saturate the entire CPU, and I think it stops transmitting data :in those situations too. It's spending a lot of that in a giant :linear-time search through a bunch of strings, and when I get some free :time I'm going to try to speed that up to O(log n) or a hash table or :something, and send the patch in if it seems stable and good.
are you running 0.0.9.x or 0.1.0.x the 0.1 stuff has been using a lot less CPU, though it could still be
a lot for some.  My mixed use dual xeon workstation (spoon) runs at
about 30-40% CPU for TOR while a dedicated Sun E250 (kropotkin, dual
UltraSaprc II) running Linux sweats at 50-60% CPU (for TOR) and 480M
memory utilization (system wide).
These are heavy specs, but the 0.0.9 stuff would happily suck down all
the CPU on my worksation and start to choke out interactive
processes.  If you want to cut down on CPU beyond this you can tweak
"MaxAdvertisedBandwidth" in torrc
from the torrc man page:
MaxAdvertisedBandwidth N bytes|KB|MB|GB|TB
              If set, we will not advertise more than this amount of
              bandwidth for our BandwidthRate.  Server operators who
              want to reduce the number of clients who ask to build
              circuits through them (since this is proportional to
              advertised bandwidth rate) can thus reduce the CPU
              demands on their server without impacting network
              performance.
Don't know how if this influences memory

@_date: 2005-05-04 11:53:18
@_author: Jonathan D. Proulx 
@_subject: Recent Abuse compalints... 
So I've had an interesting spate of abuse complaints lately...
the usual DMCA stuff which the boiler plate eff response seems to
cover for me so far.
An idenity theft investigation by a North Carolina sheriff's office,
who was more understanding than I really expected.
And a complaint from  relateded to spam bots run amok
on their site.  This has resulted in all TOR exit nodes being blocked
at their firewall.  I don't know that they fully understand the way
the system works and are probably blocking middle-man  nodes as well
right now.
I'll try and keep the conversation going and at least get them down to
only blocking nodes that exit on port 80, would anyone from the devel
team like me to forward their contact info to the fellow I'm talking

@_date: 2005-05-04 12:11:56
@_author: Jonathan D. Proulx 
@_subject: Recent Abuse compalints... 
:Do you know how flexible their firewall is?  Could they block access
:to their posting CGIs?  Anonymous access to medical information is
:personally and socially valuable, and read-only access seems like a
:decent comprimise, once they calm down.
I'm not familiar with the site or it's operations...
They seem to be concerned about agressive spidering rather than
posting bogus content.
It also seems the site is for BioTech jobs not medical information per
se.  At least that's what google's cache seems to show.
They seem resonable, it hasn't been a frothing at the mouth type
A head request shows the server as:
Server: MedZilla/1.0 (MZX)
So who knows what level of filtering they can do at that level.  I'd
try and pick up useragent strings, though if they're using tor they're
probably reporting MSIE or something common and un filterable...but I
wander off into speculative fantasy land...

@_date: 2005-05-04 12:11:56
@_author: Jonathan D. Proulx 
@_subject: Recent Abuse compalints... 
:Do you know how flexible their firewall is?  Could they block access
:to their posting CGIs?  Anonymous access to medical information is
:personally and socially valuable, and read-only access seems like a
:decent comprimise, once they calm down.
I'm not familiar with the site or it's operations...
They seem to be concerned about agressive spidering rather than
posting bogus content.
It also seems the site is for BioTech jobs not medical information per
se.  At least that's what google's cache seems to show.
They seem resonable, it hasn't been a frothing at the mouth type
A head request shows the server as:
Server: MedZilla/1.0 (MZX)
So who knows what level of filtering they can do at that level.  I'd
try and pick up useragent strings, though if they're using tor they're
probably reporting MSIE or something common and un filterable...but I
wander off into speculative fantasy land...

@_date: 2005-05-16 11:33:49
@_author: Jonathan D. Proulx 
@_subject: Filtering out attacks? 
It seems certain types of attacks being proxied through TOR can be
profiled and blocked, for example syn floods.
For inbound attacks on my Linux systems I can setup iptables limit
mechanisms to eliminate most stupid TCP DoS tricks.  I'd though at
first it would be simple to turn this around from INPUT rules to
OUTPUT and thus cut down on complaints for clearly illicit traffic
through my exit node.
As soon as I sat down to write this however I discovered I can't
really just banket limit outbound syn's.  What I want is a per flow
limit. This brings up several problems.
On the policy level I can't really determine a flow as multiple
originators can be coming in from the same middle hop to the same
popular site, so what is a reasonable limit on the number of syn's to
allow per unit time?
On the practical level how do I define a per-flow rule on linux such
that for any unique destination IP only allow  --limit N/s
--limit-burst 5N?
I guess the bigger policy question is does filtering of this sort (and
posibly scan blocking as well) fit with TOR philosophically?

@_date: 2005-05-02 12:15:25
@_author: Jonathan D. Proulx 
@_subject: Fingerprint missing 
:In tor's logfile I now find a couple of messages like
:[notice] directory_handle_command_get(): Client asked for the mirrored
:directory, but we don't have a good one yet. Sending 503 Dir not
:Should I worry about this?
no it takes a couple of minutes to get a good copy of the directory
before you can act as a mirror.  If you keep getting these after
running 15min or so, it's probably indicative of a problem.

@_date: 2005-11-22 11:07:54
@_author: Jonathan D. Proulx 
@_subject: POST not anonymous? 
Probably java or javascript.  They can pick all sorts of info off your
system and send it through the connection.

@_date: 2005-11-22 11:07:54
@_author: Jonathan D. Proulx 
@_subject: POST not anonymous? 
Probably java or javascript.  They can pick all sorts of info off your
system and send it through the connection.

@_date: 2005-10-11 11:00:23
@_author: Jonathan D. Proulx 
@_subject: Same entry and exit node? 
:I notice that everytime I run Tor it opens connections to several nodes.
: I know this is normal, but recently I ran Tor and checked my IP - it
:showed that my IP (i.e. the exit node) was the SAME IP as one of the
:entry nodes I was connected to!
:I cleared the browser cache beforehand so it can't be a cache problem.
:Surely this can't be right, is it really possible that Tor can use the
:same node for entry and exit?
It's certainly possible to use the same node as an entry point for one
circuit and an exit for another.  Perhaps this is what's happening?

@_date: 2005-09-27 14:50:43
@_author: Jonathan D. Proulx 
@_subject: Hello directly from Jimbo at Wikipedia 
I've not been following the latest round of this conversation as
closely as some, so salt comments as desired...
IT seems some are advocating TOR establishing a pseudonymous
authentication system such that it establishes some unknown entity is
the same unknown entity, and allowing web site (or other service)
operators query this system in some way to determine a karma score
that is also managed by tor, possibly based on length of use or some
This seems bad for everyone and I'm puzzled who it would benefit.
Service operator such as Wikipedia would need to code for this system
and have soem kind of PKI or othe third party auth system hooked into
tor to verify claimed pseudonyms and also quary their karma from TOR.
Not to mention trusting TOR to provide a useful karma counter.
It would be simpler to just implement user accounts, even if they're
only required from users coming from "dirty" IP's like TOR (or AOL
proxies, or public library computers where users aren't tracked, or
what ever).  This uses know, simple, today technology and allows the
site operators to judge karma and exact punishment (account removal).
So that's my armchair site admin solution to a problem I don't
understand in operational depth :)
For the TOR/Anonymity side (i'm not a privacy expert), it seems like a
nightmare.  There's the added complexit in the code always bad in
security sensitive things.  Being able to definitively sa "the unknown
person is the same unknown person that has done the following
things..." seems like it would drasticly reduce one's anonymity set,
and that's assuming that a secure pseudonym system is implemented that
doesn't leak more directly.
Clearly something needs to be done.  I for one don't think TOR can do
it. If someone has time to really sit down with sites that are having
issue with TOR and code solutions that really fit their needs (instead
of just pointing out thier current "flaws" and saying "not my
problem") that would make TOR mor useful (as fewer sites would block
it) and generally be a Good Thing.  Short of that if we as an email community can be more welcoming and
supportive of people who are having genuine problem because of the
relatively new anonymity TOR provides, perhaps they would be more
willing to put their energies into a compatable authentication sytem
that into defending their current operational model (when attacked
people tend to defend).
Back to lurking...

@_date: 2006-08-18 09:57:13
@_author: Jonathan D. Proulx 
@_subject: Traffic Logging Suggestion 
:>I do believe one Russian exit node (was/is?) doing that .. by posting
:>usernames/passwords (I guess they're dunning dsniff or whatever on their
:>TOR box and piping the output to a webserver).
:>Their stated motivation for this was to drive home the point about
:>end-to-end encryption, but I question their methods, which brings me to
So should we be worried about the people who are pulishing (a sanitized
version of) their actions or the people who discretely trolling
through the traffic for their own more nafarious purposes?
Their point is valid and while other have made it in theory I've never
seen it generate much in the way of discussion, but when you see the
number of credentials these people are getting (not to mention the
associated traffic) it seems to really make people think.
The big point is you can't *really* trust the exit node, that's not
the way TOR works.  You can have reasonable trust that the exit node
can't get your IP from the available routing info, but any plain text
you send through is well plain text on the way out...
You should assume all exit nodes are doing this, not because they are,
but becasue they could be, or other nodes on their local network could

@_date: 2006-12-11 12:49:03
@_author: Jonathan D. Proulx 
@_subject: [or-talk] ABC blocking Tor servers? 
:> ABC makes available some full episodes of their TV programs from their
:> website.  I operate a tor server from the single static IP assigned to
:> me by my ISP.  My ISP is a Covad reseller and my IP address resolves to
:> a Covad block located in San Francisco, CA.
:> :> When I go to: :> :> I get the message: "Only viewers within the United States can watch
:> these full-length episodes."
:> I'm getting the same thing from my middle-man router so it seems a
wide ranging block. on a US .edu registered IP.

@_date: 2006-12-11 11:31:10
@_author: Jonathan D. Proulx 
@_subject: ABC blocking Tor servers? 
============================== START ==============================
:Doesn't seem to be an issue with Tor. I get the same message from a :non-Torr'ed IP address in Germany registered to Arcor (a big ISP in Point is he got this message from a US based IP which also happens to
be a TOR server.  Possibly ABC is blocking all TOR nodes because they
are *potentially* exporting ABCs content.

@_date: 2006-02-15 09:14:44
@_author: Jonathan D. Proulx 
@_subject: Do these break Tor's anonymity? 
:I have searched the web and the wiki but I have not found an answer.  Would someone be so kind as to please answer the following three questions?
:Does the following break Tor's anonymity?  :1. Egress Echo requests.
:If egress Echo does break anonymity is there a way to anonymize the egress Echo traffic?
I don't know what that is, do you mean ping? If so that's ICMP not TCP
so tor doesn't handle it.
:2. Wlan Mac address.
:If the Mac address does breaks anonymity is there a way to anonymize it?
No your mach address is only seen by people on teh same layer 2
network and always associated with your real IP, so any one who can
see that can see your IP and that your sending traffic to a tor
server, but not what that traffic is or where it's ultimately going.
:3. Egress traffic to "xxx.x.x.in.addr.arpa".
:I see this domain with different IP's in my firewall logs; I found this little site which mentions reverse-dns-lookup with "...in.addr.arpa"
:I assume the "...in.addr.arpa" address is the address of the EntryGuard but I am not positive.
this is just part of how you can resolve a host name from an IP
address (a reverse look up, getting IP from host name is a forward
look up).  For example my workstaion has an IP address of
128.30.28.19, to see what name that system has my resolver queries
19.28.30.128.in-addr.arpa (notice the IP address in reversed order)
and gets spoon.csail.mit.edu.
[jon at spoon ~]$ host 128.30.28.19
19.28.30.128.in-addr.arpa domain name pointer spoon.csail.mit.edu.
I would suspect this shows up in your logs when the IP address the
packets (claim to) comefrom doesn't have a DNS entry.

@_date: 2006-02-15 11:26:20
@_author: Jonathan D. Proulx 
@_subject: Do these break Tor's anonymity? 
:Hello Mr. Proulx,
:Yes, I ment Ping as it is ICMP taffic (I reviewed my firewall logs) not TCP/IP, sorry.  :If a program is being routed through Tor and sends ping signals does this break the anonymity for that program? Yes.  the remote end will be able to correlate the anonymized TCP
traffic with the non anonymized ICMP traffic.  What does this by the
The only way I can think to deal with this is to block outgoing ICMP
(to a given host atleast), but I suspect that would break your

@_date: 2006-06-13 10:09:13
@_author: Jonathan D. Proulx 
@_subject: A map of the TOR network (geolocation) 
:   4. Speaking of geolocation data, somebody should draw a map of the
:Earth with a pin-point for each Tor server. Bonus points if it updates
:as the network grows and changes. Unfortunately, the easy ways to do
:this involve sending all the data to Google and having them draw the map
:for you. How much does this impact privacy, and do we have any other
:good options?
Since the server list is public by design there's no privacy impact by
sending it through google. Bonus Bonus points if it somehow encodes throughput of the servers
(size or color or something)

@_date: 2006-05-01 15:52:57
@_author: Jonathan D. Proulx 
@_subject: [off topic] Configuring an IP blind Apache server 
My appologies in advance this is clearly off topic, but couldn't think
where else to ask...so please reply directly to me.
I'd like a _reverse_ anonymizing proxy, something that blinds Apache
to the incoming IP adresses in client HTTP requests.  I run a
webserver with a couple of virtual servers (in the apache sense not
the Xen/VMWare sense) run by different people and I'd like to scrub
the IP info from traffic before Apache gets it so that neither their
vhost configs nor their CMS can log IPs even if they want to.
It seesm like there should be a way to plub in privoxy or something,
but I can quite think how.  Any suggestions or pointers?
Obviously running them as hidden services would fix this, but I don't
want the services hidden per se.

@_date: 2006-05-15 10:48:46
@_author: Jonathan D. Proulx 
@_subject: Sum legl trubs wid TOR en France + more 
So the summary on drives is:
* There's no point in being overly paranoid about wiping these because
  $they already got them and can be presumed to have a copy if they
  want it, the only point in wiping is the removal of potential
  malware, any reforam will do that.
* Given sufficient time and money only physical destruction is
  sufficient protection (googling : destruction of classified disks
  SOP : gives the US Military position on this, presumably they know
  what they can recover...)
ON the topic of what *could* happen:
* The worst case is you could be the subject of an "extrodinary
  rendition" and spend the last painful month of your life in a dark
  hole. * The most likely case is you'll be questioned, searched, and possibly
  breifly detained while the cops fugure out you really can't help
  them even if you want to.
My personal anectdote about police and TOR.  I was running a very
popular exit node (was usually top three at the time), I was contected
by a Sheriff from North Carolina (for those out side the US, this is
not known as a particularly lenient, or computer savvy jurisdiction).
It seems someone was commitiing a bit of credit card fraud through my
exit node.  I explained how tor worked (mixing a bunch of stuff
togather repeatedly with no logs), and gave URLs to documentation.
Basicly the standard form letter on the phone.  I never heard about it
again.  Law enforcement is used to leads that go no where, most do.
I may have getten the benefit of some doubt due to my position (sys
admin at major comp sci lab, and the node was on that network not a
private connection), but I doubt it.

@_date: 2006-05-19 12:28:22
@_author: Jonathan D. Proulx 
@_subject: Did you see this? 
:2. Keep multiple keys (e.g. a dummy volume).
: :The act specifies that if there is more than one key, you can choose which key to give up!
That just means you can revoke the key when they're done.  Giving a
false key is not giving a key.  You can play whatever games you want (ie microwave a different USB
frob while shipping the real key to a trusted associate in a country
without an extradition tready), but that isn't a loop hole in the law
that can be legally exploited, it's a dodge that can land you in heaps
more trouble if you're caught.

@_date: 2006-05-19 15:02:47
@_author: Jonathan D. Proulx 
@_subject: Did you see this? 
:I didn't say a false key, I said a dummy key. One that will work, but
:would unlock a dummy outer volume - but not all data within it. There is
:no way of telling the inner contents of such a drive from random data.
:There are several products that can do that. The act specifically says
:that if there are multiple keys then you can choose which one to
:Destroying a false key and claiming you didn't have the key would be
:illegal if you still possessed the real key. That was my point, and I mis understood what you meant by dummy key
apaprently.  Are you talking about an encryted and steganographic
filesystem such that after a request is made (and granted) for the key
to the encrypted file|filesystem the nested encrypted file|filesystem
will go undetected and thus a key will never be requested for it?
How very Oniony...

@_date: 2006-05-01 16:18:13
@_author: Jonathan D. Proulx 
@_subject: [off topic] Configuring an IP blind Apache server 
:>It seem like there should be a way to plumb in privoxy or something,
:>but I can quite think how.  Any suggestions or pointers?
:Wouldn't it just be easier to edit your httpd.conf to change the log :format to *not* log the IP address?
:eg : take out the %h (for the IP address)
:LogFormat "%l %u %t \"%r\" %>s %b" common
Yes I do that I also redirect error logs to a script that scrubs IPs
out since there isn't an Apache directive to do this.  But Content
Management Systems (CMS), message board software and other such things
often do their own logging into their database backends.
The idea is a system wide solution that allows any user group to
install any semi-random PHP/MySQL frob without having to hack around
trying to find and disable its IP logging.

@_date: 2006-05-01 16:37:36
@_author: Jonathan D. Proulx 
@_subject: [off topic] Configuring an IP blind Apache server 
Thanks all,
rinetd seems the simplest solution.  I've already implemented it in
fact...I figure if someone wants to guess which port I'm running on
so they can have their IP logged I don't mind :)

@_date: 2006-11-30 09:45:03
@_author: Jonathan D. Proulx 
@_subject: Stephen Soghoian on U.S. Gov't Attitudes Toward Tor 
:   at least the two represented at the meeting, strongly disapprove of
:   Tor - and in particular, thought that research universities such as
:   IU, MIT, Georgia Tech, Harvard and others
:    have no business supporting such projects.
What about the Department of the Navy that initially funded it?  I
wonder if it was pointed out in these meeting that it was the DoD that
wanted this in the first place through the Office of Naval Research
and DARPA?
Though clearly consistency and taking responsibility fo r their
actions are not high points of US Gov't policy...

@_date: 2006-11-30 10:58:31
@_author: Jonathan D. Proulx 
@_subject: Stephen Soghoian on U.S. Gov't Attitudes Toward Tor 
:Simple. It's okay for them to be sneaky to avoid *US* (the citizens) :from knowing what they're up to, but *NOT* okay when we try to hide from Probably true of the people paraphrased, but I'm sure ONR folks
understand if they're the only ones using it they ain't hiding from
anyone.  Most other TLA's are likely to miss this subtlety.

@_date: 2006-11-13 09:42:28
@_author: Jonathan D. Proulx 
@_subject: Anonymous Blogging 
I'd highly recommend reading teh "Design Documents" at TOR is *not* designed to protect against a global passive adversary.
The US government is certainly capable of being that, now would they
put that much effort into you personally, who's to say.
TOR will protect against locating where you're posting from at the
service provider end and will protect you from me (who has
administrative access to the network equipment at atleast one site
you're likely to post from).
As in all security related matters TOR is about driving the cost of
discovery/compromise up.  It makes the cost reasonably high, I can't
pay it, I expect M$ can't pay it but the NSA probably could if they
wanted to.  See the published papers for the details.

@_date: 2006-11-13 09:42:28
@_author: Jonathan D. Proulx 
@_subject: Anonymous Blogging 
I'd highly recommend reading teh "Design Documents" at TOR is *not* designed to protect against a global passive adversary.
The US government is certainly capable of being that, now would they
put that much effort into you personally, who's to say.
TOR will protect against locating where you're posting from at the
service provider end and will protect you from me (who has
administrative access to the network equipment at atleast one site
you're likely to post from).
As in all security related matters TOR is about driving the cost of
discovery/compromise up.  It makes the cost reasonably high, I can't
pay it, I expect M$ can't pay it but the NSA probably could if they
wanted to.  See the published papers for the details.

@_date: 2006-09-08 11:54:54
@_author: Jonathan D. Proulx 
@_subject: Tor server question regarding hidden services. 
You do not need to run an exit node to run a hidden service.

@_date: 2006-09-08 11:54:54
@_author: Jonathan D. Proulx 
@_subject: Tor server question regarding hidden services. 
You do not need to run an exit node to run a hidden service.

@_date: 2006-09-11 09:46:10
@_author: Jonathan D. Proulx 
@_subject: Tor Defense Fund...an idea. 
:> Well, I know Roger, Nick, etc are against it but making Tor run as a
:> server by default may be worth more consideration (I2P does this).
:What about people behind NAT/firewalls that they don't control?
:What about people with battery-powered devices?
"By Default" doesn't mean you can't turn it off.  I agree that being behind someone else's firewall is a problem as the
user may not understand the implications of this and thus advertise an
impossible exit policy.

@_date: 2006-09-11 11:27:46
@_author: Jonathan D. Proulx 
@_subject: torrc Clientonly 
:I'm familiar with the man page. That didn't answer my question at all.
entry, middleman, and exit are all server functions, if you aren't
running a server you will not be acting in any of those capacities.
: Arrakistor
:>> I would like some clarification regarding the "Clientonly" setting.
:>> Does this explicitly mean you do not participate in any circuits, or
:>> that you are not running as an entrance/exit node but may still run
:>> mitm.
:> Perhaps it means what the man page says it means:
:> |ClientOnly 0|1
:> | If set to 1, Tor will under no circumstances run  as  a  server.
:> | The  default  is to run as a client unless ORPort is configured.
:> | (Usually, you don't need to set this; Tor  is  pretty  smart  at
:> | figuring  out whether you are reliable and high-bandwidth enough
:> | to be a useful server.)  (Default: 0)
:> Fabian

@_date: 2007-12-17 10:08:27
@_author: Jonathan D. Proulx 
@_subject: Encrypted Web Pages? 
:Considering the amount of bugs and weaknesses found regularly (and not
:found) in common browser software (open source or not), it's not a
:well-advised practice to trust a browser handling of sensitive private keys.
While I agree, this isn't the only way to implement such a
system. Teh browser could hand off encrypted content to a external
appliction to hadle the decryption.
What about just HTTPS with user certificates? you get both proof of identity
and a means of encrypting data to that identity, yes? What are you
doing that isn't covered by this?
I may be missing something about the implications of HTTPS, but you
could certainly key pgp public keys to x.509 identities if you wanted
to keep static data gpg encrypted on the server.

@_date: 2007-12-17 12:14:08
@_author: Jonathan D. Proulx 
@_subject: Encrypted Web Pages? 
:> I may be missing something about the :> implications of HTTPS, but you could :> certainly key pgp public keys to x.509
:> identities if you wanted to keep static :> data gpg encrypted on the server.
:I'm not sure that I understand this :suggestion, could you be more explicit?
:Are you suggesting simply limiting access
:to the data by certificate (i.e server :side limiting?)  That would not satisfy
:my trust model, the server should be
:assumed to be untrusted.
So knowing a bit more about your requirements I'll clarify my think on
this point as it's most relevant (though doesn't address transparency
to the user).
You use X.509 personal certificates to authenticate the user, this is
relatively straight forward and standard.  Once you have established identity with X.509 you tie that identity to
a gpg||pgp public key.  Presuambly you would establish this initial
mapping at account creation, where you could generate the client
cretificate and request the user upload their public key.  Now
whenever you see that certificate you know which key to use for
encryption, decryption stays on the user end.  Your app should
probably check keyserver for key revocations so it doesn't lead data
to a compromised key.

@_date: 2007-12-17 12:49:09
@_author: Jonathan D. Proulx 
@_subject: Encrypted Web Pages? 
:> It's an interesting threat model though :)
:Yes, but it really is a fairly simple one.
:I am surprised that HTML does not seem
:to have some extension to deal with this
:already.  It is not much different from :encrypted email concepts, just that the :browser needs the ability to do the
:decrypting instead of your mail program.  :The simplest fallback may be to simply :open the web page with the user's mailer :(if their mailer supports that,)
The major difference is that email was designed personal
correspondence, and evolved along those one to one lines.  HTTP is a
publishing mechanisim in which you usually want people to see it, or
restrict viewing to a group and is thus centered around one to many
(or in "web2.0" land many to many) communication lines.
So I can understand why there isn't a ready made solution, using HTTP
for secure one to one communication on an untrusted server just isn't
something that's done, and secure one to many is done by owning and
securing the server.
This isn't to reflect on you're application except to say it's

@_date: 2007-12-28 11:17:53
@_author: Jonathan D. Proulx 
@_subject: Can Tor run WITHOUT Pivoxy ? 
:And If I use Tor just for anonymous chatting? There's no need to put an http-proxy into tor. Also not everyone uses privoxy but polipo...
Also if you are only running a server there's no need for privoxy, and
other proxies could probably be made to do the job privoxy does.
But more to the point privoxy is made by different people and used for
many reasons other than TOR, so even if it were required for TOR it
wouldn't be one package.

@_date: 2007-02-12 08:55:06
@_author: Jonathan D. Proulx 
@_subject: tor proxy chain 
:First of all, thanks for your polite and fast answer.
:To simplify the problem, I say that I would like to do this:
:perl_script-> tor -> standard_http_proxy -> web_site
:I want the web site to see the ip of the standard_http_proxy, not the tor :Do you think that it is possible to do this?
I haven't been following the thread so appologies if I miss the mark...
This seems possible *if* the standard_http_proxy accepts connections
from all tor exit nodes.
Now why you would want to do this is another question, perhaps the
answer is in the archives.

@_date: 2007-02-12 09:27:10
@_author: Jonathan D. Proulx 
@_subject: tor proxy chain 
:Why a proxy shouldn't accept connections coming from tor? To prevent abuses?
:Can you tell me how to do this proxychaining?
Because then anyone using tor can use your proxy and any
crimes/harassment they commit come from your proxy.
have perl use socks to runn connections through tor configure the
proxy to accept connections from all tor exit nodes.  How to do this
is best asked either in a perl list or a list for your proxy server
:>Now why you would want to do this is another question, perhaps the
:>answer is in the archives.
:I just read the faq again, where I found that perhaps you are worried
:that I will use tor to connect to open relays on port 25 and then
:spam, is it right? I can assure you that this is not the case (I would
:not be using tor in this case, I think that there are much easier
:tools), one of the reasons is for example that I don't want the
:websites to know that I'm using tor.
No, I'm not worried for TOR, I'm worried for you.  If all your traffic
appears to becoming from one proxy it's obvious who you are, and you
have basicly zero anonymity.

@_date: 2007-07-03 21:26:29
@_author: Jonathan D. Proulx 
@_subject: two unseemly tor behaviors 
:     Do you think that they prefer to have their server crash, rather than
:to issue an error message and continue operations?  Yes.  If I restart a service I want to be sure it restarted not have
to go check and see if it really did what I asked.
:And that such behavior
:benefits the worldwide community of tor users?
No, but if you verify your config before the HUP this won't happen.
Apache has a similar check config function, it's smart practice.

@_date: 2007-05-22 09:01:09
@_author: Jonathan D. Proulx 
@_subject: nighteffect.us gone 
:Without the use of GnuPG, or something along those lines, how would we
:know that the "I'm OK message" was really from Joe...?
well we don't, but to paraphrase Ron Rivest paranoia is infinitely
recursive.  If it was signed maybe THEY got his key and tortured the
passphrase out of him, we could drag that all the way out to plastic
surgery and brain washing if you like, there is no perfect proof
What it comes down to to is there no plausable reason for anyone to go
to such lengths (disappearing from a mailing list is hardly enough to
get a missing persons report filed), and there's not much we could do
if THEY did get to him.

@_date: 2009-09-10 09:19:09
@_author: Jonathan D. Proulx 
@_subject: Why you need balls of steel to operate a Tor exit node 
:There's a lot of FUD thrown around about how "you need balls of steel to
:operate a Tor exit node",
I'll throw in my anecdotal $0.02
When I was running an exit I had two semi serious incidents.  One was
a phone call from a sherif's office in South Carolina somewhere
investigating financial fraud of some sort, the other I don't know th
edetails of except that the system needed to be "perserved for
evidence" for some period, basicly someone else needed to take my disk
and put it on a shelf though I got an image of it to keep running.
Mind this system was on a fairly prestigious University and I work in
th esystems and network admin group for this network, had I been
running the same level of traffic through a private connection I don't
doubt the response would have been different.
The thing that finally took it down though was stupid.  We have a
published "emergency contact" number for network operations and after
hours it pages the on call people.  Once idiots started waking up my
coworkes, well it was middle man time.

@_date: 2010-08-16 09:38:11
@_author: Jonathan D. Proulx 
@_subject: Tor Project 2008 Tax Return Now Online 
While I do think it's good to see the funding there are two points that
are important to remember.
1) this is a freesoftware project the code is there for all to see,
hopefully clueful people other than the US Government are reading it.
2) no matter who's funding it the US gov't could read the code (see
above) and would continue to (potentially) have a near global view of
internet traffic.
To a large extent freesoftware defends agains the worst abuses funders
can demand (1), but I wouldn't fully trust TOR against China either (2) To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2010-11-19 10:05:02
@_author: Jonathan D. Proulx 
@_subject: Anonymity easily thwarted by flooding network with relays? 
:> I nominate this paper as a founding reason why Tor should permit users
:> to increase the number of relay nodes used in each circuit above the
:> current value of 3...
:No, that won't work. The key vulnerability is the first-last correlation
:attack, which doesn't care how many hops your path has (as long
:as it's at least two).
perhaps a naive comment compounded by low caffienation, but wouldn't
longer chains reduce the likelihood (or raise the cost) getting the
first-last spots?  Or maybe the performace loss to privacy gain ratio
for this isn't worth it?
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2010-11-19 10:49:32
@_author: Jonathan D. Proulx 
@_subject: Anonymity easily thwarted by flooding network with relays? 
:Better go have another espresso ;>)
further through the coffee now and wishing if I had to have said thout
out loud I'd at least not sent from my MIT addresss :)
next your going to tell me I didn't really win the Nigerian national
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2011-01-28 10:28:04
@_author: Jonathan D. Proulx 
@_subject: exit node config for egypt IP range 
seems very little of egypt (if any) is currently routed

@_date: 2013-10-02 23:17:08
@_author: Jonathan D. Proulx 
@_subject: [tor-talk] Silk Road taken down by FBI 
:> Wow. I just read the complaint :8
:> :> He was unfathomably stupid. Words cannot express how stupid he was.
:> :> This has absolutely no relevance to the Tor network.
:We just put up a statement on the blog which basically says that:
In many ways this is (or should be) a PR win for Tor.
1) No technical vulnerabilities were used (AFAWK) - this should be welcome
news to Tor users
2) Traditional police work still works - this should be good news to the
law and order folks that traditional methods still work and no
extensive digital survailance state is needed.
Note I'm only anecdotally familiar with Silk Road so no personal
opinion on wether he should be praised or flogged, I do think in a
"dear legislator please don't ban privacy" kindof way point 2 is
important.

@_date: 2013-10-03 13:46:57
@_author: Jonathan D. Proulx 
@_subject: [tor-talk] Silk Road taken down by FBI 
:No, it was a rookie fuck-up that enabled old-fashioned detective work. if
:it wasn't a fookie fuck-up, then none of this would have happened.
It was human error, which is what traditional police work relies on all
the time.
I chuckled a bit too at the obvious blunders in the report, but when
you get down to it maintaining sufficient operational security for a
long term pseudonymous identity especially involved in real world
physical transactions is virtually impossible.
Short term disposible identies are perhaps more workable but those are
less useful for commerce or any other transaction that requires
reputation building.

@_date: 2013-10-04 07:27:10
@_author: Jonathan D. Proulx 
@_subject: [tor-talk] New Onions 
:grarpamp wrote (04 Oct 2013 08:25:51 GMT) :
:> Lots of identical banners... Tails/Whonix are you shipping some defaults?
:Tails doesn't ship any web server by default.
But that does sound like the default Apache banner, especially if the
"It Works" is

@_date: 2013-10-28 08:36:12
@_author: Jonathan D. Proulx 
@_subject: [tor-talk] Thoughts on Tor-based social networking? 
:>While I can appreciate Bill's concerns (my web servers are regularly
:>attacked by miscreants using Tor), I have a hard time imagining any case
:>where an *effective* reputation-type system doesn't seriously impair
:>anonymity.  Any sort of "reputation" is basically a profile of the
:>user... which sites he/she has visited, who has left positive/negative
:>feedback, etc.  My understanding is that Tor changes circuits every 10
:>minutes to help prevent users being profiled -- why would we undermine
:>this with a reputation system?
:I really do want to run a Tor node, and an exit node at that.
:However, I just can't encourage more of the behavior I've seen so
:far.  I need some way to hold a griefer accountable.  It's a very
:very hard problem.  Any ideas?
As an exit node operator I share your wish, but for the reasons
Michael mentions I thik it is fundamentally impossible to have strong
anonymity and a strong enough reputation to be meaningful since one
erodes the other.
It may be possible to do something IDS like on an exit & if it seems
traffic is "abusive" to dynamicly rewrite your exit rules for some
time, but this provides a relatively easy vector to create a Tor DoS
by making all exits participating in the scheme block access to some
destination, so that's probably a bad idea too.

@_date: 2014-08-28 16:07:24
@_author: Jonathan Proulx 
@_subject: [tor-talk] I have a quick question about security of tor with 3 
The short version of "Why 3" is because if the attacker controlls the
first and the last you loose, if not you win. So it doesn't really
matter how many are in between because the attcker doesn't need to
controll those to identify your traffic.
That's of course a bit over simplified but if you want real details
you need to read the online documentation.

@_date: 2014-07-24 10:25:48
@_author: Jonathan D. Proulx 
@_subject: [tor-talk] Almost everyone involved in developing Tor was (or 
:Tor Project had to refuse funding from a donor who was deemed some kind
:of enemy of the US govt[1].  This should raise suspicions that the
:project may not be developing in its most productive direction(s) for
:the other parties that could or do use Tor (e.g. hidden service
:operators, copyright pirates, anti-capitalists, whistleblowers, enemies
:of the US govt).  (Despite the idealism, good reputation and best
:intentions of various Tor Project members.)  It isnt just a matter of
:looking for bad code or design decisions, we should look at what code
:isnt there or what other non-code aspects of the project arent covered well.
This isn't becasue Tor had US government funding but because Tor is a
US based entity.  If there's another location where a similar yet independent anonymity
foundation could do similar work with fewer restrictions (or a roughly
equivelent but different set) I'm all for it, modulo some worries
about split/duplicate effort, but it's not an issue of
funding==control or other conspiracy.

@_date: 2015-09-11 10:35:15
@_author: Jonathan D. Proulx 
@_subject: [tor-talk] First Library to Support Anonymous Internet Browsing 
Hi All,
Anyone directly involved with this Library project let me know if
there's anything I can do in support, attend public (or private)
meeting with trustees or send a more personal email than some web
click through. Contact me directly at the above address
I don't speak for my employer, but I'm Sr. Technical Architect at MIT
Computer Science and Artificial Intelligence Lab and have been running
a fast exit for most of the past 10 years and receive all the
complaints (legal and other wise) for the network the system sits on.
There haven't been many. Other than dmca and port scans I can actually
only think of one cas ein which LEO asked for info on the system.  Of
course I didn't have it, but that's also true of cracked systems used
for bad things by the time anyone notices and asks us to 'preserve
evidence' any trace of the issue they're looking for has rotated out
of logs and that's if the attacker was sloppy and left any logs...
About a year ago someone sent a call for exit node operations (which I
noted we'd been doing for a long time) to an internal list here which
is know fo revery discussion spinning into a bizzare flame war. In
this case there was almost uniquely no opposition, someone as devils
advocate did bring up the double edged sword argument but no one at
all took it up, though there was positive feed back about tor and our
running an exit node.
Anyway I think I have some interesting things to say & possibly a
fancy enough title for 'trustee' types to at least listen to rather
than dismiss before I start talking.
:-- :tor-talk mailing list - tor-talk at lists.torproject.org
:To unsubscribe or change other settings go to

@_date: 2016-06-21 10:11:46
@_author: Jonathan D. Proulx 
@_subject: [tor-talk] Question for those who say "Tor is pwned" 
So we learn:
Well known limitation or TOR are well known.
There is more work to do either in improving TOR or devising another
theoretical model that is but usefully performant and secure against a
global passive adversary (there's probably a few more doctoral robes
available for that last one).
But none of this is news. TOR has always been upfront about the current design limitations and
striven to push them forward.  Other researchers have discovered and
published previously unkown issues and TOR has worked to fix those.
This is just how Science and Opensource work.
If you want to suggest solutions please do, especially in the form of
If you want to point out NEW problems again please do.
There's probably even room for writing about old problems somewhere
so new users will be aware of them and work within the current
limitation of the software.  I think TOR does a fair job of this but
I'm an old user so no longer a very good judge of introductory docs.
I see no use to anyone however in constantly harping on them here, we
know privacy isn't solved.

@_date: 2017-09-28 10:10:25
@_author: Jonathan D. Proulx 
@_subject: [tor-talk] How to find trust nodes? 
:Excuse me if I say it, but your answers make me confuse more!!! I guess there is no guarantee about Tor nodes. Governments and bad people can launch a Tor node and sniff Tor users traffic and... The design of Tor is that you don't need to trust all the nodes. You
just need to be sure the first one and the last in any connection
chain aren't run by the *same* malicious actor.
: Subject: Re: [tor-talk] How to find trust nodes?
: To: tor-talk at lists.torproject.org
: Date: Thursday, September 28, 2017, 1:41 AM
: : : > But ultimately, Tor's topography
: mitigates against one of the three
: >
: nodes in your circuit being compromised. If the first hop
: is
: > compromised, then they only know who
: you are, but not where your
: > destination
: is. If the last hop is compromised, they only know where
: > you're going, but not who you are
: (unless your providing clear text of
: >
: personally identifying information).
: : A challenge is that there are threat models in
: which a considerable number
: of Tor users may
: be exposed, at least for some of their circuits.
: : * If a single adversary runs
: several fast nodes that are popular and whose
:  relationship to each other is undisclosed, a
: pretty high amount of traffic
:  may select
: that adversary's nodes as entry and exit nodes for the
: same
:  circuit. The guard node design
: gives a relatively low probability of this
:  happening to any individual user with
: respect to any individual
:  adversary in
: any specific time period, but doesn't guarantee that
: it
:  would be a particularly rare event for
: Tor users as a whole.
: : * If
: adversaries cooperate, they can get benefits equivalent to
: running many
:  nodes even though each one
: only runs a few.
: : * If an
: adversary can monitor network activity and see both entry
: and exit
:  points, for a given circuit, it
: can perform correlations even though
:  it
: doesn't operate any nodes. Or, an adversary that can
: monitor some
:  networks can increase its
: chance of getting visibility of both ends of
:  a connection by also operating some nodes,
: since some users whose entry
:  or exit
: activity the adversary otherwise wouldn't have been able
: to
:  monitor from network surveillance
: alone may sometimes randomly choose to
: 
: use that adversary's nodes in one of these positions.
: : * An adversary that can
: monitor some kind of public or private online
:  activity can perform coarse-grained timing
: correlation attacks between
:  its own entry
: nodes (or parts of the Internet where it can see Tor
:  node entry) and the online activity that it
: can see. For example, if a
:  user
: regularly uses Tor to participate in some kind of public
: forum,
:  public chat, etc., the adversary
: could gather data about how entry
:  traffic
: that it can see does or doesn't correlate with that
: participation.
:  Or if an adversary can
: obtain logs about the use of a particular online
:  service, even though those logs aren't
: available to the general public,
:  it can
: also correlate that statistically with entry data that it
: has
:  available for some other reason.
: : The "good news" is
: that a given Tor user is probably not very likely to
: be vulnerable to many of these attacks from
: many adversaries when using
: Tor infrequently
: or for brief periods. Yet many of these attacks would
: work at least some of the time against a pretty
: considerable amount of
: Tor traffic.
: : I agree with your point that
: just having more random people run nodes
: helps decrease the probability of success of
: several of these attacks.
: : -- : Seth Schoen : Senior Staff Technologist      
:      : Electronic Frontier Foundation     
:    : 815 Eddy Street, San Francisco, CA 94109 
:   +1 415 436 9333 x107
: -- : tor-talk mailing list - tor-talk at lists.torproject.org
: To unsubscribe or change other settings go
: to
: : : -----Inline Attachment Follows-----
: : :-- :tor-talk mailing list - tor-talk at lists.torproject.org
:To unsubscribe or change other settings go to

@_date: 2018-03-02 10:35:30
@_author: Jonathan Proulx 
@_subject: [tor-talk] Tor Project - FOIA revelation ? 
FFS this is not news it is well know and established that TOR was a US
research project largely between US NRL (naval research lab) and MIT:
Also most research funding in the US at the time was through Defence
budgets.  That may still be the case but the size and importance of
private corporate funding has been increasing (not sure that's morally
If you read anything about TOR it is clearly dual (or poly) use with
many conflicting even adversarial user groups BY DESIGN.
This is why Open Source works looks at it have lots of people look at
it, if anyone finds a back door or weak spot then we can talk about
vast conspiracies but honestly any privacy service would be an NSA
target (and foreign equivalents), public code review isn't perfect
things can be hidden or missed but it's the best you've got.
Do you think governments don't infiltrate "grass roots" orgnaizations
or something? The NSA can submit code to any opensource project
without revealing they are the source.  Closed source is worse because
you'll never see and honestly any product could be wholly the work of
an intelligence agency front company.
Be suspicious as you like but there's never been a secret about who
started and funded this.

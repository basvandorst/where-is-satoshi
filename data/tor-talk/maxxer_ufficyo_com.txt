
@_date: 2015-01-12 08:18:27
@_author: Lorenzo Milesi 
@_subject: [tor-talk] Question about linux-tor-prio.sh 
I've recently set up a Tor node but bandwidth is running out quickly :)
Since I don't want to throttle BW using Tor's options (which basically turns it down) I'd like to limit speed, so I found the suggested script above.
I tuned config to fit my needs (my VPS has 1Mb/s speed) this way:
TOR_UID=$(id -u debian-tor)
# RATE_UP must be less than your connection's upload capacity in
# kbits/sec. If it is larger, then the bottleneck will be at your
# router's queue, which you do not control. This will cause congestion
# and a revert to normal TCP fairness no matter what the queing
# priority is.
# RATE_UP_TOR is the minimum speed your Tor connections will have in
# kbits/sec.  They will have at least this much bandwidth for upload.
# In general, you probably shouldn't set this too low, or else Tor
# users who use your node will be completely choked out whenever your
# machine does any other network activity. That is not very fun.
# RATE_UP_TOR_CEIL is the maximum rate allowed for all Tor trafic in
# kbits/sec.
AVG_PKT=900 # should be more like 600 for non-exit nodes
But when I start the script, after some time the Atlas page reports a 125kb/s bandwidth for my node.
Am I configuring it wrong or what?

@_date: 2015-01-12 15:01:16
@_author: Lorenzo Milesi 
@_subject: [tor-talk] Question about linux-tor-prio.sh 
Thanks. what an idiot :)
but maybe not in full... The script config params are in kbit/s, but the last line of the script:
echo "Outbound shaping added to $DEV.  Rate for Tor upload at least: ${RATE_UP_TOR}Kbyte/sec."
reports the RATE_UP_TOR as Kbyte. I'll file a bug

@_date: 2015-01-14 08:55:22
@_author: Lorenzo Milesi 
@_subject: [tor-talk] Question about linux-tor-prio.sh 
yes, that's probably what tricked me. :(
Now I fixed speed rates, thanks

@_date: 2015-01-20 10:43:16
@_author: Lorenzo Milesi 
@_subject: [tor-talk] Cannot get through restrictive firewall 
I'm trying to connect to Tor in a restricted network but I'm failing.
I added these options to my torrc from the results I found searching:
ReachableAddresses accept *:443
UseBridges 1
Bridge obfs3 1.2.3.4:443 key1
Bridge obfs3 5.6.7.8:443 key2
but when restarting the daemon it remains stuck at 10% "Finishing handshake with directory server".
I also tried removing the transport and the key but same result. I'm using Tor version 0.2.6.2-alpha (git-d9181ab02241e41f) on Ubuntu.
I'm not aware of any proxy needed, I don't need any when browsing normally.
Anything else to check?
detailed log:
Jan 18 10:24:50.000 [notice] Parsing GEOIP IPv4 file /usr/share/tor/geoip.
Jan 18 10:24:50.000 [notice] Parsing GEOIP IPv6 file /usr/share/tor/geoip6.
Jan 18 10:24:50.000 [notice] Bootstrapped 0%: Starting
Jan 18 10:24:51.000 [notice] Delaying directory fetches: No running bridges
Jan 18 10:24:52.000 [notice] Bootstrapped 5%: Connecting to directory server
Jan 18 10:24:52.000 [notice] Bootstrapped 10%: Finishing handshake with directory server
Jan 18 10:29:52.000 [warn] Problem bootstrapping. Stuck at 10%: Finishing handshake with directory server. (DONE; DONE; count 2; recommendation warn)
Jan 18 10:29:52.000 [warn] 2 connections have failed:
Jan 18 10:29:52.000 [warn]  1 connections died in state handshaking (TLS) with SSL state unknown state in HANDSHAKE
Jan 18 10:29:52.000 [warn]  1 connections died in state connect()ing with SSL state (No SSL object)

@_date: 2015-01-20 14:04:49
@_author: Lorenzo Milesi 
@_subject: [tor-talk] Cannot get through restrictive firewall 
I was MISSING obfsproxy, I knew already the two links you gave me but I probably didn't pay the needed attention while reading. Also the bridges I obtained were not obfs3...
So the final config added to my torrc:
 UseBridges 1
 ClientTransportPlugin obfs3 exec /usr/bin/obfsproxy managed
 Bridge obfs3  thanks


@_date: 2010-12-20 20:35:15
@_author: =?ISO-8859-1?Q?Bjarni_R=FAnar_Einarsson?= 
@_subject: Experimenting with Tor and Pagekite 
I've met a couple of you (hi Linus, hi Erinn), and as promised, I finally
got around to looking into what it would take to use Pagekite as a remote
front-end for a Tor relay.
Executive summary: it does not work, but making it work would be very easy.
First, for those of you who don't know me or PageKite: PageKite (
 is a free software project whose goal is to enable the
average Joe to run servers on personal computers, laptops, mobiles, such
things. We're focusing on the web first, so we currently have support for
HTTP and HTTPS. The system is basically a "remote front-end service", where
a front-end reverse proxy accepts incoming connections and then uses
name-based virtual hosting techniques to forward requests over tunnels to
remote back-ends. A bit like a load-balancer, or HTTP accelerator - except
PageKite can proxy SSL connections as well, by looking at the TLS/SNI data.
(subliminal message: it's totally cool, please play with it and tell
everyone how much you like it and give me all your money)
I met Linus and Erinn at FSCONS, and Linus thought Pagekite might be helpful
for people who want to run relays but have trouble poking holes in their
routers/firewalls.  So, having been told that an incoming Tor connection
"looks just like SSL", I finally got around to testing it this evening to
see if it would "just work".
It almost did! :-)
In fact, the only reason it doesn't work, is you guys are putting random
domain names in the SNI section, instead of just using the name of the host
you are connecting to. If I had a way of telling Tor what name to request,
Pagekite could "route" incoming Tor connections without any modifications at
Now, I could still get it to work by hacking Pagekite to just blindly
forward all connections on a specific port to the right back-end, but that
would pretty much make it useless in a shared environment (where multiple
users are sharing the same Pagekite front-end) which would largely defeat
the purpose.
So, my questions:
 1. Would it be possible to add a feature to Tor which lets a relay specify
what name to put in the SNI?
And finally:
 2. Is this all a bad idea anyway?
The reason I wonder if this is a bad idea, is it kinda messes with some of
the fundamental assumptions of Tor. For one, you could end up with multiple
relays having the same (incoming) visible IP addresses, but the traffic
would pop out somewhere else on the network, on some other IP address
entirely, which could be quite far away. So instead of one address, each
Pagekite/Tor node actually has two, one or even both of which might be
shared with different relay nodes (say if I have a Pagekite/Tor on both my
laptop and my closet server).  Does this do bad things to your route
selection algorithms? Are there structures in Tor which assume IP addresses
are unique?

@_date: 2010-12-21 13:56:17
@_author: =?ISO-8859-1?Q?Bjarni_R=FAnar_Einarsson?= 
@_subject: Experimenting with Tor and Pagekite 
That is kind of what I am asking you guys, I am not sure it would - I'm
basically experimenting with this because Linus thought it might be a useful
tech to get more people involved in the Tor network.
It is exposed as the traffic exits the node, and the Tor traffic would
travel from the front-end over the Pagekite tunnel to the actual relay, it's
just doing so over a tunnel which may carry other stuff as well:
Even with Pagekite, that would be a rare case - you might end up with one IP
as a shared "entrance" for multiple nodes, but the exit to the next hop
would happen in many different places. The CPU required for the encryption
and decryption would be spread over all the "back-ends", so if that were a
bottleneck (which it probably isn't) that could be a benefit too.
Having thought about this a bit more, I do think it could be worthwhile for
Tor to allow this kind of use-case though (controlling the SNI name), but
not specifically for Pagekite. If you can make it such that one can very
early at the application layer tell the difference between Tor connections
and other TLS connections, it would become possible to host normal SSL
web-sites *on the same IPs and ports* as Tor relays. This would mask the Tor
input traffic even further.
Assuming IPs continue to become a more scarce resource and SNI becomes more
widely supported technology, name-based virtual hosting of SSL sites will
eventually become common. If a Tor entry point could be come "just another
virtual SSL host", that would allow it to blend in much better.

@_date: 2010-12-29 19:43:04
@_author: =?ISO-8859-1?Q?Bjarni_R=FAnar_Einarsson?= 
@_subject: Tor & Email? 
On Wed, Dec 29, 2010 at 7:37 PM, Orionjur Tor-admin <
Silly thing to say on this list, but if not on Tor, you can try
 :-)

@_date: 2011-02-02 18:16:32
@_author: =?ISO-8859-1?Q?Bjarni_R=FAnar_Einarsson?= 
@_subject: What are email risks? 
In addition to e-mail headers which do indeed generally contain multiple IP
addresses and time zone information, there is a fair bit of stuff that can
be used for fingerprinting as well. Not just the obvious things like the
X-Mailer header, but things like which headers are present, the order they
appear in, and the formatting of the MIME envelope, can all help identify
the software in use.
Combine that sort of stuff with analysis of writing style, vocabulary, etc.
and you might be able to correlate two e-mails as originating from the same
person with some degree of accuracy.
I'm not aware of any research into the trackability of such things, as
e-mail generally isn't considered anonymous anyway, but a lot of the work
that has gone into fighting spam would actually have implications here as

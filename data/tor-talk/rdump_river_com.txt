
@_date: 2005-08-28 10:13:54
@_author: Richard Johnson 
@_subject: reconsidering default exit policy 
Some duplication there.  You probably only need to list 10/8 and 192.168/16
once, each.

@_date: 2005-08-29 09:05:33
@_author: Richard Johnson 
@_subject: reconsidering default exit policy 
I think you're looking at the streams the wrong direction there.  Because
typical firewalls block inbound connections while allowing outbound,
shellcode, PHP exploits, etc. are often used to download IRC bots, which
then connect out to public IRC servers on standard IRC ports and await
Using non-standard IRC ports (and non-IRC protocols) for such traffic has a
benefit and a few drawbacks.  The benefit is that trivial IRC watchers
won't easily detect it.  The drawbacks are that the server network isn't
going to be extensive (likely not more than one machine), leading to
throughput problems, and that it'll be disabled once discovered.
Of course, bots won't generally use tor nodes for their IRC connections.
But the controllers of those bots often will try to use tor.
For that reason, it can make sense to refuse connections to default IRC
ports on IRC servers from your tor node.  You may feel that IRC is one of
those protocols that, like SMTP and NNTP, is aggressively unauthenticated
and prone to abuse.

@_date: 2005-08-29 18:30:22
@_author: Richard Johnson 
@_subject: reconsidering default exit policy 
I have a few hearsay reports, and one piece of local evidence backing them up.
The reports are from sites who have notified $DAYJOB about IRC bots
connecting to carder, warez, etc. channels, often including details on
which channel participant IPs are controllers.  In a couple cases, the
alleged controllers were tor exit nodes.
I was able to confirm during investigation (forcing temporary layer 2
outages in order to cause the bots to do DNS lookups prior to reconnection,
etc.), that the reports were accurate about which participants were
controllers.  In one case out of about 10 total, I noticed that one of the
now confirmed controllers was a tor exit node.
I don't consider that apparent use of tor by kiddies to be a problem
(though some at $DAYJOB might disagree).  My focus is on preventing the
compromises in the first place, detecting them rapidly when they happen
anyway, and getting the systems back in service quickly after a rebuild and
Still, I remember thinking at the time that the kiddies behind that warez
group were unusually paranoid about being tracked.  After all, short time
bouncing through a trojaned Chinese and Romanian broadband user or two is
more than sufficient to break tracing by their adversary law enforcement
agencies, and is likely to be faster.
Normally, I make the time to report to network operators the IPs we see
participating in such activity, solely as a 'sorry to be the bearer of bad
news, but you might have a problem' deal.  I didn't bother to report that
one, as I assumed the traffic was coming through tor and thus wasn't
anomalous.  As I think back on it, however, I realize that's not
necessarily true.  It might have indicated a compromise of the host system
If I ever encounter this again (and I probably will, eventually, given the
number of sysadmins we have at $DAYJOB :-), I'll make a point of saying 'I
know you're running a tor node, but just in case this isn't tor exit
traffic, you might have a problem.'

@_date: 2005-06-05 18:46:58
@_author: Richard Johnson 
@_subject: Sorbs 
No, it's not anything like extortion.
Please don't ignite the kook brigade.  They're noisy enough elsewhere as it
is. ;-)

@_date: 2005-03-13 13:14:06
@_author: Richard Johnson 
@_subject: reconsidering default exit policy 
I think you're conflating tor users with lusers (local users).
The abuse teams at various organizations will have to handle the complaints
about "bad" activity coming through tor nodes.  The tor users will not be
the local users the teams are supposed to support, but will rather be
outsiders creating annoyances and distractions from real work.  The user
communities and relative standings are distinct.
The balance needed is between a default exit policy that makes tor useful
and one that doesn't get too many tor nodes shut down when the operator
gets a nasty call from the provost, the ISP support desk, or a corporate
I answer abuse@ at a few places, and will be setting up tor nodes.  But
before I set up with an exit policy that allows anything, I have to
convince counsel, in advance, that the DMCA safe harbor terms apply and
protect the organization sufficiently.  Then I have to convince the rest of
the abuse team to tolerate the increased uselessgoddamnednoise.  The latter
will be more difficult in the long term :-).
Of course, not everyone who we want to have running a tor node can be in as
central a position.  Nor will most be as careful in advance.
Thus, instead of an ideologically pure 'allow everything we possibly can'
stance right now (with which I agree in principle), perhaps the default
exit policy should be tailored to minimizing shock and surprise when
higher-ups find out that someone is running a tor exit node.
Being more restrictive at the start may help maintain a more robust tor
network.  That kind of strategy can give us more time and chances to
convince people net-wide that IP-address-as-authenticator is no more useful
than CNID-as-authenticator.  The end goal of an open tor network can be
served, but more robustly.

@_date: 2007-03-11 11:45:25
@_author: Richard Johnson 
@_subject: Warnings on the download page 
Google mail will reportedly stick with https for the entire session if you
start via Use their other initial URLs, however, and your session will drop back to
http after the authentication is done.
Suggesting gmail users start with  (until the
behavior changes, at least) may be good for a FAQ entry.

@_date: 2008-04-07 17:56:43
@_author: Richard Johnson 
@_subject: Vidalia ExitPolicy overwrite assistance? 
I'm using tor 0.2.0.23-rc on a Mac OS 10.4 box, as installed and configured
with Vidalia, and wish to run a relay.
However, there are some networks which it would not be wise to have
reachable from my relay via tor, including most importantly my local /16
(while my netmask is /22 or /24).
Vidalia's GUI has checkboxes for groups of ports, but nothing for
specifying subnets.
I can edit /Users/rdump/.vidalia/torrc to put in the necessary ExitPolicy
stanzas, but Vidalia rewrites the entire file when I make unrelated changes
to the configuration, and thereby removes my ExitPolicy stanzas.
Short of firing up tor manually, can you suggest a workaround that will
preserve at least the critical 'reject XXX.YYY.0.0/16:*' stanza from this
example ExitPolicy line?

@_date: 2010-01-30 16:07:59
@_author: Richard Johnson 
@_subject: No subject 
If you have Vidalia.app containing tor 0.2.1.22, and you've also
installed Apple's "Mac OS X Security Update 2010-001", you'll have
noticed that Apple made some errors in their TLS renegotiation.
Apple removed TLS renegotiation even for apps that both need TLS
renegotiation and do it safely.  Apple did this in spite of the upstream
OpenSSL project having fixed the renegotiation vulnerability more
sanely.  Apple is apparently using a partial back-port of the fix.
To work around Apple's TLS renegotiation back-port, it's easiest and
safest (in terms of side effects) to switch for now to using the real
OpenSSL in your existing Vidalia.app.  Here's how.
1) Make sure you have the latest versions of the real libevent and
openssl installed.  At present this gets you "OpenSSL 0.9.8l 5 Nov 2009"
(If you don't have MacPorts already, go here:
 )
sudo port install libevent openssl
2) Get and verify the signatures on the tor source.
(If you haven't gotten the signers' keys directly from them, and there's
no-one you trust who has signed them yet, you can at least hit the tor
download site and see that the source archives back through the years
are signed by the same keys.  If you don't have wget and gpg, fix that
with 'sudo port install wget gnupg')
cd ~/src/
wget "
wget "
gpg tor-0.2.1.22.tar.gz.asc
3) Extract and build tor.
tar xzvf tor-0.2.1.22.tar.gz && cd tor-0.2.1.22/
env CPPFLAGS="-I/opt/local/include" LDFLAGS="-L/opt/local/lib" ./configure
make all
4) Put your new tor executable into your existing Vidalia.app.
cp -p ~/Applications/Vidalia.app/Contents/MacOS/tor
cp src/or/tor ~/Applications/Vidalia.app/Contents/MacOS/tor
5) Run Vidalia.
open ~/Applications/Vidalia.app
You've just built and installed a tor executable that uses the real
OpenSSL, and is thus not afflicted with Apple's egregious kill of all
TLS renegotiation in the Mac OS X bundled OpenSSL.  You should now be
able to connect to other nodes when you launch tor.
Moving on, you'll be left with no tor side effects when you replace
Vidalia.app with a new version containing official fixes.  If you don't
keep macports around for other purposes, you can remove macports then.
Good luck!
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2010-03-02 14:59:43
@_author: Richard Johnson 
@_subject: repetitive address change message 
The DNS nexus suggests it might be related to changes I noticed after
upgrading to 0.2.1.24 on Mac OS X 10.5.8.
My host's name does not resolve to an IP address due to a dynamic DNS
failure.  I've no ETR on that (and it might have been the case for months).
tor 0.2.1.22 complains, and logs (at info level or lower) that it's trying
something else.  tor 0.2.1.24 complains also, but then picks an apparently
random address.  This typically fails other checks, so it repeats.  It logs
these "changes" at notice level.
The bug I filed is here:
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2010-03-02 15:46:52
@_author: Richard Johnson 
@_subject: repetitive address change message 
Thanks to Nick for pointing out Roger's test fix:
That solves the IP guess problem in tor 0.2.1.24 for me.
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2015-04-09 16:53:51
@_author: Richard Johnson 
@_subject: [tor-talk] Tor on OpenBSD 5.6 
Your strange attitude aside, one can learn much on OpenBSD by updating the ports and building a revised package.
Easy enough to change the version in Makefile, confirm PGP sig, and update

@_date: 2015-04-10 13:08:42
@_author: Richard Johnson 
@_subject: [tor-talk] Tor on OpenBSD 5.6 
I don't intend to be dismissive, but the manner in which you present your views may be counterproductive.  I was being nice when I said "weird attitude".  Your term may be more accurate. ;)
There's the weird attitude again.  I mostly get that you intensely dislike alternatives to your way, and your ego is offended by them, so you lash out.
That aside, maybe consider something productive like this?
(Note: I did this before Pascal updated the Makefile and distinfo in the OpenBSD ports tree with the same changes. I see my diff here is now redundant.)
$ diff -r -u /usr/ports/net/tor /usr/ports/net/tor-0.2.6.7
diff -r -u /usr/ports/net/tor/Makefile /usr/ports/net/tor-0.2.6.7/Makefile
--- /usr/ports/net/tor/Makefile Mon Apr  6 17:02:12 2015
+++ /usr/ports/net/tor-0.2.6.7/Makefile Mon Apr  6 17:57:44 2015
 -2,7 +2,7   COMMENT=       anonymity service using onion routing
-DISTNAME=      tor-0.2.6.6
+DISTNAME=      tor-0.2.6.7
  REVISION=      0
  CATEGORIES=    net
  HOMEPAGE=      diff -r -u /usr/ports/net/tor/distinfo /usr/ports/net/tor-0.2.6.7/distinfo
--- /usr/ports/net/tor/distinfo Mon Apr  6 17:02:12 2015
+++ /usr/ports/net/tor-0.2.6.7/distinfo Mon Apr  6 17:58:15 2015
 -1,2 +1,2 -SHA256 (tor-0.2.6.6.tar.gz) = wzSeRXxxuOXBOMZWknsrvKC/oDU5/+6FebDlaP+xAoM=
-SIZE (tor-0.2.6.6.tar.gz) = 3594452
+SHA256 (tor-0.2.6.7.tar.gz) = +SIZE (tor-0.2.6.7.tar.gz) = 3595669
After a successful build, a 'pkg_delete tor' followed by a 'sudo make install' gets everything cleaned up fine.  It works now in production for 5 relays and a bridge.  And has for about 5 years to date.
Further, reading the port files, including any files in the patches directory can be quite instructive.  Past just using them, they can educate about how to do hand builds on OpenBSD.  The comments in the Makefile are great for leading further exploration.
I won't address your subsequent comments, as they describe standard sig verification and OS-specific patch applications common to all approaches.  I don't have an easy or generic solution to them.
Best of luck.

@_date: 2015-02-28 15:19:16
@_author: Richard Johnson 
@_subject: [tor-talk] Tor Browser Developers (signing key) key signing request 
============================== START ==============================
We do have a chain from other Tor project personnel through Erinn Clark's key to a Tor Browser Developers (signing key) [1].  If you have physically verified their keys or Erinn's directly (or at least done a TOFU-like --lsign) in the past, you have a chain to the current Tor Browser Developers (signing key).
I think it would be great if the chain could be shortened.  Would more Tor project personnel be willing to confirm the Tor Browser Developers (signing key), and sign it directly?
Call it belt and suspenders with the web of trust alongside the published key info on the Tor site.
$ gpg --list-sigs 0x93298290
pub   4096R/93298290 2014-12-15
uid                  Tor Browser Developers (signing key) sig          63FEE659 2015-01-13  Erinn Clark sig          4B7C3223 2014-12-15  Georg Koppen sig 3        93298290 2014-12-15  Tor Browser Developers (signing key) sub   4096R/F65C2036 2014-12-15
sig          93298290 2014-12-15  Tor Browser Developers (signing key) sub   4096R/D40814E0 2014-12-15
sig          93298290 2014-12-15  Tor Browser Developers (signing key) sub   4096R/589839A3 2014-12-15
sig          93298290 2014-12-15  Tor Browser Developers (signing key) $ gpg --list-sigs 0x63fee659
pub   2048R/63FEE659 2003-10-16
uid                  Erinn Clark sig          31B0974B 2010-02-15  Andrew Lewman sig 3        94C09C7F 2010-08-25  Peter Palfrader
sig 3        63FEE659 2010-01-16  Erinn Clark sig          E012B42D 2010-07-19  Jacob Appelbaum sig          23291265 2010-07-19  Linus Nordberg sig          D21739E9 2010-03-22  Daniel Kahn Gillmor sig          A71A6915 2011-08-05  George Kadianakis sig          28988BF5 2011-11-11  Roger Dingledine sig          19F78451 2012-12-02  Roger Dingledine sig          C11F6276 2013-03-19  David Fifield


@_date: 2005-08-18 22:39:13
@_author: Brian C 
@_subject: Server Hacked 
My Debian server has been hacked. Every web page I hosted now reads:
"XTech Inc Was Here :D"
XTech Inc we are: Status-x & PABLIN77
uid=0(XTech Inc) gid=0(XTech Inc) groups=0(XTech Inc)
Pablin77: MARY TE AMO!!!!!!
Powered by XTech Inc / PABLIN77
Made in ARGENTINA - pablin_77 at argentina.com
I run Debian-testing and generally stay on top of updates. I do run a
few too many services on that server though. I wonder if my recent
addition of making it a tor server is what brought my humble server to
these jerks attention? I've little experience with recovering from this,
so any advice on what steps to take from here, what log files are
relevant, etc. would be greatly appreciated.

@_date: 2005-08-18 23:17:28
@_author: Brian C 
@_subject: Server Hacked 
I wasn't using either of those. I did run Bastille and snort. The server
ran apache, postfix, bind, mysql, b2evolution, phpbb, tor, ssh, vsftp
(for internal lan use only), and probably some other things.
I stopped paying close attention to port scans after making it a tor
server. I don't see which files have been tampered with yet. (That's the scary
part.) It seems like without tampering with the actual locations that
apache points to on my drive the hacker redirects all my sites to the
same defacement message.
I believe I'm going to have to make copies of my various configuration
files and do a fresh install of the entire OS.

@_date: 2005-08-19 00:29:24
@_author: Brian C 
@_subject: Server Hacked 
Actually, I wasn't blaming tor. I just wondered out loud if publishing
my ip address in a relatively small list (what, about 300 now?) of
servers might raise the profile of my server and motivate someone to try
to deface it. (It's been running for over a year with little notice and
certainly no defacements.)
Also, the phpbb installation was not publicized. That is, that site
isn't linked to from anywhere really because I wasn't ready for it to
"go live". So, they didn't get there from Google. I agree though that
phpbb is notorious for security vulnerabilities and that it is a likely
suspect for my problem.
I'm still anxious for any recovery advice people have. What is the best
process for determining the source of the vulnerability and the
perpetrators' identities?

@_date: 2005-08-19 10:02:23
@_author: Brian C 
@_subject: Server Hacked 
Hi Peter,
Point taken. However,
from Package tor
    * testing (comm): anonymizing overlay network for TCP
      0.1.0.11-1: alpha amd64 arm hppa i386 ia64 m68k mips mipsel
powerpc s390 sparc
    * unstable (comm): anonymizing overlay network for TCP
      0.1.0.14-1: amd64 arm i386 mips powerpc s390 sparc
      0.1.0.13-1: alpha hppa ia64 mipsel
      0.1.0.12-1: m68k
      0.0.9.10-1: hurd-i386
If my server had been running stable, then, in my case at least, it
would not have been running tor. This is just one of many cases where
the availability of packages and recent versions of packages lags so far
behind in stable that I decided to opt for testing.
Anyway, this is getting even more off-topic.
I'm still sort of surprised that this group of what I thought was fairly
skilled developers hasn't provided one link or suggestion on how best to
1) identify the vulnerability exploited on a hacked server or 2)
identify the likely perpetrator of a defacement. Searching around I find
lots about how to prevent hacks in the first place but very little
that's helpful in dealing with it once it's happened.

@_date: 2005-08-09 00:00:35
@_author: Brian C 
@_subject: OS X Client and Privoxy 503 error 
I'm surprised to report that setting up my tor server on Debian last
month was a breeze, but getting a tor client to work under OS X still
escapes me.
Every time I go into Firefox preferences and switch to 127.0.0.1:8118
any web site that I then attempt to visit yields the same 503 error:
This is Privoxy 3.0.3 on localhost (127.0.0.1), port 8118, enabled
Connect failed
Your request for  could not be fulfilled, because
the connection to  (127.0.0.1) could not be established.
It doesn't matter what web site address I type in, I get the same
result. I read the FAQ and I think I followed all the installation
instructions. No luck. Thanks for any suggestions.

@_date: 2005-08-10 10:26:33
@_author: Brian C 
@_subject: Gentoo's response on them blocking access to their forums via 
At Gentoo's LinuxWorld booth it was suggested that Gentoo would restore
forum access to those tor server operators who altered their exit policy
to disallow port 80 exits to the forums.gentoo.org IP address. That is,
edit torrc and add the following line:
ExitPolicy reject 140.211.166.170:80 # no exit to forums.gentoo.org
Then restart or sighup your tor server.
It's not clear to me if they are monitoring tor servers and will
automatically allow access for those who implement such an exit policy
or whether one needs to contact them after implementing such a change.
Also, I'm not saying this is a good or bad policy, I'm just reporting
what I heard.

@_date: 2005-08-10 10:51:16
@_author: Brian C 
@_subject: (FWD) Re: OS X Client and Privoxy 503 error 
Hi Jay (and Roger)
I've upgraded the OS X client to Tor 0.1.1.5-alpha and get the same 503
error on every page. I have found an interesting error in the system log
by using console.app, as Jay suggested. The log says:
Aug  9 15:37:43 localhost ConsoleMessage: Starting Tor Service
Aug  9 15:37:43 localhost SystemStarter: Starting Tor Service
Aug  9 15:37:48 localhost crashdump: Unable to determine
CPSProcessSerNum pid: 323 name: tor
Aug  9 15:37:48 localhost crashdump: Couldn't find or create:
Aug  9 15:37:48 localhost crashdump: Started writing crash report to:
Aug  9 15:37:48 localhost crashdump: Finished writing crash report to:
Is this significant?
Also ps ax |grep tor seems to suggest that tor isn't running as it yields:
pbookbrian:/Library/Tor brian$ ps ax|grep tor
  188  ??  Ss     0:00.40 /usr/sbin/DirectoryService
  562 std  R+     0:00.00 grep tor
pbookbrian:/Library/Tor brian$
Trying to restart Tor doesn't seem to have an effect. I get:
pbookbrian:/Library/Tor brian$ sudo /Library/StartupItems/Tor/Tor restart
Tor Service not responding.
Starting Tor Service
pbookbrian:/Library/Tor brian$ Aug 10 10:49:53.346 [notice] Tor
v0.1.1.5-alpha. This is experimental software. Do not rely on it for
strong anonymity.
pbookbrian:/Library/Tor brian$ ps ax|grep tor
  188  ??  Ss     0:00.45 /usr/sbin/DirectoryService
  585 std  S+     0:00.01 grep tor
pbookbrian:/Library/Tor brian$
Thanks for any advice.

@_date: 2005-08-10 21:35:28
@_author: Brian C 
@_subject: (FWD) Re: OS X Client and Privoxy 503 error 
I've added the task, it's  here:
I have not configured FascistFirewall, but I have wondered if my
tor/privoxy problems are firewall-related.
I don't understand much about the OS X firewall, but my setup is DSL to
Wireless Router to OS X laptop, with the wireless router including its
own firewall.
I was under the impression that the router's firewall shouldn't impact
running the tor client or privoxy, but I do have the router's firewall
set to permit the relevant connections to my Debian tor server. Hope the
crash report helps sort this out.

@_date: 2005-12-07 16:09:14
@_author: Brian C 
@_subject: (FWD) Name alice in graphic should be changed 
When there are also ISPs named Bob, Dave, and Jane then the graphic will be confusing. Until then, I'd leave it alone as context makes it clear.

@_date: 2005-07-25 06:47:10
@_author: Brian C 
@_subject: Confirm new Tor server working? [SOLVED] 
I'm glad someone saw these questions,
Hmmm. Could it be that you tried to access it after that day's 1GB of
bandwidth was used up? I still see lots of "ESTABLISHED" connections
with netstat (many to port 9001) and I'm now listed in the directory.
What else could cause everything to appear to be working but cause your
connection to be refused?
No, I just thought it would help with the responsiveness of the server
generally. However, I discovered that the reason things seemed slow was
that I had a runaway nagios process chewing up over 90% of CPU/memory
and once that was corrected I just barely notice the load from tor usage
on the server. (If I'm right that it is working!)

@_date: 2005-07-15 08:42:11
@_author: brianwc@OCF.Berkeley.EDU 
@_subject: Confirm new Tor server working? 
My server runs Debian. I finally got the clock to stop losing time (lots)
which was holding me back from running Tor. I installed Tor from the .deb
packages and edited /etc/tor/torrc as explained, and then restarted Tor. I
have both hardware and software firewalls so I tried to edit all the
relevant places to allow for traffic on 9001 and 9030 (both TCP and UDP
since I didn't know which). However, I could have forgotten to edit
something or done something wrong, so I'm wondering:
What can I do to confirm that the Tor server is working?
I've looked at the list at  but I don't really
understand it nor do I know the fingerprint of my server to try to match
it up with that list. Thanks for any tips.

@_date: 2005-07-15 09:58:04
@_author: brianwc@OCF.Berkeley.EDU 
@_subject: Confirm new Tor server working? 
Hi Peter,
Within torrc I called it: sharealike
It is on a box called 1080amg at the domain sharealike.org, that is,
1080amg.sharealike.org. The IP begins 64.36... and searching for any of
this on the moria.seul.org:9031 list gives no results.

@_date: 2005-07-15 11:26:34
@_author: brianwc@OCF.Berkeley.EDU 
@_subject: Confirm new Tor server working? 
OK, I shut down Bastille temporarily and was able to reach :9030 through a
web browser (across the internet). But I've edited /etc/Bastille/config to
allow 9030 (so far as I understand it) and it still doesn't want to let
traffic through. When I start Bastille back up, I can't reach 9030
anymore. Anyone here familiar with this or do I need to move on to the
Bastille list?

@_date: 2005-07-21 05:53:43
@_author: Brian C 
@_subject: Confirm new Tor server working? [SOLVED] 
This is not much of a solution, but...
There was a power blackout Wednesday for several hours and so I had to
restart my server. (So much for the 150+ day uptime I had...) Tor now
works without me editing anything else or doing anything else. My server
appears in the directory lists and when I type netstat I see LOTS and
LOTS of ESTABLISHED connections. I don't know what fixed it exactly, but
the unintentional reboot seems to have worked magic.
I've noticed that my web sites that run from this server are a little
sluggish now, so I've investigated bandwidth shaping.
I understand AccountingStart and AccountingMax and will try those, but
the FAQ didn't provide an example of the format to use for
BandwidthRate [what goes here?]
BandwidthBurst [what goes here?]
Do I just put numbers out beside those? in Mb/s? or what?
Also, it seems another useful setting would be something like
MaxConnections so that I could limit the number of simultaneous
connections. A recent check showed over 200 simultaneous connections.
AACK! Can I move that down somehow?

@_date: 2005-11-16 14:22:09
@_author: Brian C 
@_subject: Getting Unblocked at Wikipedia 
I like to occasionally contribute to the Wikipedia. I also run a tor server. I do not want a Wikipedia username, and so I always just contribute anonymously.
During the recent fracas about tor and Wikipedia, my static IP address from which I run my tor server was blocked for an "infinite" time period. I have since decided that until I get more than one static IP, I will only run my tor server in "middle-man" mode, so it is not presently possible that defacement of Wikipedia (or Slashdot, or the Gentoo Forums, etc.) is exiting from my IP address.
I was able to email Slashdot and can login there again, and I don't presently contribute to the Gentoo Forums often enough to worry about it. However, I am finding it impossible to correct the Wikipedia block, because without a username the only way to contact an admin is to edit their "talk" page, but I am forbidden from editing any page because of the block. A vicious cycle.
Does anyone have any experience with this such that they could direct me to an actual email address of a Wikipedia admin who could remove the block or otherwise advise me on how to proceed? Thanks.

@_date: 2005-11-19 09:56:03
@_author: Brian C 
@_subject: Hey guys, here is another (great?) idea 
It would work better from a technical perspective only. From an overall view "requiring" anyone who runs a tor client to run a tor server would not be good for the project. There would be backlash. We've seen that some websites (Slashdot, Wikipedia, Gentoo Forums) can take action against tor server operators that can be frustrating to resolve. If people who just want to run the client through a cool Firefox extension don't understand that they may also get banned from certain websites because they are "required" to also run a tor server, then we will hear from those frustrated users and the project/extension will get a bad rap. Instead, we should just make it really easy for people to opt-in to contributing some bandwidth as a server. Enough people would opt-in if it were really simple that we would probably still see some performance I also have an idea for scaling the # of tor servers dramatically that I'll post about soon. I like this firefox extension idea a lot though too.

@_date: 2005-10-12 18:26:58
@_author: Brian C 
@_subject: Interoperating with p2p traffic 
If an anonymizing service based on Tor were integrated into some p2p project or if a fork of Tor were to devote itself to serving p2p, then that should only be encouraged by the current Tor community if
1. It didn't take away any current tor servers or tor resources.
2. It used another name and was clearly its own standalone effort.
The reason for 1 is obvious. If the point is to make Tor more usable, then we shouldn't support a migration of its resources elsewhere.
The reason for 2 should also be obvious. Tor is a neutral technology that allows privacy. Some people use their privacy for uses we want to support; others for uses we wish they wouldn't engage in. But, if something were called "Tor" and were devoted to p2p traffic then it would taint the whole Tor project. Don't get me wrong. p2p also has legitimate uses. But in the current climate anything remotely associated with file-sharing is assumed to be illegal. Let's not let that shadow be cast upon Tor. It has enough reputational problems already.
Also, Tor is open source. If someone wants to take the code and change it to use their own farm of servers exclusively for p2p traffic then there's nothing the Tor community can do to stop them. I'm not suggesting we should try to stop them. Rather, I'm suggesting we insist that if someone does do that, then they should not call it "Tor" or anything confusingly similar.

@_date: 2005-09-27 13:45:21
@_author: Brian C 
@_subject: Wikipedia & Tor 
Hi Paul,
I think the creep results from bloggers referring to the defacement of
their blogs as "comment spam". "spam" has come to mean far more than you
apparently take it to mean in the Hello from Jimmy thread. (When I read
the thread I thought you were being disingenuous because I couldn't
fathom that anyone was seriously still using such a narrow definition of
"spam" and didn't know of its more widespread use for all kinds of
nastiness, but from your email above I'm willing to believe you're sincere.)
So, whether what the Wikipedia experiences should be called "spam" or
not, they certainly get off-topic unsolicited commercial links posted to
otherwise useful Wikipedia articles, and apparently a good bit of such
edits come from tor server IPs.
The next-best idea I've heard so far is for Wikipedia to require those
coming from tor IPs to login, but the problem there is that then those
who really need anonymity most to post to Wikipedia wouldn't have it (or
at least not through tor.)
This makes me think that the Wikipedia defacement problem is best
handled the way blog comment spam is now handled. If I'm right that the
primary Wikipedia offenders post links to their p0rn/viagra/poker sites,
then Wikipedia could use a blacklist much like bloggers now use. One
open source blogging tool, b2evolution, has a very good "anti-spam" tool
for dealing with this, and so the code is available to be repurposed for
Wikipedia's needs. After each edit, you'd check the edited page against
the blacklist and if it contains links to blacklisted sites, then you
wouldn't allow the page to update. There are always problems with
blacklists like this, but I think it's better than an IP-based ban of
all tor users.

@_date: 2005-09-09 09:15:25
@_author: Brian C 
@_subject: What happened with the Tor USB Keychain idea? 
Is this, from the prior thread, not what you're looking for?

@_date: 2006-04-21 15:43:25
@_author: Brian C 
@_subject: IP resolving 
I just started getting these warnings in my tor server logs.
Running 0.1.1.18-rc and wondering how to resolve. (I did a little
scrubbing of domain names and IP addresses below).
Apr 21 14:12:23.936 [notice] resolve_my_address(): Could not resolve
guessed local hostname 'subdomain.domain.tld'. Trying something else.
Apr 21 14:12:23.937 [notice] resolve_my_address(): Learned IP address
'192.168.0.36' for local interface. Using that.
Apr 21 14:12:23.937 [warn] resolve_my_address(): Address '' resolves to private IP '192.168. Tor servers that use
the default DirServers must have public IP addresses.
Apr 21 14:12:23.937 [warn] check_descriptor_ipaddress_changed():
options->Address didn't resolve into an IP.

@_date: 2006-08-16 22:58:47
@_author: Brian C 
@_subject: Tor and Google Image search 
Just tried  using tor on Debian. Did two
searches which worked great.

@_date: 2006-08-17 05:57:24
@_author: Brian C 
@_subject: Tor and Google Image search 
Perhaps I should have been clearer too, but I used tor to do a couple
Google image searches and the search results pages had all the
appropriate image thumbnails that you apparently are not getting. I used
tor on Debian to do these searches. That is to say, there's nothing
wrong with tor and Google image searching generally. Rather, there must
be something not quite right at your end, which could merely be network
This sort of thing happens... The other day I couldn't get tor to
connect to any Yahoo! page. I didn't assume anything was wrong with tor.
I just figured the current tor connection I had wasn't working so great
and would try again later.

@_date: 2006-12-11 08:07:10
@_author: Brian C 
@_subject: ABC blocking Tor servers? 
ABC makes available some full episodes of their TV programs from their
website.  I operate a tor server from the single static IP assigned to
me by my ISP.  My ISP is a Covad reseller and my IP address resolves to
a Covad block located in San Francisco, CA.
When I go to: I get the message: "Only viewers within the United States can watch
these full-length episodes."
I'm hoping other tor server operators, located in the United States,
will check this out by visiting the above address from their tor server
IP, so we can determine whether ABC is simply blocking the list of all
tor servers.
Thanks for any reports,

@_date: 2006-02-09 15:21:23
@_author: Brian C 
@_subject: Website with explanation for tor service? 
Hash: SHA1
Here's a start for people to work with, taken mainly from the tor
website. Feel free to edit. Once we have an English version we like,
people can go to work translating:
You are probably visiting this web site because you saw this host name
in your log files. This server is part of a volunteer-supported
distributed network of servers running a program called Tor. Tor is used
to anonymize web browsing and publishing, instant messaging, IRC, SSH,
and other applications using the TCP protocol. Tor aims to provide
internet users with protection against "traffic analysis," a form of
network surveillance that threatens personal anonymity and privacy,
confidential business activities and relationships, and state security.
If you are investigating abuse that you believe passed through this IP
address, you should know that it probably did not originate from this
server and the operator of this server has no effective means of tracing
the origins of the encrypted traffic that has passed through this server.
Tor server operators regret that some users may behave abusively, but we
also feel that providing a resource that improves anonymity and privacy
is important. See the Abuse FAQ at for more information.
You can learn more about Tor at its website:

@_date: 2006-01-31 09:03:58
@_author: Brian C 
@_subject: how to confirm that tor is working? 
Do you see your tor server listed here:
or here:
If not, something's probably wrong.

@_date: 2006-06-01 13:13:36
@_author: brianwc@OCF.Berkeley.EDU 
@_subject: NO_PUBKEY CFF71CB3AFA44BDD 
I'm setting up a new computer and know I must be forgetting something. I'm
running Debian Etch, and I've included in my sources.list the experimental
tor sources for Etch. I imported all of the developer keys listed on the
wiki, but running dselect (and then update) still produces this output:
Hit  experimental-0.1.1.x-etch/main Packages
Fetched 2698B in 1s (1436B/s)
Reading package lists... Done
W: GPG error:  experimental-0.1.1.x-etch Release:
The following signatures couldn't be verified because the public key is
not available: NO_PUBKEY CFF71CB3AFA44BDD
W: You may want to run apt-get update to correct these problems
The last eight characters there look like one of Peter's keys, which I've
imported. The first eight I don't recognize and no keyserver I tried knows
any key like that. What's going on?

@_date: 2006-06-03 10:41:57
@_author: Brian C 
@_subject: NO_PUBKEY CFF71CB3AFA44BDD 
That fixed it. I was looking at the wrong part of the wiki apparently.
I would suggest that:
contain a link to
saying something like "If you are running Tor on Debian you should read
TorOnDebian for instructions on importing these keys to apt."

@_date: 2006-09-05 07:48:52
@_author: Brian C 
@_subject: Revealing tor hidden services by their clock skew 
This is on the front page of reddit.com right now, so it should get some
Murdoch's paper is here:

@_date: 2007-12-24 08:21:11
@_author: Brian W. Carver 
@_subject: Please run a bridge relay! (was Re: Tor 0.2.0.13-alpha is out) 
Trying to run a bridge I get the following error:
Starting tor daemon: tor...
Dec 24 08:13:15.454 [notice] Tor v0.2.0.14-alpha (r12937). This is
experimental software. Do not rely on it for strong anonymity. (Running on
Linux x86_64)
Dec 24 08:13:15.456 [notice] Initialized libevent version 1.1a using
method epoll. Good.
Dec 24 08:13:15.456 [notice] Opening OR listener on 0.0.0.0:443
Dec 24 08:13:15.456 [warn] Could not bind to 0.0.0.0:443: Permission denied
Dec 24 08:13:15.456 [warn] Failed to parse/validate config: Failed to bind
one of the listener ports.
Dec 24 08:13:15.456 [err] Reading config failed--see warnings above.
I sort of understand what the error is saying but I don't know how to fix
it.  Suggestions?

@_date: 2007-12-24 15:39:12
@_author: Brian W. Carver 
@_subject: Please run a bridge relay! (was Re: Tor 0.2.0.13-alpha is out) 
Ah, thanks.  Now tor started without error.  But, how can I tell if the
bridge is working?  The log file doesn't seem to contain any different
messages from when I ran a regular tor server.  Does it show up on the
various tor server statistics pages as a bridge?

@_date: 2007-02-09 00:40:08
@_author: Brian C 
@_subject: Tor in the Chronicle of Higher Education 
Very interesting article.  Given the heavy-handedness of the network
admins there, I wouldn't be surprised if we hear about a protest
movement to make Bowling Green University the campus with the highest
percentage use of Tor of any University...  At one point there was a
Bowling Green Student Linux Users Group, but I don't know if they still
exist.  Don't make the geeks angry...

@_date: 2007-03-22 23:54:11
@_author: brianwc@OCF.Berkeley.EDU 
@_subject: Tor Server Affecting Net Access 
I run a tor middle-man node on an otherwise-unused Debian AMD64 box.  I
use the same IP address/DSL connection for all my home internet needs,
i.e., browsing, running web and dns servers, etc, and it's supposed to be
a 6000/1500 dsl line.
I have just realized that running the tor server has been causing serious
degradation of my internet access (a problem that had me baffled for some
time.)  My torrc allows 1GB traffic/day.  This is a relatively new
problem, so I'm wondering if something about my setup or the version of
tor I'm using is to blame, and hope someone here can diagnose.  The
problem primarily appears for the wireless clients.
I'll try to draw a text picture:
DSL Router (1 static IP)
WRT54GL running DD-WRT (4 ports) & no wireless clients
____|___|___|_old computer running BOINC
____|___|_old computer running BOINC
____|_another WRT54GL running DD-WRT (4 ports) + wireless clients
_web server_|___|___|___|_dns server
_________unused_|___|_Debian AMD64 Tor Server
The wireless clients get very sporadic net connections when the Tor server
process is running, and are blazing fast when the Tor server process is
not running.  At first I got slightly better results by switching all the
wireless clients to the DD-WRT router closer to the DSL Router, but it
became clear soon enough that the net connections still were terrible.
Unless someone can suggest a different configuration that would solve
things, I was thinking of paying for additional static IPs with my ISP and
using one of them for the tor server, and once it had its own IP, I'd also
make it an exit node.  As I understand how my ISP does this, they will
simply activate the three other ports on the DSL router and each will have
its own static IP.
However, if the issue is simply that having a couple hundred people's tor
traffic running on your home DSL connection just gums up the works, and
even segregating the tor server to its own IP won't address the issue,
then I may have to sadly stop running it as I have to keep everything else
functioning too.  Thanks for any suggestions.

@_date: 2007-05-29 08:17:39
@_author: brianwc@OCF.Berkeley.EDU 
@_subject: ISP TOS restrictions on servers 
It's not editable or I'd add Cyberonic to the the list of GOOD ISPs.  They
are now on the COVAD backbone, so you should be able to get service from
them anywhere you could get other COVAD-based service.  They offer
6.0m/768kbps at $59/month, w/ a static IP.  Can't recall ever having
downtime due to them and their TOS only restrict Email relay servers (and
that's probably only enforced if you have complaints).  All other servers

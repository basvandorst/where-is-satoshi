
@_date: 2008-04-15 14:55:46
@_author: Jonathan Addington 
@_subject: monitoring tor-traffic 
I only have a vague idea of what a bridge-relay is as opposed to a normal
relay. If you aren't an exit node (which seems to be the case, or ought to
be, for all bridge-relays) you can run
 lsof -iTCP|grep debian-tor|wc -l
and see if it turns up more connections. Three seems like a small number to
me, but you'll probably have to wait for someone else to answer (consider
posting that as a question in a new thread.)
Glad I could be of some help, I am still figuring out the workings of Tor

@_date: 2008-04-10 15:41:45
@_author: Jonathan Addington 
@_subject: monitoring tor-traffic 
What OS and router (if you have one) are you running?

@_date: 2008-04-10 16:54:06
@_author: Jonathan Addington 
@_subject: monitoring tor-traffic 
To get an idea of the total number of connections you can run "lsof
-iTCP" which will list *all* TCP connections. E.g., :
evince     5338     madjon   56u  IPv4 2899806       TCP
beijing.local:48037->py-in-f19.google.com:https (CLOSE_WAIT)
tor       12056 debian-tor    4u  IPv4 5236063       TCP
tor       12056 debian-tor    7u  IPv4   19749       TCP
beijing.local:9001 (LISTEN)
If Tor is running as its own user (as is generally encouraged) you can
run "lsof -iTCP|grep tor-user" (which would remove "evince" above, or
apache, vnc, or any other program that uses tcp). "lsof -iTCP|grep
tor-user|wc -l" will give you an actually count, which will also
include outgoing connections, which will increase the number if you
are running an exit server. To narrow things down more you could run
"lsof -iTCP|grep tor-user|grep 9001|wc -l" where 9001 is whatever port
Tor actually takes connections on, which should give you a good idea
of the number of nodes you are connected to.
To monitor bandwidth you can use a program such as mrtg or bmon.
You should know that it can take a very long time to list all
connections if you have had Tor running for any significant amount of
time. With a cable modem this process takes me several minutes. There
are other ways to measure connections/bandwidth as well, along with
more precisely monitoring Tor (although this method works fairly
With three computers on my network, presently there are 1369 outgoing
connections, 1342* of which are Tor, taking up 206kbit/s of (outgoing)
bandwidth. As my outgoing bandwidth is lower than my incoming I can be
fairly certain that Tor is running *about* the same in incoming
I hope this helps and is not too verbose. I was going to let someone
with more Tor experience respond, but it wasn't coming fast.
*These are not all necessarily active connections, running "lsof
-iTCP|grep debian-tor|wc -l" gave me 681 connections and took 11
minutes to complete.

@_date: 2008-04-11 11:57:17
@_author: Jonathan Addington 
@_subject: Smallest cheapest device to run a tor home server? 
Personally I am running Tor on an old server, 2x500Mhz PII's with a cable
modem (e.g., keeping ~1350 connections open at once). While I have quite a
bit of RAM and hard drive space Tor doesn't take up much of either, and the
computing power is more than enough. If you want me to run some benchmark's
I'd be more than happy to.

@_date: 2008-08-09 15:22:21
@_author: Jonathan Addington 
@_subject: Gmail/SSL 
This is also on the Gmail blog, which notes that going to
 always had the same effect. (At least

@_date: 2008-02-23 13:33:18
@_author: Jonathan Addington 
@_subject: Binding Tor to Pseudo-Interface 
I've been running a Tor exit node on and off for awhile now and my
biggest problem has always been bandwidth limiting. I finally
installed a firmware on my router with relatively advanced QoS on. It
works pretty well most of the time, but to optimize it, I need to be
able to isolate *all* Tor traffic. Because I use the same computer for
other purposes, I can't just deprioritize its traffic, so I created a
pseudo-interface for the QoS to filter on.
My remaining problem is that while Tor listens and responds to other
Tor clients via this pseudo-interface (and hence different IP) it
still fetches information as an exit node from the
non-pseudo-interface, making it much more difficult to filter (I don't
want to deprioritize *my* web-browsing as well!).
Is there a way to bind Tor so that it *only* uses the pseudo-interface?

@_date: 2008-02-23 19:29:18
@_author: Jonathan Addington 
@_subject: Binding Tor to Pseudo-Interface 
That did it, thanks much! Obviously I need to do a better job of
R(ing)TFM. My apologies.
One more problem (at least at the moment), my three roommates are
getting the Google spyware/virus page. This isn't making them happy
for some strange reason. I would really lie to continue to have an
exit node that supports port 80. Is there anyway around this? None of
them are using Tor...
On Sat, Feb 23, 2008 at 5:47 PM, Arjan

@_date: 2008-03-21 14:22:05
@_author: Jonathan Addington 
@_subject: More GSoC Ideas 
I am *not* vying for a spot (I doubt I would make it) but here are a
couple of ideas and reasons for them.
1. Enable tor to use a blacklist of some sort, perhaps with
categories, at the tor operator's choice. (Perhaps using Squid in a
non-caching mode) Examples:
  A. I had at least one connection to legal-preteen.com. I am willing
to take some chances of getting into trouble with the law for the sake
of avoiding internet censoship, but not to that end. Child pornography
and The Great Firewall of China are two completely separate things.
  B. I've had to block Google because my roomates were getting the
nasty "this might be spyware" page and weren't all too happy about
  C. I've blocked The Pirate Bay, and when I have time, will block
other such sites. (See idea 2). If operators want to let tor users go
through to those sites that's fine, I don't even care all that much
except that I think the limited tor bandwidth can go to better uses.
2. On *nix systems, make it easy for snort to filter out tor traffic
on a protocol level. I realize there are plenty of legal uses for
BitTorrent, Gnutella, etc., but most of them do not require anonymity
in a strong sense. That is, they can get the same content through http
(most of the time) anyway, and downloading a Linux distribution (or
whatever) won't be flagged by most governments/agencies/whatever. It's
my bandwidth, I have the right to let *others'* use it as I see fit.
Moreover, if these were implemented I would be much more comfortable
setting up additional tor nodes at friends' houses, or my parents',
who have high-speed connections. However, the last thing my parents
need is the FBI knocking on their door wondering why they are visiting
legal-preteen.com. I don't think that would make them very happy.
(Granted, I could just set tor up as a non-exit node, which I may do,
but the tor network could use more exit nodes in general.)
Just ideas,

@_date: 2008-03-21 15:09:52
@_author: Jonathan Addington 
@_subject: More GSoC Ideas 
I didn't expect a very warm response, glad to see I wasn't disappointed!
I don't expect to ever block all such traffic.
I can't even get a static IP without being nickeled and dimed to death.
Yeah, I don't care much about the .torrent files because they are so
small. It just makes it a little bit harder for them to start running
a torrent through my server in the first place.
Not looking for perfection, and not looking for *tor* to do any
filtering (in either of the cases I described), programs such as snort
and squid can be configured to do just that, but it's not easy.
I am not looking for perfection in any of this. Tor is not perfect, it
isn't even made to be (every time I start up my server it reminds me
not to rely on it for "strong anonymity." I am looking at changing
*probabilities*. If running an exit node is perceived as "safer" for
more people, it might be easier to get non-techies/geeks to run (exit)
I'd love to see the idea at least discussed (if somewhat informally)
before simple dismissal.

@_date: 2008-03-04 14:25:26
@_author: Jonathan Addington 
@_subject: I am at my wits end, I cant register for account at digg.com using tor 
Couple of other options, albeit less convenient
1. Go to a library/coffee place/bookstore whatever with WiFi and
register for your account there without using tor.
2. Find a prepaid dialup card for cash.
Neither offer you anonymity quite as strongly, but then again, it
seems unlikely that you need it for digg.
P.S. Not to encourage it or anything (it's illegal in many areas) but
there is always Warddriving ;-)

@_date: 2008-03-07 14:03:22
@_author: Jonathan Addington 
@_subject: "TLS error while renegotiating handshake" on Win XP 
Does [scrubbed] change or is it always the same?
On Fri, Mar 7, 2008 at 1:42 PM, john smith

@_date: 2008-03-09 19:23:54
@_author: Jonathan Addington 
@_subject: Gmail/SSL 
I've been following the conversation regarding Gmail and SSL bits in
other threads because, as you can tell, I use Gmail, and was under the
impression that https:// will keep everything over an SSL connection.
So after reading the threads that suggested otherwise I decided to
I shut down my Tor server, and blocked most forwarded traffic from my
router, logged out of Gmail, and closed Firefox. Then I Started up
Wireshark, opened up Firefox, logged onto Gmail, looked at a couple of
message, labeled one spam, and sent one as a test. Then I just let it
sit for about four hours.
After going through the Wireshark log (which took a bit!) the only
non-SSL/TLS traffic from Gmail I could find looked like this:
ET /safebrowsing/update?client=navclient-auto-ffox&appver=2.0.0.11&version=goog-white-domain:1:30,goog-white-url:1:371,goog-black-url:1:19069,goog-black-enchash:1:46040
Host: sb.google.com
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.8.1.11)
Gecko/20071204 Ubuntu/7.10 (gutsy) Firefox/2.0.0.11
Accept: text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Keep-Alive: 300
Connection: keep-alive
Cookie: PREF=ID=2ebc725f67fb2226:TM=1185368577:LM=1204091083:FV=2:GM=1:S=wxIX6A2MoEz-E_jQ;
rememberme=true; TZ=360; GMAIL_RTT=199;
HTTP/1.1 200 OK
Cache-Control: public,max-age=600
Server: TrustRank Frontend
Content-Length: 40363
[goog-black-enchash 1.46041 update]
Except that the whole thing was ~41kb.
So, while not an exhaustive study by any means, it *does* look like
Gmail will stick to SSL, or some type of encryption (I have no idea
what "goog-blacl-enchash" means, but it certainly isn't plaintext).
If anyone wants to look through the packet dump let me know, it's
about 4mb uncompressed after I filtered out traffic that I knew wasn't
from Google (from a cron job I have going), I'd be glad to post it
Running Ubuntu 7.10, all latest patches/updates
Wireshark 0.99.6
Behind a wrtg54 router running Tomato firmware.

@_date: 2008-05-17 21:18:10
@_author: Jonathan Addington 
@_subject: Traffic on a node 
The easiest way to check for Tor traffic is to see if there are connections
on ports 9001 (default entry port), 9030 (default directory port) or
whatever other ports you have chosen besides the defaults. Running "netstat"
from the command prompt (start->run->cmd ; prompt netstat) will show
all open connections.
There are other options if you need/want more specific information.
Personally, I configured my router for QoS scheduling but it also reports
outgoing bandwidth and number of connections by the class of traffic (e.g.,
Tor, ssh, www, and whatever else I have configured).

@_date: 2008-05-21 06:18:18
@_author: Jonathan Addington 
@_subject: set up relay 
(1) Make sure your firewall isn't blocking said ports.
(2) If you have a router make sure that said ports are being forward to the
computer running Tor. This is usually easier if you use a static IP for that

@_date: 2008-11-02 01:31:52
@_author: Jonathan Addington 
@_subject: Tor From SVN on Weelky Basis 
The instance I am referring to runs as a server only. I have an old HP
Kayak (PIIIx5000mhz baby!) that I use as my workhorse computer, not
(normally) for web browsing etc. Just a couple different severs and
backup storage.
For me or the network?
I don't monitor it all that closely.
I'll buy more more :-)
As I mentioned I don't monitor it that closely, just usually make sure
it is up and running. Is it running properly as an exit node (usually
obvious by number of outgoing connections/bandwidth from it). Is there
something specific I should be looking for?
I often write scripts to try to automatically build programs that I
either use often, always like the latest and greatest on, or prefer
[the projects prefer] that one run the latest from the SVN/CVS.
I am running Ubuntu 7.10. Given the above, any reason not to recompile
from the SVN weekly or so? For the sake of the network should I use an
official stable or alpha release?
Thanks Phobos/Andrew. I do my best to answer newbie problems as best
as I can and as have time on this list but do read it regularly and
appreciate your attention to it.

@_date: 2008-11-02 01:52:17
@_author: Jonathan Addington 
@_subject: Problems starting relay 
First, take any advice from Phobos before mine.
Second, I opened up Vidialia on my computer (I'm old school and
usually do this in a text editor); under sharing what is the Relay
Port set to? Is it the same as what your router currently has
configured? I *think* the default (under Vidalia 0.1.9) is 443, not
9050. Make sure your router reflects that.
Finally, note what Phobos said above about using the OSX firewall. It
could be getting in the way (says the guy who only runs Windows &

@_date: 2008-11-02 02:07:53
@_author: Jonathan Addington 
@_subject: Problems starting relay 
(Likewise to "madjon", who posted
My sincere apologies. I didn't RTFM, only going off of my own
experience. Apparently a bad idea.

@_date: 2008-11-13 12:11:17
@_author: Jonathan Addington 
@_subject: Any plans to fix tor for OpenDNS? 
Getting off topic here but I've posted on this before as well. Every time I
post I get the same typepad confirmation request. Annoying. Is it possible
that an incorrect email address is on the list?

@_date: 2008-11-13 12:40:57
@_author: Jonathan Addington 
@_subject: TypePad - Fwd: Post Confirmation 2879f420325dc7d6 [Was: Any plans to fix tor for OpenDNS?] 
Every time.
---------- Forwarded message ----------
Reply to confirm your message with the subject of:
   Re: Any plans to fix tor for OpenDNS?

@_date: 2008-11-01 23:52:29
@_author: Jonathan Addington 
@_subject: Tor From SVN on Weelky Basis 
Is there any good reason not to build Tor from the SVN on a weekly basis or so?
I understand stability, issues, etc., but are there are other reasons?
I am building only for the server; I use a stable client on a
different computer.

@_date: 2008-11-02 00:09:00
@_author: Jonathan Addington 
@_subject: Problems starting relay 
I can only be of so much help compared to many of the others on this
list but I'll give it a shot as I am posting as it.
Tor only operates in TCP, you don't need to set yourself up UDP.
It probably shouldn't be listening on 0.0.0.0. localhost:9001 or
127.0.0.1:9001 are normal unless OS X is different from Windows &
Linux (sorry, not real familiar with Macs).
Changing that may be enough. It would mean editing your torrc file so
the  ORListenAddress  line is something like
ORListenAddress localhost:9001
-or--not both-
ORListenAddress 127.0.0.1:9001
Also, your ORPort line (default: ORPort 9001) must match the above
lines. E.g., if
ORPort 2394
ORListenAddress localhost:2394
Hopefully this helps. If not, it is possible your port forwarding is
setup incorrectly. If your computer gets a different IP from your
router every so often it can cause problems (depending on the router).
I have found it is easier to make sure my Tor server has a static IP
*inside* my network. E.g., my Tor server always has the address
192.168.1.xxx. This is is easy to configure with most routers. If you
need to configure it this way and have not I or someone else on this
list ought to be able to help you.
Other questions for you to answer:
1) Whatever version or Tor/Vidalia are you running?
2) What router do you use?

@_date: 2008-11-02 00:30:42
@_author: Jonathan Addington 
@_subject: Problems starting relay 
Did you download Tor and Vidalia separately?
I assume this is the stable version of Tor?
Also, post if these changes (or others) work for you.
Finally, I obviously have no idea you are setup. But if your computer
gets a dynamic address from the router (standard DHCP setup) you may
want to check the port forward part again. It is *possible* that your
computer changes IP's (again, internally) since you set up the port

@_date: 2008-11-07 13:02:47
@_author: Jonathan Addington 
@_subject: any middlemen seeing DoS currently? 
On an old HP Kayak (2x500mhz PIIIs, 768mb) running Ubuntu 7.10 and tor
built from the SVN a couple of weeks ago: open number of connections
are hovering around 1200-1400 and no memory or CPU problems:
Doing my best copy/paste from top:
PID   USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
000000 tor-tor  15   0  123m  81m  15m R    2  9.2 362:54.22 tor
madjon at gmail.com

@_date: 2008-11-02 00:38:40
@_author: Jonathan Addington 
@_subject: Problems starting relay 
Another thing (sometimes the obvious things are what kill you), is
your firewall setup on your computer to allow incoming connections to
port 9001? Or to allow Tor as a server? I have no idea how the OS X
firewall works (or whatever firewall you use, for that matter) but it
is an easy thing to overlook.

@_date: 2008-10-21 10:29:44
@_author: Jonathan Addington 
@_subject: Copying Tor Directory Info 
At one of the places where I use store fetching directory is routinely
blocked. Can I bootstrap the portable version of Tor (1.2.19, WindowsXP Pro
SP3) with data from the server (0.2.1.6-alpha on Ubuntu 7.10) I run?

@_date: 2008-10-21 22:45:46
@_author: Jonathan Addington 
@_subject: Copying Tor Directory Info 
Thank you for the suggestion. I see that binaries for the 0.2.x branch
are not yet up. I do pretty well with building stuff on Linux (always
via SVN/CVS where possible) but find building the same programs on
Windows can be... harder.
For an experienced Windows/*nix user, but amateur programmer, how hard

@_date: 2008-10-22 10:44:34
@_author: Jonathan Addington 
@_subject: Copying Tor Directory Info 
Thank you guys. I did look at the instructions before asking. What I
did not know was whether it was an easy process in reality.

@_date: 2008-10-22 11:52:26
@_author: Jonathan Addington 
@_subject: Copying Tor Directory Info 
I'm sorry, I'm not seeing the binaries for Tor Browser Bundle 0.2.x at
Unless I am seriously losing my mind (possible) I am only see unstable
1.1.4 binaries for the *bundle.* I guess I can just download
everything and put it together individually; my mind just doesn't
think like that anymore (perhaps too many years of trying to compile
any given program from its SVN/CVS without having upgraded every
library it relies on as well...)

@_date: 2008-10-22 13:07:34
@_author: Jonathan Addington 
@_subject: Copying Tor Directory Info 
It does clear things up. Sorry for obviously not clicking through as
far as I should have.

@_date: 2008-10-27 20:17:39
@_author: Jonathan Addington 
@_subject: Geo Tracing/Locate Tor Network 
Two questions (sorry if these are somewhere in the FAQ)
First, where does Vidalia get the IP info for mapping Tor? IP addresses
based on the directory?
Second, what does Vidalia use to geolocate the IP? Is there a db or an API
I realized this is somewhat off topic but if I have the time I would love to
take the time to write a KML file for Google Earth, mostly for coolness
sake. (And the resolution is better.)
Any other ideas?

@_date: 2008-10-28 19:47:54
@_author: Jonathan Addington 
@_subject: Geo Tracing/Locate Tor Network 
Well, my first thought was just a map of the whole Tor network -- all
listed servers. Just write a script to create a KML file for Google
Earth -- no routes. Maybe bigger bubbles versus smaller bubbles for
bandwidth or number of nodes in a city.
I'm not looking to trace past the city level (there shouldn't be
reason to do so except for over-curiosity). As far as routes go, I
don't think I would want to try to integrate that into Tor at this
point, it's just more work than I want to bother with.
So my main question still is, where does Vidalia go for its list of IP
madjon at gmail.com
Calendar (usually up to date):

@_date: 2008-10-29 16:32:54
@_author: Jonathan Addington 
@_subject: How to ban many IPs? 
I had an interesting conversation on this list a few months back
facing the same problem (wanting to use a blacklist for certain
sites). Trying to do it in the torrc file is simply a bad idea. Using
blacklists in general doesn't work out well. If I were you, I might
consider using a white list instead. It is going to severely limit the
sites people can reach but that still might be ok. Even a relatively
short white list could relieve a lot of congestion on the tor network
if the sites are high bandwidth.
The easiest way to implement it is probably to use Squid in
*non-caching* mode. It's ACL's are powerful enough that other people
have built web blocking software around it. Not the best of solutions,
but you could return an error page for any sites that don't match the
white list explaining that your node can't accept such requests.
(To the dozen responses I am going to get back on why this is such a
bad idea: I know. I don't know of a better one if a white/black list
has to be used and HTTP traffic is allowed.)
That's my two cents.

@_date: 2008-10-29 17:29:56
@_author: Jonathan Addington 
@_subject: How to ban many IPs? 
See 2.2.1. "Choosing an exit"
While Roger would be able to clarify, it looks like you could avoid
being flagged as a bad exit if you used a short whitelist in your
torrc file. Specifically I think of sites such as Wikipedia or
whatever search engine is the most popular in the tor network.

@_date: 2008-10-30 11:24:46
@_author: Jonathan Addington 
@_subject: How to ban many IPs? 
You absolutely right (I did mention it was a bad idea). What about a
whitelist instead? Does anybody know what sites take up the highest
amount of bandwidth in the tor network?
I would guess that Blogger and Wikipedia would be up there. One may
not need a long white list to attract a large amount of bandwidth for
this kind of browsing.

@_date: 2008-10-07 18:09:08
@_author: Jonathan Addington 
@_subject: Thunderbird & Gmail 
With Wireshark you can filter by port. So if you know that the remote
port is 25 for SMTP, 110 for unencrypted POP3 (standard port anyway,
this is all in your Thunderbird settings anyway), or 465 for encrypted
POP3 (standard port) that will pretty easily bring down the amount of
packets shown. Then you can browser through the packets for whatever
you are looking for.
With Wireshark: filter by remote IP/domain. So if you filter for
"mail.Whatever.com" and see something come in Wireshark something went
wrong (Thunderbird didn't use Tor at some step).
To address the above, filter by ports, and then by your IP inside the
packet (either through a filter or a search, there shouldn't be too
many captured packets with such a filter.)
madjon at gmail.com

@_date: 2008-09-15 13:35:52
@_author: Jonathan Addington 
@_subject: Proposed student project 
Building on Roger, another point, esp. regarding interception; an
automatic (singned) binary update would be a good idea. You (or
whoever maintained the project) could simply test the latest versions
and update it when needed. (Bugs are found, performance is improved,
Just my pseudo-developer two cents...
madjon at gmail.com

@_date: 2008-09-15 13:39:59
@_author: Jonathan Addington 
@_subject: Fwd: Post Confirmation 807ccc3983b12bd9 
Can someone explain why I get this message every time I post? Or
delete whatever email address sends this back to me?
I don't post often, but it is annoying when I do.
---------- Forwarded message ----------
Reply to confirm your message with the subject of:
   Re: Proposed student project

@_date: 2008-09-05 10:16:52
@_author: Jonathan Addington 
@_subject: Google's Chrome Web Browser and Tor 
Is there a particular reason Torbutton or the like isn't just hard
coded into Firefox? Or any reason not to for Chrome?
madjon at gmail.com
Calendar (usually up to date):

@_date: 2008-09-07 21:28:29
@_author: Jonathan Addington 
@_subject: Google's Chrome Web Browser and Tor 
I had to at least try it out, it is kinda slick (you know, like most
things OS X ;-). The "application mode" or whatever its called is
handy (despite the fact that almost every other browser does the same
thing, they just call it full screen mode).
I do use Google services aside from Gmail in part because I have no
choice (Adwords) and in part because its handy (keeping everyone
coordinated on school projects with Google Docs for instance). For
such services why not use Chrome? I've already handed more over to
Google than I want, not sure what else they can gleam from me.
Just my random 2 cents.


@_date: 2014-12-28 21:28:10
@_author: Aeris 
@_subject: [tor-talk] tor setup on wt3020h with openwrt problem 
Viewing your config files, seems you only run a Tor node on your 3020.
So your 3020 only provide a simple SOCKS5 proxy and you have to configure all your application to use it, as if you run Tor locally.
If you want to use your 3020 as transparent tor proxy, you have to config your firewall to redirect all incoming wireless traffic through the Trans and DNS port of your Tor instance.
Something like
to-ports 9053
REDIRECT --to-ports 9051

@_date: 2014-12-28 21:50:49
@_author: Aeris 
@_subject: [tor-talk] tor setup on wt3020h with openwrt problem 
Hum? Seems good so :'(
Can you dump your real current firewall entries ?
And how do you connect your 3020 to your LAN ? RJ45 with DHCP ?

@_date: 2015-04-30 16:42:03
@_author: Aeris 
@_subject: [tor-talk] Full integration with bitcoin (suggestion / feature 
So who wants to have anonymity must be rich ?
Just no way :)

@_date: 2015-08-14 15:55:10
@_author: Aeris 
@_subject: [tor-talk] How can I make sure that the Tails I'm running is 
AFAIK, you can sha256sum the corresponding /dev/XXX device.
The hash will be the same as the one indicated on the  page.

@_date: 2015-08-14 18:25:36
@_author: Aeris 
@_subject: [tor-talk] How can I make sure that the Tails I'm running is 
I never test to run sha256 on a running live-cd /dev/xxx device?
There may have some lock on it when running.
You can try ? dd if=/dev/xxx | sha256sum ? with perhaps more luck.

@_date: 2015-08-15 13:20:37
@_author: Aeris 
@_subject: [tor-talk] How can I make sure that the Tails I'm running is 
Oh yep, miss that point ><
Better to use another ? safe ? OS, but is re-building our own sha256 tool enough ?
Even if the OS is malware, seems impossible (or sooooooooo difficult at least) for me for a corrupted OS to tricks such tool.
The 2 only ways to do this I see at this moment is :
 - trick the /dev/XXX read to send the real OS data, but in this case need the real data somewhere on the compromised image and so it size must be very different (?2).
 - trick the compiler [1] but difficult to do with a custom sha256 implementation (unable to guess we compile a sha256 to inject forced return value if detecting compromissed OS data on input).
[1]

@_date: 2015-12-29 12:06:02
@_author: Aeris 
@_subject: [tor-talk] Hello I have a few question about tor network 
Hello and welcome here !
Tor is not a security network per se, it provides only anonymity from the point of view of the servers you use : nobody can say this is you behind this Tor visitor.
Tor network can be hack (ie. deanonymizing users) with a sybill attack.
If an attacker control more than 66% of the Tor nodes, he has some probabilities to control 2 of the 3 nodes you will use (the most important are the first and the last), and so can link each hop with each others, leading to user deanonymization.
For more details, read tor-design.html and

@_date: 2015-12-31 13:43:09
@_author: Aeris 
@_subject: [tor-talk] Hello I have a few question about tor network 
Correlation is possible but very more difficult, because 3 nodes for client to rendez-vous points, then 3 others for rendez-vous to HS.
Strength of HS is also to not have clearnet output, even if the ? exit ? node of one of the circuits id compromised, an attacker can?t access clear data. Not the case on the standard case, when compromised exit node have access to all the user data if HTTPS is not used.

@_date: 2015-02-19 16:39:37
@_author: Aeris 
@_subject: [tor-talk] Tor and HTTP/2? 
Don?t know if those problems can impact Tor browser, but I already notice some trouble with TLS reusage on HTTP/2
Perhaps the TLS behaviour allow easier way to alter anonymity.

@_date: 2015-01-05 17:30:42
@_author: Aeris 
@_subject: [tor-talk] TOR issues 
Nobody store this mapping.
Your client encrypt for exit node, then middle node then guard node, and send the triple-encrypted packet to the guard node.
Then guard can decrypt, see the adress for the middle, send the double-
encrypted packet to middle.
Middle can decrypt, see the adress of the exit, send the single encrypted packet to exit.
Exit can decrypt, see the real request, do it, and send the reply on the already open channel to the client.
Nobody have to know more than previous and next hop IP adress to do this.
No, you only see IP from the middle nodes of incoming request.
Never the real client IP.
RSA (assymetric encryption) is only use to exchange private data to do AES (symmetric encryption) after that.
And RSA *is* resistant to man-in-the-middle attack, AES is not.
With RSA, you can identify strongly your mate.
Not really.
There are Directory Authorities (10 actually) to store Tor node IP and public key, and to calculate consensus for exit/guard probabilities.
Those servers are managed by differents people or organisations and it won?t be so easy to take them down all in the same time.
Adding new directories is not difficult, but require Tor upgrade (currently hardcoded IP).

@_date: 2015-01-24 23:43:32
@_author: Aeris 
@_subject: [tor-talk] How to make TBB useable as "system Tor", as Tor, 
Yep, TB is designed to generate undiscernible traffic.
But Internet is not just web? :'(
In my case, I use more Tor for other stuff than web than Tor for web stuff, for NSA-threats protection or just to bypass facist firewalls.
IRC, XMPP, SSH, email, through HS or not, with TransPort needed (most of application outside web browser support badly if not at all SOCKS proxy), etc.
(As always) depends of your threat models, but for sys-admin, main threats are outside the browser (see ? I hunt sys admin ? or 12/28 Spiegel Snowden?s documents). To stay in peace, stay hidden :)
Currently, I also need something more like Vidalia or ARM, for system wide usage, than TB, very limited for usage outside the web.

@_date: 2015-01-30 11:30:14
@_author: Aeris 
@_subject: [tor-talk] Tor -> VPN  Clarification 
For this way, your real Internet requests will be made by your VPN server.
So you just expose directly your identity : given the IP the server at the other side will see, it?s possible to back to your VPN provider, and so on to your real identity (VPN logs, VPN auth, billing informations?).
Tor is not really usefull in this case.
On this way, you still have to provide billing infos or other to your VPN provider, so if VPN server is seized, your identity can be found. And all your data requests are available in clear form on the VPN server.
Tor not really protect your identity too.
So in both cases, just avoid VPN behind or in front of Tor.
(As always, depends of your threat model :D)

@_date: 2015-01-30 17:26:28
@_author: Aeris 
@_subject: [tor-talk] How to make TBB useable as "system Tor", as Tor, 
I?m on Debian.
Yep, I can also use Tor daemon directly, but it?s more user compliant to start it via Vidalia.
Can change identity without going to tty with arm, view alert/bandwidth usage, change Tor config on the fly (roaming machine, my config depends of the network I use, from ? naked ? Tor at home to facist HTTPS only firewall with HTTP proxy and DPI from some of my customers)?

@_date: 2015-07-22 18:20:00
@_author: Aeris 
@_subject: [tor-talk] [TBB] Can userContent.css change my fingerprint? 
Potentially, with Javascript, an enemy can detect your style changes, so you are no more like others Tor Browser users and you are fingerprintable.

@_date: 2015-07-22 23:48:50
@_author: Aeris 
@_subject: [tor-talk] [TBB] Can userContent.css change my fingerprint? 
Don?t know if such kind of tool exists.
But theorically, they can see any CSS property of any element of the page, so all your modifications are visible compared to standard style.
Fingerprinting is only limited by the evil imagination of your enemy (and technically by Javascript capabilities).

@_date: 2015-06-26 10:55:50
@_author: Aeris 
@_subject: [tor-talk] apt-transport-tor 
torify / torsocks is a huge hack with Linux library preloading. Not very clean, can leak DNS, etc.
With apt-transport-tor, you use the Tor SOCKS5 proxy directly (and correctly).
AFAIK, there is no official Debian HTTPS repository.
But Debian packages are GPG-signed. No problem of compromise, even with HTTP.

@_date: 2015-03-17 17:15:55
@_author: Aeris 
@_subject: [tor-talk] Why does TBB use SOCKS and not HTTP(S)? 
All your HTTP(S) traffic is encapsulated into SOCKS
With HTTP(S) proxies, you can only proxying HTTP(S) protocol, and not raw Tor doesn?t really use SOCKS internaly, it only provide a SOCKS proxy server to allow applications to communicate with the Tor network without modification (provided it supports SOCKS proxy).
torsocks just replace standard TCP stack with a fake one (encapsulating TCP socket into a ? SOCKS socket ?) for application not supporting SOCKS proxy

@_date: 2015-10-04 23:28:05
@_author: Aeris 
@_subject: [tor-talk] TOR Browser - Change circuits 
Each 10 minutes, or when you ask for a new identity

@_date: 2016-12-21 19:37:13
@_author: Aeris 
@_subject: [tor-talk] privacy of hidden services 
Yes. Your onion address is published on a DHT, hosted accross all nodes with HSDir flag. Some bad behaviouring relays try to enumerate all onion addresses by massive HSDir node creation to fetch different part of the DHT each time.
uploads and downloads from directory servers, or connection attempts via
Yes too. HSDir node and rendez-vous points can monitor HS usage, because HSDir/RdVPoint usage for a single HS is correlated to this HS usage.
AFAIK, no. Auth for a HS is only to forbid unallowed client to connect to it, but doesn't change the way HSDir and RdVPoint are handled.

@_date: 2016-01-10 19:31:52
@_author: Aeris 
@_subject: [tor-talk] Help me secure my setup 
Why do you absolutely want to route all your traffic through your VPN ?
You want to hide to your ISP the fact you use Tor ?
From my point of view, ? secure ? (no security possible without clean specification of your threat model) network will be gateway of your network with strong firewall allowing only output to known Tor node (with iptables and ipset for example), and one Tor client per computer with all your TCP traffic forwarded to TransPort, DNS traffic to DNSPort and UDP traffic blocked.
Because you say your VPN connection is not trustable, you can?t send plain traffic inside, so you absolutely need Tor client side.
And then, unless you have to hide Tor to your ISP, you don?t need VPN at all.
If you want to hide Tor to your ISP, just forward all Tor connection from your gateway through your VPN (I don?t take time to study the security of doing this, perhaps other people here will find troubles).

@_date: 2016-01-11 00:17:05
@_author: Aeris 
@_subject: [tor-talk] Help me secure my setup 
Not at all.
Let your network gateway (or each PC) forward all outgoing traffic (or only traffic to Tor node, with iptables + ipset) through your VPN. And use the normal way a normal Tor client per PC, configuring all your application to use the standard (and local this time) SOCKS5 proxy or do transparent proxying to (local) Trans/DNSPort.

@_date: 2016-01-11 13:19:44
@_author: Aeris 
@_subject: [tor-talk] Help me secure my setup 
Yep, another solution
Event with always connected client, you can be correlated  :
Filtering consensus refresh should be easy (regular timing) for an attacker

@_date: 2016-01-18 01:33:58
@_author: Aeris 
@_subject: [tor-talk] transparent tor routers 
For information, I work on the same thing :
Missing doc at this moment, but currently able to generate from scratch working image for A20 Olimex Lime with Tor, time sync + ipset fascist Next step is to upgrade kernel 3.2 to 4.0 to be able to use more wifi USB dongle, but no bootable image at this time.
Working on the hardware side too, but not sure to be able to make a viable and affordable product?
Some specs available here (sorry, in French) :

@_date: 2016-01-18 16:03:25
@_author: Aeris 
@_subject: [tor-talk] transparent tor routers 
Not so simple.
As explain in private, you *need* to avoid Tor inside Tor.
So you need some smart firewall, based on ipset generated from the consensus, to route Tor connection directly and proxify everything else, or multiple access point and ESSID to discriminate usage.
And in this case, cheap routers with OpenWRT have nor enough memory nor CPU to manage properly those corner cases.
For example, Tor ipset loading already takes few minutes on a Olimex A20 Lime (512MB DDR3 + dual core 1GHz), I can?t imagine decent/usable perf on a AR150 (64MB DDR + 400MHz).
You also need some basic Tor configuration web UI (bridge, firewalled port?) adapted for not-savy users.
No enough place on tiny router?

@_date: 2016-01-18 23:11:30
@_author: Aeris 
@_subject: [tor-talk] transparent tor routers 
Not so simple firewall rules.
You must avoid Tor inside Tor (worse privacy than Tor only), so if one of the user already use Tor (Tor browser or native client), you don?t want to re-
torify his traffic.
Only feasible with 2 access points (1 for naked client, 1 for already Tor user), or better (avoid explanation/rtfm for the users) with ipset rules to discriminate traffic.
And if ipset, need some smart script (python + stem) to regenerate rules regularly from Tor consensus.
AFAIK, small router (as Olimex) don?t have RTC, so your clock is borked at boot time and must be set manually if you want your Tor client be able to connect (don?t support clock drift more than few hours).
And then, for a fully automated not-savy user targeted device, and more difficult if you want no no-Tor traffic at all (NTP forbidden because of UDP), you need some others tricks like htpdate or inotify, requiring perl and Problem is not to have working Tor client with transparent proxying, but **correct** working Tor client with **correct** transparent proxying.
Or you?re just doing a yet-another-anonabox-craps.
With few MB of memory and MHz of CPU, you just have enough to run a standalone Tor client, all others things (ipset, python, stem, perl, ca-certificates, web server for webUI config?) can?t fit inside.
And you have problem for Tor upgrade too (not possible on OpenWRT without tech skills and reflash).

@_date: 2016-06-27 18:42:02
@_author: Aeris 
@_subject: [tor-talk] Multiple CPU cores? 
Just run enough Tor instances to fill you cores or bandwidth :)

@_date: 2016-06-27 22:38:21
@_author: Aeris 
@_subject: [tor-talk] Multiple CPU cores? 
Why can you only run 2 instances per IP ?
AFAIK, you can run any instances you want, just change OR/Dir port, no ?

@_date: 2016-06-28 09:52:29
@_author: Aeris 
@_subject: [tor-talk] Multiple CPU cores? 
Oh thanks, I wasn’t aware of this feature.
Is there any documentation about this kind of filtering ?
Never see any mention of it before that.

@_date: 2016-03-07 23:38:08
@_author: Aeris 
@_subject: [tor-talk] Transparent proxy question 
Original hostname and port are set by iptables on the socket through setsockopt, SOL_IP & SO_ORIGINAL_DST, and available on Tor with getsockopt.

@_date: 2016-03-08 00:26:25
@_author: Aeris 
@_subject: [tor-talk] Transparent proxy question 
AFAIK, no.
I already dev a tool to do this.
Kind of SOCKS and Transparent proxy over TLS.

@_date: 2016-10-16 19:00:09
@_author: Aeris 
@_subject: [tor-talk] Quote Line Prefixes in Linux Text Editors 
Composing email outside the client is only possible if you use PGP/inline, which is also weak (no clear protection boundary & message tampering).
 And you can’t attach file on this mail format, or you leak file names and sizes if you encrypt your attachments outside the client too. No way to send HTML mail too (even if it’s very bad :P).
So I don’t know what is the more secured between PGP/inline outside the client or PGP/MIME inside… For plain text and very simple email, surely the first, but in most cases, undecidable and for common emails (with attachments and multipart text/html) certainly the second…

@_date: 2016-10-21 18:15:53
@_author: Aeris 
@_subject: [tor-talk] problems faced with tor browser 
And it’s very very […] very too much broken since Symantec, root CA, acquires Bluecoat, DPI provider…

@_date: 2016-10-30 12:57:18
@_author: Aeris 
@_subject: [tor-talk] Tor and forward email to Spam folder. 
It depends how you send your email.
If you use their webmail, your client IP is not send, because first sending SMTP machine is a gmail one :
 [IPv6:2607:f8b0:4001:c0b::229])
If you use SMTP, your client IP is send because it’s the first sending SMTP machine :
 [IPv6:2a00:1450:400c:c09::231]); Sun, 30 Oct 2016 11:44:40 +0000 (UTC)
Oct 2016 04:44:38 -0700 (PDT)
This is why on my personal SMTP server, any client informations are dropped or

@_date: 2016-10-30 15:35:04
@_author: Aeris 
@_subject: [tor-talk] Tor and forward email to Spam folder. 
Some servers can check for a valid rDNS/FCrDNS [1].
Reverse of the IP sending the mail must be equal to the HELO/EHLO domain used.
For example the nazi and very bad DNSBL V4BL [2] do this check and reject all mail if not pass. This check is also a clue for spamassassin [3] for spam scoring but doesn’t reject the mail only on this fact.
This is a best practice from RFC 1912 [4] but is highly problematic for self-
hosting/tiny mail provider because it’s not common at all to be able to manage IPv4 reverse (and worst IPv6 reverse) :
affected in-addr.arpa zone is on it authority server and not your. Only few allow reverse IP for their customers.
tools (EHLO/HELO is generally not dynamic but static in SMTP config).
server, to avoid reverse DNS on all your IP and in particular on your shared hosting server.
Only huge enough email providers like Google or Microsoft are able to ensure clean rDNS/FCrDNS in practice…
Spammer generally use a EHLO with the targeted domain or common outgoing domain (gmail, yahoo, microsoft…) to try to confused anti-spam or badly configured incoming mail server (corporate email servers generally whitelist their own domain…).
And remember the SMTP *content* can be totally different from SMTP *metadata*.
You can announce an EHLO domain "foo" but send an email from and to "bar" domain. This can be a spoofed email but also totally valid email.
An email sent from a "foo" server with a "foo" TO addresses but a "bar" FROM and BCC adress will generate the following SMTP on the BCC server.
You can imagine more wierd SMTP exchange with 5 differents domains on the EHLO, MAIL FROM, RCPT TO, From and To (mailing list change EHLO, address rewriting change MAIL FROM, forwarding change RCPT TO, BCC decorrelate metadata from content…)…
Paradize for spammer, hell for spam fighter…
[1] [2] [3] [4]

@_date: 2017-08-17 23:02:54
@_author: Aeris 
@_subject: [tor-talk] Is DNS required to connect to an entry node? 
But for Tor nodes, Tor client doesn't use hostname but IP directly.
There is no need of DNS, consensus is only IP-based.

@_date: 2017-03-17 15:35:28
@_author: Aeris 
@_subject: [tor-talk] allow ssl-encapsulated connections to all tor 
I don't understand.
Tor traffic between nodes is *already* encrypted, and L7 data (HTTPS, IRC, SSH…) encapsulated on Tor traffic are not available.
The only L7 endpoint is on the exit node to join the "standard" net and do the real L7 request. And no way to encrypt/obfuscate this point because we communicate with standard software and not Tor related.
For node-to-node communication, obfuscation is useless, because IP and OR port are fully public, and so you know it's Tor traffic without any DPI or traffic analysis. All traffic from a Tor node IP to a Tor node IP (+ OR port if you want to be more accurate), with just plain old L3 consideration, is Tor traffic.
Even with STUNNEL between node, the same L3 traffic discrimination can be done.
As end user (and not Tor node), if you really want to hide the fact you use Tor, you have to use bridge, which is basically node with no public IP available to avoid the previous basic L3 traffic detection.
And you can use obfuscation too, with bridge node using meek, obfs or other obfuscation protocol available on Tor.

@_date: 2017-03-17 16:49:22
@_author: Aeris 
@_subject: [tor-talk] allow ssl-encapsulated connections to all tor 
Initial handshake is L3 detectable too, and easier on L3 than on L7.
Guard node and directory servers IPs and ports are public.
For example, no need of DPI if you see traffic from not Tor node IP to 212.47.237.95:9001. This is a Tor client connecting to one of my guards, here Or connection from not Tor node IP to 128.31.0.34:9131, this is a client looking for consensus data from moria1, one of the Tor directory authorities.
Adding STUNNEL encapsulation or obfuscation here change nothing.

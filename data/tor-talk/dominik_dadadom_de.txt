
@_date: 2009-01-27 13:42:01
@_author: Dominik Sandjaja 
@_subject: Memory leak? 
I am using a local tor network (three nodes) for testing purposes. For
simulating maximum load, I wrote a script, which initiated circuits from
a fourth computer ("penetrator") and closed them as soon as they were
built. This was done via TorCtl (Tor Control Protocol).
The nodes were fully loaded with the circuit building (as expected on a
GBit network), but after a while, the middle node (and only that one)
exits with an out of memory error.
Now I wonder whether this is the "normal" behavior or whether it is
caused by a leak. Although I am pretty aggressively building and closing
circuits, an oom shouldn't happen as all circuits are being closed
immediately after being "built".
The problem is reliably reproducible with tor stable as well as -alpha.
It only happens on the middle node, independent of the underlying
So, question still is: Is the oom accepted or an actual error?
Thanks in advance,

@_date: 2009-01-06 17:30:57
@_author: Dominik Sandjaja 
@_subject: UseEntryGuards=0 overwrites EntryNodes 
Tor version 0.2.0.31 (r16744) on Linux is my client.
In the torrc:
  StrictEntryNodes 1
  EntryNodes commodore64
  UseEntryGuards 0
I get in the log:
Jan 06 17:20:43.736 [info] internal (high-uptime) circ (length 3, exit
Tonga): tibet108(open) anon1984n2(open) Tonga(open)
and other circuits, all excluding commodore64.
If UseEntryGuards = 1 (default), I don't get a connection (commodore64
is no guard yet):
Jan 06 17:26:23.816 [warn] Failed to find node for hop 0 of our path.
Discarding this circuit.
Jan 06 17:26:23.816 [info] onion_populate_cpath(): Generating cpath hop
It seems as if UseEntryGuards=0 overwrites StrictEntryNodes and
Is this behavior intentional? As I understood it, UseEntryGuards should
have lower priority than EntryNodes + StrictEntryNodes. If all is
configured, the guards should be picked from the EntryNodes. Especially,
as commodore64 even appears in the cached-descriptors file.
Thanks in advance,

@_date: 2009-01-07 10:14:56
@_author: Dominik Sandjaja 
@_subject: UseEntryGuards=0 overwrites EntryNodes 
Am Mittwoch, den 07.01.2009, 02:35 -0600 schrieb Scott Bennett:
that is exactly the problem. As you see, it leaves too much room for
interpretation :-)
I did this:
Then, the UseEntryGuards is obeyed, as well as the StrictEntryNodes,
but no connection can be made due to none of the nodes in EntryNodes is
flagged as guard (yet). I will try to turn off the guard-check in the
tor source and use that modified version, but nevertheless, the issue
on how the options are handled should be clarified.
As above, this seems to be an issue with how the options are
treated/interpreted. Again, clarification would be nice.
Thanks for the answer!

@_date: 2009-03-19 14:57:32
@_author: Dominik Sandjaja 
@_subject: CPU-usage data 
is there data available on how much of the CPU time is used by what part
of Tor? I guess that most is used by crypto parts, but any reliable data
would be appreciated. All given that the network is fast enough and the
cpu is at 100% usage. Something like "90% of its (CPU) time Tor spends
on crypto operations".
Thanks in advance,

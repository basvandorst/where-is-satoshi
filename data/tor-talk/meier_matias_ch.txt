
@_date: 2010-01-15 22:34:31
@_author: Matias Meier 
@_subject: QoS and Tor on Ubuntu 9.10 
Hallo miteinander
Ich betreibe einen Tor Server auf einem 100/100mbit Dedicated Server unter
Ubuntu 9.10 x86.
Momentan biete ich Tor nur eine Bandbreite von 1mb/s (8mbit/s). Dies m?chte
ich jedoch ?ndern, denn ich m?chte dem Tor Projekt mehr Bandbreite zur
Verf?gung stellen.
Jedoch laufen auf diesem Server noch andere Dienste
 Darum wollte ich
h?flichst anfragen, ob es m?glich w?re, dass jemand mir ein QoS Script
mittels ?TC Filter? schreiben k?nnte.
Ich w?rde zwei verschiedene Kategorien ben?tigen.
Low Prio: F?r den Tor Dienst, welcher auf Port 443 l?uft
High Prio: Alle andern Ports
Ich freue mich schon voraus auf eine Antwort von euch
Gruss Mete
Hello everyone
I?m running tor server on a 100/100mbit dedicated machine which runs ubuntu
9.10 x86.
Currently I?m sharing 1mb/s (8mbit/s) with the tor network. But I want to
share more bandwidth with the tor network.
But on my server are running also other services. Because of this I want to
ask here, if it?s possible that a linux guru can write a little QoS script
for me with ?tc filters?.
I need two different classes for traffic shaping.
Low prio: For the tor service, which is running on port 443
High prio: For all the other ports
I thank you for the reply

@_date: 2010-01-15 23:14:46
@_author: Matias Meier 
@_subject: AW: QoS and Tor on Ubuntu 9.10 
Hi Roger.
Thank you for the fast reply.
But the link to that script isn't working...
Does the link work for you?
-----Urspr?ngliche Nachricht-----
Von: owner-or-talk at freehaven.net [mailto:owner-or-talk at freehaven.net] Im
Auftrag von Roger Dingledine
Gesendet: Freitag, 15. Januar 2010 23:07
An: or-talk at freehaven.net
Betreff: Re: QoS and Tor on Ubuntu 9.10
You're in luck!
See item  at
for a pointer to Mike's "Linux-based QoS script".
Alas, our new https interface for git is still under construction,
so in the mean time, an easy place to find the script is
contrib/linux-tor-prio.sh in your Tor tarball.
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body. To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2010-01-16 20:59:34
@_author: Matias Meier 
@_subject: AW: AW: QoS and Tor on Ubuntu 9.10 
I settet up QoS (IP based) with this script.
Is this OK?
Status looks like this:
root at speed:~/tor-0.2.1.21/contrib# ./linux-tor-prio.sh status
qdisc pfifo_fast 0: root bands 3 priomap  1 2 2 2 1 2 0 0 1 1 1 1 1 1 1 1
 Sent 5483735587264 bytes 111772203 pkt (dropped 56760, overlimits 0 requeues 230423592)
 rate 0bit 0pps backlog 0b 0p requeues 230423592
Cannot find device "imq0"
Cannot find device "imq0"
RTNETLINK answers: Operation not supported
Dump terminated
Cannot find device "imq0"
Chain TORSHAPER-OUT (1 references)
    pkts      bytes target     prot opt in     out     source               destination
     421   115153 MARK       all  --  any    any     gbz01-fo3.fusa.be    anywhere            MARK xset 0x15/0xffffffff
 3185563 4123247862 MARK       all  --  any    any     anywhere             anywhere            mark match 0x0 MARK xset 0x14/0xffffffff
-----Urspr?ngliche Nachricht-----
Von: owner-or-talk at freehaven.net [mailto:owner-or-talk at freehaven.net] Im Auftrag von Andrew Lewman
Gesendet: Freitag, 15. Januar 2010 23:55
An: or-talk at freehaven.net
Betreff: Re: AW: QoS and Tor on Ubuntu 9.10

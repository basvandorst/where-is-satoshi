
@_date: 2012-10-01 12:08:27
@_author: David Goulet 
@_subject: [tor-talk] Tor exit node IPv6 
Hash: SHA512
Hi everyone,
I'm looking to run a Tor exit node but IPv6 only.
Anyone do/did that and got useful information about that?
I don't know the state of the Tor network using IPv6. Is there some
statistics somewhere about the number of nodes (or estimation) ? I
can't find anything on metrics.torproject.org.
Thanks everyone!

@_date: 2012-10-01 12:23:02
@_author: David Goulet 
@_subject: [tor-talk] Tor exit node IPv6 
Hash: SHA512
Oh well that answers it! :)
I would really love to contribute more code to Tor but it's... like
anything else...... a time issue :).
However, I can surely help test the bridges in the meantime!
Roger Dingledine:

@_date: 2012-10-04 09:44:39
@_author: David Goulet 
@_subject: [tor-talk] News from Iran 
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512
NotDashEscaped: You need GnuPG to verify this message
Just a quick note on China and IPsec.
Less than a month or so, I know and confirmed that a certain company
inside China still uses Cisco IPsec to communicate with their outside
division (EU). I can't name the company here but it is a big one. I
worked on that project a while ago and checked recently with a
colleague which confirmed me that the tunnel is sill in operation.
The question now is if it has ties with the government for that kind
of services or not. (bribe, influence, .... that I don't know).
andrew at torproject.is:

@_date: 2013-08-15 14:59:52
@_author: David Goulet 
@_subject: [tor-talk] torsocks/usewithtor only for .onion? 
I guess that could be an option useful to add to torsocks for that. As of now,
with the current version of torsocks (1.3.x), you can't.
We could add something like "torsocks --only-onion" ... ?
Moritz Bartl:

@_date: 2013-08-24 16:36:36
@_author: David Goulet 
@_subject: [tor-talk] Torsocks 2.0.0-rc1 release 
Greetings everyone!
Two months ago I sent an email [1] to the tor-dev mailing list explaining some
important issues with torsocks. I proposed myself to do a complete rewrite for
the reasons detailed in the email.
I've released today the first release candidate for a 2.0.0 version.
Package: I'm asking the community for feedbacks, testing, code review, optimization
design and/or anything useful to help improve the project (even correcting the
mistakes or improving any comments). The TODO file in the repository contains
some needed features but that are not critical to the project for a beta release.
Hopefully, with your help, we will be able to replace the current version with a
better one, more tested, more hardened and more portable!... and maybe with a
more meaningful name :).
What is really needed right now is OS X and BSD testers. I did my best to only
use POSIX standard and making sure that libc calls are the same on all platforms
but I was not able to test it on other OS other than Linux so they might some
issues. There is *no* Windows support but again that would be amazing if someone
could port it.
Again, please contribute and help this very useful tool getting better! I
encourage you all to use tor-dev mailing list for any development issues. I'm
also on IRC in  as "dgoulet". You can also find me on OFTC, freenode and
indymedia servers.
Big thanks to everyone! Using it is testing it! :)
[1]

@_date: 2013-06-17 16:15:28
@_author: David Goulet 
@_subject: [tor-talk] "Torifier" for Windows 
I've been working on a re-engineering of torsocks recently and I would really
like to support Windows natively! However, since I'm far from a Win. developer,
some important portability issues need to be address.
On *nix system we LD_PRELOAD the program thus hijacking the necessary symbols to
make sure all your TCP and DNS traffic goes through Tor. On Windows, I'm a bit
clueless on how to proceed but for that I'm really looking for contributors to
help. :)
A goal of mine would be to have a "right click" on a program's icon feature,
point to "Use with Tor" and launch the application with torsocks.
If anyone is interested in helping with torsocks and Windows, that would be
really great!

@_date: 2013-11-05 16:08:33
@_author: David Goulet 
@_subject: [tor-talk] [RELEASE] Torsocks 2.0.0-rc2 
Yah that's an issue that needs also to be discussed. Right now, this
version of torsocks breaks the compatibility with the configuration
file. I thought of keeping the old one but then I just told myself that
considering a complete rewrite, let's take the opportunity to change
that conf. file and do it right (and more Tor centric). It might not
have been a good idea in the end but I'll let the community judge that
and it's totally possible to revert that.
In terms of new naming, I would personally *love* that but we have to be
careful with package that depends on torsocks and one comes into mind,
"parcimonie". So, if we decide that a new name is a good idea, packaging
needs to consider the transition and possible breakage.

@_date: 2013-10-23 06:19:02
@_author: David Goulet 
@_subject: [tor-talk] [RELEASE] Torsocks 2.0.0-rc2 
There is a patch pending to be merged for i386 support that needs to be
tested. The libc syscall values is kind of tricky on Linux x86. Feel
free to help and test it :).
https:/ /github.com/dgoulet/torsocks/issues/11
Also, any issue with that torsocks version, please open a ticker to the
github bug tracker since this code is not part of the torproject yet.

@_date: 2013-09-02 14:17:13
@_author: David Goulet 
@_subject: [tor-talk] [RELEASE] Torsocks 2.0.0-rc2 
Greetings everyone!
After a week or so, the release candidate 2 is now out after receiving various
contributions for BSD and OS X support.
A quick note. Please use the Github bug tracker for any issues and *not*
trac.torproject.org. Until this code base is accepted as a potential replacement
for the old version, please use the current repository issue tracker.
Here is the ChangeLog:
2013-09-02 torsocks 2.0.0-rc2
    * Fix: remove FAQ file from Makefile
    * Fix: remove out of date and inaccurate FAQ
    * Tests: add connection object unit test
    * Fix: Improve README file
    * Tests: add onion pool subsystem unit test
    * Use extern for tsocks_libc_* in torsocks.h
    * Define LIBC_SYSCALL_ for OS X
    * Make sure __darwin__ is defined
    * Fix: explicitly ignore fileno return value
    * Use AC_CHECK_FUNC rather than AC_LINK_IFELSE.
    * Find out if we really need libdl.
    * Define LIBC_SYSCALL_ for FreeBSD.
    * Use SYS_ from .
    * Include  for AF_INET*.
    * Use getsockname(2) for finding out socket address family
Please continue to test, review and contribute it! :)
Tarball: Big thanks to all contributors for that release!

@_date: 2014-04-04 18:40:43
@_author: David Goulet 
@_subject: [tor-talk] [RELEASE] Torsocks 2.0.0-rc7 
Hi everyone!
This is the release candidate 7 for torsocks 2.x. Nothing major, fixes
and some code refactoring went in.
From this point on, the upstream torsocks git[1] is now updated with
that new code in the master branch but no stable release yet. With that,
my github repository will become a mirror for a while but I will close
the issue tracker after I move all the issues to the tpo trac.
I will update the list next week on the current status of torsocks and
what's next about this project.
Here is the change log for this version.
2014-04-04 torsocks 2.0.0-rc7
    * Fix: fix NULL dereference on error
    * Fix: memory leak in connect error path
    * Delete old source directory
    * Fix: nullify constant that might be undefined
    * Refactor the connect() code flow for clarity
    * Tests: add connect() test
    * Tests: add socket() test
    * Fix: socketpair() denied for INET[6] socket
    * Fix: socket() type check SOCK_STREAM
    * Fix: add autogen.sh to installation procedures
    * Fix: change TSOCKS_LOOPBACK bitness
    * Fix: support kfreebsd for mmap()
Again, as usual, and forever! *please* code review, test and most
importantly report any issues. Contribution ftw! :)
Thanks to everyone!
Git: (mirror: Github tarball: TPO Tarball: (sig: [1]

@_date: 2014-08-11 12:59:20
@_author: David Goulet 
@_subject: [tor-talk] [RELEASE] Torsocks 2.0.0 stable 
Hi everyone!
Following the discussion of bug  this is the *stable* release 2.0.0
for torsocks. Nothing major went in since -rc7, see the change log below.
2014-08-11 torsocks 2.0.0
    * Fix: compilation issue on Debian kfreebsd-i386
    * Fix: add LICENSE file to repository
    * Fix: add compilation requirements to README.md
Again, as usual, and forever! *please* code review, test and most importantly
report any issues. Contribution ftw! :)
Thanks to everyone!
Git: Tarball: (sig: [1]

@_date: 2014-07-02 11:57:39
@_author: David Goulet 
@_subject: [tor-talk] OTFC IRC issues - new Tor friendly IRC network? 
Irssi has a special way of resolving DNS query. It spwans a different
process to resolve and then sends back the result to the main thread
that connects to the server.
Using an onion address with irssi and torsocks is not possible at the
moment because we need a shared memory region between processes to
handle the "DNS resolution" of .onion.
I have a patch for that in a dev. branch but it's highly experimental
for now and for some reason does not work on OS X.
Once we have a stable 2.0 released, I will give it more work so it can
handle multi process DNS resolution.

@_date: 2014-03-03 21:27:33
@_author: David Goulet 
@_subject: [tor-talk] [RELEASE] Torsocks 2.0.0-rc4 
Hi everyone!
After a big code review from Nick and help from a lot of people
contributing and testing, this is the release candidate 4 for the new
Hopefully this is the last stretched before pushing this effort upstream
but for that we need help with code/documentation review (again) and of
course more and more testing!
Multiple Signed-off on the code would be great so please go at it, ask
questions, contribute! and let's make this new Torsocks awesomer! :)
Some pointers on critical part of the code.
--> src/lib/connect.c and close.c
--> src/lib/getaddrinfo.c and gethostbyname.c
--> src/lib/torsocks.c
Also see the configuration file that has changed.
--> doc/torsocks.conf
If you are on OS X or/and BSD, please help make it work on those
platforms. It's quite easy to break compatibility thus help make sure we
didn't break it up :).
Tarball: Big thanks to all!

@_date: 2014-03-17 14:59:20
@_author: David Goulet 
@_subject: [tor-talk] [RELEASE] Torsocks 2.0.0-rc5/6 
Hi everyone!
Here is the release candidate 5 *and* 6 for Torsocks 2.x. Unfortunately,
right after the release 5, I've noticed a critical issue that made the
new allow inbound option misbehaved quite badly so I'm immediately
releasing rc6 containing that fix. Basically, you can ignore rc5 if you
prefer. Sorry for that!
A new option has been introduced to allow inbound connections (that were
previously blocked in rc4).
The torsocks.conf new option is "AllowInbound 0|1" set to 0 by default
meaning listen/accept is *blocked* for remote connections only so the
localhost is *alway* allowed. This fixes the "ssh -L/-D" use cases to
open a listening socket. Again, *by default* any localhost socket will
work so this example out of the box should work properly:
$ ssh -D8080 yourserver.com
You will notice a "listen: Operation not permitted" with the above
command because by default ssh tries to connect to IPv6 localhost but
fail somehow. I'm aware of the issue but will need much more
investiguation to fix but it's not a show stopper.
Furthermore, whois was not working because fclose() is used to close the
socket and torsocks was not tracking that call thus failing to see the
close connection. This was NOT triggering any leak but whois was simply
not working. This has been fixed which is an important use case for
Here is the change log for both versions.
2014-03-17 torsocks 2.0.0-rc6
    * Fix: set addr len for getsockname in accept
    * Fix: use socket fd and NOT sockaddr in accept
2014-03-17 torsocks 2.0.0-rc5
    * Fix: strict aliasing in library
    * Add fclose() support
    * Fix: add torsocks.conf option type
    * Add option to allow inbound connections
    * Fix: handle NULL node in getaddrinfo
Again, as usual, and forever! *please* code review, test and most
importantly report any issues. Contribution ftw! :)
Git: (mirror: Github tarball: TPO Tarball: (sig:

@_date: 2014-05-14 15:55:50
@_author: David Goulet 
@_subject: [tor-talk] Torsocks 2.x status report 
Hi everyone!
Took me a while to do it but there it is! For those not following
torsocks development, this is a status report of the project.
As of April 4th 2014, the release candidate 7 was released. With that
release, the main code is now on torproject.org which is now the
official upstream of the project.
My Github repository[1] is now a mirror and all tickets from the tracker
have been moved to trac.torproject.org.
We are still looking for some more Signed-off or/and Acked-by volunteers
that want to have a look at the code. With that, 2.0 stable will be
released and from there we'll start adding features! :)
Thanks to intrigeri and Lunar, you can find the new version in Debian
experimental by now.
I plan to update the Tor wiki[2][3] with that new version, create a FAQ
and a blog post explaining the Why/How of torsocks 2.0.
Finally, the old page should be close soon (hopefully) thus moving
everything back to torproject.org.
That's about it, again please test and review it to help out :).
[1] [2] [3]

@_date: 2015-12-10 14:25:01
@_author: David Goulet 
@_subject: [tor-talk] single entity running >36% exit probability with 5 
This morning I noticed a huge spike in the estimated exit probability
per continent graph and network capacity graph:
After a bit of investiguation turns out 3 new relays were advertising a
HUGE bandwidth.
I contacted the person (it's a known Tor researcher at NRL) and he
realized they were mis-configured advertising way too much bw. It should
be fixed soon hopefully but they are 3 real exit nodes.
However, the humongeous weights are concerning since they were very
"young" relays in the lifetime of a relay so it worth investiguating and
thinking if this is normal or maybe a bug?

@_date: 2015-02-19 10:41:07
@_author: David Goulet 
@_subject: [tor-talk] Tor over SSH (torsocks) (?) 
(So yeah I sent that a week ago and didn't notice that I used the wrong
email address for the list so here it is)
Torsocks was rewritten alost from scratch due to design issues and the
code was unmaintained since 2009. This new version is 2.0 and is now
packaged by most Linux distros.
git: Now, that effort did improved the safety of it I would say quite a bit.
I won't go in the technical details but it's better and maintained now.
That being said, know this, torsocks is a best effort, it's not a silver
bullet and it's "easy" to design an application that will bypass
torsocks. However, you can be confident with a bunch of stuff such as
ssh, wget, netcat, etc... It's extensively used with those applications
on a daily basis. Tails and Whonix for instance rely on torsocks for
some applications (note that their firewall gives them extra
protection). I know that people are using torsocks with postfix and it
works well.
I would be happy to detail technical details of torsocks if someone
would like to, maybe a blog post?

@_date: 2015-06-15 18:47:28
@_author: David Goulet 
@_subject: [tor-talk] Hidden Service Scaling Summer of Privacy Project 
FYI, we just discovered that this morning:
This has been flagged as a major issue so we hope to resolve this asap.

@_date: 2015-05-06 08:55:48
@_author: David Goulet 
@_subject: [tor-talk] 100-Foot Overview on Tor 
Indeed, according to dir-spec.txt, see section "1.4 Voting timeline",
there is an explanation. The current tor code actually randomize some of
those values to be in a specific range that is not more than 3 hours
Yes you are right. Not only that but if the first introduction point
fails (client side), the circuit is re-extended to the second intro
point and so on until it works or the the maximum limit of 7 hops is
That's maybe a bit too deep to explain in the slides so I guess 4 hops
Client <-> Intro is good enough. :)
Tom, those slides are great! Impressive job! Thanks for this.

@_date: 2015-05-27 15:19:53
@_author: David Goulet 
@_subject: [tor-talk] [RELEASE] Torsocks 2.1.0 
Hi everyone!
This is the release for version 2.1.0 of Torsocks. Special thanks to
Yawning that helped a lot with the new features, finding bugs and
providing patches! Also, thanks to all contributors and users out there
providing us with feedbacks! :)
Changes that are worth mentionning:
- Support for TCP fast open.
- AllowOutboundLocalhost option allows torsocks to connect to a
  localhost address.
- IsolatePID is a new option that will make torsocks set the SOCKS5
  username and password automatically to provide isolation on Tor side.
  You can use this with the -i,--isolate command added or
  TORSOCKS_ISOLATE_PID env. variable.
- Fix initialization phase when used with C++.
- Way less annoying warnings of syscall being denied. Most of them were
  harmless so we let them pass now.
- Multiple fixes! (see changelog below)
Here is the change log for this version.
2015-05-27 torsocks 2.1.0
    * Fix: socks5 resolve wasn't sending data correctly
    * Fix: wrong label when auth_socks5 fail
    * Move SOCKS5 auth in a seperate function
    * Send the SOCKS5 authentication for RESOLVE/RESOLVE_PTR requests.
    * Change IsolatePID password from 42 to 0
    * Add automatic per process isolation (IsolatePID)
    * Ensure that torsocks initializes itself in the presence of C++.
    * Merge remote-tracking branch 'yawning/getaddrinfo' into getaddrinfo
    * Fix: indentation in getpeername test
    * Merge remote-tracking branch 'yawning/getpeername'
    * Add support for the various inotify routines when invoked via syscall().
    * Support the eventfd2(2) syscall.
    * Support the various epoll routines when invoked via syscall().
    * Handle accept4(2) when invoked via syscall().
    * Fix getaddrinfo() to respect AI_NUMERICHOST.
    * Fix the broken getpeername() implementation.
    * Support certain Linux specific syscalls.
    * Allow TCP Fast Open clients go through tor
    * Test: support out of tree make check
    * configure.ac: avoid tests which have both -pie and -static
    * Fix error messages about setuid/setgid executables
    * Fix: switch back to a syscall whitelist scheme
    * Add AllowOutboundLocalhost.
    * Fix: syscall mmap for NetBSD
    * Fix: use getsockname instead of getsockopt to get socket family
    * Stop denying syscall() and add dangerous ones
    * Fix: typo in the listen macro declaration
    * Fix: improve getpeername to actually works
    * Fix: improve Unix socket passing detection
    * Test: add missing connection destroy
    * Test: possible double free in onion test
    * Test: fix memory leak in DNS test
    * Add accept as an accepted value through syscall()
    * Add cscope files to gitignore
Again, as usual, and forever! *please* code review, test and most importantly
report any issues. Contribution ftw! :)
Thanks to everyone!
Git: Tarball: (sig:

@_date: 2015-05-28 09:25:32
@_author: David Goulet 
@_subject: [tor-talk] [RELEASE] Torsocks 2.1.0 
What other pull requests are you talking about? There are a couple of
open tickets that need more time and thinking so I released this one
because of the amount of fixes that has been accumulating.

@_date: 2015-05-28 18:08:23
@_author: David Goulet 
@_subject: [tor-talk] [RELEASE] Torsocks 2.1.0 
Woa! I never saw those (or forgot about them?)... :(
Sorry about that, I think my github notifications go into the spam
folder for whatever reason... Also, I don't really use that repository,
I think I do push the upstream code there by default but that's about
Next time, you should use trac.torproject.org and open a ticket there
for anything you want to fix on Torsocks. I go over them before a

@_date: 2016-12-19 10:42:22
@_author: David Goulet 
@_subject: [tor-talk] Massive Bandwidth Onion Services 
Good point! To clarify here the client behavior in that case
Your tor client will add that intro point in a "failure cache" which will stay
in there for 5 minutes (yeah... possibly way too high! ticket  and then
if you have a descriptor that has *no* more usable intro points (that is they
are all in the failure cache), a fetch will be triggered on the remaining set
of HSDir you haven't lookup for a hopefully new descriptor. Then that new
descriptor intro points are checked agains that failure cache and will be used
So, in this case with 1 single intro point that fails, the client will ask
another HSDir for a new descriptor and so on...
More comment below.
Fun fact, I believe this is a bug....
0 intro point is actually suppose to be allowed as it is an easy way to
"disable" your service and a valid case as well. Not only that, but the
documentation does NOT specifies anything about a lower limit...
I just opened: Ok so here is the thing. I would put some "advisory" on your setup here as
default values are changed for the descriptor.
Because of design issues in the current HS protocol, any HSDir can learn the
amount of introduction points you have meaning if you change it from the
default value, you'll increase the chances of being more identifiable as you
"don't look like the others".
Second, same occurs with modifying that RendPostPeriod from the default value
of an hour to a custom time time. It makes you a bit more noticeable because
you have a different behavior then anyone else.
(And possibly some effect of disabling LearnCircuitBuildTimeout).
Those do not lead to an "automatic deanonymization" but lets say they won't
help. However, in the case of a single onion service (just release stable few
minutes ago :D), this is really great!
Thanks Alec!

@_date: 2016-12-21 09:57:20
@_author: David Goulet 
@_subject: [tor-talk] Not comfortable with the new single-hop system 
Hi Hikki!
Thanks for your input, this is a very legitimate concern and I will try to
address it as much as I can from my Tor developer perspective.
First, we had many discussion about the naming of this configuration option
because we were quite worried that it would be too easy to make a mistake or
enable it because some configuration posted online on a pastebin was setting
it on. This is why we want with the need for _two_ options where one is VERY
obvious that you are going to lose your anonymity.
    HiddenServiceNonAnonymousMode 1
Second, once this is set, multiple things are disabled on your tor because of
safety issues. *All* client side services such as the SocksPort have to be
disabled because that option means that your _entire_ Tor instance goes into
non anonymous mode for hidden service. This is too much of a risk to let users
run client side functionnalities. Tor2Web (which I personally dislike) is
still an option for client to lose their anonymity and thus reach an hidden
service much faster but it's something you have to compile in as a safety
measure which Tor Project does not distribute compiled in.
Third, with a single onion service, you can NOT run a normal onion service on
the same tor instance again for security issues. Once you turn your tor
instance in the "non anonymous mode", it will stay that way unless you mangle
quite a few things which is NOT obvious!
You can also check in your onion service directory that this file is NOT
present "onion_service_non_anonymous" which is put there if tor is configued
for single onion service.
Now to your concern of "What if we have a bug in the code that actually makes
all new onion service become single onion service?"
To be honest, that is the uncertainty of computers and programming that will
probably never go away. It will _always_ be possible that something goes bad
in the code. We have MANY other features and functionnalities in Tor that if
they go bad, it will be worst then having your service become an onion
service. But, this is where I guess people using Tor have to trust a bit the
Tor Project that we did our best for the safety of our users which is the
number *one* priority at all time for us, period.
On a side note: With the next generation onion service (we hope by mid-2017 so
~6 months), every onion service will advertise in its descriptor that it *is*
a single onion service and we hope to make the circuit viewer in Tor Browser
show that when visiting a single onion service.
I hope this help answer some of your concerns!

@_date: 2016-12-21 13:58:42
@_author: David Goulet 
@_subject: [tor-talk] privacy of hidden services 
Quick note that our next version of onion service (v3) will mitigate this
harvesting as the HSDir and Introduction Point won't be able to learn the
onion address. But yes, currently this is a weakness in the protocol.
Wait. Rendezvous Point (RP) do *NOT* know the onion service identity unless
you do some sort of circuit fingerprinting or HSDir correlation attacks. But,
assuming not doing such an attack, RPs don't have the information. It can only
track how much traffic is going through an onion service circuit without
knowing which service it is.
But, the Introduction Point (IP) does! so it can monitor how many connections
are made to the service using the IP and identify the .onion. Although, it
won't get them all as a normal descriptor has 3 different IPs but it can
extrapolate easily.
Correct except not the RdVPoint but the Introduction Point will be different
for stealth authorization as it is a descriptor per client authorization.

@_date: 2016-12-23 09:54:03
@_author: David Goulet 
@_subject: [tor-talk] Not comfortable with the new single-hop system 
You are obviously right that _only_ the Tor code is not a "safe solution" but
this is getting into a much broader discussion of "how really to make things
safe with computers". Hardware, OSes, memory safe, etc... This will always
influenced anything with do with the tor code. FYI, I won't start it here :P.
Please keep in mind that our development team does take steps towards having
safer code here. We use generated code for our binary parsing, we use static
code analyzer, we test with ASAN, we have test network, we fuzz... I mean this
is what I meant by "you have to trust us a bit" that is we do take steps to
make it more then "we believe we do safe code". And there will ALWAYS be place
for improvement over time.
We have a project to increase the modularity of Tor which is to split
functionalities into separate processes to decrease the attack surface if one
is compromised for instance. Doing so takes _time_, huge amount of engineering
effort and _testing_ but we'll get there someday. It can't happen overnight as
Tor is not getting funding like Google can get and fire up a team of 50
engineers to pull it off.
For now, we do add features for better security, for better performance but
also to increase Tor adoptions. We do our very _best_ to make it safe but we
never claimed that we do perfect safe code (which would be a sign that you
shouldn't trust us anyway ;). And of course it is not a final solution to
In my opinion and experience, this is actually less safe. First of all, we
have to build compile time conditionals in the code which makes *any* code
base more messy, more prone to errors over time and thus less maintainable
which is a very important thing to have as developers come and goes and the
problem space of Tor is quite complex.
Second, with an "only compiled in" feature, the amount of testing that feature
will see will be MUCH less compare to anything part of the normal code base.
Yes we can improve this with better testing, better CI and yadi yadi yada but
ultimately those features don't only need to pass the "make check" but they
need to pass the test of time being used and also living next to other
subsystem in Tor. Not saying that a compiled in option prevents that but
rather won't make it better.
Third, having a compiled option does _not_ prevent any tor code bug to fuck it
up like the initial question was. Less likely *maybe* but still.
Overall, I believe that it won't make it "safer". It could maybe make the user
fuck up less and hope they don't install the "single onion daemon" because
somehow it's more intuitive? Currently, you have to edit _two_ distinct
options in torrc file, then start/restart the daemon and get a bunch of
warnings because you are running in non anymous mode which will put a pile
next to your hostname file called "onion_service_non_anonymous".

@_date: 2016-02-17 16:15:51
@_author: David Goulet 
@_subject: [tor-talk] Does Facebook Onion Work? 
Hrm, actually the subdomains are important for Facebook. They will redirect
you to the www. if omitted and since the SSL certificate is an EV wild card,
it can take anything as subdomain. So with that, they can easily regex the URL
once it arrives to the HS and send it to the right place internally using only
the subdomain.
All the languages for instance are subdomain "fr-ca.", "it-it.", "en-us.",

@_date: 2017-02-11 09:26:54
@_author: David Goulet 
@_subject: [tor-talk] Questions on the coming next-gen onion services 
The current services will still function for a while before we actually remove
the support from tor. And that "while" will be few years at least. Both
versions will live in parallel so you'll be able to have current service and
next-gen service on the same tor instance.
Currently, we do not plan to have an automatic transition to a next-gen
address so if you want to create a next-gen address for your service, you'll
have to simply configure a second service in the torrc indicating that you
want the new version. We'll be documenting that process upon release.
Good question. Onion services need basically three different type of relays,
HSDir (directory), Intro point (IP) and Rendezvous Point (RP).
The tor 0.3.0 release has the next-gen support for HSDir and IP. For the RP,
the all current relays will work with next-gen. And for IP, next-gen services
have a legacy option to use old IPs (<= 0.2.9). It has been put there for this
transition period where we expect to have unfortunately a lot more tor out
there that don't support next-gen.
What is left is the HSDir that will have to be selected based on the protocol
version advertised by the relay. So at first, there might be very few of those
so there will be a period of time before we reached what we call "network
maturity" which will allow us to switch from the current service protocol to
the next-gen for all newly created services.
This post on tor-dev@ kind of explain our intentions (but that might change
overtime of course):

@_date: 2017-05-19 08:25:20
@_author: David Goulet 
@_subject: [tor-talk] Relay 0F11F8A09B27D29EC320F74CFEF13E7BD57A434A Ban ? 
Your relay has been detected to be harvesting .onion addresses. For that
reason, we've rejected the relay from the network as this is not considered
acceptable behavior from our ethics guideline perspective.
If you are _not_ doing such activity, then I would recommend to make sure your
relay is running the intended version of tor or that it hasn't been tempered

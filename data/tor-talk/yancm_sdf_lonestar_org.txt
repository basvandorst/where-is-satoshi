
@_date: 2005-04-04 21:17:33
@_author: Gene ENonymous 
@_subject: 4/4 CVS Build - Huge Jump in Responsiveness - Just ME? 
Hey Roger,
Just a quick update...
When I recompile w/out pthreads, I get a different error, repeated alot
of times:
Apr 04 16:49:44.442 [notice] Tor 0.1.0.2-rc-cvs opening log file.
Apr 04 17:42:32.956 [warn] connection_unregister(): Error removing write
event for 56
Apr 04 17:42:32.958 [warn] connection_unregister(): Error removing read
event for 61
Apr 04 17:42:32.958 [warn] connection_unregister(): Error removing write
event for 61
  [snip about 50 like this]
Apr 04 17:42:33.940 [warn] connection_unregister(): Error removing write
event for 97
Apr 04 19:38:28.364 [warn] connection_unregister(): Error removing read
event for 60
  [snip about 75 more...]
Apr 04 19:38:29.098 [warn] connection_unregister(): Error removing write
event for 126
clarity 196 ->   date
Mon Apr  4 19:47:25 EST 2005
tor won't die with a normal kill. It takes a kill -9.
I have recompiled with pthreads and cvs update...now it just dies
outright kinda like it has been since Thursday on and off.
****Update report ****
CVS build, sync'd at 7:50PM EST on 4/4
Warning file:
Apr 04 19:59:21.484 [err] Catching signal TERM, exiting cleanly.
Apr 04 19:59:23.653 [notice] Tor 0.1.0.2-rc-cvs opening log file.
Apr 04 20:14:04.569 [err] dnsworker_main(): writing answer failed. Child
Apr 04 20:27:30.656 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 20:27:30.656 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 20:28:02.746 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 20:28:02.747 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 20:31:10.581 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 20:31:10.581 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 20:31:10.581 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 20:39:08.591 [warn] connection_dns_process_inbuf(): Bug: read data
from an idle dns worker.  Please report.
Apr 04 20:41:05.930 [err] dns.c:645: connection_dns_process_inbuf:
Assertion buf_datalen(conn->inbuf) == 5 failed; aborting.
gdb backtrace:
(gdb) bt
  0x48221feb in kill () from /usr/lib/libc.so.12
  0x48296a3f in abort () from /usr/lib/libc.so.12
  0x0806be69 in connection_dns_process_inbuf (conn=0x82f8700) at dns.c:664
  0x0805ad3c in connection_handle_read (conn=0x82f8700) at connection.c:954
  0x08071576 in conn_read_callback (fd=54, event=2, _conn=0x82f8700)
    at main.c:358
  0x481f2a8c in event_process_active () from /usr/lib/libevent.so.0
  0x481f2c35 in event_loop () from /usr/lib/libevent.so.0
  0x481f2ab6 in event_dispatch () from /usr/lib/libevent.so.0
  0x08071f7d in do_main_loop () at main.c:949
  0x0807151d in tor_main (argc=6, argv=0xbfbffba4) at main.c:1588
 0x0808327b in main (argc=6, argv=0xbfbffba4) at tor_main.c:19
 0x0804bb22 in ___start ()
I'll take pthread support out again...it will take a little while to
compile and run...I'll post what I find later.
Point of order...should I keep posting this to the or-talk list or should
I open a bug track item? (if so, suggestions on what to call it? "Crashes
in current 4/4?")
On Mon, April 4, 2005 4:29 pm, Roger Dingledine said:

@_date: 2005-04-24 13:53:46
@_author: yancm@sdf.lonestar.org 
@_subject: Bug: Expiring a dns resolve that's still pending. Forgot to cull  
Hi Roger, Nick, et. al.
This bug is still with me with the new Tor 0.1.0.4-rc
CVS build.
I managed to update my libevent to 1.0c, but I still get
a bunch of the messages;
 Bug: Expiring a dns resolve that's still pending. Forgot to cull it?
Then after a while (1-10 hours) the process seems to just
lock up (no longer seems to route traffic), without actually crashing.
I'm running under NetBSD 2.0_Stable...i386
I started a flyspray entry on this bug a few weeks back
and never heard back from you...
How can I help you track it down?
I can always just turn off the PTHREAD_CREATE switch, but this seems
to increase resource utilization...I'd like to get this back
to normal...

@_date: 2005-04-26 16:29:33
@_author: yancm@sdf.lonestar.org 
@_subject: Bug: Expiring a dns resolve that's still pending. Forgot to     
Following some post 0.1.0.4-rc updates yesterday from CVS
I received the following crash this AM:

@_date: 2005-04-26 21:04:21
@_author: yancm@sdf.lonestar.org 
@_subject: Bug: Expiring a dns resolve that's still pending. Forgot to  
Hi Roger,
I just saw a bunch of CVS changes, but I'll wait until later
tonight to install and relaunch.
Since you don't think you have fixed it, I'll wager it didn't
go away by itself...I'll do a loglevel capture, compress that
and put the link on my website and send the link to you and Nick.
Though since it's just a link, it probably wouldn't hurt to send
it to the list...
Unfortunately the crash interval (if it actually crashes -
sometimes it just hangs) is rather random, but maybe we'll get lucky!

@_date: 2005-04-27 16:58:40
@_author: yancm@sdf.lonestar.org 
@_subject: Bug: Expiring a dns resolve that's still pending. Forgot to     
Hi Roger,
The tagline still doesn't say 0.1.0.5-rc, but I ran the overnight CVS
and collected the debug log (22M, compressed via gzip to < 2M)
and also collected a gdb bt full crash output.
debug log is at: gdb bt full is at: Any feedback/suggestions appreciated.

@_date: 2005-04-04 09:04:43
@_author: Gene ENonymous 
@_subject: 4/4 CVS Build - Huge Jump in Responsiveness - Just ME? 
Hey tor dev's,
I just updated my install of cvs (which seemed to be pretty broken since
Friday btw... and I have noticed a HUGE jump in responsiveness. For the
first time since I have been using tor, my tor proxied web browsing seems
almost unproxied speed. Is it just me or did you folks find something?
Anyway, COOOL!

@_date: 2005-04-05 22:15:01
@_author: Gene ENonymous 
@_subject: 4/4 CVS Build - Huge Jump in Responsiveness - Just ME? 
Hey Nick,
I tried to compile CVS no-pthreads and the compile dies thusly:
  Making all in or
  if gcc -DHAVE_CONFIG_H -I. -I. -I../..      -g -O2 -Wall -g -O2 -MT
    dirserv.o -MD -MP -MF ".deps/dirserv.Tpo" -c -o dirserv.o dirserv.c;
    then mv -f ".deps/dirserv.Tpo" ".deps/dirserv.Po"; else rm -f
    ".deps/dirserv.Tpo"; exit 1; fi
  dirserv.c: In function `directory_remove_unrecognized':
  dirserv.c:448: error: parse error before "ent"
  *** Error code 1
  Stop.
  make: stopped in /usr/local/src/tor-curr/src/or
  *** Error code 1
  Stop.
  make: stopped in /usr/local/src/tor-curr/src
  *** Error code 1
  Stop.
  make: stopped in /usr/local/src/tor-curr
  *** Error code 1
  Stop.
  make: stopped in /usr/local/src/tor-curr
---end compile crash ----------------
Tried pthreads on and it still dies at the same place.
I run NetBSD 2.0_stable
I'm not sure how to tell you what pthread version I have.
It seems to be part of gcc 3.3.3? I did a "strings" on
libpthread.a and in it, pthread.c had this entry:
  $NetBSD: pthread.c,v 1.33.2.1 2004/08/30 10:01:22 tron Exp $
don't know if that is useful...can you tell me how to check
version of pthreads?
On Tue, April 5, 2005 7:47 pm, Nick Mathewson said:

@_date: 2005-04-05 22:26:38
@_author: Gene ENonymous 
@_subject: 4/4 CVS Build - Huge Jump in Responsiveness - Just ME? 
Hey nick,
I run NetBSD 2.0_stable
I'm not sure how to tell you what pthread version I have.
It seems to be part of gcc 3.3.3? I did a "strings" on
libpthread.a and in it, pthread.c had this entry:
  $NetBSD: pthread.c,v 1.33.2.1 2004/08/30 10:01:22 tron Exp $
don't know if that is useful...can you tell me how to check
version of pthreads?

@_date: 2005-04-05 22:42:48
@_author: Gene ENonymous 
@_subject: 4/4 CVS Build - Huge Jump in Responsiveness - Just ME? 
Sorry Nick,
Kinda tired and distracted...
Strings trick on libevent.a gave me nothing...
the first two lines of event.h are:
  /*      $NetBSD: event.h,v 1.2 2003/06/13 04:11:31 itojun Exp $ */
  /*      $OpenBSD: event.h,v 1.4 2002/07/12 18:50:48 provos Exp $*/
First two lines of event.c are:
  /*      $NetBSD: event.c,v 1.3 2003/06/13 04:11:31 itojun Exp $ */
  /*      $OpenBSD: event.c,v 1.2 2002/06/25 15:50:15 mickey Exp $*/
Otherwise, same question, how do I check the version?
PS So far, no warnings for no-pthreads tor cvs...I'll report in in the AM.
On Tue, April 5, 2005 10:29 pm, Nick Mathewson said:

@_date: 2005-04-06 06:01:44
@_author: Gene ENonymous 
@_subject: 4/4 CVS Build - Huge Jump in Responsiveness - Just ME? 
Ok Nick,
It ran all night, still works and did NOT generate any warnings with
the no-pthread build using last nights CVS source. So far so good!
This morning I see you have a whole bunch of CVS commits.
I will rebuild no-pthread synced to CVS @ 0600 EST 4/6/05...
PS If you can tell me how to figure out which libevent I have
I'll be glad to tell you!?!?
On Tue, April 5, 2005 7:47 pm, Nick Mathewson said:

@_date: 2005-04-04 15:10:27
@_author: Gene ENonymous 
@_subject: 4/4 CVS Build - Huge Jump in Responsiveness - Just ME? 
Yeah, I'm using it on my server clarity that's been running
for a while now. I sync to CVS once or twice per day and rebuild
- I "make install" if there are changes that are picked up by make.
Apparently this AM's build, while fast is unstable. I received the
following backtrace from a crash about 4 hours after build/launch this AM:
  0x48221feb in kill () from /usr/lib/libc.so.12
  0x48296a3f in abort () from /usr/lib/libc.so.12
  0x0806be65 in connection_dns_process_inbuf (conn=0x81d7d00) at dns.c:664
  0x0805ad3c in connection_handle_read (conn=0x81d7d00) at connection.c:954
  0x08071556 in conn_read_callback (fd=66, event=2, _conn=0x81d7d00)
    at main.c:358
  0x481f2a8c in event_process_active () from /usr/lib/libevent.so.0
  0x481f2c35 in event_loop () from /usr/lib/libevent.so.0
  0x481f2ab6 in event_dispatch () from /usr/lib/libevent.so.0
  0x08071f5d in do_main_loop () at main.c:949
  0x080714fd in tor_main (argc=6, argv=0xbfbffba4) at main.c:1588
 0x0808325b in main (argc=6, argv=0xbfbffba4) at tor_main.c:19
 0x0804bb22 in ___start ()
Also had the following error log...
Error Messages:
Apr 04 08:34:53.583 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 08:34:53.584 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 09:19:13.740 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 09:19:13.740 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 09:19:13.741 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 09:19:13.741 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 09:19:22.337 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 09:20:36.901 [warn] connection_tls_finish_handshake(): Identity key
not as expected for router claiming to be 'LongBeachThreatLab'
Apr 04 09:34:47.489 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 09:34:47.490 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 09:34:47.490 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 09:34:47.490 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 09:34:47.490 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 09:37:22.728 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 10:07:39.750 [warn] connection_tls_finish_handshake(): Identity key
not as expected for router claiming to be 'LongBeachThreatLab'
Apr 04 10:12:17.887 [warn] connection_tls_finish_handshake(): Identity key
not as expected for router claiming to be 'LongBeachThreatLab'
Apr 04 10:16:56.173 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 10:16:56.173 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 10:16:56.173 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 10:16:56.173 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 10:22:25.177 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 10:22:25.177 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 10:22:25.177 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 10:27:23.944 [warn] connection_dns_process_inbuf(): Bug: read data
from an idle dns worker.  Please report.
Apr 04 10:32:24.204 [err] dns.c:645: connection_dns_process_inbuf:
Assertion buf_datalen(conn->inbuf) == 5 failed; aborting.
Apr 04 12:15:37.719 [notice] Tor 0.1.0.2-rc-cvs opening log file.
Apr 04 13:13:17.693 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 13:13:17.694 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 13:23:35.808 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 13:23:35.808 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 13:23:35.808 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 13:30:08.353 [err] dnsworker_main(): writing answer failed. Child
Apr 04 13:41:25.349 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 13:41:25.349 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 13:48:46.211 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 13:48:46.211 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 13:48:46.211 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 13:48:46.211 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 13:48:46.211 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 13:55:09.124 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
Apr 04 13:55:09.124 [warn] purge_expired_resolves(): Bug: Expiring a dns
resolve that's still pending. Forgot to cull it?
On Mon, April 4, 2005 2:39 pm, Roger Dingledine said:

@_date: 2005-04-07 12:22:08
@_author: Gene ENonymous 
@_subject: 4/4 CVS Build - Huge Jump in Responsiveness - Just ME? 
Hi Nick,
I finally created a flyspray entry for this.
At present, no-pthreads seems to be running fine.
I tried yes-pthreads this morning and it stopped responding
after a couple hours...I just rebuilt no-pthreads and am
letting that run.
On Tue, April 5, 2005 10:42 pm, Gene ENonymous said:

@_date: 2005-04-04 16:56:54
@_author: Gene ENonymous 
@_subject: 4/4 CVS Build - Huge Jump in Responsiveness - Just ME? 
Hey Roger,
I did not start seeing this error in my logs (now that I look back) until
April 3, 9AM EST CVS Build. Before that, the log file is pretty clean
although CVS builds from 3/30 to 4/3 were unstable at best.
I've recompiled and launched...I'm on my way home and will
be back online in a couple hours or so...will report back
if the pthread hack below produces less "Bug:" messages.
On Mon, April 4, 2005 4:29 pm, Roger Dingledine said:

@_date: 2005-02-12 20:43:04
@_author: Gene ENonymous 
@_subject: CVS Current Crash Report 
While tor CVS current is running, I really like it! It consumes much
less resources than the stable branch.
Unfortunately for me it is not stable and consistantly crashes in 1-2 hours.
(of course after it crashes it consumes precious few resources <8-)
I'm running NetBSD 1.6.2(Stable) on a P-166 w/80M Ram
I have captured a debug-debug log file here (warning - about 3M):
I do not see any explanation for the crash in this file or the warnings
file I typically capture. What ever it is it seems to stop abruptly.
I have not been able to locate any core files (suggestions on how to
find or facilitate their creation welcome).
Additional information will be gladly provided, please tell me whay you
need and how to get it.
I periodically (daily) run a CVS update on the current branch, hoping my
problem will be solved, but so far, no joy.
Side Note: Have you considered inserting some sort of CVS update date stamp
in the version string? This would address issues of whether bug reports
are really from the most recent sources.

@_date: 2005-02-13 13:29:19
@_author: Gene ENonymous 
@_subject: CVS Current Crash Report (update 02/13) 
New cvs version today so I rebuilt. Same issue.
I have updated the debug log:
Thanks for the suggestion to use tor --version --version.
I have prepended it to the debug log.

@_date: 2005-02-16 03:46:16
@_author: Gene ENonymous 
@_subject: CVS Current Crash Report (update 02/13) 
New cvs version today so I rebuilt. Same issue.
I have updated the debug log:
Thanks for the suggestion to use tor --version --version.
I have prepended it to the debug log.
I also found the tor.core file and the backtrace gives:
  0x10000 in ?? ()
  0x4818373b in lh_retrieve () from /usr/lib/libcrypto.so.1
  0x48173496 in OBJ_NAME_get () from /usr/lib/libcrypto.so.1
  0x4816fce0 in EVP_get_digestbyname () from /usr/lib/libcrypto.so.1
  0x48164d01 in ASN1_verify () from /usr/lib/libcrypto.so.1
  0x481637d7 in X509_verify () from /usr/lib/libcrypto.so.1
  0x481466a5 in X509_verify_cert () from /usr/lib/libcrypto.so.1
  0x48146239 in X509_verify_cert () from /usr/lib/libcrypto.so.1
  0x480f3d78 in ssl_verify_cert_chain () from /usr/lib/libssl.so.2
  0x480eecc8 in ssl3_accept () from /usr/lib/libssl.so.2
 0x480ecd49 in ssl3_accept () from /usr/lib/libssl.so.2
 0x480fa9f9 in SSL_accept () from /usr/lib/libssl.so.2
 0x808d217 in tor_tls_handshake (tls=0x813c780) at tortls.c:515
 0x8062791 in connection_tls_continue_handshake (conn=0x813d600)
    at connection_or.c:290
 0x805c45a in connection_read_to_buf (conn=0x813d600,     max_to_read=0xbfbfda44) at connection.c:955
 0x805c30a in connection_handle_read (conn=0x813d600) at connection.c:897
 0x806ea99 in conn_read_callback (fd=23, event=2, _conn=0x813d600)
    at main.c:342
 0x808ebc7 in event_process_active ()
 0x808ed88 in event_loop ()
 0x808ebf0 in event_dispatch ()
 0x806f971 in do_main_loop () at main.c:1027
 0x8070469 in tor_main (argc=1, argv=0xbfbfdba8) at main.c:1652
 0x808105c in main (argc=1, argv=0xbfbfdba8) at tor_main.c:18
 0x804bf40 in ___start ()

@_date: 2005-02-17 14:06:32
@_author: Gene ENonymous 
@_subject: CVS Current Crash Report (update 02/17) 
New cvs version today so I rebuilt. Same issue.
I have updated the debug log:
I have prepended "tor --version --version" output to the debug log.
The tor.core file backtrace gives:
  0x4819b225 in BN_num_bits () from /usr/lib/libcrypto.so.1
  0x48165be9 in RSA_size () from /usr/lib/libcrypto.so.1
  0x8088175 in crypto_pk_keysize (env=0x8102920) at crypto.c:586
  0x8089239 in crypto_pk_private_hybrid_decrypt (env=0x8102920,     to=0x815fb6c "", from=0x815fe4c "??\017)VII", fromlen=186, padding=60002,     warnOnFailure=0) at crypto.c:837
  0x8070b5e in onion_skin_server_handshake (
    onion_skin=0x815fe4c "??\017)VII", private_key=0x8102910,     prev_private_key=0x8102920,     handshake_reply_out=0x815fd70 "O\016\216.?j\226\024a\016O(?"FO?'T_\002jOAg\035\037r\207\223O:?Ua\222\025??\206\216\025Ul\031Af[1r\177?'\235\235\204}??\005)?m!\207y?\004AI\2332wyO?a_\005Fr?\206A?x?\206     key_out=0x815fe04 "?\036\003Y?\027\037?Oo\232`?\t\207\e??yk3I_p?u\r\031\001I>\216\034\\E\e*A\r\027??1Y\006\023].k?*?d?2D?r\217??\2064\233?$l6\\?\017???\017)VII", key_out_len=72) at onion.c:208
  0x8064bd0 in cpuworker_main (data=0x8138a30) at cpuworker.:248
  0x8084b9a in tor_pthread_helper_fn (_data=0x8138a40) at compat.c:653
  0x8092728 in pth_spawn_trampoline ()
  0x8099279 in pth_mctx_set_bootstrap ()
  0x8099209 in pth_mctx_set_trampoline ()
 0x815ffa0 in ?? ()
 0x1f in ?? ()
I'm running NetBSD 1.6.2(Stable) on a P-166 w/80M Ram
I do not see any explanation for the crash in this file or the warnings
file I typically capture. What ever it is it seems to stop abruptly.

@_date: 2005-02-26 03:23:33
@_author: Gene ENonymous 
@_subject: Scripts to generate stat graphs? 
I was wondering if the rrdtools (and perl/whatever) scripts that generate
the stats graphs on:  are available for hacking?
I'd like to get some finer grained stats for my node and I think I've
figured out how to extract the data I need from the directory file, but
it would save me some time if I could look at those scripts since someone's
already written the parser.
Maybe the author would put them in the contrib folder of current?
Much thanks,
PS On a side note, it seems all stats get reset to zero when I restart
tor after a cvs update build.
Is this expected behavior?

@_date: 2005-01-22 23:30:05
@_author: Gene ENonymous 
@_subject: Crash Logs for tor CVS Current built 1-21-2005 
I rebuilt tor again 1/21/2005 21:10 EST and have had two crashes so far. Are these crash logs at all useful and is this the place to send them?
Here's the log output:
    Jan 21 21:10:29.673 [notice] Tor 0.1.0.0-alpha-cvs opening log file.
    Jan 21 22:54:21.964 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
    Jan 21 22:57:25.990 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
    Jan 21 23:17:55.531 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
    Jan 21 23:50:47.312 [err] dnsworker_main(): writing answer failed. Child exiting.
    Jan 22 10:25:22.611 [notice] Tor 0.1.0.0-alpha-cvs opening log file.
    Jan 22 11:37:44.537 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
    Jan 22 11:49:02.205 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
    Jan 22 11:52:25.353 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
    Jan 22 12:25:47.557 [warn] router_resolve(): Could not resolve address for router 'ShadyService' at 0.0.0.0
    Jan 22 12:25:47.558 [warn] router_resolve_routerlist(): Couldn't resolve router 'ShadyService' at '0.0.0.0'; not using
    Jan 22 12:29:58.514 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
    Jan 22 12:34:49.278 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
    Jan 22 12:40:18.483 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
    Jan 22 12:47:37.018 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
    Jan 22 13:12:14.614 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
    Jan 22 13:25:55.820 [warn] router_resolve(): Could not resolve address for router 'ShadyService' at 0.0.0.0
    Jan 22 13:25:55.821 [warn] router_resolve_routerlist(): Couldn't resolve router 'ShadyService' at '0.0.0.0'; not using
    Jan 22 14:21:50.497 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
    Jan 22 14:25:48.099 [warn] router_resolve(): Could not resolve address for router 'ShadyService' at 0.0.0.0
    Jan 22 14:25:48.100 [warn] router_resolve_routerlist(): Couldn't resolve router 'ShadyService' at '0.0.0.0'; not using
    Jan 22 15:25:47.873 [warn] router_resolve(): Could not resolve address for router 'ShadyService' at 0.0.0.0
    Jan 22 15:25:47.873 [warn] router_resolve_routerlist(): Couldn't resolve router 'ShadyService' at '0.0.0.0'; not using
    Jan 22 15:43:13.466 [err] dnsworker_main(): writing answer failed. Child exiting.
    Jan 22 18:12:38.811 [notice] Tor 0.1.0.0-alpha-cvs opening log file.

@_date: 2005-01-24 16:25:29
@_author: Gene ENonymous 
@_subject: Crash Logs for tor CVS Current built 1-21-2005 
OK, I built and am running 0.0.9.3 now. I'd be glad to capture debug logs
if and when it becomes useful (current or any other branch). If I get
a crash in 0.0.9.3, I'll turn on debug log and hope it crashes again
and submit. Otherwise, I'll just run it as a stable server node.

@_date: 2005-01-20 19:12:56
@_author: Gene ENonymous 
@_subject: Compile problems on CVS Current under NetBSD 
Not sure if I should discuss this here or developer...
I am not really developing...
I had no problems compiling tor 0.0.9.2, but saw it was suggested
cvs current fixed some cpu usage issues I am seeing. I pulled the
tree down OK, but when I run ./autogen.sh I get the following:
    ./autogen.sh
    /usr/pkg/share/aclocal/pth.m4:43: warning: underquoted definition of _AC_PTH_ERROR
      run info '(automake)Extending aclocal'
      or see     /usr/pkg/share/aclocal/pth.m4:55: warning: underquoted definition of _AC_PTH_VERBOSE
    /usr/pkg/share/aclocal/pth.m4:61: warning: underquoted definition of AC_CHECK_PTH
    checking for a BSD-compatible install... /usr/bin/install -c
    checking whether build environment is sane... yes
    checking for gawk... no
    checking for mawk... no
    checking for nawk... no
    checking for awk... awk
    checking whether make sets $(MAKE)... yes
    checking build system type... i386-unknown-netbsdelf1.6.2
    checking host system type... i386-unknown-netbsdelf1.6.2
    checking for gcc... gcc
    checking for C compiler default output file name... a.out
    checking whether the C compiler works... yes
    checking whether we are cross compiling... no
    checking for suffix of executables...     checking for suffix of object files... o
    checking whether we are using the GNU C compiler... yes
    checking whether gcc accepts -g... yes
    checking for gcc option to accept ANSI C... none needed
    checking for style of include used by make... GNU
    checking dependency style of gcc... gcc
    checking whether make sets $(MAKE)... (cached) yes
    checking for ranlib... ranlib
    checking for library containing socket... none required
    checking for library containing gethostbyname... none required
    checking for library containing event_loop... no
    configure: error: Libevent library not found. Tor requires libevent to build.
At first I thought the only problem was a lack of libevent.
I installed version 0.9 as that is the default in the NetBSD packages collection.
(Though this was not required for teh previous versions apparently)
Anyway I installed it, but it didn't help.
I took a look at the following lines in /usr/pkg/share/aclocal/pth.m4 per the
above warning messages:
     43 AC_DEFUN(_AC_PTH_ERROR, [dnl
     44 AC_MSG_RESULT([*FAILED*])
     45 define(_ac_pth_line,dnl
     46 "+------------------------------------------------------------------------+")
     47 echo " _ac_pth_line" 1>&2
     48 cat <>/  /' 1>&2
     49 $1
     50 EOT
     51 echo " _ac_pth_line" 1>&2
     52 undefine(_ac_pth_line)
     53 exit 1
     54 ])
     55 AC_DEFUN(_AC_PTH_VERBOSE, [dnl
     56 if test ".$verbose" = .yes; then
     57     AC_MSG_RESULT([  $1])
     58 fi
     59 ])
     60 dnl #   the user macro
     61 AC_DEFUN(AC_CHECK_PTH, [dnl
     62 dnl
     63 dnl #   prerequisites
     64 AC_REQUIRE([AC_PROG_CC])dnl
     65 AC_REQUIRE([AC_PROG_CPP])dnl
     66 dnl
     67 PTH_CPPFLAGS=''
     68 PTH_CFLAGS=''
     69 PTH_LDFLAGS=''
     70 PTH_LIBS=''
     71 AC_SUBST(PTH_CPPFLAGS)
     72 AC_SUBST(PTH_CFLAGS)
     73 AC_SUBST(PTH_LDFLAGS)
     74 AC_SUBST(PTH_LIBS)
     75 dnl #   command line options
     76 AC_MSG_CHECKING(for GNU Pth)
     77 _AC_PTH_VERBOSE([])
     78 AC_ARG_WITH(pth,dnl
     79 [  --with-pth[=ARG]        Build with GNU Pth Library  (default=]ifelse([$2],,yes,$2)[)],dnl
     80 ,dnl
     81 with_pth="ifelse([$2],,yes,$2)"
     82 )dnl
     83 AC_ARG_WITH(pth-test,dnl
     84 [  --with-pth-test         Perform GNU Pth Sanity Test (default=]ifelse([$3],,yes,$3)[)],dnl
     85 ,dnl
     86 with_pth_test="ifelse([$3],,yes,$3)"
     87 )dnl
I couldn't tell you if this is OK or not.
Any pointers appreceiated.

@_date: 2005-01-20 20:06:17
@_author: Gene ENonymous 
@_subject: Compile problems on CVS Current under NetBSD 
I should have been more clear, I got the same error message.
I'll buy that, but I have a pretty vanilla installation of NetBSD 1.6.2
and other packages have autoconf'd just fine. tor 0.0.9.2 autoconf's
fine... Have tor current taken things a new direction that just clashes?
I'm a little better than the average code monkey, but not deeply
experienced with managing configuration and build across platforms.
I grock, C, perl and shell scripts pretty good, but any pointers or
suggestions of things to try would be appreciated.
For instance, what version of autoconf do I need? I've got 2.59...
Again, any help appreciated.

@_date: 2005-01-21 01:50:52
@_author: Gene ENonymous 
@_subject: Compile problems on CVS Current under NetBSD 
OK, I'm a dunce, I had everything I needed installed, but
I forgot to set my CFLAGS include and library paths properly...
nothing deep, just a mistake... Please ignore me now.
I updated again, built, installed and am now running current!
At first glance CPU use does look better.

@_date: 2005-01-21 18:25:26
@_author: Gene ENonymous 
@_subject: Error reporting on cvs current (built 2005-01-20) 
I'm unsure how much error reporting you want from folks like me running current
so here's my first crash report log. If this is not useful or there is a way to
improve usefulness please let me know. I updated from CVS, rebuilt and restarted my server. If this is not the correct
approach let me know.
If i don't crash how often should I update and rebuild?
   Jan 20 20:39:03.578 [notice] Tor 0.1.0.0-alpha-cvs opening log file.
   Jan 20 20:39:18.199 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 20 20:39:18.201 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 20 20:39:18.711 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '62.116.124.106').
   Jan 20 20:59:18.623 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 20 20:59:19.521 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 20 20:59:20.200 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '62.116.124.106').
   Jan 20 21:19:16.412 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 20 21:19:16.415 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 20 21:19:17.434 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '62.116.124.106').
   Jan 20 21:39:19.739 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 20 21:39:19.748 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 20 21:39:22.743 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '62.116.124.106').
   Jan 20 21:59:17.731 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 20 21:59:17.757 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 20 21:59:20.152 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '62.116.124.106').
   Jan 20 22:19:19.705 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 20 22:19:20.029 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '62.116.124.106').
   Jan 20 22:19:21.114 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 20 22:39:21.371 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 20 22:39:21.375 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 20 22:57:18.620 [warn] onion_skin_server_handshake(): Couldn't decrypt onionskin: client may be using old onion key
   Jan 20 22:57:18.621 [warn] cpuworker_main(): onion_skin_server_handshake failed.
   Jan 20 22:57:18.623 [warn] connection_cpu_process_inbuf(): decoding onionskin failed. Closing.
   Jan 20 22:58:30.964 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
   Jan 20 22:59:22.148 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 20 22:59:22.154 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 20 23:19:23.055 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 20 23:19:23.058 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 20 23:39:24.842 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 20 23:39:26.855 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 20 23:59:25.305 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 20 23:59:25.330 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 21 00:06:20.215 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
   Jan 21 00:19:30.218 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 21 00:19:30.222 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 21 00:27:14.228 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
   Jan 21 00:39:27.118 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 21 00:39:27.554 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 21 00:59:28.736 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 21 00:59:30.241 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 21 01:19:32.798 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 21 01:19:32.816 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 21 01:24:57.197 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
   Jan 21 01:39:30.166 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 21 01:39:30.622 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 21 01:59:30.800 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 21 01:59:30.806 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 21 02:19:32.210 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 21 02:19:33.602 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 21 02:33:02.446 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
   Jan 21 02:39:33.052 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 21 02:39:33.169 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 21 02:39:56.008 [warn] connection_tls_finish_handshake(): Peer didn't send a cert! Closing.
   Jan 21 02:59:34.120 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.114').
   Jan 21 02:59:35.414 [warn] connection_dir_client_reached_eof(): Unable to decompress HTTP body (server '18.244.0.188').
   Jan 21 03:13:50.924 [err] dnsworker_main(): writing answer failed. Child exiting.

@_date: 2005-06-10 17:15:43
@_author: yancm@sdf.lonestar.org 
@_subject: New Log Warnings - cvs 0.1.1.0-alpha 
This may be due to my routing bittorrent tracker traffic through tor,
or it might be due to a CVS change. I've seen a lot of CVS action on
my recent ~1-2x daily builds and I recently started routing some bittorrent
tracker traffic through tor.
Any guidance on what this means?
Here's the warnings:
Jun 10 06:00:00.657 [notice] Tor 0.1.1.0-alpha-cvs opening log file.
Jun 10 06:00:01.502 [warn] rend_service_intro_has_opened(): Unrecognized
service ID aaaaaaaaaaaaaaaa on introduction circuit 62370
Jun 10 06:00:01.568 [warn] rend_service_intro_has_opened(): Unrecognized
service ID aaaaaaaaaaaaaaaa on introduction circuit 20511
Jun 10 06:01:00.284 [warn] In buffers: 100112 used/1105920 allocated (65
Jun 10 06:01:00.284 [warn] In rephist: 27838 used.
Jun 10 06:02:00.926 [warn] In buffers: 0 used/593920 allocated (65 conns).
Jun 10 06:02:00.926 [warn] In rephist: 27838 used.
Jun 10 06:03:00.714 [warn] In buffers: 424276 used/1699840 allocated (73
Jun 10 06:03:00.714 [warn] In rephist: 27838 used.
Jun 10 06:04:00.331 [warn] In buffers: 0 used/614400 allocated (68 conns).
Jun 10 06:04:00.331 [warn] In rephist: 27874 used.
Jun 10 06:05:00.019 [warn] In buffers: 0 used/626688 allocated (68 conns).
Jun 10 06:05:00.019 [warn] In rephist: 27946 used.
Jun 10 06:06:00.976 [warn] In buffers: 0 used/643072 allocated (71 conns).
Jun 10 06:06:00.977 [warn] In rephist: 28090 used.
Jun 10 06:07:00.644 [warn] In buffers: 0 used/602112 allocated (67 conns).
Jun 10 06:07:00.644 [warn] In rephist: 28126 used.
Jun 10 06:08:00.281 [warn] In buffers: 0 used/585728 allocated (65 conns).
Jun 10 06:08:00.281 [warn] In rephist: 28126 used.
Jun 10 06:09:00.889 [warn] In buffers: 0 used/585728 allocated (65 conns).
Jun 10 06:09:00.889 [warn] In rephist: 28126 used.
Jun 10 06:10:00.516 [warn] In buffers: 0 used/593920 allocated (66 conns).
Jun 10 06:10:00.516 [warn] In rephist: 28162 used.
Jun 10 06:11:00.143 [warn] In buffers: 36224 used/1134592 allocated (69
Jun 10 06:11:00.144 [warn] In rephist: 28198 used.
Jun 10 06:12:00.811 [warn] In buffers: 36224 used/700416 allocated (63
Jun 10 06:12:00.811 [warn] In rephist: 28198 used.
Jun 10 06:13:00.478 [warn] In buffers: 36224 used/741376 allocated (64
Jun 10 06:13:00.479 [warn] In rephist: 28234 used.
Jun 10 06:14:00.106 [warn] In buffers: 337056 used/1810432 allocated (66
Jun 10 06:14:00.106 [warn] In rephist: 28234 used.
Jun 10 06:15:00.793 [warn] In buffers: 36224 used/737280 allocated (60
Jun 10 06:15:00.793 [warn] In rephist: 28270 used.
Jun 10 06:16:00.401 [warn] In buffers: 232782 used/1675264 allocated (63
Jun 10 06:16:00.401 [warn] In rephist: 28306 used.
Jun 10 06:17:00.038 [warn] In buffers: 0 used/643072 allocated (63 conns).
Jun 10 06:17:00.038 [warn] In rephist: 28342 used.
Jun 10 06:18:00.135 [warn] In buffers: 0 used/610304 allocated (59 conns).
Jun 10 06:18:00.135 [warn] In rephist: 28342 used.
Jun 10 06:19:00.773 [warn] In buffers: 0 used/651264 allocated (66 conns).
Jun 10 06:19:00.773 [warn] In rephist: 28342 used.
Jun 10 06:20:00.400 [warn] In buffers: 538617 used/2228224 allocated (71
Jun 10 06:20:00.400 [warn] In rephist: 28414 used.
Jun 10 06:21:00.057 [warn] In buffers: 0 used/618496 allocated (65 conns).
Jun 10 06:21:00.057 [warn] In rephist: 28414 used.
Jun 10 06:22:00.775 [warn] In buffers: 0 used/610304 allocated (64 conns).
Jun 10 06:22:00.775 [warn] In rephist: 28450 used.
Jun 10 06:23:00.362 [warn] In buffers: 0 used/606208 allocated (62 conns).
Jun 10 06:23:00.362 [warn] In rephist: 28450 used.
Jun 10 06:24:00.020 [warn] In buffers: 306159 used/1200128 allocated (63
Jun 10 06:24:00.020 [warn] In rephist: 28456 used.
Jun 10 06:25:00.667 [warn] In buffers: 129911 used/1167360 allocated (60
Jun 10 06:25:00.668 [warn] In rephist: 28488 used.
Jun 10 06:26:00.265 [warn] In buffers: 0 used/634880 allocated (62 conns).
Jun 10 06:26:00.265 [warn] In rephist: 28524 used.
Jun 10 06:27:00.893 [warn] In buffers: 0 used/634880 allocated (62 conns).
Jun 10 06:27:00.893 [warn] In rephist: 28524 used.
Jun 10 06:28:00.511 [warn] In buffers: 0 used/610304 allocated (62 conns).
Jun 10 06:28:00.511 [warn] In rephist: 28524 used.
Jun 10 06:29:00.128 [warn] In buffers: 0 used/626688 allocated (64 conns).
Jun 10 06:29:00.129 [warn] In rephist: 28524 used.
Jun 10 06:30:00.766 [warn] In buffers: 0 used/610304 allocated (63 conns).
Jun 10 06:30:00.767 [warn] In rephist: 28524 used.
Jun 10 06:31:00.563 [warn] In buffers: 293062 used/1691648 allocated (68
Jun 10 06:31:00.564 [warn] In rephist: 28560 used.
Jun 10 06:32:00.232 [warn] In buffers: 0 used/602112 allocated (62 conns).
Jun 10 06:32:00.232 [warn] In rephist: 28560 used.
Jun 10 06:33:00.879 [warn] In buffers: 112831 used/1122304 allocated (62
Jun 10 06:33:00.880 [warn] In rephist: 28560 used.
Jun 10 06:34:00.507 [warn] In buffers: 0 used/577536 allocated (59 conns).
Jun 10 06:34:00.507 [warn] In rephist: 28560 used.
Jun 10 06:35:00.365 [warn] In buffers: 0 used/618496 allocated (64 conns).
Jun 10 06:35:00.365 [warn] In rephist: 28696 used.
Jun 10 06:36:00.993 [warn] In buffers: 0 used/659456 allocated (69 conns).
Jun 10 06:36:00.993 [warn] In rephist: 28808 used.
Jun 10 06:37:00.660 [warn] In buffers: 0 used/626688 allocated (66 conns).
Jun 10 06:37:00.661 [warn] In rephist: 28808 used.
Jun 10 06:38:00.938 [warn] In buffers: 0 used/634880 allocated (67 conns).
Jun 10 06:38:00.938 [warn] In rephist: 28808 used.
Jun 10 06:39:00.576 [warn] In buffers: 0 used/614400 allocated (65 conns).
Jun 10 06:39:00.576 [warn] In rephist: 28808 used.
Jun 10 06:40:00.213 [warn] In buffers: 0 used/622592 allocated (66 conns).
Jun 10 06:40:00.214 [warn] In rephist: 28844 used.
Jun 10 06:41:00.791 [warn] In buffers: 0 used/614400 allocated (65 conns).

@_date: 2005-06-08 02:20:15
@_author: yancm@sdf.lonestar.org 
@_subject: Anonymous/Nonymous Communication Coexisting? 
OK, this is probably a duuumb question, but...
Is it possible to have a single application, such as a web browser
or a p2p client behave normally with normal url's but use
tor if the url is an xyz.onion address? Or is it everything
or nothing?
If I should have been able to find this, I apologize...I looked
around in the docs and help before writing this note...didn't
see anything that looked useful.

@_date: 2005-06-09 17:44:26
@_author: yancm@sdf.lonestar.org 
@_subject: How to Use Azureus with Tor Hidden Service Bittorrent Tracker 
What follows are somewhat generic instructions for coexistant
conections to tor and public bittorrent trackers with support for
private ip based trackers maintained as well.
In my opinion, it would be helpful if one could choose to
proxy only tor (.onion) tracker addresses within Azureus,
but with Privoxy (see below) this can be accomplished.
My set-up is atypical in that I sit behind a NetBSD (*nix)
firewall, so I can't describe everything in firsthand detail,
but I can describe the steps. Azureus has made this easy
as of version 2.3.0.0 or higher.
1) Get the tor client from:
      There are versions for win32, Mac OS and Linux
   plus source if you are on something else and you want
   to run on it.
2) Get privoxy from:
    then "download" which takes you to:
   3) Install and configure tor/privoxy to work with a web browser:
      Hint: You know it's working if you enter the following
   url in your web browser and you actually find a web page:
   * NOTE: I assume you have tor listening on localhost:9050 *
* and privoxy listening on localhost:8118 in the          *
* discussion that follows.                                *
4) If you got this far, you know you had to insert a line
   in the privoxy "config" file similar to the following:
    forward-socks4a / localhost:9050 .
   This line instructs privoxy to route all requests through
   the tor network.
   This is a highly anonymous configuration, but it has at least
   two drawbacks. For web browsing, if you route all of your pages
   through tor, the latency can be very annoying if you don't need
   anonymity. For Azureus tracker traffic, anonymity on the tracker
   and the associated latency doesn't seem to be that big of an
   issue (I'm still testing...no problems so far) BUT if you use
   private trackers that use IP for entry and statistics
   identification, you cannot route that tracker's traffic
   through tor.
   So here are two alternative config lines for privoxy
   that you may want to consider.
   Option 1:
   Replace
    forward-socks4a / localhost:9050 .
   with
    forward / .
    forward-socks4a .onion localhost:9050 .
   What does this do?: Only routes .onion addresses
   through the tor network.
   Impact: Minimal, if you route your tracker traffic and
   web browser through privoxy with this ruleset, you can
   use the anonymous tracker(s) along side normal trackers.
   Option 2:
   Replace
    forward-socks4a / localhost:9050 .
   with
    forward-socks4a / localhost:9050 .
    forward .private.tracker1.com .
    forward .private.tracker2.com .
    forward .private.tracker3.com .
   What does this do?: Routes everything except private tracker
   (or web sites I suppose) through the tor network.
   Impact: Big, if you route your tracker traffic and
   web browser through privoxy with this ruleset,
   you can use the anonymous tracker(s) along side normal
   trackers, but everything, except private tracker addresses,
   gets anonymized through tor. Latency is high which may be
   undesireable for casual web browsing, but seems to have
   little impact on Azureus getting tracker statistics.
   I've chosen Option 2, but I use a seperate web browser
   (Internet Exploder) to run through privoxy and use my
   main web browser (Mozilla) without privoxy for most web browsing.
5) Configure Azureus to use privoxy as it's tracker
   communications proxy. Open Tools->Options, I think it
   opens to Connections scroll down and enter you privoxy
   information. Here's what mine looks like:
      While you are here. If you have not done so already,
   change your "Incoming TCP Listen Port" to something
   other than the default, since many isp's block or throttle
   this back. Ideally choose a random port between 30000 and 55000
   - PLEASE don't just copy mine!
  **Don't forget to adjust your firewall(s) to reflect
    this change.
You'll need to restart Azureus (be sure to stop any active torrents if you
are on a ratio site so your uploads get credited to you). When you come
back up, you should be able to use anonymous trackers that use the tor
(onion) network!

@_date: 2005-05-03 17:31:03
@_author: yancm@sdf.lonestar.org 
@_subject: 5/3 CVS Compile Error 
I tried to compile yesterdays CVS version and I received the following
compile error...
Making all in or
if gcc -DHAVE_CONFIG_H -I. -I. -I../..    -I/usr/pkg/include
-I/usr/X11R6/include  -g -O2 -Wall -g -O2 -MT dns.o -MD -MP -MF
".deps/dns.Tpo" -c -o dns.o dns.c;  then mv -f ".deps/dns.Tpo"
".deps/dns.Po"; else rm -f ".deps/dns.Tpo"; exit 1; fi
dns.c: In function `dnsworker_main':
dns.c:725: error: too many arguments to function `connection_free_all'
*** Error code 1
make: stopped in /home/yancm/torsrc/src/or
*** Error code 1
make: stopped in /home/yancm/torsrc/src
*** Error code 1
make: stopped in /home/yancm/torsrc
*** Error code 1
make: stopped in /home/yancm/torsrc

@_date: 2005-05-03 18:38:25
@_author: yancm@sdf.lonestar.org 
@_subject: 5/3 CVS Compile Error 
Yes, still broken. I gave it 12 hours or so before reporting.
I get no new CVS updates and still no compile. I just tried CVS
update again just now to be sure.

@_date: 2005-05-22 23:39:55
@_author: yancm@sdf.lonestar.org 
@_subject: Problems with cvs? 
The last couple of days I have been getting error messages when I try to
update my source tree from cvs. I received connection refused for a while,
but now I am getting:
cvs update: Updating .
cvs update: failed to create lock directory for `/home/or/cvsroot/tor'
(/home/or/cvsroot/tor/ Permission denied
cvs update: failed to obtain dir lock in repository `/home/or/cvsroot/tor'
cvs [update aborted]: read lock failed - giving up
Is it just me?

@_date: 2006-08-16 17:47:09
@_author: yancm@sdf.lonestar.org 
@_subject: subversion server ill? 
I dunno if this the apropriate place to mention this, but...
I just started getting an error when I try to update from the
subversion server:
-> svn up
svn: PROPFIND request failed on '/svn/tor/trunk'
svn: PROPFIND of '/svn/tor/trunk': 302 Found (
Web interface looks OK?.?.
Also - I may have asked this in the past, but when do you want
to hear about build and operational issues from fresh subversion
FYI - my svn based builds from trunk have not been working properly for
about 5-6 days... I have been unable to get on the network through
tor. (The trunk would not even build over the weekend.)
All the best to you agents of anonymity!

@_date: 2006-08-16 18:26:25
@_author: yancm@sdf.lonestar.org 
@_subject: subversion server ill? 
Yes, this works. But...
I'm running  version 1.3.2 on NetBSD 2.1_Stable.
For some reason though I get the following when I try to update:
clarity 9 -> svn up
Error validating server certificate for '
 - The certificate is not issued by a trusted authority. Use the
   fingerprint to validate the certificate manually!
Certificate information:
 - Hostname: tor-svn.freehaven.net
 - Valid: from Aug 16 20:51:46 2006 GMT until Aug 13 20:51:46 2016 GMT
 - Issuer: tor-svn.freehaven.net
 - Fingerprint: 11:34:5c:b1:c4:12:76:10:86:ce:df:69:3d:06:a9:57:fa:dc:c9:29
(R)eject, accept (t)emporarily or accept (p)ermanently? p
At revision 7070.
clarity 10 -> !!
svn up
Error validating server certificate for '
 - The certificate is not issued by a trusted authority. Use the
   fingerprint to validate the certificate manually!
Certificate information:
 - Hostname: tor-svn.freehaven.net
 - Valid: from Aug 16 20:51:46 2006 GMT until Aug 13 20:51:46 2016 GMT
 - Issuer: tor-svn.freehaven.net
 - Fingerprint: 11:34:5c:b1:c4:12:76:10:86:ce:df:69:3d:06:a9:57:fa:dc:c9:29
(R)eject, accept (t)emporarily or accept (p)ermanently? permanently
At revision 7070.
clarity 11 -> !!
svn up
Error validating server certificate for '
 - The certificate is not issued by a trusted authority. Use the
   fingerprint to validate the certificate manually!
Certificate information:
 - Hostname: tor-svn.freehaven.net
 - Valid: from Aug 16 20:51:46 2006 GMT until Aug 13 20:51:46 2016 GMT
 - Issuer: tor-svn.freehaven.net
 - Fingerprint: 11:34:5c:b1:c4:12:76:10:86:ce:df:69:3d:06:a9:57:fa:dc:c9:29
(R)eject, accept (t)emporarily or accept (p)ermanently?

@_date: 2006-08-16 18:44:49
@_author: yancm@sdf.lonestar.org 
@_subject: subversion server ill? 
Thanks, that was the clue I needed...I first ran subversion from
a sudo shell which put a root owned ~/.subversion in my home directory.
I'll give you 2 reasons I don't go to a subversion forum:
1) I never used subversion until you guys, somewhat quietly,
   switched from cvs to subversion. (ie. it's YOUR falt)
2) You guys are helpful!
PS This build is letting me connect...I'm OK again with svn 7070!

@_date: 2006-08-28 09:20:36
@_author: yancm@sdf.lonestar.org 
@_subject: Current subversion 8270 dies on NetBSD 3_Stable 
I built from subversion source today v8270.
Build went OK, but it dies on launch:
Aug 28 07:50:16.780 [notice] Tor 0.1.2.1-alpha-dev opening log file.
Aug 28 07:50:16.878 [err] util.c:162: _tor_strdup: Assertion s failed;
I run NetBSD 3_Stable and do have the latest libevent.

@_date: 2006-09-14 18:23:33
@_author: yancm@sdf.lonestar.org 
@_subject: Now tor does not work at all... 
What OS/Rev Level and hardware are you running on?
I had a similar problem on NetBSD, I had to increase fdlimit
in the kernel...as I recall...

@_date: 2006-09-14 18:48:59
@_author: yancm@sdf.lonestar.org 
@_subject: Now tor does not work at all... 
I cannot explain why it seemed to work and then stopped?!?!
I know that I had this problem maybe a year ago and
I finally had to build a kernel with these options:
# RLIMIT Options
# more info in param.c and a tech-kern article
options         MAXFILES=4096
options         NOFILE=4096
Now when I type:
# limit
cputime      unlimited
filesize     unlimited
datasize     131072 kbytes
stacksize    2048 kbytes
coredumpsize unlimited
memoryuse    251268 kbytes
memorylocked 83756 kbytes
maxproc      160
openfiles    4096
sbsize       unlimited
Notice the open files limit...
Are you able to build your own kernel?
I'm actually tracking 3_Stable on my production i386 box...

@_date: 2006-09-18 17:18:31
@_author: yancm@sdf.lonestar.org 
@_subject: Using Gmail (with Tor) is a bad idea 
I'm not quite sure what you are saying?
Are you saying that some info gets leaked if you use
unencrypted http to transfer mail with gmail?
Why not just switch the connection to https? If you do this
manually, it seems all communication with gmail is encrypted?
I do use gmail with tor. I do enable https before I transfer any
significant data. Though the message list sometimes gets displayed
before I switch over... Sometimes I cannot establish an https connection
until after I have the http session going.
Code is good. Comments and summary mean more to me.

@_date: 2006-09-18 18:16:59
@_author: yancm@sdf.lonestar.org 
@_subject: Using Gmail (with Tor) is a bad idea 
OK, is this specific to Google? Or are there other free/nonfree
email services that are immune to this behavior? If so, please
What about ecommerce or other secured sites?

@_date: 2010-01-05 01:42:05
@_author: yancm@sdf.lonestar.org 
@_subject: git.torproject.org? 
Is git.torproject.org down for everybody? Or am I special?
Just curious if there is an uptime ETA or something...
Just noticed my daily updates failed 2 days in a row...
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

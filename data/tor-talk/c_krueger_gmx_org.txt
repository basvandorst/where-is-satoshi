
@_date: 2005-08-19 04:05:03
@_author: =?ISO-8859-15?Q?Carsten_Kr=FCger?= 
@_subject: bad security setting for win32 tor service 
the default install of win32 tor service is bad.
tor -install create the service that it runs with SYSTEM-privileges
(highest possible privilege level on win32 (more than administrator))
Nobody would run tor daemon on *nix with root-privileges.
short document about Service account permissions:
Tor works fine as user LocalService.
tor.exe didn't find:
C:\Documents and Settings\LocalService\Application Data\Tor\torrc
c:\Program Files\Tor\torrc
I defined the log directory in torrc this way:
Log notice file C:\Documents and Settings\LocalService\Application Data\Tor\notices.log
and changed the account for the service:
(0. "tor -install" if tor is not installed)
1. run "regedit /s tor_service.reg" to merge this regfile silent
2. stop tor-service "sc stop tor"
3. start tor-service again "sc start tor" and it runs within the localservice account

@_date: 2005-08-19 16:12:57
@_author: =?ISO-8859-15?Q?Carsten_Kr=FCger?= 
@_subject: bad security setting for win32 tor service 
Hallo Nick,
NM> Can you explain to me
NM> what it would do for Tor's storage, though?  J Random User shouldn't
NM> be able to read Tor's private keys
What's the name of the file with the private key?
When it is created?
If it is created at the same directory[1] as the file "cached-directory", it's
safe. The default ACL for this is read for Administrators only.
[1] C:\Documents and Settings\LocalService\Application Data\Tor\

@_date: 2005-08-19 21:17:39
@_author: =?ISO-8859-15?Q?Carsten_Kr=FCger?= 
@_subject: bad security setting for win32 tor service 
BM> encrypted using xp EFS
that's pretty useless for a service-account, the password is somewere
on the harddisk
BM> Is running it as LocalService better?
I'm not sure.
You should delete the membership of the Tor-account in the group
"Users". Then the Toraccount has the same rights as the User Guest.
run: lusrmgr.msc
net LOCALGROUP Users  /DELETE
BM> I also had concern with the
BM> service running under the System account, and want to give the
BM> account running the tor service as little permission as possible,
BM> even sandbox it to just the tor directory if possible.
me, too.
The Local Service account is a special, built-in account that is similar
to an authenticated user account. The Local Service account has the same
level of access to resources and objects as members of the Users group.
This limited access helps safeguard your system if individual services
or processes are compromised. Services that run as the Local Service
account access network resources as a null session with no credentials.
PS: It would be nice if this change goes to the next version of
stable. Running the service with SYSTEM-privileges is a high security

@_date: 2005-08-23 15:08:34
@_author: =?ISO-8859-15?Q?Carsten_Kr=FCger?= 
@_subject: Length of tor circuit? 
is it possible to configure the length of the tor circuit (number of
nodes that are chained)

@_date: 2005-08-23 23:18:36
@_author: =?ISO-8859-15?Q?Carsten_Kr=FCger?= 
@_subject: bad security setting for win32 tor service 
Hallo Nick,
yes, but this is better than compromising the hole system :)
yes, but I think this should be well tested. As a quickfix ->

@_date: 2005-08-30 05:11:01
@_author: =?ISO-8859-15?Q?Carsten_Kr=FCger?= 
@_subject: IRC zombie controllers 
first: Steve Gibson is an idiot
second: http to irc-gateways exists


@_date: 2006-02-22 10:14:26
@_author: Jens Lechtenboerger 
@_subject: Anonymity questions 
Dear Tor users,
Section 6.1 of the TorFAQ at
states privacy problems that Tor solves, and Section 6.7 states
possible attacks.  I'm trying to understand some details.
Let's say Alice talks to Bob through Tor.  The attack by Murdoch and
Danezis (Low-Cost Traffic Analysis of Tor) allows to identify the
Tor nodes through which Alice's traffic is routed.  At first I
thought: So what?
First, Alice and Bob shouldn't care if the attacker knows all
intermediate nodes as long as neither of them is identified.
Second, when using cascades with predetermined nodes (such as JAP)
the nodes are trivially known to the attacker.  So in what way is
anonymity affected by the attack?
Here is what I'm thinking know.  The question is where Alice, Bob,
and the Tor nodes are located relatively to each other (as in
"Location Diversity in Anonymity Networks" by Feamster and
Dingledine, but with a coarser granularity than Autonomous Systems
1. If Alice and Bob can be observed by Eve, then Eve can trace
their messages before entering and after leaving the Tor net based
on timing and message characteristics (without knowing anything
about the Tor nodes in between).  How likely is Eve's existence?
I guess that if you are in the US then NSA is your Eve, which means
that your communications anywhere within the US will be traced.
(Btw, I once read that BGP routing tables are set up to route as
much non-US traffic through US routers for tapping purposes as
possible.  Unfortunately, I can't find the source any more.  Any
Similarly, for me living in the EU, pretty soon all my traffic
within Europe might be traceable by law enforcement.  (Yesterday the
Council of the EU adopted the data retention directive passed by the
EU parliament last December.)
If Eve mounts the attack to identify the Tor nodes then she can
considerably reduce the volume of traffic she has to analyze when
looking for Alice and Bob: Alice sends traffic into Tor with a known
Tor destination IP address while Bob receives from a known Tor
source IP address.
2. What about traffic from Alice in the EU to Bob outside the EU,
say the US?  Assuming that US and EU do not cooperate in tracing
Alice and Bob, the EU can still trace them using the attack by
Murdoch and Danezis *if* Alice's exit node is in the EU: They
correlate the traffic leaving Alice with the traffic leaving the
exit node to find Bob's IP address.
3. With three Tor nodes in each circuit, we must neither have the
first and the third node both in the EU nor both in the US because
*all* such Tor communications are traceable: A non-Tor source IP
address in any Tor packet points to Alice, the packet's destination
IP address is the first Tor node.  The first node's output is
addressed to the second Tor node.  Now, Eve waits for traffic from
the second Tor node to enter the third node (which she monitors),
which outputs traffic to Bob.
4. Further ways to exploit the attack?
In view of (2.), EU citizens might want to restrict their ExitNodes
to those outside the EU.  Then, in view of (3.), EntryNodes might be
chosen inside the EU (Alice's own Tor server?).
Does that make sense as a general guideline?
How to choose the second tor node and a "good" exit node?
What is not clear to me is the following: Is it better to chose Tor
nodes such that packets between them traverse as few ASs a possible
(because each of them can monitor traffic) or do longer routes
provide more anonymity?  If short routes are better, then nodes in
ASs on the path from the entry node to Bob (according to BGP routing
information) are good candidates, which would also reduce latency.
How often would this be possible right now?
Thanks in advance for your insights

@_date: 2006-02-23 22:05:19
@_author: Jens Lechtenboerger 
@_subject: Anonymity questions 
Actually, I didn't mean to start a discussion about adding features
to Tor (like padding/GRE/IPsec).  I was just hoping to get a little
bit of feedback on how to choose Tor nodes to gain the most in view
of a published attack.
Sadly, there wasn't any.
In addition, I think that the TorFAQ was not too precise about the
"global adversary".  As I wrote in my initial email, if you happen
to contact a server observed by your ISP or if you choose an exit
node observed by your ISP then your ISP "is" a global adversary.
I updated Sections 6.1 and 6.7 of the TorFAQ to clarify this.
More feedback this time? :-)

@_date: 2006-02-24 14:40:34
@_author: Jens Lechtenboerger 
@_subject: Anonymity questions 
Something seems to be missing after "but extending ... functionality".
Can we hope for this functionality in the near future or not?
Let's call it a research opportunity.

@_date: 2006-02-24 14:45:47
@_author: Jens Lechtenboerger 
@_subject: Anonymity questions 
In Germany the plan is to use EU data retention to go after *every*
type of illegal Internet activity.  This may include free movies
appearing accidentally on your disk ;)
That's my guess as well.  Thanks

@_date: 2006-02-25 22:09:10
@_author: Jens Lechtenboerger 
@_subject: Tor server problem with dynamic IP addresses 
Hi there,
I've got trouble running a tor server with dynamic IP addresses,
after the initial IP address has changed.
When starting tor, the debug messages show resolve_my_address() with
the correct new IP address.  After 20 minutes I get a message saying
that my server "has not managed to confirm that its ORPort is
 and my local file cached-directory still
show an old IP address.

@_date: 2006-02-26 16:12:24
@_author: Jens Lechtenboerger 
@_subject: Tor server problem with dynamic IP addresses 
I'm using tor v0.1.0.17.  Actually, today it's working again.
I don't know why...

@_date: 2006-02-27 11:25:16
@_author: Jens Lechtenboerger 
@_subject: Tor server problem with dynamic IP addresses 
Now I'm facing a different problem.
Tor server says: Self-testing indicates your ORPort is reachable
from the outside. Excellent. Publishing server descriptor.
However, starting a tor client with my own server as EntryNodes
gives a warning from add_nickname_list_to_smartlist() that my server
is "known but down".
The reason seems to be that my $HOME/.tor/cached-directory does not
get updated appropriately.  It contains an old IP address for my
server.  When deleting the file and restarting the client, it works.
(In addition, $DataDirectory/cached-directory also contains an old
IP address.)
Any ideas?


@_date: 2011-12-18 23:30:51
@_author: Matthew R 
@_subject: [tor-talk] How can I select a specific exit node? 
It appears that StrictExitNodes no longer works.  However, when I use
StrictNodes to select an exit node, this also does not appear to work.
How can I edit my torrc file to select a particular exit node?
For example:
StrictNodes 1
ExitNodes name_of_node_here

@_date: 2011-12-18 23:33:13
@_author: Matthew R 
@_subject: [tor-talk] "If you have access to certain tools, 
Wired: How much can one do with IP addresses that have been run through Tor?
SR: If you have access to certain tools, you can completely ignore Tor. You
can trap your subject?s IP address without wasting your time busting
through Tor. Without revealing too many tricks, for example, it?s easy
enough to send someone an e-mail that broadcasts location info back to a
server. Someone operating a trap website can grab Evan?s cookies and see
his entire browser history and his current IP address. With only a minimal
amount of work, you can determine where Evan is viewing a website from.
Does this make any sense?  I assume that what the PI means is that if you
send an e-mail to a non-webmail client (like Thunderbird) which does not go
via Tor, then the IP can be determined when it loads the 1x1 HTML pixel
from the website.  However, if the victim uses webmail then surely all
responses would go via Tor?
Or does he mean something else?

@_date: 2011-12-21 18:48:57
@_author: Matthew R 
@_subject: [tor-talk] How can I get Vidalia to work when I am loading Tor with 
I was having some problems so reinstalled Tor.  Now I am having new
issues.  I am using Tor 0.2.2.35, Torbutton 1.4.4.1, and Vidalia 0.2.15
under Ubuntu 10.04.
I want to use a specific torrc file.
When I boot-up, Tor runs.  I kill it then run tor -f torrc.  I can then use
Firefox with my specific settings.
However, when I try to run Vidalia, I get the errors:
Dec 21 18:37:40.314 [Warning] /var/run/tor is not owned by this user
(myname, 1000) but by debian-tor (115). Perhaps you are running Tor as the
wrong user?
Dec 21 18:37:40.314 [Warning] Before Tor can create a control socket in
"/var/run/tor/control", the directory "/var/run/tor" needs to exist, and to
be accessible only by the user account that is running Tor.
If I change the owner from debian-tor to myname then I get the error:
Dec 21 18:41:41.911 [Warning] Permissions on directory /var/run/tor are too
Dec 21 18:41:41.911 [Warning] Before Tor can create a control socket in
"/var/run/tor/control", the directory "/var/run/tor" needs to exist, and to
be accessible only by the user account that is running Tor.
There is obviously some problem with loading Tor then loading Vidalia
rather than having Vidalia load Tor.
I cannot change the torrc in Vidalia because it refuses to save and just
points to /etc/tor/torrc (which doesn't actually exist).
The ideal situation would be for me to load Vidalia which loads Tor which
loads the torrc I want.

@_date: 2011-12-29 20:25:14
@_author: Matthew R 
@_subject: [tor-talk] What is going on with /var/run/tor? 
I am becoming increasingly perplexed about my Tor setup.
Tor does not appear to run on start-up.  I assume this because I cannot see
it using ps aux | grep tor.
My torrc is in /etc/tor/torrc with user and group set as 'root'.
I run 'sudo tor' and receive the following errors:
Dec 29 20:12:55.076 [notice] Tor v0.2.2.35 (git-73ff13ab3cc9570d). This is
experimental software. Do not rely on it for strong anonymity. (Running on
Linux i686)
Dec 29 20:12:55.079 [notice] Initialized libevent version 1.4.13-stable
using method epoll. Good.
Dec 29 20:12:55.079 [notice] Opening Socks listener on 127.0.0.1:9050
Dec 29 20:12:55.079 [warn] Directory /var/run/tor does not exist.
Dec 29 20:12:55.079 [warn] Before Tor can create a control socket in
"/var/run/tor/control", the directory "/var/run/tor" needs to exist, and to
be accessible only by the user and group account that is running Tor.  (On
some Unix systems, anybody who can list a socket can conect to it, so Tor
is being careful.)
Dec 29 20:12:55.079 [notice] Closing partially-constructed listener Socks
listener on 127.0.0.1:9050
Dec 29 20:12:55.080 [warn] Failed to parse/validate config: Failed to bind
one of the listener ports.
Dec 29 20:12:55.080 [err] Reading config failed--see warnings above.
It is correct that /var/run/tor does not exist. I then create /var/run/tor
with user and group as 'root' and run 'sudo tor' again:
Dec 29 20:15:41.943 [notice] Tor v0.2.2.35 (git-73ff13ab3cc9570d). This is
experimental software. Do not rely on it for strong anonymity. (Running on
Linux i686)
Dec 29 20:15:41.948 [notice] Initialized libevent version 1.4.13-stable
using method epoll. Good.
Dec 29 20:15:41.948 [notice] Opening Socks listener on 127.0.0.1:9050
Dec 29 20:15:41.949 [warn] /var/run/tor is not owned by this user
(debian-tor, 115) but by root (0). Perhaps you are running Tor as the wrong
Dec 29 20:15:41.949 [warn] Before Tor can create a control socket in
"/var/run/tor/control", the directory "/var/run/tor" needs to exist, and to
be accessible only by the user and group account that is running Tor.  (On
some Unix systems, anybody who can list a socket can conect to it, so Tor
is being careful.)
Dec 29 20:15:41.950 [notice] Closing partially-constructed listener Socks
listener on 127.0.0.1:9050
Dec 29 20:15:41.950 [warn] Failed to parse/validate config: Failed to bind
one of the listener ports.
Dec 29 20:15:41.950 [err] Reading config failed--see warnings above.
I don't understand why I get this error because I am 'root' not
'debian-tor'.  Su-ing into root then running tor provides the same error
However, running 'tor' (without sudo) provides the following message:
Dec 29 20:18:28.270 [notice] Tor v0.2.2.35 (git-73ff13ab3cc9570d). This is
experimental software. Do not rely on it for strong anonymity. (Running on
Linux i686)
Dec 29 20:18:28.271 [warn] Could not open "/etc/tor/torrc": Permission
Dec 29 20:18:28.272 [notice] Configuration file "/etc/tor/torrc" not
present, using reasonable defaults.
Dec 29 20:18:28.274 [notice] Initialized libevent version 1.4.13-stable
using method epoll. Good.
Dec 29 20:18:28.274 [notice] Opening Socks listener on 127.0.0.1:9050
Dec 29 20:18:28.285 [notice] Parsing GEOIP file /usr/share/tor/geoip.
Dec 29 20:18:29.084 [notice] OpenSSL OpenSSL 0.9.8k 25 Mar 2009 [9080bf]
looks like it's older than 0.9.8l, but some vendors have backported
0.9.8l's renegotiation code to earlier versions, and some have backported
the code from 0.9.8m or 0.9.8n.  I'll set both SSL3_FLAGS and SSL_OP just
to be safe.
Dec 29 20:18:31.459 [notice] We now have enough directory information to
build circuits.
Dec 29 20:18:31.459 [notice] Bootstrapped 80%: Connecting to the Tor
Dec 29 20:18:32.522 [notice] Bootstrapped 85%: Finishing handshake with
first hop.
Dec 29 20:18:33.603 [notice] Bootstrapped 90%: Establishing a Tor circuit.
Dec 29 20:18:34.618 [notice] Tor has successfully opened a circuit. Looks
like client functionality is working.
Dec 29 20:18:34.618 [notice] Bootstrapped 100%: Done.
This all looks good except that it now uses "reasonable defaults" rather
than my specific torrc file.
I also have no idea why running 'tor' doesn't complain about /var/run/tor
but running 'sudo tor' does.
All I want to do is to run tor and have it load a specific torrc.  I don't
care whether I run tor in GNOME or whether I load Vidalia which then loads
tor.  At the moment, Vidalia just gives the /var/run/tor error as above.
Suggestions please?  Many thanks.

@_date: 2011-12-30 12:17:43
@_author: Matthew R 
@_subject: [tor-talk] What is going on with /var/run/tor? 
Thanks for the suggestions.  I am going to start from the beginning because
Vidalia is still weird but Tor seems OK now.
First, I removed everything: apt-get purge tor vidalia
Second, I installed as suggested here (option two) for Ubuntu lucid:
Third, debian-tor owns /var/run/tor:
drwxr-s--- 2 debian-tor debian-tor  100 2011-12-30 11:29 tor
When I run 'tor' from the command line it works:
Dec 30 11:30:45.236 [notice] Tor v0.2.2.35 (git-73ff13ab3cc9570d). This is
experimental software. Do not rely on it for strong anonymity. (Running on
Linux i686)
Dec 30 11:30:45.240 [notice] Initialized libevent version 1.4.13-stable
using method epoll. Good.
Dec 30 11:30:45.240 [notice] Opening Socks listener on 127.0.0.1:9050
Dec 30 11:30:45.503 [notice] Parsing GEOIP file /usr/share/tor/geoip.
Dec 30 11:30:46.425 [notice] OpenSSL OpenSSL 0.9.8k 25 Mar 2009 [9080bf]
looks like it's older than 0.9.8l, but some vendors have backported
0.9.8l's renegotiation code to earlier versions, and some have backported
the code from 0.9.8m or 0.9.8n.  I'll set both SSL3_FLAGS and SSL_OP just
to be safe.
Dec 30 11:30:49.144 [notice] We now have enough directory information to
build circuits.
Dec 30 11:30:49.144 [notice] Bootstrapped 80%: Connecting to the Tor
Dec 30 11:30:50.216 [notice] Bootstrapped 85%: Finishing handshake with
first hop.
Dec 30 11:30:50.737 [notice] Bootstrapped 90%: Establishing a Tor circuit.
Dec 30 11:30:51.342 [notice] Tor has successfully opened a circuit. Looks
like client functionality is working.
Dec 30 11:30:51.342 [notice] Bootstrapped 100%: Done.
I assume that this is using the torrc file in /etc/tor/torrc.
However, I want to use my own torrc.  I try 'tor -f torrc'.  This shows:
Dec 30 11:49:04.516 [notice] Tor v0.2.2.35 (git-73ff13ab3cc9570d). This is
experimental software. Do not rely on it for strong anonymity. (Running on
Linux i686)
Dec 30 11:49:04.519 [warn] The configuration option 'StrictExitNodes' is
deprecated; use 'StrictNodes' instead.
Dec 30 11:49:04.520 [notice] Initialized libevent version 1.4.13-stable
using method epoll. Good.
Dec 30 11:49:04.521 [notice] Opening Socks listener on 127.0.0.1:9050
This appears to load my torrc rather than (I assume) /etc/tor/torrc.
I then want to use Vidalia.  I follow the instructions at
The way I have managed to get Vidalia to work is as follows:
Vidalia loads Tor at /usr/sbin/tor (general tab).
I select my own "Tor configuration file" (advanced tab).
The "Data Directory" is ~/.tor (advanced tab).
What I do not understand is the "Tor Control" aspect of the "Advanced"
tab.  If I set the TCP connection (ControlPort) to 127.0.0.1: 9050 then
Vidalia works fine.
However, I am sure the default setting was "Use Unix domain socket
(ControlSocket)" with the path /var/run/tor/control (maybe I am wrong)?
Anyhow, in /var/run/tor is only one file (no control):
-rw-r----- 1 debian-tor debian-tor 32 2011-12-30 11:40 control.authcookie
My question is: should I be using the ControlPort or the ControlSocket?

@_date: 2011-10-11 16:16:27
@_author: Matthew R 
@_subject: [tor-talk] Why will the home page in Firefox load (when TorButton 
I am using TorButton 1.4.4.  It is set to be on automatically when Firefox
The way my system works is that Tor runs when Vidalia runs. I manually load
Vidalia then open Firefox.
However, I have noticed that if I do not have Vidalia running and I load
Firefox then the bookmarked home page will load.  If I try any other page I
get the "proxy server is refusing connections" error.
I delete the cache and cookies before opening Firefox.
Why will the home page load even though Vidalia (and Tor) are not running
and TorButton is running?

@_date: 2012-01-03 17:23:39
@_author: Matthew R 
@_subject: [tor-talk] What is going on with /var/run/tor? 
OK good to know.
But - returning to my Vidalia question - should I be using the ControlPort
or the ControlSocket in the Vidalia "advanced" tab.  Currently it is set
Use TCP Connection (ControlPort) 127.0.0.1: 9051.
Use Unix domain socket (ControlSocket) is unchecked.
It works fine but I am wondering if the ControlSocket should have been


@_date: 2013-12-09 04:44:40
@_author: me@rndm.de 
@_subject: [tor-talk] Globe on globe.torproject.org 
Globe is now officially hosted on the torproject servers:
The main reason for this change is that people will trust Globe more if it's hosted on the torproject servers and available via https.
As part of this change I wrote a vagrant script ( that generates a virtual machine and simplifies the requirements to develop and build Globe.
For more information and ways to contribute or browse the code see

@_date: 2013-12-24 23:52:22
@_author: Christian 
@_subject: [tor-talk] Shutting down the relay-search service by the end of 
I thought about writing a server based version of globe and think it's
not that hard to implement.
I would like to use nodejs[1] because it allows me to copy paste a huge
amount of code from the current version of globe to a javascript based
If you think nodejs is a bad idea I would appreciate other suggestions.
btw is it possible for you to provide a nodejs environment on
torproject.org ?
[1] -

@_date: 2014-02-02 13:02:07
@_author: Christian 
@_subject: [tor-talk] Shutting down the relay-search service by the end of 
I closed all the issues I mentioned earlier.
So far all features of the clientside version are working in the node
implementation. (except interactive graphs)
I deployed a version on  . Feel free to
check it out and give me some feedback.
Couple more open questions:
- should I implement a caching mechanism for detail documents (similar
to the current clientside mechanism)?

@_date: 2014-02-02 17:55:51
@_author: Christian 
@_subject: [tor-talk] Shutting down the relay-search service by the end of 
Forgot the most important one:
How should I handle different graph periods?
The current globe uses a html select and lets the user choose a period
interval that is used when plotting the graphs.
This isn't possible because we don't have JavaScript on the client.
One approach would be displaying the graphs below eachother (like atlas
The disadvantage is that with the current svg generation the server has
to start multiple requests to onionoo for each graph. (I could change
the implementation to store/share the graph request result)
Another approach would be to merge all periods into one graph. This
removes the need to select a period because the user has the best
resolution for each period. (we should increase the graph dimension in
this case)
What do you think?

@_date: 2014-01-07 13:32:39
@_author: Christian 
@_subject: [tor-talk] Shutting down the relay-search service by the end of 
sorry for the late answer.
I like this idea but don't know what the better approach would be.
Is the plan to avoid a JavaScript client side implementation as a
relay/bridge search service or just provide a fallback for users that
have JavaScript disabled?
Their using node 0.10.x with is ok for me.

@_date: 2014-01-07 14:29:22
@_author: Christian 
@_subject: [tor-talk] Shutting down the relay-search service by the end of 
The implementation by Arlo uses phantomjs ( to
render the current globe url in a headless browser and puts it inside
the  element.
If the user has JavaScript enabled the noscript element is hidden and
the browser uses the clientside JavaScript for routing, templating and
onionoo requests.
If the user has JavaScript disabled, the clientside JavaScript code will
not execute and the content of  is visible.
Arlo changed the routing behavior of Emberjs to use the history-api
which allows routing without the hashchange event (/ becomes
This means that if the user without JavaScript wants to see another view
he has to start a new requests and phantomjs renders the new page and
the server returns the html.
The user with JavaScript enabled uses the clientside templates and can
continue without a request.
In the end they both of them see the same output but the user without
JavaScript has to start a new requests if he wants to see another view.
Please correct me if I'm wrong Arlo.
I'm not sure but the phantomjs implementation requires less amount of
work to provide a JavaScript free way to search bridges and relays. We
only have to make some minor changes (expand the advances search by
default, fix fontawesome icons, ...).
Another advantage is that we can continue to use the current test/build

@_date: 2014-01-08 19:49:26
@_author: Christian 
@_subject: [tor-talk] Shutting down the relay-search service by the end of 
As far as i know it doesn't display the graphs right now.
Ok. Theoretically we could download the binary (
 ) or build it ourself (
 ).
That's what I'm currently working on. As of now, only bridge details and
graphs aren't completly ported.
If you think if it's better to use Arlos approach I can try to change
the current globe to make it more useable via phantomjs.
Btw because we can't provide interactive graphs without JavaScript I'm
building an API that uses d3js (like atlas and earlier versions of
globe), renders the graphs serverside as SVG and returns them.
This way users can link and embed SVGs for specific fingerprints using a
simple url ( like globe.torproject.org/relay/bandwidth/:fingerprint.svg
or something alike).

@_date: 2014-01-23 23:11:07
@_author: Christian 
@_subject: [tor-talk] Shutting down the relay-search service by the end of 
in the last 2 weeks I didn't had much freetime to work on it.
Today I fixed the svg rendering of relay weight/bandwidth graphs.
Main features that are missing as of now:
- bridge graphs
- advanced search
- some css changes
I created issues for these missing features.
The current repo is on github:
- repo: - issues: A couple of open questions:
How should we manage dependencies to other libraries? The problem ist
that nodejs in wheezy-backports excludes npm (the official package
manager for Node.js). There is a open bugreport but I don't know if or
when it's resolved
(possible solutions:
- include the external packages in the repository by using npm locally
and add them to git
- compile nodejs ourself
- install npm manually
I don't have access to a nodejs server. For gaining feedback and
testing the application on a remote server I could deploy globe-node
temporarily to heroku (for free). Do you think it would be OK?
Without JavaScript I can't really make a tabbed view for relay and
bridge searches.
Right now i put them on top of eachother: Does anyone knows a better solution?

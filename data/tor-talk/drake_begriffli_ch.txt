
@_date: 2007-08-16 08:44:31
@_author: Drake Wilson 
@_subject: contradicting log entries regarding ExcludeNodes 
My impression is that whenever Tor recognizes that it's connecting to an
address that is equivalent to an existing Tor node, it always adds an
extra hop to the circuit to end it at that node.  I take it that's
possibly overriding the ExcludeNodes in this case.  I might be wrong,
of course.
   ---> Drake Wilson

@_date: 2007-08-27 15:56:03
@_author: Drake Wilson 
@_subject: Has anyone had the identity revealed in Tor? 
That's a very vague question.
Suppose I'm using Tor to hide my current IP address, since I don't want
people to know that I'm actually posting something from a secret hideout
in Paraguay.  I still post my full name and telephone number, so
everyone knows that I made the post, and they can find out where I usually
live by using reverse lookup on the number, but my rivals at Foocorp never
manage to associate me with the hideout.  Have I been "caught"?
You can attach arbitrarily complicated semantics to the idea of
"identity" and what it means to have been "revealed" in this context,
so you'll need to be much clearer than that to get any reasonable answer
out.  Even then, I doubt the data are easy to get reliably, unless perhaps
there's been a case of someone being tracked down while using Tor that was
reported in major broadcast media.  If the NSA were keeping tabs on Tor
users somehow, it'd be very hard to find out.
   ---> Drake Wilson

@_date: 2007-12-15 11:45:01
@_author: Drake Wilson 
@_subject: Tor circuits entry node 
Quoth lg2005 at Safe-mail.net, on 2007-12-15 12:35:55 -0500:
You might want to look at the FAQ entry on entry guards:
   ---> Drake Wilson

@_date: 2007-12-23 16:10:20
@_author: Drake Wilson 
@_subject: Please run a bridge relay! (was Re: Tor 0.2.0.13-alpha is out) 
Quoth Andrew Del Vecchio , on 2007-12-23 13:36:45 -0800:
The obvious way to handle this, if you have iptables available, is
probably to run the Tor server on some other port (say, 1443) and then
use iptables to redirect incoming connections on port 443 to port 1443
instead.  Something like (untested):
  iptables -t nat -A PREROUTING -d  \
    -p tcp --dport 443 -j DNAT --to-destination :1443
   ---> Drake Wilson

@_date: 2007-12-26 13:14:46
@_author: Drake Wilson 
@_subject: Your computer is too slow to handle this many creation 
Quoth morphium , on 2007-12-26 19:45:54 +0100:
That sounds like it's going to be rather problematic.  The data rate
that you can pass through a cryptographic system like the Tor network
uses is going to be inherently limited by how fast you can do the
crypto operations, which are fairly CPU-intensive.  And the flow of
circuit requests is going to be dependent on how much clients use
short-lived versus long-lived connections on average; there isn't any
way of which I know to say "prefer  for short-lived/long-lived
circuits", not least because there isn't an obvious way for the client
to pass an estimated connection lifetime to the proxy.
So you may be out of luck except for constraining the Tor bandwidth or
getting more processing power.  You might want to look into hardware
crypto accelerators; Tor supposedly can use those through the OpenSSL
library, but I don't see references to it ever having been confirmed
to work.     ---> Drake Wilson

@_date: 2007-12-29 21:44:49
@_author: Drake Wilson 
@_subject: IRC privacy with Tor 
Quoth scar , on 2007-12-29 20:39:41 -0700:
What exactly do you mean by "ident"?  If you mean the hostname, then
if that doesn't change with the exit node, something weird is going on
(I would imagine), and more details might be helpful.  But if you mean
the username that precedes the hostname, it may be being transmitted
by your client through the main connection.  That would also be
consistent with seeing similar behavior through other types of
proxies.  (I seem to recall some of this stuff being transmitted
in-band for IRC, but I may be wrong and I can't recall the details
right now.)
   ---> Drake Wilson

@_date: 2007-12-30 23:23:35
@_author: Drake Wilson 
@_subject: Testing bridge capabilities 
Quoth Andrew Del Vecchio , on 2007-12-30 21:18:29 -0800:
Okay, you know what?
_443_ or _433_?  Which is in your Tor config?  Which are you testing?
Is it even consistent?
If you're getting them confused, that sounds like the first thing to
   ---> Drake Wilson

@_date: 2007-03-23 02:28:41
@_author: Drake Wilson 
@_subject: Tor Server Affecting Net Access 
Quoth brianwc at OCF.Berkeley.EDU, on 2007-03-22 23:54:11 -0700:
You have total transfer per day limited, but do you have total
transfer per second limited using BandwidthRate and BandwidthBurst?
If not, I can imagine the Tor server keeping enough bytes going
through during the periods that it's using that 1 GB that there's no
room for anything else.  Or is that not consistent with the problem
you're experiencing; e.g., does having Tor running degrade your
connectivity even when it's known to be hibernating?
in case you haven't seen it before.
   ---> Drake Wilson

@_date: 2007-03-25 10:47:50
@_author: Drake Wilson 
@_subject: Ultimate solution 
Quoth Kasimir Gabert , on 2007-03-25 09:26:09 -0600:
[quoting another level]
Who determines what qualifies as "subverting or infringing the
freedoms of end-users"?
And this is, I gather, derived from the idea of "you may not start up
a competing service using a modified version of this software".  I
will remain deliberately silent on the question of whether this is
justified, but nonetheless, that clause is non-free in the extreme.
So no, if the above clauses are part of the license in the context in
which they were indicated in the previous message, then Torpark is not
free software.
   ---> Drake Wilson

@_date: 2007-03-31 10:52:26
@_author: Drake Wilson 
@_subject: Example hidden service issue 
Quoth Karsten Loesing , on 2007-03-31 17:45:17 +0200:
Except that, as described earlier, HTTP 1.1 puts the destination
hostname in the request, so Google will see the onion name, IINM,
which causes the next paragraph---
---to occur.
   ---> Drake Wilson

@_date: 2007-03-31 11:38:47
@_author: Drake Wilson 
@_subject: Example hidden service issue 
Quoth "Joseph B. Kowalski" , on 2007-03-31 09:31:01 -0700:
By my understanding, here's the chain of reasoning and action:
  1. Someone sets up a foobarbazqux.onion hidden service with the example
     given.  They type in  to see whether it works.
  2. Browser forwards a request through Tor's SOCKS proxy.  The hostname
     of this request, as far as I know, never gets altered; just that
     onion names won't resolve outside the SOCKS proxy.  Moreover, Tor doesn't
     interpret the HTTP stream at all.  I don't think Privoxy changes the
     former either.
  3. Tor at the other end receives the stream of bytes for the hidden service,
     and passes it onto   4. The original request still contains a Host: header for the onion service,
     since the browser doesn't know what .onion is; it just forwards the hostname
     onto SOCKS.  The Host header can't have been changed to  in the
     middle, because the only link aware that it's talking to  is the
     Tor node running the hidden service, and Tor isn't interpreting the HTTP request.
  5. The outgoing connection from the hidden service forwarding is most likely
     not location-anonymized, through Tor or otherwise.
  6. Therefore, Google now has an HTTP request from the public IP address of the
     node running the hidden service, with a Host header corresponding to the hidden
     service.  Therefore, Google now has a reasonable suspicion of where that service
     is located.
As I interpret you, you seem to be rejecting the idea that the Host
header includes anything about the originating browser.  It's true
that the Host header doesn't include anything about the originating
browser, but I don't think the idea that it does ever came up in the
thread, and it's irrelevant to the above chain.
   ---> Drake Wilson

@_date: 2007-11-18 17:33:05
@_author: Drake Wilson 
@_subject: Chroot TOR as explained on Wiki error 
Quoth SPKills , on 2007-11-18 23:44:36 +0100:
Did you copy over all the libraries into the chroot directory?  If Tor
is dynamically linked and some of the libraries are missing, that's an
error you could get as a result.
I would probably recommend building Tor statically linked if you're
going to chroot it.  TheOnionRouter/TorInChroot has instructions about
that also.
   ---> Drake Wilson

@_date: 2007-10-01 14:15:04
@_author: Drake Wilson 
@_subject: Unsubscribe 
Quoth Brad Freeman , on 2007-10-01 21:09:24 +0200:
No.  Do it yourself.  :-P
It's in the header of every message.
     mail majordomo at seul.org, body unsubscribe or-talk <<
   ---> Drake Wilson

@_date: 2008-08-24 11:37:04
@_author: Drake Wilson 
@_subject: Comcast DNS servers returning bogus information 
Quoth Scott Bennett , on 2008-08-24 10:47:26 -0500:
I'm not a Comcast customer, but just for the record, some Web searches
turn up similar symptoms being discussed in various places (though
beware of the Net of Fools):
      Summary: according to an approximate consensus of the Net of Fools,
this happens with accounts that are (possibly erroneously) considered
suspended or deactivated, or on some forms of network topology
changes, such as the MAC address being presented by the modem to the
far end changing, or possibly the MAC address being presented to the
modem changing without the modem being reset.  Supposedly, the address
68.87.64.132 when accessed by HTTP from inside Comcast's customer
network yields a page that requests that you run their "activation
software" and enter your account information in order to reregister
the modem (I guess).
My first guess would be that they noticed your Tor node and tried to
disable it, then just disabled the DNS rather than everything.  My
second guess would be that a MAC address changed somewhere.  I don't
know whether either of these is the case, and I don't know anything
about their "activation software".
   ---> Drake Wilson

@_date: 2008-08-24 12:10:27
@_author: Drake Wilson 
@_subject: Comcast DNS servers returning bogus information 
Quoth Scott Bennett , on 2008-08-24 12:03:13 -0500:
Those name servers may only be shown by DHCP to users who are placed
in this bogus state; other users may be directed to other nameservers.
Possibly nobody should or would be querying those ones normally, and
those ones (and only those ones) are configured to always respond that
   ---> Drake Wilson

@_date: 2008-08-24 13:26:51
@_author: Drake Wilson 
@_subject: tor provided me first warning of corrupted ISP name servers 
Quoth Sven Anderson , on 2008-08-24 19:08:57 +0200:
DNS semantics say that when a name does not exist, you receive an
NXDOMAIN response.  Returning an arbitrary A record instead breaks the
semantics of the Internet.  You may consider this valid for your own
network, and that is okay, but inflicting changes to Internet
semantics on Tor exit traffic is a classic bad exit scenario.
Supposedly it is possible to submit a control request to OpenDNS to
turn this behavior off for certain source addresses; I haven't
confirmed this first-hand.  If this is true, I imagine that Dan
Kaminsky &c. would also tell people to issue this request if they
started forwarding to OpenDNS for other unrelated people in a
non-temporary fashion.
Short answer: don't.
   ---> Drake Wilson

@_date: 2008-08-27 00:16:28
@_author: Drake Wilson 
@_subject: Tor im wont play youtube vids. 
Quoth John Mosgrove , on 2008-08-26 21:51:27 -0700:
FWIW, using a YouTube scraper that respects HTTP proxy settings can
let you pull out the video data without having to go through the
untrustworthy Flash player (at the expense, of course, of having to
trust the scraper).
 is popular, as is
 though I can't vouch for either of them
from a security perspective, necessarily.  Both are open source, so
you may examine the source to see whether it is doing something wonky.
This may be a useful tactic for using some major Flash-based video
sites with Tor in the present day in a more general sense.
   ---> Drake Wilson

@_date: 2008-08-30 04:43:24
@_author: Drake Wilson 
@_subject: multiple unsubscribe requests to the wrong destination 
Quoth Bjarte Lund , on 2008-08-30 11:09:53 +0200:
Amazing.  Two within a few minutes of each other.  I suppose that
justifies a response.
*shouts*  Hey, folks!  Don't send mail to the main list address to unsubscribe!
There's a separate request address for that.  See this mail header field, which
I infer was added specifically for people like you?
                               vvvvvvvvvvvvvvvvvv
  X-To-Get-Off-This-List: mail majordomo at seul.org, body unsubscribe or-talk
                               ^^^^^^^^^^^^^^^^^^
Follow it!
   ---> Drake Wilson

@_date: 2008-08-12 04:09:13
@_author: Drake Wilson 
@_subject: tortila as a bad exit 
Quoth Scott Bennett , on 2008-08-11 23:30:20 -0500:
I can confirm this.  I can't seem to find much pattern to it, though.
I've done some tests, though they're not completely rigorous.  HTTP
tests were performed with a single HTTP request of the form:
  GET / HTTP/1.1
  Host: HOSTNAME
  Connection: close
transmitted through a command line of the form:
  (printf "..."; sleep 10000) | \
    socat - socks4a:localhost:HOSTNAME.tortila.exit:80,socksport=9050 \
    > FILENAME
Pseudorandom echo tests were performed by running the program
"ditest.rb" listening on a port that was redirected via NAT from
sand.begriffli.ch:80, then using a command line of the form:
  (cat socket-send.bin; sleep 10000) | \
    socat - socks4a:localhost:sand.begriffli.ch.tortila.exit:80,socksport=9050 \
    > socket-recv2.bin
The relevant files are available at:
  1-socket-*.bin and 2-socket-*.bin are the results of sending 1 MiB of
pseudorandom data looped through tortila through a local echo server
running on external port sand.begriffli.ch:80, with the data sent in
*-send.bin, the data received by the local echo server in *-recv1.bin,
and the data received from the local echo server after passing back
through tortila in *-recv2.bin.  There is truncation of the output
streams, but no insertions; in both cases, recv2 is a prefix of send,
and send is equivalent to recv1.  Trying the same test with looping
1-socket-send.bin through the "blockfreie" exit node yields an exact
copy of the input file at both recv1 and recv2.
e2-{1,2}.bin are the results of two tests retrieving
  elreg-{1,2}.bin are the results of two
tests retrieving   One can clearly see
data corruption.  Retrieving the same sites via the same method using
the "blockfreie" exit node yields e2-x.bin and elreg-x.bin, with no
The data corruption when using HTTP takes multiple forms: there are
gibberish bytes inserted that do not seem to follow any obvious
pattern; there are repeated fragments; there is truncation.
Setting up a pseudo-HTTP server at sand.begriffli.ch that ignored its
input and responded with a predetermined file containing an HTTP
response, then sending a bogus HTTP request to it through tortila, has
yielded definite corruption part of the time.  I haven't put those
files up because I think I'm out of energy for that approach for now
and I don't have very good results.
It certainly feels like buffers are being scrambled somewhere in the
part of the connection coming back from the remote server through
   ---> Drake Wilson

@_date: 2008-02-03 05:35:13
@_author: Drake Wilson 
@_subject: Tor and UDP 
Quoth _ , on 2008-02-03 03:20:54 -0800:
The short answer is "no".
   ---> Drake Wilson

@_date: 2008-01-10 08:44:53
@_author: Drake Wilson 
@_subject: Two little questions: Whats to preferr socks4, 4a or 5? And 
Quoth kazaam , on 2008-01-10 15:35:54 +0100:
No.  The SocksListenAddress is for the address of the SOCKS server,
not the address of the SOCKS client.
Example: you have 10.0.0.1 through 10.0.0.4 networked together.
10.0.0.1 is running a Tor client.  Set SocksListenAddress to
10.0.0.1:9050 and then tell each of the other machines to use that
same address as their SOCKS proxy.
The default is that any machine that can access the address given for
the SOCKS server can route through the Tor client.  The reason
127.0.0.1 is special is because it refers specifically to the local
host from any IPv4-networked machine, so by definition, a host cannot
be accessed from anywhere outside itself as 127.0.0.1 (or any of the
other predefined "loopback" addresses).
   ---> Drake Wilson

@_date: 2008-01-12 02:30:28
@_author: Drake Wilson 
@_subject: Warning Message 
Quoth Khaled Moussa , on 2008-01-12 10:26:33 +0200:
The message says "Please check your firewalls, ..., etc."  Have you
done this?  More specifically, have you confirmed that the Windows
firewall for whichever network interface is going to be receiving your
onion router connections will permit inbound connections on port 9001?
   ---> Drake Wilson

@_date: 2008-01-12 03:33:29
@_author: Drake Wilson 
@_subject: Warning Message 
Quoth Khaled Moussa , on 2008-01-12 11:16:15 +0200:
Third result from an AltaVista search for "opening ports on a windows
firewall": <  >, entitled "How
to manually open ports in Internet Connection Firewall in Windows XP".
Please try to do some basic research before asking these things,
especially on topics (such as general firewall operation) that are not
   ---> Drake Wilson

@_date: 2008-01-01 16:28:43
@_author: Drake Wilson 
@_subject: setting the minimum number of routers used in the network 
Quoth Cameorn Burns , on 2008-01-02 09:17:53 +1100:
Hum.     ---> Drake Wilson

@_date: 2008-01-22 15:57:46
@_author: Drake Wilson 
@_subject: Hostname 
Quoth Khaled Moussa , on 2008-01-22 23:42:33 +0200:
That's an extremely vague question.  IP of _what_ host, and for _what_
Anyway, based on my predicted disambiguation of your question, the answer
is generally "no, Tor clients and relays cannot easily hide themselves
from the Tor network".
   ---> Drake Wilson

@_date: 2008-07-21 15:56:51
@_author: Drake Wilson 
@_subject: browser footprint 
Quoth 7v5w7go9ub0o <7v5w7go9ub0o at gmail.com>, on 2008-07-21 16:41:47 -0400:
Tor isn't the right place to be mangling application protocols if it
can be avoided.  That's for protocol-specific tools to do in front of
Tor, such as the HTTP proxy packages you mention---or it can be in the
browser configuration itself (which also hits HTTPS and such, which is
an advantage).  Tor is and should be for transport only.
Recommending certain configurations is probably reasonable if there's
enough consensus on them.
   ---> Drake Wilson

@_date: 2008-07-21 23:56:52
@_author: Drake Wilson 
@_subject: [OT] base64 messages 
Quoth Scott Bennett , on 2008-07-21 23:49:16 -0500:
That would be << Content-Transfer-Encoding: base64 >> in action.  This
is kind of interesting, though off-topic; is GMail starting to send
these out consistently?  I've only mostly seen it used for S/MIME.
   ---> Drake Wilson

@_date: 2008-11-02 08:36:38
@_author: Drake Wilson 
@_subject: exit nodes always also being middle nodes 
Quoth Erilenz , on 2008-11-02 08:50:11 -0500:
And then an attacker can guess that any streams coming in to you must
be exiting from you, as opposed to making it harder for them to know
whether they're exiting there or being bounced somewhere else.
(Note that the attacker may be the middle node, though I'm not sure
that makes a difference.)
   ---> Drake Wilson

@_date: 2009-02-13 05:56:44
@_author: Drake Wilson 
@_subject: Tor speed 
(This message has one Bcc recipient.)
Quoth slush , on 2009-02-13 09:55:45 +0100:
One case that has probably been discussed before (but not in this
thread) is that TCP isn't really good for overlay networks that pass
many concurrent streams.  TCP enforces in-order delivery of all the
packets on a connection between two onion routers, when in fact in the
ideal case, this ordering is not required, and only ordering within
streams is necessary.  Enforcing full in-order delivery across streams
magnifies the effects of latency and packet loss, and can cause data
rate allocation between streams to be suboptimal; it's literally true
that while one stream is tying up the TCP connection, another cannot
use it at all, even though the streams are effectively preempted after
transferring a certain number of bits in a slice/cell so that the
delay does not become unbounded.  (It's rather like pre-emptive
scheduling of multiple tasks on a uniprocessor computer, in fact.)
(Theoretically there's going to be enforced-ordering lossage somewhere
anyway, because the physical world forces this to some extent, but a
TCP connection has much more of this than would be present if one were
using the underlying packet network more directly, I think.)
Using a protocol like SCTP might help with this, but that brings up
various other annoying practical problems that are particularly
annoying because there's no good reason for them to exist.
   ---> Drake Wilson

@_date: 2009-02-13 08:06:23
@_author: Drake Wilson 
@_subject: use of SCTP in volunteer relay networks (a bit off-topic) 
Quoth Scott Bennett , on 2009-02-13 07:27:10 -0600:
I'm not sure who proposed reimplementing Tor with UDP... ?
I've been examining SCTP during some of my Copious Free Time as part
of some (non-Tor) research on relay networks.  (Pardon my verbosity in
the following paragraphs.)
The advantages are mainly the desirable features of SCTP that are not
easily replicable with TCP or UDP: multiple streams per association, a
goodly amount of control over ordering constraints and (I think)
reliable versus unreliable delivery, while retransmissions and packet
boundaries are still handled for you at the transport layer rather
than having to fold them into an application-layer protocol, and so
As I see it, one main problem with native SCTP if you expect random
people on the Internet to run relays is the toxic black moldy
outgrowth of NAT everywhere.  In the presence of NAT, direct access to
the original transport-protocol-agnostic packet network between the
hosts is lost, so the NAT box has to handle remapping port numbers in
transport protocols.  "NAT box", here, includes huge swathes of
consumer-grade "routers", which will (at least in my experience and by
extrapolation) mostly fail to understand SCTP, because it's not
commonly used, and they have no incentive to put another code path in
that takes up space and time and might cause bugs.  Tor already
requires people to set up TCP port forwarding, which is a potential
barrier to becoming a relay; for people using consumer-grade NAT on
their Internet connections, doing SCTP port forwarding or similar
tricks may be close to impossible.
A secondary, similar problem might be restrictive perimeter firewalls
or intrusion detection systems that deny all unrecognized transport
protocols because they don't know how to inspect them; I've seen
university networks with these, for instance.  I don't know how common
this is, nor how the set of locations with such restrictions
correlates with the set of locations where people want to operate
relay nodes.
It's possible to get around some of the above by layering SCTP on top
of UDP, which is quite ugly but may be less ugly than designing a new
transport layer from scratch; there's an "interim protocol" for this
designated by the experimental-status sigtran-sctptunnel-00
Internet-Draft (which expired in August 2000).  That uses a daemon
that tunnels SCTP using a single reserved UDP port, which can create
deployment problems if applications are assumed to only allocate TCP
and UDP ports for themselves, which is a common assumption.
Presumably it would be easy to define SCTP over single
application-assigned UDP ports based on the existing draft, but this
wouldn't interoperate with existing native SCTP implementations, which
is a pain.
There may be issues with operating system support.  Several Unix-like
systems support SCTP directly; Windows seems to require an extra
userspace library.  This can presumably all be handled with
application-level glue code; I don't know how much implementation
complexity it adds to handle both cases for SCTP versus TCP.  The
latter seems likely to be better-known, making it easier to find
information and existing multiplatform glue code.
That's what I've learned so far; as you can see, my knowledge is
incomplete.  I'd welcome additions or corrections, certainly; if
there's going to be extended discussion on this topic, though, it
might be better to do it off-list, since it's not directly
   ---> Drake Wilson

@_date: 2009-02-15 22:24:44
@_author: Drake Wilson 
@_subject: Bittorrent 
Quoth Jon , on 2009-02-15 20:13:37 -0700:
"I started running a Tor relay and all my torrents immediately started
failing.  Now I'm not going to run a relay anymore."
   ---> Drake Wilson

@_date: 2009-02-16 10:38:52
@_author: Drake Wilson 
@_subject: use of SCTP in volunteer relay networks (a bit off-topic) 
Quoth Scott Bennett , on 2009-02-16 09:38:42 -0600:
People want the new stuff when it offers a perceived benefit to them.
This is how I imagine the conversations going (dramatized):
  "So if I buy one of these fancy 'N' routers, what do I get?"
  "The wireless will be faster."
  "Oh, so when I'm sending those big batches of videos from my laptop
   it'll take one minute rather than ten minutes?  Great, I'll pay
   extra for that."
This is as opposed to:
  "So what does 'SCTP support' mean?"
  "It means you'll be able to access all the great stuff on the Internet
   that's only available through SCTP."
  "And which stuff is that?"
  "Well, nothing so far."
  "Then I think I'm going to stick with the one I have."
Note that approximately no users actually look for "TCP support" or
"UDP support" specifically on their consumer NAT boxen; it's implied.
The only reason there's TCP support in these boxes is because if it
isn't there, J. Sixpack will say "I can't load my games"; if SCTP
support is absent, J. Sixpack will say nothing, and the first
application that requires SCTP that wants the Sixpack family to be
able to use it will die a horrible death.  They won't see "Alice's App
uses SCTP and has a much better protocol stack design as a result";
they'll see "Alice's App says it won't work with my router, even
though it works with everything else on the Internet; Bob's Browser
works just fine, even if it's a little slow sometimes", and guess
which one will get used?
Now, why am I talking about the Sixpack family when they're not likely
to want to run a Tor relay in the first place?  Because, near as I can
tell, the ignorant users tend to dominate the market by default, and
whatever sells to them the best will be whatever gets mass-produced
cheaply; the converse effect then occurs, because people will want to
use what's cheap, and as a result the influence of the masses spreads
farther out.
How much farther out, and how much does that apply here?  My guess is
that the effect is significant, but I don't have the data for that.
It would be interesting to get some idea of what fraction of Tor relay
operators are behind consumer-grade NAT boxen, for instance, or what
fraction would be willing to replace their gateway boxen or do the
work to upgrade their firewall scripts or such if it meant they could
run a better relay protocol.
There are presumably other forces that can overcome this effect, but
they seem few and far between.
It's not that much different from the current situation in theory, but
it's a classic bistable potential barrier to the implementation of new
technology, pretty much a form of the network effect.  Everybody
accesses resources over TCP, so people making everyday NAT stuff
implement TCP.  When designing new protocols that will pass through
these translators, people use TCP because that's what will work most
easily, so everyone continues to access resources over TCP.
Similarly, not nearly as many random people access resources over
SCTP, so people making everyday NAT stuff ignore SCTP.  When designing
new protocols that will pass through these boxes, people avoid SCTP
because it won't pass through them, so there continues to be nobody
accessing resources over SCTP.
The way to have the latter not be the case anymore is to achieve a
critical mass of SCTP users.  I see no reason to believe this will
happen; see below re IPv6.  There's nothing special about the SCTP in
this case, either; if the Internet had originally been developed
solely with UDP, and TCP were the new contender, ceteris paribus, it'd
be having similar problems.
This is the main reason I consider the outgrowth of pervasive
masquerading NAT to be so distasteful; it causes these network effects
to apply at the transport layer where ideally they should not be
applying, largely negating the beneficial effect of separating network
layer from transport layer in the first place.
IPv6 has similar network-effect problems, only a little bit worse;
DJB's page on "The IPv6 mess" [1] describes how the lack of embedding
of IPv4 address space into IPv6 address space adds a large barrier to
transitioning.  I haven't seen a good counterargument to that yet,
though I'm holding out hope that either some other force will moot it
or that it'll be fixed at some point.  In the specific case of IPv6, I
think the address space pressure may force the matter eventually.
[1] (Note that strictly speaking, one isn't layering TCP over anything
unless one actually implements TCP per se TCP at that level; you seem
to be talking about cases where people are implementing transport
layers with TCP-like characteristics in order to transport what will
ultimately be TCP streams at the ends.)
The Linux 2.6 kernel that I use on my Debian GNU/Linux systems has
native SCTP kernel-side.
   ---> Drake Wilson

@_date: 2009-07-10 03:00:23
@_author: Drake Wilson 
@_subject: exit notation stripping 
Quoth Scott Bennett , on 2009-07-10 01:44:22 -0500:
Someone's either been living in HTTP/0.9 days or hasn't been reading
the specs.  HTTP/1.1 requires a Host field because multiple domains
may be hosted at one TCP endpoint, and that's exactly the problem: the
full URI is (albeit in pieces) passed through the whole way at the
application layer, and the exit notation is included in the URI.  A
full example flow is:
  - Browser sends GET  to an HTTP proxy
    that is not aware of exit notation.
  - The HTTP proxy connects to the Tor SOCKS proxy, requesting a
    connection to example.net.example.exit.
  - Tor builds its circuit and makes the connection.
  - The HTTP proxy passes through GET     to the origin server.
  - The origin server looks up whether it knows of any site to serve
    under "example.net.example.exit", finds that it doesn't, and
    returns an error.  Alternatively, it uses a default site, which
    may be the wrong one.  Alternatively, it does whatever it usually
    does but now has mostly-definitive information that this user is
    using Tor and has requested a specific exit node.
This is why Privoxy includes a filter to strip the exit notation from
the Host header when passing the request through, and why this filter
should be enabled when using Privoxy for Tor purposes.
   ---> Drake Wilson

@_date: 2009-07-03 07:34:15
@_author: Drake Wilson 
@_subject: Safe destinations 
Quoth Gregory Maxwell , on 2009-07-02 23:12:23 -0400:
Last I checked freenode specifically bans regular connections from Tor
exits, including from ones that don't exit to them, and in fact I
think from all relays though I'm not as certain about that.  They
require that you switch to the hidden service or else do some kind of
wonky registration.  Their network is now on my list of places never
to connect again because of this.
My initial impulse would be to allow end sites to declare that they
are willing to receive connections via Tor.  Using DNS records, for
instance, of a style like:
  _toraccept.example.net TXT "toraccept1: 80,443,6667,9000,7777,9999"
    (and/or)
  _toraccept.23.2.0.192.in-addr.arpa TXT "toraccept1: 5234,5269,11000-11999"
Obviously you could include other information about which nodes should
try to exit there, or other such stuff.
Problems with this:
  - It seems to require considerable changes to the design of exit
    node selection, but I don't understand that well enough to know
    in detail.  That's potentially a deal-breaker.
  - The DNS queries allow for more explicit distinguishment of Tor exit
    traffic from other unrelated traffic, since the latter will never
    see the requests for _toraccept records.  There are forms of
    obfuscation that could alleviate this.
  - End sites who would be willing but don't care won't spend the energy
    to add the records, so you'd still have to supplement it with some
    other list forms if you wanted to have serious Internet coverage.
   ---> Drake Wilson

@_date: 2009-06-03 13:31:53
@_author: Drake Wilson 
@_subject: somewhat OT: http_proxy format (was: tor controller hangs / 
Quoth Scott Bennett , on 2009-06-03 08:17:10 -0500,
providing neither a References nor an In-Reply-To header:
I believe that this idea does not reflect current practice, at least
on GNU/Linux systems, and that Sambuddho's usage is correct for Bourne
shell, modulo a possibly-missing "export" command.  (Not that current
practice is particularly well-defined in this case.)

@_date: 2009-06-03 16:35:37
@_author: Drake Wilson 
@_subject: somewhat OT: http_proxy format (was: tor controller hangs / 
Quoth Scott Bennett , on 2009-06-03 15:22:43 -0500:
Okay.  For some reason I wasn't able to find that with a search for
"fetch(3)", but perhaps I did something wrong.
Anyway, from that exact source:
so that doesn't support the thesis of HTTP proxy environment values
not being formatted as URLs.
Unrelatedly, it may be that I was mistaken about the port component
and that it is required.  There's also some confusion regarding the
case of the variable name; some programs check both (including some of
the examples I gave), but the lowercase form seems more common overall
(probably due to name collisions with HTTP_* variables in CGI).
And for the original user, more importantly, I might note that some
programs, such as Lynx, appear to require a separate https_proxy
setting as well.
   ---> Drake Wilson

@_date: 2009-06-03 16:42:46
@_author: Drake Wilson 
@_subject: tor controller hangs / doesn't reply 
Quoth Sambuddho Chakravarty , on 2009-06-03 17:26:03 -0400:
I doubt the proxy setting has anything to do with it.  Wget in
interactive mode (or at least the versions I've seen) describes the
proxy to which it's connecting when it performs the connection, so if
that looks okay, it should be fine.
Back to the original thread, some basic troubleshooting seems
necessary first: can you describe which version of the relevant
control script you're using, and which version of Tor?  Do any unusual
messages appear in the Tor logfile when this happens?  It's hard to
search for the causes of problems without that basic information.
For completeness: what version of Wget is it, and can you safely
reveal which origin server you're trying to contact?
   ---> Drake Wilson

@_date: 2009-11-29 05:54:32
@_author: Drake Wilson 
@_subject: "The browser you're using refuses to sign in. (cookies 
Quoth James Brown , on 2009-11-29 13:44:21 +0300:
It sounds likely that the site you're using links each session to a
single IP address and rejects a session cookie from the wrong address.
The message is most likely generic; the cookie may be being sent but
considered invalid by the session code.
   ---> Drake Wilson
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2009-11-09 17:47:40
@_author: Drake Wilson 
@_subject: [warn] Error binding network socket: Address already in use 
Quoth Olaf Selke , on 2009-11-09 22:18:26 +0100:
You're probably an exit node, right?  It sounds like you're running
out of outgoing ports to use for connections.
   ---> Drake Wilson
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2009-11-10 03:13:31
@_author: Drake Wilson 
@_subject: [warn] Error binding network socket: Address already in use 
Quoth Olaf Selke , on 2009-11-10 07:54:57 +0100:
That's getting close to the limit.  Usually only high-numbered ports
are used for outgoing connections.  Since you mention you are running
Linux, you may wish to check /proc/sys/net/ipv4/ip_local_port_range
and possibly widen the range to see whether that helps.  E.g., the
default range on my system appears to be 32768--61000, which allows
at most 28232 outgoing TCP connections that are not bound to specific
ports, and fewer if some of the ports are stuck in wait states.
echo and shell redirection, so you would use
  # echo 24576 65000 > /proc/sys/net/ipv4/ip_local_port_range
or a similar command.
   ---> Drake Wilson
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2009-11-10 09:51:44
@_author: Drake Wilson 
@_subject: [warn] Error binding network socket: Address already in use 
Quoth Olaf Selke , on 2009-11-10 16:22:34 +0100:
That depends on your system.  It's possible there is no reason not to
do that on your system.  The main reason would be if you have other
processes that may need to run services on predefined ports in that
range.  E.g., if your machine is dedicated to Tor, then you may not
experience any problems with a setting of 1024--65535 for dynamic port
allocations.  You can check with netstat or similar, then experiment
as desired.
The IANA theoretically registers up to port 49151, with 0--1023 being
the Well Known ports and 1024--49151 being the Registered Ports; in
practice this is probably too conservative.
   ---> Drake Wilson
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2010-12-04 02:59:28
@_author: Drake Wilson 
@_subject: strange messages 
Quoth M , on 2010-12-03 09:11:06 +0000:
Which version of Torbutton is this?  Which version of Firefox, and
which platform?  My guess would be some extension incompatibility,
but I don't know that much.
   ---> Drake Wilson
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2010-01-14 21:20:41
@_author: Drake Wilson 
@_subject: Failed to decode requested authority digest 
Quoth Nick Mathewson , on 2010-01-14 21:49:33 -0500:
If you mean URI-encoded (or URL-encoded), which HTTP uses, then %20 is
a valid encoding of a 0x20 (ASCII space) character.  + is a secondary
convention that's used in query strings only, which can also mean a
space character.  Does the Tor directory request protocol specify
something else?  The dir-spec.txt document from Tor 0.2.1.20 doesn't
seem to be clear on how  is interpreted in URIs.
   ---> Drake Wilson
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2010-05-21 11:20:09
@_author: Drake Wilson 
@_subject: Some sites recognize TOR 
Quoth Jerzy ?ogiewa , on 2010-05-21 11:37:58 -0400:
   ---> Drake Wilson
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2010-10-01 23:46:03
@_author: Drake Wilson 
@_subject: Torbutton 1.3.0-alpha: Community Edition! 
Quoth Mike Perry , on 2010-10-01 18:51:07 -0700:
It doesn't inherently do that, but it leaves a very bad taste in my
mouth.  If the HTTP form is that much shorter, now it's implicitly the
first-class one: it gets the premium name that people will actually
use, and every other protocol is stuck with the leftovers.  This is
the same layer violation, just enforced fuzzily by hordes of humans
acting on their baseline psychology instead of by software, so I still
consider it pollution of the URI space: it's supposed to be Universal
Resource Identifiers, not A Pup Called HTTP.
Other possible points, all somewhat weak in isolation:
  - There are potential future uses of the "tor:" schema that would be
    more generic to Tor as a whole, such as URI references for relays.
    Imagine registering a schema with a QR code reader for more
    conveniently transmitting a bridge descriptor on paper.
  - The schema doesn't make it clear what protocol is actually in use.
    If I've never seen one of these before, I have to guess what that
    URI actually means, as opposed to it being a clear variant on the
    underlying HTTP URI.
The fuzzy URI-matching you mentioned is something I hadn't considered,
and is an unfortunate practical constraint in this case.  That would
lead me to consider, say, prefixing schemas with "or" instead, to keep
the whole thing alphabetic.  orhttp:, orhttps:, orirc:, ... ?
(I can say on a personal level that I am hardly unbiased, and that I
will refuse to accept or produce tor: URIs if non-HTTP protocols get
the short/long end of the stick/schema, not that that particularly
   ---> Drake Wilson
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2010-10-03 17:42:01
@_author: Drake Wilson 
@_subject: Torbutton 1.3.0-alpha: Community Edition! 
Quoth Mike Perry , on 2010-10-03 13:46:29 -0700:
I don't believe in small increases in "friendliness" at the expense of
a characteristic I'm a bit too drowsy to name properly right now.  :-)
Dear gods.
Okay, I suppose that probably means that horse has already bolted.
This is sad.  I tentatively retract my suggestion in light of that.
See, I'm not _completely_ impractical.  :-P
   ---> Drake Wilson
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2010-09-30 18:36:45
@_author: Drake Wilson 
@_subject: Torbutton 1.3.0-alpha: Community Edition! 
============================== START ==============================
Quoth Mike Perry , on 2010-09-30 15:57:48 -0700:
Ick.  This sort of layer-mixing is the sort that forces people to use
a certain protocol for no actual reason.  (Cf. the "feed" schema,
which similarly forces HTTP with a certain interpretation, last I
recall.)  Tor doesn't just work with HTTP, and URIs don't only refer
to HTTP resources, even if HTTP is one of the most popular protocols
in use today and possibly the only one many non-technical people would
Is there a reason not to use something like tor+http and tor+https for
the schema, thus opening up the space for (as a facetious example)
tor+nntp or analogous usages later?
   ---> Drake Wilson
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

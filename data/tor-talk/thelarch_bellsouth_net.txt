
@_date: 2007-04-22 00:58:20
@_author: Carlton B 
@_subject: Client config help - TOR will not start - directory information "not 
I installed v1.2.12-rc and find that TOR is unable to start (running as client).   The obvious message is that it can't connect to localhost:9051.  This is a first-time install, straight out of the box, no config changes made other than turning up the debug level.   Any takers to help me get the setup going?
I searched the wiki and web for the errors in the logs, got a couple of hits on the errors, but no responses.
To my knowledge, none of my outbound ports are restricted.
Message log and debug log below:
Message log:
Apr 22 00:34:46:390 [Notice] Tor v0.1.2.12-rc. This is experimental software. Do not rely on it for strong anonymity.
Apr 22 00:34:46:406 [Notice] Initialized libevent version 1.3b using method win32. Good.
Apr 22 00:34:46:406 [Notice] Opening Socks listener on 127.0.0.1:9050
Apr 22 00:34:46:406 [Notice] Opening Control listener on 127.0.0.1:9051
Apr 22 00:34:46:718 [Notice] I learned some more directory information, but not enough to build a circuit.
The debug log reads:
Apr 22 00:08:41.531 [notice] Tor 0.1.1.26 opening new log file.
Apr 22 00:08:41.531 [debug] parse_dir_server_line(): Trusted dirserver at 18.244.0.188:9031 (46DB)
Apr 22 00:08:41.531 [debug] parse_dir_server_line(): Trusted dirserver at 18.244.0.114:80 (E45D)
Apr 22 00:08:41.531 [debug] parse_dir_server_line(): Trusted dirserver at 86.59.21.38:80 (1F85)
Apr 22 00:08:41.531 [debug] parse_dir_server_line(): Trusted dirserver at 140.247.60.64:80 (F5FC)
Apr 22 00:08:41.531 [debug] parse_dir_server_line(): Trusted dirserver at 194.109.206.212:80 (EAD6)
Apr 22 00:08:41.531 [info] or_state_load(): Loaded state from "C:\Documents and Settings\[scrubbed]\Application Data\tor/state"
Apr 22 00:08:41.656 [info] read_file_to_str(): Could not stat "C:\Documents and Settings\[scrubbed]\Application Data\tor/cached-routers".
Apr 22 00:08:41.656 [info] read_file_to_str(): Could not stat "C:\Documents and Settings\[scrubbed]\Application Apr 22 00:08:41.656 [info] update_router_have_minimum_dir_info(): We have 0 of 5 network statuses, and we want more than 2.
Apr 22 00:08:41.656 [notice] I learned some more directory information, but not enough to build a circuit.
Apr 22 00:08:41.656 [info] update_router_descriptor_client_downloads(): Not enough networkstatus documents to launch requests.
Apr 22 00:08:41.656 [info] update_router_descriptor_client_downloads(): Not enough networkstatus documents to launch requests.
Apr 22 00:08:41.656 [info] or_state_save(): Saved state to "C:\Documents and Settings\[scrubbed]\Application Data\tor/state"
Apr 22 00:08:41.656 [info] update_networkstatus_client_downloads(): For 5/5 running directory servers, we have 0 live network-status documents. Downloading 5.
Apr 22 00:08:41.656 [info] router_pick_directory_server(): No reachable router entries for dirservers. Trying them all again.
Apr 22 00:08:41.656 [info] router_pick_directory_server(): Still no reachable router entries. Reloading and trying again.
Apr 22 00:08:41.656 [info] read_file_to_str(): Could not stat "C:\Documents and Settings\[scrubbed]\Application Data\tor/cached-routers".
Apr 22 00:08:41.656 [info] read_file_to_str(): Could not stat "C:\Documents and Settings\[scrubbed]\Application Apr 22 00:08:41.656 [info] directory_get_from_dirserver(): No router found for network status; falling back to dirserver list
Apr 22 00:08:41.656 [debug] directory_initiate_command(): initiating network-status fetch
Apr 22 00:08:41.656 [debug] connection_connect(): Connecting to Apr 22 00:08:41.656 [info] connection_connect(): connect() to [scrubbed]:80 failed: Connection refused [WSAECONNREFUSED ]
Apr 22 00:08:41.656 [info] connection_dir_request_failed(): Giving up on directory server at '140.247.60.64'; retrying
Apr 22 00:08:41.656 [info] update_router_have_minimum_dir_info(): We have 0 of 5 network statuses, and we want more than 2.

@_date: 2007-04-22 08:55:49
@_author: Carlton B 
@_subject: Client config help - TOR will not start - directory information 
I don't know if I was clear about this, but this is not just a delay.  Tor is actually exiting.  The message box says:  Vidalia detected that Tor exited unexpectedly.    Please check the message log for indicators about what happened to Tor before it exited."   The system tray icon is the "black onion" and the hover context says "Tor is stopped".  I do not think that waiting is a solution, it seems to be a final state.
Yes, they are interesting.   These are from 2 different runs...  I tried upgrading to another version, thinking the behavior might be different.   It appears that the second version does not recognize that log setting at all.   However all the behavior and error messages are the same, for both runs, so the debug info probably would be the same.   I did check the .torrc to make sure I still have "Log debug file c:/program files/tor/debug.log".   It exists, so I guess logging just doesn't work in the newer version.

@_date: 2007-04-22 10:27:09
@_author: Carlton B 
@_subject: Client config help - TOR will not start - directory information 
Those two versions were at entirely separate times.  These lines never appeared together in the log except where you and the previous poster cut and pasted them together. I tried a lot of troubleshooting before posting here.   One was upgrading from 0.1.1.26 to 0.2.12.   Between the different versions, I completely uninstalled and reinstalled, taking care to delete the Tor program files and restart the computer to ensure that no processes were running.   The one file I left in place was the debug log.   The only reason my previous message contained logs from 2 different versions is that the debug log appender apparently does not work in v 1.2.12.  (I tested it several times and rechecked my torrc... it works in the first version, does not work at all in the second).   So when I pasted from the debug log, I didn't notice that it appended nothing in the second run, but the lines from the message log were current.   That is the reason for the apparent mismatch.
I appreciate the responses, but is anyone willing to look past the superficial and easily explainable problems at what the logs say?   For example, what does it mean that it "learned some information but not enough to build a circuit?"    Why the "WSAECONNREFUSED"?
I really want to get this up and running....

@_date: 2007-04-22 12:28:38
@_author: Carlton B 
@_subject: Client config help - TOR will not start - directory information 
I've resolved the problem... issue was that although ZoneAlarm firewall did not appear to be running, actually it was.    I added Tor and Vidalia to the outbound access list, and they're running now.   Nothing to do with multiple versions.
So that was a n00b error, however I think the log messages could be more descriptive.   Also, it appears that 1.2.12 does not appear to log _at all_ on my box.   Is it writing directly to the file or does it use some kind of socket appender that might be getting screwed up by the firewall?


@_date: 2014-11-03 10:08:39
@_author: Cyrus Katrak 
@_subject: [tor-talk] Krypton Anonymous: A Chromium Tor Browser 
At a high level:
- Process per tab security model, with each tab owning it's own in-memory
state (cache, cookies, local storage, hsts db etc...).
- Efficiently integrated HTTPS Everywhere rules.
- Addresses some fingerprint-ability issues: Disabled geolocation, webgl,
accelerated , static user agent, etc.
- Single tap to start a bundled Tor binary, and properly configure the
browsers proxy settings. Gave a fair amount of thought to UX and polish.
It's still early days, only builds for Android at the moment. Nobody has
seriously reviewed the code or black box tested. Lots of fingerprint
mitigation work still remains. Hoping to get feedback and suggestions for
improvement, and help.

@_date: 2014-11-04 10:28:42
@_author: Cyrus Katrak 
@_subject: [tor-talk] Krypton Anonymous: A Chromium Tor Browser 
No, currently I am not using any Isolation flags. I assume this means all
tabs are sharing the same stream. I could trivially use something like
IsolateDestAddr, but I assume what you are suggesting is to have one Tor
SOCKS port per tab?

@_date: 2014-11-04 10:29:07
@_author: Cyrus Katrak 
@_subject: [tor-talk] Krypton Anonymous: A Chromium Tor Browser 
Thanks, I've been looking for something like this.

@_date: 2014-11-04 10:46:18
@_author: Cyrus Katrak 
@_subject: [tor-talk] Krypton Anonymous: A Chromium Tor Browser 
I oversimplified my explanation a bit. Right now If you open a "fresh" new
tab (using the '+' button in the tab view), you get a "fresh" state.
However if you long-press a link (open link in new tab) or happen to click
a popup link, the newly created tab will share state with the previous tab.
I think this partially addresses your concern, but I agree it's imperfect,
and probably a bit confusing for most people.
I came to this design decision via some personal intuition, user feedback,
and experimentation. The default Chromium security model is process per
site instance
however this doesn't really address some aspects of shared state (cache,
cookies etc...). Take a look at the url request context getter
to see the possibilities of what can be shared or isolated across browser
contexts (note that Krypton Anonymous ships with single_context = false).
I'll also note that our companion app (Krypton Premium, for non-Tor
everyday browsing) has the property that it only saves cookies for websites
you've added to your favorites. I don't have a good enough understanding of
what kind of features the Tor community wants, so at the moment Krypton
Anonymous airs on the side of caution by never saving state.
Some are hard-coded, some are preferences. Generally speaking it's not hard
to convert the hard-coded stuff to preferences, but I'm trying to avoid
giving the user too many options. This should give you a good idea of what
is configurable at the moment:
Note that the defaults listed in that file are quite different from what
Krypton Anonymous ships with.
When the user clicks the Tor icon this is roughly what happens:
- Change the proxy config
 to
- Loop:
  - Exec Tor with cmd line flags SOCKSPort auto, a DataDirectory and
ControlSocket located in the apps android data directory, and
__OwningControllerProcess mypid. I do not use a torrc.
  - Try to connect to the control socket and get the socks port (GETINFO
net/listeners/socks), once we have the port change the proxy config to
VALID + socks5://127.0.0.1:PORT.
Most of this happens from the java side, which isn't on GitHub.

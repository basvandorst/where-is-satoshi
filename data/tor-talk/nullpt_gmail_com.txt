
@_date: 2005-08-12 18:10:13
@_author: Alexandre Vieira 
@_subject: Using tor in http proxied enviroment 
Hello folks,
I work at a large office with hundreds of machines. We are able to
access the internet trough an http proxy (requires authentication)
which only speaks 80, 443, 3128, 8080. I choose tor because it uses
80/443, so it could bypass the http proxy.
The scheme is this:
PC[198.162.5.45] ->  -> HTTP PROXY[192.168.2.78] -> Web
The question is: Is there any program that will forward tor traffic
trough our authenticated http proxy?
Thank you for your help.

@_date: 2005-08-12 18:31:42
@_author: Alexandre Vieira 
@_subject: Using tor in http proxied enviroment 
Thanks for the reply,
My desktop uses Windows XP, I can't find anything related to Proxy in
my torrc and I can't see any other configuration files in my
installation directory.
Am I missing something?

@_date: 2005-08-12 19:16:50
@_author: Alexandre Vieira 
@_subject: Using tor in http proxied enviroment 
Thanks for the reply, I didn't noticed that comment :)
I've configured tor with the Proxy directives to specify my proxy
server, username and password but I'm having problems.
Aug 12 19:06:38.775 [notice] Tor v0.1.0.14. This is experimental software. Do no
t rely on it for strong anonymity.
Aug 12 19:06:38.853 [notice] Initialized libevent version 1.1a using method win3
Aug 12 19:08:02.691 [warn] fetch_from_buf_socks(): Your application (using socks
5 on port 1863) is giving Tor only an IP address. Applications that do DNS resol
ves themselves may leak information. Consider using Socks4A (e.g. via privoxy or
 socat) instead.
Aug 12 19:09:02.267 [notice] Tried for 60 seconds to get a connection to [scrubb
ed]:1863. Giving up.
I have another proxy authenticator configured and working for our
proxy and it works. I noticed that I had to specify our MS network
DOMAIN name to get it working. I guess tor can't communicate with our
proxy due to this.
I tried to set up tor to communicate with this proxy authenticator by
specifing the proxyhost to localhost:8888 (port listenet of the proxy
authenticator) but it doesn't work as well.
Any ideias?

@_date: 2005-08-12 19:36:00
@_author: Alexandre Vieira 
@_subject: Using tor in http proxied enviroment 
I've installed privoxy so I can test with the firefox browser to check
what's really the error and I found this:
Aug 12 19:31:32.547 [notice] Tor v0.1.0.14. This is experimental software. Do no
t rely on it for strong anonymity.
Aug 12 19:31:32.688 [notice] Initialized libevent version 1.1a using method win3
Aug 12 19:31:34.662 [warn] connection_dir_client_reached_eof(): Received http st
atus code 407 ("Proxy authentication required") from server '12.217.34.216'. Fai
Aug 12 19:33:39.856 [notice] Tried for 60 seconds to get a connection to [scrubb
ed]:80. Giving up.
I configured tor with the correct proyx server, proxy username and
proxy password but tor doesn't seem to be able to auth properly in our
proxy server.
Does anyone know if tor has support for auth in a MS Network DOMAIN
proxy server?

@_date: 2005-08-12 20:17:59
@_author: Alexandre Vieira 
@_subject: Using tor in http proxied enviroment 
Thanks for the answer. That's correct, I confirmed it with a sysadmin.
I have a proxy authenticator that works fine with our proxy that
listens on localhost port 8888 allowing programs to connect to it
without authentication.
I will try to set up tor to use this proxy authenticator by
configuring the tor HttpProxy to localhost:8888.

@_date: 2005-08-12 20:55:48
@_author: Alexandre Vieira 
@_subject: Using tor in http proxied enviroment 
Im using "NTLM authorization Proxy Server v0.9.1 at "localhost:8888".
2001 (C) by Dmitry Rozmanov" and it works fine. I can set up
applications to use a proxy at localhost:8888 and they work (ex. MSN,
Browser, etc..).
I'm setting up a new box so I freshly installed tor and added to the
default config the line:
HttpProxy localhost:8888
When I try to set up an application (such as mIRC) to use SOCKS5 proxy
at localhost:9050 it doesn't give me any error.. it just times out 60s
later. The only message that tor gives me is:
Aug 12 20:39:28.714 [notice] Tor v0.1.0.14. This is experimental software. Do no
t rely on it for strong anonymity.
Aug 12 20:39:28.777 [notice] Initialized libevent version 1.1a using method win3
Aug 12 20:40:06.856 [warn] fetch_from_buf_socks(): Your application (using socks
5 on port 6667) is giving Tor only an IP address. Applications that do DNS resol
ves themselves may leak information. Consider using Socks4A (e.g. via privoxy or
 socat) instead.
Any ideas?

@_date: 2005-08-12 22:02:23
@_author: Alexandre Vieira 
@_subject: Using tor in http proxied enviroment 
Good evening,
TYVM Roger. Added HttpProxy and HttpsProxy and it works fine now.
Let me congratulate the project developers and the people that help
others to get this wonderfull resource working.
It doesn't only provides security for surfing in the net, it provides
a way out for draconian firewalled and proxied networks.
Cheers and good luck with the project.

@_date: 2005-09-10 18:21:29
@_author: Alexandre Vieira 
@_subject: Tor errors 
I had tor working in my office (more info in my older thread:  but suddenly it got broken. I receive this message when I try to use it:
Sep 10 18:12:59.418 [warn] connection_or_read_proxy_response(): The https proxy sent back an unexpected status code 502 ("Proxy Error ( SSL port specified is not allowed. )"). Closing.
The only changed I made to torrc is:
HttpProxy 127.0.0.1:8888 HttpsProxy 127.0.0.1:8888 So it can talk with my NTLM authenticator/proxy which is working fine Anyone knows what this could be?

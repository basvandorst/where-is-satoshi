
@_date: 2005-12-06 16:59:14
@_author: Weijia Song 
@_subject: Having problem in setting up my own TOR network 
I try to set up my own TOR network. When i try to see if I can get directory
from it's DirPort, It returns nothing and print 503 ("Directory
unavailable") message. and OPs never works and
complains "router_choose_random_node(): No available nodes when trying to
choose node. Failing." and "onion_extend_cpath(): Failed to find node for
hop 1 of our path. Discarding this circuit." I also noticed that John Stan
had the same problem and he posted his problem on Nov 08. And No meaning ful
is there so far.
I'm experimenting with three machines instead of one as John did, two
dir-server along with 3 ORs, (two ORs run on two dir-servers
separately). The version of Tor I use is 0.1.1.9alpha, two directory server
runs on Redhat Linux (one Fedora Core 3, the other is RHEL-4) one OR runs on
Windows XP professional. Can anybody help? here is one my torrc
configuration of directory server:
 Configuration file for a typical Tor user
 Last updated 26 October 2005 for Tor 0.1.1.9-alpha.
 (May or may not work for older or newer versions of Tor.)
 See the man page, or  for more
 options you can use in this file.
# On Unix, Tor will look for this file in someplace like "~/.tor/torrc" or
# "/etc/torrc"
# On Windows, Tor will look for the configuration file in someplace like
# "Application Data\tor\torrc" or "Application Data\\tor\torrc"
# With the default Mac OS X installer, Tor will look in ~/.tor/torrc or
# /Library/Tor/torrc
 Replace this with "SocksPort 0" if you plan to run Tor only as a
 server, and not make any local application connections yourself.
SocksPort 9050 # what port to open for local application connections
SocksListenAddress xxx.xxx.130.64 # accept connections only from localhost
 192.168.0.1:9100 # listen on a chosen IP/port too
 Entry policies to allow/deny SOCKS requests based on IP address.
 First entry that matches wins. If no SocksPolicy is set, we accept
 all (and only) requests from SocksListenAddress.
 accept 192.168.0.1/16
 reject *
DirServer xxx.xxx.130.63:9030 6AA6 D843 B349 DC28 DA9E 59C5 07DD FA16 3806
DirServer xxx.xxx.130.64:9030 984A 4FDF 49F5 4298 F6B2 5F52 224A AF9B AF4F
 Allow no-name routers (ones that the dirserver operators don't
 know anything about) in only these positions in your circuits.
 Other choices (not advised) are entry,exit,introduction.
AllowUnverifiedNodes middle,rendezvous
 Logs go to stdout at level "notice" unless redirected by something
 else, like one of the below lines. You can have as many Log lines as
 you want.
 Send all messages of level 'notice' or higher to
 notice file /usr/local/var/log/tor/notices.log
 Send every possible message to /usr/local/var/log/tor/debug.log
 debug file /usr/local/var/log/tor/debug.log
 Send only debug and info messages to /usr/local/var/log/tor/debug.log
 debug-info file /usr/local/var/log/tor/debug.log
 Send ONLY debug messages to /usr/local/var/log/tor/debug.log
 debug-debug file /usr/local/var/log/tor/debug.log
 Use the system log instead of Tor's logfiles
 notice syslog
 To send all messages to stderr:
 debug stderr
 Uncomment this to start the process in the background... or use
 --runasdaemon 1 on the command line. This is ignored on Windows;
 see the FAQ entry if you want Tor to run as an NT service.
 1
 The directory for keeping all the keys/etc. By default, we store
 things in $HOME/.tor on Unix, and in Application Data\tor on Windows.
 /usr/local/var/lib/tor
 The port on which Tor will listen for local connections from Tor
 applications, as documented in control-spec.txt.  NB: this feature is
 currently experimental.
 9051
 This section is just for location-hidden services  Look in .../hidden_service/hostname for the address to tell people.
 HiddenServicePort x y:z says to redirect a port x request from the
 client to y:z.
 /usr/local/var/lib/tor/hidden_service/
 80 127.0.0.1:80
 /usr/local/var/lib/tor/other_hidden_service/
 80 127.0.0.1:80
 22 127.0.0.1:22
 moria1,moria2
 bad,otherbad
 This section is just for servers  NOTE: If you enable these, you should consider mailing your identity
 key fingerprint to the tor-ops, so we can add you to the list of
 servers that clients will trust. See
  for details.
 Required: A unique handle for this server
Nickname ds2
 The IP or fqdn for this server. Leave commented out and Tor will guess.
 noname.example.com
 Contact info that will be published in the directory, so we can
 contact you if you need to upgrade or if something goes wrong.
 This is optional but recommended.
ContactInfo Song Weijia  You might also include your PGP or GPG fingerprint if you have one:
 1234D/FFFFFFFF Random Person  Required: what port to advertise for tor connections
ORPort 9001
 If you want to listen on a port other than the one advertised
 in ORPort (e.g. to advertise 443 but bind to 9090), uncomment
 the line below. You'll need to do ipchains or other port forwarding
 yourself to make this work.
 0.0.0.0:9090
ORBindAddress xxx.xxx.130.64
 Uncomment this to mirror the directory for others (please do)
DirPort 9030 # what port to advertise for directory connections
 If you want to listen on a port other than the one advertised
 in DirPort (e.g. to advertise 80 but bind 9091), uncomment the line
 below. You'll need to do ipchains or other port forwarding yourself
 to make this work.
 0.0.0.0:9091
DirBindAddress xxx.xxx.130.64
 Uncomment this if you run more than one Tor server, and add the
 nickname of each Tor server you control, even if they're on different
 networks. We declare it here so clients can avoid using more than
 one of your servers in a given circuit.
 nickname1,nickname2,...
 A comma-separated list of exit policies. They're considered first
 to last, and the first match wins. If you want to *replace*
 the default exit policy, end this with either a reject *:* or an
 accept *:*. Otherwise, you're *augmenting* (prepending to) the
 default exit policy. Leave commented to just use the default, which is
 available in the man page or at  Look at  for issues you might encounter if you use the default exit policy.
 If certain IPs and ports are blocked externally, e.g. by your firewall,
 you should update your exit policy to reflect this -- otherwise Tor
 users will be told that those destinations are down.
 accept *:6660-6667,reject *:* # allow irc ports but no more
 accept *:119 # accept nntp as well as default exit policy
 reject *:* # middleman only -- no exits allowed
AssumeReachable 1
DirAllowPrivateAddresses 1
AuthoritativeDirectory 1
RecommendedVersions 0.0.9rc2,0.0.9rc3,0.0.9rc4-cvs,0.0.9rc4,0.0.9rc5-cvs,
And John, If you got the answer, please let me know. Thank you!

@_date: 2006-03-29 17:54:33
@_author: Weijia Song 
@_subject: unsubscribe 
unsubscribe or-talk
Song Weijia
CCNet, Peking Univ.
Beijing, P.R.China

@_date: 2006-03-29 17:54:33
@_author: Weijia Song 
@_subject: unsubscribe 
unsubscribe or-talk
Song Weijia
CCNet, Peking Univ.
Beijing, P.R.China

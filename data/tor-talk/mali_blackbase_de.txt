
@_date: 2005-12-08 22:23:23
@_author: Joerg Maschtaler 
@_subject: Setting Up Server Help Please. 
eph man schrieb am 08.12.2005 18:43:
Address ephman.no-ip.info
Did you run noip before starting Tor?
For debugging noip run it with options "-F" and "-d" (without quotes).
BTW, the tor server is reachable from outside if you find the following
entry in file "notice.log":
Dec 08 18:23:41.264 [notice] Self-testing indicates your ORPort is
reachable from the outside. Excellent. Publishing server descriptor.

@_date: 2006-04-23 22:58:36
@_author: Joerg Maschtaler 
@_subject: Number of processes and memory allocation 
I run two Tor server which settings are very similar and i can't figure
out why one of them runs only one process with a memory allocation of ~
10 MB (online since 6 h) and the other one runs six processes with a
memory allocation up to 120MB.
(Both server are running on the same OS.)
So my question is:
How does Tor determine the number of processes and the allocation of memory?
Thx in advance,
The torrrc's:
Server 1:
Nickname road2nowhere
SocksPort 9050
SocksBindAddress 127.0.0.1
SocksPolicy accept 192.168.1.0/16
AllowUnverifiedNodes middle,rendezvous
RunAsDaemon 1
DataDirectory /tor
ExitPolicy reject *:*
Address unsafe.no-ip.info
ORPort 53421
BandwidthRate 60 KB
BandwidthBurst 60 KB
MaxAdvertisedBandwidth 60 KB
AccountingStart month 1 00:00
AccountingMax 300 GB
User tor
PidFile /tor/pid
ShutdownWaitLength 10
Server 2:
Nickname roundabout
SocksPort 0
AllowUnverifiedNodes middle,rendezvous
DataDirectory /tor
RunAsDaemon 1
ExitPolicy reject *:*
Address 81.169.178.215
ORPort 64111
BandwidthRate 60 KB
BandwidthBurst 60 KB
MaxAdvertisedBandwidth 60 KB
AccountingStart month 1 00:00
AccountingMax 290 GB
User tor
PidFile /tor/pid
ShutdownWaitLength 10

@_date: 2006-04-23 23:25:13
@_author: Joerg Maschtaler 
@_subject: Number of processes and memory allocation 
Peter Palfrader schrieb am 23.04.2006 23:09:
Yes, you are right.
The other node uses a 2.6 kernel.
Right, too.

@_date: 2006-04-23 23:29:57
@_author: Joerg Maschtaler 
@_subject: Number of processes and memory allocation 
============================== START ==============================
Roger Dingledine wrote on 23.04.2006 23:13:
Nice to know.
Thx for this explanation!

@_date: 2006-08-03 13:52:17
@_author: Joerg Maschtaler 
@_subject: Configured hibernation does not work after restart in an interval? 
i use Tor 0.1.1.22 as a server.
The limit for traffic which i defined with option AccountingMax was
exceeded for both directions in the given interval.
In the logfile i see the following notice:
Jul 31 18:54:24.076 [notice] accounting_set_wakeup_time(): Configured
hibernation.  This interval begins at 2006-07-01 00:00:00 and ends at
2006-08-01 00:00:00.  We have no prior estimate for bandwidth, so we
will start out awake and hibernate when we exhaust our quota.
I'm not sure if i understand this message.
Does it mean that Tor can't realize how much traffic occured before its
restart although the restart happens in the interval?

@_date: 2006-08-05 23:55:00
@_author: Joerg Maschtaler 
@_subject: Configured hibernation does not work after restart in an interval? 
Hi Roger,
First, i used the wrong logfile. Sorry.
The notice from the logfile was from another server.
Nevertheless the limit was exceeded on the server i meant.
Roger Dingledine schrieb am 05.08.2006 16:20:
[Wrong notice deleted]
OS: SuSE 9.3
Tor source was compiled. In addition to the installations instructions i
made a "make install".
File torrc was untouched.

@_date: 2006-12-23 12:57:06
@_author: Joerg Maschtaler 
@_subject: Meaning of the notice "I learned some more directory information, but 
On my Tor server (roundabout, 0.1.2.4-alpha) the following message usually appears up to three times
a day:
"..... [notice] I learned some more directory information, but not enough to build a circuit."
I read once in a posting with a similar subject that this notice ist not further interesting while
running a Tor server.
But while these two periods:
- Dec 18th 09:45 pm -> Dec 19th 03:46 pm)
- Dec 20th (02:26 pm) -> Dec 21st (10:40 am)
I faced an accumulated appearance (~ every 30 Minutes) of the above message which corresponds with a
decrease of traffic on the Tor server.
Shortly after the message was not logged anymore the traffic increase to the usual amount.
See  for details.
So my question is:
Is there something that goes wrong if this messages appears and could this error be avoided?
Thx in advance,

@_date: 2006-12-28 01:51:54
@_author: Joerg Maschtaler 
@_subject: MyFamily issues 
Hi Ben,
Ben Wilhelm wrote on 27.12.2006 23:11:
Add the Dollar sign:
MyFamily $DD9175840D14450FA3F9482C22AC83B8D861E802
This is the way it works for me.

@_date: 2006-06-01 16:52:56
@_author: Joerg Maschtaler 
@_subject: Message that enough directory infos are gathered occurs twice 
i noticed the following log messages after starting my Tor server
Jun 01 16:42:48.112 [notice] We now have enough directory information to
build circuits.
Jun 01 16:42:56.203 [notice] Our directory information is no longer
up-to-date enough to build circuits.
Jun 01 16:42:56.203 [notice] I learned some more directory information,
but not enough to build a circuit.
Jun 01 16:43:18.209 [notice] We now have enough directory information to
build circuits.
Jun 01 16:43:23.866 [notice] Tor has successfully opened a circuit.
Looks like client functionality is working.
Just to inform you.

@_date: 2006-03-13 23:33:00
@_author: Joerg Maschtaler 
@_subject: 0.1.1.15-rc: After update from 0.1.0.17 the old server fingerprint 
i have just updated my server "road2nowhere" by compiling the source and
installing "over" the version 0.1.0.17.
The old server fingerprint seems to be overwritten with a new one during
this update.
notices.log shows the following entries:
Mar 13 23:16:05.852 [warn] routers_update_all_from_networkstatus(): 0/2
recent directory servers recognize this server. Please consider sending
your identity fingerprint to the tor-ops.
OS: SuSE 9.3

@_date: 2006-03-14 00:01:17
@_author: Joerg Maschtaler 
@_subject: 0.1.1.15-rc: Complaints to values of option MyFamily 
i run two Tor servers (road2nowhere, roundabout) and set their nicknames
in option MyFamily on both servers.
These "tests" are made on server road2nowhere.
If i use the nickname of the other server (MyFamily roundabout,
road2nowhere) the following message appears in notices.log:
Mar 13 23:16:05.608 [warn] router_rebuild_descriptor(): I have no
descriptor for the router named "roundabout" in my declared family; I'll
use the nickname as is, but this may confuse clients.
Mar 13 23:16:07.682 [warn] router_get_by_nickname(): You specified a
server "roundabout" by name, but the directory authorities do not have a
listing for this name. To make sure you get the same server in the
future, refer to it by key, as "$24CB9083B9A8F0BB48CA97E28B4CAE24B01E9690".
(An error besides the subject is that the server "roundabout" is already
At least no corresponding warning appears in the logfiles on server
If i use the named key instead of the nickname the following message
Mar 13 23:50:51.842 [warn] router_rebuild_descriptor(): I have no
descriptor for the router named
"$24CB9083B9A8F0BB48CA97E28B4CAE24B01E9690" in my declared family; I'll
use the nickname as is, but this may confuse clients.
OS: SuSE 9.3

@_date: 2006-05-19 21:19:57
@_author: Joerg Maschtaler 
@_subject: What happened after resolving of the IP has failed? 
on my Tor server (0.1.1.19-rc) i've got the message in notices.log:
[warn] check_descriptor_ipaddress_changed(): options->Address didn't
resolve into an IP.
After this message no further message was written (for ~2 hours).
My question is:
Is this Tor server "offline" and has to be restarted or would it try to
resolve its name further on and only doesn't send a message if it succeeded?

@_date: 2006-05-19 21:29:50
@_author: Joerg Maschtaler 
@_subject: What happened after resolving of the IP has failed? 
The subject should be "What happened after resolving of the name has
failed?" :/
Joerg Maschtaler wrote on 19.05.2006 21:19:

@_date: 2006-05-11 20:59:34
@_author: Joerg Maschtaler 
@_subject: Recommendation for ISP in Germany? 
Hi Lutz,
Lutz Horn wrote  on 11.05.2006 12:17:
I run a Tor server (roundabout) on a virtual server at Strato.
No problems occurred so far but i never exceeded the limit of available
RAM (128 MB fix assigned up to 256 MB "shared" with others) because the
Tor process never ran long enough to reach this limit.
In a forum i read that if the limit of 256 MB is exceeded processes will
be killed till the limit fall short of 128 MB.
I don't know what happens if the limit is exceeded repeatedly.

@_date: 2006-05-11 21:21:05
@_author: Joerg Maschtaler 
@_subject: Improvement of memory allocation possible? 
if it possible to add an option which allows to shrink memory buffers
immediatly if they are not full? [1]
I run an Tor server on a virtual server in which the amount of RAM is
the bottleneck of this system.
Since ~ 3 weeks i measure the "resident" memory allocation and the
corresponding traffic of the Tor server and the thing i realize is that
the allocation only shrinks if i shutdown (and restart) the Tor server. [2]
I would rather treat the CPU than the RAM.
Is there a way?
[1]  ,
 part 2
[2]

@_date: 2006-11-14 09:43:09
@_author: Joerg Maschtaler 
@_subject: What happens if Tor servers bandwidth setting is higher than the real bandwidth? 
If the bandwidth setting in torrc is higher than the available  bandwidth:
What is the behaviour of a Tor server in such a case?
(More precisely 0.1.2.3-alpha on a virtual server with SuSE 10.0 64Bit
with libevent 1.1-2 and a kernel based on 2.6.8)
Thx in advance,

@_date: 2006-11-14 23:16:00
@_author: Joerg Maschtaler 
@_subject: How to determine the current number of open files for the Tor user? 
after a notice in the logfile that I should increase the number of open
files I follow the instructions of
 -> Step three -> chapter 16.
(BTW, the provided link in this chapter
does not have a target).
I added the line "myTorUser hard nofile 8192" to /etc/security/limits.conf.
Additionally i set "ulimit -n 8192" in the .bashrc (my Tor user uses the
At last i set "ulimit -n 8192" in roots shell before restarting the Tor
The notice to increase the number of open files does not appear anymore
but is there a way to find out the value of "ulimit -n" for the Tor user
whithout login as Tor user?

@_date: 2006-11-15 14:06:41
@_author: Joerg Maschtaler 
@_subject: Storage of connection data committed by law for Tor servers in Germany? 
today the Department of Justice in Germany announced a draft which
commits a provider of anonymization services to store data of
connections for the last six month.
A german version of the draft is available at
(22 MB)
An german article about that draft ist available at
Maybe someone whos english is better than mine can translate important
parts or knows an english version of the draft?

@_date: 2006-11-18 18:10:13
@_author: Joerg Maschtaler 
@_subject: How to determine the current number of open files for the Tor user? 
Joerg Maschtaler wrote on 14.11.2006 23:16:
A friend of mine provided me the following patch which was tested on Tor
---cut here---
--- tor-0.1.2.3-alpha.orig/src/common/compat.c	2006-11-18 14:51:02.000000000 +0100
+++ tor-0.1.2.3-alpha/src/common/compat.c	2006-11-18 15:05:17.000000000 +0100
 -605,6 +605,9               strerror(errno));
     return -1;
   }
+  log_notice(LD_NET,"Current max file descriptors soft limit %lu and hard limit %lu.",
+           (unsigned long)rlim.rlim_cur, (unsigned long)rlim.rlim_max);
   if (rlim.rlim_max < limit) {
     log_warn(LD_CONFIG,"We need %lu file descriptors available, and we're "
              "limited to %lu. Please change your ulimit -n.",
---cut here ---
This patch shows the soft and hard limit for file descriptors during the start of Tor server.

@_date: 2006-09-02 11:41:50
@_author: Joerg Maschtaler 
@_subject: torstat 
BlueStar88 schrieb am 02.09.2006 01:56:
Very nice :)
BTW, what does "Guard" mean?

@_date: 2006-09-02 11:41:50
@_author: Joerg Maschtaler 
@_subject: torstat 
BlueStar88 schrieb am 02.09.2006 01:56:
Very nice :)
BTW, what does "Guard" mean?

@_date: 2007-09-03 15:40:24
@_author: Joerg Maschtaler 
@_subject: Want a faster Tor? Upgrade, inform others 
Mike Perry wrote on 01.09.2007 15:50:
After upgrading to 0.1.2.17 i can confirm that the performance is much much better.
Well done and thanks for that!
Maybe now it is possible again to persuade friends to use Tor.
Thanks again for your work.
Best regards,


@_date: 2010-04-17 13:58:44
@_author: Paul Menzel 
@_subject: [solved] Full bandwidth is not used. 
Am Donnerstag, den 25.03.2010, 13:57 +0100 schrieb Paul Menzel:
Ok, it looks like they do not limit the bandwidth.
Since April 13th traffic increased quite a lot [1]. So it looks like it
just took longer to get my exit node propagated to the network.
[1]

@_date: 2010-04-17 15:12:54
@_author: Paul Menzel 
@_subject: Consider traffic before setting AccountingStart in the middle of 
Dear Tor folks,
my server plan only includes 1 TB of traffic. Since traffic increased
quite a bit during the last few days [1] I have to limit the volume to
not go bankrupt.
In `man torrc` [2] I found AccountingMax and AccountingStart. My
accounting starts let us say at April 2nd and I just set
Accounting{Max,Start} and reloaded Tor on April 12th.
Will Tor consider traffic before in its accounting? That information is
quite crucial to me.
[1] [2]

@_date: 2010-03-10 13:42:55
@_author: Paul Menzel 
@_subject: Drop Tor users via bridges by over 2/3 in the beginning of March 
Am Mittwoch, den 10.03.2010, 13:27 +0100 schrieb Karsten Loesing:
So my next question is, why did the users count drop that much in the
beginning of March?

@_date: 2010-03-12 11:40:29
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Am Dienstag, den 09.03.2010, 14:01 +0100 schrieb Paul Menzel: I implemented the changes suggested by arma on IRC (due to Exit and
Guard flag [1]) to configure my server as non-exit relay, so I added the
following line.
        ExitPolicy reject *:*
Unfortunately changing the server to a non-exit relay on 2010-03-10
09:28:25 UTC did not change anything. Although looking at my logs and
the data on [2] I would say it differs a bit. According to my logs I
would say, that traffic even decreased.
        $ grep -A 6 "62.141.42.186" cached-descriptors | grep -E 'published|bandwidth'
        published 2010-03-07 17:51:12
        bandwidth 5242880 10485760 55006
        published 2010-03-08 00:05:02
        bandwidth 5242880 10485760 155910
        $ grep -A 6 "62.141.42.186" cached-descriptors | grep bandwidth
        bandwidth 5242880 10485760 214272
        bandwidth 5242880 10485760 141962
        $ LANG=C date && grep -A 6 "62.141.42.186" cached-descriptors | grep bandwidth
        Thu Mar 11 10:30:02 UTC 2010
        bandwidth 5242880 10485760 181555
        $ LANG=C date && grep -A 6 "62.141.42.186" cached-descriptors | grep -E 'published|bandwidth'
        Fri Mar 12 09:46:43 UTC 2010
        published 2010-03-10 09:28:24
        bandwidth 5242880 10485760 181555
        published 2010-03-11 03:28:50
        bandwidth 5242880 10485760 178964
        published 2010-03-11 21:29:37
        bandwidth 5242880 10485760 143546
The value displayed on [2] seems to be more up to date.
Here are some compiled values from `cached-consensus`.
        $ grep -A4 62.141.42 cached-consensus # adapted the output.
        r anonymisierungsdien s+wb9df31yS6Y02Rvl0i0tenAWA QvLgYWR3HuX0DKMSPBCwzjIVpCk 2010-03-09 12:05:55 62.141.42.186 443 80
        s Exit Fast HSDir Running Stable V2Dir Valid
        w Bandwidth=63
        $ ls -al (adapted)
        384600  9. M?r 21:27 cached-consensus
        w Bandwidth=102
        362245  9. M?r 23:15 cached-consensus
        w Bandwidth=90
        342063 10. M?r 07:32 cached-consensus
        w Bandwidth=88
        # (configure as non-exit relay)
        356455 10. M?r 11:14 cached-consensus
        w Bandwidth=86
        385656 10. M?r 21:16 cached-consensus
        w Bandwidth=81
        w Bandwidth=64
        390325 11. M?r 20:03 cached-consensus
        w Bandwidth=58
        Thu Mar 11 20:21:07 UTC 2010
        w Bandwidth=58
        anonymisierungsdien s+wb9df31yS6Y02Rvl0i0tenAWA BfwbPy3Xd3P2smQnEdl3Tqp9E9I 2010-03-11 21:29:37 62.141.42.186 443 80
        w Bandwidth=52
        r anonymisierungsdien s+wb9df31yS6Y02Rvl0i0tenAWA BfwbPy3Xd3P2smQnEdl3Tqp9E9I 2010-03-11 21:29:37 62.141.42.186 443 80
        w Bandwidth=52
Do you have more ideas?
[1]  [2]

@_date: 2010-03-01 22:21:40
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Dear Tor folks,
my Tor server is running for over three days now, but the average
bandwidth usage shown by ARM [1] is only 100 KB/s for uploaded and
downloaded. The usage increased during the first two days but has
stagnated now.
I am using the default `/etc/tor/torrc` so bandwidth should be limited
by 5 MB/s by default, which is also show by ARM.
        Bandwidth (cap: 5 MB, burst: 10 MB):
I am only seeing the following warnings.
        xx:xx:xx [WARN] Rejected invalid g^x
        xx:xx:xx [WARN] Rejecting insecure DH key [0]
        xx:xx:xx [WARN] DH key must be at least 2.
Testing the bandwidth by for example downloading a big file shows that
higher bandwidth is available.
Tor 0.2.0.35
OR Port: 443
Dir Port: 80
Could you please help me how I can find out, what is limiting Tor to use
the full available bandwidth.
[1]

@_date: 2010-03-13 09:05:03
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Am Freitag, den 12.03.2010, 19:31 -0600 schrieb Scott Bennett:
Thank you for your response. I kept that in mind and compared it to the
values in `/var/lib/tor/state` and they are around the same and maybe
even lower. I also use tools like `nload` to verify the network load.
You can also see bandwidth graphs at [2].
I am a little confused why you are responding nitpicking at the values I
give although I think it was confirmed in the whole thread that the full
bandwidth is not used at all.
[2]

@_date: 2010-03-16 10:38:44
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Am Freitag, den 12.03.2010, 11:40 +0100 schrieb Paul Menzel:
Anyone? See [2].
Is it safe to say, that it is a client problem that they do not use my

@_date: 2010-03-16 23:22:37
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Am Dienstag, den 16.03.2010, 18:51 +0100 schrieb Gitano:
Xen is used on the server, so I do not have that file. I checked for CPU
and RAM usage and enough is available.
I knew about it. But I have not come close to that limit yet and traffic
is well below that limit.

@_date: 2010-03-19 17:43:37
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Am Dienstag, den 09.03.2010, 07:40 -0500 schrieb andrew at torproject.org:
Do you have any results yet?

@_date: 2010-03-25 13:57:26
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Am Freitag, den 19.03.2010, 22:08 -0400 schrieb andrew at torproject.org:
So to rule the last thing out before to blame it on Tor, namely that the
ISP is limiting the bandwidth, can somebody point me to a way on how to
check the bandwidth on different ports.

@_date: 2010-03-03 00:18:16
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Dear SwissTor,
thank you for your answer.
Am Montag, den 01.03.2010, 23:47 +0100 schrieb starslights:
I searched for the error on the WWW and it looks like this should be
unrelated to the bandwidth problem and only has to do with clients not
fully complying to the Tor protocol [1][2].
Unfortunately it looks like nobody had time yet. I will update my
original post with new information. So please reply on the other
[1] [2]

@_date: 2010-03-03 00:26:57
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Dear Tor folks,
Am Montag, den 01.03.2010, 22:21 +0100 schrieb Paul Menzel:
[ ? Pasted warnings seem unrelated. See other subthread. ]
I can see no related messages in `/var/log/tor/log`.
I noticed
        [NOTICE] Performing bandwidth self-test...done.
in `/var/log/tor/log`. Can this be used somehow to figure out if there
is a problem?
I also checked with arm that the used file descriptors are below the
maximum allowed ones.
I am out of ideas. It would be really nice, if someone could help,
because otherwise the paid traffic volume will be wasted.

@_date: 2010-03-03 00:43:13
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Dear Hannah,
Am Mittwoch, den 03.03.2010, 00:30 +0100 schrieb Hannah:
the CPU usage shown by arm is 1.6 % and I verified this with `top`.
So that should not be it.

@_date: 2010-03-03 01:01:13
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Dear Hannah,
Am Mittwoch, den 03.03.2010, 00:45 +0100 schrieb Hannah:
It ran for over three days.
It is an exit node.

@_date: 2010-03-04 14:08:32
@_author: Paul Menzel 
@_subject: [REGRESSION] Your IP address seems to have changed to 
Dear Tor folks,
I updated from 0.2.0.35-1~lenny2 to 0.2.1.23-2~~lenny+1 and use the same
configuration. But now I am seeing
    Your IP address seems to have changed to xxx.xxx.xxx.xxx. Updating.
every 10 seconds in `/var/log/tor/log`.
I have not found anything on the WWW at a first glance and the version
jump is pretty big.
Any ideas or help is appreciated!

@_date: 2010-03-04 14:18:59
@_author: Paul Menzel 
@_subject: Debian packages from deb.torproject.org or backports.org? 
Dear Tor folks,
in [1] option two instructs to use packages from [2]. This gives me
currently version 0.2.1.23-2~~lenny+1 and is as far as I can see based
on the version in Debian Sid/unstable and in `changelog.Debian.gz`
release is set to `lenny-backport`.
Looking at the available packages in the Debian repository [3] there is
also a package for Debian Lenny in [4], which is currently version
The maintainer is the same person.
It looks like using [2] gives you more up-to-date packages. I do not
know if it is hard to update the ones in [4].
I guess I am just confused because I read `backports-lenny` in the
changelog of [2] and I did not find packages for 0.2.1.24 although
reading [5] but which seems just to apply to RPM packages.
So I will use the Tor packages from [2] if no one else says otherwise.
[1] [2] [3] [4] [5]

@_date: 2010-03-04 14:33:52
@_author: Paul Menzel 
@_subject: [solved, bug 1269][REGRESSION] Your IP address seems to have 
Am Donnerstag, den 04.03.2010, 14:18 +0100 schrieb Sebastian Hahn:
Dear Sebastian,
thanks, that worked. I guess I should subscribe to tor-relays too then.

@_date: 2010-03-05 01:03:22
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Dear Tor folks,
Am Mittwoch, den 03.03.2010, 01:01 +0100 schrieb Paul Menzel:
I updated to 0.2.1.23 to no avail. It is up for 12 hours again and
staying now at 66 KB/s. I also checked that there is still 50 MB free

@_date: 2010-03-05 09:32:59
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Am Donnerstag, den 04.03.2010, 20:17 -0500 schrieb andrew at torproject.org:
There is no Debian package yet for it. The changelog also talks just
about performances improvements on the client side.
I did not configure them and so the defaults are used. arm is displaying
?(cap: 5 MB, burst: 10 MB)?.

@_date: 2010-03-05 23:54:06
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Am Freitag, den 05.03.2010, 10:17 -0500 schrieb andrew at torproject.org:
On what conditions does that depend?
I guess arm is using this or something similar to display the bandwidth
usage of Tor.
Looking at `DataDirectory/state` directly I cannot figure out how to
interpret the values. Maybe I need tot enable bandwidth accounting.
       $ man torrc
       [?]
       DataDirectory/state
              A set of persistent key-value mappings.  These are documented in
              the file.  These include:
            - The current entry guards and their status.
            - The current bandwidth accounting  values  (unused  so  far;  see
            below).
            - When the file was last written
            - What version of Tor generated the state file
            - A short history of bandwidth usage, as produced  in  the  router
            descriptors.
       DataDirectory/bw_accounting
              Used to track bandwidth  accounting  values  (when  the  current
              period  starts  and  ends; how much has been read and written so
              far this period).  This file is obsolete, and the  data  is  now
              stored  in  the  ?state? file as well.  Only used when bandwidth
              accounting is enabled.
       [?]
Searching the WWW for ?tor state bandwidth? did not help either.

@_date: 2010-03-07 12:13:17
@_author: Paul Menzel 
@_subject: provided bandwitdth over time in /var/lib/tor/state (was: Full 
Am Samstag, den 06.03.2010, 02:36 -0800 schrieb Paul Campbell:
Thanks a lot for this.
It shows around the same values as arm on average.

@_date: 2010-03-07 12:16:03
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Am Freitag, den 05.03.2010, 23:54 +0100 schrieb Paul Menzel:
On average arm?s values are the same as the ones in

@_date: 2010-03-08 10:21:29
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
I now increased the RAM too and restarted the server to no avail. It is
still below 100 KB/s.
Am Sonntag, den 07.03.2010, 12:16 +0100 schrieb Paul Menzel:
Do you have any pointers? Where can I look up what my Tor server is
announcing to the outside what bandwidth it support?

@_date: 2010-03-09 14:01:39
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Am Dienstag, den 09.03.2010, 07:40 -0500 schrieb andrew at torproject.org:
        $ more /etc/tor/torrc
        SocksPort 0 # what port to open for local application
        connections
        ControlPort 9051
        ORPort 443
        ORListenAddress 0.0.0.0:9090
        Address 62.141.42.186
        ContactInfo 1024D/6C0E1D58 Paul Menzel         DirPort 80 # what port to advertise for directory connections
        DirListenAddress 0.0.0.0:9091
It is a virtual machine and connections to port 80 and 443 are forwarded
by an IPtables entry in the nat table with DNAT to the virtual host. On
the virtual host using IPtables ports 80 and 443 are forwarded to 9090
and 9091.
Sebastian on IRC helped me to gather more data. In `cached-descriptors`
I have the following.
        bandwidth 5242880 10485760 155910
There are more entries for my IP address when I restarted and upgraded
In `cached-consensus` (from 12:28 UTC) there is
        r anonymisierungsdien s+wb9df31yS6Y02Rvl0i0tenAWA vyRDgH2XTP6Tn1MPiJkWE0Yk9e8 2010-03-08 18:05:07 62.141.42.186 443 80
        s Exit Fast HSDir Running Stable V2Dir Valid
        v Tor 0.2.1.23
        w Bandwidth=61
        p reject 25,119,135-139,445,563,1214,4661-4666,6346-6429,6699,6881-6999
and Bandwidth even decreased by 1 (from 62) compared to the value before
the update (11:14 UTC).
Very strange.

@_date: 2010-03-10 11:26:00
@_author: Paul Menzel 
@_subject: [RFC] Campaign =?ISO-8859-1?Q?=BBBuy=2FSponsor?= a 
Dear Tor folks,
on the Tor start page [1] there is a message ?Help us reach 5,000 relays
in 2010!?
On IRC arma discovered an offer by the British ISP Coldbot where you can
buy 1 Mb/s bandwidth for ?9 per month [2].
Although it is quite pricey I find the idea very nice.
?I guess for people caring about privacy but not wanting/able to set up
a server themselves can now be told, you can pay 90 pounds a month [for
10 Mbps] and you will improve the connectivity of the Tor network.? [me
on IRC]
I suggested to contact ISPs for special rates, but arma and Sebastian
pointed out that only getting relays from one ISP would hurt Tor
security-wise. So different ISPs world-wide should be contacted.
So what do you think about this campaign?
I guess the first question is, have you ever been in this kind of
situation where people asked you on how to support the Tor project.
The second question is, is donating [3] working out quite well, i. e.
are a lot of people donating? Would a ?Sponsor a relay.? campaign hurt
these fund raising efforts?
[1] [2] [3]

@_date: 2010-11-19 09:44:47
@_author: Paul Menzel 
@_subject: Tor 0.2.1.26-1~~lenny+1: segfault with libcryto.so.0.9.8 
Am Mittwoch, den 17.11.2010, 12:04 -0500 schrieb Roger Dingledine:
I did so now.
(Aptitude is the recommended package manager by Debian since Lenny.)
Yes, I have. Two of them actually. They are 60 MB and 117 MB big. Is it
safe to make them publicly available somewhere? Are they of use for
someone since no debug symbols were installed when the core dumps were

@_date: 2010-11-12 23:49:57
@_author: Paul Menzel 
@_subject: Tor 0.2.1.26-1~~lenny+1: segfault with libcryto.so.0.9.8 
Dear Tor folks,
I noticed that Tor had crashed on my system. I am using Debian Lenny
with Tor 0.2.1.26-1~~lenny+1. The only thing I could find out about this
crash is the following line running `dmesg`.
        $ dmesg
        [?]
        [Several of these Treason uncloaked messages as you can see some seconds before the crash. I obfuscated the IP addresses.]
        [3301769.746795] TCP: Treason uncloaked! Peer xxx.xxx.xxx.xxx:60659/42859 shrinks window 1343914705:1343916145. Repaired.
        [3413085.371871] TCP: Treason uncloaked! Peer yyy.yyy.yyy.yyy:19595/45969 shrinks window 2416591117:2416591857. Repaired.
        [3604257.970658] tor[22506]: segfault at 21d4fc5 ip 7f1e78ba4ea6 sp 41188920 error 4 in libcrypto.so.0.9.8[7f1e78b21000+172000]
        [3604257.970707] type=1701 audit(1289305397.030:2): auid=4294967295 uid=102 gid=104 ses=4294967295 pid=22506 comm="tor" sig=11
So it could also be libcrypto is the culprit. `libssl0.9.8` is running
with `0.9.8g-15+lenny8` as version.
Is that a known problem? What other information can I provide to solve
that? Unfortunately I have not found out how to reproduce it yet.

@_date: 2010-10-13 14:47:42
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Dear Tor folks,
I am still seeing the same problem [1]. In April it used the whole limit
of 1 TB and hibernated after the limit was reached, but afterward it
only came back to around 100 GB per month.
Fast IT is not limiting the bandwidth in any way. I tested that. CPU and
memory are not utilized completely either.
Here is the output from arm.
        arm - anonymisierungsdienst (Linux...)     Tor 0.2.1.26 (recommended)
        anonymisierungsdien - 0.0.0.0:9090, Dir Port: 80, Control Port (open): 9051
        cpu: 0.5%    mem: 92 MB (13.0%)   pid: 1186    uptime: 14-15:11:11
        fingerprint: B3EC1BF5D7F7D724BA634D91BE5D22D2D7A70160
        flags: Exit, Fast, Guard, Named, Running, Stable, Valid
I only have
        AccountingMax 500 GB
set in `/etc/tor/torrc`.
So it must be a Tor problem. As you can see from the graphs the
bandwidth usage goes up and down quite often. What might be the reason?
Besides it is still below the available 100 Mbit/s.
So does rebalancing still have problems as indicated in Andrew?s answer
[1] [2] [3]

@_date: 2010-10-14 00:59:42
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Dear Thomas,
Am Mittwoch, den 13.10.2010, 10:31 -0400 schrieb Thomas S. Benjamin:
Yes, the relay is running on a virtual machine.
Xen is used. So I cannot check those entries, but according to the FAQ,
this should not be a problem [1]. I also checked with `top` on Dom0 and
DomU and the ressources are barley used.
The log just contains the normal `[NOTICE]` messages.
[1] [2]

@_date: 2010-10-14 11:18:12
@_author: Paul Menzel 
@_subject: Full bandwidth is not used. 
Am Donnerstag, den 14.10.2010, 08:32 +0200 schrieb Timo Schoeler:
I did not know about `xentop`. Thank you! But it also show that not all
resources are used.
There is, but that limit has not been reached yet.
Does anyone knowledgeable know, how I could trick the Tor rebalancing

@_date: 2010-10-19 12:27:07
@_author: Paul Menzel 
@_subject: torwatch - a little script to visualize traffic of a tor node 
Dear startx,
Am Dienstag, den 19.10.2010, 09:45 +0100 schrieb startx:
Really nice and impressing. There is also arm [1] which does not export
to HTML though.
I attach a patch for the README file. Those typos have to be corrected
in the Wiki too.
It would be great, if you could put torwatch under version control.
[1] Signed-off-by: Paul Menzel  README |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)
diff --git a/README b/README
index ccd60e5..7d256b6 100644
--- a/README
+++ b/README
 -1,11 +1,11  ABOUT
 torwatch is a script to visualize the traffic of a tor node. it is written in lua
-and uses the GD graphics library to draw the graphs. toewatch 0.1 was written
+and uses the GD graphics library to draw the graphs. torwatch 0.1 was written
 over a pint of lager in october 2010, so please do not blame the author if you
 find it incomplete, buggy or useless.
-i could not come up with a better name yet, if yoy have a brilliant idea, let me know.
+i could not come up with a better name yet, if you have a brilliant idea, let me know.
 torwatch is released unter the GNU Public Licence v3.

@_date: 2011-01-30 09:25:30
@_author: Paul Menzel 
@_subject: arm: NameError: global name 'bin' is not defined 
Dear Damian,
with revision 24158 I am getting the following error when I want to run arm.
        # ./arm
        Traceback (most recent call last):
          File "./src/starter.py", line 378, in             controller.init(conn)
          File "/arm/src/util/torTools.py", line 292, in init
            self._exitPolicyChecker = self.getExitPolicy()
          File "/arm/src/util/torTools.py", line 766, in getExitPolicy
            result = ExitPolicy("reject private", result)
          File "/arm/src/util/torTools.py", line 1541, in __init__
            lastHop = ExitPolicy(prefix + addr + suffix, lastHop)
          File "/arm/src/util/torTools.py", line 1558, in __init__
            self.ipAddressBin += ("%8s" % bin(int(octet))[2:]).replace(" ", "0")
        NameError: global name 'bin' is not defined

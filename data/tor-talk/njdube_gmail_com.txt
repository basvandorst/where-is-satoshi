
@_date: 2008-05-17 18:53:35
@_author: Nathaniel Dube 
@_subject: Ports 443 & 80 
I read somewhere that you can use ports 443 and 80 to help out people stuck behind really restrictive firewalls. ?I've been trying to manually configure Tor to do just that. ?I've configured the router for port forwaring. ?I'm pretty sure I did the same for my Linux firewall. ?I told the firewall to listen on ports 443/80 and redirect to 9090/9091. ?So the way I understand it is, Tor servers/clients should be trying to connect to ports 443/80 --> my router listens on 443/80 and bounces to my firewall --> my firewall listens to 443/80 and bounces to 9090/9091 which the tor server is really listening in on. ?I'm running openSUSE 10.3. ?I used yast to set the firewall. ?If I understand what I'm doing I use the "Masquerading" section to do firewall port forwaring. ?Which I'm pretty sure I did correctly but for some reason servers/clients are still unable to connect to my tor server.
I could really use some help getting this working. ?I can get the normal ports working no problem and have my server join the tor network. ?It's when I try doing the port 443/80 trick that things get harry.
Here are screenshots of my configuration screens I did for the port Here's portions of tor's config file. ?I Xed out stuff that might be considered a security risk on my part.
SocksPort 9050
SocksListenAddress 127.0.0.1
DataDirectory /home/tor/.tor
ControlPort 9051
ORPort 443
ORListenAddress 0.0.0.0:9090
DirPort 80
DirListenAddress 0.0.0.0:9091
Also, here's the log when I run tor in Konsole as root. ?I know, don't run Tor as root. ?I'm just doing that to test it to make sure it's working before I set it to start on boot under the "tor" user.
May 16 23:09:16.449 [notice] Tor v0.1.2.19. This is experimental software. Do not rely on it for strong anonymity.
May 16 23:09:16.450 [notice] Initialized libevent version 1.3b using method epoll. Good.
May 16 23:09:16.450 [notice] Opening OR listener on 0.0.0.0:9090
May 16 23:09:16.450 [notice] Opening Directory listener on 0.0.0.0:9091
May 16 23:09:16.450 [notice] Opening Socks listener on 127.0.0.1:9050
May 16 23:09:16.450 [notice] Opening Control listener on 127.0.0.1:9051
May 16 23:09:16.451 [warn] You are running Tor as root. You don't need to, and you probably shouldn't.
May 16 23:09:16.642 [notice] Your Tor server's identity key fingerprint is 'XXXXXXXXXXXXXXXXXXX'
May 16 23:09:18.240 [notice] We now have enough directory information to build May 16 23:09:18.438 [notice] Guessed our IP address as XXXXXXXXXXXXX.
May 16 23:09:21.856 [notice] Tor has successfully opened a circuit. Looks like client functionality is working.
May 16 23:09:21.856 [notice] Now checking whether ORPort XXXXXXX:443 and DirPort XXXXXXXXXXXX:80 are reachable... (this may take up to 20 minutes -- look for log messages indicating success)
May 16 23:29:18.900 [warn] Your server (XXXXXXXXXXX:443) has not managed to confirm that its ORPort is reachable. Please check your firewalls, ports, address, /etc/hosts file, etc.
May 16 23:29:18.900 [warn] Your server (XXXXXXXXXX:80) has not managed to confirm that its DirPort is reachable. Please check your firewalls, ports, address, /etc/hosts file, etc.

@_date: 2008-05-18 15:26:42
@_author: Nathaniel Dube 
@_subject: Ports 443 & 80 
I just tried something else and I managed to get it working. :-)  The problem was I was over thinking the solution.  I set the ports in torrc back to their defaults ORPort 9001 & DirPort 9030.
Instead, what I did was have the port forwaring on the router level...  443 --> 9001 & 80 --> 9030.  Then I had the router forward ports 9001 & 9030 to my private IP on the network.  So now I only need open ports 9001 & 9030 on my local software firewall.
This solution is the easiest and most efficient way I can see doing it.  I hope this helps out every one else.  Here's my entire torrc so every one knows what settings I used to get it working.
SocksPort 9050
SocksListenAddress 127.0.0.1
DataDirectory /home/tor/.tor
ControlPort 9051
Nickname [Left Out]
ContactInfo [Left Out]
ORPort 9001
DirPort 9030
It's with this torrc and hardware router settings I managed to get every thing working.  Thanks every one for all the help.

@_date: 2008-05-18 15:28:19
@_author: Nathaniel Dube 
@_subject: Ports 443 & 80 
I'm running Linux.  You can only open certain lower ports (such as 80 & 443) in root.  And it's bad to run tor as root.

@_date: 2008-05-18 15:33:40
@_author: Nathaniel Dube 
@_subject: ContactInfo? 
In the torrc file is the ContactInfo option.  Here's an example.
 1234D/FFFFFFFF Random Person My question is, what format should I put my GPG key?  Should I put it like ContactInfo C109AB9DD3436B3A12F148AABEC9FFB100883AA4 Nathaniel Dube Or like this?
ContactInfo 0x00883AA4 Nathaniel Dube

@_date: 2008-05-21 18:26:31
@_author: Nathaniel Dube 
@_subject: GPG Public Keys 
I noticed some of you have GPG keys.  I tried searching key servers so I can add your public keys to my list.  It would seem either I'm not searching the right servers or none of you have uploaded them.  So I'm asking that all of you respond with your public keys and I'll do the same.

@_date: 2008-05-21 20:26:49
@_author: Nathaniel Dube 
@_subject: GPG Public Keys 
Hash: SHA1
I ended up deleting everything in ~/.gnupg with the exception of the .gpg files and deleted my kgpg config file.  I restarted kgpg and some of the issues seemed to have gone away.  Though I'm still getting time out errors with a few key servers.  I managed to get your key.  For some reason kmail is giving me a [Invalid signature.] warning about your email. :-/

@_date: 2008-05-22 04:41:42
@_author: Nathaniel Dube 
@_subject: GPG Public Keys 
Hash: SHA1
One solution I might recommend is figuring out what you're doing different than every one else on the list who sign their email.  I've seen a hand full of people so far who sign their email to this list and kmail has no problem validating their signed messages.  It just seems to be yours.  I'm not trying to point fingers.  I'm just saying.

@_date: 2008-05-22 19:41:08
@_author: Nathaniel Dube 
@_subject: unsubscribe 
Hash: SHA1
Email [majordomo at seul.org] with the body [unsubscribe or-talk]

@_date: 2008-05-22 23:59:28
@_author: Nathaniel Dube 
@_subject: Default Exit Policy 
Hash: SHA1
I was looking at my server's stats at  and noticed that it has an exit policy that I didn't put in my config file.  For reject 0.0.0.0/8:*
reject 169.254.0.0/16:*
reject 127.0.0.0/8:*
reject 192.168.0.0/16:*
reject 10.0.0.0/8:*
reject 172.16.0.0/12:*
reject 75.63.1.109:*
reject *:25
reject *:119
reject *:135-139
reject *:445
reject *:465
reject *:563
reject *:587
reject *:1214
reject *:4661-4666
reject *:6346-6429
reject *:6699
reject *:6881-6999
accept *:*
The only part of that I have in my config file is [accept *:*].  Is the rest some kind of defaults?  I noticed one of the defaults is [reject *:587] which I'm wondering why that would be in the defaults.  That ports is used for sending secure email.  Port 25 I can understand but 587?!  I use that port for gmail.  I have two gmail accounts.  One is this one which is tied to my real name.  The other isn't and I use with Thunderbird and the torbutton addon.  I've noticed that sometimes I can't send email and sometimes I can.  It all depends on the current circuit.  After seeing the defaults exit policy I can see why I've been having the issues with my email.
The point of this email?!  I wish to understand the rational of having the defaults block ports used for secure encrypted protocoles.

@_date: 2008-05-23 00:05:37
@_author: Nathaniel Dube 
@_subject: Router Flags 
Hash: SHA1
Can someone explain what these router flags mean?  Some of them I have a good guess what they mean but I decided to list them all.
Bad Directory
Bad Exit

@_date: 2008-05-26 20:04:16
@_author: Nathaniel Dube 
@_subject: Default Exit Policy 
Hash: SHA1
What about creating a white list/black list for domains in Tor.  That way Tor could allow certain domains (such as google.com) to bypass the default blocks.  This way you would be maintaining security while adding

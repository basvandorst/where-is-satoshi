
@_date: 2006-11-03 16:56:40
@_author: Aioe 
@_subject: Tor and NNTP 
I'm the owner of a large *public* news server (see  )  which allows a (restricted)  read and write access to USENET groups without requiring an authentication. I'm also a novice with Tor. An increasing number of tor users is choosing my server for reading and posting on USENET. In order to avoid SYN DDOS and floods, my server accepts only a determinate number of daily connections and bytes per IP. Trespassers are banned for a day. While a single (end) proxy serves a single client the total activity generated on my host by that tor router usually remains under this limit. When more than a client uses the same proxy, often that tor router exceeds those values because the barrier is calibrated assuming a single client per IP. Every IP can also post only 25 messages per day which is a reasonable limit for a single client but it isn't enough when multiple users share the same IP.
Therefore sometimes some tor proxy is banned from my server due an excessive number of connections, bytes or posts.
I need a (server side) way to separate the tor users from the other ones: is this possible?
I'm supposing to setup an "hidden service" which redirects all tor users to a non default *local* NNTP port in order to treat them differently from the other clients. In this way, when the tor users access the server from the main DNS system (as nntp.aioe.org) they're still subjected to the standard rules that are applied to all clients but when they use the .onion domain a different (less restrictive) policy can be applied to them.  Is this a right way? If so, does tor allow to be configured in order to handle only my "hidden service" without providing any other tor service (my ISP doesn't like proxy and i've not much bandwidth)?
Paolo Amoroso (Aioe)

@_date: 2006-11-06 15:17:02
@_author: Paolo Amoroso 
@_subject: Tor and NNTP 
this is untrue for NNTP protocol.
Every newsreader makes use of 1 to 4 persistent internet connections. The client establishes them then uses the existing ones for all puroposes without opening new ones. This makes low the number of total required connections.
90% of my users establishes less than 100 connections per day, 94% less then 200 and only 1% more than 300. The maximum number is 500 per day.
NNTP is an uncommon protocol, only a few people use it. Of course, large routers may be banned but they're well known and i can set a different ip based policy if needed.
A lot of clients makes use of automatic news agents like suck which open a single connection per time. If they're run every a quarter of hour, a single user consumes only 96 connections per day.
Of course, this problem exists for large networks but their routers are well known and i can define a different policy for these IPs (the tor access works in this manner)

@_date: 2007-04-12 12:15:31
@_author: Aioe 
@_subject: NNTP + Tor Pt 2 
In the last months i've spent a lot of time trying to optimize the TOR interface with my public news (USENET) server (aioe.org) which is also available through an hidden service at news://w4rwbqnaa6oopu5l.onion .
I'm trying to write a short document that describes this process and i
wish your opinions about some points.
1. The onion domains are extremely slow. When a client tries to open a
connection with a news server, an istance of nnrpd is loaded by xinetd and it's kept in memory until that client closes the connection or an amount of time is elapsed without receiving anything from that client. This is called 'initial timeout' and it's usually set to a reasonably
low amount of seconds (2) in order to quickly disconnect the clients in
order to save resources. When a client tries to establish a connection
with my server through an onion domain, a short initial timeout isn't
enough and the server closes the connection before receiving the client's
request. Which is the lowest amount of time that is always enough for TOR? Four seconds seems to be enough, is this right?
2. TOR network is used by many (wannabe) hackers. An improper use of
some NNRP command (XOVER) can slow down the server, control messages
are forbidden, spam is not welcome. In the last months, aioe.org was
plagued by several attacks delivered through TOR. This is becoming a
problem because the server is forced to block the TOR interface in
order to avoid more serious damages. Which kind of protections do you
choose for the hosts that are serving TOR services (ie mail servers or
web servers)?

@_date: 2007-07-10 14:20:58
@_author: Paolo Amoroso 
@_subject: Next news from Germany 
i've mirrored your site at
 which will be available in the next hours
(you'll need the daily update of DNS cache).
if you wish to continue to develop this site, i'm ready to offer you a
sort of "hosting" that allows you to write it without legal risks.
Note that the german law doesn't forbid to publish any kind of
technical documentation so your site is still legal also in germany.

@_date: 2007-05-09 09:33:30
@_author: Aioe 
@_subject: Anonymizing Thunderbird News w/ Tor 
Il giorno Tue, 08 May 2007 19:19:26 -0500
"stephen maturin"  ha scritto:
this should be enough

@_date: 2007-11-11 10:06:36
@_author: Paolo Amoroso 
@_subject: 20090101 
On Sun, 11 Nov 2007 09:03:19 +0000
since i'm italian and i don't know your language, i'm curious about
which data must be retained by each service.
Could you list them, in english?


@_date: 2006-02-21 20:09:33
@_author: Przemyslaw Orzechowski 
@_subject: No DirPort in router.desc 
2006/2/21, Mike Zanker :
Im quite new to Tor but i think its normal reaction of the program
that your dir port wasnt included in first announce (descriptor
publication) couse the program was uncertain if the port was open or
not (better ommit a possibly closed port than publish erronous data)
btw you can force the announce without previous check (development
version only)

@_date: 2006-06-15 18:33:09
@_author: Przemyslaw Orzechowski 
@_subject: Torrc configurator 
if the tor server is runing You can try to open connection to it
directly from php (if your server configuration allows it) here is the
command that allows this
2006/6/15, tor_user :

@_date: 2006-06-16 12:55:40
@_author: Przemyslaw Orzechowski 
@_subject: Torrc configurator 
yes just checking if you can open a socket isnt enough you shoud send
valid tor packet and wait for valid answer
i know it could be done in php (sending a tcp packet and reciving
answer) but never tried it myself
2006/6/16, Ringo Kamens <2600denver at gmail.com>:

@_date: 2006-06-17 18:25:08
@_author: Przemyslaw Orzechowski 
@_subject: OSX: Vidilia (Does not recognize that tor is already running) 
if you configure tor on win2k to run as a service there is the same problem
with vidalia
2006/6/17, numE :

@_date: 2007-07-21 11:06:10
@_author: Przemyslaw Orzechowski 
@_subject: Tor server not seen 
2007/7/17, phobos at rootme.org :
First thing what is your internet connection setup ?
If you are using TPsa for your internet connection my questions are:
What kind of modem/Router dou you have?
If its usb attached modem ie sagem 800 the only thing to check for is
your local firewall setup, but if you are using LiveBox router then
You should check that You configured port forwarding on it.
(as far as i know TPSA and Dialog are not blocking Tor)

@_date: 2007-06-10 20:15:26
@_author: Przemyslaw Orzechowski 
@_subject: Some of my observations on runing new alpha version of Tor 
Yesterday I downloaded and installed newest alpha version of Tor and
installed it as a service under windows XP Pro using command Tor.exe
(it was a new install after frersh windows instalation so no config
files or Tor directories were present)
the service was created but ..
Tor directory was created ok under C:\Documents and
Settings\LocalService\Dane aplikacji\
(im using Polish localized version of windows)
the contents of Tor directory were as follows
cached-status (subdirectory)
there was no torrc file created so i made one myself
when i did this and tried to restart Tor service it failed with an error
Contents of system log
Typ zdarzenia:	B??d
?r?d?o zdarzenia:	Service Control Manager
Kategoria zdarzenia:	Brak
Identyfikator zdarzenia:	7023
Data:		2007-06-10
Godzina:		13:12:46
U?ytkownik:		Brak
Komputer:	xxx
Us?uga Tor Win32 Service zako?czy?a dzia?anie; wyst?pi? nast?puj?cy b??d:
W us?udze wyst?pi? wyj?tek podczas obs?ugi ??dania kontroli.
Aby znale?? wi?cej informacji, zobacz
 w Centrum pomocy i obs?ugi
I then started to change things in torrc and figured out that enabling
any options related to Tor server functions triggers this error
(everything works just fine if Tor runs as client only)
Any attempt to set any of the options related to server
functionalities ie Orport or nickname results in an error
Then I tried to run Tor as nonservice from my local nonadmin account
and Tor started as server normally
So for now im using Tor from separate unprivileged user account
Any suggestions how to solve this situation would be welcome

@_date: 2007-06-13 21:46:37
@_author: Przemyslaw Orzechowski 
@_subject: Some of my observations on runing new alpha version of Tor 
Ok first i will attempt to translatie the complete error message:
Event type: Error
Event source: Service Control Manager
Event category:    None
Event Id:        7023
Time:                13:12:46
User:             None
Computer:       xxx
Service "Tor Win 32 Service" terminated, following error occured:
In the service occured an exception during access control demand.
im not sure if the translation of the description field is clear
enough and completly correct
now for the rest
first of all i didnt notice the problem with stable bundle when
creating the service thru vidalia.
as it turned out vidalia creates the service somewhat different than
tor when called from commandline
Vidalia creates service with current user credentials?
not completly sure bout that, but when you inspect the service (then
go to login tab it states that the service runs with credentials of
local system account (upper option checked)
when creating the service with Tor from comand line the lower option
is selected and account data for LocalService is present
one more thing that is different is that when creating the service
with following command line >tor.exe --service install -options -f
c:\torrc ControlPort 9051 all options are surrounded with "" ie
service path looks something like this "C:\Program Files\Tor\tor.exe"
--nt-service "-f" "c:\torrc" "ControlPort" "9051" when created with
vidalia it looks like this
"C:\Program Files\Tor\tor.exe" --nt-service -f c:\torrc ControlPort 9051
but i'm not sure if this is critical (no logs from tor when i try to
start it with this tor service call)
just the log entry i mentioned earlier
next try installing the service without -options and placing torrc in
localservice application data tor directory with with my version ow
windows is
C:\Documents and Settings\LocalService\Dane aplikacji\tor
tor service installed with following command: C:\Program Files\Tor>tor
--service install
Running on a Post-Win2K OS, so we'll assume that the LocalService account exist
IMPORTANT NOTE:
    The Tor service will run under the account "NT AUTHORITY\LocalService".  Th
is means
    that Tor will look for its configuration file under that
    account's Application Data directory, which is probably not
    the same as yours.
Done with CreateService.
Service installed successfully
Service failed to start : W us?udze wyst?pi? wyj?tek podczas obs?ugi ??dania ko
Thats all what i get in commandline window servicepath is as follows
"C:\Program Files\Tor\tor.exe" --nt-service login credentials of localservice
in system log are 3 entries about
1. succesfull start signal sent to process
2. service entering stopped state
3 previously mentioned error
here are contents of my torrc file that caused the error)
SocksPort 9050 # what port to open for local application connections
SocksListenAddress 127.0.0.1 # accept connections only from localhost
Log debug file C:\Documents and Settings\LocalService\Tor.log.txt
ControlPort 9051
Nickname popo-test
contents of logile after the service failed none the logfile is not even created
when i remove Nickname line everything starts normally no error
messages and logfile looks as follows
Jun 13 20:48:42.046 [notice] Tor 0.1.2.14 opening new log file.
Jun 13 20:48:42.046 [debug] parse_dir_server_line(): Trusted dirserver
at 128.31.0.34:9031 (46DB)
Jun 13 20:48:42.046 [debug] parse_dir_server_line(): Trusted dirserver
at 128.31.0.34:9032 (E45D)
Jun 13 20:48:42.046 [debug] parse_dir_server_line(): Trusted dirserver
at 86.59.21.38:80 (1F85)
Jun 13 20:48:42.046 [debug] parse_dir_server_line(): Trusted dirserver
at 140.247.60.64:80 (F5FC)
Jun 13 20:48:42.046 [debug] parse_dir_server_line(): Trusted dirserver
at 194.109.206.212:80 (EAD6)
Jun 13 20:48:42.046 [info] or_state_load(): Loaded state from
"C:\Documents and Settings\LocalService\Dane aplikacji\tor/state"
Jun 13 20:48:42.484 [info] tor_mmap_file(): Couldn't mmap file
"C:\Documents and Settings\LocalService\Dane
aplikacji\tor/cached-routers": File not found
Jun 13 20:48:42.484 [info] update_router_have_minimum_dir_info(): We
have 0 of 5 network statuses, and we want more than 2.
Jun 13 20:48:42.484 [notice] I learned some more directory
information, but not enough to build a circuit.
Jun 13 20:48:42.484 [info]
update_router_descriptor_client_downloads(): Not enough networkstatus
documents to launch requests.
Jun 13 20:48:42.484 [info]
update_router_descriptor_client_downloads(): Not enough networkstatus
documents to launch requests.
Jun 13 20:48:42.484 [info] update_networkstatus_client_downloads():
For 5/5 running directory servers, we have 0 live network-status
documents. Downloading 5.
Jun 13 20:48:42.484 [info] router_pick_directory_server(): No
reachable router entries for dirservers. Trying them all again.
Jun 13 20:48:42.484 [info] router_pick_directory_server(): Still no
reachable router entries. Reloading and trying again.
Jun 13 20:48:42.484 [info] tor_mmap_file(): Couldn't mmap file
"C:\Documents and Settings\LocalService\Dane
aplikacji\tor/cached-routers": File not found
Jun 13 20:48:42.484 [info] directory_get_from_dirserver(): No router
found for network status; falling back to dirserver list
Jun 13 20:48:42.484 [debug] directory_initiate_command(): private 0,
want_to_tunnel 0.
Jun 13 20:48:42.484 [debug] directory_initiate_command(): initiating
network-status fetch
Jun 13 20:48:42.484 [debug] connection_connect(): Connecting to [scrubbed]:80.
Jun 13 20:48:42.484 [debug] connection_connect(): Connection to
[scrubbed]:80 in progress (sock 396).
Jun 13 20:48:42.484 [debug] connection_add(): new conn type Directory,
socket 396, n_conns 3.
Jun 13 20:48:42.484 [debug] write_to_buf(): added 4 bytes to buf (now 4 total).
Jun 13 20:48:42.484 [debug] write_to_buf(): added 221 bytes to buf
(now 225 total).
Jun 13 20:48:42.484 [debug] write_to_buf(): added 34 bytes to buf (now
259 total).
Jun 13 20:48:42.484 [info] update_router_have_minimum_dir_info(): We
have 0 of 5 network statuses, and we want more than 2.
Jun 13 20:48:42.484 [info] or_state_save(): Saved state to
"C:\Documents and Settings\LocalService\Dane aplikacji\tor/state"
Jun 13 20:48:42.484 [debug] conn_read_callback(): socket 212 wants to read.
Jun 13 20:48:42.484 [debug] connection_handle_listener_read():
Connection accepted on socket 408 (child of fd 212).
Jun 13 20:48:42.484 [debug] connection_add(): new conn type Socks,
socket 408, n_conns 4.
Jun 13 20:48:59.390 [notice] Got stop/shutdown request; shutting down cleanly.
Jun 13 20:48:59.484 [debug] global_read_bucket now 6291456.
Jun 13 20:48:59.500 [info] or_state_save(): Saved state to
"C:\Documents and Settings\LocalService\Dane aplikacji\tor/state"
if its ok next time i will just attach a file with logdump
if Tor runs as a client everything works ok but if i enable anything
server related tor dies before even being able to write something into
logfile (not only serrver but dns tordns server port causes the same
(functionality that is firs avaiable in this version of Tor)
Today i checked latest stable vidalia bundle but with Tor service
created from commandline same results as with alpha
Tomorow I will try to get some archival versions and test them (i
usually used vidalia sience its there, and had quite long pause with
(over one year without Tor installed) but i will try to determine if
older versions have same problem on my system
0.1.2.14 - error
0.1.0.17 - error (no mather what credentials will not run as service)
I will test other versions as soon as i have some free time and report
with results
2007/6/11, phobos at rootme.org :

@_date: 2007-06-14 08:45:30
@_author: Przemyslaw Orzechowski 
@_subject: Some of my observations on runing new alpha version of Tor 
Thanks scar it was really that - in nickname that prevented Tor from
starting as service but it started just fine when run from commandline
what confused me
Now everything seems to work ok (runing alpha as popotest as service)
now i will test those new features like dns resolving and passthru
bandwidth limiting
2007/6/13, scar :

@_date: 2008-12-03 22:45:00
@_author: Przemyslaw Orzechowski 
@_subject: [Fwd: (Probably) a known problem?] - cant run a relay node 
I was not online for fiew days but i think i might have a solution for
Your problem (worked for me)
1) in torrc add following line
ServerDNSResolvConfFile c:\resolv.conf
and inside of resolv.conf put following 3 lines
nameserver xxx.xxx.xxx.xxx
nameserver yyy.yyy.yyy.yyy
search your.primary.domain
where xxx.xxx.xxx.xxx and yyy.yyy.yyy.yyy are ip adresses of Your DNS servers
the third line is optional and is used to instruct linux computers for
what domain above DNS servers are authoritative (not sure if its
needed but i added it)
after those changes everything started to work (im not using vidalia
to run Tor i configured it as a service so its running whenewer my
mashine is up
Hope this will be helpfull for You
2008/12/3 Praedor Atrebates :

@_date: 2008-11-10 09:51:00
@_author: Przemyslaw Orzechowski 
@_subject: Problems runing Tor on Vista x64 
Hi I tried to run Tor on my Vista Ultimate x64 but for some reason
cant get it started only messages I get are as follows
Nov 10 09:34:42.387 [notice] Tor v0.2.0.31 (r16744). This is
experimental software. Do not rely on it for strong anonymity.
(Running on Windows "Longhorn" Service Pack 1 [workstation] {terminal
services, single user})
Nov 10 09:34:42.445 [err] Error from libevent: evsignal_init:
socketpair: No error
Same problem with latest stable and alpha.
No mater what I type on commandline or put into torrc result is always the same.
Tried runing it with elevated (admin) privileges and with standart
user privileges no difference.
Any sugestions would be welcome

@_date: 2008-11-12 09:29:29
@_author: Przemyslaw Orzechowski 
@_subject: Problems runing Tor on Vista x64 
Will install debuger today when im back from work
as for firewal this windows mashine is behind quite restrictive linux
router so i disabled builtin firewall long time ago but its possible
that my Antyvirus is blocking something will disable it and recheck
So far thanks for Your advices will report back with results around
19:00 GMT today

@_date: 2008-11-12 23:06:35
@_author: Przemyslaw Orzechowski 
@_subject: Problems runing Tor on Vista x64 
Problem partialy solved after several attempts I figured out that my
antyvirus software was responsible for Tor start failure. I modyfied
its config to ignore any activity from Tor and Vidalia and tor is now
working for me in client only mode.
Now trying to start server mode and making Vidalia work with it.
If relay is functioning is unknown to me Vidalia sees Tor start till
lis 12 23:00:52.008 [Powiadomienie] Tor has successfully opened a
circuit. Looks like client functionality is working.
lis 12 23:00:52.009 [Powiadomienie] Bootstrapped 100%: Done.
in task manager i can see Tor runing and slowly increasing its size so
i assume relay is working ok only vidalia looses connection to Tor
I can open webpages via Tor so client functionality is working 100%
Will make some more tests tomorow
For now I can tel Kaspersky Internet Security 2009 makes many problems with Tor

@_date: 2008-11-12 23:56:10
@_author: Przemyslaw Orzechowski 
@_subject: Problems runing Tor on Vista x64 
Ok i finally figured out why server funcionality didn't work
Problem Tor had a problem to figure out my systems DNS config so I
overrided it with a swich in torrc wich caused Tor to read DNS config
from file
After this everything started to work except Vidalia (somehow Tor
started from commandline is not visible to it)

@_date: 2008-11-13 16:59:01
@_author: Przemyslaw Orzechowski 
@_subject: Problems runing Tor on Vista x64 
If i do this Vidalia ends with a message that Tor stopped working
altrough it is working just fine.
I mean that instance started from commandline.
I think this might be somehow related to Kaspersky but i can live with that.
Important is that node is working (according to logs both client and
server part of Tor is working)
My node is also visible on TorStatus page as active wich confirms its
proper operation.
Starting Tor from Vidalia with same config file causes some kind of
hang Vidalia displays yellow onion forever and no trafic is generated
by Tor
I can use Tor without Vidalia. No problemswith that, but if there are
any devs interested in this case Im ready for further testing and
reporting results. I just need to know what to test.
Thanks for Your advices that helped to start Tor on my Vista x64

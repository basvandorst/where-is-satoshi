
@_date: 2007-12-26 15:24:25
@_author: Jan Luehr 
@_subject: Running on embedded hardware 
I'm trying to run a tor client on my router in order anomyise my network.
- System is: Asus WL-500G (32MB Ram)
- OS is: OpenWRT whiterussian (Linux: 2.4.30)
- tor is v0.1.2.18 self-built, 'cause whiterussian tor binanries are a little bit out-dated ;) libraries:
Sadly, tor is quite instable and crashes a lot. Furthermore it has come to my attention that tor consumes a lot of ram (and tmp - ramdisk - space), since the amount of available ram was down to 600KB when I was surfing by tor.
(Tor can use up to 15 MB - for ~./tor caches and runnig (ram))
I built tor with ./configure --prefix=/opt/tor -with-libevent-dir (...) --with-ssl-dir (...) Does it look like tor is runnig out-of-ram? Are there any special options compile/runtime to run? E.g. in order to limit consumed ram / cache-size, etc.?
stracing tor gave me:
brk(0x10271000)                         = 0x10271000
socket(PF_INET, SOCK_STREAM, IPPROTO_TCP) = 18
fcntl64(18, F_SETFL, O_RDONLY|O_NONBLOCK) = 0
connect(18, {sa_family=AF_INET, sin_port=htons(9030), sin_addr=inet_addr("85.181.123.198")}, 16) = -1 EINPROGRESS (Operation now in getsockname(18, {sa_family=AF_INET, sin_port=htons(1176), sin_addr=inet_addr("84.63.7.196")}, [16]) = 0
time(NULL)                              = 1198678631
brk(0x10273000)                         = 0x10273000
brk(0x10276000)                         = 0x10276000
brk(0x10277000)                         = 0x10277000
brk(0x10278000)                         = 0x10278000
brk(0x10279000)                         = 0x10279000
brk(0x1027a000)                         = 0x1027a000
brk(0x1027b000)                         = 0x1027b000
brk(0x1027c000)                         = 0x1027c000
brk(0x10282000)                         = 0x10282000
time(NULL)                              = 1198678631
time(NULL)                              = 1198678631
time(NULL)                              = 1198678631
time(NULL)                              = 1198678631
brk(0x10284000)                         = 0x10284000
time(NULL)                              = 1198678631
time(NULL)                              = 1198678631
time(NULL)                              = 1198678631
time(NULL)                              = 1198678631
time(NULL)                              = 1198678631
time(NULL)                              = 1198678631
time(NULL)                              = 1198678631
time(NULL)                              = 1198678631
getpid()                                = 1077
time(NULL)                              = 1198678631
time(NULL)                              = 1198678631
time(NULL)                              = 1198678631
getpid()                                = 1077
getpid()                                = 1077
getpid()                                = 1077
getpid()                                = 1077
time(NULL)                              = 1198678631
getpid()                                = 1077
--- SIGILL (Illegal instruction) @ 0 (0) ---
+++ killed by SIGILL +++
Thanks in advance,
Keep smiling

@_date: 2007-12-26 16:21:10
@_author: Jan Luehr 
@_subject: Running on embedded hardware 
Am Mittwoch, 26. Dezember 2007 schrieb coderman:
./configure --prefix=/opt/tor --with-libevent-dir=/opt/libevent --with-ssl-dir=/opt/openssl
(openssl - From OpenWRT - copied from openwrt/build_mipsel/openssl-0.9.8d/) openssl, libz were built by OpenWRT makescripts - as described here: libevent, tor native - with (some errors strange appeared on cross-compiling tor)
Keep smiling

@_date: 2007-12-26 16:48:37
@_author: Jan Luehr 
@_subject: Running on embedded hardware 
Am Mittwoch, 26. Dezember 2007 schrieb coderman:
ehm,... since everything is native, ./configure has no problem detecting it:
checking build system type... mipsel-unknown-linux-gnu
checking host system type... mipsel-unknown-linux-gnu
Ah ok, I'll give it a try. Afair, libpthread is not in OpenWRT - I copied it from the mipsel_buildroot. Maybe the platform doesn't support posix Keep smiling

@_date: 2007-12-30 23:02:35
@_author: Jan Luehr 
@_subject: Running on embedded hardware 
Am Sonntag, 30. Dezember 2007 schrieb Juliusz Chroboczek:
er, is it "offiical released" by now? Last time I checked it was in some kind of pre-beta-release (without webgui, etc.)
I'm not crosscompiling. Well, compiling without threads solved the issue. However, surfing is somehow slow compared to my notebook.
Keep smiling

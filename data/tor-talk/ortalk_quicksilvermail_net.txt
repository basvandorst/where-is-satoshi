
@_date: 2004-12-22 13:35:07
@_author: or-talk@quicksilvermail.net 
@_subject: No Data error connecting with hidden services 
I hope this is the right place to ask my question.
I have added socks proxy support to my remailer client QuickSilver. I find I can connect and use Tor for various protocols (SMTP, HTTP, FTP, NNTP, POP3) without problems. However, when I try to connect with a hidden service, for example panta remailer's service rjgcfnw4sd2jaqfu.onion, I get an immediate 'No Data' error. I expect this is a problem with my email client, but I have no idea what to look into to correct it. If anyone could shed some light on this I would be very appreciative.
Richard Christman

@_date: 2004-12-22 23:48:59
@_author: or-talk@quicksilvermail.net 
@_subject: No Data error connecting with hidden services 
Thanks so much. You have provided quite a bit of info for me to go on. The actual workings of the 4a level were pretty vague to me. I understand a bit more now. The internet controls I am using are from a fellow in Belgium and they are generally excellent (  ). It could well be that they are doing the host lookup. Fortunately, he provides full source so if modification is necessary, it can be done.
Let me take a few days and study what you have told me. I will use the sniffer you suggested, the Tor debug log and do some stepping through the socket code of the ICS internet controls. I really feel you have given me a lot to work with here!
Thank you again. I will return!
Richard Christman

@_date: 2004-12-26 15:51:29
@_author: or-talk@quicksilvermail.net 
@_subject: No Data error connecting with hidden services 
Hi Dashiell,
I found the 'No data' problem, when accessing hidden services, to be as you suggested. The internet controls QS uses do a dns lookup in socks level 4a. Then it passed the the ip address to Tor in the same manner as if it had not done the lookup itself.
Fortunately, it took a grand total of 6 lines of code to fix the problem! In the dns lookup function, there was a small section devoted to bailing out of the lookup if the hostname specified was actually a dotted ip address. Using this as a model, I set the dnsresult to the hostname and bailed out in the same manner. That has done the trick nicely!
I'm puzzled about the implementation of 4a in the socket code. I know you said many programs do this. It looks to me like this is not only incorrect but completely defeats the purpose of level 4a. If QS fails the dns lookup then it never gets to the point of passing anything to Tor. Is that correct? Is this worthy of telling the author of the controls about it?
Thank you so much for your assistance. On reading your reply to me it is apparent that you took the time to scout out my website and even go through my betas mailing list to come up to speed on where QS is in relation to Tor. It was very generous use of your time and I appreciate your efforts. I'm glad I joined this list and have somewhere to go with my questions. I imagine I will have more!
Richard Christman

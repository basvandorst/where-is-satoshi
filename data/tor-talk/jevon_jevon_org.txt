
@_date: 2007-07-27 15:59:15
@_author: Jevon Wright 
@_subject: Windows XP SP2 + Tor = instant crashes 
Hi all,
I'm having problems running the latest versions of Tor on my Windows machine. I'm not sure if this should go on the tor-talk or the tor-dev list. Tor used to work fine on my system until about a few months ago, when it started to crash on Tor startup.
Theres no information in the debug logs:
  Jul 27 11:22:10.062 [notice] Tor 0.2.0.2-alpha (r10455) opening new log file.
  Jul 27 11:22:10.062 [debug] parse_dir_server_line(): Trusted dirserver at 128.31.0.34:9031 (FFCB)
  [...]
  Jul 27 11:22:10.062 [info] or_state_load(): Loaded state from "C:\Documents and Settings\Jevon\Application Data\tor\state"
  Jul 27 11:22:10.406 [debug] mp_pool_new(): Capacity is 1008, item size is 520, alloc size is 524160
  Jul 27 11:22:10.406 [debug] check_signature_token(): Signed router descriptor hash starts 735A6D68
  Jul 27 11:22:10.406 [debug] check_signature_token(): Signed router descriptor hash starts ED15C36B
[... lots more]
and then it crashes with very little debug information. I've tried both 0.1.2.15 and 0.2.0.2-alpha. Running gdb returns this:
  [...]
  Jul 27 12:51:56.765 [info] or_state_load(): Loaded state from "C:\Documents and Settings\Jevon\Application Data\tor/state"
  Program received signal SIGSEGV, Segmentation fault.
  0x77c47c9a in strstr () from /cygdrive/c/WINDOWS/system32/msvcrt.dll
  (gdb) bt
    0x77c47c9a in strstr () from /cygdrive/c/WINDOWS/system32/msvcrt.dll
    0x012a2501 in ?? ()
    0x012a2502 in ?? ()
    0x012a2501 in ?? ()
    0x0046c83b in router_parse_list_from_string (s=0x22fec0,       saved_location=SAVED_IN_CACHE) at routerparse.c:660
    0x00467bb6 in router_load_routers_from_string (
      s=0x12a2501 "router Dragonlord 89.12.139.219 9001 0 0\nplatform Tor 0.1.1.26 on Windows XP Service Pack 2 [workstation] {terminal services, single user}\npublished 2007-04-09 23:03:52\nopt fingerprint 3110 C07F 81E0 "...,
      saved_location=SAVED_IN_CACHE, requested_fingerprints=0x0)
      at routerlist.c:2312
    0x0046815b in router_reload_router_list () at routerlist.c:375
    0x0044b430 in do_main_loop () at main.c:1234
    0x0044d851 in tor_main (argc=1, argv=0xd640d0) at main.c:2494
    0x004720ca in main (argc=1, argv=0xd640d0) at tor_main.c:22
According to the Tor FAQ [1] this could be a problem with OpenSSL etc. So I tried to compile Tor with Cygwin, but I'm having trouble compiling libevent-1.2 along with most other cygwin users [2] so I've had no luck compiling the latest version.
I'm running Windows XP SP2 with all the latest updates on an Intel Core2 6300 with plenty of RAM.
Any other ideas?
[1]: [2]:

@_date: 2007-07-27 16:14:25
@_author: Jevon Wright 
@_subject: Windows XP SP2 + Tor = instant crashes 
That worked great, Tor starts up with no problems now. The cached-status and cached-routers file is 1.9 MB compressed, if you'd like me to post it I can stick it online somewhere. The "dragonlord" entry in the cached-routers status is the last entry in the file, and I've attached the last two entries to this e-mail.
Thanks again!

@_date: 2007-07-27 16:51:04
@_author: Jevon Wright 
@_subject: Windows XP SP2 + Tor = instant crashes 
Sure thing, you can get it at  I couldn't get Tor to work with:
- vidalia-bundle-0.2.0.2-alpha-0.0.12.exe
- vidalia-bundle-0.1.2.12-rc-0.0.11.exe
- vidalia-bundle-0.1.2.13-0.0.11.exe
So no, I didn't try it with 0.1.2.15, I assumed that the latest alpha would already have the .2.15 code in it... my bad. I can try it with .2.15 explicitly if you'd like.

@_date: 2007-07-27 19:03:49
@_author: Jevon Wright 
@_subject: Windows XP SP2 + Tor = instant crashes 
Yes it appears that .2.15 works fine as well. Thanks again :)

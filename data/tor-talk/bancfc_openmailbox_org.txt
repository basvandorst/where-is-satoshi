
@_date: 2014-10-17 02:58:50
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk] Whonix KVM for Linux users 
I wanted to let readers know that there is a KVM version of Whonix for Linux users that has been around for quite some time at this point. It just crossed my mind that I hadn't mentioned here until now.
I am making this announcement so those who don't follow our project but may be interested, could try it out.
Our latest release, in the form of qcow2 images could be found here:
The signing key for image verification could be fetched from here:
For setup instructions and other details please refer to:

@_date: 2014-09-11 00:15:16
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk] Secure way to set time using Hidden Service descriptors 
Hi. As you may already know, NTP doesn't work over Tor and even if it did its untrusted and unauthenticated design leaves systems open to clock skew attacks that could unmask hidden services. What are your thoughts on having an anonymity distro, that Torrifies all traffic, depend on Hidden Service descriptors for secure timesyncing purposes?
N.B. I have suggested a mechanism that Tor itself incorporate a mechanism to broadcast time from relays to clients, but until this is realized I'm thinking that the proposed alternative is a good drop in.
The only weakness identified is that if a Hidden service forges its descriptor timestamp deliberately, it could perform a time replay attack within an 18 hour window. How serious is this?
My proposal is to have the time synchronizer daemon query the DHT for specific Hidden Service descriptors from the HSDir Authorities without actually connecting to them and calculate a more finegrained time to set. Here is why I think its a good idea:
* Descriptors contain a timestamp field which shows the time they are generated.Time reported is number of microseconds since 1970.
* Descriptors are signed by the HS and cannot be spoofed by the * Descriptors are refreshed hourly.
* A "malicious" HS that want to fool our time check has to go out of its way and forge the timestamp in its descriptor. If they are doing this by just running with a wrong clock, they will make themselves inaccessible.
* According to rend-spec, the damage is much limited (only and 18 hour window) before HSDir Authorities reject these forgeries.
* There does exist stable, available and friendly HS besides the TPO one that was taken down. The only addresses that will be used are those of trusted organizations that will not carry out the forging attacks described above. These will be Whistleblowing and Freedom friendly sites. Some suggestions: Wikileaks, RiseUp (each service they provide has a unique HS address assigned), TheNewyorker's SecureDrop service and probably more.
* The way to go about this is to fetch descriptors without connecting. (how? please describe if it can be done. Its probably best so we don't overload these organization's hidden servers)
* The timestamps will be averaged to get a more accurate reading.

@_date: 2015-08-23 20:30:27
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk] What's to be Done 
Fantastic talks by Jacob as always, he hammers home many major system hardening ideas. I summarized the points in the talks and will build on them with more ideas and information.
I encourage everyone to see the DebConf talks by all means:
Debian Hardening topics covered:
* Disabling Avahi and Samba NFS by default
* Packaging grsecurity/PaX, Pond, xmpp-client, Tor Browser, Tor-launcher and pluggable transports - work currently being done on Tor related packages as of 2015
* Adoption of Subgraph Oz sandboxing framework
* Cleaning vulnerable legacy networking protocols out of the Debian * Distribution of Tor in a base Debian distro
* Giving a sshd onion service as an install time option
* Encryption of system as default on install time
* Address Sanitizer and compiler time hardening of packages
* Adoption of new rootless, type safe DHCP daemon written by him and Dan * Adoption of tlsdate or alternative to unsafe NTP
* Gnuk libre hardware keycard adoption
* Encrypting APT connections to prevent package metadata leaks and make exploiting problems in APT harder
Other topics:
* Blacklisting mouse jigglers in systemd
* Trust problems with proprietary hardware
* NSA Nightstand program WiFi stack injector
* Reversing targeted malware with Hercules by running Irssi IRC client honeypot on a grsecurity enabled environment inside a s390 emulated system all running on the libre Milkymist FGPA
* Non-adversarial forensics to verify systems integrity and compromise * Ways to verify system firmware compromise thru dumping images and archiving them
* Source code review in addition to reproducible builds to detect maintainer coercion situations
* grsecurity has its own superior Mandatory Access Control framework called RBAC. RBAC has advanced system behavior learning to generate complex policies on the fly. Writing policies is similar to the simplicity of Apparmor vs the absurd difficulty of SELinux
* LSM has many problems and SELinux in particular actually weakens a system in some ways that it wouldn't be without it. Its safe to say "With security like this who needs backdoors?"
* Wayland should address the security nightmare that is X but until then there is work being done by RedHat to make X run rootless
* The maintainer coercion problem can be avoided if they are pseudonymous Tor users. With reproducible builds the problem of tainted binaries should be over or at least they won't be deniable. Should malicious source code ever slip in it will be traceable in the public record with code audits
* Reproducible builds are great and a step further is to have Debian and systemd run deterministically so that the order folders are accessed and services started during boot up is identical. Should make verification and non-adversarial forensics easier to avoid this:
* Firefox is in a bad place from a security perspective. The rust based Servo engine is far away. In the long term an equally dangerous threat to Firefox's viability is Mozilla adopting  policies and directions that endanger its freedom:
** signed addons is a great step to ensuring add on integrity but Mozilla disallowing custom user generated keys is a step back for user freedom and being able to consensually run addons Mozilla doesn't approve of.
** adoption of the watered down WebExtensions API and deprecation of the XUL plugin system is huge setback for addon power and flexibility. It will impact TBB addons like Torbutton. This decision was made in favor of making Chrome addons fully compatible across both platforms without considering what will be sacrificed. As Firefox becomes a Chorme clone the Tor Project will run into the design limitations they avoided on the first place by staying away from Chromium.
* Metadata leaks and exploitation of APT bugs during system updates could be addressed best by having Debian support Onion Services for their update servers and push for mirrors adopting it. AFAICT there was a brief experiment by the guardianproject's Hans-Christoph but when he tried encouraging Debian mirror admins to run behind Tor he got a lot of push back. apt-transport-tor might need changes to support onion mirror * Blacklisting mouse jigglers is a great idea however a better way is to configure the system to panic immediately and shutdown if  a USB device is plugged in when you don't expect one to be. A package already exists that does this called usbkill:
This can be packaged in Debian and further integrated into a panicd daemon that can immediately shutdown a LUKS encrypted system if a certain key is pressed similar to what Truecrypt did. grsecurity has an option to disable USB devices too.
* There is a unique proof of concept for Linux that allows a LUKS encrypted system to safely standby without leaving master encryption keys in RAM. I would love to see this developed more and enabled by default in Debian:
* tlsdate is a good start but to solve the time source problem I am looking towards the Tor network. An accurate system time is very important for security:
  The Tor network is already considering a secure multiparty computation proposal to generate entropy for directory authorities. I can see a similar situation with broadcasting a safe system time via the Tor protocol agreed to by relays running atomic clocks as a future solution. Alternatively the organizations running Time servers could be nudged to run http Onion Services for HTTP/TCP based time daemons to set time from them like Tails htpdate and Whonix sdwdate, the latter already uses multiple sources of friendly Onion Services as clock sources. One day Debian could ship with a Tor based time daemon.

@_date: 2015-06-25 16:03:26
@_author: bancfc 
@_subject: [tor-talk] TBB Problems with connecting to HTTP Proxies 
I am trying to use TorBrowser with I2P using these instructions
They used to work before but they don't anymore. Can anyone figure out
whats broken?
When connecting to I2P's HTTP proxy I get an error complaining that
TorBrowser is speaking something that is not HTTP and therefore not
recognized by I2P.
N.B. This has nothing to do with localhost connections being blocked
because I allowed them and I can connect to the router page.

@_date: 2016-08-05 20:29:38
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk] Username Generator programs 
Does anyone know about any good username generator programs?
I've been thinking about some of the ways users can deanonymize themselves when posting on a forum.
Besides password re-use from non-anonymous accounts (which password managers deal with), writing style (Anonymouth is supposed to deal with that - openjdk support in progress), Re-using a non-anonymous username by mistake is a remaining problem.

@_date: 2016-08-12 03:53:43
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk]  Username Generator programs 
Thanks everyone who participated.
Ah pwgen is just what The Doctor ordered :D It fits the bill: random and pronounceable output, included in Debian, length and what it includes (numbers, symbols, capitals) is customizable.

@_date: 2016-08-22 22:59:37
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk] [Whonix Project] Looking for Python Devs 
Hello. We at the Whonix Project are looking for volunteers with a knowledge of Python to help us out with some tasks.
If you like what we do or like to help out Free Software projects in general, please take a look at the task list [1] and introduce yourself.
[1]

@_date: 2016-08-23 00:57:59
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk] Making sense of the BADDECISION Program 
Never mind that it took three years (!) to be published, the parent article from TheIntercept is lacking on the technical side.
Are they already a part of the LAN whose computers they are exploiting?
Are they cracking WPA2?
Its related to NIGHTSTAND which exploits obscure protocols in the network stack to attack the kernel.

@_date: 2016-02-08 04:38:24
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk] [Whonix-devel] [Tails-dev] Persistent Tor start in 
The problems in LATEG/AdvGoalTracking go deep enough that TPO is investigating how to solve them in Tor's codebase: A wider effort to think about usability of the user facing part of this (is any at all) is good too.

@_date: 2016-02-29 19:22:29
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk] Lets Encrypt compared to self-signed certs 
How secure is Lets Encrypt compared to a pinned self signed cert? Can Lets Encrypt be subverted by NSLs?

@_date: 2016-01-03 22:14:13
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk] OFTC semi-permanent Tor Blocking 
The OFTC servers have been blocking Tor users for weeks and the  is no longer a viable support channel for anonymous users. We are looking for other Tor friendly options at the moment and it would be great if you consider moving your channels too.
Options we are considering for Whonix are Anarplex and DarkScience - the latter has an onion service.

@_date: 2016-01-03 22:30:55
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk] New Ahmia search released 
Great stuff! Do you plan on bringing back your Onion site? Will there be a eepsite address for ahmia?

@_date: 2016-07-16 04:37:45
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk] Practical deanonymization using CPU load covert 
Hi. Whonix collaborator here. We've given a lot of thought to many types of clock based attacks including the one you are researching so we are interested to know more about how  this applies to our platform.
To run Whonix in KVM please see the relevant steps here [0]. Let me know if you have any further questions on setting it up.
Re-adjusting some of the terms you use to apply to VMs:
* Limiting CPU resources for Tor as opposed to the browser component is what counts? (both are separate in the Whonix model)
* The cgroup equivalent for a hypervisor is to limit the number of CPUs the Tor VM  has access to? (currently one core - on a quad-core system that's the 25% limit you recommend)
* Setting the Tor process to use nice 19 should take care of the ping timings you mention?
* Taking into account that some users connect to the clearnet using system running Whonix, do these mitigations still hold up?
[0]

@_date: 2016-07-31 23:57:16
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk] Practical deanonymization using CPU load covert 
============================== START ==============================
Thanks Ethan for your research. We've been discussing which mitigation technique to use. In a virtualized context disabling c-states is only possible from the host. Thats ok since all it means is we need to package it for users to install it there.
We prefer the idea of not using the kernel commandline directly because of discrepancies between hypervisors and custom kernels. We are leaning towards using the pmqos-static.py script some_guy123 mentioned instead.
Please feel free to jump into the discussion on our bugtracker any time:

@_date: 2016-03-01 00:03:05
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk] Lets Encrypt compared to self-signed certs 
Hi David. Thanks for chiming in. Please add a feature for pinning at the key level as IMO it provides the best protection.
Will the logs provide users/site owners with a way to independently check if coercion has happened?
Would systems like Cothority help Lets Encrypt users notice cert issuance inconsistencies even under compelled assistance? This project has the advantage of letting Tor clients spot anomalies in the Tor consensus documents should any of the DirAuths be compromised and it can be used for CAs too:

@_date: 2016-03-04 16:50:13
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk] Tor Browser Custom Intro Page Fingerprintability 
AFAIK for trademark reasons TPO recommends that distros built around Tor Browser show a custom intro page upon Tor Browser start up to users (which we do in Whonix).
Is this custom page detectable by websites a user visits (with a malicious JS script for example)?
If successful this attack has the effect of partitioning Whonix TBB users and everyone else.

@_date: 2016-10-03 02:40:54
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk]  Tor and Google error / CAPTCHAs. 
Muffett
While outreach and cooperation with some companies may work, do you not consider that a sizable number of sites will always block anonymous traffic simply because they can not monetize it with targeted ads?

@_date: 2016-10-04 00:15:21
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk]  Tor and Google error / CAPTCHAs. 
The logic of blocking everything completely *all the time* (like Google does) is already a big problem with the IPv4 address space becoming over saturated. Its not a Tor only thing. Sometimes an entire country is behind a single NAT access point.
Researching ways that don't infringe on user's privacy but lets traffic through is very hard and costly - I'm sure you agree. When discussing alternatives to persistent CAPTCHAs the Cloudflare reaction was to tell Tor "you do it" since they don't really have an incentive to fund this. (Yes I already your post about the different traffic white-listing requirements of for different business models).
What is can be done with logic like this?

@_date: 2016-10-16 04:31:32
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk] Quote Line Prefixes in Linux Text Editors 
For security its recommended to compose messages outside the e-mail client. There were at least two incidents where plaintext was leaked (claws mail saving drafts unencrypted and Enigmail sending unencrypted Does anyone know how to add quoted line prefixes [1] to messages composed in a Linux text editor?
[1]

@_date: 2016-10-16 05:30:32
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk]  Quote Line Prefixes in Linux Text Editors 
Found answer for my own question:
sed 's/^/> /' original > reply

@_date: 2016-10-16 05:36:05
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk] =?utf-8?q?_Did_Hackers_got_hacked_with_=22tor_nodes_fo?= 
No. It seems they had very shitty opsec.
* re-connecting to an anonymous account directly over clearnet.
* using their voice over the phone to social engineer.
* dox themselves to some reporter.

@_date: 2016-10-17 02:36:06
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk]  Quote Line Prefixes in Linux Text Editors 
Yes good tip. Also Torbirdy configures this.
Enigmail seems to do this by default. Do you use convenient or manual encryption settings?

@_date: 2016-09-22 16:46:38
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk]  Image EXIF data used to geolocate 
Pretty basic opsec fail but I wonder if mapping out tags was a good idea. Imagine tagging a city that has a handful of Tor users. They should have consulted the Tor Research Ethics process.

@_date: 2017-02-21 18:16:14
@_author: bancfc@openmailbox.org 
@_subject: [tor-talk] Announcing unMessage: a Next-Gen Tor Messenger 
unMessage is an anonymous messenger that uses Tor to hide metadata of participants. Its still in early development, however a major new feature such as Tor-to-Tor audio chat (the first such implementation we are aware of) has been included. Major additions like file-sharing support, video conferencing and a portable code-base for mobile platforms are planned.
Their major goal is to provide a better UX and a competitive feature set to move users away from proprietary solutions that don't respect privacy. Its not ready for mass adoption yet, so only the more technical audience among you should go ahead try it out. Feedback and/or pull requests are highly appreciated.
Check it out on Github:

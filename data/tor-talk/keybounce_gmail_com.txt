
@_date: 2007-04-24 20:07:21
@_author: Michael_google gmail_Gersten 
@_subject: 2-node circuits Vs 3-node circuits 
So what is the point of create-fast and entry guards?
I may be wrong on this. It's my understanding that the first hop in
the chain is created differently, via create-fast, than the nodes
after it; this means that someone spying on network traffic that sees
"create-fast" knows that they are looking at a source node, and can
tell the originating IP.
If the first node is made no different than the normal nodes, and
entry guards are not used, then no one knows which node is the first,
and no one knows what to spy on / correlate traffic with. Right?
Also, what if the path length was "mostly 2, occasionally 3 if the end
node is not a tor node, but always 3 (2 intermediate notes) ending on
the tor/end node"? Would that help the unpredictable-ness, without
causing slowdown?

@_date: 2007-04-24 22:49:45
@_author: Michael_google gmail_Gersten 
@_subject: 2-node circuits Vs 3-node circuits 
Most of the time, the end node is something like "Google", and my exit
node talks to it. If, however, the target machine runs Tor, then it
will be the exit node, and the end and exit are the same.

@_date: 2007-04-28 07:38:45
@_author: Michael_google gmail_Gersten 
@_subject: Selecting and using a particular Tor IP address 
If you are using the .exit "hostname" to force a specific tor exit
node, then you use that particular tor node name.
A quick, dirty, but mostly working system is to add port 80 to the
long lived port list; this makes high uptime nodes more likely (almost
certainty). Keep in mind that this isn't perfect; if a circuit is
unused for 10 minutes, or more than an hour old, it will be rotated.
My solution? Since this is very common -- all PhPBBS sites, and some
others -- I just add these as exceptions in my privoxy config, so that
they never go through tor. I'm already signing in to the BBS forum, so
they know who I am. Avoiding Tor tells both my ISP and their ISP about
the communication.
A solution that keeps Tor and these nodes?
Combine both "TrackHostExits" and long lived ports.
LongLivedPorts 80,443,23,21,22,706,1863,5050,5190,5222,5223,6667,8300,8888
That adds port 80 to the default list (Boo! I have to respecify the
whole list just to add one port).
TrackHostExits forums.puzzlepirates.com
That says to make sure that any connection to that host will use the
same exit node.
Warning  If the exit Tor node goes down, Tor won't help you on
this. Hence, you want to use the LongLivedPorts to avoid this. (Yea,
that bit me a lot at first.)
Warning  Tor makes a 4 hop circuit, not a 3 hop circuit, for
secondary connections when you use this. I don't know why --
seriously, why first make a normal three hop, and then extend to a
forced exit node, rather than making a short two hop, and then extend
to a forced exit node?

@_date: 2007-04-11 10:08:47
@_author: Michael_google gmail_Gersten 
@_subject: Is this for real? 
The whole point of "You are limited by the slowest upload speed of
your routers", plus the whole "My un-tor'd download speed is great" is
a big concern.
Here is a thought. Since most of the time I'm not downloading -- most
of the time my connection is "idle" with tor traffic -- I don't mind
giving more of my traffic to others.
When I'm active, I want to make full use of my download bandwidth.
That means I need to get downloads from multiple people.
If I'm looking at 20K tor upload, and 1.5 MB download (about 150K),
then I need to download from 7 different tor nodes. At once. Yes,
there are fast routers, but if I ever get a slow one, or an overloaded
one, then I am slowed for using Tor, and Tor looks unattractive.
If an average user is active 10% of the time, and uses 7 connections
when active, that's still a surplus of network resources (70%
That means, that for Tor to get fast,
1. Rather than everything using one connection by default, we need to
use many connections, load balanced. Round robin is probably a "good"
first approximation to load balanced. Since we know the speed of the
routers we are using, we can do a better approximation.
2. ???
(3. Profit :-).
(Yea, getting keep-alive to work will help a lot with web browsing,
but that means tossing privoxy and using something else. But
keep-alive, by reducing the number of connections, will magnify the
problem of a slow router over doing multiple connections.)
Tor wants a minimum of 20K, or about 220 kbps. DSL Light, that I've
seen, has a 384kbps upload, although I've heard that it goes as low as
256 kbps up. Either one is sufficient to run Tor as a router.

@_date: 2007-04-11 16:06:28
@_author: Michael_google gmail_Gersten 
@_subject: Importance of HTTP connection keep-alive (was: Is this for real?) 
This was mentioned on this list a while back; that a proper TCP
implementation needs to determine the speed / window size / other
properties of a TCP connection, so that the actual speed is slower
when the TCP connection is first opened. So, keep alive eliminates the
overhead of many connections, as well as the many per-connection
startup slowdown.
Then, there's the whole "Keep-alive was added to the HTTP standard to
speed it up" issue.
I figure if the standard committee will say "We need X to speed it
up", then they have benchmarks to back that claim up.

@_date: 2007-04-12 11:37:07
@_author: Michael_google gmail_Gersten 
@_subject: Is this for real? 
If there is one site in the chain that has, for example, a 20K bps
upload speed, then no traffic through that site can provide data
faster than 20K bps.
If I have a 6 Mbps cable link, and my tor traffic is going through
someone's DSL that cannot upload more than 20Kbps, then I will see my
speed drop from 6Mbps down to .020Mbps.
That's going from 6,000 K down to 20K.
That is why the current tor system [b] cannot [/b] scale, without tor
using multiple connections at once.

@_date: 2007-04-12 12:20:49
@_author: Michael_google gmail_Gersten 
@_subject: Is this for real? 
Gar, double check. I'm mixing bytes and bits.
6 M-bits-ps cable versus 20K-bytes-ps DSL.
That's actually about 250K-bits-ps.
Or 6,000K down to 250K. About a 25 times factor slowdown.
Yes, I've seen 6Mbps cable download (at a friend's house; mine never
went above 4Mbps).

@_date: 2007-08-18 08:52:46
@_author: Michael_google gmail_Gersten 
@_subject: Privoxy usage? 
TCP over TCP has some problems, the least/biggest of which is the
timeout factor.
If there is a communication problem, TCP has a "back off and resend"
rule. This starts with "I didn't get an acknowledgment. I might be
sending data too fast, or data might have gotten lost. I'll pause for
two seconds, and then send the data again".
The problem? If the low level TCP stream does this, then any higher
level stream with data in transit will also see a delay, and a need to
I may be doing a horrible job of explaining the problem. A simple
terminal session may have no problem -- a single packet of data will
eventually get an acknowledgment back.
But if there is a stream with more and more data behind it, then you
wind up with an ever increasing resending that never gets caught up.
Eventually all the TCP channels break.
TCP was designed with certain assumptions in mind. It does not work as
a general purpose transport -- that was never it's goal.
IP over IP works.
UDP over UDP works if your UDP protocol supports it.
TCP over TCP fails. The timeout rules cannot stack properly.

@_date: 2007-08-01 12:12:16
@_author: Michael_google gmail_Gersten 
@_subject: What are Tor guards? 
Yep. Known issue.
For roughly $50K startup, and $30K/year, someone could reliably
determine most or all source and endpoint pairs, and also act as exit
node for a large portion of conversations. They would also speed up
the Tor network significantly. (100 nodes, high speed dedicated colo
lines purchased in bulk.)
Tor is nice against industrial espionage, but not against NSA or
"Firewall of china" level attacks.

@_date: 2007-02-23 14:13:05
@_author: Michael_google gmail_Gersten 
@_subject: onion-router.net down temporarily 
I think it means that you need to switch to a more rational registrar,
maybe GoDaddy?

@_date: 2007-02-04 20:18:52
@_author: Michael_google gmail_Gersten 
@_subject: Forwarding email ports 
I read through the january archives on email ports, specifically 465,
587, and 995.
First, are these the ports needed to support standard secure email
(SMTP and PoP)?
Second, why were there three of them for two protocols? Did I
misunderstand something?
Third, what are the implications -- both security, and legal -- if I
open these on my machine. I'm thinking in particular, that:
1. If only one exit node is outputting these ports, it becomes an
obvious snoop target -- how does that affect security?
2. If I'm forwarding email, am I likely to find my site "blacklisted" somewhere?
3. Am I likely to get some sort of "Cease and desist" letter, or other
legal hassle, for this?
4. Since my machine has about 22K/s bandwidth, how likely is it that I
will be badly backlogged / overtargetted?

@_date: 2007-02-27 11:47:41
@_author: Michael_google gmail_Gersten 
@_subject: Norwegian DNS compromized 
Before getting too "OMG!", keep in mind that the second set of tests

@_date: 2007-02-27 23:39:01
@_author: Michael_google gmail_Gersten 
@_subject: anonymous v. normal session 
Two suggestions:
1. Include port 80 in the list of long lived ports.
2. Set a limit on circuit build time, so that slow/backlogged nodes
don't get used.
CircuitBuildTimeout 10
LongLivedPorts 80,23,21,22,706,1863,5050,5190,5222,5223,6667,8300,8888
That adds 80 (web browsing) to the long lived ports. (Actually, 443
should be added for https:// connections as well), and requires that
circuits be constructed in 10 seconds instead of 60.

@_date: 2007-02-28 08:51:32
@_author: Michael_google gmail_Gersten 
@_subject: Norwegian DNS compromized 
I'm doing a LOT of trimming on this reply.
Please, take a second look at this statement. I'm not taking this out
of context.
Yes, we cannot prevent someone else's ability to make a choice,
without that coming back and restricting our choices. Absolutely.
You have chosen to say "The Bible has the rules of The Good Lord".
That's your choice.
You are choosing to say all of the following:
1. The God of Abraham is Lord.
2. The God of Abraham is God.
3. The God of Abraham is Good. (Job, Jonah, and Ester come to mind.)
4. The rules given to the generations from Abraham to Moses still apply today.
5. The guidelines and interpretations of those, as expressed by
prophets up til about 200 BC (old testament), or up til about 100 AD
(new testament), or by male rulers who kicked women out of the ruling
class through about 400 AD (Roman catholic church), or ..., are in
fact valid and appropriate in 2010 AD.
6. Any advice / prophets / instructions given to anyone else are
invalid. (See: Muslim, Taoist, etc).
While it is your choice to say all of those (and I do not agree with
all of them), as soon as you say that everyone else "should" do these,
or even apply the label "evil" to anyone that disagrees with you, or
otherwise try to say "This is proper, that is not", you are in
violation of the very right of choice.
"He that would make his own liberty secure, must guard even his enemy
from oppression". Forcing all those views about God on another is

@_date: 2007-02-28 08:55:48
@_author: Michael_google gmail_Gersten 
@_subject: anonymous v. normal session 
Yes, they go in torrc. The location of this file will vary from system
to system.

@_date: 2007-02-28 10:40:09
@_author: Michael_google gmail_Gersten 
@_subject: [tor-philosophy] Protecting rights. 
(Forgive the large quoting; this is going into a different thread, and
I wanted to keep the context of the discussion).
Background: Thomas Paine:  "He that would make his own liberty secure,
must guard even his enemy from oppression; for if he violates this
duty, he establishes a precedent that will reach to himself. " ~
Thomas Paine, Dissertation on First Principles of Government, December
23, 1791
Tor is fundamentally about giving people some liberty, specifically
protecting freedom of speech when what you say is at odds with, or
against, the views of the majority and/or the government, and the
right to privacy, given the ease of third parties  (ad sites) to track
you, and governments to grab data from these companies.
First, and minor technical, Muslim is religion. The God of Muslims is
the same God of Abraham. The question is, do you follow the second son
of the second son (Abraham -> Issac -> Jacob), or do you follow the
other family branch.
Mohammad, as I understand, has the same place in their religion as
Moses or Jesus has in Judaism -- a prophet -- a person, wise, able to
spot and point out problems with the status quo, with some inspiration
from God. (Your definition may vary).
Second, and major: As soon as you say that "X is the only authority I
can recognize", what happens? And why is this relevant to Tor?
Look at countries, and governments, historically.
The authority that I recognize is the constitution of the United
States, plus any government that is upholding that, along with the
common-law rights of the Magna Carta, and the statute rights, by
approved treaty, of the united nation's accord on basic human rights.
I might have the titles of those slightly off, doesn't matter.
The view that you express has historically lead to governments that
try to restrict people's freedom of speech, as well as governments
that try to track the opposition and eliminate them.
Both of these are what Tor is (a weak, but first step) protecting against.
Do you have the right to say "I only believe in the authority of God,
as redefined by Jesus"? Sure. Do you have the right to say what is, or
is not, God; what is, or is not, God's laws; what is, or is not, a
religion? Sure.
But you don't have the right to tell others that they are wrong. You
have the right to say that you disagree with them.
And when governments start saying "You are wrong", that is when we
need Tor to already be in large use.
Remember: If the only people using Tor are those with something to
hide, then the people using Tor can be easily rounded up, and charged
with "Crimes against the state".
I have nothing significant to hide; I use the name "Keybounce" all
over the internet.
But it is precisely because the people who need to hide need noise to
hide in that I use Tor.
(And I do hide. If you look at the first and last name on this email
account, you'll see that I'm doing a basic "protection against
database join" from companies merging and joining databases into a
large collection. Overall, that's minor.)
(It is relatively easy for a government sized attack to attack tor.
They have the resources to put in enough nodes to be 10-15% of the
network; they can force ISP's (phone companies and cable companies) to
filter packets and send things that match XXX to them for analysis;
they can track who the major nodes are, and require 100% packet
duplication from them from the ISP's. The solution is to make sure
that the total volume on Tor is really, really large.)

@_date: 2007-02-04 22:11:33
@_author: Michael_google gmail_Gersten 
@_subject: Forwarding email ports 
Alright, can someone test and see if I have this set up right? All
four ports should now be accepted by "stbmac".

@_date: 2007-02-05 09:45:20
@_author: Michael_google gmail_Gersten 
@_subject: Forwarding email ports 
Whoops! I've taken that one off my list of ports then.
As for blocking IP, I'm dynamic :-).

@_date: 2007-02-05 10:00:28
@_author: Michael_google gmail_Gersten 
@_subject: Forcing firefox to keep a connection alive for reuse 
(slightly off topic)
I was just realizing that the overhead of making dozens of separate
connections for fetching everything off the web (one connection per
item) instead of reusing the same connection to the server is probably
part of why browsing through tor is as slow as it is.
How do you force firefox to "keepalive" the connections?
(I can't be the first person to think of this, so either (A) it's
hard, or (B) my system is somehow misconfigured.)

@_date: 2007-02-05 11:34:14
@_author: Michael_google gmail_Gersten 
@_subject: Forcing firefox to keep a connection alive for reuse 
Fiddlesticks. I've got mine set for pipelining also, and yet Vidalia
clearly shows multiple connections to each website, not a single
re-used one.

@_date: 2007-02-05 15:11:51
@_author: Michael_google gmail_Gersten 
@_subject: Forwarding email ports 
Then let me ask a little question: I've been running this for about
half a day now, I figure the directory servers have properly
propagated the open port information, can anyone at least actually use
this to send encrypted email? Does it at least pass the "Yes it works"
(I can't seem to exit at my own node, so I can't test it myself).

@_date: 2007-02-10 16:54:25
@_author: Michael_google gmail_Gersten 
@_subject: problems setting up a relay node on win XP 
My advice is to open incoming port 9001 at your hardware firewall.
An account with dyndns is not needed. You do not need a fixed DNS name

@_date: 2007-07-15 09:30:09
@_author: Michael_google gmail_Gersten 
@_subject: What happens when I shut down my Tor-server? 
Did you shutdown by closing the listener / ORPort and reloading the config?
My understanding is that stops new connections, terminates existing
connections after 10 minutes of idle, and stops new data after about
an hour.
It's an oddity: If I'm shutting down, and I don't want to disturb
traffic, how can I manage that? If I'm an exit node, there's no way
(my IP is known to the remote site). If I'm a middle man, then in
theory Tor could rebuild a circuit to the exit node through a
different middle man, and move the data to the new circuit (it doesn't
at the moment).
My solution: Try to have at least an hour's notice and kill the OR Port.

@_date: 2007-07-18 21:43:06
@_author: Michael_google gmail_Gersten 
@_subject: On the performance scalability of Tor 
Indeed; I will see vidalia show a lot of connectings all at once,
followed by all switching to open at once (TCP streams inside a tor
The overhead to open a new TCP HTTP connection through a tor circuit
seems to be very long. I know it has to be encrypted/decrypted at each
node, as well as originated at the exit to the destination, but I have
to wonder: Can this be sped up at all?
The discussion about fast nodes: Is there a way to tell the client,
"Only select fast nodes"? Does "fast" imply high throughput (but it
might be slow to start up), or fast startup/turn around?

@_date: 2007-07-22 11:42:19
@_author: Michael_google gmail_Gersten 
@_subject: Tor takes too much RAM 
Just to toss some more numbers into the fray. Tor 1.2.14
I'm looking at about 62 MB resident, with 120 open connections (both
incoming and outgoing, from lsof and wc -l.). Actual bandwidth is
about 30KB/s, maximum advertised is supposed to be 20, but Vidalia
reports that it's 33 KB/s.
I'm on a mac, 10.4.9. "VSize" is 110 MB.
(In fairness for reporting, Mac's memory allocation is very slow to
remove unused pages out of memory. Tor was running mostly
uninterrupted for the last 24 hours, and I just started using Firefox
to read my mail.)

@_date: 2007-07-22 11:58:57
@_author: Michael_google gmail_Gersten 
@_subject: Blocking child pornography exits 
Alright, so how do you define child pornography?
Are you saying that this un-elected, un-appointed group should be
given arbitrary blockage authority over the whole internet, for every
You claim that Child Pornography, whatever that is, is an overwhelming
evil. What if there are others? Who defines an overwhelming evil?
So, if you have an action like "We'll have central monitoring of every
internet connection made", and there's one overwhelming evil that
comes out of it, that it is unacceptable to not take responsibility
for it? "We're fighting terrorists, protecting the country".
Tor is, among other things, fighting back against that.
Are you really saying that you want to put a different
agency/group/goal in charge of doing the same thing? "You can't talk
to them -- they're [ ] Terrorists [ ] Child Pornographers [ ] Evil
skinheads [ ] Enemies of the state [ ] Trouble makers [ ] Out to
overthrow the oppressive natural government inherited from God, Lord
protect us all" (check one).
The game is "Selectively block who you can talk to."
Strange game. The only winning move is not to play

@_date: 2007-07-22 13:57:34
@_author: Michael_google gmail_Gersten 
@_subject: Blocking child pornography exits 
Ahh. When you put it that way, there is a simple solution. Remember, the
IP specs define a "malicious" bit that all bad, evil data packets will set if
they are standard compliant.
So, as long as these evil users comply with the standards, Tor can filter
them out. All done :-).

@_date: 2007-07-23 07:21:04
@_author: Michael_google gmail_Gersten 
@_subject: hijacked session anomaly? 
I've seen PhpBBS systems that assume that I've logged out and logged
back in when my IP address changes (makes those systems a bleep to use
with Tor). It would not surprise me to find someone somewhere that
assumed "Same IP, no cookies -- OK, they have cookies turned off, but
are the same person".

@_date: 2007-07-27 13:22:16
@_author: Michael_google gmail_Gersten 
@_subject: initial directory bandwidth? 
I find that the speed ranges from 15 to 35 K bytes/sec, typically. If
I want a higher speed, I toss a couple of "new identity"'s at it until
I get above 70. I will occasionally, but only occasionally, get a
circuit that fills my 150 K bytes/sec download speed.
The current version will not even make me a directory server -- claims
that my 384 upload DSL is not fast enough.
Startup? Tor caches everything it needs now, and one big discussion
going over the list is "Should we expire all those old caches now that
we're doing some things differently?".
7 or 8 reboots a day? If I reboot every 7 or 8 days, that's a lot.

@_date: 2007-07-13 12:37:35
@_author: Michael_google gmail_Gersten 
@_subject: active connections when hibernating 
What do you mean by "Hibernating"?
Any process will need to be running in order to close connections;
otherwise, the kernel has to at least track that "This connection has
been closed by the other side, but not yet acknowledged as closed by
this side.".

@_date: 2007-07-13 14:59:44
@_author: Michael_google gmail_Gersten 
@_subject: active connections when hibernating 
Hours? Possibly. They'll stay open until the other side closes them,
as I understand; that's one hour by default.
Days? No, that's not, as I understand, supposed to happen.
Heck, if I shut down my or-port (so no new connections arrive), and
turn it off in my browser (so no new outgoing connections are made),
then my tor winds up with no sockets open in about 2 hours. (Maybe
less, I haven't checked that frequently)

@_date: 2007-07-13 15:29:24
@_author: Michael_google gmail_Gersten 
@_subject: Tor bandwidth testing 
I just realized that tor seems to be testing bandwidth at startup with
received data, not with sent data.
Is this in fact what's happening? If so, I think this test is backwards.

@_date: 2007-07-15 09:22:00
@_author: Michael_google gmail_Gersten 
@_subject: active connections when hibernating 
============================== START ==============================
Alright, lets see. I have one tor configured as a client only, and one
as a client (on an unused port) and a server. Lsof reports 88 outgoing
connections, and 48 incoming connections. I just closed the ORListener
port, so that one is only doing client (and old server connections).
10 minutes later, I still have 81 outgoing, and 32 incoming.
Oh foo, I fell asleep. Next morning: Client has one outgoing
connection to Lefkada, and server has one connection to pppool:9030
(directory server?), one outgoing to a brazil site on a "random" port,
and one incoming tor connection.
Turning on Vidalia: Vidalia shows two connections to Lefkada, but lsof
only shows one actual socket connection. Dang, but that changes how I
thought tor did communication.
Re-enabling the ORListener on the server (Odd, it's ORPort in the
config, but OR Listener in the logs), and waiting a moment: Wow. I'm
looking at 5 SYN_SENT, one established outgoing tor, one established
incoming tor (and we're talking seconds after publishing the
descriptor), and one established unknown outgoing (Local port is not a
listening port; remote port is a "random" high numbered port). And
that's before the bandwidth test.
Which is itself an interesting question. How can tor publish its
descriptor before it knows how much bandwidth to claim in the
In the past, I've seen that if the client has no activity, it does not
replace the connections. I have seen an idle tor client wind up with
no open sockets.
Nope. I have circuits open for days (ssh).

@_date: 2007-06-20 00:26:15
@_author: Michael_google gmail_Gersten 
@_subject: Problem with bandwidth 
I'm trying to find out what I'm doing wrong with bandwidth settings.
In my torrc:
BandwidthBurst 30000
BandwidthRate 22000
MaxAdvertisedBandwidth 20480
However, Vidalia reports that my bandwidth is 27KB/s, ignoring the
I'm seeing total outgoing traffic (system wide) of about 28-29KB/s
when the system is idle but full of Tor. My normal upload limit is
around 35KB/s.

@_date: 2007-06-20 10:40:06
@_author: Michael_google gmail_Gersten 
@_subject: Problem with bandwidth 
I saw that bandwidthburst is supposed to be the highest traffic that
Tor will use. That's not the problem. The first problem is that Tor
stays at that level, and does not drop down to the normal level.
The second problem is that Tor is advertising the higher rate, rather
than the maximum advertised rate.
BandwidthRate N bytes|KB|MB|GB|TB
    A token bucket limits the average incoming bandwidth usage on this
node to the specified number of bytes per second, and the average
outgoing bandwidth usage to that same value. (Default: 3 MB)
BandwidthBurst N bytes|KB|MB|GB|TB
    Limit the maximum token bucket size (also known as the burst) to
the given number of bytes in each direction. This value should be at
least twice your BandwidthRate. (Default: 6 MB)
MaxAdvertisedBandwidth N bytes|KB|MB|GB|TB
    If set, we will not advertise more than this amount of bandwidth
for our BandwidthRate. Server operators who want to reduce the number
of clients who ask to build circuits through them (since this is
proportional to advertised bandwidth rate) can thus reduce the CPU
demands on their server without impacting network performance.
Alright, so my Burst is not twice my Rate. I cannot manage twice the
minimum rate.
(Minimum rate is 20KB, twice that is larger than my physical upload speed.)
And, checking now, the outgoing bandwidth (system wide, but I'm only
using Tor and gmail right now) is between 29 and 31 KB/s.

@_date: 2007-06-20 22:14:24
@_author: Michael_google gmail_Gersten 
@_subject: Problem with bandwidth 
Here's the full config file, in case there's something else I'm doing wrong
BandwidthBurst 30000
BandwidthRate 22000
ContactInfo keybounce at gmail dot com dot no dot spam
ControlPort 9055
DirPort 9030
# Where to send logging messages.  Format is minSeverity[-maxSeverity]
# (stderr|stdout|syslog|file FILENAME).
Log notice stdout
Log info syslog
# Log notice syslog
MaxAdvertisedBandwidth 20480
Nickname nsavaxBangKremvax
ORPort 9001
SafeLogging 0
ShutdownWaitLength 240
SocksPort 9005

@_date: 2007-06-10 13:00:31
@_author: Michael_google gmail_Gersten 
@_subject: "Error tokenizing network-status header" 
Jun 10 11:13:34.106 [notice] Self-testing indicates your ORPort is reachable
from the outside. Excellent. Publishing server descriptor.
Jun 10 11:13:45.760 [notice] Self-testing indicates your DirPort is
reachable from the outside. Excellent.
Jun 10 11:13:47.788 [notice] Not advertising DirPort (Reason: BandwidthRate
under 50KB)
Jun 10 11:13:47.801 [notice] Performing bandwidth self-test...done.
Jun 10 11:24:03.193 [warn] parse error: Found an out-of-place token in a
network-status header
Jun 10 11:24:03.194 [warn] Error tokenizing network-status header.
Jun 10 11:24:03.195 [warn] Couldn't parse network status.
Jun 10 11:44:01.047 [warn] parse error: Found an out-of-place token in a
network-status header
Jun 10 11:44:01.069 [warn] Error tokenizing network-status header.
Jun 10 11:44:01.071 [warn] Couldn't parse network status.
What's going on? This started last night, and restarting my server this
morning didn't help.

@_date: 2007-06-01 09:10:30
@_author: Michael_google gmail_Gersten 
@_subject: Length of new onion addresses 
Length is not nearly as important as bookmarkability. You mentioned
that you are going to be changing stuff every day. That worries me.
Your other ideas: Breaking things into parts:
I like this much, much more.
I think this is the best. Use the current system for sites using the
old method (central servers mapping .onion addresses to introduction
points), and a onion.secretkey.hidden for stuff using the new,
non-central servers.
Business cards? Hadn't thought of that. Yea, that would give a bonus to short.

@_date: 2007-03-10 09:35:19
@_author: Michael_google gmail_Gersten 
@_subject: New standard for privacy control. (Was: Stripping code with Privoxy) 
Here's a better idea.
Why do we make the assumption that a browser can trust everything it is given?
That's a serious question. Why do browsers not have an external
verification plug in?
Lets say we wanted to design such a browser extension. Lets be clear
here: This isn't an HTTP level change to the spec (transfer of html
docs), nor an HTML level change (description and layout). This is a UI
standard change. And as far as I know, there is no UI level standard
for HTML display agents. Nor, as far as I know, are there standards
for determining which of the documents referenced in an html file are
to be loaded, or not.
So lets say we wanted to design such a standard.
The first assumption: This verifier is a trusted extension. There may
be more than one of them -- there may be an organizational level
domain verifier, a machine specific administrative verifier, and a
user specific peronal change verifier.
These verifiers are given at least all of the following:
1. Each file downloaded as part of the page fetch/display system
2. Which page is requesting the usage/reference of this
And is expected to return the approved version of the file, which may be empty.
3. The final, complete document before any scripts are executed.
4. Each script that is going to be executed, before it is executed.
5. At each point where scripts generate new code to execute, after the
code is generated and before it is run, the new result is supplied. No
more document.write() generation of code on-the-fly.
6. Each attempt to read or modify a cookie.
7. Each attempt to access an external file or application.
*** This is serious ***.
We define such a standard. We submit it to the regular RFC process,
just like HTML/HTTP. And we modify Firefox to support it. We can count
on Opera to support this.
Just imagine being able to say "Supports the web privacy and security
standard", when internet explorer doesn't.
The scope / target of this standard is not HTML fetchers, programs
that, given a URL, retrieve that URL, and only that URL. The scope /
target is the next level up -- programs that fetch a full document,
including any referenced style pages, iframes, etc.
That means all user agents, "save link as" programs, etc.

@_date: 2007-03-11 11:29:41
@_author: Michael_google gmail_Gersten 
@_subject: Talks of hidden services and DNS 
Cnames to convert something like .hidden to .onion is a decent idea.
If nothing else, when people start clicking on links, and getting
"unresolvable"/"No such host", that might give more exposure to tor to
other people.
We could set up a DNS system entirely within Tor. Just have cnames
from host.hidden.onion to somelongkey.onion, and it is never seen by
the rest of the DNS world. The mappings would be registered with the
directory servers, who would track known, registered mappings from
host.hidden.onion to key.onion, and key.onion's would be registered as
they currently are.
We could even do a combo. Get a special TLD now, or add to an existing
special, like .int. (approval time? About a week). Start putting in
names, registrar being the Tor central directory servers. In about 3
months time, when the code is written and tested, move to Tor served

@_date: 2007-03-11 11:45:36
@_author: Michael_google gmail_Gersten 
@_subject: New standard for privacy control. (Was: Stripping code with Privoxy) 
Ok. The threat: HTML was not designed with security and privacy in
mind. Blind acceptance and following of HTML code causes a wide range
of problems, from revealing identity, to allowing arbitrary people to
track everything you do. The usage of bad form design/submissions can
give your answers as "?tag=value&tag2=value" on a URL, which can
expose SSN's and other information on the URL request, visable to
packet sniffers.
Remember: Java is a secure sandbox. They recognized that just allowing
arbitrary code to run was a bad thing, and put in a security model to
restrict what could be run. That is the goal here.
HTML has no security model.
There is demonstrated security, identity, and privacy risks.
Even if there is no man in the middle attack, no hacked servers, etc,
there are ad trackers, web bugs, etc. Many times those are not under
the control of the web page author, because the web page you write
becomes just a portion of the full html sent to the browser.
SSL problems are just plain badly handled. Heck, even SSL non problems
are badly handled.
Design an infrastructure that would permit every machine on the
internet to be given an SSL certificate, and you can solve all the SSL
problems, including people not knowing what SSL or a CA is. Anything
short of that will not solve the problem.
As for SSL, even successes: If a site I'm connecting to sends a valid
certificate, then I want to know how it's known to be valid. Tell me
that the browser's list of valid root certificates is itself signed,
and tell me the finger print of that signature. One such for
microsoft, one such for netscape, and a third such for opera, and you
have a simple "Verify these 16 bytes against this piece of paper, and
you know you can surf without forgery".
(Or how do you know that your list of trusted roots has not been compromised?)

@_date: 2007-03-12 17:01:00
@_author: Michael_google gmail_Gersten 
@_subject: Odd, but legal, config file problems. 
I just made a minor change to my torrc, and sent a hup (reload) to the server
Mar 12 16:56:27 stbmac Tor[8276]: Received reload signal (hup).
Reloading config.\n
Mar 12 16:56:27 stbmac Tor[8276]: Failed to parse/validate config:
SocksPort, TransPort, NatdPort, and ORPort are all undefined?
Mar 12 16:56:27 stbmac Tor[8276]: Reading config failed--see warnings
above. For usage, try -h.\n
Mar 12 16:56:27 stbmac Tor[8276]: Restart failed (config error?). Exiting.\n
In my case: I have a separate tor client providing SocksPort, and a
server providing ORPort. I needed to start shutting down, while being
used, so I edited out ORPort on the server config, and reloaded it.
The result?
1, An invalid config file isn't "ignored" -- it causes a crash. Probably bad.
2. A valid config file that doesn't allow new connections is
considered invalid. Definitely bad.
This is with rc-9.

@_date: 2007-03-16 13:55:16
@_author: Michael_google gmail_Gersten 
@_subject: Work on Tor this summer, get paid by Google 
Looking at the issue of age discrimination, I have this question:
Do applicants have to be a student?

@_date: 2007-03-23 11:12:14
@_author: Michael_google gmail_Gersten 
@_subject: Preconfigured hidden service 
Right now, Tor by default is a single entity that is both client and
server. The same entity that accepts Socks connections locally also
accepts onion connections remotely.
And subjects both of them to the same rate limit. So, if you get a lot
of traffic relayed, your personal usage is slowed.
To get around this, I run two tors -- one a client only, one a server
only. But vidalia doesn't support that. Worse, it was a nightmare to
be able to get V to want to watch, and report on, my client setup, as
V wants to report on the one it starts. With hindsight, I had V
starting up the server-only, and was running the client-only by
script. If I had that reversed -- V starts up the client only, a
script starts up the server only -- then it would be almost trivial.
But there is no "out of the box" config that generates these two
separate setups.

@_date: 2007-03-02 18:15:51
@_author: Michael_google gmail_Gersten 
@_subject: Directory problem? 
I get things like this in my log:
Mar  2 16:00:50 stbmac Tor[12637]: Our directory information is no
longer up-to-date enough to build circuits.\n
Mar  2 16:07:59 stbmac Tor[12637]: I learned some more directory
information, but not enough to build a circuit.\n
Mar  2 16:38:37 stbmac Tor[12637]: I learned some more directory
information, but not enough to build a circuit.\n
Mar  2 17:09:00 stbmac Tor[12637]: I learned some more directory
information, but not enough to build a circuit.\n
Mar  2 17:39:30 stbmac Tor[12637]: I learned some more directory
information, but not enough to build a circuit.\n
Mar  2 18:10:00 stbmac Tor[12637]: I learned some more directory
information, but not enough to build a circuit.\n
Mar  2 18:10:36 stbmac Tor[12637]: Catching signal TERM, exiting cleanly.\n
When I kill tor, and restart it, it gets directory information instantly.
This is 7-alpha. Oh, and if it makes a difference,
Enabling experimental OS X kqueue support with libevent 1.2a.  If this
turns out to not work, set the environment variable EVENT_NOKQUEUE,
and tell the Tor developers.

@_date: 2007-03-25 12:16:13
@_author: Michael_google gmail_Gersten 
@_subject: Ultimate solution 
There are some aspects of Flash, Javascript, etc, that are safe, and
do not reveal any information. There are other aspects that are
This gets back to the whole issue I raised earlier, in another thread.
Why try to sell people on "OK, but you need to use a completely
stripped down browser that can't display most modern sites at all
because all scripting systems are disabled"? Why not use a "security
manager" model, where the browser commands are verified by a separate
security manager, configured by the user? Then Tor can just distribute
a security manager file.
This would require some sort of system for "I'm the browser, this is
the file I just downloaded, tell me what I can safely execute". "I'm
the javascript parser, this is what I've just parsed and written via
document.write but not yet executed. Tell me what I can safely
execute". "I'm the browser, this is the full document after fetching
all the embedded references. I know I've asked you on each of those
parts separately, now here's the whole shebang. Tell me what I can
safely execute." Etc.
The whole "Because some aspect of Flash can kill you, all of flash
must be junked" approach won't work. That's like saying, "Because Java
could contain an unsafe program, no Java can be used". Sun designed a
security manager system into Java specifically to deal with that
concern. If the default security manager isn't good enough -- if the
default SM permits unproxied connections, for example -- then we need
a new SM that does not permit unproxied connections, or forces them to
become proxied without the code realizing it.
Java does permit changing the SM, doesn't it?
Why not implement one for the rest of the browsing experience?

@_date: 2007-03-04 17:57:17
@_author: Michael_google gmail_Gersten 
@_subject: "router get by nickname" on request to dir server appears to be failing 
I'd like to get a clarification of the DNS lookup problem.
If I'm running a full DNS resolver on my system, then I'll send
queries to, for example, the DNS authority for .com, then for
domain.com, and then I'll have the address for site.domain.com. And,
this will leak my ID to the name server for domain.com.
But if I'm only talking to domain.com, not any of the subsites, then
my DNS request only goes to the TLD server.
And, if I'm not running a full resolver -- if I just send my request
to a single recursive server that returns my address -- then the DNS
request as seen by the world is from that other DNS server, not from
In both of these two cases, I do not see any privacy leak concern. Am
I missing one, or are these cases actually safe? And, if so, can that
warning message get disabled?
Yes, I know that DNS lookup improvements are coming. Right now I'd be
happy with some sort of "Only resolve DNS at this list of hosts"
rather than "resolve DNS at any host in the world". Because I'm
finding that I can't trust all of them.

@_date: 2007-03-26 12:11:50
@_author: Michael_google gmail_Gersten 
@_subject: Ultimate solution 
So the "Torpark" controversy comes down to:
"Free" == "Yours to do with as you wish" versus
"Free" == "No charge to use"?
What are the "official" terms for these two cases?
And, what's the terms for
"Source code is available, but usage is restricted" versus
"Source code is available, usage unrestricted" (same as free  above)

@_date: 2007-03-26 12:18:52
@_author: Michael_google gmail_Gersten 
@_subject: Free Software and Torpark (was: Ultimate solution) 
Was that the "evil bit" RFC?
I worry about the day that someone actually does follow that RFC,
wreck havok, and then in court use the defense, "I am following all
the official standards of the communications network, and if there is
a problem, it is with the other users who do not observe the

@_date: 2007-03-27 18:22:28
@_author: Michael_google gmail_Gersten 
@_subject: Ultimate solution 
It sounds to me like we need:
1. Absolutely easy to use client software that automatically acts as a

@_date: 2007-03-27 18:53:51
@_author: Michael_google gmail_Gersten 
@_subject: Free Software and Torpark 
Well, here's what google returns:
Wikipedia's entry on free software
And a page for a single program for calculating one type of primes.
The first two are the "Free to manipulate as you want". The next 5
software sites are "Free to distribute, but restricted usage" sites.
There's one "meta" site, and one oddball single program listing.
Followed by 8 related searches. Normally I get 100 hits on one page;
this time, only 9.

@_date: 2007-03-04 18:23:03
@_author: Michael_google gmail_Gersten 
@_subject: "router get by nickname" on request to dir server appears to be failing 
And how do I tell which node is the one being used?

@_date: 2007-03-28 10:31:22
@_author: Michael_google gmail_Gersten 
@_subject: Ultimate solution 
On the download page. On the "Configure Privacy" page. When you get
"By default, all scripting is blocked. Click here to configure safety
level of scripting" on the second or third web page you go to.
After a session? How long do your sessions last? Mine last days.
It's my understanding that if you want a connection to x.y.z.t:p, and
x.y.z.t is running a tor node that permits exit on p, then you are
guaranteed to use x.y.z.t as your exit node.
What about "Even if I'm just a middleman" node? Does it still permit
local exit? (I don't know).
What about a trivial setup for "Allow anything to exit on my node". Or
even just "Allow web / ftp / SSH / secure mail (or whatever other
checkboxes are wanted) to exit on my node", without any bandwidth
sharing for the network (litterally, just an exit-only configuration
to help others who are using tor. 100% secure, encrypted communication
without having to purchase an SSL certificate for your web site, or
having to deal with the "Do I need to translate this address to
add/remove www. at the beginning, all to keep their browser from
complaining, and redo that every year?".

@_date: 2007-03-28 10:41:25
@_author: Michael_google gmail_Gersten 
@_subject: Please don't recommend Tor Button! 
What is this page supposed to return/tell me? I went there, hit "Start
test", got my Java console, saw some java activity, and then nothing
more. No web page popped up with my results, nothing.

@_date: 2007-03-30 11:59:05
@_author: Michael_google gmail_Gersten 
@_subject: Ultimate solution 
Perhaps this is the way to think about it:
For some people, in some situations, perfect anonymity is needed, with
nothing less.
For other people, or other situations, "nearly" is good enough, based
on what you want to accomplish:
1. Preventing ISP's from tracking and selling your browsing history
2. Preventing third parties, such as ad sites, from doing the same
3. Preventing search engines from assembling your "search history",
and turning it over to the government.
4. Preventing sites that you don't log into from accumulating your
local browse history over time.
That's not perfect, but that's good enough for me.

@_date: 2007-03-30 12:22:15
@_author: Michael_google gmail_Gersten 
@_subject: Please don't recommend Tor Button! 
Decloak fails on Safari, Mac OS, 10.4.9. Firefox on the same machine
works, and reveals my real external NAT from both Java AND Flash.
Java version:
java version "1.5.0_07"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_07-164)
Java HotSpot(TM) Client VM (build 1.5.0_07-87, mixed mode, sharing)
Java console on Safari:
basic: Referencing classloader: sun.plugin.ClassLoaderInfo at c3014, refcount=1
basic: Added progress listener: sun.plugin.util.GrayBoxPainter at 4dd758
basic: Loading applet ...
basic: Initializing applet ...
basic: Starting applet ...
network: Connecting
 with
proxy=HTTP @ /127.0.0.1:8118
basic: Loading from cache
network: Connecting socket://metasploit.com:80 with proxy=SOCKS @
network: Connecting socket://metasploit.com:80 with proxy=SOCKS @
liveconnect: JSObject::call: name=decloakAppletCallback
Java console on Firefox:
basic: Referencing classloader: sun.plugin.ClassLoaderInfo at f54c5f, refcount=1
basic: Added progress listener: sun.plugin.util.GrayBoxPainter at e18ba
basic: Loading applet ...
basic: Initializing applet ...
Fri Mar 30 12:21:32 PDT 2007 JEP creating applet HelloWorld
network: Connecting socket://metasploit.com:80 with proxy=SOCKS @
network: Connecting socket://metasploit.com:80 with proxy=SOCKS @
<<< ProxyClassLoader: defined LiveConnectProxy class. >>>
<<< Here're the permissions you've got: >>>
<<< java.security.Permissions at 9b59a2 (
 (java.net.SocketPermission metasploit.com connect,accept,resolve)
 >>>
basic: Starting applet ...
basic: Stopping applet ...
basic: Referencing classloader: sun.plugin.ClassLoaderInfo at f54c5f, refcount=2
basic: Added progress listener: sun.plugin.util.GrayBoxPainter at 5ed853
basic: Loading applet ...
basic: Initializing applet ...
Fri Mar 30 12:21:35 PDT 2007 JEP creating applet HelloWorld
basic: Removed progress listener: sun.plugin.util.GrayBoxPainter at e18ba
basic: Finding information ...
basic: Releasing classloader: sun.plugin.ClassLoaderInfo at f54c5f, refcount=1
basic: Done ...
basic: Joining applet thread ...
basic: Destroying applet ...
basic: Disposing applet ...
basic: Quiting applet ...
basic: Joined applet thread ...
network: Connecting socket://metasploit.com:80 with proxy=SOCKS @
network: Connecting socket://metasploit.com:80 with proxy=SOCKS @
<<< ProxyClassLoader: defined LiveConnectProxy class. >>>
<<< Here're the permissions you've got: >>>
<<< java.security.Permissions at c38157 (
 (java.net.SocketPermission metasploit.com connect,accept,resolve)
 >>>
basic: Removed progress listener: sun.plugin.util.GrayBoxPainter at 5ed853
basic: Finding information ...
basic: Releasing classloader: sun.plugin.ClassLoaderInfo at f54c5f, refcount=0
basic: Caching classloader: sun.plugin.ClassLoaderInfo at f54c5f
basic: Current classloader cache size: 1
basic: Done ...
basic: Joining applet thread ...
basic: Destroying applet ...
basic: Disposing applet ...
basic: Quiting applet ...
basic: Joined applet thread ...

@_date: 2007-03-30 13:52:38
@_author: Michael_google gmail_Gersten 
@_subject: Tor breaks slashdot 
Ok, the pictures for this are up at Please note: This was broken in rc 9. It is working (tested today)
with rc 12, Mac os 10.4.9, and Firefox 2.0.0.3. Same privoxy :-).
I don't know which upgrade fixed it, but it does work now.

@_date: 2007-03-30 14:26:48
@_author: Michael_google gmail_Gersten 
@_subject: Tor breaks slashdot 
I spoke too soon. It is still broken. And, further investigation now
tells me what's going on.
The repeat case: Go to slashdot. Log into an account that uses the new
discussion system. View any page.
Expand a "hidden" discussion topic. It will work.
Switch to Vidalia. Ask for a new identity.
Switch back to firefox. Try to exand another hidden discussion topic.
Vidalia will show a connection opens to slashdot, and then closes.
Nothing else will change in the browser -- you will not see the full
text of the discussion (only the short blurb that came with the
original page), and you won't see the parent/reply buttons.
It is not so much triggered by Tor, but by using a different
connection than the original page.
Since Tor will change connections after (I think) 10 minutes by
default anyways, this can occur without using "new identity".

@_date: 2007-03-31 07:55:31
@_author: Michael_google gmail_Gersten 
@_subject: Tor DNS 
I'm running RC-12, and I got (this morning)
Mar 31 07:50:55 stbmac Tor[6498]: No Tor server exists that allows
exit to 127.0.0.1:80. Rejecting.\n
With no indication of who said 127.0.0.1.
Can we please get that message to indicate which Tor node mapped
[scrubbed] to an unusable address?
In other words, rather than Tor maintaining a list of hostname ->
(address, ttl) maps, maintain hostname -> (address, ttl, node that
provided the mapping), and allow that list to be queried.
Automatically provide the mapping when Tor detects an invalid case
like this.

@_date: 2007-03-04 23:56:28
@_author: Michael_google gmail_Gersten 
@_subject: pop3 and smtp over ssl [was: ssh] 
It is my understanding (please correct me if I'm wrong) that Tor will
open a new connection as needed when you ask for an exit port that the
current connections do not support.
Should be automatic

@_date: 2007-03-05 09:52:19
@_author: Michael_google gmail_Gersten 
@_subject: pop3 and smtp over ssl [was: ssh] 
Can you try using ".stbmac.exit" on that port 465 sending email? I
have secure smtp enabled, or at least, it should be enabled.
Is port 995 now in the default accept list? (rc-9)
If it works with an explicit exit node, but not without an explicit
exit node, then I'd say that's proof that tor does not automatically
choose an appropriate exit node as needed :-).

@_date: 2007-03-05 11:35:13
@_author: Michael_google gmail_Gersten 
@_subject: Tor breaks slashdot 
Tor seems to be destroying slashdot's new "hidden, display on demand"
discussion format.
Test environment: Firefox 2.0.0.2, Mac os 10.4.8, privoxy 3.0.6, tor rc 9.
For this test, everything went through privoxy. Slashdot page is
Privoxy config file contains one relavent line:
 forward-socks4a / localhost:9050 .
This line was either commented out, or uncommented, to switch tor on or off.
Observed behavior: When commented out (tor turned off), clicking on
the hidden discussions first displays the "initial burst" that appears
to have come in the original web page, and after about one second, the
rest of the article and article header appear, downloaded on demand
from slashdot.
When enabled, the next (first) one also appears. After that, no more
will download.
When disabled again, there will be one more "does not appear". After
that, they will all appear.
The delay of one between enabling/disabling, and actual, I'm guessing
to be privoxy noticing a change to its config file.

@_date: 2007-03-05 14:24:28
@_author: Michael_google gmail_Gersten 
@_subject: Tor breaks slashdot 
What's the proper way to send screenshots to this list?

@_date: 2007-03-06 09:04:01
@_author: Michael_google gmail_Gersten 
@_subject: Error Message when stop Tor with Vidalia 
That all looks correct to me.
As for the error? It looks like it is saying that it is logged at
"error" level of importance -- important enough that you see it. It
does not mean that it's actually an error.

@_date: 2007-03-02 21:39:16
@_author: Michael_google gmail_Gersten 
@_subject: Directory problem? 
Mac OS X 10.4.8. Installed with latest vidalia and privoxy package.
Going to 1.2.9 tonight.

@_date: 2007-03-06 17:13:38
@_author: Michael_google gmail_Gersten 
@_subject: Noobie Configuration Questions 
To answer some of your questions:
Privoxy does at least two things for you. It strips out some unwanted
cookie behavior, and it strips out unwanted advertisements.
Centralize advertisement sites are bad for several reasons. One is
that they get items like
I'm on somesite.com/page1.html, and I'm asking for an ad.
I'm now on somesite.com/page2.html, and I'm asking for an ad.
I'm now on othersite.jp/deep/path/download.html, and I'm asking for an ad.
They get enough information that -- besides just serving you ads --
they are tracking who you visit, where you go, how you got there, etc.
I have no problem with ads.
I have every problem with annoying 30 FPS animation.
I have every problem with popups, and javascript changing my settings
I have every problem with tracking what I do/where I go via a data
minable service.
I have every problem with a third party being subponeable to get
information trivially that would be impossible to get if they had to
get a search warrant. (U.S.A. concern here).
And, I have every problem with a third party deciding that it can sell
this information to whomever it wants, for whatever price, giving me
So, I have privoxy to strip out advertisements. It works better than a
giant /etc/hosts file does.
Oh yea -- it also strips out some troublesome javascript behavior.
Can't stop them all -- that's really a case of "The browser, having
gotten the full file to display, now needs to pass that through a
security program". Instead, they (every one I've seen) just assumes
that anything generated by the scripts is valid and safe HTML. Even if
it's a script that is generating a new script that is going to grab
data on your system and send it back.

@_date: 2007-03-06 21:46:43
@_author: Michael_google gmail_Gersten 
@_subject: Building tracking system to nab Tor pedophiles 
Well, first, this is just the normal exit node exposure of tor.
The exit node in your circuit gets to see the raw communication
between you and your destination. If you are using an SSL channel
(SSH, https, etc) then nothing is a problem. Otherwise, the exit node
can do things like spy on usernames and passwords, etc.
There are already sites that modify the HTML of web pages going
through them -- I've had scripts munged on some sites, for example --
and this is just another case of that.
Now, I believe tor allows you do exclude nodes from ever being used as
exit nodes.

@_date: 2007-03-06 21:57:49
@_author: Michael_google gmail_Gersten 
@_subject: How would tor defend from this attack? 
So here's an idea for an attack on tor.
We recently saw a paper that said that someone who puts in a lot of
routers, claiming to have high bandwidth, can correlate senders and
destinations, exposing the traffic analysis that tor is trying to
defend against. And, a response from the maintainers -- doing that
leaves a lot of tracks.
What about a real set of routers?
Right now, it looks like the network of tor routers is such that 50
high speed routers will be able to be that >10% of the network, and
determine the senders/receivers of traffic.
How big of an attack is this? 50 headless machines, at $400 per
machine, $20,000. 50 network connections at $50/month, $2,500 per
month. $30,000 per year.
$50,000 for the first year, and what happens?
Tor gets a lot more bandwidth. Tor looks to be expanding at a good
rate. And tor's effectiveness is compromised, completely. Heck, it can
even be done by law enforcement, or even by China, so that they know
who to go after.
And, since exit nodes see a lot of unencrypted traffic, this means
that it becomes easier, not harder, to watch someone. Right now, for
example, it's hard to grab the traffic from someone elsewhere on the
internet, but if you know that they use tor, then you can run an exit
router and have a chance to see what they do. Run enough routers, and
you can grab a large portion of their traffic.
As much as tor is trying to protect privacy, is it time to ask the
other question: Does tor make it much easier for a large organization
to start restricting privacy?
$50,000 may sound like a lot, but consider what can be generated for
an "anti-pedophile" group -- a private organization saying "Protect
the children!". Or ... well, the point is, that's relatively cheap. It
doesn't take a government level spending to do that -- it's even in
the range of the corporate espionage budget of a large multi-national
How can tor defend against something like this?

@_date: 2007-05-15 15:20:34
@_author: Michael_google gmail_Gersten 
@_subject: LiveCD / USB for testing 
Blocking all UDP will destroy DNS, at least.
My understanding is that if you are an exit node, then you will be
asked to do DNS lookup for your clients.

@_date: 2007-05-20 12:09:34
@_author: Michael_google gmail_Gersten 
@_subject: Tor/privoxy and gmail/ajax? 
I have privoxy set up to log all connections (debug 1). I see all my
HTTP requests showing up in real time.
Everything, that is, except for what happens with gmail.
Now, I have gmail set to bypass tor (too slow otherwise). But Firefox
is still sending everything to privoxy, which isn't logging anything
on gmail after the initial visit.
Is ajax somehow bypassing the proxy? (I know that Java now has a proxy
bypasser, so I have to wonder...)
EDIT: Weird. I opened a second gmail window, and the second one is
logging everything through privoxy. But the first one doesn't.

@_date: 2007-05-25 12:47:56
@_author: Michael_google gmail_Gersten 
@_subject: Regulating bandwidth 
May I strongly suggest keeping your bandwidth as high as you can
afford, even if it means the limit runs out early?
Right now the two biggest limits on Tor's speed is transmission speed
and CPU overhead. I'm realizing that there's no CPU limit -- there's
no "Only let N incoming routes exist" config parameter. And lowering
the transmission speed will only reduce Tor's speed.
Can we get a "CPU limit" / "Only let N incoming connections" parameter?

@_date: 2007-05-26 07:44:13
@_author: Michael_google gmail_Gersten 
@_subject: Wanted feature / option 
I finally realized what feature I'd like to see. CircuitMinimumBandwidth.
Have a config option to tell Tor how much CPU time it can expect to
give to processing onions (which will tell it how many active
connections it can handle) (Or tell it directly how many active ones
it can handle).
Tor knows the total bandwidth it has to use.
There's good heuristics for telling how much bandwidth a connection
will need. (Most will need a high initial push, and then occasional,
intermittent spikes; if a connection needs a lot for more than seconds, it's likely to need a lot for a while longer. Etc.)
There's a way to tell when the CPU limit will prevent any more data
Combined, this would allow a node to refuse non-specific node requests
(normal circuits would be blocked if the tor server is busy, but a
".node.exit" would still be allowed).
This would also eliminate any perceived "slowness" of tor -- no longer
would I see 22 MB nodes in my path, yet dialup users could still use
them. If I have a 1300 MB node in my path, I know it can handle my 150
request, and not be either so swamped that I'm only seeing 15, or so
overloaded that it's past it's CPU limit. Equally, I know that I can
tell tor (without having to use "nice") not to steal all my CPU while
I'm using my computer.
Potential problems? What would we do if we could not find a viable
circuit? What if every node is asked and reports "Busy" -- how do we
tell the user that "Tor is full", or should a lowspeed connection be
made anyways?

@_date: 2007-05-29 10:44:18
@_author: Michael_google gmail_Gersten 
@_subject: ISP TOS restrictions on servers 
Just a quick question. I thought that the encryption system used was
based on factoring a large prime. If so, won't it become obsolete when
quantum computers become available? That is something that I expect to
see in this lifetime.

@_date: 2007-05-29 11:04:58
@_author: Michael_google gmail_Gersten 
@_subject: Ideas on increasing the significance of tor 
More nodes is not the answer. You could add one million dialup speed
nodes, and not improve the speed of Tor.
More bandwidth is part of the answer. One exit node with 21 gigawatts,
err, enough bandwidth might improve (possibly doubling) the speed of
Tor -- IF it has enough CPU power to run things.
I've seen circuits with only high-speed nodes (over 900 KB/s, as
reported by Vidallia) operate slowly (and the web server is fast as
soon as I switch Tor off). So bandwidth isn't the limit either.
The best I can conclude, from limited observations, is that CPU
overhead is critical. More connections are made to high bandwidth
nodes than they can handle (there is no "I'm full, I'm rejecting your
connection request" message in the Tor protocol that I know of).
The second limit is node speed. There's no way to say "Only use nodes
with at least  speed in my connections". As soon as I get a node
with less than 150 KB/s in my paths, my speed will be lower with Tor,
because that's my download speed.
The third limit is number of active connections. If I'm downloading a
file, I don't mind 20 KB/s paths *IF* I can use multiple paths. My
download manager is happy to work with 10 parts at once.
So, my suspicions:
1. An easy way to toggle between "At least speed X" (for
single-threaded web browsing) and "Any speed, many connections" (for
2. A way to keep nodes from being CPU starved from the encryption
processing (high bandwidth nodes)
3. A way to keep nodes from being bandwidth starved (the main limit on
middle-speed nodes).

@_date: 2007-11-16 09:25:18
@_author: Michael_google gmail_Gersten 
@_subject: Security concerns/help me understand tor 
In other words, any access to port 80 on the router from inside the
network gives the admin console, even if you are using the external IP
address, and have a mapping from external IP to intranet host with
Dang. I ran into one of those a few years ago, and they were a bleep.
And the "obvious" (now that it was mentioned) security concern -- if
someone tricks your system, and tries to access an internal server
from inside the router by malicious intent, getting special access to
the server. The router might think that it's protecting you from that.
1. The very nature of "I want public requests to this IP:port to go to
that server" means there's no special access to protect against.
2. It's not the router's job to secure the rest of the net.
3. This does nothing to solve the whole "DNS says that attacker.com is
at 128.128.2.3 and 192.168.1.2. The first didn't work, so I'll try the
second" issue.
I'd say, if I understand things correctly, that your router is broken,
by design, and should be returned to the manufacturer if still under
warranty, or just plain replaced.

@_date: 2007-11-17 16:30:55
@_author: Michael_google gmail_Gersten 
@_subject: encrypting your communications?! 
How about this?
Tor protects you by bouncing your communications around a distributed
network of relays run by volunteers all around the world: it prevents
the sites you visit from learning where you're coming from, and it
prevents somebody watching your Internet connection from learning what
sites you visit. Even the Tor relay you connect to doesn't learn that.
However, Tor is NOT a "Solve-everything" -- proper use of Tor requires
protection of cookies and Javascript (either of which, without any
other tool, can be used to reveal you to the destination node).
Finally, Tor exposes you to a new type of Man-In-The-Middle attack --
the last Tor node used will see everything that the destination site
sees. [bold] Never send a password over Tor unless you are using an
https connection. If your site only uses https for the login password,
but uses a cookie authentication and normal http after that, then your
login may still be stolen; always log out from the site you are
talking to when finished. [/bold]
It is recommended that you use a separate profile for your tor-based
anonymous browsing, with cookies cleared after each session, and
javascript disabled. "Noscript", for firefox, can safely permit
scripts on a site-by-site basis, after determining that it is safe.
Additionally, a plugin or tool to remove "referer" information is
absolutely essential, or third party sites -- such as advertisers --
can track your every move. Tor is normally used with Privoxy to both
remove referer information, and block advertisers.
("Referer" is the proper spelling -- the original http standard
misspelled "referrer", and the misspelling is too ingrained in the web
to be fixed now.)

@_date: 2007-10-01 16:25:50
@_author: Michael_google gmail_Gersten 
@_subject: funneling a wireless net's outbound connections through tor 
I think this discussion brings up an interesting point, again.
Tor [b] changes [/b] the risks you are opened to.
It removes the risk of ISP's, search engines, and advertisers from
tracking your click stream, and being the receipt of a government
request for your online history. (Most people don't need tor because
of the anonymity. The more people using tor, the better hidden those
that do need it are hidden.)
It exposes serious MITM attacks for anything that is not HTTPS: unless
you use exit guards.
We have entry guards specifically because otherwise evil node group X
will at some point grab your entry node and exit node, and correlate
who you are.
We need exit guards specifically because otherwise evil exit node X
will at some point grab your authentication cookies.
Previously, someone said that having both entry guards and exit guards
together was self defeating. Do we need exit guards more than we need
entry guards?

@_date: 2007-10-03 07:56:41
@_author: Michael_google gmail_Gersten 
@_subject: Torbutton 1.1.8-alpha (Usability improvements) 
I can think of two groups of people using Tor. There may be others.
1. No one should have any ability to trace me. I need to be completely
anonymous. That I visited a site on subject X could boil a teapot
(Rape victim site; someone in China going to an anti-government site).
Such users need to have no cookies persist after a session.
2. People whose government can freely grab any information about them
from their ISP; people who consider their browsing history / click
stream / search requests to be private, even when their country
considers that random snooping in those for something that might link
them to potential criminals to be justifiable behavior.
Such users are not nearly as concerned about persistent cookies, as
long as they can control which cookies are persistent.
I think that's the real issue I have with cookies. The idea that a
cookie can be "permanent" without my approval. I have no problem with
login cookies. I have every problem with third party cookies being
accepted at all (the only place where IE is better than firefox --
those can be disabled in IE). I hate "visitor tracking" cookies that
seem to get stuffed out by every website hoster now-a-days.
Now, how do httpS: streams get their cookies stolen or modified?

@_date: 2007-10-03 18:00:09
@_author: Michael_google gmail_Gersten 
@_subject: Torbutton 1.1.8-alpha (Usability improvements) 
"Newnym" is a tor-level action to change streams.
"Clear cookies" is a torbutton-level action to clear out cookies
I think it sounds like you want an action at torbutton that does both.
I personally use vidalia's "new identity" a lot, a lot more than I
clear cookies.
I think that "new user" in torbutton should clear any per-session cookie.
I think that it should be possible to specify specific cookies to be
preserved across a "new user", as well as others that should be
Firefox has the problem that if you clear cookies from a site, that
site is permanently blocked from sending cookies. Again, I want to
convert "permanent" cookies into session cookies, but still keep some

@_date: 2007-10-07 22:16:11
@_author: Michael_google gmail_Gersten 
@_subject: Torbutton 1.1.8-alpha (Usability improvements) 
The big issue that I am aware of is that lots of "new circuits" cause
CPU overhead. Some sites are CPU bound, and are hurt by that.
Really? For me, if I remove a cookie, that site is prohibited from
sending me any cookie after that. Caused me all sorts of problems
until I realized this (I used to clean my cookies out regularly).

@_date: 2007-10-07 22:21:31
@_author: Michael_google gmail_Gersten 
@_subject: headers in email 
Hmm. Technically, yes.
To do so, you have to run a MITM node that intercepts traffic, looks
at it, decides to modify it, and then alters the traffic being sent
over it.
That's the sort of thing that I think is considered a "bad thing".

@_date: 2007-09-16 12:47:24
@_author: Michael_google gmail_Gersten 
@_subject: Privoxy config: Use Tor for https:, and normal for http: 
So one big thing that has been discussed on the list of late is that
anything sent over http: may transmit authentication cookies in the
I'd like to configure privoxy to assume that instead of sending all
traffic over tor, or instead of forwarding based on node name, to use
What I'm looking at is something like this:
1. Anything specifying https: may be safely sent over tor.
2. Anything specifying http: should not
I'm now starting to track which sites I'm "logged in" on, by seeing
which send me personal greetings, that do not support https:, and
adding in "do not forward these sites over tor" to my privoxy config.
I think of this as a "start". Even with this in place, is there
anything that I might be overlooking?

@_date: 2007-09-16 14:19:55
@_author: Michael_google gmail_Gersten 
@_subject: A Tor Typo 
I suspect that you will find that this is not a 100% "true for all
English speaking countries and locations", and that it varies by
dialect, possibly by accent/location.
In any event, I was taught growing up that it is the first sound.
(And I think we are sufficiently off-topic now :-)

@_date: 2007-09-21 15:06:39
@_author: Michael_google gmail_Gersten 
@_subject: Load Balancing 
If you have a web page with 30 sub-fetches (images, style sheets,
script files, etc), then they will all fetch over a single circuit.
It does NOT make sense from a performance point of view. Since
everything will be encrypted, regardless of which circuit it takes,
there is no performance impact.
The question of network efficiency is an interesting one. A single
circuit will be slower than many circuits. However, each new circuit
will start off slower (TCP takes time to get up to speed). Many
established circuits will be faster than one established circuit. [1]
The question of anonymity is more interesting. When I asked on the
development list, I was told that using a single circuit rather than
many circuits helped users to remain anonymous. I didn't understand
the explanation, so I can't repeat it; I trust that the people who
have studied that more than I have know what they are talking about.
[1] This is more true statistically than absolutely. If you have many
circuits, some will be fast, and some slow. Rotating your usage,
concentrating on those circuits with the smallest queue, will send
more TCP channels over faster Tor circuits. However, with many
circuits, you pretty much guarantee that one will be slow. With a
single circuit, you have the "all eggs in one basket" case, and you
may have a very slow connection.

@_date: 2007-09-27 21:42:53
@_author: Michael_google gmail_Gersten 
@_subject: =?WINDOWS-1252?Q?Re:_Maone_wrote:_"Today=92s_lesso?= =?WINDOWS-1252?Q?n_is:_if_you_want_to_stay_anony?= =?WINDOWS-1252?Q?mous,_you=92d_better_turn_off_Jav?= =?WINDOWS-1252?Q?a,_Flash_and_any_other_plugin!"?= 
Can you check your logs to see if this leaked me?
Pacific daylight time: 9:40 pm
Real IP address (this time, dynamic): 76.175.149.74
Apple Preview, opened via Firefox, not in-browser but as an external app.
It's not the official Adobe software :-)

@_date: 2007-09-29 19:52:20
@_author: Michael_google gmail_Gersten 
@_subject: =?WINDOWS-1252?Q?Re:_Maone_wrote:_"Today=92s_lesso?= =?WINDOWS-1252?Q?n_is:_if_you_want_to_stay_anony?= =?WINDOWS-1252?Q?mous,_you=92d_better_turn_off_Jav?= =?WINDOWS-1252?Q?a,_Flash_and_any_other_plugin!"?= 
Good :-)
It saved it to disk first, and then opened the disk file.

@_date: 2007-09-07 11:22:42
@_author: Michael_google gmail_Gersten 
@_subject: Setting up private Tor network with the real one 
In general, you can't, and don't want, different directory servers
telling you about different nodes. Imagine what would happen if one
directory server was compromised, and told you about a set of attacker
Now, one place where this setup becomes interesting is if you have a
separate network -- either the corporate internet, or some variation
of IP V8 (maybe a very large ISP, like China, decides to use their own
network numbering with a translating boarder). Then, you could have
two sets of directory authorities, for two sets of destination IP
ranges -- one set of directory authorities for these IP's, and a
different one for those IP's. Then, you might wind up building two
tunnels, one to get to the gateway, and a second to traverse the
second network on the other side.

@_date: 2007-09-10 09:15:42
@_author: Michael_google gmail_Gersten 
@_subject: =?WINDOWS-1252?Q?Re:_Tor_at_heart_of_embassy_passwords_leak;_"ToR_isn?= =?WINDOWS-1252?Q?=92t_the_problem,_just_use_it_for_what_it=92s_made_for."?= 
So let me see if I understand this correctly.
First, anything sent through Tor can be sniffed by the exit node,
exactly like anything sent without Tor can be sniffed by your ISP.
Second, an ISP can be ordered to turn over all information about your
communication (100% leak), and for all we know, 100% of the content as
well (revealing 100% of all private matters). In comparison, Tor only
catches some of the information about your communication, and some of
your private matters.
Thirdly, the people involved either did not use http*S*: to talk
securely, or they used a device that handled invalid certificates
wrong, and did not even notice.
Does that sum it up correctly?

@_date: 2007-09-10 10:50:53
@_author: Michael_google gmail_Gersten 
@_subject: =?WINDOWS-1252?Q?Re:_Tor_at_heart_of_embassy_passwords_leak;_"ToR_isn?= =?WINDOWS-1252?Q?=92t_the_problem,_just_use_it_for_what_it=92s_made_for."?= 
But with Tor, a given bad ISP/node will only see some of your traffic
targeted by police or FBI will see all of your traffic/always be an

@_date: 2007-09-10 14:33:42
@_author: Michael_google gmail_Gersten 
@_subject: =?WINDOWS-1252?Q?Re:_Tor_at_heart_of_embassy_passwords_leak;_"ToR_isn?= =?WINDOWS-1252?Q?=92t_the_problem,_just_use_it_for_what_it=92s_made_for."?= 
Hmm... I wonder about "Exit guards" ... (But how could you verify
their "goodness", or the "goodness" of their ISP?)
Ohh... I didn't even think of that. A tor node's ISP can snoop
outgoing traffic of all the "security risks" -- they are, after all,
the ones hiding stuff.

@_date: 2008-04-02 22:30:28
@_author: Michael_google gmail_Gersten 
@_subject: Privoxy: Can it forward/not forward based on ports? 
I know privoxy can choose to forward or not forward based on hostname.
But what about host specific ports?
Specifically, if I'm talking to a Google server on 443 (https), can it
be let through without going through Tor?
I figure that it's already encrypted, and anyone interested in me will
already know that I use Google, so tor gives me protection from none
of: Privacy from snooping ISP, traffic analysis, website can't track
Docs.google.com -- spreadsheets, etc -- is horribly slow with Tor and
Privoxy. Gmail keeps sending me warnings about invalid return codes.
But normal google search queries I still want to torify to defeat

@_date: 2008-04-02 22:49:11
@_author: Michael_google gmail_Gersten 
@_subject: Privoxy: Can it forward/not forward based on ports? 
Well, to answer my own question:
forward .google.com:443 .
Next time look in the right section of the manual :-)

@_date: 2008-02-03 16:32:48
@_author: Michael_google gmail_Gersten 
@_subject: The use of malicious botnets to disrupt The Onion Router 
We have entry guards, with the purpose of reducing the chance of
someone who has control of multiple nodes from tying your entry and
exit information together.
Why not have exit guards, to reduce the risk of malicious exit nodes
from causing problems?
(Did I already make that suggestion a few months ago? It seems familiar).

@_date: 2008-02-03 16:47:24
@_author: Michael_google gmail_Gersten 
@_subject: New Tor distribution for testing: Tor Browser Bundle 
And what about countries where something like Tor is illegal?

@_date: 2008-03-30 15:10:40
@_author: Michael_google gmail_Gersten 
@_subject: Tor 0.2.0.22-rc is out 
Isn't a better solution to ask, "Should this be system-wide affecting
all users, or only for the current user?" during install?

@_date: 2008-03-02 15:34:55
@_author: Michael_google gmail_Gersten 
@_subject: Defeat Exit Node Sniffing? 
Which says:
We'd like to make it still work even if the service is nearby the Tor
relay but not on the same IP address. But there are a variety of
technical problems we need to overcome first (the main one being "how
does the Tor client learn which relays are associated with which
websites in a decentralized yet non-gamable way?").
Here's a simple idea. Just as search engines added a "robots.txt"
file, how about a web server providing a "torexit.txt" file, which is
simply the list of tor exit nodes that the server considers "close" to
In other words, if I run a web server, I would list the tor nodes that
I consider safe and nearby. Maybe they're something I run and control
on a physically nearby machine. (Maybe even on an adjacent computer?).
It's not attackable, without being able to attack the web server
itself. Granted, that's not perfect, but if you can attack the web
server, then tricking tor users is probably not the biggest fish to

@_date: 2012-12-01 07:58:27
@_author: Michael Gersten 
@_subject: [tor-talk] William was raided for running a Tor exit node. 
As much as I'm not sure I want to add to this, and while I recognize that this is not the USA, do recall that in my own country of the USA, where the right to justice is explicit in the constitution, it is routinely ignored by judges who say that they run courts of law, not of justice. I'll also remind you of people who were railroaded because politicians wanted to prove a point -- and there's the recent publicity over a group of 5 that were interrogated without lawyers at the age of 15, forced to confess, and then spent 25 years in jail, partially because their appointed lawyers were horrible.
We've learned that if the people in power want to make an example of you, nothing matters except being so rich that you can afford the best lawyers. O.J. Simpson's lawyers were skilled enough -- and could afford everything involved -- to demonstrate that police procedures were iffy at best, and down-right rotten -- and these were the procedures that were "standard" behavior at worst, and "best case, high profile case" at best. Out of that whole thing came a federal government report that "forensic science" had little to no science in it, was full of holes, and a long list of cases where an "expert" had testified to stuff that was impossible -- including at least one case where a bitemark could not have been a match -- the person investigated was missing two teeth, the bite mark was only missing one, and on the basis of the testimony of an "expert" that "He could have twisted his mouth while biting to make that mark", an innocent person was sentenced.
We've learned that "Fingerprints", that absolute match that can send you away as an absolute conviction, are so unreliable that the report all but said that they are completely unreliable with the current technology.
Do we have lots of people sentenced improperly? Yes. We can prove it. We are doing nothing to fix this.
Heck, do you remember a few years ago where it was discovered that we had a juvenile judge routinely sending juveniles to what was basically a work camp that he was profiting from? Even when innocent? Now it turns out that we are putting adult prisoners to work, at a cost of around $4 per hour, and outsourcing that to any company in the country that wants cheap labor (previously outsourced to federal agencies, as it turns out, for years -- and in some cases, those federal agencies were required to use this labor source). That's right -- we were putting innocent people to forced labor in prison while taking jobs away from ordinary people out of prison.
And you're expecting that "If he's not charged, he doesn't have to worry. If he's innocent, he's safe"? I used to think that. I don't any more.

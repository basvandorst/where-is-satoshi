
@_date: 2011-12-01 10:22:12
@_author: Marsh Ray 
@_subject: [tor-talk] segfault at 8 ip ... error 4 in tor 
You might try building tor yourself and launching the tor executable right from the path where it was built, i.e., the location from which 'make install' would copied it.
That's always given me the best luck for having gdb locate symbols and - Marsh

@_date: 2011-06-01 20:41:47
@_author: Marsh Ray 
@_subject: [tor-talk] EFF Tor Challenge 
Everybody's gotta choose their battles and the EFF has chosen enough of
them to earn my great admiration.
Yeah it's usually a matter of only a few weeks between local privilege escalation exploits for Linux are published on lists like Full-Disclosure, and those are just the ones that are not sold. Security boundaries on shared commodity hardware have almost always turned out to be ineffective. They're a myth, like Santa Claus, one that basically honest and good-natured people agree to believe in because of the huge cost savings it enables (over having to purchase separate hardware for every category of data).
But this latest round of virtualization technology is holding up better than I'd expected.
No, you're factually wrong on the deeper point. The muddy terminology is just a symptom.
Don't forget the host-only virtual networking that was suggested too.
Yes, everyone should think and plan carefully before running anything that accepts incoming connections from the internet. However, the millions of actual servers on the internet show that many can accomplish it in practice (both well and poorly). A Tor internal node is not really special in this regard and, actually, its attack surface is relatively limited in comparison. Just imagine trying to secure a full-featured multiuser mail server!
Personally I'm more concerned about running Wordpress or any other random PHP app than TOR.
- Marsh

@_date: 2011-05-16 10:34:56
@_author: Marsh Ray 
@_subject: [tor-talk] "drop all vulnerable relays from the consensus" 
Once the attacker has code execution he can patch it to emit whatever version string is necessary.
We see this with Windows botnets which will sometimes, immediately after infection, patch the vulnerability they used to come in on. They may also un-patch some other vulnerability (reinstalling the original vulnerable signed code) in such a way that the OS still thinks it's applied the update.
Of course, none of this is an argument against kicking off known-vulnerable clients.
- Marsh

@_date: 2011-05-26 11:43:01
@_author: Marsh Ray 
@_subject: [tor-talk] Securing a Relay - chroot 
It's more that it's in the same 'broadcast domain' at the switching layer, whereas 'class C' is an (archaic) routing layer concept. Depending on the details of the switch though, monitoring (and active man-in-the-middle attacks) could range from easy to impossible.
But it may be that your virtualization software can force the guest NIC inside an IEEE 802.1Q VLAN so it can't see the rest of the network.
Which raises the question of what it can see, so you'll have to provide it with some connectivity, like a 192.168.x.x address and NAT to publicly-routable IP space. You could even do this NATting and firewalling on the host kernel, perhaps with a virtual "host only" segment from the guest to the host.
But don't ask me for every detail on how to set this up :-), I've listed the key terms for which there are HOWTOs available. You should only undertake this project if you _like_ digging into this sort of thing.
- Marsh

@_date: 2011-05-27 11:39:05
@_author: Marsh Ray 
@_subject: [tor-talk] Tor TLS error 
Which version (number, distribution) of OpenSSL are you using? The line
number s23_clnt.c:607 might tell us something.
Could you get a packet capture (Wireshark, tshark, tcpdump, etc.)?
It's probably only a few KB of the packets which are relevant to the
failed connection attempt.
My guess is that the problem relates to the SMTP server not accepting
raw TLS on port 465. Is the perhaps an MS Exchange server?
 From  :
Can you use port 587?
- Marsh

@_date: 2011-05-27 12:05:49
@_author: Marsh Ray 
@_subject: [tor-talk] Securing a Relay - chroot 
Heh, I've known those who do who couldn't get as far as you have already.
Wikipedia has a great article on VLANs.
You are asking entirely valid questions that the entire data security industry also struggles with every day on a deep level. I don't have a real satisfying answer for you.
You already understand the key point though: separation. Decide which systems you trust and for what purpose in what contexts you trust them. Place systems in different trust zones accordingly. Implement barriers between the zones and be very selective about what is allowed to pass.
Computers and networks are inherently good at copying and leaking information, they do it without even trying. Providing an open service while perfectly blocking the flow of selective information is actually extremely difficult to do on shared hardware.
There is always a cost to security, usually complexity, performance, administration, and money. I find this stuff fascinating and spend all my learning about it. But when I set up a relay the other day, I chose to address most of these problems with money: I paid a few dollars a month for a remote virtual host environment having no trust relationships with any of my other systems.
- Marsh

@_date: 2011-05-27 12:13:44
@_author: Marsh Ray 
@_subject: [tor-talk] Tor TLS error 
Perhaps you have access to take the capture on the server side?
It would be interesting to compare the two pcaps.
- Marsh

@_date: 2011-11-02 19:12:38
@_author: Marsh Ray 
@_subject: [tor-talk] Freedom Hosting admin revealed by Anonymous - Tor 
Mozilla stats  seem to suggest that there were 3000 Torbutton downloads and 171000 active Torbutton users on a typical day (earlier in the year before it was removed).
190 users falling for some professional social engineering and downloading a signed code update hosted on a compromised web server seems realistic to me. I'd guess at an estimate of the overall site popularity, probably fewer than 2000 regular visitors.
- Marsh

@_date: 2011-11-08 10:33:31
@_author: Marsh Ray 
@_subject: [tor-talk] Tor and AES-NI acceleration , and Tor profiling 
I wouldn't think so.
My understanding is that the problem with AES is that a straightforward implementation performs lots of table lookups and the access pattern is dependent on the secret key. This leaks information via cache timing.
AES-NI converts this to a single instruction which is said to operate in constant time. So that would be a back door, not a side channel attack. :-)
- Marsh

@_date: 2011-11-12 14:01:35
@_author: Marsh Ray 
@_subject: [tor-talk] Tor no longer works with win2K ?? 
It's also a bad idea from a security perspective. You could easily be doing them more harm than good.
Win2k had a long and useful life, but it has been laid to rest by its creator. If it feels "stable" and "well understood" today, it is because the world has decided to no longer research and report its bugs.
It's old and busted. Don't run it, even from behind a firewall. It is not secure.
- Marsh

@_date: 2011-09-07 15:42:06
@_author: Marsh Ray 
@_subject: [tor-talk] Dutch CA issues fake *.torproject.org cert (among 
Do they have a gun? Otherwise, cover the screen with your hand or ask them to look away.
Realistically, this is nowhere near the biggest threat these days. It's mostly a holdover from security guidance from shared computing labs and pre-internet days.
Yes, be aware of your physical surroundings. No, don't think that it keeps you one bit safe online, unless you're that special case where your adversary is physically present.
- Marsh

@_date: 2011-09-07 17:19:28
@_author: Marsh Ray 
@_subject: [tor-talk] Dutch CA issues fake *.torproject.org cert (among 
Sorry, wasn't trying to be patronizing. Just trying to give my opinion
This is where, IMHO, computer security people can maybe take a step
back. Sure we should all remind each other that it's easy to get
engrossed in the computer screen that we forget what's going on around
us and who may be watching.
But everyone in the world has experience managing their own personal
space and physical security. Computing devices are ordinary physical objects now. Computer security people may not be any better qualified to advise on personal physical security (and maybe we come across as a little patronizing too).
Right. I'm just not particularly qualified to advise about that kind of
Realistically today the bank may have thousands of customers with
malicious keyloggers for every one who is protected by an obscured
display. This was not the case just a few years ago, the threat has
changed. The keylogger threat might be somewhat mitigated with the UI
changes, but the UI is largely incapable of restoring a user's physical
- Marsh

@_date: 2011-09-07 22:14:15
@_author: Marsh Ray 
@_subject: [tor-talk] Tor spying 
Oh yeah. It happens.
You may have the threat a bit backwards.
Just try to imagine the spying that goes on over the internet as a whole. Governments, ISPs, telcos, businesses, spouses, employees, malware on your LAN, bad guys are all sniffing traffic all the time. Some digital satellite ISPs have an unencrypted downlink and the entire hemisphere can see the traffic.
The difference here is that these security researchers have blessed the public with the fruits of their research and we have benefited from it.
It's a gray area. I wouldn't do it myself, but I'm grateful to the others who have on occasion done something useful with it.
Yeah, who don't?
It's even a FAQ
Personally, if I were going to transmit a credit card or email password in-the-clear over Tor I'd choose Moxie or Jacob over some random node any day. But I'd do everything possible to avoid that in the first place.
- Marsh

@_date: 2011-09-11 00:32:42
@_author: Marsh Ray 
@_subject: [tor-talk] Google and Gmail 
But technologies like Tor are general purpose and useful for many things. Sometimes other people in the world have different instances of "THE MAN", maybe theirs might be expected to not have the same access to Accessing Gmail from within a network which is trying to block or intercept it is a easy to explain and realistic scenario. That type of example is useful for discussing the general security properties of a It also happens to be a service under active attack right now, providing a case study for attackers and defenders alike. This is historic: in the almost two decades of web security history, this is the first time a certificate issued by a widely trusted root CA has been detected in use in large scale man-in-the-middle attacks.
- Marsh

@_date: 2012-05-10 22:52:08
@_author: Marsh Ray 
@_subject: [tor-talk] tor/netfilter: packets without uid 
I'm not a netfilter expert, but it looks this is a pure TCP ACK packet. With LEN=40 there's no application data in it. It may have been auto-generated by the kernel as a reply to the external packet and never tagged with a user for that reason.
Dropping them may result in retransmission. As you noticed, once or twice a second until there's some user tagged data going out that can transmit the ack.
Just a theory.
- Marsh

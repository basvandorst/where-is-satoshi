
@_date: 2013-12-10 08:05:09
@_author: Cyrus 
@_subject: [tor-talk] Tor hidden services sending corrupt data 
I am having troubles with Tor, certain hidden services are getting
corrupted. I've tested these services connecting directly to nginx but
they are working fine. It is only when I load them through Tor that
aspects of them are missing, and always something different. There is
some kind of corruption occuring.
Here is my notices.log...
Dec 09 07:08:30.000 [notice] Tor 0.2.3.25 (git-17c24b3118224d65) opening
new log file.
Dec 09 07:08:31.000 [notice] Parsing GEOIP file /usr/local/share/tor/geoip.
Dec 09 07:08:31.000 [notice] This version of OpenSSL has a known-good
EVP counter-mode implementation. Using it.
Dec 09 07:08:31.000 [notice] OpenSSL OpenSSL 1.0.1c 10 May 2012 looks
like version 0.9.8m or later; I will try SSL_OP to enable renegotiation
Dec 09 07:08:33.000 [notice] Reloaded microdescriptor cache.  Found
16551 descriptors.
Dec 09 07:08:33.000 [notice] Bootstrapped 5%: Connecting to directory
Dec 09 07:08:33.000 [notice] We now have enough directory information to
build circuits.
Dec 09 07:08:33.000 [notice] Bootstrapped 80%: Connecting to the Tor
Dec 09 07:08:33.000 [notice] Bootstrapped 85%: Finishing handshake with
first hop.
Dec 09 07:08:33.000 [notice] We weren't able to find support for all of
the TLS ciphersuites that we wanted to advertise. This won't hurt
security, but it might make your Tor (if run as a client) more easy for
censors to block.
Dec 09 07:08:33.000 [notice] To correct this, use a version of OpenSSL
built with none of its ciphers disabled.
Dec 09 07:08:48.000 [notice] Heartbeat: Tor's uptime is 0:00 hours, with
270 circuits open. I've sent 2 kB and received 3 kB.
Dec 09 07:08:48.000 [notice] Bootstrapped 90%: Establishing a Tor circuit.
Dec 09 07:08:50.000 [notice] Tor has successfully opened a circuit.
Looks like client functionality is working.
Dec 09 07:08:50.000 [notice] Bootstrapped 100%: Done.
Dec 09 09:10:04.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 09:10:04.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 09:10:04.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 09:10:04.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 09:10:04.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 09:10:04.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 09:10:04.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 09:10:04.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 09:10:36.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 09:10:36.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 09:10:36.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 10:10:06.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:10:06.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:10:06.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:10:06.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:10:06.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:10:06.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:10:06.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:10:06.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:10:06.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:10:06.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:10:06.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:10:06.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:10:06.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:10:06.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 10:10:06.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 10:10:06.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 10:10:06.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 10:10:06.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 10:10:06.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 10:10:06.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 10:10:06.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 10:10:06.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 10:10:06.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 10:10:07.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 10:10:07.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 10:10:07.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 10:10:07.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 10:11:13.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:11:13.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:11:13.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:11:13.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:11:13.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:11:13.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:11:13.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:11:13.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 10:11:13.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 11:09:36.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 11:09:37.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 11:10:11.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 11:10:11.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 11:10:26.000 [notice] We stalled too much while trying to write
19968 bytes to address [scrubbed].  If this happens a lot, either
something is wrong with your network connection, or something is wrong
with theirs. (fd 49, type OR, state 8, marked at main.c:1057).
Dec 09 11:10:26.000 [notice] We stalled too much while trying to write
15872 bytes to address [scrubbed].  If this happens a lot, either
something is wrong with your network connection, or something is wrong
with theirs. (fd 50, type OR, state 8, marked at main.c:1057).
Dec 09 11:10:26.000 [notice] We stalled too much while trying to write
928 bytes to address [scrubbed].  If this happens a lot, either
something is wrong with your network connection, or something is wrong
with theirs. (fd 48, type OR, state 8, marked at main.c:1057).
Dec 09 11:10:43.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 11:10:43.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 11:10:43.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 12:09:57.000 [notice] We stalled too much while trying to write
5664 bytes to address [scrubbed].  If this happens a lot, either
something is wrong with your network connection, or something is wrong
with theirs. (fd 24, type OR, state 8, marked at main.c:1057).
Dec 09 12:10:14.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 12:10:14.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 12:10:14.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 12:10:14.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 12:10:14.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 12:10:14.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 12:10:14.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 12:11:17.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 12:11:17.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 12:11:17.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 12:11:17.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 12:11:17.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 12:11:17.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 12:11:17.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 12:11:17.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 12:11:17.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 12:11:18.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 13:08:34.000 [notice] Heartbeat: Tor's uptime is 6:00 hours, with
335 circuits open. I've sent 1.23 GB and received 138.95 MB.
Dec 09 13:10:43.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 13:10:43.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 13:10:43.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 13:10:43.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 13:10:43.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 13:10:43.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 13:10:43.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 13:10:43.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 13:10:43.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 13:11:14.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 13:11:14.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 13:11:14.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 13:11:14.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 13:11:14.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 13:11:14.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 13:11:14.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 13:11:14.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 13:11:14.000 [warn] Couldn't relaunch rendezvous circuit to
Dec 09 13:14:32.000 [notice] Your network connection speed appears to
have changed. Resetting timeout to 60s after 18 timeouts and 1000
Dec 09 14:10:13.000 [warn] Giving up launching first hop of circuit to
rendezvous point [scrubbed] for service xxxx.
Dec 09 15:31:05.000 [notice] Received reload signal (hup). Reloading
config and resetting internal state.
Dec 09 15:31:05.000 [notice] Read configuration file "/etc/tor/torrc".
Dec 09 15:31:05.000 [notice] You configured a non-loopback address for
SocksPort. This allows everybody on your local network to use your
machine as a proxy. Make sure this is what you wanted.
Dec 09 15:31:05.000 [notice] You configured a non-loopback address for
SocksPort. This allows everybody on your local network to use your
machine as a proxy. Make sure this is what you wanted.
Dec 09 15:31:05.000 [notice] Tor 0.2.3.25 (git-17c24b3118224d65) opening
log file.
Dec 09 15:31:35.000 [notice] Received reload signal (hup). Reloading
config and resetting internal state.
Dec 09 15:31:35.000 [notice] Read configuration file "/etc/tor/torrc".
Dec 09 15:31:35.000 [notice] You configured a non-loopback address for
SocksPort. This allows everybody on your local network to use your
machine as a proxy. Make sure this is what you wanted.
Dec 09 15:31:35.000 [notice] You configured a non-loopback address for
SocksPort. This allows everybody on your local network to use your
machine as a proxy. Make sure this is what you wanted.
Dec 09 15:31:35.000 [notice] Tor 0.2.3.25 (git-17c24b3118224d65) opening
log file.
Dec 09 19:08:34.000 [notice] Heartbeat: Tor's uptime is 12:00 hours,
with 356 circuits open. I've sent 2.89 GB and received 319.20 MB.
I am going to try restarting Tor for now, it would be nice to know if
anyone else is having p

@_date: 2013-12-28 04:24:06
@_author: Cyrus 
@_subject: [tor-talk] Internal error bug: Got an INTRODUCE2 cell ... 
I have an interesting bug and would like to know what it means. The
hidden service appears to work.
Dec 27 14:04:07.000 [warn] rend_service_introduce(): Bug: Internal
error: Got an INTRODUCE2 cell on an intro circ (for service
"xxxxxxxxxxxxxxxx") with no corresponding rend_intro_point_t.
They seem to come consecutively, about ten or twenty times once every 24
hours. They go away for a while if I restart Tor.
When they are happening there is often corruption in the connection.
Pages load fine through an ssh tunnel via a socat relay on the Tor
gateway server to the server over clearnet. They do not load properly
over Tor.
I am using OpenBSD 5.4, here is the start of the notice log to give
details about the OpenSSL version and Tor version.
Dec 23 07:29:09.000 [notice] Tor 0.2.3.25 (git-17c24b3118224d65) opening
new log file.
Dec 23 07:29:09.000 [notice] Parsing GEOIP file /usr/local/share/tor/geoip.
Dec 23 07:29:09.000 [notice] This version of OpenSSL has a known-good
EVP counter-mode implementation. Using it.
Dec 23 07:29:09.000 [notice] OpenSSL OpenSSL 1.0.1c 10 May 2012 looks
like version 0.9.8m or later; I will try SSL_OP to enable renegotiation
Dec 23 07:29:10.000 [notice] Reloaded microdescriptor cache.  Found
13888 descriptors.
Dec 23 07:29:11.000 [notice] We now have enough directory information to
build circuits.
Dec 23 07:29:11.000 [notice] Bootstrapped 80%: Connecting to the Tor
Dec 23 07:29:26.000 [notice] Heartbeat: Tor's uptime is 0:00 hours, with
297 circuits open. I've sent 0 kB and received 0 kB.
Dec 23 07:29:26.000 [notice] Bootstrapped 85%: Finishing handshake with
first hop.
Dec 23 07:29:26.000 [notice] We weren't able to find support for all of
the TLS ciphersuites that we wanted to advertise. This won't hurt
security, but it might make your Tor (if run as a client) more easy for
censors to block.
Dec 23 07:29:26.000 [notice] To correct this, use a version of OpenSSL
built with none of its ciphers disabled.
Dec 23 07:29:41.000 [notice] Bootstrapped 90%: Establishing a Tor circuit.
Dec 23 07:29:42.000 [notice] Tor has successfully opened a circuit.
Looks like client functionality is working.
Dec 23 07:29:42.000 [notice] Bootstrapped 100%: Done.
It would be more interesting to know more about this problem. It
concerns me that someone might be peeling my onions. Only I'm the one
who is going to have bleeding eyes.

@_date: 2013-11-16 10:54:42
@_author: Cyrus 
@_subject: [tor-talk] Problems migrating Tor hidden services 
I host Tor hidden services on an OpenBSD server.
I am having a problem after migrating my torrc and all the private keys
in /var/lib/tor where sites can't be reached. The old server runs
OpenBSD 5.3 and the new server runs OpenBSD 5.4.
It complains about pending circuits, and on the old server this was
never a problem, though I've tried increasing MaxClientCircuitsPending
to 256 but this has not helped. It still complains. I worry this might
be an issue with OpenBSD 5.4's port of Tor.
Attempts to access Tor hidden services end very quickly with "SOCKS
request rejected or failed."
Here is out output in notices.log:
Nov 16 23:15:10.000 [notice] Tor 0.2.3.25 (git-17c24b3118224d65) opening
log file.
Nov 16 23:15:10.000 [notice] Parsing GEOIP file /usr/local/share/tor/geoip.
Nov 16 23:15:11.000 [notice] This version of OpenSSL has a known-good
EVP counter-mode implementation. Using it.
Nov 16 23:15:11.000 [notice] OpenSSL OpenSSL 1.0.1c 10 May 2012 looks
like version 0.9.8m or later; I will try SSL_OP to enable renegotiation
Nov 16 23:15:11.000 [notice] Reloaded microdescriptor cache.  Found 4694
Nov 16 23:15:11.000 [notice] We now have enough directory information to
build circuits.
Nov 16 23:15:11.000 [notice] Bootstrapped 80%: Connecting to the Tor
Nov 16 23:15:21.000 [notice] Heartbeat: Tor's uptime is 0:00 hours, with
217 circuits open. I've sent 0 kB and received 0 kB.
Nov 16 23:15:21.000 [notice] Bootstrapped 85%: Finishing handshake with
first hop.
Nov 16 23:15:21.000 [notice] We weren't able to find support for all of
the TLS ciphersuites that we wanted to advertise. This won't hurt
security, but it might make your Tor (if run as a client) more easy for
censors to block.
Nov 16 23:15:21.000 [notice] To correct this, use a version of OpenSSL
built with none of its ciphers disabled.
Nov 16 23:15:22.000 [notice] Bootstrapped 90%: Establishing a Tor circuit.
Nov 16 23:15:22.000 [notice] Tor has successfully opened a circuit.
Looks like client functionality is working.
Nov 16 23:15:22.000 [notice] Bootstrapped 100%: Done.
Nov 16 23:15:22.000 [notice] Your network connection speed appears to
have changed. Resetting timeout to 60s after 18 timeouts and 269 buildtimes.
Nov 16 23:15:59.000 [notice] We'd like to launch a circuit to handle a
connection, but we already have 256 general-purpose client circuits
pending. Waiting until some finish.
Nov 16 23:17:15.000 [warn] Requested exit point
'$E5ECB2CA01E1D254D4EAB72CFAC16E5688CF471F' is not known. Closing.

@_date: 2013-11-17 09:31:21
@_author: Cyrus 
@_subject: [tor-talk] Hidden services not working 
Hidden services are not working on one of my servers. I need some help
at this point to debug the problem. There is quite a lot of stuff in the
debug log so if someone could let me know what I should be grepping for
that would be good. I did some Googling and I can't seem to find any
information whatsoever on how to debug a problem like this.
They were working and now they are not after restarting Tor. Just let me
know what information you need from me and I'll get it.
The system runs OpenBSD 5.4 and Tor 0.2.3.25.

@_date: 2014-04-11 06:02:13
@_author: Cyrus 
@_subject: [tor-talk] Tor hidden services not working 
I am having a problem with my Tor daemon on my server which is Gentoo
Hardened. Hidden services never seem to come online since restarting.
There are some interesting messages in the log about the Tor network
being overloaded. I've tried to look them up but couldn't find anything.
I think there might be some kind of bug.
This is urgent, I need help asap.
Apr 11 19:54:27.000 [notice] Tor 0.2.4.20 (git-3cb5c70beec5bf46) opening
log file.
Apr 11 19:58:39.000 [notice] Catching signal TERM, exiting cleanly.
Apr 11 19:58:39.000 [notice] Tor 0.2.4.20 (git-3cb5c70beec5bf46) opening
log file.
Apr 11 19:58:39.000 [notice] Parsing GEOIP IPv4 file /usr/share/tor/geoip.
Apr 11 19:58:39.000 [notice] Parsing GEOIP IPv6 file /usr/share/tor/geoip6.
Apr 11 19:58:39.000 [notice] We were built to run on a 64-bit CPU, with
OpenSSL 1.0.1 or later, but wit
h a version of OpenSSL that apparently lacks accelerated support for the
NIST P-224 and P-256 groups. B
uilding openssl with such support (using the enable-ec_nistp_64_gcc_128
option when configuring it) wou
ld make ECDH much faster.
Apr 11 19:58:39.000 [notice] We now have enough directory information to
build circuits.
Apr 11 19:58:39.000 [notice] Bootstrapped 80%: Connecting to the Tor
Apr 11 19:58:42.000 [notice] Bootstrapped 85%: Finishing handshake with
first hop.
Apr 11 19:58:42.000 [notice] Bootstrapped 90%: Establishing a Tor circuit.
Apr 11 19:58:42.000 [notice] Your Guard v235
($F3416AAAC641B106022BC051F64DBBA18C52D8CF) is failing mor
e circuits than usual. Most likely this means the Tor network is
overloaded. Success counts are 155/222
. Use counts are 91/91. 158 circuits completed, 0 were unusable, 3
collapsed, and 21 timed out. For ref
erence, your timeout cutoff is 60 seconds.
Apr 11 19:58:43.000 [notice] Tor has successfully opened a circuit.
Looks like client functionality is
Apr 11 19:58:43.000 [notice] Bootstrapped 100%: Done.
Apr 11 19:58:43.000 [notice] Your Guard relaynet
($E2CFC6A603232D0EA3452B80170D7257417DC7A1) is failing
 more circuits than usual. Most likely this means the Tor network is
overloaded. Success counts are 196
collapsed, and 28 timed out. For
 reference, your timeout cutoff is 60 seconds.
Apr 11 19:58:43.000 [notice] Your Guard Unnamed
($A0306CADEE237E9A3CD766F9858FC73EE8D70CF2) is failing
more circuits than usual. Most likely this means the Tor network is
overloaded. Success counts are 110/
158. Use counts are 95/95. 111 circuits completed, 0 were unusable, 1
collapsed, and 12 timed out. For
reference, your timeout cutoff is 60 seconds.

@_date: 2014-04-11 06:30:32
@_author: Cyrus 
@_subject: [tor-talk] Tor hidden services not working 
Update: this problem seems resolved. I manually set the date on the
system and made a typo. I am not sure why Tor didn't complain about the
time being out, though it was out by exactly 24 hours.

@_date: 2014-04-11 23:58:10
@_author: Cyrus 
@_subject: [tor-talk] Tor hidden services not working 
This problem seems to have returned, though now the clock is set properly.
Apr 11 13:56:33.000 [notice] Tor 0.2.4.20 (git-3cb5c70beec5bf46) opening
log file.
Apr 11 13:56:33.000 [notice] Parsing GEOIP IPv4 file /usr/share/tor/geoip.
Apr 11 13:56:33.000 [notice] Parsing GEOIP IPv6 file /usr/share/tor/geoip6.
Apr 11 13:56:33.000 [notice] We were built to run on a 64-bit CPU, with
OpenSSL 1.0.1 or later, but wit
h a version of OpenSSL that apparently lacks accelerated support for the
NIST P-224 and P-256 groups. B
uilding openssl with such support (using the enable-ec_nistp_64_gcc_128
option when configuring it) wou
ld make ECDH much faster.
Apr 11 13:56:33.000 [notice] We now have enough directory information to
build circuits.
Apr 11 13:56:33.000 [notice] Bootstrapped 80%: Connecting to the Tor
Apr 11 13:56:36.000 [notice] Bootstrapped 85%: Finishing handshake with
first hop.
Apr 11 13:56:36.000 [notice] Bootstrapped 90%: Establishing a Tor circuit.
Apr 11 13:56:36.000 [notice] Tor has successfully opened a circuit.
Looks like client functionality is
Apr 11 13:56:36.000 [notice] Bootstrapped 100%: Done.
Apr 11 13:56:38.000 [notice] Your Guard Unnamed
($A0306CADEE237E9A3CD766F9858FC73EE8D70CF2) is failing
more circuits than usual. Most likely this means the Tor network is
overloaded. Success counts are 158/
230. Use counts are 78/78. 159 circuits completed, 0 were unusable, 1
collapsed, and 30 timed out. For
reference, your timeout cutoff is 60 seconds.
Apr 11 13:57:10.000 [notice] Your Guard relaynet
($E2CFC6A603232D0EA3452B80170D7257417DC7A1) is failing
 more circuits than usual. Most likely this means the Tor network is
overloaded. Success counts are 126
collapsed, and 14 timed out. For
 reference, your timeout cutoff is 60 seconds.
Can someone please assist? All my services are down.

@_date: 2014-04-12 01:19:43
@_author: Cyrus 
@_subject: [tor-talk] Hidden service may be compromised 
My hidden service address may have been compromised in Heartbleed. I
can't seem to reach my own hidden service most of the time. Other
services I hope so far seem unaffected. I am curious what happens if the
same private key is used by someone else, and how an attacker might use
a private key to disable a hidden service. I am currently switching to a
new key as a precaution. Information would be greatly appreciated,
because I think someone is blocking my hidden service somehow.

@_date: 2014-04-12 02:32:35
@_author: Cyrus 
@_subject: [tor-talk] Hidden service may be compromised 
That is very interesting.
There is some strangely good news that services I've added just now are
not working either, so the problem is with my Tor service in general. So
all I need to do is solve it. Some services come back up and go down,
and requests for the services are sometimes showing in the info log.

@_date: 2014-04-13 07:19:52
@_author: Cyrus 
@_subject: [tor-talk] Tor hidden services not working 
FYI: It seemed to take the 24 hours the clock was out to go back to
normal. I think I upset the network with the clock error. Unlike other
clock errors, it didn't immediately show in the log. I think that is
because it was exactly 24 hours out, and the time was correct but not
the date.
I use ntp, but the clock was far enough out that I had to set it
manually. I did a typo on the date, and set it 24 hours exactly in the
It's the Tor build in Gentoo portage. They must be behind, that error
seems new with the latest OpenSSL.
I'll keep that in mind in the future, I thought it might be useful. I
cleared the datadir to stop using them right after posting to be safe.
Well, it's all working now. I checked all this to be sure, and the
webserver was working and Tor was forwarding to the right ports.
Actually, nothing changed from a working setup from the date.

@_date: 2014-04-30 22:05:34
@_author: Cyrus 
@_subject: [tor-talk] Getting rid of non-loopback messages 
Is there is some option to get rid of warning messages for Tor, when it
is supposed to be using a non-loopback address?
Apr 30 11:48:33.000 [notice] You configured a non-loopback address
'192.168.0.2:9100' for SocksPort. Th is allows everybody on your local
network to use your machine as a proxy. Make sure this is what you wanted.
Apr 30 11:48:33.000 [notice] You configured a non-loopback address
'192.168.0.2:53' for DNSPort. This allows everybody on your local
network to use your machine as a proxy. Make sure this is what you wanted.
Apr 30 11:48:33.000 [notice] You configured a non-loopback address
'192.168.0.2:9040' for TransPort. This allows everybody on your local
network to use your machine as a proxy. Make sure this is what you wa
They don't really do any harm, but I like a clean log. It means one less
thing to filter out if I want to look back through it.

@_date: 2014-12-07 12:38:27
@_author: Cyrus 
@_subject: [tor-talk] (D)DOS over Tor network ? Help ! 
Don't ever change your guards because someone wants you to.
Run Tor as separate processes for each customer. A simple shell script
can write a torrc for each hidden service directory and start it.

@_date: 2014-12-07 12:42:09
@_author: Cyrus 
@_subject: [tor-talk] (D)DOS over Tor network ? Help ! 
It was much easier to start running every hidden service as a separate
process. I did it with this lazy bash script, after moving all the
hidden services into a folder called called /var/lib/tor/auto and
creatinv configs in /etc/tor/users from a template called
I will improve the shell script so it is also an interface to add new
hidden services, and stop old ones by name only.
cd /var/lib/tor/auto
find * -type d | while read d; do
        cp /etc/tor/torrc-unique /etc/tor/users/torrc-$d
        sed -i "s/%USER%/$d/g" /etc/tor/users/torrc-$d
        sed -i "s/%PORT%/$p/g" /etc/tor/users/torrc-$d
        p=`expr $p + 1`
        echo "HiddenServiceDir /var/lib/tor/auto/$d" >>
        echo "HiddenServicePort 80 192.168.0.3:80" >>
        echo "HiddenServicePort 22 192.168.0.3:22" >>
        tor --RunAsDaemon 1 -f /etc/tor/users/torrc-$d

@_date: 2014-12-07 12:45:42
@_author: Cyrus 
@_subject: [tor-talk] (D)DOS over Tor network ? Help ! 
I concur that this is a serious problem and at the moment anyone can
censor any hidden service at will. These attacks use little bandwidth,
and seem to involve each request having a new rendezvous for each
attempt, using lots of resources. can't imagine a fix myself at this point.

@_date: 2014-12-11 15:56:53
@_author: Cyrus 
@_subject: [tor-talk] URL Addressing 
Those addresses are private, and are not available on Tor. If they were,
the whole world would be able to use your home weather reading device.

@_date: 2014-07-02 11:46:16
@_author: Cyrus 
@_subject: [tor-talk] canvas fingerprinting 
Hash: SHA512
I think that privoxy blocks this.
susa_metzger at mail.md:

@_date: 2014-06-02 10:01:07
@_author: Cyrus 
@_subject: [tor-talk] Skip nat for private traffic with anonymizing middlebox 
I run an internal network where I use two virtual machines for hosting
hidden services. I have a gateway and a web server, and the gateway is a
transparent proxy. The gateway is a Linux system using iptables based on
the directions on the Tor wiki for an anonymizing middlebox:
These directions have one problem. Traffic from the web server can't
access the gateways services, such as SSH. I am not familiar enough with
iptables to be completely sure how to bypass these rules for requests to
the private IP of the gateway.
The rules:
# iptables -nvL -t nat
Chain PREROUTING (policy ACCEPT 5642 packets, 323K bytes)
 pkts bytes target     prot opt in     out     source
 6937  483K REDIRECT   udp  --  eth1   *       0.0.0.0/0
0.0.0.0/0            udp dpt:53 redir ports 53
  827 49620 REDIRECT   tcp  --  eth1   *       0.0.0.0/0
0.0.0.0/0            tcp flags:0x17/0x02 redir ports 9040
Chain INPUT (policy ACCEPT 11502 packets, 728K bytes)
 pkts bytes target     prot opt in     out     source
Chain OUTPUT (policy ACCEPT 43839 packets, 2624K bytes)
 pkts bytes target     prot opt in     out     source
Chain POSTROUTING (policy ACCEPT 45541 packets, 2692K bytes)
 pkts bytes target     prot opt in     out     source
Help would be appreciated so it doesn't redirect traffic going to the

@_date: 2014-11-27 03:21:53
@_author: Cyrus 
@_subject: [tor-talk] Isolating a hidden service hit by DDOS 
I have a problem involving a shared server hosting many hidden services.
One of the hidden services is being attacked and this is causing the tor
daemon to use 100% CPU. I am quite sure the attack is just a DDOS flood.
What I can't seem to figure out is how to isolate which hidden service
is being attacked so I can disable it. I have tried enabling the info
log but it doesn't seem to contain the information I need. The debug log
is a quagmire, and I don't know what to look for.
Please tell me what to search for in the debug log.

@_date: 2015-01-02 19:28:57
@_author: Cyrus 
@_subject: [tor-talk] Unexpected SMTP 
My server is behind a Tor transparent proxy on a separate machine.
Customers have just started reporting getting email from their sites,
and the headers show this to be coming from exit nodes. I can't see any
update news that the policy on SMTP has changed.
It might just be bad exit nodes, but according to one of these customers
emails have been coming constantly since Dec 31. For a lot of idiots
this means their sites are now leaking information. This can include
information on password resets, account activities, and even private
I can't find any mention of this change in the blog. It is possible some
exit nodes are not following the rules. This is an interesting
occurrence. It scared the crap out of me when I first heard about it.

@_date: 2015-01-30 10:15:49
@_author: Cyrus 
@_subject: [tor-talk] Tor -> VPN  Clarification 
You connect to Tor through the VPN in this case.
PC <=> Internet <=> VPN server <=> Internet <=> Tor Network <=> Internet
If you don't want a log of your actual IP, doing this would be a
benefit. Though if they already have logged where you are once as a
customer, the point of this is moot. If you had a different account, you
could then use the VPN anonymously.

@_date: 2015-01-30 10:18:45
@_author: Cyrus 
@_subject: [tor-talk] Torbirdy 
I for one am against there being timezones. I have a weather app that
keeps track of when the sun comes up and down. So I refuse to play along
with my governments idea of what my clock should read. So this isn't a
problem for me because my system is set to GMT.
rocket_penguin at riseup.net:


@_date: 2009-04-21 23:50:34
@_author: Marcus Griep 
@_subject: PurpleOnion: HS Address Generator (+ Managed Router Impl?) 
Hello all,
I wanted to let the Tor community know about a little side project of
mine, a .onion address generator.
Basically, all that it does is generate RSA key-pairs, determine the
associated onion address (as for a hidden service) and attempts to
match it to a provided regular expression. If there is a match, the
program exports the key to a directory in a ready-made format for use
as a hidden service directory. If there is not a match, the entropy
doesn't have to be wasted; the generated keys can be logged to a file
(933 bytes per onion). This file can then be read back in by the
program to test against other regular expressions.
The program is also setup to take advantage of multi-core machines for
the creation of RSA keys, though a there is a synchronous bottleneck
that I'm looking at removing in the near future to get a much better
speedup. Also, as I'll note later, this implementation is on top of
Mono. Thus, implementations with managed crypto stacks are slower than
those with native crypto stacks (.NET on Windows).
There are no shortcuts taken here in the address generation; if there
were any, then the security of hidden services in general would be
suspect. Only pure brute-force is used. Hence its utility is limited,
but if you wanted a hidden service that had, say "wiki" in the onion
address, this would help you get there (eventually). It does have
another application; if your entropy sink is just too darn random, the
onion generator will help you burn that excess digital entropy into
heat energy.
The onion generator is one part (and currently the only part) of a
greater project I'm calling PurpleOnion, short for Purple Onion
Router, mainly as I'm partial to the color. I started off by writing
the onion generator and found that I'd written a couple of reusable
components that, with some work, could be used in a greater exercise
to write another implementation of the Tor Onion Router.
PurpleOnion is written on the Mono framework in C# using MonoDevelop,
requires Mono 2.0 to compile, and is licensed under the MIT/X11
license. I've also tested the compiled binary copied into a Windows
environment (with Mono.Security available).  The program runs great on
Windows, and I added some exception handling to allow the compiled
binary to JIT properly even without OS Posix support.
The project is being hosted on github at:
The repository is still a little bit dirty as I work on figuring out
namespacing, so the Makefile is out of service. You can compile using
MonoDevelop, but if you have gmcs, the following command in the
repository root should get you a properly built generator:
# gmcs -t:exe -o:build/Por.OnionGenerator.exe \
 -r:System -r:System.Core -r:Mono.Security \
 -r:Mono.Posix src/Por.OnionGenerator/*.cs
# mono Por.OnionGenerator.exe --help
I'd love to hear comments, both on the .onion address generator in
specific and the possibility of a compliant onion router on a managed
Marcus Griep
?????? ??.???, 3?
(Excuse the double post if it occurred; I first sent this from an
un-subscribed address)

@_date: 2009-04-22 14:34:14
@_author: Marcus Griep 
@_subject: How to deal with OS hibernation 
I don't believe the hibernation is a problem at all. Tor messages
include a timestamp to prevent replay attacks. When you restore your
computer from hibernation, Tor picks up right where it left off, but
notes that the system clock has jumped forward. Since any messages
regarding nodes and circuits may now be invalid, Tor basically
re-bootstraps itself (correct me here if I'm overstating). This, I
think, is similar to if Tor had received a SIGHUP. Even though it is
logging a warning, since the source of the jump is known and innocuous
(hibernation), this warning should be safely ignored.
Where this warning would have more effect is if you were actively
using the network and your clock synced significantly forward (NTP).
Then you would lose your current circuits during the re-bootstrap
which would cause any connections you had over Tor to drop. Hence the
reason this is a warning level message (there may be other reasons
I think you'd be fine to let Tor run through hibernation even without
your SIGTERM hibernate/restore script.
Marcus Griep
?????? ??.???, 3?

@_date: 2009-07-01 19:46:49
@_author: Marcus Griep 
@_subject: 25 tbreg relays in directory 
Perhaps the better action, in the event that there is clear evidence
that a group is using the Tor network to abuse a service provider, such
as eBay, would be to alert them to what is happening, and help to
provide them the tools they need to stem the tide, even if that means
that they temporarily block the Tor network or are able to gain some
insight into how the fraudulent activity is occurring. After all,
providing this means is in part what the Tor DNS Exit List and Bulk Exit
Lists are for.
As well, by being forthright the Tor network could be seen as a
generally good network, but which has bad users too, rather than being
found as a major source of fraud after the fact and determined a bad
network overall.
Possibly out on my own limb, but that's my opinion.

@_date: 2009-07-06 14:04:11
@_author: Marcus Griep 
@_subject: *3rd 'bad' IP*...Exit node IP *not* showing up on TorCheck and 
What you are experiencing happens from time to time and is completely
normal. If the IP you are showing on the TorCheck page isn't your own,
then you're probably ok.
The reason that this happens is that there is a desync between when your
node learns about freshly started exits and when various tools update
their caches. Your node may pickup and use a new exit node that has not
yet been grabbed into the cache backing the TorCheck page. This also
applies for the TorStatus listing over at kgprog.
These generally work off cached copies of authority statuses, not
authorities themselves.
In this way, the TorCheck page is biased toward false positives than
false negatives, which is the preference. It would be much worse to let
someone who needs to use the network to think they were anonymized when
they really weren't than it would be to tell someone who was properly
anonymized that they may not be using the network.
Also, I just checked the IP address that you listed above. It is now
listed as an exit in the TorStatus page, but with an uptime of less than
a day. Hence, it fits well into this scenario.
You can always check to see if the node is listed in your
~$ grep 67.166.145.75 /var/lib/tor/cached-descriptors
router AlladinSane 67.166.145.75 443 0 9030
reject 67.166.145.75:*
A quick heuristic looking at this notes that it rejects exits to itself.
As this is part of the default exit policy, you can reasonably assume
this node is set up to be an exit.

@_date: 2009-06-04 15:58:34
@_author: Marcus Griep 
@_subject: google cookie 
Chromium is; Chrome has its own little proprietary tidbits.

@_date: 2009-06-05 16:28:22
@_author: Marcus Griep 
@_subject: accessing freenode from an IP address that ran tor 
This is a question for support at freenode.net.
A summary, though, is that their "exitlist" script is woefully out
of date (They do not use the tordnsbl). Thus it could be some time
before your IP comes off their list.
To connect from your IP to an .onion service will require you to be
running Tor since .onion addresses only exist in the Tor network.
Further questions, including this one, should be directed to
support at freenode.net as they are the ones running their service.

@_date: 2009-11-25 11:17:43
@_author: Marcus Griep 
@_subject: livejournal ban tor-nodes 
There's a lot of speculation in that statement, though I know little of
internal politicking within Russia. I think that the explanation via Jacob
is a pretty sound one; LJ doesn't want its paid value-added model
circumvented by this Russian site, that then chose to use Tor to breach LJ's
Terms of Service, and so the community has to bear the brunt of it.
I find it unlikely (but not impossible) that LJ would be consorting with a
Russian cover-up. LJ as a business has a long history of hosting[1]
dissenting opinion in from countries, including Iran, China, Kazakhstan[2],
and other speech-is-not-free countries. As a result, many of these countries
block or restrict access to LJ as opposed to "being in concert with"
LiveJournal. This may even take the form of bullying local ISPs to log
accesses to certain IP addresses, or dropping a transparent proxy in front
of outward accesses to these sites, as a means to the same end you describe
above, and either of which requires no help from LJ to execute.
[1]: hosting, not sponsoring, just hosting
Marcus Griep
?????? ??.???, 3?

@_date: 2009-11-05 14:10:00
@_author: Marcus Griep 
@_subject: TLS Man-In-The-Middle Vulnerability 
Don't know if any one else has seen or taken a look at this. I don't know if
this affects Tor, though I believe that we do use certificate renegotiation
in the protocol, and that is the entry vector for this particular
"TLS Man-in-the-middle on renegotiation vulnerability made public"
Marcus Griep
?????? ??.???, 3?

@_date: 2009-11-05 15:46:28
@_author: Marcus Griep 
@_subject: TLS Man-In-The-Middle Vulnerability 
The ITEF Network Working Group has already begun drafting a new extension to
TLS: Renegotiation Indication.
Marcus Griep
?????? ??.???, 3?

@_date: 2009-11-18 12:08:10
@_author: Marcus Griep 
@_subject: Reduce hops when privacy level allows to save Tor network  
Responding to a deficiency in an area which Tor does not attempt to solve is
a poor use of resources. Tor is a strong-anonymizing proxy. Three hops is
the minimum necessary to ensure a proper degree of anonymity. There are
severe deficiencies with only using one or two hops insofar as anonymity is
concerned. Using more than 3 is problematic from a network utilization
standpoint. Thus the magic number, three.
"There are many use cases where that level of protection isn't required." --
In that case, use a tool better suited to your goals.
Now, if you were interested in coding this piece, and you felt it a good use
of your resources, then it might be worthwhile. However, remember that every
choice given to the end user is a chance for the end user to make a bad or
misinformed decision. Tor has bandwidth issues that come with multiple
routing hops. Many users "just want Tor faster", but often are not savvy
enough to understand that reducing the number of hops, even by one, severely
limits the Tor's ability to hamper tracking efforts. As such many may choose
to reduce their hops, and get faster usage, but falsely believe that just
because it is still "Tor", they can't be tracked.
Marcus Griep
?????? ??.???, 3?

@_date: 2010-08-18 13:57:59
@_author: Marcus Griep 
@_subject: torcheck failing in reality 
Might this be an instance where good, always working exit enclaving might be
of significance?
If you have a tor-check service on an exit enclave, only visits from
localhost are "Tor-routed" (excluding the trivial case). Others from Tor
nodes are "Tor-routed if this is not your IP address", while visits from the
public at large remain "Not Tor-routed".
Marcus Griep
?????? ??.???, 3?

@_date: 2010-02-26 22:30:20
@_author: Marcus Griep 
@_subject: Tor v0.2.1.23 dose not work in my windowsXP box and Tor v0.2.1.24  
Looks like you're using bridges. Are any of your selected bridges
actually online? Perhaps you need to grab a new set of bridges.
Marcus Griep
?????? ??.???, 3?
2010/2/26 Peng Zhou :
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2010-01-31 11:18:10
@_author: Marcus Griep 
@_subject: TorButton and information disclosure on last OR 
I think that you misunderstand what the Host header is for. It is a
required header for HTTP/1.1, and it gives a host *name* that the
server can then use to differentiate which resource you wanted. For
example,  and news.example.com could be run off the
same server. In order for the server to determine which resource you
want when you connect to it, it inspects the Host header.
Regardless, unless you are using an encrypted end-to-end connection,
you should always assume that the last OR has the ability to read what
you are sending. TorButton does several tasks that help to prevent the
end server (and evesdropping last OR) from being able to build a
pseudonym for you, including modifying your HTTP headers to reduce the
chance of disclosure.
Are you attempting to connect to your own server by IP? That's about
the only way that I know of that your IP would end up in the Host
Marcus Griep
?????? ??.???, 3?
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.

@_date: 2010-03-07 18:57:07
@_author: Marcus Griep 
@_subject: New ban of tor-exit-nodes -IPs by the LiveJournal 
As has been mentioned previously by the likes of Jacob Applebaum and
others on this list, the Tor community has a good working relationship
with LiveJournal, and they, as much as anyone, want to re-enable
access from Tor, but also have to deal with abuse from the system. I
expect that LJ will have access restored in a reasonable time, and you
can always email their webmaster for more information.
I'd be careful blindly pointing accusations of association around.
These types of statements of opinion don't serve to endear the Tor
community to anyone, much less to those services that welcome the use
of Tor.
Marcus Griep
?????? ??.???, 3?
To unsubscribe, send an e-mail to majordomo at torproject.org with
unsubscribe or-talk    in the body.


@_date: 2005-07-06 01:18:53
@_author: mjbjr@beaudesign.com 
@_subject: I'm seeing someone else's localhost.localdomain 
I'm running a privoxy/tor combo.  AFAICT, the combo is  working fine.
In the process of doing some apache2 configuing and testing,
I ran across something interesting... other people('s)
xxxx.localhost.localdomain pages were being shown.
the circumstances...
I'm setting up apache2 on a machine behind a firewall/router (linux).
I'm setting up a test of apache/ruby/rails(/ajax, next), using apache
'VirtualHost'(s).  Since, my initial 'rails' test involves a postgresql
database, I have set the apache config 'VirtualHost' param 'ServerName'
to 'pgsql'.
Preliminary indications are that the configuration is working properly.
This machine's apache is only serving to itself.  This machine is on
a local lan and connected to the net via the firewall/router.
The router is not forwarding inet http requests to it.
In my '/etc/hosts', I have a line:
'127.0.0.1 localhost tiger localhost.localdomain pgsql.localhost.localdomain'
The 'pgsql.localhost.localdomain' is the intended to tell apache,
running on 127.0.0.1, which virtual host to use.
In mozilla, using the URL '
the intended apache/rails page is served.
In firefox, which is assigned to use the privoxy/tor web proxy combo,
the URL ' returns a php admin
page titled 'H-Sphere'.  I don't have php installed on any of my
The URL continues to read '
When I use the URL ' mozilla shows
me the expected apache/rails page, while firefox shows me some page
from some machine on the net.
Repeatedly using the same URL on firefox gets me different pages.
I assume I'm seeing the localhost.localdomain pages being served by
the various tor servers my requests finally end up going through.
Am I correct?
If I'm correct, it would seem that this shouldn't be happening...
seeing a tor server machine's internal files, and/or other servers.

@_date: 2005-07-06 12:52:26
@_author: mjbjr@beaudesign.com 
@_subject: I'm seeing someone else's localhost.localdomain 
Thank you for the explanation.
In my case, it seems that mozilla (with url
' and no tor/privoxy, reads my
'/etc/hosts' file and resolves the local ip addresses without going
to net dns (I'm not seeing outgoing packets to dns).
While firefox, using tor/privoxy, seems to not check/resolve with
'/etc/hosts' before going to a net dns machine.  I suppose that,
possibly, this is a firefox issue while in 'proxy mode'.
If my assessment, in regards to '/etc/hosts' not being read,
is correct, I would think either tor/privoxy, or firefox, has a problem
that should be corrected.  And the more I think about it, it would
seem that it's a firefox problem.
It would seem to me, Firefox should be checking the '/etc/hosts' file
_before_ it goes to the proxy.
Yes?  No?

@_date: 2005-07-06 13:06:34
@_author: mjbjr@beaudesign.com 
@_subject: I'm seeing someone else's localhost.localdomain 
They're already in there.  Iirc, they're there by default.

@_date: 2005-07-06 13:49:04
@_author: mjbjr@beaudesign.com 
@_subject: I'm seeing someone else's localhost.localdomain 
Further details...
'localhost' and '127.0.0.1' are already in "No proxy for", and firefox,
properly, delivers the local pages.
Adding 'pgsql.localhost.localdomain' to "No proxy for" has the desired
effect, firefox stays local.
I'm pretty sure, now, that firefox is turning off it's check of
'/etc/hosts' while in 'proxy mode', and it shouldn't do that.
I shouldn't have to enter local ip in both places.
I'll be checking the firefox bugzilla later today.

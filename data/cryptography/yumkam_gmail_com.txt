
@_date: 2013-11-05 00:12:32
@_author: Yuriy Kaminskiy 
@_subject: [Cryptography] /dev/random is not robust 
It is not only *installer* issue, it also affects popular "ephemeral swap" (or
"ephemeral temporary fs") setup,
=== /etc/crypttab ===
cryptoswap	/dev/[...]	/dev/urandom	swap
=== /etc/fstab ===
=== end ===
It is even more problematic, as those crypto-disks are mounted on *early* boot
stage, even *before* /etc/init.d/urandom executed (= before saved random state
re-feeded to kernel), and before network setup, and with very
small amount of disk/keyboard/mouse activity (even smaller than in installer), etc.
And if you just replace /dev/urandom with /dev/random, this can turn into sudden
stall at boot time (likely without any hint for user - like "moving mouse or
randomly typing on keyboard should help"). As at this stage there are no or very
little background daemons running, there are no chance to gather randomness from
disk activity, and there are no network activity, so it likely *won't* resolve
itself without user help. That's *totally* no-go for servers ("unattended
reboot" for them is not "possibility", but "most likely scenario").
Oh, and init.d/urandom also cannot be moved *before* that early-boot mounting
crypto-disks, as /var (where random-seed saved) can be also separate partition
*and* encrypted.
This looks quite ... troubling.

@_date: 2014-01-22 14:12:27
@_author: Yuriy Kaminskiy 
@_subject: [Cryptography] Does PGP use sign-then-encrypt or 
Yet *there are*. If Bob private key leaked and he is not aware about that,
hijacker can decrypt message from Alice, change contents, and re-encrypt to Bob
it with corrected MAC, and pass it to Bob. Not possible with signed message.

@_date: 2014-01-25 21:05:04
@_author: Yuriy Kaminskiy 
@_subject: [Cryptography] Does PGP use sign-then-encrypt or 
MAC prove that message was produced by *any* of participants that have access to
the shared secret (and can be validated only by people that have access to this
shared secret).
Works perfectly with *one* participant (you store encrypted and MACed data on
untrusted medium; then you retrieve your data [on trusted system], and verify
MAC to ensure they are still intact).
Still works with two participants (if only Alice and Bob knows shared secret,
and Bob knows he is not author, it must be Alice). That is, unless Bob private
key leaked (pretty bad for Bob anyway, but still with MAC he is *more* pwned
than with signatures).
Does not work with *more than two participants* (Alice, Bob and Charlie know
shared secret and thus can generate and validate MAC; who was author of message,
Alice or Charlie?).
And, of course, cannot work at all with *undefined* number of participants (to
verify signature, you need public key, there are no problem with distributing
public key to random people; to verify MAC, you need *secret* key, there are no
way you can safely share secret key with random people).
You mean, "sign her ephemeral key on permanent key"? LOL.
(And still *MAC completely useless with more than two participants*.)
And, as said above, to ensure encryption is intact, you need to sign *recipient
key* rather than *(ephemeral) sender key*.


@_date: 2010-08-02 22:38:10
@_author: Yaron Sheffer 
@_subject: /dev/random and virtual systems 
the interesting thread on seeding and reseeding /dev/random did not mention that many of the most problematic systems in this respect are virtual machines. Such machines (when used for "cloud computing") are not only servers, so have few sources of true and hard-to-observe entropy. Often the are cloned from snapshots of a single virtual machine, i.e. many VMs start life with one common RNG state, that doesn't even know that it's a clone.
In addition to the mitigations that were discussed on the list, such machines could benefit from seeding /dev/random (or periodically reseeding it) from the *host machine's* RNG. This is one thing that's guaranteed to be different between VM instances. So my question to the list: is this useful? Is this doable with popular systems (e.g. Linux running on VMWare or VirtualBox)? Is this actually being done?
     Yaron

@_date: 2013-12-12 21:08:56
@_author: Yaron Sheffer 
@_subject: [Cryptography] Size of the PGP userbase? 
IPsec is mostly inside enterprises, so actual deployment can only be
counted by asking the vendors (who won't say) or the open source
providers (who don't have reliable numbers).
I don't know what part of encrypted email is done by individuals and
what part is enterprise. But since email in general is becoming less
and less cool, I suspect email encryption will over time become more
of an enterprise thing, and therefore even harder to measure.

@_date: 2013-11-01 13:04:45
@_author: Yaron Sheffer 
@_subject: [Cryptography] What's a Plausible Attack On Random Number 
It sounds like a quick addition to DHCP - an extension that gets you 256 bits from the server, would solve 99% of the problem we have with embedded devices. It will not be sufficient for high-security environments, because an attacker might be listening on the local LAN, but it will provide the entropy we need to initialize SSH, TLS, IPsec. And it is much better than relying on fixed information (MAC address etc.) and a few bits of timing.
Looks very much like an "implement it, standardize it and forget it" kind of thing to me.

@_date: 2013-11-02 12:50:06
@_author: Yaron Sheffer 
@_subject: [Cryptography] What's a Plausible Attack On Random Number 
I'm probably missing something obvious, but why is "ssh localhost" part of your standard routine? I've never had to use it, I can always either use "sudo" or simply login as root from a console.
Also, desktop distros are often preconfigured with DHCP. For servers, even if you don't take your IP from DHCP, you can request other parameters (and my hypothetical random extension) with a DHCPINFORM message.

@_date: 2013-11-03 21:21:29
@_author: Yaron Sheffer 
@_subject: [Cryptography] What's a Plausible Attack On Random Number 
"Most home routers are also DHCP clients, so we can recommend that they request entropy before serving entropy to others" (Paul Hoffman, private communication). In fact I haven't seen such home routers myself, I'm used to PPPoE, but here's another idea:
Suppose I'm an (entropy) poor home router in an (entropy) poor home, with just one desktop machine behind me. We could have the PC send some random material in the DHCP *request*, and the router is free to mix it into its very shallow entropy pool.

@_date: 2013-11-04 07:49:27
@_author: Yaron Sheffer 
@_subject: [Cryptography] What's a Plausible Attack On Random Number 
Thank you, this is great information (if only for some distros, as Ted I personally think the following three are better alternatives than a DHCP-based solution, however they are not sufficiently widespread and so leave enough of a hole that DHCP could plug:
1. Pre-provisioning of a random, unique, secret seed by the manufacturer,
2. Hardware sources, such as RdRand.
3. Obtaining a seed from the host, in virtual environment.
 is rarely done,  is only applicable to some environments (and not even to all public clouds), and  does not apply to all hardware.
I agree that DHCP alone will not solve the problem and that startup processes will need to be rearranged in some cases, or at least the important consumers (sshd) will need to hold off before they start requesting entropy.

@_date: 2013-11-04 08:42:21
@_author: Yaron Sheffer 
@_subject: [Cryptography] initializing kernel PRNG much much sooner on 
You write: "The device might have a fixed address, or some other reason for not doing DHCP at all."
A fixed address does not preclude requesting other parameters by using DHCP. This is commonly done, with the DHCPINFORM message:

@_date: 2013-11-07 11:41:02
@_author: Yaron Sheffer 
@_subject: [Cryptography] randomness +- entropy 
When this Minstrel guy reads urandom (which only has 23 bits of entropy at the time), do you reset the entropy estimate to 0? If you don't, and Minstrel broadcasts the random value somehow (in this case, as a timing value) an attacker can easily discover the first 23 bits of entropy which would make guessing the PRNG value of the next consumer much easier.

@_date: 2013-11-10 11:48:12
@_author: Yaron Sheffer 
@_subject: [Cryptography] randomness +- entropy 
My original comment was not a general statement about consuming bits from the PRNG. I said that consuming PRNG bits *before the PRNG is fully seeded* is a double problem:
- The consumer gets low-quality randomness.
- The *next* consumer's entropy is lower, because the first consumer might broadcast the randomness he had just received.
And then Ted said that the consumer in question ("minstrel") does cause the entropy estimate to be decreased, so the second problem does not apply.

@_date: 2013-10-18 14:14:21
@_author: Yaron Sheffer 
@_subject: [Cryptography] /dev/random is not robust 
Hi David,
IIRC there was talk of a new version of RFC 4086 (Randomness Recommendations) being worked on. You might want to contact the authors, particularly Donald Eastlake, and contribute some text.

@_date: 2013-09-10 09:00:07
@_author: Yaron Sheffer 
@_subject: [Cryptography] What TLS ciphersuites are still OK? 
Hi Hanno,
Please send any comments on this draft to the TLS Working Group mailing list, tls at ietf.org.

@_date: 2013-09-12 17:41:56
@_author: Yaron Sheffer 
@_subject: [Cryptography] Killing two IV related birds with one stone 
IMO going through hoops to try to avoid covert channels is not worth our time. Both IPsec and TLS have a huge capacity for covert channels at the handshake (or key exchange) level, certainly enough to leak the *previous* session state. So plugging the per-record (per packet) holes is not interesting.
These are living protocols, and extensions create an infinite amount of redundancy. If you try to eliminate covert channels you need to freeze the protocol and engineer it specifically for that purpose. This may be right for a project like Tor, but not for a general purpose protocol.

@_date: 2014-02-03 19:22:35
@_author: Yaron Sheffer 
@_subject: [Cryptography] request for consideration: VM guest entropy: 
To inject a bit of pessimism into the discussion:
Amazon Web Services is currently the largest public cloud. At the moment they don't provide a way for instances (guests) to read randomness from the host. Despite the fact that AWS is based on Xen, and Xen does have such support.
I also checked one of my instances on Amazon (cat /proc/cpuinfo), and it does not support RdRand. Of course they could be virtualizing the CPUID command, too.
Our production instances use a proprietary way to seed /dev/random on startup. Basically they "call home" to get some bits. A more generic alternative could use DHCP:

@_date: 2015-05-15 12:52:18
@_author: Yaron Sheffer 
@_subject: [Cryptography] Any S/MIME or PGP for normal people 
Here is what worked for me and my team: Basically, if you put an hour into it and follow the rules, S/MIME encryption is not hard. And it's a one-time effort, until the certificate expires.
We are all using Thunderbird, so we are only marginally "normal people".

@_date: 2016-03-30 23:11:34
@_author: Yaron Sheffer 
@_subject: [Cryptography] New NIST standard for Format Preserving 
Any idea about the IPR situation of the FF1 and FF3 mechanisms?

@_date: 2016-05-23 17:08:23
@_author: Yaron Sheffer 
@_subject: [Cryptography] Entropy Needed for SSH Keys? 
Yes, interesting. I repeated the experiment on my Ubuntu 16.04, and ssh read 48 bytes. Still way too little. I can only speculate that they have their own PRNG which they seed from /dev/urandom.

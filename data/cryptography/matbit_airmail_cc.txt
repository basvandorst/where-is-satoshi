
@_date: 2020-07-31 10:11:28
@_author: matbit@airmail.cc 
@_subject: [Cryptography] Cryptographically securing a two-phase commit 
implementing kinda reputation system based on "sender id" in a distributed peer to peer system (for example a blockchain) is not a practical solution, since each node (potentially sender) can be connect/disconnect anonymously with no particular identifier(e.g. user name, IP, ?).

@_date: 2020-05-23 01:49:11
@_author: matbit@airmail.cc 
@_subject: [Cryptography] Proposal for a PoS blockchain 
Hi everybody, It may not related to cryptography at the moment, but later it faces cryptographic engagements.
So the question is ?can we establish a blockchain (precisely DAG) as an infrastructure of a cryptocurrency, which uses only Proof Of Stack to securing transactions??. What are the flaws of this approach?
The scenario is like that:
- I develop and release the prototype software and run the first node.
- As a founder and the first member of the network, I made a to-do list of future develops of that software. The goal is improve software and strengthen its security. Also I planned to add many more features to - The software daily mints x amount of new coins (call it newCoins), and these new coins are distributed among shareholders as soon as they are - The number of new coins is halved after a certain time, till reaching zero new coins.
- As a unique member of the network, I have total shares (cal it totalShares). So all the new coins go into my wallet.
- I announce the software release and invite ALL developers to join - The developers run software and join to network. There is no PoW, so there is no cost to join to network. Everyone can connect to network and validate the transactions or send & receive coins.
- In case of double-spends attack handling, or participating in polling ONLY the shareholders can vote. The only way to get shares is participating in software development.
- Developers review the to-do list and accomplish some of those tasks, if they like and can and want to do.
- After accomplish the task, developer claims her/his wage. She/he claim how many hours dedicated to that particular task. Say 5 hours.
- Network members vote on the new contributor's claim. If the claim wins the polling, the new contributor becomes a new member of the network. Now new member has some shares in network. New shares are calculated based on the hours dedicated to the accomplished task. For example if a contributor dedicate 5 hours to a task, she/he will have 5 shares. So now the new total shares are totalShares+5. So in next minting, the new contributor will get ((5/totalShares) * newCoins) coins.
- The new member also has the right to vote in proportion to her/his - With each new contribution, the number of shares increases, but the minting coins are fix, so the dividend of treasury will decrease.
- In order for the distribution of wealth to be fair, each share will be valid for the next 7 years from the issuance date. So contributors have two incentives to keep continuing to work.
- The to-do list is regularly updated by network shareholders. They polls regularly to add/remove tasks to list. The first goal of tasks is developing and maintaining software itself. Shareholders can/will add other tasks as well.
- The graph topology is DAG, so theoretically it will be scalable (unlike blockchains). Every block contains the hash of all its - Since this money is community-based, so the network members make it secure. We do not need PoW at all. The 51% attack still is possible like every other blockchains (PoS, PoW, DpoS, LPoS), but the cost of the attack is very high, because it destroys the member?s "current shares" and the ?future?s income?.
- In early days this new money worth nothing, but after a while we will have the ?pizza day?. This new money is a social contract -like Bitcoin-, and because of its scarcity will have some value. And its value increases over time. Since we are creating a ?good money? which has many good features, it will be used as a currency in daily trades.
- Famous double-spend problem: So let start with CAP theorem which claims in partitioned distributed system you can not have both Availability and Consistency features together and you can have only one of them. So I prefer to choose availability in spending maturated coins, and Consistency in spending not maturated coins. Therefor I make a 12 hour settlement time for transactions. That is, all transactions are immediately recorded in blockgraph and they are absolutely irreversible. But the recipient can not spend coins before 12 hours. This 12 hours makes an powerful security for transactions and help the network?s synchronization as well.
And now about double-spend problem. If a cheater actor try to spend a coin double(or multiple) time, both (or all) transactions will be rejected and all coins engaged in double-spend transactions will be seized in favor of network?s treasury. So the cheater will hurt itself. In fact after a certain percent of shareholder's confirmations the cheater even can not hurt itself and the second spending transaction simply will be dropped.
- This new money and its network are distributed and have no single point of failure.
- adversaries can bribe or force or eliminate the key persons or major shareholders (much like shouting down some mining farms), but here the community can fork with zero cost and continue the network. Note that the coins still are valid, but network abolished some corrupted shareholders, so they still have their coins, but can not vote anymore.
- At the end of the day we will have a proved ?good money? and a robust software (client & wallet) to manage it.
- I think this kind of PoS is as secure as PoW, since everybody knows everything. We have a DAG and at least once in a day all leaves will be merged to a single leave. So having this merged leave hash is enough to ensure about the graph?s health. To make this hash (and implicitly the DAG history) immutable, shareholders will sign this hash and the hash of signatures can be registered in Bitcoin?s block (although in my opinion it is not too necessary). Is it right? Is there any flaws?
- In my opinion Satoshi used PoW as a mechanism to distributing coins in a loosely random and fairly way, despite the other functionalities of Pow (such as securing network). Is it true?
Any comment, hint, tip, note or critique is welcomed.
Thanks for your time

@_date: 2020-05-25 11:06:14
@_author: matbit@airmail.cc 
@_subject: [Cryptography] Proposal for a PoS blockchain 
Thanks for comments. I try to response all. please let me know if the answers were convincing or not. Or if there are another questions or unclear points. I appreciate all professional?s comments, hints, tips or - It is only a mental barrier. If I know some professionals going to judge my stuff, I won?t close myself, instead I learn and improve - not necessarily ALL HAVE TO VOTE or ALL WILL VOTE, only 51% confirmation will be enough for approving a proposal.
- not necessarily ALL WILL vote, since voting is not free (like every activities in this network). The voter must pay a little ballot fee.
- after all, over time we can improve polling system to some more efficient alternative systems. For example we can implement a liquid democracy model in which Voters can either vote directly or delegate their vote to other professionals or we can use some quadratic voting where individuals allocate votes to express the degree of their preferences, rather than just the direction of their preferences.
Let imagine the network consist of me myself only as initiative shareholder. Obviously I get all new money, but what is the point? If I do not find somebody whom accepts my money in exchange of her/his goods or services, the money worth nothing forever. Because of human nature, we prefer to keep more coins for ourselves. If it is not possible so we will divide coins between as less as possible people, and if this is not possible too, we will divide it between our clan.
But none of these 3 approaches will help our network -particularly our money?s value-, because ?The money?s value come from the exception of future purchasing power.?. people accept the coin in exchange of their good or services, because they believe in tomorrow can pay that money and buy another goods or services.
Therefore the network has to be expanded and embraces new members to raise up the money usability and applicability in order to advance market range. Bigger community means less daily coins for each, But also means more usability and applicability for the community?s money.
Hence community has to be grown and every decisions made by polling, the community has to add more and more honest person and not corrupted one. Otherwise community die in early steps and their money will never be a valuable asset. Implicitly there will be no reason for developer to participate in development any more.
It is possible for both groups, but we should consider the motives of establish a network. If I start a community, my motives are all about ?common good?, and I strongly stand for it. In sequence who join the network and I approve her/him participation, will have same intentions or at least covers large part of my intentions. So over time the community which formed around certain principals, contains the members that have almost same mindset. BTW ?this network? and its ?rules? and ?value of its money? all are governed by majority of community via polling for every single decision. If majority are good, the entire community and its money will be good, otherwise community and its money will collapse -let alone the fact that this kind of corrupted community can not be formed in first place-.
After all, the software is and will be free(libre) and open source. In worst case, if the 51 percent bad people can dominant the network, the 49% good member of community can fork new coin and resume the network and history, and chain info and every single details of network in new graph. They only dismiss the shares of 51 % corrupted and everything will be fine. Note that, the good community do not need to dismiss money of bad actors. They just need to reform the community.
It is very complex to explain it by I?ll try to do my best, hopefully I will create an animation to explain it well, but for now:
Indeed we record the block and its transactions immediately on graph(DAG), and it will not reversible at all, but recording a block in graph doesn?t mean all of its transactions are valid. So after 12 hours a transaction will be matured and its outputs will be spendable. But if after 12 hours we find there are two or more transactions which are using same inputs but spending it for different addresses, it is a double-spend attack and we have to resolve it. Either we determine the first spend as a valid one and reject the rests, or we detect ALL transactions as invalid and seize the inputs in favor of network treasury to penalize the attacker. So lets delve into how we determine valid transactions.
Most likely after 12 hours, all leave blocks in last 12 hours are merged at least one time and now we can see entire blocks in history of all current leaves by moving back in leave ancestors.
For simplicity we assume two transaction x, y that are using same input and spending in different outputs. Transaction x take placed in block X and transaction y take placed in block Y. The problem is either blocks X or Y can claim they are created before the other one(since the nodes creates these blocks and attacker can run million cheater nodes). So we have XcreationTime and YcreationTime. Since we have a network and inevitably we will face propagate delay as well. So, for each node there will be XreceiveTime and YreceiveTime, which can/will be different for each node. Each node has to decide the order of receiving blocks and broadcast it to all neighbors. The nodes have 12 hours to this ?informative phase?. Of course the node do not this ?informative activity? for all blocks(avoid overwhelming network). They will start it immediately after founding double-spend occurrence and only for that particular blocks. So after 12 hours every nodes have votes of every other nodes about the receive order of blocks X & Y. Each node has a certain amount of network shares and a vote about order. These information is already distributed in entire network and now each node can decide about which transaction is valid and which not. The result for entire nodes will be same. Each node uses the (vote * voterShares) to evaluate the blocks order. Note that, for each node the order is important and the node do not consider to the percentage of this agreement. So a node can figure out the X is before Y by 10 percent agreement and the other node reasons for same result X is before Y but with 99 percent agreement. Both are ok and X is valid transaction. In this formula each node uses only  XreceiveTime and YreceiveTime as the unique fact that a node can trust independently.
There are some way to cheating, but for the sake of brevity I stop these conflict-resolution-process explanation and hopefully later in that animation I?ll explain all possible attack scenarios and the solutions as well. But as a last important part of puzzle I would like to note about two important timestamps that limits attackers ability. The XcreationTime & YcreationTime are the parameters that the attacker can set freely. The only control the nodes doing is ?if the date is not in future?. But after 12 hours, in ?import matured transactions? if there is double-spending and the gap between  XcreationTime & YcreationTime is less that 6 hours, definitely both transactions will determined as invalid transactions.
When a node wants to create a new block, it has to put the hash all current leave blocks in header of new block. So the node will includes all leave blocks it knows and they are already existed in its local machine DAG. It is a merge, and each node do it several times in day, and all nodes doing it as well. Then the node broadcasts new block to network. The neighbors will receive this new block and validate it and add it to their local DAG as a new leave block. There is no obligation for a node to include all leave blocks or not rejecting some particular leave blocks when node wants to create new block. If a node do not link to a block, probably another node will link to that block and broadcast the new leave block. So at a certain time there will be different nodes with different leaves and definitely in that certain time we can consensus on DAG members older than 12 hours. Most probably the older than 12 hours block for all ?synchronized? nodes are same blocks, same ancestors and same descendants. There will be a catastrophic situation in which a group of nodes do not accept the block of certain group of computers or the group of computers for any reason do not accept transactions of certain accounts. In these cases we will face fork, and like other blockchains it must be resolved or will cause two or two hundred forks. It looks like a tragedy, but for me it is ok as well, since my proposed network is formed around the mindset of its population. That is, the network has some ?principals and rules? that they are coded in software. The participants of network primarily accepted the rules, otherwise they never would join to network.  The ?network?, the ?network?s rules? and the ?network?s money? are essentially ?social contract?. If there is conflict in any of these issues, either we can solve it or a part of community will leave it and create a new community with new money, pretty much like a democracy, but with ?no cost?. Nothing is bad. I guarantee we will never face this kind of problems in our network, due to the nature of this network and its ?community based? money.
As I explained before, to resolve the conflict it is just enough to after 12 hours determine the order of blocks by each node. So there is no need for wait for 51% percent, but definitely there is a threshold for minimum confirmation. If the network can not provide even this minimum threshold it is not safe at all.
But there is a threat for network in which the shareholder do not run nodes. That is, we have two different entity in network, the share holders which earned shares by participating in software development (or another kind of develop e.g. design, test, translate, tutorials, contents?) and we have the backers that dedicate their machine to network and run full-nodes and maintain the blockgraph, validate transactions and so on. Since we have not PoW and there is no mining, the only incentive backers is transactions fees. In early days the shareholders and backers are same person, but over time the backers will be a group of people that they have small portion of network?s share or they have no shares at all. It could be a thread in case of conflict resolving. We can implement a kind of delegate sub-system in which the share holders rent their shares to backers and give them delegation to judge ?ONLY in double-spend-resolving? and no more grants. BTW it is an open issue to consider in future.
The  scarcity by itself doesn't give value to the coin. The  scarcity is a feature of a ?good money?. I state the features of a ?good money? here, and I believe in money of our network will be a good money.
Generally, the good money must have intrinsic value, Something like "labor theory of value" but do not stick that too much. The good money must appreciates its value over time. That is, doesn't lose its purchasing power even after decades. It must be regulated and do not fluctuating too much. It must be scarce and has utility value, meanwhile it must has optimal granularity. The good money must support ?financial sovereignty? and must not be seizeable, also must be cheaply transferable. The good money definitely must have 3 classical factor of money. Unit of account, Medium of exchange, Store of value.
If you issue a good money, definitely people will buy ?good money? in exchange the bad, cheap, paper fiat money.
It already happen one time for Bitcoin and definitely will happened for this money as well, maybe in 2 years or 3 years. Eventually the first day, first person accept this money for a good or service the money will have a value, say 1 million equal to one dollar. It will its ?price? and over time it can increase or decrease.
Absolutely true. ?The software? and ?its network? and ?people who formed this network? in whole, they are creating value, in various ways. The primarily value they are creating is the software itself, although the software is free and no one pay for it, but people use the software to transfer money and pay transaction?s fee that goes to network maintainer pocket as a kind of income. The second goal for community?s developers is adding more and more useful features to software, in order to eliminate all Bitcoin shortcomings and make the money more popular and user friendly. Every small improvement increases the value of total ecosystem. There are immense features and functionalities we can create on top of this software and its network.
This kind of tokens, or coupons already are implemented and without blockchain or even internet site they are working perfectly. What I proposed is way beyond that.
This is not my intention of using Blockchain technology. My proposed money has ?intrinsic value? and it is absolutely important to set ?real value? for a ?real work? to solve a ?real problem? of ?real world?. Of course we can implement this kind of tokens (like Ethereum ERC721) on top of our network in order to implement a tokenized economy for shared assets management,  and it is one of million possibility of our future development of the software.
Unfortunately, such a great innovation like blockchain is misunderstood so far. I strongly believe the blockchain can be used by the people to enhance democracy in order to achieve human prosperity. But in current situation, no one practically used it for this mean. Cryptocurrency is a form of ?social agreement? that we can use it as ?means of democracy?. Our software will prepare the necessary infrastructure of that, not just a new cryptocurrency.
I think it is better to have two different concept. That is, we have the shares, that anybody can acquire by participating in activities and accomplish a ?real task?. Also we have the coins, that everybody acquire because of her/his shares. Participants can spend their coins without obligation to miss their shares. Although they can  sell their shares too. Each contributor receives money from the treasury for 7 years in proportion to their shares. It is a good incentive for participants to continue ?good act? and not ?cheating? or ?exit scam?.
That?s true, albeit the ?software? and ?its ecosystem? and ?business model? are not same as a classic startup, but we can use some mechanisms that typically are used in startup running (e.g distributed team members, agile/scrum methodology, fast moving, regular releases, and so I have dedicated myself 24*7 to this project, although it will not necessary for other participators. You all are welcome to join to the project, even if one hour per week. we start with software developing but definitely do not stop over there. These are some skills we will need soon: the programmers, translators, content providers, editors, designers, tutorial staff, multimedia providers and so on. Let me know if you are interested in participating.

@_date: 2020-05-25 11:15:56
@_author: matbit@airmail.cc 
@_subject: [Cryptography] Proposal for a PoS blockchain 
Thanks for your comments.
Since the proposed structure is a DAG and not link-list, so in any given time for any machine we will have different graph state with different leaves. Therefore theoretically there will be n forks in which n=number of nodes. But it is not important, because we always working on the blocks with the age older than 12 hours. Therefore the graph members which are older than 12 hours must be same for all nodes.
Yes, but the distribution logic has nothing with network or computer power, instead it based on member?s share which comes from external. That is, members do some tasks, and claim their wage by stating the hours that they dedicate to a particular task. Their claim will be judged by polling.
The idea of using Bitcoin(or some other blockchains) as a proof of state for weaker chains and vice versa is good, and we can bind TWO chain together, but this also has a flaw. What if the cheater group starts to do same binding beforehand? I mean imagine the cheaters start to bind the corrupted chain parallel and put the Bitcoin hash in corrupted chain, eventually after some days they attack to network and claim their chain is the right one? How the nodes can determine which chain is true? They see both chains are recorded on Bitcoin chain and both are linked to Bitcoin blocks as well! The only solution is nodes stack. The nodes have to trust the majority of network on every block?s creationTime. That is, for every time span, the nodes will control ?for this time range, what blocks are signed by majority, and registered in Bitcoin chain??. So the nodes always choose the branch which signed by majority and recorded in Bitcoin chain. Indeed I like the idea of recording weaker chain (specially PoS-type chains) in stronger chains in one way. This adds up an external-entity to chain which is useful. By this kind of binding in one way we secure our chain will not re-organize graph, if the majority (with today?s shares) wants to change the history of graph.
Your second idea of binding n different pairs is more interesting and as you mentioned before ?it is almost impossible to persuade all chains to defect?. It could be implement as a plugin on top of our software. In such a way we can add some auto-snapshoot-recorder that records our chain?s status in any given time(e.g every 12 hours) on another I am not convinced, since the conflict resolution is a part of security. I couldn?t find any solution to solve the conflict on chronicle spend order except using node?s shares and majority?s edict.
If you have a solution for that, can you explain it in detail or refer me some links please?


@_date: 2007-01-13 19:03:18
@_author: Richard Powell 
@_subject: SSL Server needs access to raw HTTP data (Request for adivce) 
I was hoping someone on this list could provide me with a link to a tool
that would enable me to dump the raw HTTP data from a web request that
uses SSL/HTTPS.  I have full access to the server, but not to the
client, and I want to know exactly/precisely what the client is
I've considered a few options, including....
 eg... using apache_request_header() from php
    Need to have php installed as module, which I don't.
    Also, not sure it would give me the complete RAW stream that I want
    and didn't want to waste my time installing a test server if it
    wasn't going to fully work.
 eg... tried using "openssl s_server -accept 443 -WWW -debug -msg
    This option didn't seem to display/dump the raw HTTP stream.
    I could not locate an option that would enable seeing this
    information.
I've been searching google for hours for some sort of tool to no avail.
If I don't find a reasonable/quick option, my next solution is going to
be to hack the s_server.c file from openssl and add the necessary
statements to dump the desired stream.  I'm not too excited about this
option, but I suppose if that's the best option I have, then so be
it.  :)
Thanks in advance for any advice.

@_date: 2007-01-14 17:57:28
@_author: Richard Powell 
@_subject: SSL Server needs access to raw HTTP data (Request for adivce) 
I believe this only looks at the encrypted stream/protocols.  I actually
need to look at the unencrypted/decrypted data.  As I have access to the
server certs and keys, this should be possible.

@_date: 2007-01-14 18:04:10
@_author: Richard Powell 
@_subject: SSL Server needs access to raw HTTP data (Request for adivce) 
As it turns out, getting the 1st line of the get/post was relatively
easy using s_server from openssl.  Basically, there's a BIO_gets() that
reads the 1st line of input.  All I had to do was add a BIO_dump() and
Unfortunately, I can't figure out how to get the subsequent lines from
the client (ACCEPT, REFERER, etc...).  I assumed I could just do
BIO_gets() until zero bytes were returned, but zero bytes are always
returned after the 1st call to the function.
I suppose I'll locate an openssl list and seek help there. :)  Unless
someone happens to know the answer.

@_date: 2007-01-14 19:12:45
@_author: Richard Powell 
@_subject: SSL Server needs access to raw HTTP data (Request for adivce) 
Thanks for the responses.  I found the solution thanks to one of the
suggestions off this list.
Basically, just setup stunnel to accept the encrypted stream and forward
it to a clear server and then sniffed the stream.
Thanks again

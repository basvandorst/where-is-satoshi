
@_date: 2009-05-31 14:14:56
@_author: Roger 
@_subject: Avoid pinentry-gtk-2 when using console! 
This is why I disabled gpg-agent.  As little as I use Gnupg/PGP, I would
always have to enter the passphrase at Evolution PIM startup... even
though I had no intentions of using gpg for the entire session.  (It's
because a lot of the passwords are put in a gpg keyring ... or
It makes sense if you use Signatures/Encryption on a daily basis.
If you only use Signatures/Encryption once a month, that's a lot of
passphrase entering & caching!
Granted, I now have to enter the pin each time I sign an email, it's
rare though.  (And, might be a good thing as some people's clients I
email with a PGP based signature have severe issues viewing the email
properly for reasons.  As such, this prevents me from automagically
signing & sending.)

@_date: 2009-06-02 12:43:01
@_author: Roger 
@_subject: Avoid pinentry-gtk-2 when using console! 
Again, still sounds like a hack as (I could have done this here).  It's
the reason for posting this issue to this list (since others have the
same issue on the Internet).
Think it's paranoia unless one is on a public network or is being
aggressively sought after all the time.  If this is a issue, it sounds
more sensible for the administrator to use a compile time flag
(or .gnupg/option statement or environmental variable) which seeks to
make gpg/pinentry usage stricter.
Of course, then you run into a problem with users having access to their
$HOME/.gnupg option versus an /etc/gnupg file preventing writing for
enabling such a feature.  Hence, a compile time option being better.
This is what drove me up the wall with Evolution.  Granted, it enhances
security if you're always entering the pin, but quickly hinders if a
user rarely uses gpg/pgp.
(Granted, I find X useful and prefer still strongly prefer the console.
Just don't try forcing the X windows down my throat like Windows
does. ;-)
In summary -- from info gathered from this thread -- there is no coded
solution besides hacking the current files with a script that will
permit the user to use the terminal /usr/bin/pinentry
or /usr/bin/pinentry-curses while within X. (Except unsetting the X
display variable which which then would cause all X apps to fail when
starting from the terminal.)

@_date: 2009-06-02 22:24:17
@_author: Roger 
@_subject: Avoid pinentry-gtk-2 when using console! 
Ah. Bingo. So really I should go file a (nagging) bug for Evolution PIM
client (nagging) me to enter a passphrase each time I start the
Evolution application.
Ten to one, it's using a gpg keyring for encrypting the email account
passwords. (ie. standard POP & IMAP which are sent unecrypted anyways!)
Looks like I need to go back, re-enable the gpg-agent compile time
option, ensure it's configured to my liking per your above notes
concerning "keep-*" options.  Gather accurate data & go bug them! ;-)

@_date: 2009-06-03 00:09:27
@_author: Roger 
@_subject: Avoid pinentry-gtk-2 when using console! 
Just a quick ping here, as I'm again looking over things.
To correct my above posts, it was the "gnome-keyring" use flag for
Gentoo causing the hindrance Evolution asking for a pin so many darn
times!  (My bag.)
I've enabled gpg-agent daemon within the
$HOME/.bash_profile /$HOME/.profile
I've also edited/created a $HOME/gpg-agent.conf file.
gpg-agent --daemon --keep-tty --use-standard-socket
--pinentry-program=/usr/bin/pinentry-curses seems to be a proper
incantation for my needs.
Cheers!  ... blame gnome-keyring for the problems ;-)

@_date: 2009-05-30 12:58:26
@_author: Roger 
@_subject: Avoid pinentry-gtk-2 when using console! 
Is there a method to avoid using pinentry-gtk-2 when using a console
within X and specify using pinentry or pinentry-curses?
I've already tried recompiling gnupg & pinentry (using -gtk -qt3). :-/
This bugs me because I'm working on the console and have to move my
fingers from the keyboard to my mouse (or whatever) to enter the pin
into the X widget instead of console!

@_date: 2009-05-30 21:49:26
@_author: Roger 
@_subject: Avoid pinentry-gtk-2 when using console! 
I'm using rxvt-unicode and GNU Screen combo.
As I stated, "I'm invoking gpg from the command line shell."
Interesting hack, but this is going to kill my command line experience
when I type "gvim"!
Notice, vim & gvim have an option to call either or, and if X isn't
present, falls back to vi/vim?
This is probably what pinentry should do, instead of depending on X (gtk
or qt3) explicitly.
if {environmental variable is set to console/gtk/qt3}
  use the specified pinentry flavor
else use pinentry-console
else use pinentry-gtk
A good place for this environmental variable is within
This way, there's a fallback to the fallback method as there is no
telling where a user or what X application is going to invoke gpg.
Well, obviously there is, but it hinders those working in a shell doing
simple task with gpg!
I'm guessing, the current solution is to assume the user is a dumb X
user. ;-)
(I use both, command line for gpg, as well as Evolution for email which
is set to only call pinentry-gtk-2.)
From searching on the web, there's quite a few others griping about this
same issue.

@_date: 2009-05-31 13:37:29
@_author: Roger 
@_subject: Avoid pinentry-gtk-2 when using console! 
I do... when, if ever, I get time now.
For others, they did too.  One of them proposed a patch for pinentry and
posted the proposal on the web.  ... not sure if they sent it to the
mailing list though.
Quick & dirty hack compared to one that is hard coded with if/then.
Besides, I don't use gpg-agent.  I got prompted one too many times for
my pin and/or something broke too.  Seemed more of a hassle at the
current time, so I recompiled everything on my Gentoo box here to not
use gpg-agent.  Besides, I'm the only one using this computer/network
and thought it was overkill.

@_date: 2009-05-31 13:45:59
@_author: Roger 
@_subject: Avoid pinentry-gtk-2 when using console! 
Unless one has configured the console window to always "stay on top" of
other windows.
... however, I have to move my eyeballs to the center of the display &
type instead of keeping my eyes at the console & typing.
I know this sounds ridiculous, but when you consider a console/terminal
to be as good look'n as a girl, and then you're made to a X window and
forced to type in it, it just feels ridiculous.  Think most folks whom
praise the console Gods, feel the same way.


@_date: 2012-08-09 13:47:26
@_author: Patrick 
@_subject: Another problem of large key generation 
I saw the thread from beginning of June about the key generation.
But I am trying on an scm SPR532 (the model with the keypad)
Keys up to 1024 are OK and over 1024, I have the messages Scdaemon[4755]: please wait while key is generated ...
Scdaemon[4755]: ccid_transceive failed: ( 0x1000a)
Scdaemon[4755]: apdu_send_simple(0) failed: card I/O error
Scdaemon[4755]: key generation failed: Card error
GnuPG is the 2.0.19 libusb is 1.0.9 ( even libusb compat is recent )
I didn't try to install any reader driver. the ccid driver is the one which
comes with the gnupg
I also have 2 other problems that might help:
* While changing a PIN the old one is asked on the keypad but I have to type
the new one on the computer
* pinentry crashes the carriage return on the console as on a new line the
cursor goes one line down but not on the beginning of the line

@_date: 2012-08-12 15:01:32
@_author: Patrick 
@_subject: [english 100%] Another problem of large key generation 
I made more investigations. I installed the pcscd light, installer the ccid
from the L. Rousseau site, and recompiled gnupg with --disable-ccid. This
time the system is properly generating keys of 2048 (I didn't try 3072 but
should work) but the keypad is no longer active.
I saw the thread from beginning of June about the key generation.
But I am trying on an scm SPR532 (the model with the keypad)
Keys up to 1024 are OK and over 1024, I have the messages Scdaemon[4755]: please wait while key is generated ...
Scdaemon[4755]: ccid_transceive failed: ( 0x1000a)
Scdaemon[4755]: apdu_send_simple(0) failed: card I/O error
Scdaemon[4755]: key generation failed: Card error
GnuPG is the 2.0.19 libusb is 1.0.9 ( even libusb compat is recent )
I didn't try to install any reader driver. the ccid driver is the one which
comes with the gnupg
I also have 2 other problems that might help:
* While changing a PIN the old one is asked on the keypad but I have to type
the new one on the computer
* pinentry crashes the carriage return on the console as on a new line the
cursor goes one line down but not on the beginning of the line
Gnupg-users mailing list
Gnupg-users at gnupg.org

@_date: 2012-08-13 15:18:05
@_author: Patrick 
@_subject: [english 99%] Re: Another problem of large key generation 
I have been validating one level of debug
scdaemon[4059]: DBG: ccid-driver:   [0010]  00 40 05 00 CA 00
scdaemon[4059]: DBG: ccid-driver:   [0016]  C4 00 4B
scdaemon[4059]: DBG: ccid-driver: RDR_to_PC_DataBlock:
scdaemon[4059]: DBG: ccid-driver:   dwLength ..........: 13
scdaemon[4059]: DBG: ccid-driver:   bSlot .............: 0
scdaemon[4059]: DBG: ccid-driver:   bSeq ..............: 123
scdaemon[4059]: DBG: ccid-driver:   bStatus ...........: 0
scdaemon[4059]: DBG: ccid-driver:   bChainParameter ...: 0x04
scdaemon[4059]: DBG: ccid-driver:   [0010]  00 00 09 01 20 20
scdaemon[4059]: DBG: ccid-driver:   [0016]  20 03 00 03 90 00 B8
scdaemon[4059]: 3 Admin PIN attempts remaining before card is permanently
scdaemon[4059]: DBG: prompting for keypad entry '|A|Please enter the Admin
scdaemon[4059]: DBG: ccid-driver: sending escape sequence to switch to a
case 1 APDU
scdaemon[4059]: DBG: ccid-driver: PC_to_RDR_Escape:
scdaemon[4059]: DBG: ccid-driver:   dwLength ..........: 3
scdaemon[4059]: DBG: ccid-driver:   bSlot .............: 0
scdaemon[4059]: DBG: ccid-driver:   bSeq ..............: 125
scdaemon[4059]: DBG: ccid-driver:   [0007]  00 00 00 80 02 00
scdaemon[4059]: DBG: ccid-driver: RDR_to_PC_Escape:
scdaemon[4059]: DBG: ccid-driver:   dwLength ..........: 0
scdaemon[4059]: DBG: ccid-driver:   bSlot .............: 0
scdaemon[4059]: DBG: ccid-driver:   bSeq ..............: 125
scdaemon[4059]: DBG: ccid-driver:   bStatus ...........: 0
scdaemon[4059]: DBG: ccid-driver:   buffer[9] .........: 00
scdaemon[4059]: DBG: ccid-driver: PC_to_RDR_Secure:
scdaemon[4059]: DBG: ccid-driver:   dwLength ..........: 19
scdaemon[4059]: DBG: ccid-driver:   bSlot .............: 0
scdaemon[4059]: DBG: ccid-driver:   bSeq ..............: 126
scdaemon[4059]: DBG: ccid-driver:   bBMI ..............: 0x00
scdaemon[4059]: DBG: ccid-driver:   wLevelParameter ...: 0x0000
scdaemon[4059]: DBG: ccid-driver:   [0010]  00 00 82 00 00 19
scdaemon[4059]: DBG: ccid-driver:   [0016]  08 02 FF 04 09 00 00 00 00 00 20
00 83
scdaemon[4059]: DBG: ccid-driver: RDR_to_PC_DataBlock:
scdaemon[4059]: DBG: ccid-driver:   dwLength ..........: 6
scdaemon[4059]: DBG: ccid-driver:   bSlot .............: 0
scdaemon[4059]: DBG: ccid-driver:   bSeq ..............: 126
scdaemon[4059]: DBG: ccid-driver:   bStatus ...........: 0
scdaemon[4059]: DBG: ccid-driver:   [0010]  00 40 02 90 00 D2
scdaemon[4059]: DBG: dismiss keypad entry prompt
scdaemon[4059]: please wait while key is being generated ...
scdaemon[4059]: DBG: ccid-driver: PC_to_RDR_XfrBlock:
scdaemon[4059]: DBG: ccid-driver:   dwLength ..........: 15
scdaemon[4059]: DBG: ccid-driver:   bSlot .............: 0
scdaemon[4059]: DBG: ccid-driver:   bSeq ..............: 128
scdaemon[4059]: DBG: ccid-driver:   bBWI ..............: 0x04
scdaemon[4059]: DBG: ccid-driver:   wLevelParameter ...: 0x0000
scdaemon[4059]: DBG: ccid-driver:   [0010]  00 40 0B 00 47 80
scdaemon[4059]: DBG: ccid-driver:   [0016]  00 00 00 02 B6 00 08 00 30
scdaemon[4059]: DBG: ccid-driver: RDR_to_PC_DataBlock:
scdaemon[4059]: DBG: ccid-driver:   dwLength ..........: 5
scdaemon[4059]: DBG: ccid-driver:   bSlot .............: 0
scdaemon[4059]: DBG: ccid-driver:   bSeq ..............: 128
scdaemon[4059]: DBG: ccid-driver:   bStatus ...........: 0
scdaemon[4059]: DBG: ccid-driver:   bChainParameter ...: 0x04
scdaemon[4059]: DBG: ccid-driver:   [0010]  00 C3 01 64 A6
scdaemon[4059]: DBG: ccid-driver: T=1: S-block request received cmd=3
scdaemon[4059]: DBG: ccid-driver: T=1: waittime extension of bwi=100
scdaemon[4059]: DBG: ccid-driver: PC_to_RDR_XfrBlock:
scdaemon[4059]: DBG: ccid-driver:   dwLength ..........: 5
scdaemon[4059]: DBG: ccid-driver:   bSlot .............: 0
scdaemon[4059]: DBG: ccid-driver:   bSeq ..............: 129
scdaemon[4059]: DBG: ccid-driver:   bBWI ..............: 0x04
scdaemon[4059]: DBG: ccid-driver:   wLevelParameter ...: 0x0000
scdaemon[4059]: DBG: ccid-driver:   [0010]  00 E3 01 64 86
scdaemon[4059]: DBG: ccid-driver: usb_bulk_read error: Connection timed out
scdaemon[4059]: ccid_transceive failed: (0x1000a)
scdaemon[4059]: apdu_send_simple(0) failed: card I/O error
scdaemon[4059]: generating key failed
gpg: key generation failed: Card error
scdaemon[4059]: DBG: ccid-driver: usb_bulk_read error: Connection timed out
scdaemon[4059]: DBG: ccid-driver: USB: CALLING USB_CLEAR_HALT
scdaemon[4059]: DBG: ccid-driver: bulk-in seqno does not match (131/129)
scdaemon[4059]: DBG: ccid-driver: bulk-in seqno does not match (131/130)
scdaemon[4059]: scdaemon (GnuPG) 2.0.19 stopped
-----Original Message-----
Sent: Monday, August 13, 2012 11:44 AM
On Thu,  9 Aug 2012 13:47, patrick.pub at nerim.net said:
If you want to look closer at it, add "debug-ccid-driver" do
scdaemon.conf.  If you add this option two times it will even be more
   Werner

@_date: 2012-08-13 15:58:58
@_author: Patrick 
@_subject: [english 100%] Re: [english 99%] Re: Another problem of large key 
I made a mistake, I bought last week the 332, not the 532
There are no updates on the scm site for this item
-----Original Message-----
Sent: Monday, August 13, 2012 3:29 PM
On Mon, 13 Aug 2012 15:18, patrick.pub at nerim.net said:
That pretty much looks like a firmware bug in the reader.  Check out
scm-micro.com to see whether there is an updated firmware.  I recall
that I updated my reader's firmware a few years ago.
   Werner

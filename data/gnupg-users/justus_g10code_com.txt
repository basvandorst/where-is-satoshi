
@_date: 2016-08-03 14:54:30
@_author: Justus Winter 
@_subject: Reduce GPGME memory usage 
Hello :)
Did gpgme_get_key work before for you?  Looking at the source of
gpgme_get_key I see that it clones the context, so maybe you are setting
up the context in a special way that makes it fail?  Does the
gpgme_op_keylist_start interface work for you?
If you are able to construct a minimal test case, feel free to open a
bug report.
I just tried, and the callbacks can indeed be used to implement a
streaming interface, e.g.:
~~~ snip ~~~
import sys
import pyme
def do_write(data):
    sys.stdout.write(chr(data[0]))
    return 1
data = pyme.Data(cbs=(None, do_write, None, lambda: None, None))
with pyme.Context() as c:
    c.decrypt(sys.stdin, sink=data)
~~~ snap ~~~
Likewise you can feed the source in smaller chunks to the engine.
If that is not enough, you might want to look at TinyGPG, a library
implementing a subset of the OpenPGP protocol, that is written with
embedded systems in mind:

@_date: 2016-08-08 14:46:12
@_author: Justus Winter 
@_subject: Building gpgme on windows with GCC 5.1.0 
Hi :)
Do you need exactly that version?  Debian has a gcc 5.4 cross toolchain:
% apt-cache policy gcc-mingw-w64-i686
  Installed: 4.9.1-19+14.3
  Candidate: 4.9.1-19+14.3
  Version table:
     6.1.1-6+19 300
        300  experimental/main amd64 Packages
     5.4.0-4+18.2 350
        350  unstable/main amd64 Packages
 *** 4.9.1-19+14.3 900
        900  jessie/main amd64 Packages
        100 /var/lib/dpkg/status
No idea.

@_date: 2016-07-18 11:32:02
@_author: Justus Winter 
@_subject: gpg-preset-passphrase not working with 2.1 
Hello :)
Thanks for the report.
I haven't looked deeply into the issue, but gpg-preset-passphrase does
work, we use it in our test suite.  Feel free to add relevant
information, but please don't retitle the bug.  I have approved your bug
tracker account.
Yes.  The issue is not closed, so it should be still present.

@_date: 2016-07-18 11:13:38
@_author: Justus Winter 
@_subject: gpgscm 
Hello :)
Yes they are, and I tried to push my changes upstream well before we
merged the new test suite into our master branch.  Sadly, my efforts
were not successful.  You can find the details in TinySCHEMEs mailing
list archive.
I consider bundling of gpgscm no worse than bundling scdaemon, or say
gpgtar.  The plan is to let it mature within the GnuPG repository, and
once we are confident that it fits all our needs, we will move it to
libgpg-error, and use it for other test suites too.
There is gnupg-devel, see

@_date: 2016-07-19 10:24:31
@_author: Justus Winter 
@_subject: GPGME signing failed: Bad passphrase 
Hello :)
First of all, your mails are really hard to read because your mua is
inserting Â  into the plain/text part, and there are no newlines.
This is how it looks to me:
If your key requires a passphrase to be used, then you need to supply it
somehow.  In an interactive setting you may use a pinentry program.  In
fact, that should be the default, and if no pinentry pops up asking you
for the passphrase, it might be that none is installed on your system.
Have you tried
  gpg --sign --local-user 5FEC9A32 file
You mention that gpg is not installed.  Is gpg2 available?
In an non-interactive setting, you need to supply the passphrase.  This
can be done using an passphrase callback.  See e.g. tests/gpg/t-sign.c,
Hope that helps :)

@_date: 2016-07-19 13:42:08
@_author: Justus Winter 
@_subject: GPGME signing failed: Bad passphrase 
please don't drop the mailinglist from your replies.  It may be that
your questions may be relevant to others as well.  And by only replying
to me you prevent others from answering it, in turn forcing me to reply.
Yes, gpg is required.

@_date: 2016-07-19 13:54:59
@_author: Justus Winter 
@_subject: GPGME signing failed: Bad passphrase 
You may or may not need to configure gpgme to use the loopback pinentry
mode, and may or may not (depending on your specific version of gnupg)
allow the loopback pinentry mode in the first place.

@_date: 2016-05-19 10:46:13
@_author: Justus Winter 
@_subject: GnuPG in 2016 
this is the plain text version of a new blog entry I wrote up.  If you
have questions or want to comment, please group-reply to this mail.
GnuPG in 2016
  This is an overview of what happened in the first half of 2016 in the
  GnuPG project and community.
  There has been one release of the current stable branch of GnuPG,
  version [2.0.30].  Our development branch GnuPG modern saw two
  releases, [2.1.11], and [2.1.12].
  Among many bugfixes and other improvements GnuPG 2.1.11 added a new
  command `--export-ssh-key' that replaces the `gpgkey2ssh' tool, and we
  now use the CA certificate of `hkps.pool.sks-keyservers.net' to secure
  communications with the servers in the pool without further
  configuration.  Furthermore, we now print a warning if a GnuPG
  component is using an older version of our backend daemons.
  2.1.12 brought support for a new experimental "Web Key Directory" key
  location service, read-support for a new private key protection format
  and the new extended private key format, improved Tofu support, use of
  the new libusb 1.0 API, and countless small features and fixes.
  Daniel Genkin, Lev Pachmanov, Itamar Pipman, and Eran Tromer from the
  Tel Aviv University demonstrated a practical way to extract ECDH keys
  via low-bandwidth electromagnetic attacks on PCs[1].  Libgcrypt
  version 1.6.5 and an updated Windows installer for GnuPG 2.1.11 has
  been [released] to mitigate this attack.
  In April we released a new stable version of Libgcrypt, version [1.7].
  It retains full API and ABI compatibiliy to the 1.6 series.  Its main
  features are new algorithms, curves, and performance improvements.
  Andre worked on PGP/MIME support in GpgOL, and the current stable
  version [2.3.1] of Gpg4win includes an option to enable experimental
  support for sending GPG/MIME and S/MIME.  He also worked on Kleopatra,
  removing some dependencies on KDE components and DBUS, and porting it
  to newer KDE frameworks, making it easier to build, maintain and hack.
  A [beta version] of Gpg4win 3.0.0 has been released featuring the
  leaner Kleopatra with newer KDE libraries.  Andre also worked on
  registering file extensions in Windows integrating encryption and
  decryption of files into the desktop environment, and implementing a
  'Show Password' feature for the pinentries.
  Jussi worked on libgcrypt, most notably [adding] an ARM assembly
  implementation of SHA-512, and Intel PCMUL implementations for CRC
  algorithms.
  Justus worked on a new [test framework] for GnuPG and related
  projects, a new [extensible storage format] for private keys,
  [implemented] elliptic-curve cryptography in libssh using libgcrypt as
  backend, and triaged and fixed GnuPG bugs.
  Kai evaluated Mailpile.  As the future of Mozilla Thunderbird - and
  with it Enigmails - is uncertain, we decided to explore alternative
  end-user-friendly mail clients with support for GnuPG.
  Gniibe worked on GnuPG and libgcrypt.  He ported GnuPG's `scdaemon' to
  libusb 1.0, and worked with the team from Tel Aviv University to
  protect libgcrypt against the sidechannel attack.  Gniibe also
  maintains GnuPG-related packages in Debian.  He updated both [Poldi]
  and [Scute].  Gniibe designs and sells the FST-1, a small
  microcontroller that depending on the firmware either acts as an
  OpenPGP smart card or a hardware random number generator.  As the
  stock is running low and some components cannot be sourced any longer,
  he is [working] on the successor featuring a simpler design, a button,
  and support for elliptic curve cryptography.
  [2.0.30]
    [2.1.11]
    [2.1.12]
    [released]
    [1.7]
    [2.3.1]
    [beta version]   [adding]
    [test framework]
    [extensible storage format]
    [implemented]
    [Poldi]   [Scute]   [working]
    Werner received the [Award for the Advancement of Free Software] for
  his work on GnuPG.
  [Award for the Advancement of Free Software]
    Andre [asked] how to obtain a key in a format suitable for SSH's
  `authorized_keys' file from an OpenPGP public certificate now that
  `gpgkey2ssh' has been deprecated.  The discussion was [taken to the
  bug tracker], and a solution released with GnuPG 2.1.11.
  Lachlan J. Gunn, Andrew Allison, and Derek Abbott wrote a paper about
  how Tor can be used to detect malicious key servers[2].  The
  [announcement] contains more information including a link to their
  implementation.
  Daniel [reported] that there have been discussions on building a
  Live-CD for securely managing OpenPGP master keys and smart cards over
  at debian-devel, and he asked if anyone knows about such an effort, or
  has comments on his proposal.  The discussion went into all kinds of
  directions, but the consensus was that this is a useful idea.
  Bernhard [wrote] about work being done for the EasyGpg2016 project.
  They produced [user archetypes and stories] that should guide the
  refinement of GnuPG and related tools, and a [key distribution
  concept].
  [asked]
    [taken to the bug tracker]   [announcement]
    [reported]
    [wrote]
    [user archetypes and stories]
    [key distribution concept]
    We received this year until now about 90 donations summing up to 3000
  Euro.  Thanks for that help.  Sure, that is not enough to pay our
  costs, but fortunately we still have enough money in our accounts to
  keep bread, water, and beer on our tables for this year and somewhat
  longer.  We will eventually run a new donation campaign, though.
  It is probably less know that that we offer SEPA payments which can be
  used for recurring donations.  We have not received many payments
  through SEPA yet and thus this method is only semi-automated and the
  cause for delays between a donation and a confirmation mail.  There is
  an obvious way to make us automate this ;-)
  Lastly, let us confirm that we were meanwhile able to clarify our
  perceived problem with the Facebook donation promise.  This was all
  due to an unfortunate misunderstanding between us.  Facebook will keep
  on supporting GnuPG in 2016 with a donation of 50000 USD.
About this news posting
  We try to write a news posting each month (though we must admit that
  we slipped a little in 2016).  However, other work may have a higher
  priority (e.g. security fixes) and thus there is no promise for a
  fixed publication date.  If you have an interesting topic for a news
  posting, please send it to us.  A regular summary of the mailing list
  discussions would make a nice column on this news.
[1] Daniel Genkin, Lev Pachmanov, Itamar Pipman, Eran Tromer, ECDH
key-extraction via low-bandwidth electromagnetic attacks on PCs,
proc. RSA Conference Cryptographers' Track (CT-RSA) 2016, LNCS 9610,
219-235, Springer, 2016, [
[2] Lachlan J. Gunn, Andrew Allison, Derek Abbott, Verifying public
keys without trust: How anonymity can guarantee data integrity, arXiv
preprint arXiv:1602.03316, 2016,

@_date: 2016-10-04 11:00:52
@_author: Justus Winter 
@_subject: API documentation for Python GpgMe bindings? 
Hello :)
note that pygpgme is an entirely different project.
Note that 'pyme' as available from MacPorts is likely the old pyme.  You
can grab and build the new 'pyme3' bindings from pypi, provided that you
do have all the build dependencies.  I'm not familiar with MacPorts, but
that might help with that.
(Despite the name, 'pyme3' also works with Python 2.7.  Originally, it
was only for Python 3, but we backported it.  'pyme3' was the working
title, and it helps to differentiate between the old and the new
No, unfortunately not at this point.
'pyme3' has a high-level api with curated docstrings.

@_date: 2016-10-13 11:33:32
@_author: Justus Winter 
@_subject: Private key export for SSH 
Hi John :)
John, can you please tell us which version of GnuPG you are using, and
just to be sure, also check that
  gpg-connect-agent 'getinfo version' /bye
prints the expected version number?

@_date: 2016-09-19 11:11:39
@_author: Justus Winter 
@_subject: Call gpg with gpgme 
Please reconsider.  Your code may work today, but if you are not using
gpgme, it will likely break in the future.

@_date: 2016-09-30 14:37:31
@_author: Justus Winter 
@_subject: gpg: signing failed: Inappropriate ioctl for device Error Message 
please don't drop the mailing list when replying.
No.  You were asking if anyone else has encountered the issue, and I
replied by pointing you to the bug report of someone who also
encountered the issue.
The problem is that either there is no graphical pinentry, or there is,
but it cannot execute e.g. due to DISPLAY not being set, *and* the
fallback pinentry failed to open the terminal due to the fact that stdin
of the gpg process is not connected to a terminal.  The latter can
happen for example when gpg is used in a pipe.

@_date: 2017-04-11 13:14:13
@_author: Justus Winter 
@_subject: GPA bug report 
Werner filters out all mail containing html, so this will not reach
him.  Why not simply attach the image to a plain/text mail?  Or even
better, report a bug at

@_date: 2017-02-13 11:46:01
@_author: Justus Winter 
@_subject: Problems with GPGME1.8 and Python 3.5 bindings 
Hi :)
gpgme_pubkey_algo_string is new in GPGME 1.7.  This suggests that the
version 1.8 that you built is not picked up.  How you resolve that is
really up to you and your needs.  You could for example add the
$your_install_prefix/lib to LD_LIBRARY_PATH in your bin/activate script.

@_date: 2017-02-14 11:28:07
@_author: Justus Winter 
@_subject: Questions about --throw-keyids 
I don't.  I strongly believe that adding command line switches should be
the absolute last resort.

@_date: 2017-02-14 16:56:42
@_author: Justus Winter 
@_subject: Questions about --throw-keyids 
I have none, and tbh I did not even thought this through.  However...
... while adding another option may fix every small problem at hand, it
creates a huge one that is even harder to fix: We have way too many
options already.

@_date: 2017-02-16 10:12:36
@_author: Justus Winter 
@_subject: GPG homedir path length limit 
That is still wrong.  The length of the path of the socket is not
limited in any way, the length of the path passed to connect is.
I still believe we could have/should have made it just work with any
home directory.

@_date: 2017-02-16 15:27:11
@_author: Justus Winter 
@_subject: Problems with GPGME1.8 and Python 3.5 bindings 
How is that related to your problem?
Yes, there are plans.  There currently is no documentation, because we
wanted to find a solution that would cover GPGME as well as all
bindings.  Last year we spoke about that at one of our hackathons, and
decided to give Sphinx a shot.
Help is always needed.  However, the first step is to integrate Sphinx
in our build system.  If you feel up to that, great!  We'd need a DCO
From you.  If you wanted to write documentation, also great, but that is
not what we need right now.
PS: You wrote almost the same mail yesterday.  That is not helping...

@_date: 2017-02-17 10:42:14
@_author: Justus Winter 
@_subject: GPG homedir path length limit 
Well, I tested it on all systems I had access to at that time.  I could
have written a small test program, and asked people to run it on systems
we don't have access to.  But we never got to that point :(
Yes.  And iirc I went over why we use getsockname and figured that we
could do away with them.

@_date: 2017-01-24 11:53:55
@_author: Justus Winter 
@_subject: tofu: Missing entry in the bindings table for new key 
Can you please describe in detail what you were doing so that we can
recreate the problem?  You can create a throwaway environment for
experimentation by setting the environment variable GNUPGHOME to a
temporary directory, like so (assuming a Bourne-like shell):
  $ export GNUPGHOME=$(mktemp -d)
  $ gpg -k
  [nothing]
Note that you need to copy your gnupg configuration over, or at least
configure the trust model.

@_date: 2017-01-24 11:46:16
@_author: Justus Winter 
@_subject: pyme3 for Windows 
Actually, we renamed them to 'gpg', and the current version is 1.8.0.
We cross-compile all our software for Windows using MinGW.  We don't
build the Python bindings though.  If anyone manages to do that, please
share your findings.

@_date: 2017-01-24 13:22:15
@_author: Justus Winter 
@_subject: pyme3 for Windows 
Gpg4Win uses MinGW, Cygwin is out of scope for us imho.
However, I believe the question is whether or not we can load a shared
library compiled with MinGW into the Python process (however that is
built, I don't know).

@_date: 2017-01-24 13:55:45
@_author: Justus Winter 
@_subject: tofu: Missing entry in the bindings table for new key 
Thanks for the nice report.  I have been able to reproduce it and have
created  for it.
It is affecting master as well.
(: Justus

@_date: 2017-07-06 14:01:34
@_author: Justus Winter 
@_subject: Questions using GPGME 
Hi :)
This is indeed a shortcoming of the Python bindings.  I will address this.
Maybe.  GPGMEError is a very general error, this is a bit of pyme
legacy.  You can inspect the error code using .getcode().  For a quick
check, try to str() the error.

@_date: 2017-07-06 16:01:47
@_author: Justus Winter 
@_subject: Questions using GPGME 
Well, then it is not python-gpg's fault, but the underlying library or
components do not differentiate that.
I'm not.  If you feel that this is important, please file a bug.

@_date: 2017-06-21 14:24:14
@_author: Justus Winter 
@_subject: Key corruption: duplicate signatures and usage flags 
gpg --version please?
I tend to do: $ export GNUPGHOME=$(mktemp -d)
What are the capabilities of your primary key supposed to be?
Not sure, but anyone can append stuff to your key on the keyservers.
Maybe some faulty software reordered the packages and uploaded it?
This is odd indeed.

@_date: 2017-06-21 15:10:52
@_author: Justus Winter 
@_subject: Key corruption: duplicate signatures and usage flags 
Here  ^ is the keyserver url.
And these are the labels for these urls.  This was a cosmetic problem
that I just fixed.

@_date: 2017-06-22 17:00:03
@_author: Justus Winter 
@_subject: Key corruption: duplicate signatures and usage flags 
Interesting.  Thanks for clarifying.
No, it does (should) not harm.  Future versions of GnuPG will check and
clean keys automatically when (re-)fetching them from keyservers.

@_date: 2017-03-27 13:10:26
@_author: Justus Winter 
@_subject: Parallel decrypts fail in 2.1.19 
Can you please check which version of libgcrypt the agent is linked to?
E.g. by using 'otool':
$ otool -L repos/gnupg/obj/agent/gpg-agent
        /Users/justus/local/lib/libgcrypt.20.dylib (compatibility version 22.0.0, current version 22.3.0)
        /Users/justus/local/lib/libgpg-error.0.dylib (compatibility version 21.0.0, current version 21.0.0)
        /Users/justus/local/lib/libassuan.0.dylib (compatibility version 8.0.0, current version 8.3.0)
        /Users/justus/pkg/lib/libnpth.0.dylib (compatibility version 1.0.0, current version 1.5.0)
        /Users/justus/pkg/lib/libiconv.2.dylib (compatibility version 8.0.0, current version 8.1.0)
        /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1238.0.0)
Are you building GnuPG yourself?

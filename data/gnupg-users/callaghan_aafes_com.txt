
@_date: 2002-05-15 16:54:01
@_author: Callaghan, Brian 
@_subject: error: can't mmap pool 
Greetings-- I also get the same error when trying to run the make on an OS
390 2.10 USS system.  Anything thoughts / ideas to how to get around?
Whatever I do with GnuPG i get the following error: gpg: can't mmap pool of
16384 bytes: Invalid argument - using malloc I have just upgraded from 1.0.6
to 1.0.7. Because of this "Invalid argument" I guess there must be something
in my options file that bothers gpg: Never doubt that a small group of thoughtful, committed people can change
the world - indeed it is the only thing that ever has. - Margaret Mead Brian A. Callaghan
HQ AAFES IS-TS

@_date: 2002-05-15 21:59:02
@_author: Callaghan, Brian 
@_subject: error: can't mmap pool 
I started trying with 1.0.7 and will go back and retry 1.0.6 am also seeing
if I can get it to run on AIX.
Thanks- Brian
-----Original Message-----
Sent: Wednesday, May 15, 2002 1:33 PM
On Wed, 15 May 2002 09:53:53 -0500, Callaghan, Brian said:
Something is wrong with the detection of a working mmap or we are
using it wrongly in gpg.  Malloc is used as a fallback.
The problem _might_ be that MAP_ANONYMOUS is not supported nut defined
in the header file.  An strace should help to investigate this.
Did it work with 1.0.6?
  Werner
Gnupg-users mailing list

@_date: 2002-05-16 16:39:01
@_author: Callaghan, Brian 
@_subject: error: can't mmap pool 
This did appear to do the trick.  Thank you-- -----Original Message-----
Sent: Thursday, May 16, 2002 2:15 AM
On Wed, 15 May 2002 14:59:03 -0500, Callaghan, Brian said:
No need to go back, I just checked that the code did not change from
I'd appreciate to see an strace or replace the function util/secmem.c:init_pool with that instrumented code:
static void
init_pool( size_t n)
    size_t pgsize;
    poolsize = n;
    if( disable_secmem )
   HAVE_GETPAGESIZE
    pgsize = getpagesize();
      pgsize = 4096;
     HAVE_MMAP
    poolsize = (poolsize + pgsize -1 ) & ~(pgsize-1);
     MAP_ANONYMOUS
       log_debug ("secmem: using anonymous mapping (%lu,%lu,%d,%d)\n",
                   (unsigned long)pgsize,
                   (unsigned long)poolsize, MAP_PRIVATE, MAP_ANONYMOUS);
       pool = mmap( 0, poolsize, PROT_READ|PROT_WRITE,
     /* map /dev/zero instead */
    {	int fd;
            log_debug ("secmem: using /dev/zero mapping (%lu,%lu,%d,%d)\n",
                       (unsigned long)pgsize,
                       (unsigned long)poolsize, MAP_PRIVATE, fd);
    }
        if( pool == (void*)-1 )
    else {
    }
      if( !pool_okay ) {
    }
    lock_pool( pool, poolsize );
    poollen = 0;
  Werner
Gnupg-users mailing list

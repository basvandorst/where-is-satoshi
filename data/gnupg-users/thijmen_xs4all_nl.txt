
@_date: 2002-12-03 01:52:02
@_author: 5468696A6D656E 
@_subject: gpg --gen-key --batch 
First of all: nice new website :-)
Real question:
Is there a way to handle passphrases starting with space or
ending with space in batch mode keygeneration?
Bonus question:
And i read on the website this:
"One of our project goals is just that: to sell copies of
GnuPG in order to partially finance our work."
Is it allready clear how that will manifest itself to me as a user,
or to developers? If so, please enlighten me :-)
(page i am referring to is  )

@_date: 2002-12-03 11:31:01
@_author: 5468696A6D656E 
@_subject: [ Problem with timestamp ] 
Maybe than one of you has the wrong timezone set? Which OS do you two have?

@_date: 2002-12-08 19:21:01
@_author: 5468696A6D656E 
@_subject: DBG messages in release and some bugs(?) 
Should i get this DBG messages in a release binary?
gpg --batch --keyserver search.keyserver.com --search-keys test@
gpg: WARNING: using insecure memory!
gpg: please see  for more information
gpg: searching for "test from HKP server search.keyserver.com
gpg: DBG: increasing temp iobuf from 8192 to 16384
gpg: DBG: increasing temp iobuf from 16384 to 24576
gpg: DBG: increasing temp iobuf from 24576 to 32768
gpg: DBG: increasing temp iobuf from 32768 to 40960
gpg: DBG: increasing temp iobuf from 40960 to 49152
gpg: DBG: increasing temp iobuf from 49152 to 57344
gpg: DBG: increasing temp iobuf from 57344 to 65536
gpg: DBG: increasing temp iobuf from 65536 to 73728
Note that if i do "gpg --batch --keyserver wwwkeys.nl.pgp.net --search-keys test search on a pks keyserver, gpg will
incorrectly return me:
gpg: searching for "test from HKP server wwwkeys.nl.pgp.net
gpg: key "test not found on keyserver
while it should say something like:
Number of keys in reply (3100) exceeded maximum allowed (300) Try a more specific query. And in batch mode, is it possible to instead of printing:
"gpg: Sorry, we are in batchmode - can't get input", and exiting,
to actually print the whole listing? (and let the caller program
decide which to pick)
Especially because choosing a number in a listing doesn't seem to work:
on a openkeyserver (search.keyserver.com) with a win32 client:
(bsd clients seems to do this fine)
Enter number(s), N)ext, or Q)uit > 4
gpg: socket read error: ec=10054
gpg: no valid OpenPGP data found.
gpg: read_block: read error: invalid packet
gpg: Total number processed: 0

@_date: 2002-12-08 21:14:02
@_author: 5468696A6D656E 
@_subject: DBG messages in release and some bugs(?) 
Can't use 1.3.x :-( Must use stable versions.
Is there a way to get the fingerprint on the --search-keys command?
(it tried the obvious --with-fingerprint)

@_date: 2002-12-08 22:47:01
@_author: 5468696A6D656E 
@_subject: DBG messages in release and some bugs(?) 
Sorry, i misunderstand i think. Doesn't
give a fingerprint?

@_date: 2002-11-09 16:16:02
@_author: 5468696A6D656E 
@_subject: How to send passphrase to gpg with symetric encryption? 
This might be the solution:
echo 1234   >1
echo "1234" >2
echo "1234">3
echo 1234>4
will all give different files in dos, (tested on win98 dos, compared
the output with a hexeditor) where unix and linux will trim
the echo, dos won't do that.
So your command should be: "echo 1234| gpg etc"
instead of "echo 1234 | gpg etc"
(hope i helped you get rid of the more insecure situation)

@_date: 2002-10-16 15:38:05
@_author: 5468696A6D656E 
@_subject: Lesser GPL for gnume 
Why not have the Lesser GPL for gnume? Or even for gnupg?
If this logical discussion had been asked before, please forward me the answer. I din't go too deep in the mailinglist

@_date: 2002-10-22 11:20:02
@_author: 5468696A6D656E 
@_subject: How to send passphrase to gpg with symetric encryption? 
If that is your goal, don't mind the insecure situation in the batch files,
what about the insecure situation that people need to store their secret
key on a *webserver* ? Are people willing to do that?

@_date: 2003-04-22 19:43:01
@_author: 5468696A6D656E 
@_subject: decryption failed: secret key not available 
try this:
echo $PGPPASS| gpg -v -v --passphrase-fd 0 --no-default-keyring -r
note that the pipe sign ("|") is directly behind the passphrase.

@_date: 2003-04-22 22:01:02
@_author: 5468696A6D656E 
@_subject: decryption failed: secret key not available 
To test this kind of output i made this tiny program:
  int main(int argc, char *argv[])
  char buffer[1024];
  int size;
  fgets(buffer, 1024, stdin);
  size = strlen(buffer);
  if (size > 0 && buffer[size - 1] == '\n')
  {
    printf("stripping linefeed\r\n");
    buffer[size - 1] = '\0';
  }
  if (size > 1 && buffer[size - 2] == '\r')
  {
    printf("stripping carriage return\r\n");
    buffer[size - 2] = '\0';
  }
  printf("Passphrase (quoted): \"%s\"\r\n", buffer);
On windows 98 SE this is the output:
T:\stdincheck\Debug>echo blaa|stdincheck.exe
stripping linefeed
Passphrase (quoted): "blaa"
T:\stdincheck\Debug>echo blaa    | stdincheck.exe
stripping linefeed
Passphrase (quoted): "blaa    "
T:\stdincheck\Debug>echo "blaa"  | stdincheck.exe
stripping linefeed
Passphrase (quoted): ""blaa"  "
See the differences? As Gpg cannot know whether a quote character
is part of the passphrase you need to send it unquoted, and
without any space before the | pipesign.

@_date: 2003-01-02 14:17:03
@_author: 5468696A6D656E 
@_subject: Receiving a key on standard output 
when i do a:
gpg --keyserver wwwkeys.nl.pgp.net --recv-key 84321DED
it will wirte it directly to my public keyring
How can i make it so it writes the asci armoured key to standard
out, so i will be able to check it before i --import it to
my public keyring? Any help would be appriciated.

@_date: 2003-01-02 14:55:01
@_author: 5468696A6D656E 
@_subject: Receiving a key on standard output 
I felt i had to clarify this a bit. I am not looking for the option --search-key
because that requires interaction. Here is what i do now, and i hope some of you
could help me to make less steps to reach the same goal:
touch /tmp/tmpfile.gpg
gpg --keyserver wwwkeys.nl.pgp.net --homedir /tmp --keyring /tmp/tmpfile.gpg --batch --recv-key 84321DED
gpg: /tmp/secring.gpg: keyring created
gpg: /tmp/pubring.gpg: keyring created
gpg: requesting key 84321DED from wwwkeys.nl.pgp.net ...
gpg: key 84321DED: invalid subkey binding
gpg: key 84321DED: public key imported
gpg: /tmp/trustdb.gpg: trustdb created
gpg: Total number processed: 1
gpg:               imported: 1
rm -rf /tmp/secring.gpg /tmp/pubring.gpg /tmp/trustdb.gpg
gpg --homedir /tmp --keyring /tmp/bladir --list-sigs 84321DED > /tmp/84321DED
rm -rf /tmp/tmpfile.gpg
if i dont do step 1, it will put the file in /tmp/pubring.gpg, gpg doesn't create the file by itself
At 2) it creates the files secring.gpg. pubring.gpg and trustdb.gpg, even when specifying different
files with --keyring and --secret-keyring. Shouldn't it default to NOT create those files when you
specify files with different names?
Basically, what i will do after this is a gpg --with-colons --batch /tmp/84321DED and ask the
user after this output whether he/she wants to import it.

@_date: 2003-06-05 13:32:01
@_author: 5468696A6D656E 
@_subject: gnupg.mo 
Under dos-like systems, the way to set the locale is to rename .mo
to gnupg.mo But what if i want to use different languages?
Why not have an option --language, or that it uses (just like the posix version)
the environment variable LANGUAGE ?
What's against it?

@_date: 2003-06-19 16:14:03
@_author: 5468696A6D656E 
@_subject: Removing extranious subkey signings 
At You can find a version of my key. Of the bottom of that page there are several
signatures (with different dates) of subkeys which i got by re-importing my public key
from faulty keyservers. (don't remember which ones)
Gpg seems to filters those, (at least i never see those signatures), but is there
an easy way to remove those extranious subkey signatures?

@_date: 2003-03-18 17:35:02
@_author: 5468696A6D656E 
@_subject: --clearsign with file containing -- 
If i clearsign a file containing the following:
the resulting file contains this:
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
- -1

@_date: 2003-03-18 19:30:01
@_author: 5468696A6D656E 
@_subject: --clearsign with file containing -- 
Thanks for pointing me out to that option, but it doesn't suit my need ei=
ther :-)
I now avoid it, by using --detach-sign, and i reconstruct input and outpu=
t into
a pgp/mime message. Since the content of a pgp/mime signed message
can contain multipart mime, and thus a boundary (which could contain more=
 than
5 dashes), which has to remain intact.
Only problem left is how i can know which hash is used when i
execute --detach-sign.=20
Using --status-fd does not show the hash either.
Only thing i can think of is this:
gpg -a --clearsign -o output input
(get the used hash from the Hash: header)
gpg -a --detach-sign -o output input
(use hash, input and output to construct a rfc 3156 signature)
Am i missing something obvious to make this easier?
__Thijmen Klok________

@_date: 2003-03-19 12:27:02
@_author: 5468696A6D656E 
@_subject: --clearsign with file containing -- 
Great! I was even able to find what it meant in cipher.h :-)
Look for " DIGEST_ALGO_" in cipher.h (for people who
want to do the same)

@_date: 2004-01-30 17:54:29
@_author: 5468696A6D656E 
@_subject: error (and memory leak?) 
On this command:
"C:\Program Files\gpg\gpg.exe" --no-default-keyring --ignore-time-conflict --yes --always-trust --no-options --homedir "C:/WINDOWS/Application Data/GnuPG" --sign-key -u 87654321 I always get this error (from util/ttyio.c, line 138)
gpg: fatal: open(CONOUT$) failed: rc=120secmem usage: 1408/1408 bytes in 2/2 blocks of pool 1408/32768
I found this old mail which seems to have the same error:
Anyone seen this first hand?
Additionally: The memory used to print this error on my screen seems not to get cleared:
Detected memory leaks!
Dumping objects ->
d:\programming languages\vc98\include\crtdbg.h(552) : {1139} normal block at 0x010C7B20, 129 bytes long.
 Data: <  pg: fatal: ope> 00 00 70 67 3A 20 66 61 74 61 6C 3A 20 6F 70 65 Object dump complete.
Allthough gpg has in the above command pipes around it, this isn't a problem
for gpg usually. Host Os doesn't seem to matter, other command used in the same way (but with --batch in the
arguments) work nicely and predictable with pipes around gpg.
Experimenting with --no-tty gives:
gpg: Sorry, no terminal at all requested - can't get input
Additionally, when i use --command-fd 28 --status-fd 40 (those
are the actual file descripters of my pipes) i get the same error.
What am i doing wrong here?

@_date: 2004-01-31 15:36:13
@_author: 5468696A6D656E 
@_subject: error (and memory leak?) 
Looking closer to the routine init_ttyfp, shouldn't it use
command_fd in some way (if it's not -1) ? And to make the WIN32
code more similar to the unix code, why not also use fopen() there?
Doesn't the preferred compiler of gpg for win32 support fopen()?
Other parts of the code seem to use fopen() without any special
 for WIN32.
As for the actual error i got i found this at Windows Me/98/95:   The file system restricts CreateFile to creating or opening files; you cannot create or open the other objects mentioned above. See the topics referenced in See Also at the end of this reference page for more information on which of these facilities are available on these systems, and how to access them
So it looks like it's a bug to use CreateFile to open a screen buffer.
(since it's not supported on all platforms) And not using command_fd
may also be a bug for all platforms. (maybe someone with a better understanding of the
code than me can take a look at that)
 Th.

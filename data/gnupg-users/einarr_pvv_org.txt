
@_date: 2012-02-05 14:20:14
@_author: Einar Ryeng 
@_subject: Decryption fails with Crypto Stick + GnuPG 2.0.18 
I'm having trouble with GnuPG 2.0.18 and Crypto Stick on Debian
unstable. My key is a 4096 bit RSA key where only subkeys reside on
the Crypto Stick, while the private main key is kept offline.
With this setup I get the following symptoms:
 - gpg2 --card-status works as expected
 - Signing works fine with gpg2
 - SSH integration works fine
 - Decryption FAILS with gpg2
 - However, gpg 1.4 decrypts fine, provided I first kill scdaemon.
The output from gpg2 is not overly helpful:
einarr at barium:~/gpgtest$ LANG=en gpg2 passwd.gpg gpg: can't connect to the agent - trying fall back
gpg: encrypted with 4096-bit RSA key, ID 9A6EE054, created 2011-12-14
      "Einar Ryeng "
gpg: public key decryption failed: General error
gpg: decryption failed: No secret key
(btw, this is not related to the agent not running)
I suspect this might be a bug somewhere either in gpg2 or scdaemon.
Using the debug option on gpg2 did not give me anything useful. How
should I proceed to debug this? I'd guess that the line "decryption
failed: No secret key" means that gpg2 has asked scdaemon for that key
and got back a negative response. Can anyone confirm that they get this combination to work:
GnuPG 2.0.18, Crypto Stick (or for that matter any OpenPGP
smart card implementation) and 4096 bit keys?

@_date: 2013-12-01 12:45:10
@_author: Einar Ryeng 
@_subject: Any future for the Crypto Stick? 
The GPF Crypto Stick has been unavailable for months now, and I wondered if
anyone here has information on its future.
After the German Privacy Foundation apparently closed down this summer, I've
started getting worried that we've seen the end of what I consider the most
practical hardware token for GPG.
Any news on the crypto stick (or similar initiatives) would be appreciated.

@_date: 2013-12-05 21:14:34
@_author: Einar Ryeng 
@_subject: Any future for the Crypto Stick? 
Thanks for the replies.
I've got some Crypto Sticks, so for my own use I'm covered for the time being,
but I was wondering what to recommend to friends who have been trying to buy
crypto sticks without luck for some time now.
Gemalto SIM USB adapter seems to be sort of the same thing as the Crypto Stick.
However, it is a bit more hassle to get a USB adapter and a smart card, cut the
card to fit etc.
The yubikey solution mentioned in the thread seems simpler in that regard, and
depening on your use, you may or may not be worried that NSA or some other
service has wrangled some kind of backdoor into it (which I doubt, except if
they've done it by compromising security standards). None the less I'd probably
opt for open solutions for my personal use just due to ethical/political
reasons, but would have no worries about using Yubico stuff at work.

@_date: 2013-12-07 11:29:32
@_author: Einar Ryeng 
@_subject: Any future for the Crypto Stick? 
AFAIK, the US has no import restrictions on cryptography, and the RSA patent
ran out years ago, so e.g. shop.kernelconcepts.de should be able to ship it to

@_date: 2013-12-09 14:52:52
@_author: Einar Ryeng 
@_subject: Simple encryption/decryption 
I may have misunderstood your post, but it seems like you're asking how to do
the most basic public key encryption/decryption operations in gpg. If so, you
probably want to read some of the documentation to become familiar with the
However, here are what I think you're asking for:
(assuming you want to encrypt something to someone else, and their key ID is
12341234, which it isn't)
gpg -e -a -r 12341234 somefile.txt
This will produce a file named somefile.txt.asc which is encrypted and
base-64-encoded to be friendly towards any FTP protocol settings.
To decrypt a file that is encrypted to you, type:
gpg somefile.txt.asc
or, if the encryption was done without -a
gpg somefile.txt.gpg
Both of these will decrypt the file and produce a file named somefile.txt,
provided that you have the private key they are encrypted to.
(The GnuPG executable is usually named just gpg on linux, I'm not sure what the
command is called if you're on another operating system)

@_date: 2013-07-15 11:20:00
@_author: Einar Ryeng 
@_subject: How to back up my key 
So far so good, with a couple of minor modifications. And i sort of agree with
you on the TrueCrypt stuff, it's always better if people just erase USB drives
they incidentally find. However, you probably shouldn't carry your keys around
like that anyway.
Not exactly flaws, but I would have done some minor changes/additions:
When you create a key pair, you create one master key and one or more subkeys.
The master key is the one that should be used only in a safe environment. This
key is used for operations on your private keys (revoking, making new subkeys,
etc) and for signing other people's keys. All of these are relatively
infrequent operations, except signing other keys which you propably will do
quite frequently until your key is well connected to those you communicate
with. Therefore:  1) 1 USB drive that will ONLY be used in the secure environment, containing
    your master key and all subkeys.
 2) A backup of 1), also ONLY for secure environment.
 3) A USB drive or some other means to transfer your subkeys for encryption and
    signing to your laptop.
If you suspect your laptop has been compromised, someone may have gained access
to your encryption and signing subkeys, which means that they can act as you.
Luckily, because your master key is safe, you can just revoke your subkeys and
create new ones. Your web of trust connections to anyone else will not be
affected, except that they need to fetch the new version of your keys from the
keyservers. On the other hand, if someone compromises your master key, you would
need to go another round signing people's keys.
To be a bit more paranoid, or to allow for using GPG on computers you don't
trust as much as your own laptop, you can use a hardware RSA implementation
like the CryptoStick from the German Privacy Foundation. These can contain keys
which cannot be extracted without physical access to the key and a quite
laborous process at a fairly decent electronics lab.
(Btw, you also want to create revocation certificates for your key when you make
it, just to be certain that you're able to revoke it if you should come to
lose either your key or your passphrase.)

@_date: 2013-07-16 10:54:56
@_author: Einar Ryeng 
@_subject: How to back up my key 
You don't really have to, though I prefer the added security and, at least
after you've set it up to work properly, the added conveninece of the Crypto
Stick. There are a couple of different scenarios here. If you've not used GPG after
the machine was compromised, you could in theory continue using the same
subkeys as before. However, the overhead of making new subkeys is small, so I'd
probably opt on the safe side and change them.
If you've been using GPG after the machine was compromised, you definately need
to make new subkeys (with a new passphrase of course) and transfer them to your
machine after reinstallation.
The smartcards (or CryptoStick, which is basically the same thing) is a
solution to this. Each card can have three subkeys, intended for use with
encryption, signing and authentication respectively. These can be created on
the card or (probably most common) generated on a secure computer and copied
onto the card. Now, the thing is that there is no interface for copying any of
the keys back out from the card. To use them you have to insert the card and
enter a pin code on the keyboard. All RSA encryption/decryption operations are
performed on the card.
Of course, the pin code could be sniffed and reused as long as the card is
plugged into the computer. However, the risk is reduced significantly compared
to storing the key files on the disk. The Crypto Stick also lights up when
used and also counts the number of signatures performed, so there is a good
chance you'd notice it quickly if you were under attack. No, at least no issues I'd bother to worry about. TrueCrypt is basically as
safe as your password, and your key is also password protected.
I would not put my private keys in the open. Even though I trust my passphrase,
there is a security bonus in having basically two security factors
(passphrase and the file). An example; camera surveillance of you typing your
passphrase would not be enough by itself to steal your identity if they also
need a way to get your private key. A good backup is to print the ASCII armoured export of your key on a sheet of
paper and keep it filed somewhere.

@_date: 2013-07-24 11:52:52
@_author: Einar Ryeng 
@_subject: Multiple email addresses - any alternative to ask everyone to 
I've never thought of this as an issue at all. Lots of people have several
keys, both due to different "identities" (private vs. corporate etc) or due to
periodic generation of new primary keys.
For me, the main obstacle when signing other people's keys is actually to
bother to sit down and boot into my secure environment with my primary keys.
Whether I sign one or ten keys once I'm in isn't really an issue.
Also, I tend to disagree with some of the other replies on security that
recommends not using GPG anywhere except within a very secure environment. If
you're at a university, your university key should have at least the same
security as the environment the unencrypted data reside in. The fact that you
also have a private, corporate or military encryption key with other key
policies is irrelevant in that respect.
I'd just stick to three different keys if I were you. Nobody will care that
they have to sign three keys rather than one or two. But you could also look
into the OpenPGP smart card options if you want to simplify your keychain.

@_date: 2013-07-24 18:09:13
@_author: Einar Ryeng 
@_subject: Multiple email addresses - any alternative to ask everyone to 
My impression is that most people using more than one key do sign all keys with
all of their own keys. Otherwise some keys will be weaker in the web of trust,
putting some obstacles in the way of their usefulness. I've got one key I made a decade ago that is about to be revoked because my new
key is now well-enough connected for most of my purposes. While using two keys
I've had the habbit of signing other people's keys with both of them.
However, this means that you don't lose any power in validating other keys if
you only put ownertrust on any one of my keys as they are more or less
equivalent, at least for the time period where they have all been in use.
Personally I prefer using people's personal (as opposed to business) keys for
this, though admittedly mostly by accident because I hadn't thought about the
case you just raised. My reasoning for this is that 1) it is primarily the
_person_ I trust, not e.g. his employer, and 2) a personal key is more likely
to have a long life as people generally seem to change jobs more often than PGP

@_date: 2013-11-27 20:56:44
@_author: Einar Ryeng 
@_subject: Decrypting symmetrically encrypted text in Command Line (CL) 
It would surprise me if that wasn't possible.
I'm guessing that one of two things is happening here, due to the use of STDIN
both to provide the encrypted message and as the way to enter the password:
1) Some buffer gets full and gpg asks for the password to start processing the
encrypted input. The next line of input is then taken to be the password, which
is obviously wrong.
2) The CR/LF line endings in windows is confusing the data/password input in
gpg. As I couldn't reproduce your problem in linux, I'm leaning towards this
You can try giving the password on the command line.
However, I might add that I'm not able to reproduce the problem on linux and I
don't have any Windows computers at hand right now so this is just guesswork.

@_date: 2015-08-16 18:04:38
@_author: Einar Ryeng 
@_subject: protecting pub-keys from unwanted signatures 
What harm do your see in "fake" signatures? There is a possibility of someone
making your key excessively large to download by adding tons of signatures to
it. If that happens, the correct place to fix it is probably the keyserver
code. Your "signed signatures" proposal would not inherently eliminate this
problem; Alice would still need to make a signature on Bob's key and upload it
to the server in order to allow Bob to download and sign the signature.
Is there any other problem arising from someone signing your key without
If you only want this for decluttering purposes, you will probably achieve
something similar by only looking at mutually signed keys. It won't be exactly
same, because the keys then have signed each other directly rather than each
other's signature packets, but depending on your problem it may do the job for

@_date: 2015-06-01 22:17:33
@_author: Einar Ryeng 
@_subject: Facebook and OpenPGP 
Well, that comment seems to identify the two main groups you want to hide
information from as being Facebook and the US government. If that was true, you
probably wouldn't be on FB in the first place.
As I see it, the good stuff is:
- First and foremost: other websites might copy this. I'd love to see banks,
  insurance companies and anyone sending me invoices on email pick up on the
  idea.
- It will definately stop your local network administrator, your boss etc.
  from snooping your emails. Likely, it's also making it harder for any _other_
  government than the US to read your communications. - FB will be able to sign emails to the users who are interested in this
  security. Granted, people who know how to use encryption probably aren't
  easily fooled by phishing, but in some cases it may do targeted hacking
  just that tiny bit harder.
- The total flow of encrypted email will increase, hopefully eventually making
  intelligence agencies a bit more relaxed to the whole concept.
... and the bad stuff is next to nothing. Anyone not actively enabling this
option will likely never be bothered by it. Which would be the first step to
convincing other sites that this is a safe thing to do.

@_date: 2016-09-08 11:19:53
@_author: Einar Ryeng 
@_subject: How do you backup your private keys? 
Done. It would be nice if you could send an email notifying the list when you
publish the results.

@_date: 2017-07-19 10:35:45
@_author: Einar Ryeng 
@_subject: How to NOT gnutar files during encryption? 
Sounds like either a bug or a somewhat stupid default setting in Kleopatra
(which I have never used). A workaround on the receiving end could be to detect
that the file is a tar file and unpack it before further processing.
Something like this:
FILE_MIMETYPE=$(file -iN $FILENAME)
if [[ "$FILE_MIMETYPE" =~ "$FILENAME: application/x-tar; charset=binary" ]]
    tar xvf $FILENAME
As usual, du NOT run code from random people on the Internet.

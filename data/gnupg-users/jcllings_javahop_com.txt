
@_date: 2003-12-05 00:50:08
@_author: Jim C. 
@_subject: Question about the windows port 
Hash: SHA1
I am in a cross platform multi-user environment and I would like to know
if there are alterations that I can make to the install that will make
it user directory aware on 'Doze.  This is to say that I would like
individual user keys stored in the correct location for Windows users
who use the multi-user versions, (i.e. NT, 2K & XP).  Normally this
would be in the "%APPDATA%\GnuPG" directory where "%APPDATA%" is an
environment variable that is usually something like:
C:\Documents and Settings\[username]\Application Data
I can use a batch file that has something in it like this:
gpg --homedir="%APPDATA%\GnuPG"
which actually works.  Problem is that I can't get it to work right with
Mozilla Enigmail because it appends an ".exe" along with some other
issues. What about the gpg.conf file?  Is there something in there that
I can set?
Jim C.

@_date: 2003-12-06 00:23:18
@_author: Jim C. 
@_subject: gnupg feature request 
Hash: SHA1
I think it is safe to say that multi-user networked OS's are the future
even when it comes to Windoze. Right?
Is there any way, shape or form that I could convince GnuPG developers
to make the Windoze version of GnuPG fully multi-user?  As things
currently stand, the binarys do not seem to retrieve settings of any
sort from the Windows environment and, consequently, are not aware of
default locations for storing key rings and settings. I can use
gpg.exe --homedir "%APPDATA%"\GnuPG
gpg.exe --homedir "%HOMEDRIVE%%HOMEPATH%"\.gnupg
from the command line but there are programs such as Enigmail that use
GnuPG for encryption and all the keys wind up in a central repository
where all of the users can see the private keys.  From a
security/administrative viewpoint this is decidedly less than ideal.
Note that I've also tried specifying the environment variables above in
the registry settings but they are not expanded properly when the
binary's are executed.
Thanks! :-)
Jim C.

@_date: 2003-12-07 22:15:47
@_author: Jim C. 
@_subject: gnupg feature request 
Hash: SHA1
I found part of the problem but there is still a pretty big bug
somewhere.  Apparently I've been forgetting to check and make sure what
user the window belongs to before testing.  Regardless, I've still got a
problem though.
Also I would like to mention the following:
While I am using the version that comes from Nulify, with the windows
based version that is not from Nullify you get registry settings as follows:
[HKEY_CURRENT_USER\Control Panel\Mingw32]
[HKEY_CURRENT_USER\Control Panel\Mingw32\NLS]
[HKEY_CURRENT_USER\Control Panel\Mingw32\NLS]
This second version came from the website Wren mentioned, i.e.
"gpgProgram"="C:\\PRogram Files\\GnuPG\\gpg.exe"
[HKEY_CURRENT_USER\Control Panel\Mingw32]
[HKEY_CURRENT_USER\Control Panel\Mingw32\NLS]
"MODir"="C:\\Program Files\\GnuPG\\Locale"
Why does the first version use HKEY_LOCAL_MACHINE to store HomeDir and
the second uses HKEY_CURRENT_USER.  Which is correct?  My testing shows
that deletion of [HKEY_CURRENT_USER\Software\GNU] and subsequent use of:
Windows Registry Editor Version 5.00
"HomeDir"="C:\\Documents and Settings\\jhondoa\\Application Data\\GnuPG"
"gpgProgram"="C:\\PRogram Files\\GnuPG\\gpg.exe"
Eliminated the problem for user jhondoa:
C:\Documents and Settings\jhondoa>gpg --list-keys
C:\Documents and Settings\jhondoa\Application Data\GnuPG\pubring.gpg

@_date: 2003-12-07 22:21:48
@_author: Jim C. 
@_subject: gnupg feature request 
Hash: SHA1
Note this part of the docs (README.W32):
4. If you did not use the default directory "c:\gnupg", you
~    should enter a string with the directory into the Registry
~    under the key:
~    (you probably need to create the keys GNU and GnuPG) and insert a
~    new string under the name "HomeDir" with the value of the default
~    directory you want to use.  Please use forward slashes and not the
~    backslashes when setting filenames for GnuPG into the Registry.
According to what I've found, this would be incorrect. It should be
HKEY_LOCAL_MACHINE unless there is something I've missed.

@_date: 2003-12-08 08:59:51
@_author: Jim C. 
@_subject: gnupg feature request 
Hash: SHA1
Cool!  I didn't know that could be done.  I'll give it a try. :-)
Should also work on XP Pro.
Jim C.

@_date: 2003-12-08 09:22:31
@_author: Jim C. 
@_subject: gnupg feature request 
Hash: SHA1
I didn't know that... let me try...
Eureka!!! That worked like a charm! :-)
Thanks! :-)
Here is the output of a registry export for an XP Pro box for anyone who
wants it.
Windows Registry Editor Version 5.00
"gpgProgram"="C:\\Program Files\\GnuPG\\gpg.exe"
~  47,00,6e,00,75,00,50,00,47,00,00,00
This should store the keys in %APPDATA%\GnuPG which usually translates
into something like, C:\Documents and Settings\username\Application
Note that you may get errors if this directory does not exist.
If you want to do it by hand, type "regedit" in at the command line or
from Start | Run.  Then proceed to [HKEY_LOCAL_MACHINE\SOFTWARE\GNU] and
rename the old setting to HomeDir.old  Now right click on the pane on
the right hand side and select New | Expandable String.  Name it HomeDir
and give it a value of "%APPDATA%\\GnuPG" (without the quotes). Last,
check to make sure you know who you are logged in as (XP Pro lets you
open terminal windows as other users like Linux does... well sort of.)
Test run from the command line:
First check to see who I am:
C:\Documents and Settings\jhondoa>ECHO %USERNAME%
Next test to see if gnupg knows where they keys are:
C:\Documents and Settings\jhondoa>gpg --list-keys
C:\Documents and Settings\jhondoa\Application Data\GnuPG\pubring.gpg

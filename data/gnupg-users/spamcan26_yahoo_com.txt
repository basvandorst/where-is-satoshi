
@_date: 2006-10-30 01:11:00
@_author: Dead Loss 
@_subject: gpgkeys_hkp: error while loading shared libraries: libcurl.so.3: 
I have downloaded GnuPG-1.4.5 and successfully built it using ./configure ?prefix=/usr/mylocal ?libdir=/usr/local/lib \
?includedir=/usr/local/phplibs/include/ ?with-libiconv-prefix=/usr/local/phplibs
as I do not have root access to my machine, but when I try to connect to pgp.mit.edu I get the following error
[mylogin][~]$ gpg ?keyserver pgp.mit.edu ?recv-keys 0?985A444B
gpg: requesting key 985A444B from hkp server pgp.mit.edu
libraries: libcurl.so.3: cannot open shared object file: No such file
or directory
gpg: no handler for keyserver scheme `hkp?
gpg: keyserver receive failed: keyserver error
What have I done wrong?  Obviously gpgkeys_hkp is not able to resolve the library at run time, but how to fix this?
I had to edit keyserver/Makefile.am to get it to compile as it kept failing - could not find curl/curl.h (ksutils.c).  make[2]: Entering directory `/usr/home/mylogin/apps/dl/gnupg-1.4.5/keyserver'
if gcc -DHAVE_CONFIG_H -I. -I. -I.. -I../include -I../intl    -g -O2 -Wall -MT gpgkeys_ldap-gpgkeys_ldap.o -MD -MP -MF ".deps/gpgkeys_ldap-gpgkeys_ldap.Tpo" -c -o gpgkeys_ldap-gpgkeys_ldap.o `test -f 'gpgkeys_ldap.c' || echo './'`gpgkeys_ldap.c; \
then mv -f ".deps/gpgkeys_ldap-gpgkeys_ldap.Tpo" ".deps/gpgkeys_ldap-gpgkeys_ldap.Po"; else rm -f ".deps/gpgkeys_ldap-gpgkeys_ldap.Tpo"; exit 1; fi
In file included from gpgkeys_ldap.c:47:
ksutil.h:26:23: curl/curl.h: No such file or directory
make[2]: *** [gpgkeys_ldap-gpgkeys_ldap.o] Error 1
make[2]: Leaving directory `/usr/home/mylogin/apps/dl/gnupg-1.4.5/keyserver'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/usr/home/mylogin/apps/dl/gnupg-1.4.5'
make: *** [all] Error 2
I moved these definitions to the end and added $(gpgkeys_curl_CPPFLAGS)
gpgkeys_ldap_CPPFLAGS =  $(gpgkeys_curl_CPPFLAGS)
gpgkeys_ldap_LDADD = ../util/libutil.a   $(other_libs)  gpgkeys_finger_LDADD = ../util/libutil.a  $(other_libs)

@_date: 2006-10-30 14:35:48
@_author: Dead Loss 
@_subject: gpgkeys_hkp: error while loading shared libraries: libcurl.so.3: 
Thanks for your reply.  I have started a fresh install and I still have the same issues
1. make uninstall to remove current installation
2. Download source from GnuPG.org
3. gunzip2 -c gnupg-1.4.5.tar.bz2|tar -xf
4. cd gnupg-1.4.5
5. ./configure --prefix=/usr/mylocal
6. make
All goes well until...
Making all in keyserver
make[2]: Entering directory `/usr/home/mylogin/apps/dl/gnupg-1.4.5/keyserver'
if gcc -DHAVE_CONFIG_H -I. -I. -I.. -I../include -I../intl    -g -O2 -Wall -MT gpgkeys_ldap-gpgkeys_ldap.o -MD -MP -MF ".deps/gpgkeys_ldap-gpgkeys_ldap.Tpo" -c -o gpgkeys_ldap-gpgkeys_ldap.o `test -f 'gpgkeys_ldap.c' || echo './'`gpgkeys_ldap.c; \
then mv -f ".deps/gpgkeys_ldap-gpgkeys_ldap.Tpo" ".deps/gpgkeys_ldap-gpgkeys_ldap.Po"; else rm -f ".deps/gpgkeys_ldap-gpgkeys_ldap.Tpo"; exit 1; fi
In file included from gpgkeys_ldap.c:47:
ksutil.h:26:23: curl/curl.h: No such file or directory
make[2]: *** [gpgkeys_ldap-gpgkeys_ldap.o] Error 1
make[2]: Leaving directory `/usr/home/mylogin/apps/dl/gnupg-1.4.5/keyserver'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/usr/home/mylogin/apps/dl/gnupg-1.4.5'
make: *** [all] Error 2
So I then tried 7, ./configure --prefix=/usr/mylocal -?with-libiconv-prefix=/usr/local/phplibs
8. make
9. make install
10. gpg --help
gpg: error while loading shared libraries: libiconv.so.2: cannot open shared object file: No such file or directory
---Reply --to Original Message----
Your configure statement pretty much broke autoconf's heart.  Try a
simple "./configure --prefix=/where/you/can/write/to" and leave it at
that.  Let autoconf work for you.
----- Original Message ----
Sent: Monday, October 30, 2006 12:12:23 AM
I have downloaded GnuPG-1.4.5 and successfully built it using ./configure ?prefix=/usr/mylocal ?libdir=/usr/local/lib \
?includedir=/usr/local/phplibs/include/ ?with-libiconv-prefix=/usr/local/phplibs
as I do not have root access to my machine, but when I try to connect to pgp.mit.edu I get the following error
[mylogin][~]$ gpg ?keyserver pgp.mit.edu ?recv-keys 0?985A444B
gpg: requesting key 985A444B from hkp server pgp.mit.edu
libraries: libcurl.so.3: cannot open shared object file: No such file
or directory
gpg: no handler for keyserver scheme `hkp?
gpg: keyserver receive failed: keyserver error
What have I done wrong?  Obviously gpgkeys_hkp is not able to resolve the library at run time, but how to fix this?
I had to edit keyserver/Makefile.am to get it to compile as it kept failing - could not find curl/curl.h (ksutils.c).  make[2]: Entering directory `/usr/home/mylogin/apps/dl/gnupg-1.4.5/keyserver'
if gcc -DHAVE_CONFIG_H -I. -I. -I.. -I../include -I../intl    -g -O2 -Wall -MT gpgkeys_ldap-gpgkeys_ldap.o -MD -MP -MF ".deps/gpgkeys_ldap-gpgkeys_ldap.Tpo" -c -o gpgkeys_ldap-gpgkeys_ldap.o `test -f 'gpgkeys_ldap.c' || echo './'`gpgkeys_ldap.c; \
then mv -f ".deps/gpgkeys_ldap-gpgkeys_ldap.Tpo" ".deps/gpgkeys_ldap-gpgkeys_ldap.Po"; else rm -f ".deps/gpgkeys_ldap-gpgkeys_ldap.Tpo"; exit 1; fi
In file included from gpgkeys_ldap.c:47:
ksutil.h:26:23: curl/curl.h: No such file or directory
make[2]: *** [gpgkeys_ldap-gpgkeys_ldap.o] Error 1
make[2]: Leaving directory `/usr/home/mylogin/apps/dl/gnupg-1.4.5/keyserver'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/usr/home/mylogin/apps/dl/gnupg-1.4.5'
make: *** [all] Error 2
I moved these definitions to the end and added $(gpgkeys_curl_CPPFLAGS)
gpgkeys_ldap_CPPFLAGS =  $(gpgkeys_curl_CPPFLAGS)
gpgkeys_ldap_LDADD = ../util/libutil.a   $(other_libs)  gpgkeys_finger_LDADD = ../util/libutil.a  $(other_libs)

@_date: 2006-10-30 16:44:47
@_author: Dead Loss 
@_subject: gpgkeys_hkp: error while loading shared libraries: libcurl.so.3: 
Have sent config.log file to dshaw at his jabberwocky address.  Shall I cross post here?

@_date: 2006-10-30 18:12:40
@_author: Dead Loss 
@_subject: gpgkeys_hkp: error while loading shared libraries: libcurl.so.3: 
I have downloaded GnuPG-1.4.5 and built it using ./configure ?prefix=/usr/mylocal ?libdir=/usr/local/lib
as I do not have root access to my machine, but when I try to connect to pgp.mit.edu I get the following error
[mylogin][~]$ gpg ?keyserver pgp.mit.edu ?recv-keys 0?985A444B
gpg: requesting key 985A444B from hkp server pgp.mit.edu
libraries: libcurl.so.3: cannot open shared object file: No such file
or directory
gpg: no handler for keyserver scheme `hkp?
gpg: keyserver receive failed: keyserver error
What have I done wrong?
I had to edit keyserver/Makefile.am to get it to compile as it kept failing - could not find curl/curl.h (ksutils.c).  I moved these definitions to the end and added $(gpgkeys_curl_CPPFLAGS)
gpgkeys_ldap_CPPFLAGS =  $(gpgkeys_curl_CPPFLAGS)
gpgkeys_ldap_LDADD = ../util/libutil.a   $(other_libs)  gpgkeys_finger_LDADD = ../util/libutil.a  $(other_libs)


@_date: 2004-11-18 15:36:55
@_author: =?ISO-8859-1?Q?=22Pr=E1gai=2C_R=F3bert=22?= 
@_subject: support for non-openpgp cards 
Hi Zeljko,
32k cards here and planned to make such a patch, too. You were the quicker:)
any other pkcs11 (e.g. opensc-pkcs11) library will do the job?
However, maybe there is no need for it if MUSCLE pkcs11 support works just fine...
Thanks for this patch,

@_date: 2004-10-23 10:55:01
@_author: =?ISO-8859-2?Q?=22Pr=E1gai=2C_R=F3bert=22?= 
@_subject: scdaemon with cryptoflex 
using it's pkcs15 structure created by opensc? I tried but gpg2 --card -status failed with various errors.
So, I have a working card, with a pkcs15 structure. I have successfully start the scdaemon, but it reports: can't lock card in reader 0: Generic reader error. When I restart openct, anther error appears as well: no supported card application found: Card error
  What can be the reason of this? Any suggestions?
zyx:/home/pragai/gpg/src/gnupg-1.9.11# opensc-tool -a
3B 95 18 40 FF 62 01 02 01 04 ;..
zyx:/home/pragai/gpg/src/gnupg-1.9.11# pkcs15-tool -k
Private RSA Key [Private Key]
         Com. Flags  : 3
         Usage       : [0x22E], decrypt, sign, signRecover, unwrap,          Access Flags: [0x1D], sensitive, alwaysSensitive, neverExtract,          ModLength   : 1024
         Key ref     : 0
         Native      : yes
         Path        : 3F0050154B0130450012
         Auth ID     : 01
         ID          : 45
zyx:/home/pragai/gpg/src/gnupg-1.9.11# eval `scdaemon --daemon`
scdaemon[9367]: NOTE: this is a development version!
zyx:/home/pragai/gpg/src/gnupg-1.9.11# gpg2 --card-status
gpg: NOTE: THIS IS A DEVELOPMENT VERSION!
gpg: It is only intended for test purposes and should NOT be
gpg: used in a production environment or with production keys!
gpg: DBG: connection to agent established
scdaemon[9371]: NOTE: this is a development version!
scdaemon[9371]: can't lock card in reader 0: Generic reader error
scdaemon[9371]: can't lock card in reader 0: Generic reader error
scdaemon[9371]: can't lock card in reader 0: Generic reader error
scdaemon: card.c:486: sc_unlock: El?felt?telez?s `card->lock_count >= 1' gpg-agent[9370]: command learn failed: Unknown system error
gpg: OpenPGP card not available: Assuan server fault
zyx:/home/pragai/gpg/src/gnupg-1.9.11# /etc/init.d/openct restart
Restarting smart card terminal framework: OpenCT1 process killed.
zyx:/home/pragai/gpg/src/gnupg-1.9.11# gpg2 --card-status
gpg: NOTE: THIS IS A DEVELOPMENT VERSION!
gpg: It is only intended for test purposes and should NOT be
gpg: used in a production environment or with production keys!
gpg: DBG: connection to agent established
scdaemon[9380]: NOTE: this is a development version!
scdaemon[9380]: no supported card application found: Card error
scdaemon[9380]: can't lock card in reader 0: Generic reader error
scdaemon: card.c:486: sc_unlock: El?felt?telez?s `card->lock_count >= 1' gpg-agent[9379]: command learn failed: Unknown system error
gpg: OpenPGP card not available: Assuan server fault


@_date: 2010-10-07 16:38:00
@_author: gnupg.20.miller_2555@spamgourmet.com 
@_subject: Selecting subkeys in batch mode 
Hi -
    I have a public key with two encryption subkeys (see note below). I am
attempting to clobber together a bash script to select a given subkey and
use that subkey for encryption. Using the following sample key and sample
script, `afile` is encrypted with subkey CCCCCCCC (and not the expected
BBBBBBBB subkey). Note that no matter what subkey register slot I provide to
`--edit-key` in the sample script, `gpg` always encrypts using the CCCCCCCC
subkey. How can I selectively use a given encryption subkey in a
noninteractive session?
    Sample public key:
        pub   4096R/AAAAAAAA 2009-08-11 [expires: 2020-12-31]
        uid                  Name (Comment)         sub   4096g/BBBBBBBB 2009-12-25 [expires: 2010-12-31]
        sub   4096R/CCCCCCCC 2010-09-25 [expires: 2010-11-30]
    Sample script:
                gpg --quiet --batch  --edit-key AAAAAAAA "key 1";  # Select subkey
BBBBBBBB (I also tried a value of "key 2")
        cat afile | gpg --quiet --batch  --hidden-recipient AAAAAAAA
--passphrase-file sfile --sign --encrypt -  > newfile;
Note: It was not my decision to use two encryption subkeys, but I've been
requested to use each under certain circumstances. Also, anyone the copies/
pastes the above code should avoid the use of the `--passphrase-file` option
as I am only using this in testing.
Many thanks.

@_date: 2017-08-01 20:42:41
@_author: gnupg.20.miller_2555@spamgourmet.com 
@_subject: GPGme operations with subkeys 
I have a couple encryption subkeys under my primary key. Each key is used for different applications (while I generally just use one subkey, the other is used when a specific application does not permit the use of that subkey).
I would like to select specific subkeys (gpgme_subkey_t) in GPGme to perform operations (eg. gpgme_op_encrypt(...), gpgpme_op_encrypt_sign(...), etc.), but only see a way to pass entire keys (gpgme_key_t) to those functions and rely on gpg to select the key (which does not always select the correct subkey).
I've been through the reference manual (edition 1.9.0, last updated Nov. 2016) and searched around a bit, including the mail list archives, but am I just missing a way to do this or does the functionality not yet exist?
Appreciate the time.

@_date: 2017-08-01 20:32:41
@_author: gnupg.20.miller_2555@spamgourmet.com 
@_subject: GPGme operations with subkeys 
I have a couple encryption subkeys under my primary key. Each key is used for different applications (while I generally just use one subkey, the other is used when a specific application does not permit the use of that subkey).
I would like to select specific subkeys (gpgme_subkey_t) in GPGme to perform operations (eg. gpgme_op_encrypt(...), gpgpme_op_encrypt_sign(...), etc.), but only see a way to pass entire keys (gpgme_key_t) to those functions and rely on gpg to select the key (which does not always select the correct subkey).
I've been through the reference manual (edition 1.9.0, last updated Nov. 2016) and searched around a bit, including the mail list archives, but am I just missing a way to do this or does the functionality not yet exist?
Appreciate the time.

@_date: 2017-08-02 23:05:33
@_author: gnupg.20.miller_2555@spamgourmet.com 
@_subject: GPGme operations with subkeys 
Thank you both very much, and I sincerely appreciate the thoughtful comments. Truly an example of the strength of the open source community. I look forward to the ongoing effort to expand functionality. Meanwhile, I'll maintain separate keyrings as a workaround (fortunately, trust relationships have already been built by the more commonly used subkey).

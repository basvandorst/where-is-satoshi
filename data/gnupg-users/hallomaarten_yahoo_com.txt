
@_date: 2018-01-02 13:43:25
@_author: Maarten Nieber 
@_subject: trouble listing keys in my private-keys-v1.d directory 
until today I was using gpg only for pass (the linux password manager). Today, I played around with gpg and now I have 2 problems:
1. I'm unable to list the key that is used for pass
To list the keys, I use: gpg --list-keys. Some new keys that I added today are there, but my previous key that I used for pass is not there.Fortunately, I am able to use this key, so it exists! The gpg password dialog (that pops up when I invoke pass) tells me that it's an openpgp key with ID 89F615FB.
When I run kbxutil --stats ~/.gnupg/pubring.kbx, it tells me that indeed there is 1 openpgp key:
Total number of blobs:? ? ? ? 2? ? ? ? ? ? ? ?header:? ? ? ? 1? ? ? ? ? ? ? ? empty:? ? ? ? 0? ? ? ? ? ? ? openpgp:? ? ? ? 1? ? ? ? ? ? ? ? ?x509:? ? ? ? 0? ? ? ? ? non flagged:? ? ? ? 1? ? ? ?secret flagged:? ? ? ? 0? ? ephemeral flagged:? ? ? ? 0
Looking at the file modification dates, I suspect that my previous key is stored in?private-keys-v1.d, but this key is for some reasonnot showing up when I run gpg --list-keys
~/.gnupg $ ls -altotal 168drwx------? 4 maarten maarten? 4096 Jan? 2 14:11 .drwx------ 68 maarten maarten 20480 Jan? 1 17:59 ..-rw-------? 1 maarten maarten? 2649 Mar? 5? 2017 dirmngr.conf-rw-------? 1 maarten maarten? 5191 Mar? 5? 2017 gpg.conf-rw-------? 1 maarten maarten? ? ?0 Mar? 6? 2017 .gpg-v21-migrateddrwx------? 2 maarten maarten? 4096 Mar? 5? 2017 openpgp-revocs.ddrwx------? 2 maarten maarten? 4096 Mar? 5? 2017 private-keys-v1.d-rw-------? 1 maarten maarten? 3607 Jan? 2 14:11 pubring.gpg-rw-------? 1 maarten maarten? 3607 Jan? 2 14:11 pubring.gpg~-rw-r--r--? 1 maarten maarten? 1362 Mar? 5? 2017 pubring.kbx-rw-------? 1 maarten maarten? ? 32 Mar? 5? 2017 pubring.kbx~-rw-------? 1 maarten maarten? ?600 Jan? 2 14:11 random_seed-rw-r--r--? 1 maarten maarten? ?540 Jan? 1 23:02 revoke.carnism.asc-rw-------? 1 maarten maarten? 5199 Jan? 2 14:11 secring.gpgsrwx------? 1 maarten maarten? ? ?0 Jan? 2 11:02 S.gpg-agent-rw-------? 1 maarten maarten? 1440 Jan? 2 14:11 trustdb.gpg
2. pass is complaining when I try to add a new password:
gpg: 89F615FB: There is no assurance this key belongs to the named usergpg: [stdin]: encryption failed: Unusable public key
My hypothesis is that somehow, by creating a few extra keys today, my previous openpgp key is not visible anymore. Can somebody explain why that might be the case, and help me to repair this?
Thanks in advance,Maarten


@_date: 2014-10-22 09:34:21
@_author: Jens Lechtenboerger 
@_subject: smart card under linux 
Did you really verify that pcscd is not running?  It can cause your
error messages: Best wishes

@_date: 2014-10-29 09:00:52
@_author: Jens Lechtenboerger 
@_subject: gpgsm signatures fail starting with 2.1.0-beta864 
Hi there,
I cannot sign messages with gpgsm any more.  beta834 was (and is)
still working, with beta864 and beta895 invalid signatures are
--8<---------------cut here---------------start------------->8---
echo "Hi" > test.txt
gnupg-2.1.0-beta864/sm/gpgsm -o test.txt.sig --sign test.txt
gpgsm --verify test.txt.sig
--8<---------------cut here---------------end--------------->8---
gpgsm: invalid signature: Falsche Unterschrift
Note that I?ve got multiple keys, the first one is expired, one is
revoked, and one is valid.  Thus, I need to use --local-user to
create signatures (otherwise, the expired key is tried).
Also, I don?t know whether this makes a difference: My current key
is stored on a USB token, while the other ones are not.
Finally, if I sign with the expired key (with --faked-system-time),
then a valid signature is created.
With --debug-level guru, I don?t see noteworthy differences in the
failing and succeeding cases.

@_date: 2014-10-31 12:19:11
@_author: Jens Lechtenboerger 
@_subject: gpgsm signatures fail starting with 2.1.0-beta864 
Indeed, I?ve got an older gpg-agent running as well.
If I run beta834, it uses the old agent, and verifiable signatures
are created.  Newer betas, however, start their own gpg-agent, and
incorrect signatures are created.  (En- and decryption work,
For card access I?m using gnupg-pkcs11-scd.
Which logfiles would help?  On list or via personal e-mail?

@_date: 2014-09-23 17:29:10
@_author: Jens Lechtenboerger 
@_subject: New beta 
I get this:
--8<---------------cut here---------------start------------->8---
autogen.sh: cross compiler kit not installed
autogen.sh: Stop.
autogen.sh: cross compiler kit not installed
autogen.sh: Stop.
make -f /home/lechten/local/gnupg-2.1.0-beta834/build-aux/speedo.mk UPD_SWDB=1 TARGETOS=native WHAT=release WITH_GUI=0 all
download of swdb.lst failed.
make[1]: Betrete Verzeichnis '/home/lechten/local/gnupg-2.1.0-beta834'
make[1]: Verlasse Verzeichnis '/home/lechten/local/gnupg-2.1.0-beta834'
make: *** [native] Fehler 2
--8<---------------cut here---------------end--------------->8---
Wget fails in getswdb.sh.  A manual call shows two things:
First, the certificate?s Common Name ?gnupg.org? does not match the
contacted host ?
Second, it complains about a self-signed certificate (the issuer is
unknown here).
Wget?s output recommends the option ?--no-check-certificate?.
Also, compilation of libksba-1.3.1 fails.  The following error
occurs once for every entry of the struct oidtranstbl.
--8<---------------cut here---------------start------------->8---
oidtranstbl.h error: missing terminating " character
--8<---------------cut here---------------end--------------->8---
Somehow, the trailing Carriage Returns (0x0d) at the end of the oids
in oidtranstbl.h confuse the compiler (gcc 4.4.3).  If I remove them,
compilation succeeds.
Best wishes

@_date: 2014-09-24 17:56:35
@_author: Jens Lechtenboerger 
@_subject: New beta 
This is what happens if I extract gnupg-2.1.0-beta834.tar.bz2 and
execute that command on Ubuntu 10.04.4 LTS.
GNU Wget 1.12, (C) 2009.  If I change the urlbase in getswdb.sh to
 that version works, though.
(The missing certificate was due to a configuration problem.)
No, libksba-1.3.1 on Ubuntu 10.04.4 LTS.  The file is created during
make by mkoidtbl.awk.  In my case, /etc/dumpasn1/dumpasn1.cfg is
used as input, which is DOS encoded.
Once make has failed:
--8<---------------cut here---------------start------------->8---
$ grep $'\r"' tests/oidtranstbl.h | wc -l
--8<---------------cut here---------------end--------------->8---
Best wishes

@_date: 2014-09-26 12:32:07
@_author: Jens Lechtenboerger 
@_subject: New beta 
No, I get this: i686-pc-linux-gnu
Actually, with the wget workaround compilation starts and continues
until the compilation error for oidtranstbl.h.  If I fix that file,
compilation succeeds.  (Apparently, the stop message by autogen.sh
is not important in my case.)
Best wishes

@_date: 2015-10-02 11:06:20
@_author: Jens Lechtenboerger 
@_subject: GnuPG User ID expiry 
Hi Daniel!
I get an expiration prompt for the key but not the user ID.
I tried different key sizes and keys with as well as without
expiration date.
Someone just did that.

@_date: 2015-10-15 17:31:43
@_author: Jens Lechtenboerger 
@_subject: gpgsm with empty passphrase? 
Hi there,
I fail to use gpgsm from 2.1.9 with empty passphrases for test keys.
(2.0.x works with the workaround described there:
I?m using gpgsm compiled via ?make -f build-aux/speedo.mk  native?
with exported PATH and LD_LIBRARY_PATH.
In the directory with test keys I also created gpg-agent.conf with
debug settings.  When decrypting as follows
$ gpgsm --homedir  --decrypt /tmp/gpgsm.enc
I see the following debug message from gpg-agent 2.1.9:
--8<---------------cut here---------------start------------->8---
can't connect to the PIN entry module '/home/lechten/local/gnupg-2.1.9/PLAY/inst/bin/pinentry': IPC "connect" Aufruf fehlgeschlagen
--8<---------------cut here---------------end--------------->8---
IMO, that path should not be used or pinentry should be built.
When adding a pinentry option to gpg-agent.conf, I get the
following debug messages from gpg-agent after just hitting return or
clicking ?OK? in the pinentry window (as I want to use an empty
--8<---------------cut here---------------start------------->8---
DBG: connection to PIN entry established
DBG: chan_5 -> INQUIRE PINENTRY_LAUNCHED 10817
DBG: chan_5 <- END
DBG: error calling pinentry: No passphrase given failed to unprotect the secret key: No passphrase given
failed to read the secret key
command 'PKDECRYPT' failed: No passphrase given
DBG: chan_5 -> ERR 67109041 No passphrase given DBG: chan_5 <- [eof]
--8<---------------cut here---------------end--------------->8---
Am I doing something wrong or is this a bug?
Best wishes

@_date: 2015-09-25 09:49:48
@_author: Jens Lechtenboerger 
@_subject: GnuPG User ID expiry 
Hi there,
I tried to generate test keys with expired user IDs (under faked
system time), but I failed, with gpg 1.4 as well as 2.1.8.  I tried
to use the options default-sig-expire and default-cert-expire as
well as ask-sig-expire and ask-cert-expire when adding user IDs via
However, gpg --list-options show-sig-expire --list-sigs
indicates that the signatures expire ?never?.
How can I generate/add user IDs with expiration dates or change the
expiration date of user IDs?
Best wishes

@_date: 2018-04-30 08:19:39
@_author: Jens Lechtenboerger 
@_subject: Practical use of gpgsm for verifying emails 
You don?t.  You should not trust them if you don?t know anything
about them.
That?s odd.  Maybe they publish their certificates over HTTPS,
from which you could extract the fingerprint.
They added ?trust,? not trust.  See [1] for my biased point of view
(still pretty accurate despite its age; nowadays, I would add a
pointer to Certificate Transparency [2]).
Personally, I try to verify CAs? fingerprints.  Afterwards, I
express my ?trust? in other people?s choices of CAs when verifying
their signatures (so, pretend ?Yes? when asked about trust) but
prefer OpenPGP over S/MIME whenever possible.
Best wishes
[1] [2]

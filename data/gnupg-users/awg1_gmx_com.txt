
@_date: 2013-09-10 14:12:02
@_author: Adam Gold 
@_subject: message digest for signed emails 
I apologise in advance if this is a repeat question (I have consulted the
archives although not exhaustively) but I've been trying to get this right
for two days now to no avail.  I want the message digest for my emails to be
SHA512 (or SHA256) but I can't seem to change it from SHA1.  I have tried
generating new keys, changing email clients and/or key management programs
but nothing seems to work.
My gpg.conf contains the following lines:
default-preference-list SHA512 SHA256 SHA384 SHA224 SHA1 AES256 AES192 AES
CAST5 3DES ZLIB BZIP2 ZIP Uncompressed
personal-cipher-preferences AES256 AES192 AES CAST5 3DES
personal-digest-preferences SHA512 SHA256 SHA384 SHA224 SHA1
personal-compress-preferences ZLIB BZIP2 ZIP Uncompressed
cert-digest-algo SHA512
s2k-cipher-algo AES256
s2k-digest-algo SHA512
s2k-count 65011712
I appreciate there are some lines there not directly related to email
signature message digests but at least lines 1 and 3 should set the default
order as specified.  If I generate a new key and then check the preferences
(--edit-key ID, showpref) it does indeed reflect the above order.  However
if I send a signed email, it always starts with 'Hash: SHA1'.
One additional point: if I use --clearsign for a non-email related document,
this will employ the SHA512 digest.  Why the discrepancy?  What do I need to
do to change it on my email?

@_date: 2013-09-10 19:23:03
@_author: Adam Gold 
@_subject: message digest for signed emails 
This message was sent using Outlook however my gpg mail is setup in debian wheezy.  I was using the thunderbird equivalent but I've switched to mutt with gpg/MIME support as I want to use a console based app.
To enable gpg support in mutt I copied /usr/share/doc/mutt/examples/gpg.rc to ~/.mutt and then added 'source ~/.mutt/gpg.rc' to the mutt config file.  I also added to the config a number of lines as per here: If I send a mail to myself in mutt I get the following in the received message:
[-- PGP output follows (current time: Tue 10 Sep 2013 18:59:09 BST) --]
gpg: Signature made Tue 10 Sep 2013 18:58:08 BST using RSA key ID 00583A4C
gpg: Good signature from "Adam Gold"
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: [     ]
[-- End of PGP output --]
[-- The following data is signed --]
[-- End of signed data --]
This doesn't show what the hash is so I saved the attached signature.asc file and ran 'gpg -v' against the actual email saved in my email directory.  The following was returned:
gpg: Signature made Tue 10 Sep 2013 18:58:08 BST using RSA key ID gpg: using PGP trust model
gpg: BAD signature from "Adam Gold"
gpg: textmode signature, digest algorithm SHA1
I guess the bad signature is because the signature.asc file is not meant to be detached from the email and then checked against the email.  However, as you'll see, the digest is still SHA1.  Perhaps this is unreliable too but I can't see another way when viewing a signed message in mutt to ascertain the digest.
FYI: it mentions here that mutt support SHA2: I really appreciate you taking the time to look at this.  If there is any specific information I have omitted, please let me know.  Alternatively if you don't mind, I can send you directly a signed email from my mutt account (I don't want to reveal it publicly) and you could see what digest is being used.

@_date: 2015-04-19 06:42:09
@_author: Adam Gold 
@_subject: failed decryption 
I'm attempting to decrypt a symmetrically encrypted tarball appx 25GB in
size.  It goes as follows:
gpg [file].tar.bz2.gpg
gpg: AES256 encrypted data
gpg: encrypted with 1 passphrase
gpg: packet(7) with unknown version 41
gpg: WARNING: encrypted message has been manipulated!
gpg: packet(5) with unknown version 241
To my totally untrained eye this seems pretty bad.  I also tried the
same decryption using the commercial PGP suite and had a similar
(although not identical error).
Is there anything I can do, further debugging?

@_date: 2015-04-19 14:26:08
@_author: Adam Gold 
@_subject: failed decryption 
Thank you both for the feedback.  I guess I will have to put this down
as a rather painful learning exercise!  I will most certainly look into
PAR2 files for the future.

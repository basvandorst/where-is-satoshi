
@_date: 2000-09-22 10:08:38
@_author: James W Walden 
@_subject: gpg 1.0.3 won't compile on HPUX 10.20 
I am unable to compile gpg 1.0.3 on HPUX 10.20 with gcc 2.95.1 because
of an error compiling util/iobuf.c.  It appears the problem is with the
stat64 struct which is supported on this OS, but apparently the correct
defines are not set to include the definition.  When I define
_LARGEFILE64_SOURCE to attempt to include the definition of stat64, I
receive this error about not supporting large files in strict ANSI mode:
Please let me know if you have been able to build gpg 1.0.3 successfully
on HPUX 10.20.  The configure line I used and the errors from iobuf.c are
included below.
James Walden (jamesw
Configure line:
CC=gcc CFLAGS='-O3 -I/usr/intel/pkgs/zlib/1.1.3/include -I/usr/intel/pkgs/gdbm/1.8.0/include' LDFLAGS='-L/usr/intel/pkgs/zlib/1.1.3/lib -L/usr/intel/pkgs/gdbm/1.8.0/lib' ../gnupg-1.0.3/configure --prefix=/usr/intel/00r1 --disable-nls
Error results from compile:
gcc -DHAVE_CONFIG_H -I. -I../../gnupg-1.0.3/util -I.. -I../../gnupg-1.0.3/include -I../../gnupg-1.0.3/intl    -O3 -I/usr/intel/pkgs/zlib/1.1.3/include -I/usr/intel/pkgs/gdbm/1.8.0/include -Wall -c ../../gnupg-1.0.3/util/iobuf.c
../../gnupg-1.0.3/util/iobuf.c: In function `iobuf_open':
../../gnupg-1.0.3/util/iobuf.c:598: warning: implicit declaration of function `fopen64'
../../gnupg-1.0.3/util/iobuf.c:598: warning: assignment makes pointer from integer without a cast
../../gnupg-1.0.3/util/iobuf.c: In function `iobuf_create':
../../gnupg-1.0.3/util/iobuf.c:667: warning: assignment makes pointer from integer without a cast
../../gnupg-1.0.3/util/iobuf.c: In function `iobuf_append':
../../gnupg-1.0.3/util/iobuf.c:700: warning: assignment makes pointer from integer without a cast
../../gnupg-1.0.3/util/iobuf.c: In function `iobuf_openrw':
../../gnupg-1.0.3/util/iobuf.c:727: warning: assignment makes pointer from integer without a cast
../../gnupg-1.0.3/util/iobuf.c: In function `iobuf_fopen':
../../gnupg-1.0.3/util/iobuf.c:766: warning: assignment makes pointer from integer without a cast
../../gnupg-1.0.3/util/iobuf.c: In function `iobuf_get_filelength':
../../gnupg-1.0.3/util/iobuf.c:1321: storage size of `st' isn't known
../../gnupg-1.0.3/util/iobuf.c:1329: warning: implicit declaration of function `fstat64'
../../gnupg-1.0.3/util/iobuf.c:1321: warning: unused variable `st'
gmake[2]: *** [iobuf.o] Error 1
gmake[2]: Leaving directory `/tmp_mnt/fs3/comp.apps_build.1/gpg/hp700_ux_10.20/util'
gmake[1]: *** [all-recursive] Error 1
gmake[1]: Leaving directory `/tmp_mnt/fs3/comp.apps_build.1/gpg/hp700_ux_10.20'
gmake: *** [all-recursive-am] Error 2

@_date: 2000-09-22 10:48:19
@_author: James W Walden 
@_subject: gpg 1.0.3 won't compile on AIX 4.1.4 
When compiling gpg 1.0.3 on AIX 4.1.4 using gcc 2.95.1 it fails with
errors about invalid assembly instructions even when configured with
the --disable-asm directive.  The suggested fix to use -mcpu=powerpc
simply produces errors about instructions not being implemented in
the current assembly mode PPC.  The errors are included below.  Please
let me know if you've successfully built gpg on AIX and how.
gcc -DHAVE_CONFIG_H -I. -I../../gnupg-1.0.3/mpi -I.. -I../../gnupg-1.0.3/include
    -O3 -I/usr/intel/pkgs/zlib/1.1.3/include -I/usr/intel/pkgs/gdbm/1.8.0/includ
e -Wall  -c ../../gnupg-1.0.3/mpi/mpih-div.c
../../gnupg-1.0.3/mpi/mpih-div.c: In function `mpihelp_mod_1':
../../gnupg-1.0.3/mpi/mpih-div.c:86: warning: implicit declaration of function `
../../gnupg-1.0.3/mpi/mpih-div.c:100: Invalid `asm' statement:
../../gnupg-1.0.3/mpi/mpih-div.c:100: fixed or forbidden register 64 (mq) was sp
illed for class MQ_REGS.
../../gnupg-1.0.3/mpi/mpih-div.c:101: Invalid `asm' statement:
../../gnupg-1.0.3/mpi/mpih-div.c:101: fixed or forbidden register 64 (mq) was sp

@_date: 2000-09-28 16:02:50
@_author: James W Walden 
@_subject: gpg 1.0.3 won't compile on HPUX 10.20 
I've been able to compile gpg 1.0.3 on HPUX 10.20 with your instructions,
but linking fails with several undefined symbols.  I'm using ansic instead
of softbench--they seem to work equally well for the compile and I'm more
accustomed to ansic.  Any ideas?  The symbols all exist and are undefined
in libcipher.a.
e +DAportable -I/usr/intel/pkgs/zlib/1.1.3/include -I/usr/intel/pkgs/gdbm/1.8.0/
.o delkey.o pkclist.o skclist.o ringedit.o kbnode.o mainproc.o armor.o mdfilter.o textfilter.o cipher.o misc.o openfile.o keyid.o trustdb.o tdbdump.o tdbio.o hkp.o parse-packet.o passphrase.o pubkey-enc.o seckey-cert.o seskey.o import.o export.o comment.o status.o sign.o plaintext.o encr-data.o encode.o revoke.o keylist.o sig-check.o signal.o helptext.o verify.o decrypt.o keyedit.o dearmor.o keygen.o ../cipher/libcipher.a ../mpi/libmpi.a ../util/libutil.a ../zlib/libzlib.a  -ldld
   twofish_get_info (code)
   sha1_constructor (code)
   rndunix_constructor (code)
   md5_constructor (code)
   rmd160_constructor (code)

@_date: 2000-09-29 16:08:36
@_author: James W Walden 
@_subject: gpg 1.0.3 won't compile on HPUX 10.20 
Yes, that was defined, although for some reason gmake was ignoring it
so I had to add it to the definition of COMPILE for the tools to be made
without those flags (without the +Z of course it refuses to link at an
earlier step as the code isn't position independent).  The symbols exist
in the library but nm lists them as undefined.
James Walden

@_date: 2000-09-29 16:13:58
@_author: James W Walden 
@_subject: gpg 1.0.3 won't compile on AIX 4.1.4 
I was able to successfully build gpg 1.0.3 for AIX 4.1.4 using the
IBM C compiler with this configure line:
C=/usr/bin/cc CFLAGS='-O3 -I/usr/intel/pkgs/zlib/1.1.3/include -I/usr/intel/pkgs/gdbm/1.8.0/include' LDFLAGS='-L/usr/intel/pkgs/zlib/1.1.3/lib -L/usr/intel/pkgs/gdbm/1.8.0/lib' ../gnupg-1.0.3/configure --prefix=/usr/intel/00r1 --disable-nls --disable-asm
However, it does fail 3 of the 24 tests with the following output:
Home: .
Supported algorithms:
Cipher: 3DES, CAST5, BLOWFISH, TWOFISH
Pubkey: RSA, RSA-E, RSA-S, ELG-E, DSA, ELG
Hash: MD5, SHA1, RIPEMD160
PASS: version.test
Hash algorithm TIGER/192 is not installed
PASS: mds.test
PASS: decrypt.test
PASS: decrypt-dsa.test
PASS: sigs.test
PASS: sigs-dsa.test
PASS: encrypt.test
PASS: encrypt-dsa.test
PASS: seat.test
PASS: clearsig.test
cmp: EOF on plain-1
encryptp.test: plain-1: mismatch
FAIL: encryptp.test
PASS: detach.test
PASS: armsigs.test
PASS: armencrypt.test
cmp: EOF on plain-1
armencryptp.test: plain-1: mismatch
FAIL: armencryptp.test
PASS: signencrypt.test
PASS: signencrypt-dsa.test
PASS: armsignencrypt.test
PASS: armdetach.test
PASS: armdetachm.test
PASS: detachm.test
extra characters after close-quote
    while executing
"expect -nobrace      -exact "y\r
\r                        \r\r
You need a User-ID to identify your key; the software constructs the user id\r
from Re ..."
    invoked from within
"expect {
    -exact "y\r
\r                        \r\r
You need a User-ID to identify your key; the software constructs the user id\r
from Real Name, ..."
FAIL: genkey1024.test
PASS: conventional.test
PASS: conventional-mdc.test
3 of 24 tests failed

@_date: 2000-09-22 10:08:38
@_author: James W Walden 
@_subject: gpg 1.0.3 won't compile on HPUX 10.20 
I am unable to compile gpg 1.0.3 on HPUX 10.20 with gcc 2.95.1 because
of an error compiling util/iobuf.c.  It appears the problem is with the
stat64 struct which is supported on this OS, but apparently the correct
defines are not set to include the definition.  When I define
_LARGEFILE64_SOURCE to attempt to include the definition of stat64, I
receive this error about not supporting large files in strict ANSI mode:
Please let me know if you have been able to build gpg 1.0.3 successfully
on HPUX 10.20.  The configure line I used and the errors from iobuf.c are
included below.
James Walden (jamesw
Configure line:
CC=gcc CFLAGS='-O3 -I/usr/intel/pkgs/zlib/1.1.3/include -I/usr/intel/pkgs/gdbm/1.8.0/include' LDFLAGS='-L/usr/intel/pkgs/zlib/1.1.3/lib -L/usr/intel/pkgs/gdbm/1.8.0/lib' ../gnupg-1.0.3/configure --prefix=/usr/intel/00r1 --disable-nls
Error results from compile:
gcc -DHAVE_CONFIG_H -I. -I../../gnupg-1.0.3/util -I.. -I../../gnupg-1.0.3/include -I../../gnupg-1.0.3/intl    -O3 -I/usr/intel/pkgs/zlib/1.1.3/include -I/usr/intel/pkgs/gdbm/1.8.0/include -Wall -c ../../gnupg-1.0.3/util/iobuf.c
../../gnupg-1.0.3/util/iobuf.c: In function `iobuf_open':
../../gnupg-1.0.3/util/iobuf.c:598: warning: implicit declaration of function `fopen64'
../../gnupg-1.0.3/util/iobuf.c:598: warning: assignment makes pointer from integer without a cast
../../gnupg-1.0.3/util/iobuf.c: In function `iobuf_create':
../../gnupg-1.0.3/util/iobuf.c:667: warning: assignment makes pointer from integer without a cast
../../gnupg-1.0.3/util/iobuf.c: In function `iobuf_append':
../../gnupg-1.0.3/util/iobuf.c:700: warning: assignment makes pointer from integer without a cast
../../gnupg-1.0.3/util/iobuf.c: In function `iobuf_openrw':
../../gnupg-1.0.3/util/iobuf.c:727: warning: assignment makes pointer from integer without a cast
../../gnupg-1.0.3/util/iobuf.c: In function `iobuf_fopen':
../../gnupg-1.0.3/util/iobuf.c:766: warning: assignment makes pointer from integer without a cast
../../gnupg-1.0.3/util/iobuf.c: In function `iobuf_get_filelength':
../../gnupg-1.0.3/util/iobuf.c:1321: storage size of `st' isn't known
../../gnupg-1.0.3/util/iobuf.c:1329: warning: implicit declaration of function `fstat64'
../../gnupg-1.0.3/util/iobuf.c:1321: warning: unused variable `st'
gmake[2]: *** [iobuf.o] Error 1
gmake[2]: Leaving directory `/tmp_mnt/fs3/comp.apps_build.1/gpg/hp700_ux_10.20/util'
gmake[1]: *** [all-recursive] Error 1
gmake[1]: Leaving directory `/tmp_mnt/fs3/comp.apps_build.1/gpg/hp700_ux_10.20'
gmake: *** [all-recursive-am] Error 2

@_date: 2000-09-22 10:48:19
@_author: James W Walden 
@_subject: gpg 1.0.3 won't compile on AIX 4.1.4 
When compiling gpg 1.0.3 on AIX 4.1.4 using gcc 2.95.1 it fails with
errors about invalid assembly instructions even when configured with
the --disable-asm directive.  The suggested fix to use -mcpu=powerpc
simply produces errors about instructions not being implemented in
the current assembly mode PPC.  The errors are included below.  Please
let me know if you've successfully built gpg on AIX and how.
gcc -DHAVE_CONFIG_H -I. -I../../gnupg-1.0.3/mpi -I.. -I../../gnupg-1.0.3/include
    -O3 -I/usr/intel/pkgs/zlib/1.1.3/include -I/usr/intel/pkgs/gdbm/1.8.0/includ
e -Wall  -c ../../gnupg-1.0.3/mpi/mpih-div.c
../../gnupg-1.0.3/mpi/mpih-div.c: In function `mpihelp_mod_1':
../../gnupg-1.0.3/mpi/mpih-div.c:86: warning: implicit declaration of function `
../../gnupg-1.0.3/mpi/mpih-div.c:100: Invalid `asm' statement:
../../gnupg-1.0.3/mpi/mpih-div.c:100: fixed or forbidden register 64 (mq) was sp
illed for class MQ_REGS.
../../gnupg-1.0.3/mpi/mpih-div.c:101: Invalid `asm' statement:
../../gnupg-1.0.3/mpi/mpih-div.c:101: fixed or forbidden register 64 (mq) was sp

@_date: 2000-09-28 16:02:50
@_author: James W Walden 
@_subject: gpg 1.0.3 won't compile on HPUX 10.20 
I've been able to compile gpg 1.0.3 on HPUX 10.20 with your instructions,
but linking fails with several undefined symbols.  I'm using ansic instead
of softbench--they seem to work equally well for the compile and I'm more
accustomed to ansic.  Any ideas?  The symbols all exist and are undefined
in libcipher.a.
e +DAportable -I/usr/intel/pkgs/zlib/1.1.3/include -I/usr/intel/pkgs/gdbm/1.8.0/
.o delkey.o pkclist.o skclist.o ringedit.o kbnode.o mainproc.o armor.o mdfilter.o textfilter.o cipher.o misc.o openfile.o keyid.o trustdb.o tdbdump.o tdbio.o hkp.o parse-packet.o passphrase.o pubkey-enc.o seckey-cert.o seskey.o import.o export.o comment.o status.o sign.o plaintext.o encr-data.o encode.o revoke.o keylist.o sig-check.o signal.o helptext.o verify.o decrypt.o keyedit.o dearmor.o keygen.o ../cipher/libcipher.a ../mpi/libmpi.a ../util/libutil.a ../zlib/libzlib.a  -ldld
   twofish_get_info (code)
   sha1_constructor (code)
   rndunix_constructor (code)
   md5_constructor (code)
   rmd160_constructor (code)

@_date: 2000-09-29 16:08:36
@_author: James W Walden 
@_subject: gpg 1.0.3 won't compile on HPUX 10.20 
Yes, that was defined, although for some reason gmake was ignoring it
so I had to add it to the definition of COMPILE for the tools to be made
without those flags (without the +Z of course it refuses to link at an
earlier step as the code isn't position independent).  The symbols exist
in the library but nm lists them as undefined.
James Walden

@_date: 2000-09-29 16:13:58
@_author: James W Walden 
@_subject: gpg 1.0.3 won't compile on AIX 4.1.4 
I was able to successfully build gpg 1.0.3 for AIX 4.1.4 using the
IBM C compiler with this configure line:
C=/usr/bin/cc CFLAGS='-O3 -I/usr/intel/pkgs/zlib/1.1.3/include -I/usr/intel/pkgs/gdbm/1.8.0/include' LDFLAGS='-L/usr/intel/pkgs/zlib/1.1.3/lib -L/usr/intel/pkgs/gdbm/1.8.0/lib' ../gnupg-1.0.3/configure --prefix=/usr/intel/00r1 --disable-nls --disable-asm
However, it does fail 3 of the 24 tests with the following output:
Home: .
Supported algorithms:
Cipher: 3DES, CAST5, BLOWFISH, TWOFISH
Pubkey: RSA, RSA-E, RSA-S, ELG-E, DSA, ELG
Hash: MD5, SHA1, RIPEMD160
PASS: version.test
Hash algorithm TIGER/192 is not installed
PASS: mds.test
PASS: decrypt.test
PASS: decrypt-dsa.test
PASS: sigs.test
PASS: sigs-dsa.test
PASS: encrypt.test
PASS: encrypt-dsa.test
PASS: seat.test
PASS: clearsig.test
cmp: EOF on plain-1
encryptp.test: plain-1: mismatch
FAIL: encryptp.test
PASS: detach.test
PASS: armsigs.test
PASS: armencrypt.test
cmp: EOF on plain-1
armencryptp.test: plain-1: mismatch
FAIL: armencryptp.test
PASS: signencrypt.test
PASS: signencrypt-dsa.test
PASS: armsignencrypt.test
PASS: armdetach.test
PASS: armdetachm.test
PASS: detachm.test
extra characters after close-quote
    while executing
"expect -nobrace      -exact "y\r
\r                        \r\r
You need a User-ID to identify your key; the software constructs the user id\r
from Re ..."
    invoked from within
"expect {
    -exact "y\r
\r                        \r\r
You need a User-ID to identify your key; the software constructs the user id\r
from Real Name, ..."
FAIL: genkey1024.test
PASS: conventional.test
PASS: conventional-mdc.test
3 of 24 tests failed


@_date: 1999-08-11 08:23:48
@_author: Art Hampton 
@_subject: Problems importing a public DSA key 
I had a problem importing public keys into GPG 0.9.10 via stdin.  If I
give a filename for --import instead, I have no problems.
Note that the import via stdin problem is intermittent.
So if you're using stdin, try using a file instead.

@_date: 1999-08-11 08:23:48
@_author: Art Hampton 
@_subject: Problems importing a public DSA key 
I had a problem importing public keys into GPG 0.9.10 via stdin.  If I
give a filename for --import instead, I have no problems.
Note that the import via stdin problem is intermittent.
So if you're using stdin, try using a file instead.

@_date: 1999-06-16 11:34:42
@_author: Art Hampton 
@_subject: How to authenticate permissions of a local user? 
I'm new to this list, so I'm sorry if this turns out to be an issue
which has been frequently discussed on this list.
I was hoping to use GnuPG as an automatic user authentication scheme
between two separate networks.
I was hoping to be able to create an authentication script which, when
run, would take the user's requested command, verify that the user has
permissions to do that operation based on the local network permissions
(for this application, these are simple file permissions), and then sign
the command.
That command would then be sent to the remote network.  After verifying
that the signature was valid, and that the command was something it
supported implementing remotely (in this case, application specific),
the remote network would implement the command.
The problem is the passphrase for the local network authentication
script.  I'm not sure how to get it to GPG without giving it to the
users (which would defeat the whole purpose of the authentication
My initial intent was that I would have a setuid script which would read
in the passphrase from a file which is only readable by the owner of the
authentication script.  It would then fork & exec GPG, redirecting its
stdin & stdout to allow the authentication script to send the passphrase
and the command to be signed.  I now see that GPG is taking its I/O from
the tty instead of stdin/stdout, so I can't do that.
There may very well be a security hole here which I have overlooked if I
was able to pull this off (feel free to point it out if so).
Does anyone have any suggestions?  Alternate solutions?
Thanks in advance for any help.

@_date: 1999-06-16 14:11:32
@_author: Art Hampton 
@_subject: How to authenticate permissions of a local user? 
I didn't realize (or forgot) that you could create a key without a
I tried that method (passphrase in a keyring only readable by the setuid
script), and I got:
gpg: Ohhhh jeeee: ... this is a bug (rndunix.c:731:gather_random)
Within rndunix.c, it is intentionally bailing out because of my attempt
to use it in a setuid script:
        /* make sure we are not setuid */
        if( getuid() != geteuid() )
            BUG();
So I'm left with the somewhat more cumbersome --passphrase-fd (which I
haven't yet tried, but hopefully I'll be more successful).
I'm sorry that I completely overlooked this option (--passphrase-fd) and
bugged the list....
Thanks for your help David.

@_date: 1999-06-16 11:34:42
@_author: Art Hampton 
@_subject: How to authenticate permissions of a local user? 
I'm new to this list, so I'm sorry if this turns out to be an issue
which has been frequently discussed on this list.
I was hoping to use GnuPG as an automatic user authentication scheme
between two separate networks.
I was hoping to be able to create an authentication script which, when
run, would take the user's requested command, verify that the user has
permissions to do that operation based on the local network permissions
(for this application, these are simple file permissions), and then sign
the command.
That command would then be sent to the remote network.  After verifying
that the signature was valid, and that the command was something it
supported implementing remotely (in this case, application specific),
the remote network would implement the command.
The problem is the passphrase for the local network authentication
script.  I'm not sure how to get it to GPG without giving it to the
users (which would defeat the whole purpose of the authentication
My initial intent was that I would have a setuid script which would read
in the passphrase from a file which is only readable by the owner of the
authentication script.  It would then fork & exec GPG, redirecting its
stdin & stdout to allow the authentication script to send the passphrase
and the command to be signed.  I now see that GPG is taking its I/O from
the tty instead of stdin/stdout, so I can't do that.
There may very well be a security hole here which I have overlooked if I
was able to pull this off (feel free to point it out if so).
Does anyone have any suggestions?  Alternate solutions?
Thanks in advance for any help.

@_date: 1999-06-16 14:11:32
@_author: Art Hampton 
@_subject: How to authenticate permissions of a local user? 
I didn't realize (or forgot) that you could create a key without a
I tried that method (passphrase in a keyring only readable by the setuid
script), and I got:
gpg: Ohhhh jeeee: ... this is a bug (rndunix.c:731:gather_random)
Within rndunix.c, it is intentionally bailing out because of my attempt
to use it in a setuid script:
        /* make sure we are not setuid */
        if( getuid() != geteuid() )
            BUG();
So I'm left with the somewhat more cumbersome --passphrase-fd (which I
haven't yet tried, but hopefully I'll be more successful).
I'm sorry that I completely overlooked this option (--passphrase-fd) and
bugged the list....
Thanks for your help David.

@_date: 1999-10-25 09:40:04
@_author: Art Hampton 
@_subject: Automate gpg decryption 
Several months ago, I joined this list to ask much the same question. Here's what I ended up with:
gpg --passphrase-fd  --batch
where  is the file descriptor that you will use to send
the password.
I have a setuid script which opens up a file with the passphrase, then
drops the setuid.  Next, it creates three pipes, one for STDIN, one for
STDOUT, and then a third for the passphrase file descriptor.  I then
fork a new process, get all the pipes set up correctly, and then exec
GPG as described above.
For my application, I'm signing something.  I send it via STDIN, then
close the STDIN pipe.  Then I send the passphrase, and close the
passphrase pipe.  I then save whatever I get back from STDOUT until I
hit the EOF.  Then I of course wait for the exit status of the child.
There may be a better way to do this.  I remember Werner mentioning
something about a co-process example, but I never got around to
investigating that.
Hope this helps.

@_date: 1999-10-25 09:40:04
@_author: Art Hampton 
@_subject: Automate gpg decryption 
Several months ago, I joined this list to ask much the same question. Here's what I ended up with:
gpg --passphrase-fd  --batch
where  is the file descriptor that you will use to send
the password.
I have a setuid script which opens up a file with the passphrase, then
drops the setuid.  Next, it creates three pipes, one for STDIN, one for
STDOUT, and then a third for the passphrase file descriptor.  I then
fork a new process, get all the pipes set up correctly, and then exec
GPG as described above.
For my application, I'm signing something.  I send it via STDIN, then
close the STDIN pipe.  Then I send the passphrase, and close the
passphrase pipe.  I then save whatever I get back from STDOUT until I
hit the EOF.  Then I of course wait for the exit status of the child.
There may be a better way to do this.  I remember Werner mentioning
something about a co-process example, but I never got around to
investigating that.
Hope this helps.

@_date: 1999-09-13 16:16:01
@_author: Art Hampton 
@_subject: PGP swap to disk? 
My admin is balking at making GPG setuid root to prevent swaps to disk.
He says that he's used PGP before, and that it didn't need to be setuid
I seem to remember this conversation coming up on this list before, but
it doesn't look like lists.gnupg.org supports searches.
Is it the case that PGP doesn't address this particular issue, and
therefore swaps to disk can occur?
What attack is being countered by preventing a swap to disk?
Thanks in advance for any help.

@_date: 1999-09-13 16:16:01
@_author: Art Hampton 
@_subject: PGP swap to disk? 
My admin is balking at making GPG setuid root to prevent swaps to disk.
He says that he's used PGP before, and that it didn't need to be setuid
I seem to remember this conversation coming up on this list before, but
it doesn't look like lists.gnupg.org supports searches.
Is it the case that PGP doesn't address this particular issue, and
therefore swaps to disk can occur?
What attack is being countered by preventing a swap to disk?
Thanks in advance for any help.


@_date: 2012-02-05 22:20:57
@_author: Klaus Layer 
@_subject: Moving from openpgp card to cryptostick 
since several years I am using an openpgp card with subkeys. Because I have to move to a new hardware without a cardreader, I bought a cryptostick to replace my old openpgp card. I picked up my backup storage with the keyring with my main key and run:
 --homedir /keylocation --edit-key MY-KEY-ID
 2               key 2 is my authentication key, so I have to select
(3) authentication key
Your selection? 3
Now I get the message
gpg: secretkey already stored on a card
How can I transfer my keys from the old openpgp card to the new cryptostick?
Thanks for your help.
With kind regards,

@_date: 2012-02-06 08:39:27
@_author: Klaus Layer 
@_subject: Moving from openpgp card to cryptostick 
FPA  wrote on 05.02.2012:
When I created the keys for my old openpgp card I followed the description from  I have the backup key ring that I created as described in the howto. How do I use this back key ring to transfer the keys to my new crypto stick?

@_date: 2012-02-09 10:46:37
@_author: Klaus Layer 
@_subject: Moving from openpgp card to cryptostick 
MFPA  wrote on 06.02.2012:
I proceed exactly as described in the howto with my backup keys. But I always get the message "gpg: secretkey already stored on a card"
Any idea how I can resolve this?

@_date: 2012-01-29 19:59:29
@_author: Klaus Layer 
@_subject: OpenPGP card stopped working 
after several years without any issue my openpgp card stopped working today on my Ubuntu Lucid system. gpg --card-status just returns:
gpg --card-status
gpg: selecting openpgp failed: ec=6.108
gpg: OpenPGP card not available: general error
I am using an omnikey cardman 4040 reader.
This is what I have done so far:
1.) checked that the kernel driver cm4040_cs for cardman 4040 driver is loaded
2.) checked that gpg-agent is running:
3.) started the pcscd which is normally not required, than started pcsc_scan. pcsc_scan detects openpgp as the inserted smartcard. pcsc_scan detect insert/remove of the openpgp card 4.) inserted a brand new openpgp card, but the error stays the same
5.) replaced the cardman 4040 reader with a new 4040 reader, but the error stays the same
I am out of ideas, and google did not help further. Can someone please give me a hint, how I can make my openpgp card working again.
Thanks for your help.

@_date: 2012-01-29 22:27:02
@_author: Klaus Layer 
@_subject: OpenPGP card stopped working 
Klaus Layer  wrote on 29.01.2012:
on pcsc_scan. Ok, I resolved the issue. I added verbose debug 1024 debug-ccid-driver log-file /home/user/scdaemon.log to ~/.gnupg/scdaemon.conf and found out that the permissions of /dev/cmx0 did no longer allow others to r/w to the device. Somehow the udev rules to set scard group for /dev/cmx0 vanished from my system. After recreating a rules file /etc/udev/rules.d/40-gnupg.rules with
SUBSYSTEM=="cardman_4040", GROUP="scard", MODE="0660"
it works again.

@_date: 2012-07-15 15:37:16
@_author: Klaus Layer 
@_subject: key search does not work with gpg2 
I am doing a search for key B973BA7B with gpg:
gpg --version
gpg (GnuPG) 1.4.11
gpg --keyserver hkp://109.230.243.87 --search-key B973BA7B
gpg: searching for "B973BA7B" from hkp server 109.230.243.87
(1) NetBank AG  1024 bit     DSA key B973BA7B, created: 2000-09-27 The key is found. Same search with gpg2:
gpg2 --version
gpg (GnuPG) 2.0.17
libgcrypt 1.5.0 gpg2 --keyserver hkp://109.230.243.87 --search-key B973BA7B
gpg: searching for "B973BA7B" from hkp server 109.230.243.87 gpg: key "B973BA7B" not found on keyserver
the key will not be found.
Known error, or am I doing something wrong?

@_date: 2012-07-15 16:37:02
@_author: Klaus Layer 
@_subject: key search does not work with gpg2 
Am Sonntag, 15. Juli 2012, 15:47:36 schrieb Hauke Laging:
Thanks, Kristian & Hauke your are right. 0x makes the difference.

@_date: 2012-06-05 15:01:27
@_author: Klaus Layer 
@_subject: scdaemon needs restarting after removing OpenPGP smartcard 
when I remove a cryptostick and try to access it with i.e. gpg2 --card-status I get an error
gpg: selecting openpgp failed: ec=6.32848
gpg: OpenPGP card not available: general error
In this case scdaemon log shows
scdaemon[4167]: chan_7 <- SERIALNO openpgp
2012-06-05 14:35:39 scdaemon[4167] PC/SC RESET failed: invalid value scdaemon[4167]: chan_7 -> ERR 100663404 Card error scdaemon[4167]: chan_7 <- RESTART
scdaemon[4167]: chan_7 -> OK
I found ticket  which describes this error. Are there any plans to downport the fix described in the ticket to

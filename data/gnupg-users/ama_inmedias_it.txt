
@_date: 2006-05-18 16:26:00
@_author: Andreas Martin 
@_subject: Fedora Core 5 and SCR335 
Hi all.
I have some trouble to set up my cardreader (SCM SCR335, USB) properly
under Fedora Cor 5 (with udev). The cardreader itself and the
OpenPGP-card work fine on my notebook (Debian Sarge, with hotplug), so
it is not a hardware problem.
Furthermore, i can use the cardreader with the gnupg ccid-driver as user
"root", but not as user "andi" (member of the group "scard").
In my opinion, the permissions in /proc/bus/usb/001/005 (or wherever the
cardreader comes up) are set correctly:
# ls -l /proc/bus/usb/001
-rw-rw---- 1 root scard 111 18. Mai 13:32 005
As user "andi" i get the following result:
#  gpg --card-status --debug-ccid-driver
gpg: DBG: ccid-driver: using CCID reader 0 (ID=04E6:5115:X:0)
gpg: DBG: ccid-driver: idVendor: 04E6  idProduct: 5115  bcdDevice: 0416
gpg: DBG: ccid-driver: ChipCard Interface Descriptor:
gpg: DBG: ccid-driver:   bLength                54
gpg: DBG: ccid-driver:   bDescriptorType        33
gpg: DBG: ccid-driver:   bcdCCID              1.00
gpg: DBG: ccid-driver:   nMaxSlotIndex           0
gpg: DBG: ccid-driver:   bVoltageSupport         1  5.0V
gpg: DBG: ccid-driver:   dwProtocols             3  T=0 T=1
gpg: DBG: ccid-driver:   dwDefaultClock       4000
gpg: DBG: ccid-driver:   dwMaxiumumClock     12000
gpg: DBG: ccid-driver:   bNumClockSupported      0
gpg: DBG: ccid-driver:   dwDataRate           9600 bps
gpg: DBG: ccid-driver:   dwMaxDataRate      115200 bps
gpg: DBG: ccid-driver:   bNumDataRatesSupp.      0
gpg: DBG: ccid-driver:   dwMaxIFSD             252
gpg: DBG: ccid-driver:   dwSyncProtocols  00000000
gpg: DBG: ccid-driver:   dwMechanical     00000000
gpg: DBG: ccid-driver:   dwFeatures       000100BA
gpg: DBG: ccid-driver:     Auto configuration based on ATR
gpg: DBG: ccid-driver:     Auto voltage selection
gpg: DBG: ccid-driver:     Auto clock change
gpg: DBG: ccid-driver:     Auto baud rate change
gpg: DBG: ccid-driver:     Auto PPS made by CCID
gpg: DBG: ccid-driver:     TPDU level exchange
gpg: DBG: ccid-driver:   dwMaxCCIDMsgLen       263
gpg: DBG: ccid-driver:   bClassGetResponse    echo
gpg: DBG: ccid-driver:   bClassEnvelope       echo
gpg: DBG: ccid-driver:   wlcdLayout           none
gpg: DBG: ccid-driver:   bPINSupport             0
gpg: DBG: ccid-driver:   bMaxCCIDBusySlots       1
gpg: DBG: ccid-driver: enabling workaround for buggy SCM readers
gpg: DBG: ccid-driver: usb_claim_interface failed: -1
gpg: apdu_open_reader: failed to open driver `libpcsclite.so':
libpcsclite.so: Kann die Shared-Object-Datei nicht ?ffnen: Datei oder
Verzeichnis nicht gefunden
gpg: card reader not available
gpg: OpenPGP Karte ist nicht vorhanden: Allgemeiner Fehler
As user "root" i get:
# gpg --card-status --debug-ccid-driver
gpg: DBG: ccid-driver: using CCID reader 0 (ID=04E6:5115:5040506C:0)
gpg: DBG: ccid-driver: idVendor: 04E6  idProduct: 5115  bcdDevice: 0416
gpg: DBG: ccid-driver: ChipCard Interface Descriptor:
gpg: DBG: ccid-driver:   bLength                54
gpg: DBG: ccid-driver:   bDescriptorType        33
gpg: DBG: ccid-driver:   bcdCCID              1.00
gpg: DBG: ccid-driver:   nMaxSlotIndex           0
gpg: DBG: ccid-driver:   bVoltageSupport         1  5.0V
gpg: DBG: ccid-driver:   dwProtocols             3  T=0 T=1
gpg: DBG: ccid-driver:   dwDefaultClock       4000
gpg: DBG: ccid-driver:   dwMaxiumumClock     12000
gpg: DBG: ccid-driver:   bNumClockSupported      0
gpg: DBG: ccid-driver:   dwDataRate           9600 bps
gpg: DBG: ccid-driver:   dwMaxDataRate      115200 bps
gpg: DBG: ccid-driver:   bNumDataRatesSupp.      0
gpg: DBG: ccid-driver:   dwMaxIFSD             252
gpg: DBG: ccid-driver:   dwSyncProtocols  00000000
gpg: DBG: ccid-driver:   dwMechanical     00000000
gpg: DBG: ccid-driver:   dwFeatures       000100BA
gpg: DBG: ccid-driver:     Auto configuration based on ATR
gpg: DBG: ccid-driver:     Auto voltage selection
gpg: DBG: ccid-driver:     Auto clock change
gpg: DBG: ccid-driver:     Auto baud rate change
gpg: DBG: ccid-driver:     Auto PPS made by CCID
gpg: DBG: ccid-driver:     TPDU level exchange
gpg: DBG: ccid-driver:   dwMaxCCIDMsgLen       263
gpg: DBG: ccid-driver:   bClassGetResponse    echo
gpg: DBG: ccid-driver:   bClassEnvelope       echo
gpg: DBG: ccid-driver:   wlcdLayout           none
gpg: DBG: ccid-driver:   bPINSupport             0
gpg: DBG: ccid-driver:   bMaxCCIDBusySlots       1
gpg: DBG: ccid-driver: enabling workaround for buggy SCM readers
gpg: DBG: ccid-driver: usb_bulk_read error: Die Ressource ist zur Zeit
nicht verf?gbar
gpg: DBG: ccid-driver: USB: CALLING USB_CLEAR_HALT
gpg: DBG: ccid-driver: usb_bulk_read error: Die Ressource ist zur Zeit
nicht verf?gbar
gpg: DBG: ccid-driver: USB: RETRYING bulk_in AGAIN
gpg: DBG: ccid-driver: usb_bulk_read error: Die Ressource ist zur Zeit
nicht verf?gbar
gpg: DBG: ccid-driver: USB: RETRYING bulk_in AGAIN
gpg: DBG: ccid-driver: status: 00  error: 00  octet[9]: 00
               data: 3B FA 13 00 FF 81 31 80 45 00 31 C1 73 C0 01 00 00
90 00 B1
gpg: DBG: ccid-driver: sending 61 07 00 00 00 00 05 01 00 00 01 10 00 41
00 FE 00
So I think it is a permission issue, but I can't figure out where to fix
it. Does anyone have any idea?
Any comments are appreciated!

@_date: 2006-05-18 16:26:09
@_author: Andreas Martin 
@_subject: Fedora Core 5 and SCR335 
Hi all.
I have some trouble to set up my cardreader (SCM SCR335, USB) properly
under Fedora Cor 5 (with udev). The cardreader itself an the
OpenPGP-card work fine on my notebook (Debian Sarge, with hotplug), so
it is not a hardware problem.
Furthermore, i can use the cardreader with the gnupg ccid-driver as user
"root", but not as user "andi" (member of the group "scard").
In my opinion, the permissions in /proc/bus/usb/001/005 (or wherever the
cardreader comes up) are set correctly:
# ls -l /proc/bus/usb/001
-rw-rw---- 1 root scard 111 18. Mai 13:32 005
As user "andi" i get the following result:
#  gpg --card-status --debug-ccid-driver
gpg: DBG: ccid-driver: using CCID reader 0 (ID=04E6:5115:X:0)
gpg: DBG: ccid-driver: idVendor: 04E6  idProduct: 5115  bcdDevice: 0416
gpg: DBG: ccid-driver: ChipCard Interface Descriptor:
gpg: DBG: ccid-driver:   bLength                54
gpg: DBG: ccid-driver:   bDescriptorType        33
gpg: DBG: ccid-driver:   bcdCCID              1.00
gpg: DBG: ccid-driver:   nMaxSlotIndex           0
gpg: DBG: ccid-driver:   bVoltageSupport         1  5.0V
gpg: DBG: ccid-driver:   dwProtocols             3  T=0 T=1
gpg: DBG: ccid-driver:   dwDefaultClock       4000
gpg: DBG: ccid-driver:   dwMaxiumumClock     12000
gpg: DBG: ccid-driver:   bNumClockSupported      0
gpg: DBG: ccid-driver:   dwDataRate           9600 bps
gpg: DBG: ccid-driver:   dwMaxDataRate      115200 bps
gpg: DBG: ccid-driver:   bNumDataRatesSupp.      0
gpg: DBG: ccid-driver:   dwMaxIFSD             252
gpg: DBG: ccid-driver:   dwSyncProtocols  00000000
gpg: DBG: ccid-driver:   dwMechanical     00000000
gpg: DBG: ccid-driver:   dwFeatures       000100BA
gpg: DBG: ccid-driver:     Auto configuration based on ATR
gpg: DBG: ccid-driver:     Auto voltage selection
gpg: DBG: ccid-driver:     Auto clock change
gpg: DBG: ccid-driver:     Auto baud rate change
gpg: DBG: ccid-driver:     Auto PPS made by CCID
gpg: DBG: ccid-driver:     TPDU level exchange
gpg: DBG: ccid-driver:   dwMaxCCIDMsgLen       263
gpg: DBG: ccid-driver:   bClassGetResponse    echo
gpg: DBG: ccid-driver:   bClassEnvelope       echo
gpg: DBG: ccid-driver:   wlcdLayout           none
gpg: DBG: ccid-driver:   bPINSupport             0
gpg: DBG: ccid-driver:   bMaxCCIDBusySlots       1
gpg: DBG: ccid-driver: enabling workaround for buggy SCM readers
gpg: DBG: ccid-driver: usb_claim_interface failed: -1
gpg: apdu_open_reader: failed to open driver `libpcsclite.so':
libpcsclite.so: Kann die Shared-Object-Datei nicht ?ffnen: Datei oder
Verzeichnis nicht gefunden
gpg: card reader not available
gpg: OpenPGP Karte ist nicht vorhanden: Allgemeiner Fehler
As user "root" i get:
# gpg --card-status --debug-ccid-driver
gpg: DBG: ccid-driver: using CCID reader 0 (ID=04E6:5115:5040506C:0)
gpg: DBG: ccid-driver: idVendor: 04E6  idProduct: 5115  bcdDevice: 0416
gpg: DBG: ccid-driver: ChipCard Interface Descriptor:
gpg: DBG: ccid-driver:   bLength                54
gpg: DBG: ccid-driver:   bDescriptorType        33
gpg: DBG: ccid-driver:   bcdCCID              1.00
gpg: DBG: ccid-driver:   nMaxSlotIndex           0
gpg: DBG: ccid-driver:   bVoltageSupport         1  5.0V
gpg: DBG: ccid-driver:   dwProtocols             3  T=0 T=1
gpg: DBG: ccid-driver:   dwDefaultClock       4000
gpg: DBG: ccid-driver:   dwMaxiumumClock     12000
gpg: DBG: ccid-driver:   bNumClockSupported      0
gpg: DBG: ccid-driver:   dwDataRate           9600 bps
gpg: DBG: ccid-driver:   dwMaxDataRate      115200 bps
gpg: DBG: ccid-driver:   bNumDataRatesSupp.      0
gpg: DBG: ccid-driver:   dwMaxIFSD             252
gpg: DBG: ccid-driver:   dwSyncProtocols  00000000
gpg: DBG: ccid-driver:   dwMechanical     00000000
gpg: DBG: ccid-driver:   dwFeatures       000100BA
gpg: DBG: ccid-driver:     Auto configuration based on ATR
gpg: DBG: ccid-driver:     Auto voltage selection
gpg: DBG: ccid-driver:     Auto clock change
gpg: DBG: ccid-driver:     Auto baud rate change
gpg: DBG: ccid-driver:     Auto PPS made by CCID
gpg: DBG: ccid-driver:     TPDU level exchange
gpg: DBG: ccid-driver:   dwMaxCCIDMsgLen       263
gpg: DBG: ccid-driver:   bClassGetResponse    echo
gpg: DBG: ccid-driver:   bClassEnvelope       echo
gpg: DBG: ccid-driver:   wlcdLayout           none
gpg: DBG: ccid-driver:   bPINSupport             0
gpg: DBG: ccid-driver:   bMaxCCIDBusySlots       1
gpg: DBG: ccid-driver: enabling workaround for buggy SCM readers
gpg: DBG: ccid-driver: usb_bulk_read error: Die Ressource ist zur Zeit
nicht verf?gbar
gpg: DBG: ccid-driver: USB: CALLING USB_CLEAR_HALT
gpg: DBG: ccid-driver: usb_bulk_read error: Die Ressource ist zur Zeit
nicht verf?gbar
gpg: DBG: ccid-driver: USB: RETRYING bulk_in AGAIN
gpg: DBG: ccid-driver: usb_bulk_read error: Die Ressource ist zur Zeit
nicht verf?gbar
gpg: DBG: ccid-driver: USB: RETRYING bulk_in AGAIN
gpg: DBG: ccid-driver: status: 00  error: 00  octet[9]: 00
               data: 3B FA 13 00 FF 81 31 80 45 00 31 C1 73 C0 01 00 00
90 00 B1
gpg: DBG: ccid-driver: sending 61 07 00 00 00 00 05 01 00 00 01 10 00 41
00 FE 00
So I think it is a permission issue, but I can't figure out where.
Does anyone have any idea?
Any comments are appreciated!

@_date: 2006-05-19 10:50:52
@_author: Andreas Martin 
@_subject: Fedora Core 5 and SCR335 
Hi Werner.
Thanks for your answer.
Werner Koch schrieb:
fuser an lsof don't tell anything about other processes using this file.
Writing with echo to the device returns an error (for both, "andi" and
# echo XXXXXXXX >/proc/bus/usb/002/003
bash: echo: write error: Das Argument ist ung?ltig
But redirecting less works fine (for both users):
# less gnupg-ccid >/proc/bus/usb/002/003
I tried v1.4.3 that comes with Fedora Core 5 and I downloaded v1.4.3 and
v1.4.2 from gnupg.org compiled an installed it (libusb and libusb-devel
are installed). I even tried --enable-selinux-support with configure,
enabled and disabled SElinux, but nothing happened :-(
The other way round: Does anybody know, that the combination of Fedora
Core 5, SCM SCR335 USB and GnuPG is working? Changing the distribution
would be an alternative...
Kind regards

@_date: 2006-05-20 16:36:55
@_author: ama@inmedias.it 
@_subject: Fedora Core 5 and SCR335 
Hi Michael.
You hit the mark! When I change the permissions in /dev/bus/usb/001/005,
GnuPG works fine with my cardreader - even as normal user.
Do you have incidentally gnupg-ccid.rules and/or gnupg-ccid scripts which
do the job? The ones I have change the permissions in /proc/bus/usb
Thanks a lot for your tip (I googled some days and found nothing

@_date: 2006-05-22 09:30:37
@_author: Andreas Martin 
@_subject: Fedora Core 5 and SCR335 
Hash: SHA1
Hi Michael.
Michael Bienia schrieb:
I modified your script to match my SCM SCR335:
,----[ /etc/udev/rules.d/65-gnupg-ccid.rules ]-
Now it works :-)
Thanks to you and Werner for your help!
Kind regards,

@_date: 2006-05-31 09:07:20
@_author: Andreas Martin 
@_subject: Cipher v public key. 
Hash: SHA1
Do you mean "does it _now_ show" or "does it _not_ show"?
AES is listed as a cipher, because ist is an algorithm for symmetric
encryption. It cannot be used as a public/secret-key algorithm (neither
now, nor in future).

@_date: 2006-05-31 11:30:10
@_author: Andreas Martin 
@_subject: Signing vs. encrypting was: Cipher v public key. 
Hash: SHA1
Laurent Jumet schrieb:
 >     When sending a message like this one, signed, compressed but not
In security terms, lots of things can go bad when sending anything
through the internet ;-)
Encrypting protects against unauthorised reading of the plaintext, but
not from manipulating the encrypted data. Signing protects against
manipulation of the data, but not against unauthorised reading of the
plaintext. (In fact it does not avoid the manipulation itself, but you
are able to detect, that the data has been manipulated).
Signing and encrypting are two totally different things (not to mention
compressing). So if you want "save" transmissions you have to do both,
signing and encrypting!
Problems with line length and charset shouldn't occur during the
transmission of your mails, because Mail Transport Agents don't take
care of the mailbody (and the headers are not signed or encrypted). What
exactly do you want?

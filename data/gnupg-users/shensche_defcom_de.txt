
@_date: 2000-01-18 11:26:25
@_author: Sebastian Henschel 
@_subject: gpg via cgi under BSDi 
hi folks!
as you can imagine (cause of the subject) i have problems with gpg
(1.0.1) under BSDi v3.1.
research in the listings gave me the patch to get gpg compiled under
BSDi. it also works on the command line. but if i try to call it via a
cgi it stops working before it starts encoding.
if have no passphrase for the secret key but that should be ok, cause
the cgi-user won't decrypt anything sent to him.
i call gpg like that: gpg --debug-all --encrypt --armor --no-tty --batch --homedir
input comes from stdin, output goes to stdout. it does not matter if i
specify a file for input and/or a file for output. on my linux box this
works just fine, i can even omit the --batch and --no-tty args.
i have two log snippets here, the first from the working commmand-line
------ snap
------ snip
------ snap
as you can see, it stops before this DEK (whatever that is, looks
somehow like a fingerprint) thing is done. well, stopping is not the
right term. it just hangs and does nothing more, no quitting, no
advancing :(
i would appreciate some help here. keep up the excellent work, tia,
   sebastian

@_date: 2000-01-19 14:02:16
@_author: Sebastian Henschel 
@_subject: gpg via cgi under BSDi 
hello again..
no, i did not. but how can i do that under BSDi?
i started the demon as proposed (egd.pl ~/.gnupg/entropy) and put
"load-extension rndegd" into my options file.
but gpg seems to use the file /usr/local/lib/gnupg/rndegd and outputs
the following:
gpg: /usr/local/lib/gnupg/rndegd: error loading extension: can't process
object file: Inappropriate file type or format
when i start egd with "egd.pl /usr/local/lib/gnupg/rndegd" gpg says:
gpg: /usr/local/lib/gnupg/rndegd: error loading extension: can't process
object file: Operation not supported
"cat"ting this file now gives me nearly the same answer. btw it seems to
have always the size of 0, rights: 4777.
a snippet with --debug-all (although i have no idea where to start
concerning this egd matter):
---- snap -------------------------
i remind you all, that you cannot make gnupg with
"--enable-static-rnd=none" or "--enable-static-rnd=egd" on BSDi. and you
have to touch the startup rndegd, tiger, rndunix in the cipher dir of
the source tree (which are found afterwards in /usr/local/lib/gnupg).
unfortunately strace does not support BSDi (i start hating this
derivate). well, ktrace (as replacement for truss) does not give _me_ so much more
info. one thing i found interesting is that another gpg-process is
forked shortly before the programm hangs. although in the ktrace dump
you can only see the fork, but in the process list you have two gpgs
running. if anyone is interested i can post him/her the whole output
(about 30K) until i killed the process.
slightly desperate, tia
       sebastian

@_date: 2000-01-20 11:19:21
@_author: Sebastian Henschel 
@_subject: gpg via cgi under BSDi - it works! 
ok, that was my fault. i just took the info that the list gave me for
getting gpg compiled under BSDi without thinking so much about the
things i did there. if you --enable-static-rnd=egd you have to touch "rndunix", "rndlinux"
and "tiger" in the cipher directory (+ the modification in the configure
and now it works with the statically included egd (which you have to
install in addition) :)
thanx a lot for your help! best wishes...

@_date: 2000-01-18 11:26:25
@_author: Sebastian Henschel 
@_subject: gpg via cgi under BSDi 
hi folks!
as you can imagine (cause of the subject) i have problems with gpg
(1.0.1) under BSDi v3.1.
research in the listings gave me the patch to get gpg compiled under
BSDi. it also works on the command line. but if i try to call it via a
cgi it stops working before it starts encoding.
if have no passphrase for the secret key but that should be ok, cause
the cgi-user won't decrypt anything sent to him.
i call gpg like that: gpg --debug-all --encrypt --armor --no-tty --batch --homedir
input comes from stdin, output goes to stdout. it does not matter if i
specify a file for input and/or a file for output. on my linux box this
works just fine, i can even omit the --batch and --no-tty args.
i have two log snippets here, the first from the working commmand-line
------ snap
------ snip
------ snap
as you can see, it stops before this DEK (whatever that is, looks
somehow like a fingerprint) thing is done. well, stopping is not the
right term. it just hangs and does nothing more, no quitting, no
advancing :(
i would appreciate some help here. keep up the excellent work, tia,
   sebastian

@_date: 2000-01-19 14:02:16
@_author: Sebastian Henschel 
@_subject: gpg via cgi under BSDi 
hello again..
no, i did not. but how can i do that under BSDi?
i started the demon as proposed (egd.pl ~/.gnupg/entropy) and put
"load-extension rndegd" into my options file.
but gpg seems to use the file /usr/local/lib/gnupg/rndegd and outputs
the following:
gpg: /usr/local/lib/gnupg/rndegd: error loading extension: can't process
object file: Inappropriate file type or format
when i start egd with "egd.pl /usr/local/lib/gnupg/rndegd" gpg says:
gpg: /usr/local/lib/gnupg/rndegd: error loading extension: can't process
object file: Operation not supported
"cat"ting this file now gives me nearly the same answer. btw it seems to
have always the size of 0, rights: 4777.
a snippet with --debug-all (although i have no idea where to start
concerning this egd matter):
---- snap -------------------------
i remind you all, that you cannot make gnupg with
"--enable-static-rnd=none" or "--enable-static-rnd=egd" on BSDi. and you
have to touch the startup rndegd, tiger, rndunix in the cipher dir of
the source tree (which are found afterwards in /usr/local/lib/gnupg).
unfortunately strace does not support BSDi (i start hating this
derivate). well, ktrace (as replacement for truss) does not give _me_ so much more
info. one thing i found interesting is that another gpg-process is
forked shortly before the programm hangs. although in the ktrace dump
you can only see the fork, but in the process list you have two gpgs
running. if anyone is interested i can post him/her the whole output
(about 30K) until i killed the process.
slightly desperate, tia
       sebastian

@_date: 2000-01-20 11:19:21
@_author: Sebastian Henschel 
@_subject: gpg via cgi under BSDi - it works! 
ok, that was my fault. i just took the info that the list gave me for
getting gpg compiled under BSDi without thinking so much about the
things i did there. if you --enable-static-rnd=egd you have to touch "rndunix", "rndlinux"
and "tiger" in the cipher directory (+ the modification in the configure
and now it works with the statically included egd (which you have to
install in addition) :)
thanx a lot for your help! best wishes...


@_date: 2012-04-26 11:49:20
@_author: =?UTF-8?B?Tmd1eeG7hW4gSOG7k25nIFF1w6Ju?= 
@_subject: How to make GPG release the token? 
Hello all,
I'm using GnuPG and OpenSC to test my token. Each time I've done using
GPG, the OpenSC cannot access the token. I have to reboot the computer
to use OpenSC.
There is a way to make the GnuPG release the token completely after use?

@_date: 2012-04-26 14:17:55
@_author: =?UTF-8?B?Tmd1eeG7hW4gSOG7k25nIFF1w6Ju?= 
@_subject: How to make GPG release the token? 
That's the Crypto Stick After trying pgp --card-status or gpg --card-edit, I cannot access the
Crypto Stick with OpenSC, meaning opensc-tool does not work.
Each time I use GPG, I have to reboot the computer in order to use OpenSC.

@_date: 2012-04-26 14:51:12
@_author: =?UTF-8?B?Tmd1eeG7hW4gSOG7k25nIFF1w6Ju?= 
@_subject: How to make GPG release the token? 
Thanks David,
I'm starting to develop  OpenSC to make it support fully the CryptoStick (which uses OpenPGP card). So I cannot uninstall OpenSC.
Because the OpenSC does not support OpenPGP card fully, I sometimes use GPG to test the card.
So there is no way to leave these two together?

@_date: 2012-06-18 15:08:36
@_author: =?UTF-8?B?Tmd1eeG7hW4gSOG7k25nIFF1w6Ju?= 
@_subject: Import private key from PEM file? 
Hi all,
Is it possible to import private key from PEM file (which I exported
from p12 file using OpenSSL:
openssl pkcs12 -in secret-gpg-key.p12 -nocerts -out gpg-key.pem)?
Is it possible to import pairs of certificate/private key from p12 file
using gpgsm?
I tried doing this, but then the command
gpgsm --list-secret-keys
returned nothing.

@_date: 2012-06-18 16:16:22
@_author: =?UTF-8?B?Tmd1eeG7hW4gSOG7k25nIFF1w6Ju?= 
@_subject: Import private key from PEM file? 
I tried again but "gpgsm --list-secrret-keys" still return nothing:
hongquan at Pangolin ~/Works/Certificates/StartCom $ gpgsm -v --import quannguyen at mbm.vn.p12
gpgsm: gpgsm: GPG_TTY has not been set - using maybe bogus default
gpgsm: gpg-protect-tool: 1224 bytes of 3DES encrypted text
gpgsm: gpg-protect-tool: 5904 bytes of RC2 encrypted text
gpgsm: gpg-protect-tool: processing certBag
gpgsm: gpg-protect-tool: processing certBag
gpgsm: gpg-protect-tool: processing certBag
gpgsm: gpg-protect-tool: keygrip: gpgsm: gpg-protect-tool: secret key file `/home/hongquan/.gnupg/private-keys-v1.d/89E5CF0B2581EE779B2CF2D849EE991DEE0E1A17.key' already exists
gpgsm: certificate is good
gpgsm: certificate is good
gpgsm: certificate is good
gpgsm: total number processed: 4
gpgsm:              unchanged: 3
gpgsm:       secret keys read: 1
gpgsm:  secret keys unchanged: 1
hongquan at Pangolin ~/Works/Certificates/StartCom $ gpgsm How about importing from PEM file? Is there a command to do that?

@_date: 2012-06-18 17:09:26
@_author: =?UTF-8?B?Tmd1eeG7hW4gSOG7k25nIFF1w6Ju?= 
@_subject: Import private key from PEM file? 
I don't need new entry, I just need 'existing' entry. But none is shown.
hongquan at Pangolin ~ $ gpgsm --list-secret-keys

@_date: 2012-06-18 17:16:25
@_author: =?UTF-8?B?Tmd1eeG7hW4gSOG7k25nIFF1w6Ju?= 
@_subject: Import private key from PEM file? 
I meant I want to import the PEM file that contains only private key
(the file is exported with the command
openssl pkcs12 -in secret-gpg-key.p12 -nocerts -out gpg-key.pem
With this file, the "gpgsm --import" complains about the absence of
$gpgsm -v --import quan-key.pem
gpgsm: no issuer found in certificate
gpgsm: basic certificate checks failed - not imported
gpgsm: no issuer found in certificate
gpgsm: basic certificate checks failed - not imported
gpgsm: no issuer found in certificate
gpgsm: basic certificate checks failed - not imported
gpgsm: ksba_cert_hash failed: No value
gpgsm: total number processed: 3
gpgsm:           not imported: 3

@_date: 2012-06-19 10:38:40
@_author: =?UTF-8?B?Tmd1eeG7hW4gSOG7k25nIFF1w6Ju?= 
@_subject: Import private key from PEM file? 
So, do you think the private key and the certificate in the same p12
file don't match?
The private key I expect to see was imported (in companion with
certificate) earlier from a p12 file.
I checked with OpenSSL and make sure that the p12 file contain both
private key and certificate.

@_date: 2012-06-19 10:43:02
@_author: =?UTF-8?B?Tmd1eeG7hW4gSOG7k25nIFF1w6Ju?= 
@_subject: Import private key from PEM file? 
So, the gpgsm won't work with PEM file which contain only private key?
(Maybe you forgot that I asked 2 questions in the first email
1: About PEM file which contains only private key.
2: About P12 file which contains both private key and certificate).

@_date: 2012-05-30 16:47:50
@_author: =?UTF-8?B?Tmd1eeG7hW4gSOG7k25nIFF1w6Ju?= 
@_subject: GnuPG 2 + OpenPGP card on F17 
Hello Werner,
I also encounter this problem on Ubuntu 12.04
I tried to make the log, but both the file S.log and mycombinedlog are Did I wrong somewhere?
hongquan at Pangolin ~ $ cat .gnupg/scdaemon.conf
log-file socket://home/hongquan/.gnupg/S.log
debug 1024
debug 2048
hongquan at Pangolin ~ $ cat .gnupg/gpg-agent.conf
log-file socket://home/hongquan/.gnupg/S.log
debug 1024

@_date: 2012-05-31 08:39:42
@_author: =?UTF-8?B?Tmd1eeG7hW4gSOG7k25nIFF1w6Ju?= 
@_subject: GnuPG 2 + OpenPGP card on F17 
After pkill gpg-agent, it seems that gg-agent still run:
hongquan at Pangolin ~ $ pkill gpg-agent
hongquan at Pangolin ~ $ ps ax | grep gpg-agent
 1991 ?        Ss     0:00 /usr/bin/ssh-agent /usr/bin/gpg-agent
--daemon --sh
 1992 ?        Zs     0:00 [gpg-agent]  4094 pts/3    S+     0:00 grep --colour=auto gpg-agent
Do you have any idea?

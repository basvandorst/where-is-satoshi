
@_date: 2004-10-14 18:16:28
@_author: Nico Schottelius 
@_subject: Extracting information from a key 
If I recieved a public key via E-Mail, but I am not sure whether
I want to import it. Can gnupg before importing
- display the ID of it (readable by other programs)
- display E-Mail, Name
- display signatures on the key
- display other information (key type, length)
Thanks for any help,
P.S.: Thank you David for the --status-fd hint, does mostly what I want!

@_date: 2004-10-15 15:07:35
@_author: Nico Schottelius 
@_subject: Extracting information from a key 
Werner Koch [Thu, Oct 14, 2004 at 10:56:04PM +0200]:
Sounds good, but is there any promise the output won't change?
scice% cat my-pgp-key | gpg -i                               pub  1024D/8D0E27A4 2003-01-12 Nico Schottelius (the penguin gets you) uid                            Nico Schottelius (the penguin gets you) uid                            Nico Schottelius (business) uid                            Nico Schottelius (the penguin gets you) sub  4096g/3976EA51 2003-01-12 [expires: 2007-01-11]
sub  4096R/C251BAE5 2004-05-08 [expires: 2007-05-08]
works fine, but when trying with --status-fd option (which I use
for communication between my program and gpg) the output is still the
same and using
scice% cat my-pgp-key | gpg -i --status-fd 3 3>&1 >/dev/null does not display any output
(`cat my-pgp-key | gpg -i --status-fd 3 3>&1` displays the same as
just using gpg -i).
`cat my-pgp-key | gpg -v` is as good/bad useable, as it's still human readable output, which is not bad, but which could perhaps change.
Using scice% cat my-pgp-key | gpg -v --status-fd 3 3>&1  | grep 'GNUPG:' gpg: armor header: Version: GnuPG v1.2.5 (GNU/Linux)
gpg: NOTE: signature key 401F6AA5 expired Wed Nov 13 16:03:36 2002 CET
[GNUPG:] KEYEXPIRED 1037199816
[GNUPG:] SIGEXPIRED deprecated-use-keyexpired-instead
I don't get any useful information.
Are there any plans to realize putting this information to the status-channel,
so other programs can simply extract this information?
Or do you (the developers) tell me that the output of gpg -v or gpg -i
will never change? If so, I'll be able to use the standard human output.
Thanks for any information again,

@_date: 2004-09-24 17:07:13
@_author: Nico Schottelius 
@_subject: Decrypting without designing? 
I am programming an encrypted mailing list and want to use gpg
Now I am a bit stuck, as I want only to decrypt a file, but not remove
the signature. Is that somehow possible?
The background:
I have the following workplan for the part of the mailing list manager,
which handles the mail:
--- ---  --- ---  --- ---     1. Check if it is adressed to us. If not, bounce. [ok]
   2. Check if the sender is subscribed. [ok]
      no: Check if ml is open for everyone (open_list)
         no: bounce
         yes: add bfw: Sender_unknown
   3. Check whether message is encrypted for us [ok]
      no: bounce with bfw (BIG FAT WARNING)
      yes: decrypt
   4. subscribed only: Check whether sig is ok
      no: bounce
   5. Remove signature / Add own signature (really??) [???]
   6. encrypt for each recipent and send
--- ---  --- ---  --- ---  Ponts 1-3 are problemsless. But when the message is decrypted,
gpg -d also removes the signature. The ML software also checks
whether the key used to sign fits to the address subscribed.
If I have an encrypted, but not signed message and I pipe it
through "gpg -u "$PGPID" -q --no-verbose --batch -d" it
returns 0 (as expected). The problem is, gpg returns the same,
if I have an encrypted and signed message.
Can anyone give me a hint how to see the difference?
P.S.: Here's how it looks like:
bruehe% cat mail.crypted.signed.ecml | SENDER=nico-confirmtest ./ecml-manage ./testml/
gpg-return: 0
bruehe% cat mail.only.crypted.not.signed | SENDER=nico-confirmtest ./ecml-manage ./testml/
gpg-return: 0

@_date: 2004-09-25 15:28:56
@_author: Nico Schottelius 
@_subject: Decrypting without designing? 
Was that the wrong list to ask the question?
If so, can someone redirect me to the right list?
Nico Schottelius [Thu, Sep 23, 2004 at 04:12:17PM +0200]:

@_date: 2004-09-27 11:45:12
@_author: Nico Schottelius 
@_subject: Decrypting without designing? 
I am programming an encrypted mailing list and want to use gpg
Now I am a bit stuck, as I want only to decrypt a file, but not remove
the signature. Is that somehow possible?
The background:
I have the following workplan for the part of the mailing list manager,
which handles the mail:
--- ---  --- ---  --- ---     1. Check if it is adressed to us. If not, bounce. [ok]
   2. Check if the sender is subscribed. [ok]
      no: Check if ml is open for everyone (open_list)
         no: bounce
         yes: add bfw: Sender_unknown
   3. Check whether message is encrypted for us [ok]
      no: bounce with bfw (BIG FAT WARNING)
      yes: decrypt
   4. subscribed only: Check whether sig is ok
      no: bounce
   5. Remove signature / Add own signature (really??) [???]
   6. encrypt for each recipent and send
--- ---  --- ---  --- ---  Ponts 1-3 are problemsless. But when the message is decrypted,
gpg -d also removes the signature. The ML software also checks
whether the key used to sign fits to the address subscribed.
If I have an encrypted, but not signed message and I pipe it
through "gpg -u "$PGPID" -q --no-verbose --batch -d" it
returns 0 (as expected). The problem is, gpg returns the same,
if I have an encrypted and signed message.
Can anyone give me a hint how to see the difference?
P.S.: Here's how it looks like:
bruehe% cat mail.crypted.signed.ecml | SENDER=nico-confirmtest ./ecml-manage ./testml/
gpg-return: 0
bruehe% cat mail.only.crypted.not.signed | SENDER=nico-confirmtest ./ecml-manage ./testml/
gpg-return: 0

@_date: 2006-11-27 17:24:48
@_author: Nico Schottelius 
@_subject: Encrypt + Sign format? 
When I encrypt and sign a message, is the signature also
crypted or is it around the encrypted part?

@_date: 2007-08-05 01:25:41
@_author: Nico Schottelius 
@_subject: gpgme: A small introduction started 
Hello again!
Sorry for the last mail, was a largefile support problem (missed
As I did not find any easy to use documentation for gpgme, I started to
write one: Feel free to comment it.
I'll extend it, as I continue to write more tests / examples.

@_date: 2007-08-05 00:05:18
@_author: Nico Schottelius 
@_subject: gpgme: export key problems 
I'm new to gpgme and have some understanding problems:
I'm trying to export a key:

@_date: 2007-08-09 22:42:13
@_author: Nico Schottelius 
@_subject: key sizes: maximum size and shrinking 
Hello guys!
We are trying to write a chat protocol, which uses gpg (gpgme
especially) for encryption / signing. As it is an chat protocol, we try
to keep latency down.
As far as I can see the biggest packets we'll have are those containing
the key exchange (as others are only messages, transport protocol
metadata, ..., but no packet is > 1 KiB).
I did some tests (dirty notes attached) and it looks like the whole
packet is about 5KiB (which is pretty much):
   4096-bit dsa-elgamal public key, binary: 1680 Bytes
   + Initial Key exchange metadata / data: 2 + 2 + 4 + 128 tp + 2 =  138 Bytes
   = 3008 bytes for one inner packet, containing one transport protocol
   + n * 128 bytes nexthop specification, n == 8, => 1024 Bytes
      testing showed 128 bytes are enough, see doc/packets/outer-draft1 for tests
   + encyption + signatur
      = 4033 Bytes in test
   ==> ~ 5 KiB including possible bigger keys
That's really much, as we intend to have static packet sizes (indenpendent of content,
so external watchers cannot see which type of packet is sent) and
continues traffic (so one cannot determine if we send data or noise).
The first idea was to use a send interval of 250ms, but that would make
 ~20KiB/s + protocol overhead (transport protocols maybe mostly everything,
 including. http, smtp, ftp, ..., everything that may transport bytes).
With this size we could only do a maximum of 2s intervals...
So my questions to you gnupg experts are:
-  Is there a maximum size for an exported, non-armored public key?
   => if yes, we could use that as a base and pad the rest
-  Are there any good (possibly gnupg / gpgme included) methods to shrink
   the size of the exported public key?
-  Or would you recommened using gzip/bzip2/lzma additionally?
   As far as I've tested it, gzip and bzip2 are just adding header
   overhead, so I assume gnupg already does some compression itself.
Thanks for any hint,

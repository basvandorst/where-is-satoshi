
@_date: 2008-04-16 15:37:11
@_author: Meenal Pant 
@_subject: --gen-revoke in batch 
Hello all,
Can the "gpg --gen-revoke user" command be executed in batch mode? I am
trying to generate revocation certificate for a gpg keypair through a
Python script.

@_date: 2008-04-17 13:28:49
@_author: Meenal Pant 
@_subject: --gen-revoke in batch 
Thanks for the prompt response Werner. I have a few more questions.
I guess I can use gpg here ?
I can get till here.
Are these commands generated by GPG ?
This I see is the user input. This is what I have to capture.
What is FSM ? Finite State Machine. How can I use this?
What if LF ?
I need to write the revocation certificate to a file too.
Many Thanks

@_date: 2008-04-29 11:09:35
@_author: Meenal Pant 
@_subject: --gen-revoke in batch 
Based on Werner's suggestion, I have a test script now to create
revocation certificates.
I use this command in the script:
gpg -a -o "rev.asc"  --command-fd 0 --status-fd 2 --gen-revoke 409900FC
The responses entered by the script are all strings followed by an LF.
The output is as follows:
[GNUPG:] GOT_IT
Reason for revocation: Key has been compromised
(No description given)
[GNUPG:] GET_BOOL ask_revocation_reason.okay
[GNUPG:] GOT_IT
[GNUPG:] USERID_HINT 90FBD027409900FC Testkey (test) [GNUPG:] NEED_PASSPHRASE 90FBD027409900FC 90FBD027409900FC 17 0
You need a passphrase to unlock the secret key for
user: "Testkey (test) "
1024-bit DSA key, ID 409900FC, created 2008-04-17
[GNUPG:] GET_HIDDEN passphrase.enter
[GNUPG:] GOT_IT
[GNUPG:] BAD_PASSPHRASE 90FBD027409900FC
gpg: Invalid passphrase; please try again ...
[GNUPG:] USERID_HINT 90FBD027409900FC Testkey (test) [GNUPG:] NEED_PASSPHRASE 90FBD027409900FC 90FBD027409900FC 17 0
You need a passphrase to unlock the secret key for
user: "Testkey (test) "
1024-bit DSA key, ID 409900FC, created 2008-04-17
[GNUPG:] GET_HIDDEN passphrase.enter
[GNUPG:] GOT_IT
[GNUPG:] MISSING_PASSPHRASE
[GNUPG:] BAD_PASSPHRASE 90FBD027409900FC
gpg: Invalid passphrase; please try again ...
[GNUPG:] USERID_HINT 90FBD027409900FC Testkey (test) [GNUPG:] NEED_PASSPHRASE 90FBD027409900FC 90FBD027409900FC 17 0
Now when I run the same command on command line it works and a
revocation certificate is created.
[GNUPG:] GET_BOOL ask_revocation_reason.okay
[GNUPG:] GOT_IT
[GNUPG:] USERID_HINT 90FBD027409900FC Testkey (test) [GNUPG:] NEED_PASSPHRASE 90FBD027409900FC 90FBD027409900FC 17 0
You need a passphrase to unlock the secret key for
user: "Testkey (test) "
1024-bit DSA key, ID 409900FC, created 2008-04-17
[GNUPG:] GET_HIDDEN passphrase.enter
[GNUPG:] GOT_IT
[GNUPG:] GOOD_PASSPHRASE
ASCII armored output forced.
File `rev.asc' exists.
[GNUPG:] GET_BOOL openfile.overwrite.okay
[GNUPG:] GOT_IT
[GNUPG:] GOOD_PASSPHRASE
Revocation certificate created.
Please move it to a medium which you can hide away; if Mallory gets
access to this certificate he can use it to make your key unusable.
It is smart to print this certificate and store it away, just in case
your media become unreadable.  But have some caution:  The print system of
your machine might store the data and make it available to others!
Any idea why entering the passphrase as a string in the script is not
working ?

@_date: 2008-05-01 12:13:34
@_author: Meenal Pant 
@_subject: Version 4 / Version 3 keys 
Are V3 keys commonly used or do all latest versions of GPG and PGP
support V4 keys only?

@_date: 2008-05-01 12:21:43
@_author: Meenal Pant 
@_subject: GPG warning for integrity protection 
Hello all,
When I decrypt a message I sometimes see this warning:
gpg: WARNING: message was not integrity protected
I read through the Open PGP RFC and understood that using MDC ensures
message integrity for encrypted messages. If I use MDC to encrypt
messages this warning will go away.
How can I use MDC for Public Key Encryption ? Does the key have an MDC
flag that needs to be set during key generation ?

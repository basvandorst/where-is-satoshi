
@_date: 2008-10-22 11:35:24
@_author: Adam Robins 
@_subject: Problem running automated gpg 
I have a perl script called encrypt.pl that runs gpg as follows:
system("gpg -r 'username' --batch --encrypt-files 'filename.ext'
When I run this from the console as root it works fine.  However, if I
run it from cron as root:
*/1 * * * * root  /home/user/scripts/encrypt.pl 2> gpgerr.log
I get the following error:
gpg: failed to create temporary file
`~/.gnupg/. No such file or
gpg: fatal: ~/.gnupg: can't create directory: No such file or directory
secmem usage: 0/0 bytes in 0/0 blocks of pool 0/32768
The directory "/root/.gnupg" is there.  Permissions are drwx------ root
root.  I also tried chmod 777.
If I put a command in the perl script:
System('echo ~');
I get "/root" as a result.  This leads me to believe that gpg is trying
to place the temp file in a directory other than "/root/.gnupg" when run
from cron.
Any ideas are appreciated.
_____________________________________________________________ Adam Robins, CCP
Executive Vice President / Chief Information Officer
PHARMACENTRA, LLC 5901B Peachtree Dunwoody Road, Suite 380
Atlanta, GA 30328
Office:  770-395-0088 x2034
Mobile: 770-855-1360
Fax:     770-395-0989
E-mail:  arobins at pharmacentra.com  Web:      _____________________________________________________________

@_date: 2008-10-28 08:55:44
@_author: Adam Robins 
@_subject: Problem running automated gpg 
Thanks.  This has been resolved by placing the parameter "--homedir
-----Original Message-----
Sent: Tuesday, October 28, 2008 8:57 AM
Tried to figure this one out, but no direct clue. My suggestions:
create a shell script and call the shell script from perl, rather than
directly calling gpg with all the parameters. Second, try to print the
current user from within perl similarly as printing ~. These two might
give you some clue.
Hardeep Singh
2008/10/22 Adam Robins :
trying to

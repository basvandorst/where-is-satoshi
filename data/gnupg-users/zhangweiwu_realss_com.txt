
@_date: 2007-09-03 19:44:21
@_author: Zhang Weiwu 
@_subject: old question: invalid trustdb (workarounds on the Internet doesn't 
I created my .gnupg folder 3 years ago when I was using a Sun Sparc
workstation + Gentoo Linux. For the years I moved to many different
workstations, I always copy this folder to new workstations and it
always worked. The last workstation working with this .gnupg directory
is running SuSE 10.0
Now I copied this directory to my iBook (with powerpc) runs Ubuntu 7.04
and I am no longer able to send encrypted emails. I try with command line:
zhangweiwu at esmeralda:~$ gpg --list-keys
gpg: 0: read expected rec type 1, got 42
gpg: fatal: /home/zhangweiwu/.gnupg/trustdb.gpg: invalid trustdb
secmem usage: 0/0 bytes in 0/0 blocks of pool 0/32768
Google around I found multiple posts about this issue and they all
suggest version incompatibility. But these posts are several years old
(e.g. some say I should try export trustdb using 1.0.4 but actually I
have 1.4.6)
Some posts also suggested move trustbd elsewhere and let gnupg re-create
one, I did but doesn't work:
zhangweiwu at esmeralda:~$ mv .gnupg/trustdb.gpg /tmp/
zhangweiwu at esmeralda:~$ gpg --list-keys
gpg: /home/zhangweiwu/.gnupg/trustdb.gpg: trustdb created
gpg: [don't know]: indeterminate length for invalid packet type 13
gpg: keydb_search_first failed: invalid packet
zhangweiwu at esmeralda:~$ gpg --list-keys
gpg: [don't know]: indeterminate length for invalid packet type 13
gpg: keydb_search_first failed: invalid packet
So what can I do to recover my old keys? I try not to create a new key
because then again I have to let each receipt re-trust my new key.
Thanks in advance!

@_date: 2007-09-07 16:30:32
@_author: Zhang Weiwu 
@_subject: old question: invalid trustdb (workarounds on the Internet 
It turns you are right! The files are corrupted and re-copy from the
sparc workstation instanatly solves the problem!
Thank you very much!

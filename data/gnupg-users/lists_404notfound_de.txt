
@_date: 2009-04-25 18:27:44
@_author: Raimar Sandner 
@_subject: certificate chain depth 
when gnupg trusts a key as a result of trustdb calculations, I would
like to know what the chain depth for the given key is.
I know that I can control the maximal acceptable depth with the
max-cert-depth configuration parameter. I would like to keep the
default of 5, but it is still a difference regarding the
trustworthiness of a key if it is frully trusted in, say, third or fifth level.
Manually following the trust chains can be annoying, and could also
lead to false conclusions as in the following small example:
Say we have marginals-needed=2, completes-needed=1 and the web of trust is
#   me -> A ---------> E
#   |     \---> D ----/
#   \-> B -> C /
with the ownertrust values
A: marginal
D: marginal
C: marginal
B: full
On a first glance one might think as we have the chains me->A->E and
me->A->D->E, that E is fully trusted in third level. But because D
only is trusted in third level (me->B->C->D), E is actually trusted
in fourth level. This rapidly gets more complex with a growing web
of trust.
As of now I can only think of gradually reducing max-cert-depth,
recalculating trustdb and see, if a given key stays fully trusted.
Is there a better way to determin the cert depth? If not, I think
this would be a nice feature to implement.
Cheers,     Raimar

@_date: 2009-04-25 21:46:32
@_author: Raimar Sandner 
@_subject: certificate chain depth 
Not over-simplistic, you're definitely right about this. The best thing to do still is to go out, sign keys and thus establish trust. But as you say that is not always possible in a large community.
In the end it is of course a people thing whether you trust a key or not, no mathematical model ever can replace your final decision. So there is a big difference in gpg saying "fully trusted" and you thinking "fully trusted".
I think _because_ it's a people thing, feedback from gpg about the depth would be nice. Say over time I have added a lot of keys to my keyring, assigned ownertrust values, and now encounter a signature, gpg saying "Good signature, key fully trusted". I would appreciate an option to see at first glance whether gpg takes the key as fully trusted because I signed it or because a friend's friend signed it, to help me make a final decission.
The web of trust is a great way to establish some amount of trust into new keys when you cannot meet the owner. But I think that maybe gpg could help differentiate a bit more between keys introduced through the web of trust and keys that I have signed personally, for example by showing the depth level.
I'd rather say "give a hint about trust" than "measure trust" :)

@_date: 2009-04-26 00:18:05
@_author: Raimar Sandner 
@_subject: certificate chain depth 
Well, as I understand those two are quite different. The owner trust refers to my personal trust in the _owner_ of a key to correctyl sign other keys. The calculated trust refers to the validity of a _key_ (and is of course calculated  based on the ownertrust values belonging to the signatures attached to this key). So one is trust in a key (here gpg can give a hint) and one is trust in people (here gpg cannot say anything). But they are not trust values refering to the same thing, one being my opinion and one gpg's.

@_date: 2009-04-26 00:27:57
@_author: Raimar Sandner 
@_subject: certificate chain depth (technical) 
So as the discussion tends to drift a bit off-topic (no offense), I would like to dedicate this sub-thread to the technical question asked. Is there some way to determin the certificate depth? I regard it to be useful information, maybe someone else does too. I suppose the value should be present somewhere in the trustdb, just not accessible right now.
   Raimar

@_date: 2009-04-26 09:54:07
@_author: Raimar Sandner 
@_subject: certificate chain depth (technical) 
With "we store this as 1", you mean that when B signs D(uid1), uid1
being the only uid on D, D(uid1) and thus D as a whole is regarded
to be valid at level 2 (given sufficiant ownertrust of B)?
I ask that because signatures are made by keys, not by uids. Gpg
regards a signature to be valid, if and only if there is at least
one fully valid uid on the signing key, right? Wouldn't it then be
consistent to regard a key as a whole valid at level n, if it has a
uid signed by a key which has at least one uid being valid at level
Thank you, that actually helps me a lot. I didn't know the -v -v
switch of --check-trustdb up to now.

@_date: 2009-04-29 15:31:51
@_author: Raimar Sandner 
@_subject: How easy would it be to create (and prevent the creation of) a 
The pinentry should only pop up when the application actually needs the key do do something. If pinentry pops up without you doing someting that requires your secret key, you should be worried.
And the problem is not specific to pinentry: in order to steal passphrases on the console you could as well install a gpg wrapper script or binary.
I think if someone has this kind of control (executing arbitrary code on your machine), there is no way to prevent passphrase stealing. Am I wrong here?


@_date: 2000-11-27 14:24:29
@_author: Jack McKinney 
@_subject: Can't decrypt .gpg file 
Content-Disposition: inline
    I created a file using gpg with a command like this:
tar -cvf - . | gpg --passphrase-fd 3 -c 3<<< "my key" > backup.tar.gpg
    I created a script with this command in it to make sure that I always
used the commands correctly.  I just ran it on some data, and the file
it created had a size approxiamately corresponding to the size of the
input (around 650MB).
    When I created this script, I am CERTAIN that I test the resulting
file to make sure that I could decrypt it.  However, just today, after
processing the 650M directory, I tried to decrypt the file with
'gpg backup.tar.gpg'.  It responded with 'gpg: no valid OpenPGP data found.'
'tar -tf' said it wasn't a tar file either.
    Any idea what happened to my data?  Why is the output the same size
as the input if it is not in either gpg or tar format???
"There is no parameter that makes it impossible        Jack McKinney
     for you to perform still more excellently."       jackmc
   -Mario Cuomo, on the lack of a clock in baseball    1024D/D68F2C07 4096g/38AEF076
Content-Disposition: inline

@_date: 2000-11-27 14:57:31
@_author: Jack McKinney 
@_subject: File size limit in GnuPG??? 
Content-Disposition: inline
     Alright, here's a good one for you.  As I mentioned in an earlier
email, I wrote a shell script wrapper to tar up some files and then
encrypt the tarball.  I did this earlier on a 650M directory, and the
resulting 650M file was neither gpg or tar.  So, I posted.  Then, I
grabbed a 250M directory and used the EXACT SAME SCRIPTS.  This time,
the resulting file works!
     Is there a file size limit in GnuPG?????
     I am running Debian 2.2/Linux 2.2.17/GnuPG 1.04.
     My scripts appear below.
     To be specific, I went to a directory that had a bunch of .tar.gz
files of software I had downloaded and typed:
$ gpgtar * > ../archives.tar.gpg
     I then did:
$ cd .. ; mkdir archives2 ; cd archives2 ; gpguntar ../archives.tar.gpg
     The files decrypted and unpacked perfectly.  When I had done the
exact same thing earlier with the 650M directory, the resulting file
$ gpg earlier.tar.gpg
gpg: no valid OpenPGP data found.
$ gpg --list-packets earlier.tar.gpg
gpg: no valid OpenPGP data found.
"What we observe is not nature itself, but nature  Jack McKinney
 exposed to our method of questioning.                      -Werner Karl Heisenberg                   jackmc
                                                   1024D/D68F2C07 4096g/38AEF076
echo -n 'Passphrase: ' >&2
stty -echo
read p1
stty echo
echo -n 'Repeat: ' >&2
stty -echo
read p2
stty echo
if [[ $p1 != $p2 ]]
  echo Mismatch >&2
  exit 1
tar -cvf - $* | gpg --passphrase-fd 3 -c 3<<< $p1
echo -n 'Passphrase: ' >&2
stty -echo
read p1
stty echo
gpg --passphrase-fd 3 < $1 3<<< $p1 | tar -xvf -
Content-Disposition: inline

@_date: 2000-11-28 11:32:45
@_author: Jack McKinney 
@_subject: Can't decrypt .gpg file 
Content-Disposition: inline
Content-Disposition: inline

@_date: 2000-11-27 14:24:29
@_author: Jack McKinney 
@_subject: Can't decrypt .gpg file 
Content-Disposition: inline
    I created a file using gpg with a command like this:
tar -cvf - . | gpg --passphrase-fd 3 -c 3<<< "my key" > backup.tar.gpg
    I created a script with this command in it to make sure that I always
used the commands correctly.  I just ran it on some data, and the file
it created had a size approxiamately corresponding to the size of the
input (around 650MB).
    When I created this script, I am CERTAIN that I test the resulting
file to make sure that I could decrypt it.  However, just today, after
processing the 650M directory, I tried to decrypt the file with
'gpg backup.tar.gpg'.  It responded with 'gpg: no valid OpenPGP data found.'
'tar -tf' said it wasn't a tar file either.
    Any idea what happened to my data?  Why is the output the same size
as the input if it is not in either gpg or tar format???
"There is no parameter that makes it impossible        Jack McKinney
     for you to perform still more excellently."       jackmc
   -Mario Cuomo, on the lack of a clock in baseball    1024D/D68F2C07 4096g/38AEF076
Content-Disposition: inline

@_date: 2000-11-27 14:57:31
@_author: Jack McKinney 
@_subject: File size limit in GnuPG??? 
Content-Disposition: inline
     Alright, here's a good one for you.  As I mentioned in an earlier
email, I wrote a shell script wrapper to tar up some files and then
encrypt the tarball.  I did this earlier on a 650M directory, and the
resulting 650M file was neither gpg or tar.  So, I posted.  Then, I
grabbed a 250M directory and used the EXACT SAME SCRIPTS.  This time,
the resulting file works!
     Is there a file size limit in GnuPG?????
     I am running Debian 2.2/Linux 2.2.17/GnuPG 1.04.
     My scripts appear below.
     To be specific, I went to a directory that had a bunch of .tar.gz
files of software I had downloaded and typed:
$ gpgtar * > ../archives.tar.gpg
     I then did:
$ cd .. ; mkdir archives2 ; cd archives2 ; gpguntar ../archives.tar.gpg
     The files decrypted and unpacked perfectly.  When I had done the
exact same thing earlier with the 650M directory, the resulting file
$ gpg earlier.tar.gpg
gpg: no valid OpenPGP data found.
$ gpg --list-packets earlier.tar.gpg
gpg: no valid OpenPGP data found.
"What we observe is not nature itself, but nature  Jack McKinney
 exposed to our method of questioning.                      -Werner Karl Heisenberg                   jackmc
                                                   1024D/D68F2C07 4096g/38AEF076
echo -n 'Passphrase: ' >&2
stty -echo
read p1
stty echo
echo -n 'Repeat: ' >&2
stty -echo
read p2
stty echo
if [[ $p1 != $p2 ]]
  echo Mismatch >&2
  exit 1
tar -cvf - $* | gpg --passphrase-fd 3 -c 3<<< $p1
echo -n 'Passphrase: ' >&2
stty -echo
read p1
stty echo
gpg --passphrase-fd 3 < $1 3<<< $p1 | tar -xvf -
Content-Disposition: inline

@_date: 2000-11-28 11:32:45
@_author: Jack McKinney 
@_subject: Can't decrypt .gpg file 
Content-Disposition: inline
Content-Disposition: inline

@_date: 2000-10-16 10:43:46
@_author: Jack McKinney 
@_subject: Creating RSA key 
From the 'NEWS' file in the gnupg-1.0.3 distribution:
Noteworthy changes in version 1.0.3 (2000-09-18)

@_date: 2000-10-16 12:05:27
@_author: Jack McKinney 
@_subject: Deleting signature 
How does one delete a signature from a key?  I am currently playing
around with GnuPG before using it (checking out how it implements all
of the options, etc.).  I created a key, and then signed it with a key
I created from another machine.  Then, I deleted the key from the other
machine, and my copy of it on my key ring.  Now, my key has a signature
that is unidentified because the key that signed it is not on the ring.
    So, I use gpg --edit-key.  'help' at the command prompt there revealed
the delsig command.  Typing delsig produces 'You must select at least one
user ID.'  I tried typing delsig followed by the keyID of the key, and
that didn't work.  Typing 'list' listed the key on my key ring I was
editing, with a '(1)' next to my email and name, which made me think that
perhaps I should type 'delsig 1'.  Two problems: the email listed was for
my key, not the remote key, meaning that it could represent my self-sig,
not the remote one.  Also, the other one wasn't listed at all.  Typing
'check' listed the valid self-sig, and the unidentified sig.  Still no
clue how to tell delsig which sig to delete.
    I did a 'fgrep -il delsig *' in the gpg-1.0.3/doc directory to no
avail.  How do I use the delsig command???

@_date: 2000-10-17 13:15:32
@_author: Jack McKinney 
@_subject: verifying signatures in .forward/.qmail files 
Hash: SHA1
    I'd like to be able to verify signatures from within a script.
What I need is a gpg command that will check for a valid signature
and return the validity possibly via the return code.
    My goal is to use qmail's condredirect feature (for sendmail users:
it is possible with qmail to put a command into your '.forward' file
that either redirects, drops, or keeps the message based on the return
code of a specified script) to redirect incoming email to a separate
folder if it has a valid signature.  There will be some issues in writing
this script (is the signature in a separate attachment, or in a clearsigned
message, etc.).  I can write the script to account for these details, but
I need gpg syntax for checking signatures quietly, and returning the
result in a computer readble way (optimally, I'd like gpg to output the
matching keyid, or even entries user id entry).
    My ultimate goal is going to be to set up an ezmlm mailing list, where
subscription requires that your subscription request contain your public
key.  In order to post to the list, your message must be signed by the
public key you originally submitted.  With a few more enhancements, one
could implement a secure moderated list in this way.

@_date: 2000-10-23 12:32:29
@_author: Jack McKinney 
@_subject: understanding what gnugp can do 
Content-Disposition: inline
    Quite so.  Go to the Mountain Dew fountain and say three "Hail, Linus"'s.
    Then, consider putting putty on her windoze box so that she can ssh
to a unix box and run mutt there...
    There _is_ (so I hear) a project to make a windoze interface, but I
could never find anything on it.  Someone once posted a link in this
regard:   However, this was about writing
a KDE or GNOME interface or something and I didn't see any mention of
    OTOH, I have seen a lot of complaints about the way Microsoft Outlook
formats messages encrypted with gpg, so there ought to be _something_...
"Restore your inalienable human rights.       Jack McKinney
 Vote Libertarian.                           jackmc
                                              1024D/D68F2C07 4096g/38AEF076
Content-Disposition: inline

@_date: 2000-10-16 10:43:46
@_author: Jack McKinney 
@_subject: Creating RSA key 
From the 'NEWS' file in the gnupg-1.0.3 distribution:
Noteworthy changes in version 1.0.3 (2000-09-18)

@_date: 2000-10-16 12:05:27
@_author: Jack McKinney 
@_subject: Deleting signature 
How does one delete a signature from a key?  I am currently playing
around with GnuPG before using it (checking out how it implements all
of the options, etc.).  I created a key, and then signed it with a key
I created from another machine.  Then, I deleted the key from the other
machine, and my copy of it on my key ring.  Now, my key has a signature
that is unidentified because the key that signed it is not on the ring.
    So, I use gpg --edit-key.  'help' at the command prompt there revealed
the delsig command.  Typing delsig produces 'You must select at least one
user ID.'  I tried typing delsig followed by the keyID of the key, and
that didn't work.  Typing 'list' listed the key on my key ring I was
editing, with a '(1)' next to my email and name, which made me think that
perhaps I should type 'delsig 1'.  Two problems: the email listed was for
my key, not the remote key, meaning that it could represent my self-sig,
not the remote one.  Also, the other one wasn't listed at all.  Typing
'check' listed the valid self-sig, and the unidentified sig.  Still no
clue how to tell delsig which sig to delete.
    I did a 'fgrep -il delsig *' in the gpg-1.0.3/doc directory to no
avail.  How do I use the delsig command???

@_date: 2000-10-17 13:15:32
@_author: Jack McKinney 
@_subject: verifying signatures in .forward/.qmail files 
Hash: SHA1
    I'd like to be able to verify signatures from within a script.
What I need is a gpg command that will check for a valid signature
and return the validity possibly via the return code.
    My goal is to use qmail's condredirect feature (for sendmail users:
it is possible with qmail to put a command into your '.forward' file
that either redirects, drops, or keeps the message based on the return
code of a specified script) to redirect incoming email to a separate
folder if it has a valid signature.  There will be some issues in writing
this script (is the signature in a separate attachment, or in a clearsigned
message, etc.).  I can write the script to account for these details, but
I need gpg syntax for checking signatures quietly, and returning the
result in a computer readble way (optimally, I'd like gpg to output the
matching keyid, or even entries user id entry).
    My ultimate goal is going to be to set up an ezmlm mailing list, where
subscription requires that your subscription request contain your public
key.  In order to post to the list, your message must be signed by the
public key you originally submitted.  With a few more enhancements, one
could implement a secure moderated list in this way.

@_date: 2000-10-23 12:32:29
@_author: Jack McKinney 
@_subject: understanding what gnugp can do 
Content-Disposition: inline
    Quite so.  Go to the Mountain Dew fountain and say three "Hail, Linus"'s.
    Then, consider putting putty on her windoze box so that she can ssh
to a unix box and run mutt there...
    There _is_ (so I hear) a project to make a windoze interface, but I
could never find anything on it.  Someone once posted a link in this
regard:   However, this was about writing
a KDE or GNOME interface or something and I didn't see any mention of
    OTOH, I have seen a lot of complaints about the way Microsoft Outlook
formats messages encrypted with gpg, so there ought to be _something_...
"Restore your inalienable human rights.       Jack McKinney
 Vote Libertarian.                           jackmc
                                              1024D/D68F2C07 4096g/38AEF076
Content-Disposition: inline

@_date: 2000-09-06 11:41:38
@_author: Jack McKinney 
@_subject: RSA in GnuPG? 
From the GnuPG FAQ:
3.3) How do I include support for RSA and IDEA? The official GnuPG distribution (as of 1.0.2) does not contain either of them due to patents restriction. The RSA patent expires Sept
20, 2000. A new GnuPG release is then scheduled to include it. The IDEA patent does not expire before 2007 so don't expect official
support before then.      I suspect that the incorporation is already done, and that it was going
to be released in two weeks.  Perhaps they will go ahead and release it

@_date: 2000-09-06 15:19:51
@_author: Jack McKinney 
@_subject: Free at last 
As a fellow mathematician, let me point out that the celebration is
not over the release.  There are many who have champagne bottles earmarked
for Sept. 20:  Pick a positive integer.  Raise it to another positive
integer.  Then, find the remainder when divided by a third number. Then,
pay a royalty for what could easily have been a question on a Number Theory
exam testing the student's knowledge of the powermod algorithm for quickly
computing exponents in Z_n.
   The celebration is that an algorithm that corresponds to two basic
mathematical operations that have been in use for centuries is finally
being returned to the public.  Patenting the RSA algorithm is like
copyrighting the fact that Americans answer the phone 'Hello', or the
japanese 'Mushi, mushi'.  It is obsurd.  It is now moot.  The celebration
you are seeing everywhere was going to happen two weeks from now, exactly
16 years, 50 weeks later than it should have.  It is just happening

@_date: 2000-09-18 13:08:33
@_author: Jack McKinney 
@_subject: encrypting as "nobody" 
I am still not convinced of the security of GnuPG, yet (I am one of
those PGP 2.6.* die hards), but, I can tell you what I did with PGP to
make this work:
    Firstly, create a brand new key for this application: don't use your
regular one.
    Secondly, create a homedir for nobody, or, even better, create a
new user for the web server with the SERVER_ROOT as homedir.
    Thirdly, add the public portion of that key to the keyring in the
web user's homedir (i.e., export the key from your ring, and then
import it into the web users ring).  Now you can encrypt files from
the web server securely.  The most (theoretically) that someone could
get from hacking through the web server is the public key that files
are being encrypted with.  In an ideal world, the secret key wouldn't
even reside on the server: you create it on your secure desktop machine,
export the public portion, and copy it (scp!) to the server where you
import it into your web server's keyring.

@_date: 2000-09-21 09:54:52
@_author: Jack McKinney 
@_subject: RSA key-gen??? 
This document is a good example of what I was talking about.
Go to this link to verify the following:
Paragraph 3:
% It is, in fact, slightly harder to compute discrete logs modulo an
% appropriate prime than to factor a "hard" integer of the same size -
% so RSA would appear slightly weaker than DHP [Odl95], [Sch97c]. From
% [Sch99a]: "RSA users have to choose a larger key size those using than
% DH over GF(p), for equivalent security.
Paragraph 7:
% Another relevant quote [Wie98]: "The most important factor in choosing a
% public-key technology is security. Based on the best attacks known, RSA
% at 1024 bits, DSA and Diffie-Hellman at 1024 bits, and elliptic curves
% at about 170 bits give comparable levels of security.
     "slightly weaker".  "comparable levels of security".
     I point out that this part of the article is talking about DH, not
ElGamal.  They are NOT the same thing.  DH is a methodology of key exchange
that depends on selection of a finite group.  From earlier in the FAQ:
% ... ElGamal [ElG85], which is a public-key encryption variant of the
% Diffie-Hellman Problem (DHP)
% The security of the DH system is based upon the DH Problem (DHP). This
% problem is conjectured (but not proven) to be equivalent to the Discrete
% Logarithm Problem (DLP)
% DHP is equivalent to the DLP under the "Diffie-Hellman assumption"
    Earlier in the article, it talks about the downsides of DH:
% b.Signature Strength. Current implementations of DH only offer DSS as
% the signature algorithm. This limits key length to 1,024-bits which may,
% on its own, be insufficient for long term security. RSA signatures utilise
% a key of up to 2048 or 4096 bits (depending on the implementation).
    The only significant entries in the contrast (the downside of RSA) are:
% d. RSA offers less "security-per-bit" of key material than both DH/DSS.
% e. DH appears to be based upon more solid mathematical theory (see the
%    section "Any recent developments?" for details).
    For my opinion on these, see the earlier quotes.  As for the other
downsides, a) is defunct as of Sep 6; b) does not apply if you don't
choose to shoot yourself in the foot as it describes (key signing and
trust prevent a man-in-the-middle exploit of this); c) does not apply
in a document signing situation (though ssh has been using it anyway);
and f) is an implementation issue.  What if _I_ want to save the
transactions.  With DH, I can encrypt the data on my end, but then
someone could _still_ coerce my encryption key...
     I could go on for a while on this.  I have not taken the time yet
to study ElGamal mathematically (I am a mathematician), so I have no
inherent opinion.  The opinions I give above are just a demonstration
of how the FAQ is dancing around the security issue.  Somewhere in
that FAQ (I need to look again) is a paragraph that really made me
wary of using GnuPG.  If I find it, I'll post it.

@_date: 2000-09-21 16:53:07
@_author: Jack McKinney 
@_subject: CGI encryption (again) 
~ is a shell alias for $HOME.  If this environment variable is not
set, then gpg will fail.  Try running this cgi:
print "Content-type: text/html\n\n";
print "\n";
while(($k,$v) = each %ENV)
 {
  print "$k$v\b";
 }
print "\n";
exit 0;
     If you do not see HOME listed, then you'll probably need to set
it in your script.  In Perl, do:
$ENV{"HOME"} = "/usr/local/www";  # or whatever your user nobody homedir is.

@_date: 2000-09-06 11:41:38
@_author: Jack McKinney 
@_subject: RSA in GnuPG? 
From the GnuPG FAQ:
3.3) How do I include support for RSA and IDEA? The official GnuPG distribution (as of 1.0.2) does not contain either of them due to patents restriction. The RSA patent expires Sept
20, 2000. A new GnuPG release is then scheduled to include it. The IDEA patent does not expire before 2007 so don't expect official
support before then.      I suspect that the incorporation is already done, and that it was going
to be released in two weeks.  Perhaps they will go ahead and release it

@_date: 2000-09-06 15:19:51
@_author: Jack McKinney 
@_subject: Free at last 
As a fellow mathematician, let me point out that the celebration is
not over the release.  There are many who have champagne bottles earmarked
for Sept. 20:  Pick a positive integer.  Raise it to another positive
integer.  Then, find the remainder when divided by a third number. Then,
pay a royalty for what could easily have been a question on a Number Theory
exam testing the student's knowledge of the powermod algorithm for quickly
computing exponents in Z_n.
   The celebration is that an algorithm that corresponds to two basic
mathematical operations that have been in use for centuries is finally
being returned to the public.  Patenting the RSA algorithm is like
copyrighting the fact that Americans answer the phone 'Hello', or the
japanese 'Mushi, mushi'.  It is obsurd.  It is now moot.  The celebration
you are seeing everywhere was going to happen two weeks from now, exactly
16 years, 50 weeks later than it should have.  It is just happening

@_date: 2000-09-18 13:08:33
@_author: Jack McKinney 
@_subject: encrypting as "nobody" 
I am still not convinced of the security of GnuPG, yet (I am one of
those PGP 2.6.* die hards), but, I can tell you what I did with PGP to
make this work:
    Firstly, create a brand new key for this application: don't use your
regular one.
    Secondly, create a homedir for nobody, or, even better, create a
new user for the web server with the SERVER_ROOT as homedir.
    Thirdly, add the public portion of that key to the keyring in the
web user's homedir (i.e., export the key from your ring, and then
import it into the web users ring).  Now you can encrypt files from
the web server securely.  The most (theoretically) that someone could
get from hacking through the web server is the public key that files
are being encrypted with.  In an ideal world, the secret key wouldn't
even reside on the server: you create it on your secure desktop machine,
export the public portion, and copy it (scp!) to the server where you
import it into your web server's keyring.

@_date: 2000-09-21 09:54:52
@_author: Jack McKinney 
@_subject: RSA key-gen??? 
This document is a good example of what I was talking about.
Go to this link to verify the following:
Paragraph 3:
% It is, in fact, slightly harder to compute discrete logs modulo an
% appropriate prime than to factor a "hard" integer of the same size -
% so RSA would appear slightly weaker than DHP [Odl95], [Sch97c]. From
% [Sch99a]: "RSA users have to choose a larger key size those using than
% DH over GF(p), for equivalent security.
Paragraph 7:
% Another relevant quote [Wie98]: "The most important factor in choosing a
% public-key technology is security. Based on the best attacks known, RSA
% at 1024 bits, DSA and Diffie-Hellman at 1024 bits, and elliptic curves
% at about 170 bits give comparable levels of security.
     "slightly weaker".  "comparable levels of security".
     I point out that this part of the article is talking about DH, not
ElGamal.  They are NOT the same thing.  DH is a methodology of key exchange
that depends on selection of a finite group.  From earlier in the FAQ:
% ... ElGamal [ElG85], which is a public-key encryption variant of the
% Diffie-Hellman Problem (DHP)
% The security of the DH system is based upon the DH Problem (DHP). This
% problem is conjectured (but not proven) to be equivalent to the Discrete
% Logarithm Problem (DLP)
% DHP is equivalent to the DLP under the "Diffie-Hellman assumption"
    Earlier in the article, it talks about the downsides of DH:
% b.Signature Strength. Current implementations of DH only offer DSS as
% the signature algorithm. This limits key length to 1,024-bits which may,
% on its own, be insufficient for long term security. RSA signatures utilise
% a key of up to 2048 or 4096 bits (depending on the implementation).
    The only significant entries in the contrast (the downside of RSA) are:
% d. RSA offers less "security-per-bit" of key material than both DH/DSS.
% e. DH appears to be based upon more solid mathematical theory (see the
%    section "Any recent developments?" for details).
    For my opinion on these, see the earlier quotes.  As for the other
downsides, a) is defunct as of Sep 6; b) does not apply if you don't
choose to shoot yourself in the foot as it describes (key signing and
trust prevent a man-in-the-middle exploit of this); c) does not apply
in a document signing situation (though ssh has been using it anyway);
and f) is an implementation issue.  What if _I_ want to save the
transactions.  With DH, I can encrypt the data on my end, but then
someone could _still_ coerce my encryption key...
     I could go on for a while on this.  I have not taken the time yet
to study ElGamal mathematically (I am a mathematician), so I have no
inherent opinion.  The opinions I give above are just a demonstration
of how the FAQ is dancing around the security issue.  Somewhere in
that FAQ (I need to look again) is a paragraph that really made me
wary of using GnuPG.  If I find it, I'll post it.

@_date: 2000-09-21 16:53:07
@_author: Jack McKinney 
@_subject: CGI encryption (again) 
~ is a shell alias for $HOME.  If this environment variable is not
set, then gpg will fail.  Try running this cgi:
print "Content-type: text/html\n\n";
print "\n";
while(($k,$v) = each %ENV)
 {
  print "$k$v\b";
 }
print "\n";
exit 0;
     If you do not see HOME listed, then you'll probably need to set
it in your script.  In Perl, do:
$ENV{"HOME"} = "/usr/local/www";  # or whatever your user nobody homedir is.

@_date: 2003-11-18 18:07:41
@_author: Jack McKinney 
@_subject: Passphrase 
I use zsh, which allows one to redirect using "n<" and "n>".
It also allows the user to supply a string instead of having to connect
a process by using "<<<" and ">>>".  I then use it this way:
gpg --passphrase-fd 3 [options, etc.] 3<<< "My passphrase here"

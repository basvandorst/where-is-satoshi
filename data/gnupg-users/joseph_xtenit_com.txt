
@_date: 2002-08-13 22:51:01
@_author: Joseph Shraibman 
@_subject: build of 1.0.7 fails on redhat 6.x 
make[2]: Leaving directory `/home/data/src/gnupg-1.0.7/g10'
Making all in keyserver
make[2]: Entering directory `/home/data/src/gnupg-1.0.7/keyserver'
source='gpgkeys_ldap.c' object='gpgkeys_ldap.o' libtool=no \
depfile='.deps/gpgkeys_ldap.Po' tmpdepfile='.deps/gpgkeys_ldap.TPo' \
depmode=gcc /bin/sh ../scripts/depcomp \
gcc -DHAVE_CONFIG_H -I. -I. -I.. -I../include    -g -O2 -Wall -c `test -f gpgkeys_ldap.c In file included from gpgkeys_ldap.c:28:
 >rpm -qf /usr/include/ldap.h
part of ldap.h that causes problem:
typedef struct ldapmsg {
         int             lm_msgid;       /* the message id */
         int             lm_msgtype;     /* the message type */
         BerElement      *lm_ber;        /* the ber encoded message contents */
         struct ldapmsg  *lm_chain;      /* for search - next msg in the resp */
         struct ldapmsg  *lm_next;       /* next response */
         unsigned int    lm_time;        /* used to maintain cache */
} LDAPMessage;

@_date: 2002-08-13 23:14:02
@_author: Joseph Shraibman 
@_subject: build of 1.0.7 fails on redhat 6.x SOLVED 
I added
 to keyserver/gpgkeys_ldap.c and it compiles.

@_date: 2002-08-14 00:13:01
@_author: Joseph Shraibman 
@_subject: no valid OpenPGP data found with gpg 1.0.7 
What does "no valid OpenPGP data found." mean?  Why can't it recognize the encrypted file?
 > cat temp2.txt | gpg -v --decrypt
gpg: WARNING: --honor-http-proxy is a deprecated option.
gpg: please use "--keyserver-options honor-http-proxy" instead
gpg: Warning: using insecure memory!
gpg: please see  for more information
gpg: no valid OpenPGP data found.
gpg: decrypt_message failed: eof
 > cat temp2.txt
-----BEGIN PGP MESSAGE----- Version: GnuPG v1.0.7 (GNU/Linux)
   hQIOA2MnUDfgU3kFEAf9GmMhieRBJtgoN6AUk2lCMaLe+0SXA44hYkGRBJuOE7ex jeqQ1W0VNtkI8GMx/NqNHOnICoCGkRMQVFK5ggxz3MN1UubVRAmHI9akbPIhMjVI FQs2mQHexhyQ93W4XB6KEIeTg1zOzWt8Q+VZqlADHWjmBKhecNrtuHf8Gqnztato ybUuxcGXMrsVA80OVNeKUJ1SMFtmesW/gh9udddGw05ckx6Fzr8uhmvSjthpvSNb eYyzzW7gIHM6loZFyAPmqeecR6KEJ763jpguEGPSZfl06JTHXhJZUTP2yM7ywniz U6qZzSaw3u3KyslcZ1Kazc+DdWNE8bHpkrREwimOdAgAnZdoL9FRIN00n4s+ro3l aFuHXS18+YZ2rNePdZMneB/dYaeJ0Fp4FuF4swYN+gCOHix21oa5U9vm87WbLk/G y/hRbkLoQ9yXH9dgrh+OoEWwdMKrSgtbe/Twb0KuLVsDCj+aW18ke5aQ5mR9+WO3 XpkkkHKdPsbSjTWvNsyPMqHWp75RecodknazMRpaxf+kLIeBauIyvbPUr1WD3SI2 5XldAkQzrbqATukzA51nCnr73u9s0wfDy9+q5YHJ8Uoetb3IGxWHTAT/L5mKPfJR 8Y3s/ZDOf+OSQ4ry4VxL8IG0MT7qd5vswpXFF7dn8QSHpl86QVa/WrtlGPLgqq/V otJYAXy9ftBPrgtbEvZGEG2lw6ld4aFFv9GYnDO1QW3M6zAITvk+K3YzEjelGz3O YSXxykeyJga4ZqlvpvYChopsEN6aTCFdG6gCqHRZBQ9Eu9NpsRLPV9NVdg== =M9DW -----END PGP MESSAGE-----

@_date: 2002-08-14 20:59:02
@_author: Joseph Shraibman 
@_subject: checking signatures in shell scripts 
Is there any way to tell gpg when decrypting to require a certain signature?  It looks to me like I'm going to have to capture the stderr and pattern match on the "Good signature from ..."

@_date: 2002-08-14 22:03:01
@_author: Joseph Shraibman 
@_subject: checking signatures in shell scripts 
But using that I still have to capture the output. I was thinking of gpg failing with an error code if the input didn't have a certain signature.

@_date: 2002-08-14 22:38:02
@_author: Joseph Shraibman 
@_subject: checking signatures in shell scripts 
OK I'm writing a shell script using --status-fd. I'm getting the line:
[GNUPG:] GOODSIG 7601B0BFBEF180FD Joseph Shraibman gpg --list-keys gives me:
pub  1024D/BEF180FD 2002-08-14 Joseph Shraibman sub  2048g/1C77F7D2 2002-08-14
So how, in general, can I match up the GOODSIG to a particular key?  I can use VALIDSIG because it gives the fingerprint but fingerprints are longer and unwieldy to pass around (and I have to take out the spaces before comparing).

@_date: 2002-10-10 23:33:02
@_author: Joseph Shraibman 
@_subject: gpg run from .procmailrc can't find secret keyring 
I'm running:
gpg (GnuPG) 1.0.7
I set up a script to be called from my .procmailrc to decrypt incoming pgp mail, but it doesn't work. I put in my script to call gpg --list-secret-keys and here is the output:
gpg: Warning: using insecure memory!
gpg: [don't know]: invalid packet (ctb=00)
gpg: read_keyblock: read error: invalid packet
gpg: enum_keyblocks(read) failed: invalid keyring
I have no problem running gpg --list-secret-keys from the command line. What is going on?
I can run md5sum on my .gnupg/secring.gpg  so the file can be read.

@_date: 2002-10-11 02:50:02
@_author: Joseph Shraibman 
@_subject: gpg run from .procmailrc can't find secret keyring 
It is. I checked. The output of id is the same as the command line, the $HOME variable is the same too.

@_date: 2002-10-11 03:33:02
@_author: Joseph Shraibman 
@_subject: gpg run from .procmailrc can't find secret keyring 
Yup, I just figured it out.  It was using 1.0.6. I fixed my script.


@_date: 2018-09-25 23:03:17
@_author: Kristian Larsson 
@_subject: Monitoring queries to gpg-agent? 
I would like to see the queries to gpg-agent that clients are sending. Like what key are they trying to access and whatever other information might be available as well.
A little background; I am using gpg-agent together with a Yubikey to securely store my GPG keys. In addition I've enabled so that whenever an authentication, sign or decryption request happens I must physically push the button on the Yubikey. It is very clear when I do ssh FOO and the Yubikey starts blinking that I need to push it and I can easily understand what query caused the Yubikey to start blinking (although I suppose there is a risk of someone using this opportunity to launch a query just prior and me thinking it is my ssh query will press the button).
I also have cron jobs that perform things, like running mbsync in the background to retrieve email and they in turn use GPG to decrypt the file containing the password. In this case I haven't interactively initiated the command but instead my Yubikey just starts blinking and I don't know why (although I can guess). I would like to be able to see what the current query to gpg-agent Is there a way I can monitor and display the queries to gpg-agent so I can see what the current query is actually trying to do?
Kind regards,
   Kristian.

@_date: 2018-09-26 12:57:33
@_author: Kristian Larsson 
@_subject: Monitoring queries to gpg-agent? 
Ah, interesting, sounds similar yes. I'd be very interested in hearing more about this.
I cache the pin so it only asks me sporadically and mostly at the start of a work session but I have to push the button on the yubikey for every query, so with cached PIN it means there's no pinentry prompt 99% of the Right, I understand.
Kind regards,
   Kristian.

@_date: 2018-09-27 10:24:43
@_author: Kristian Larsson 
@_subject: Monitoring queries to gpg-agent? 
Thanks! It was a little lower level than I had wished for but I'll have a look and see if I can make something useful out of it :)
Kind regards,
   Kristian.

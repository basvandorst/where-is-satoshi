
@_date: 2005-01-04 09:00:11
@_author: Eric S. Raymond 
@_subject: Problems attemoting to use GPG with a USB watch 
I got a DiskGO USB watch for Christmas.  I put it on my wishlist
with the goal of moving my GPG keyring onto it, using GNUPGHOME
to direct gpg to look there.  The idea, of course, is to avoid having
clear copies of my secret key live on computers that might be breached
while I'm not around.
I'm using Fedora Core 3, which automounts the watch as a USB storage
device accessible through the SCSI layer.  It gets mouunted as named gpg (without leading period).  Thuism, when the watch is
mounted, the keyring is accessible as /media/usbdisk/gpg.
The last line of this listing shows that the watch is mounted as a
SCSI filesystem:
esr df
Filesystem           1K-blocks      Used Available Use% Mounted on
none                    517036         0    517036   0% /dev/shm
minx:/home            25964096  15494624   9150560  63% /nfs/minx/home
minx:/usr/local       25964096  15494624   9150560  63% /nfs/minx/local
grelber:/home        115377664  85171136  24345632  78% /nfs/grelber/home
grelber:/usr/local    37848096   7250720  28674784  21% /nfs/grelber/local
This listing shows that the files are accessible and permissions
are correct:
total 2
drwx------  2 esr esr 2048 Jan  3 11:28 gpg
total 316
-rwxr-xr-x  1 esr esr     18 Mar 12  1999 pgp.cfg
-rwxr-xr-x  1 esr esr 157532 Mar  1  2000 pubring.bak
-rwxr-xr-x  1 esr esr 157532 Mar  7  2000 pubring.pkr
-rwxr-xr-x  1 esr esr    512 Mar  7  2000 randseed.bin
-rwxr-xr-x  1 esr esr   1769 Jan 14  2000 secring.bak
-rwxr-xr-x  1 esr esr   1769 Jan 14  2000 secring.skr
I then put GNUPGHOME=/media/usbdisk/gpg; export GNUPGHOME in
my .bash_profile.
Unfortunately, this seems not to work.  Here are the messages I
get when trying to use the keyring on the watch:
gpg: lock not made: link() failed: Operation not permitted
gpg: can't lock `/media/usbdisk/gpg/secring.gpg'
gpg: DBG: oops, `/media/usbdisk/gpg/secring.gpg.lock' is not locked
gpg: keyblock resource `/media/usbdisk/gpg/secring.gpg': general error
gpg: lock not made: link() failed: Operation not permitted
gpg: can't lock `/media/usbdisk/gpg/pubring.gpg'
gpg: DBG: oops, `/media/usbdisk/gpg/pubring.gpg.lock' is not locked
gpg: keyblock resource `/media/usbdisk/gpg/pubring.gpg': general error
gpg: encrypted with ELG-E key, ID 5E995ED4
gpg: decryption failed: secret key not available
Any suggestions?

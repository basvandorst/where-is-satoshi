
@_date: 2002-01-07 15:22:01
@_author: Mike Burgess 
@_subject: PHP, windows and GNUPGP - output problems. 
I am building a system to verify coursework sent to my university using
digital signatures (final project).
I have two boxes: a winxp client and win2kserver (apache).
I can run all options from command line and can verify files/export sigs
from PHP but cannot encrypt. I get the error in apache error log:
[Mon Jan 07 12:24:28 2002] [error] [client 10.0.0.15] gpg: /gnupg/m.txt:
encryption failed: public key not found
Also all output goes to the error log e.g.
[Mon Jan 07 12:33:44 2002] [error] [client 10.0.0.15] gpg: Good signature
from "mike burgess (me) "
[Mon Jan 07 13:03:11 2002] [error] [client 10.0.0.15] gpg: Signature made
01/07/02 03:39:23  using DSA key ID 696570C2
a) do I need to tell php/apache in config files details about gpg?
b) do I need to change userid's on keys used to nobody/www as I see in some
documentation? is there a process for this
c) if I use the environment variable  putenv("GNUPGHOME=c:\gnupg\.gpg"); is
this correct? I can verify files with: system("/gnupg/gpg --verify
d) how do I get error log output to where I want it? i.e. not in the error
e) the '--status-fd n' option seems to be what I want but it comes up as an
invalid option when used withinphp and I cannot seem to be using it right
from within command line; is the following valid?
gpg --status-fd out.txt --verify m.asc
to send output to out.txt rather than screen? I have tried --logger but this
produces no output either.
Any help would be appreciated - thanks.

@_date: 2002-01-15 21:01:02
@_author: Mike Burgess 
@_subject: Sorr y Mike... =( 
That's ok,
I am aware that open source is mainly based around Linux/Unix but due to the
nature of the project I am working on I am unable to have an entirely
Linux/Unix system. The server will eventually be running Linux but I have
only limited experience with Linux/Unix. The user base (all the students at
Portsmouth University would primarily be running some form of Windows hence
the need for Windows).
In reply to Fabian Rodriguez I will split up my questions into sections and
post one at a time with more details and keep you posted on the results.
I chose GPG as I have used PGP for years (windoze :) only versions) but due
to the cost of licensing 13500 copies of the software a freeware alternative
had to be found. I could have used Win2k's inbuilt encryption and signing
but that would lock everyone into some form of windows with the costs this
comes with.
Mike Burgess
p.s. bernardino your php/gpg thing would be of great use, thanks.
-----Original Message-----
Sent: 15 January 2002 17:58
Sorry Mike and all of you guys...
I did not want to be mean to anybody...
You all are right, there is no way to ban anybody for
the OS that they use.
My day maybe is not doing soo good, but is not excuse
to be mean.
Just want let U know that I'm working in a Open Source
using php/gpg.
I'm almost done, will post it here once done.
Best Regards D1n00z.
Sorry again Mike.

@_date: 2002-01-16 03:16:02
@_author: Mike Burgess 
@_subject: PHP, windows and GNUPGP - output problems 
This is the command I have used from within php:
system("/gnupg/gpg --homedir c:/gnupg/ --verify /gnupg/m.asc ",$out);
this gives the output 0 ($out), which I gather is the code for 'all ok' but
the rest of the info goes to the apache/error.log file.
[Tue Jan 15 20:28:45 2002] [error] [client 10.0.0.15] gpg: Signature made
01/07/02 16:24:54  using DSA key ID 696570C2
[Tue Jan 15 20:28:45 2002] [error] [client 10.0.0.15] gpg: Good signature
from "mike burgess (me) "
It does this with or without setting --homedir or the environment variable
I can now encrypt by using:
system("c:/gnupg/gpg --armour -e -r mike_v_burgess
homedir is not needed as the executables and files are specifically named in
the command and in the default location.
One of my final things is to be able to sign a file but this needs input and
the command line in windows does not behave as well as in Unix. So a two
part question:
a) Is there a way of passing the passphrase in windows? 'pipe' does not seem
to work in the same way.
b) Can the output of executions e.g. verify data (two entries in error log)
be piped to a file? Is this a gpg thing or Apache?
thanks again
-----Original Message-----
Behalf Of Anthony E. Greene
Sent: 15 January 2002 16:28
[original message:
Try adding the --homedir option to the encrypt command line. Also make sure
the gnupg directory and the files it contains are readable by the user that
Apache runs as (nobody?).
Anthony E. Greene PGP Key: 0x6C94239D
AOL/Yahoo Chat: TonyG05
Linux. the choice of a GNU generation. Gnupg-users mailing list

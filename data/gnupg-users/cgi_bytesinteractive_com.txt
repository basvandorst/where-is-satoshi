
@_date: 2001-03-02 21:20:10
@_author: David Jourard 
@_subject: A couple of newbie ?s 
I'd like to use pgp to encrypt a form on a web site for a shopping cart. This means I need a commercial license for the pgp on the server. I phoned network solutions and the cost was astronomical for the kind of web site that needs it.  I then came to pgpi.com and discovered that it is possible to use gpg.
Here are few questions which I couldn't find in the documentation.
a. Is it possible to use a public key created by pgp version 6.x (commercial or free version) using Diffie Hellman or RSA.  eg. Add this key to the gpg keyring.  Use it to encrypt an e-mail generated for a web-form then have the owner of the public key use their pgp software (commercial or free) decrypt the e-mail received.
(I experimented with the Diffie Hellman using pgp on one machine (Windows 98) and then using gpg on another (Windows NT) and it worked but I thought it uses now RSA or ELG - (taken from the gpg --help).
b. Is it possible to take a pgp (commercial or free version) public key ring and rename it as a gpg public keyring. Then use it simply to lookup the public keys for encrypting again data from a web site form sent as an e-mail to the owner of the public key.
I ask these questions because I'd like to have the gpg unix version installed for the web site but I'd like the customers to be able to use pgp 6.x (commercial or free) or gpg to create their public/private keys and decrypt their e-mails encrypted with gpg.
BTW I find this encryption stuff fascinating.
Thanks in advance

@_date: 2001-03-05 23:35:00
@_author: David Jourard 
@_subject: Question about a pgp public key on a gpg key ring. 
If I add a public key created with pgp 6.x or greater to a gpg public key ring; what public key algorithm should they create it with RSA or Diffie Second what symmetric algorithm should the gpg use for the encryption when using a pgp public key of 6.x or greater.
David

@_date: 2001-10-24 18:23:02
@_author: David Jourard 
@_subject: Web Hosts with gpg - any suggestions 
I'm installing a shopping cart for a virtually hosted client. I'd like to install it on a web host which has gpg installed.  Also the web host will allow a virtual host to run gpg from a cgi script to encrypt form data sent as an e-mail.
Can anyone recommend a good web hosting company in US or Canada.
David

@_date: 2002-12-06 18:38:05
@_author: David Jourard 
@_subject: warning msg - what does it mean 
I've installed gpg on a server.  The  cgi script runs under suid; so I had to play with the permissions to get it to work.
The keyrings are owned by root.
I get this message:
gpg: WARNING: unsafe ownership on homedir "/home/gpg"
where I keep my keyrings which I uploaded (pubring.gpg and trustdb.gpg) and maintained on my desktop
Any ideas. If its nothing whats the parameter to turn off the warnings.

@_date: 2002-12-09 23:25:02
@_author: David Jourard 
@_subject: warning msg - what does it mean 
775 owned by root and group root.
I tried a stricter subset but it wouldn't work and perhaps its because the scripts are running suid.    The executable is 6755 where the permissions are setgid and setuid. Setting it to just setuid did not work.
Any suggestions.  Thank-you

@_date: 2002-12-10 04:59:01
@_author: David Jourard 
@_subject: warning msg - what does it mean 
its
 600
Your suggestion is fine if the cgi scripts run as the userid of the apache=
web server. (In fact this is how I do it on another server).
The problem here is that the cgi scripts run as suid using the setuid=20
module of apache.  As you suggest each user will have to have on the server=
their own public key ring.
** I would like though to maintain just one  public key ring for all users=
using gpg for e-mail encryption. **
Is there anyway to set the permissions securely  on the keyring and  have=20
each script which runs under a different user access the one public key=20
ring and gpg.
or Is this where the limitation rests?
Thanks so far.
David J.

@_date: 2002-12-10 16:53:01
@_author: David Jourard 
@_subject: warning msg - what does it mean 
I'm not familiar with how gpg  works when it is used to encrypt an e-mail for instance; but if this is all I need it for - to encrypt an e-mail using a public key - then why does it need to write to disk. I would think that the gpg need only read the public key?

@_date: 2002-02-08 07:24:02
@_author: David 
@_subject: Need some help with permissions and ownership when running cgi 
I've installed gpg on the server and successfully able to encrypt from a web form but its not exactly the way I want it.
Currently the cgi script runs under suexec hence as user however the above works only when the 3 .gpg files: secring.gpg, pubring.gpg and trustdb.gpg are owned and in the group of the user, and are in a folder under the CGI user's home directory.
 From a previous posting:
Now when I create a non-privileged user like gpgforkeys to own the keyring I get the following errors:
gpg: failed to create temporary file `/home/gpgforkeys/.gnupg/. Permission denied
gpg: fatal: /home/gpgforkeys/.gnupg/trustdb.gpg: can't create lock
secmem usage: 1408/1408 bytes in 2/2 blocks of pool 1408/16384
Is it possible to have the public keyring owned by the non-cgi user and stored above document root yet for the CGI user to write what needs to be written (which will have to be in a folder under its home directory because of the suexec.).
The bottom line is I want to use suexec to run the script and yet I don't want the key ring owned by the CGI user.
I hope I'm not making mountain our of a mole hill but I'm trying to create an optimal secure setup (which I'm learning about as I do it.)
Thanks in advance

@_date: 2002-02-21 20:08:01
@_author: David Jourard 
@_subject: Need Help with Maintaining Keyring offline for Keyring online 
I'm using gpg to encrypt e-mails created from a cgi script from a web form on a Linux computer.
I want to maintain the keyrings (pubring.gpg and trustdb.gpg) on a computer not connected to the internet.  (The computer is win32)
I added all the keys, signed them and gave them full trust so they can work from a cgi script.
Everything works -- well sort of.
I added a new key today, (by import of a pgp key), signed it and gave it full trust.
I uploaded the updated pubring.gpg and trustdb.gpg but now it doesn't work with the old keys. (I uploaded them as binary)
I get the error message from my log:
gpg: 071F62E4: no info to calculate a trust probability
gpg: no valid addressees
gpg: [stdin]: encryption failed: no such user id
Anybody have any answers?

@_date: 2002-02-22 20:04:02
@_author: David Jourard 
@_subject: Need Help with Maintaining Keyring offline for Keyring 
I'd like to answer my own post to indicate the importance of using --always-trust for encryption from a web form/cgi script if the secring.gpg is only an empty file.
a. trustdb.gpg is there except secring.gpg is 0 bytes
When I put the actual secring.gpg on the server I didn't have any problems though I did get it to work without it but it was sometimes yes and sometimes no.
To make a long story short ...
By putting --always-trust it skips the checking the trustdb.gpg so the first error does not occur and it finds the key, and I can have an empty secring.gpg on the server.

@_date: 2002-01-24 18:20:02
@_author: David 
@_subject: DO's and DON'Ts about using gpg on the internet? 
I need to install gpg on a server which will be used simply to encyrpt data received from a web form and sent as an e-mail through a cgi program.  I only need to installe the public key ring since it will be maintained off-site.
I've been looking on the net for a HOW TO or a set of DO's and DON'Ts  reviewing the best way to install and access gpg (or pgp for that matter) via a web form and it all seems to be in bits and pieces in the Here are my questions to thrash this out.
a. gpg needs to run as setuid in order to lock memory pages preventing the os writing memory pages to disk.
Q1. How secure is the setuid when run through a cgi script. I suppose this is os and version number dependent.  Comments on this is appreciated.
Q2. The public key ring is best owned by root. Is this true?
(In my case it can be done but hypothetically for virtually hosted sites this may not be true?)
Q3. Where should the userid for the public key be stored and who should own it. ie should it be in a data file owned by root, an intermediate user with no telnet/ssh/ftp access or just in the cgi program owned by user.
Q4. Will a firewall help to protect the keyring. Can a firewall help in These are few questions that have come to mind (there could be more) but it would help me to understand the limitations of using gpg on the internet and if this could be organized into How to; or at least some DON'Ts (which people are doing) and a set of DO's (with the alternatives.)

@_date: 2002-01-24 18:45:02
@_author: David 
@_subject: DO's and DON'Ts about using gpg on the internet? 
What if someone replaces the public keyring with theirs. (the same useid but their e-mail address.) Isn't that important?
Just encrypt otherwise I have to have a private key on the server, and if someone can get access to the 2 keyrings; lets say owned by root, then its mute point signing it because they are in there anyhow.

@_date: 2004-05-11 08:48:56
@_author: David Jourard 
@_subject: Import Private and Public Key into PGP 
I see there is an option to export a gpg public key ie gpg --export but couldn't find for the private key.
I want to be able to import the private key into my pgp program.
David J. 

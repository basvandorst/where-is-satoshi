
@_date: 2007-04-21 21:12:35
@_author: Alessandro Vesely 
@_subject: unable to verify mail messages as signed files 
I've installed a tool to verify signed mail, enigmail,
that signals lots of bad signatures, using gpg. When
I verified those messages "manually" they were all ok.
Disagreement happens after the tool combines text and
signature into a unique file. I reproduced it as follows:
  D:\tmp>gpg --verify mailverify-sep.txt.asc mailverify-sep.txt
  gpg: Signature made 04/21/07 00:18:41 using DSA key ID [omission]
  gpg: Good signature from "[omission]"
  gpg: WARNING: This key is not certified with a trusted signature!
  gpg:          There is no indication that the signature belongs to the owner.
  Primary key fingerprint: [omission]
and then
  D:\tmp>printf "-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA1\n\n" > h
  D:\tmp>cat h mailverify-sep.txt mailverify-sep.txt.asc > mailverify2.txt
  D:\tmp>gpg --verify mailverify2.txt
  gpg: Signature made 04/21/07 00:18:41 using DSA key ID [omission]
  gpg: BAD signature from "[omission]"
How come?
I've tried adding/removing blank lines, and setting
various options, to no avail. I have the feeling that
the error depends on gpg trying to emulate some ill
pgp behavior. The message has spaces at the end of
some lines. Is that treated differently in case there
is an armor filter?
That was on XP using gpg (GnuPG) 1.4.7.
TIA for any help

@_date: 2007-04-23 09:29:07
@_author: Alessandro Vesely 
@_subject: GnuPG::Interface 
so am I
This is actually a warning. Do ls -labd /xxxxxxxxxxxxxxxx/.gnupg
to understand why it is complaining. Probably too many permissions.
That was the opposite: not enough permissions.
Drives can be mounted so as not to honor sticky bits.
Check Apache documentation for safe ways to run suid execs.
Not if you do it the wrong way. Try logging in as the user that the app
will run as. Give just the permissions required for doing what you need.
You may consider creating a new user and/or group just for that.
Hope this helps

@_date: 2007-04-23 11:44:30
@_author: Alessandro Vesely 
@_subject: unable to verify mail messages as signed files 
I guess the tool does so to avoid creating temporary files.
In facts, it pipes faked clearsigned messages to gpg's stdin.
What would you suggest it should do instead?
Thanks for your support

@_date: 2007-05-05 11:41:26
@_author: Alessandro Vesely 
@_subject: [Announce] Libgcrypt 1.3.0 (development) released 
Are there plans to extend it so as to include those protocols?
Otherwise, is it planned to turn gpgme into a library, or produce
a library version of gpg itself?
IMHO, the above would make it easier to implement GUIs plugins.
Thanks in advance

@_date: 2007-05-06 11:00:35
@_author: Alessandro Vesely 
@_subject: [Announce] Libgcrypt 1.3.0 (development) released 
Ooops, yes, of course. I apologize for my illiteracy.
I think you guessed I meant a standalone library,
and no plan of gpgme development matched that idea.
Thank you for you response anyway

@_date: 2007-05-15 11:44:05
@_author: Alessandro Vesely 
@_subject: Secure text editor? 
Virtual memory is a feature that an OS can expose to apps. Memory mapped
files are an example. On Linux there are both shm and mmap. Traditional
SysV stuff may better suit inter-process sharing, while more recent APIs
emphasize multi-threading within the same process. On Windows there is
just one way to share memory. Memory locking must be understood in that
context. It is meant for synchronization purposes, not for security.
How to _avoid_ to share memory is a different subject. Apps don't make
decisions on system resources. Using a swap file is a system decision,
and it should be configured accordingly. Even if you have no swap file,
you can still *debug* an app. That implies the ability for an external
process to poke its nose into the app's memory, swapped or not. On Linux
it is somewhat easier than on Windows to examine other processes' memory.
Only the kernel can hide memory from apps. In theory, it can also hide it
from device drivers, on CPUs that implement multiple rings.
On Windows, it is a common habit to assume that users have no control over
what software is installed or runs on their systems at any given time.
Maybe, that's why Vista crypts intra-system (kernel-device) communication.
However, the latter feature adds no security, from a user's perspective.
On Linux it is more common to consider that a system is compromised if it
contains any software that is not trusted. Other communities consider
compromised a system if it is, or has ever been, connected to the Internet...
Finally, for the editor, let me mention Emacs:

@_date: 2007-05-16 09:10:10
@_author: Alessandro Vesely 
@_subject: Secure text editor? 
Aha! Forcing oblivion for that text is a good point. The swap probably also
includes any buffer used by the windowing system and the like. A system trace
of any write access to the disk would provide a comprehensive list, including
any "plaintext~" or similar stuff, independently of the editor used. If you
are not too paranoid, a simple wrapper, a la strace, that only looks for write
access by the editor and possible forks thereof, might suffice.
I'd bet some tool like that exists already, but have no pointer at hand.

@_date: 2007-05-16 08:47:47
@_author: Alessandro Vesely 
@_subject: Secure text editor? 
Each XyzAlloc has its corresponding XyzLock. I don't count LocalAlloc,
GlobalAlloc, HeapAlloc as memory sharing functions.  VirtualAlloc can
be used after MapViewOfFile, more or less where one would possibly use
madvise() on Linux, except that it's mandatory.
About VirtualLock, MSDN says:
  Locks the specified region of the process's virtual address space
  into physical memory, ensuring that subsequent access to the region
  will not incur a page fault.
It doesn't ensure the corresponding region on the swap file is swept.

@_date: 2007-05-18 09:27:55
@_author: Alessandro Vesely 
@_subject: Secure text editor? 
Ooops, I hadn't noticed that. Yes, then VirtualAlloc and VirtualLock
can be used to avoid leaving traces of sensitive data on the swap
file in the way you described (i.e. lock before fill and sweep before
I still think that's not the kind of task that the function has been
designed for. The authorization constrain you mentioned and other
possible side effect tend to make it unpractical for naive usage.
However, a background console app that allocates a few memory pages
for storing sensitive data (e.g. a gpg agent?) should use it to increase
data security.

@_date: 2007-05-25 11:26:34
@_author: Alessandro Vesely 
@_subject: easy way to confirm email validity 
There are webmail servers that can do that. The security is weaker,
as one has to trust the server and upload a key.

@_date: 2007-05-30 09:49:16
@_author: Alessandro Vesely 
@_subject: Can't run GPG --recv-keys under Windows Vista. 
Next question is "Why is GnuPG installing into this area?"

@_date: 2018-12-11 12:35:57
@_author: Alessandro Vesely 
@_subject: Smart cards 
Hi all,
I'm trying to spread use of OpenPGP among users of my tiny mail server.  I'm
recommending 4096-bit keys on smart card, which seems to be the safest bet for
a long lasting setup.  I print email addresses on the cards, and publish their
keys on the web server's wkd.
My problem is with smart cards readers.  Floss-shop's cards are perfect for a
PC, but difficult for smartphones.  I'm not using smartphones, and I don't see
how anything related could be considered to be secure.  However, people uses
them, and mounting an external device in order to read iso7816 cards sounds
cumbersome given that many of them can do near field communication (NFC)
natively.  Is it possible to get OpenPGP functionality on one of those
contactless cards?
Let me add that, after several years of iso7816 cards issued by local
administrations, Italian government is introducing iso14443 cards.  That seems
to be a common trend in Europe:
Is there anything I can do to foster GnuPG development on such kind of cards?

@_date: 2018-12-11 19:51:41
@_author: Alessandro Vesely 
@_subject: Smart cards 
Thank you for your answers.
I dislike yubikey because of the form factor.  While USB seems convenient
because every PC has lots of slots, USB keys are easily lost.  In addition, you
cannot print the owner name on them.
Fidesmo looks better, except for its depending on the Fidesmo Card App Store.
Isn't it possible to "burn" a blank card, somehow?

@_date: 2018-12-14 12:41:51
@_author: Alessandro Vesely 
@_subject: Smart cards 
Let me just note that there are people who believe it so hardly as to arrest
Meng Wanzhou.
You mean the backdoors in NIST elliptic curves?
Yet, alas, the software on OpenPGP cards "is not available as free software due
to NDAs required for certain parts", according to g10code[*].
[*] Of course, one has to adjust the local paranoia level to some practical value.
We miss a theoretical definition of "secure".  However, there are lots of funny
anecdotes about President's smartphone.
Free software is patched and upgraded much more often than proprietary one.
That increases difficulty considerably, methinks.

@_date: 2018-12-19 11:21:49
@_author: Alessandro Vesely 
@_subject: Smart cards 
Hi Damien,
I contacted Leif Scheppelmann at Cotech.de.  He says they don't have a shop for
their cards because end user market is too small.  However, he's going to send
me a card for 15? (+3 shipping).  I'll write when I'll have received it.  For
now, let me just quote his words:
    Unfortunately you are not able to use your 4096-key with our card. We
    just support 2048-keys. Our assumption is that the amount of energy that
    can be shipped over NFC is limited. We are in contact with the supplier
    to get 4096-keys working. In future we will switch to ecc-keys by
    default in all our applications.
    We are following ISO/IEC 7816 Part1-4, ISO14443 Part1-4 and Java Card
    3.0.4 specification and using the OpenPGP-Card-Applet. The card supports
    common algorithms such as MD5, SHA-family, DES, AES, RSA.
I think you may want to mention those cards on your Implementations of the
OpenPGP application for smart cards page.

@_date: 2018-12-26 14:35:28
@_author: Alessandro Vesely 
@_subject: A question about WKD 
You seem to have already solved that:
ale at pcale:~/tmp$ curl -o /dev/null -v   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying 167.99.129.126...
* TCP_NODELAY set
* Connected to 300baud.de (167.99.129.126) port 443 (
* ALPN, offering h2
* ALPN, offering http/1.1
* Cipher selection: ALL:!EXPORT:!EXPORT40:!EXPORT56:!aNULL:!LOW:!RC4:
* successfully set certificate verify locations:
*   CAfile: /etc/ssl/certs/ca-certificates.crt
  CApath: /etc/ssl/certs
* TLSv1.2 (OUT), TLS header, Certificate Status (22):
} [5 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client hello (1):
} [512 bytes data]
* TLSv1.2 (IN), TLS handshake, Server hello (2):
{ [113 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [5662 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Client hello (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Client hello (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES256-GCM-SHA384
* ALPN, server accepted to use http/1.1
* Server certificate:
*  subject: OU=Domain Control Validated; OU=PositiveSSL; CN=300baud.de
*  start date: Dec 23 00:00:00 2018 GMT
*  expire date: Dec 23 23:59:59 2019 GMT
*  subjectAltName: host "300baud.de" matched cert's "300baud.de"
*  issuer: C=GB; ST=Greater Manchester; L=Salford; O=COMODO CA Limited; CN=COMODO RSA Domain Validation Secure Server CA
*  SSL certificate verify ok.
} [5 bytes data]
{ [5 bytes data]
< HTTP/1.1 200 OK
< Date: Wed, 26 Dec 2018 13:33:07 GMT
< Server: Apache/2.4.18 (Ubuntu)
< Last-Modified: Tue, 25 Dec 2018 17:27:21 GMT
< ETag: "1f4-57ddc06a6a77b"
< Accept-Ranges: bytes
< Content-Length: 500
< Content-Language: de
< { [5 bytes data]
* Curl_http_done: called premature == 0
100   500  100   500    0     0   7025      0 --:--:-- --:--:-- --:--:--  7042
* Connection  to host 300baud.de left intact
And, using the attached script:
ale at pcale:~/tmp$ testwkd.sh sac at 300baud.de
gpg: keybox '/tmp/user/1000/tmp.EDqjfCCXPH/pubring.kbx' created
gpg: /tmp/user/1000/tmp.EDqjfCCXPH/trustdb.gpg: trustdb created
gpg: using pgp trust model
gpg: error retrieving 'sac at 300baud.de' via None: No public key
gpg: no running Dirmngr - starting '/usr/bin/dirmngr'
gpg: waiting for the dirmngr to come up ... (5s)
gpg: connection to the dirmngr established
gpg: pub  ed25519/9A234E0B0E1F1FE8 2018-12-25  Stefan Claas gpg: key 9A234E0B0E1F1FE8: public key "Stefan Claas " imported
gpg: no running gpg-agent - starting '/usr/bin/gpg-agent'
gpg: waiting for the agent to come up ... (5s)
gpg: connection to agent established
gpg: Total number processed: 1
gpg:               imported: 1
gpg: auto-key-locate found fingerprint EC15C644C35948FCB47E15899A234E0B0E1F1FE8
gpg: automatically retrieved 'sac at 300baud.de' via WKD
pub   ed25519 2018-12-25 [SC]
      EC15C644C35948FCB47E15899A234E0B0E1F1FE8
uid           [ unknown] Stefan Claas sub   cv25519 2018-12-25 [E]
gpg: using pgp trust model
pub   ed25519 2018-12-25 [SC]
      EC15C644C35948FCB47E15899A234E0B0E1F1FE8
uid           [ unknown] Stefan Claas sig!3   P    9A234E0B0E1F1FE8 2018-12-25  Stefan Claas sub   cv25519 2018-12-25 [E]
sig!    P    9A234E0B0E1F1FE8 2018-12-25  Stefan Claas gpg: 2 good signatures

@_date: 2018-12-27 10:35:22
@_author: Alessandro Vesely 
@_subject: A question about WKD 
ale at pcale:~/tmp$ uname -a
Linux pcale 4.9.0-8-amd64  SMP Debian 4.9.130-2 (2018-10-27) x86_64 GNU/Linux
ale at pcale:~/tmp$ ale at pcale:~/tmp$ gpg2 --version
gpg (GnuPG) 2.1.18
libgcrypt 1.7.6-beta
Copyright (C) 2017 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Home: /home/ale/.gnupg
Supported algorithms:
Pubkey: RSA, ELG, DSA, ECDH, ECDSA, EDDSA
Cipher: IDEA, 3DES, CAST5, BLOWFISH, AES, AES192, AES256, TWOFISH,
        CAMELLIA128, CAMELLIA192, CAMELLIA256
Hash: SHA1, RIPEMD160, SHA256, SHA384, SHA512, SHA224
Compression: Uncompressed, ZIP, ZLIB, BZIP2
I see no SRV record from here, and I don't need one since 300baud.de resolves correctly.
ale at pcale:~/tmp$ dig  _https._tcp.300baud.de srv
;; ->>HEADER<<- opcode: QUERY; status: NXDOMAIN; id: 21947
;; Flags: qr aa rd; QUERY: 1; ANSWER: 0; AUTHORITY: 1; ADDITIONAL: 0
;; QUESTION SECTION:
;; _https._tcp.300baud.de.		IN	SRV
;; AUTHORITY SECTION:
300baud.de.         	1800	IN	SOA	ns1.digitalocean.com. hostmaster.300baud.de. 1545858070 10800 3600 604800 1800
;; Received 107 B
;; Time 2018-12-27 10:23:39 CET
;; From 173.245.58.51 at 53(UDP) in 49.1 ms
Couldn't that be something with your CA bundle?  What do you get if you try and download your keys with curl, e.g.:
curl -o /dev/null -v

@_date: 2019-08-13 09:54:01
@_author: Alessandro Vesely 
@_subject: PGP Key Poisoner 
This and John Z mentioning OCaml seem to point a finger in the wrong
direction.  The key poisoner shows that 200000 signatures can be
handled in a few seconds (I didn't try, I trust the author).  More
than a reasonable number of signatures makes no sense in practice, so
I agree lists should somehow be "fixed" so as not to accept an
unreasonable number of signatures (reasonable == 2??)
The bug, however, is in the program that chokes on poisoned keys!
Was that fixed, yet?

@_date: 2019-08-14 11:38:39
@_author: Alessandro Vesely 
@_subject: PGP Key Poisoner 
Why wasn't that check in place from version 0.0.0?  Perhaps GnuPG was
coded at times when DoS was an operating system?
Of course, anonymous key poisoning is a kind of gratuitous vandalism.
 Yet, crypto is supposed to work in a hostile environment.

@_date: 2019-08-14 11:39:56
@_author: Alessandro Vesely 
@_subject: Difficulty of fixing reconciliation 
Absolute monotonicity is wrong.  It must be possible to delete errors.
The illegal sig shall be deleted from both servers.  (2 is a bit
Procrustean, a reasonable number would be enforceable.)
I'm no expert, but it seems to me that 3rd party signatures should not
be allowed.  All signing party recipes provide for /exchanging/ sigs,
but then rely on the fact that Alice can sign Bob's sig before Bob has
signed Alice's and without Bob's authorization.  That is, the
semantics is good, but it's not algorithmically enforced.
Hm... if your sig is signed by a suspect, you become suspect too?  In
fact, SKS servers with lots of countersigned sigs is manna from heaven
for police.  I recall someone in the sixties recommending "Comrades,
no phone-books!  Burn them, learn numbers by memory and burn them."
So, would that be a reason to allow 3rd party signatures?  I sign your
sig, but then I also sign a few dozens other random sigs so as to
conceal the link between you and me.  Sounds like a poor trick to me.
Exactly!  That signature is poisoned, delete it.  There might be
utilities that attempt to recover it ?much like AV utilities to
recover infected files.
The defense would try and avoid poisoning.  When a signature is
poisoned, the defense has failed.

@_date: 2019-02-11 13:28:33
@_author: Alessandro Vesely 
@_subject: Upload key to WKD from command line? 
It might be possible, but not straightforward.  The protocol is designed to
work over SMTP.  It makes sense that a provider automates the procedure,
although small providers can do it manually.  For users, it is definitely overkill.
See It is a work in progress, so don't mind the SRV RRset in bullet Neither do I.   has
an address of keys at posteo.de.  However, their "policy" entry have:
 for draft-koch-openpgp-webkey-service-04
(Version -04 didn't provide for a submission address among policy flags, but
maybe Enigmail looks for it just there?)

@_date: 2019-02-11 14:04:31
@_author: Alessandro Vesely 
@_subject: The "advanced" URL of openpgp-webkey-service-07, and l= 
I just saw version -07 today.  The advanced method:
WELLKNOWN := doesn't seem to make much sense to me.  I tried it with posteo.de, and got:
ale at pcale:~/tmp$ dig +short openpgp.posteo.de
ale at pcale:~/tmp$ curl --head curl: (51) SSL: no alternative certificate subject name matches target host name 'openpgp.posteo.de'
The subdomain is probably a star (*) DNS record.  However, their certificate's Subject Alt Name doesn't have a star, but a list of subdomains.  Certificates cost, albeit not much, so the need to set up a new subdomain may hamper implementation.
I'm unable to get the "flexibility in setting up the Web Key Directory in environments where more than one mail domain is hosted".  Say I host A.example and B.example.  Then I need to set up both subdomains openpgpkey.A.example and openpgpkey.B.example.  Internally, they can be redirected in a number of ways, but the server should hold the HTTP_HOST anyway.  To repeat tha mail domain between .well-known and openpgpkey doesn't seem to help much.
The openpgpkey folder can be implemented by plain files named after the 32 byte string and containing the key to be served.  The l= parameter would just be discarded in that case.  Otherwise, if the server side script is cute, should it verify whether the value of the parameter interpreted as a local part matches the 32 byte string?  What if they don't match?  To urlencode the local part might have been easier than Z-encoding its SHA1, but what's the point of doing both?

@_date: 2019-02-14 11:57:55
@_author: Alessandro Vesely 
@_subject: The "advanced" URL of openpgp-webkey-service-07, and l= 
Oh, ok, that makes some more sense.  If example.org is a single domain, it is
probably convenient to alias both /.well-known/openpgpkey/example.org and
it also stays compatible with previous versions of this protocol.
I have not installed gpg-wks-server, but it seems to be primarily concerned
with automating key installation, not plain key retrieval.  To simply retrieve
a key is not a transaction, so there should be no worry of CSRF.  If the domain
is missing, as in the "direct" method, an appropriate URL rewriting rule can
easily recover it from the HTTP_HOST server variable.  I'm not clear if that
may be an urlencoded IDN rather than an A-label.
The domain name can also be recovered from the SNI (an A-label, according to
BTW, the revised reason to suppress SRV records sounds paranoid, given that
(e.g. in the case of DNS poisoning) a subdomain under an attacker control still
has to provide a valid domain certificate.  At any rate, using "wkd" rather
than "openpgpkey" as a subdomain label would have leveraged previous version's
According to rfc5321, the maximum total length of a user name or other
local-part is 64 octets.  However, yes, slashes may entail hairy scripting by
those providers who allow funny characters in their email addresses.
Indeed, those hashes are difficult.  However, after one learns how to do them,
they're quite handy.  Having alternative ways to retrieve (alternative?) keys
sounds strange.
Thank you for your attention

@_date: 2019-10-08 17:07:10
@_author: Alessandro Vesely 
@_subject: How to improve our GUIs 
On the other hand, if the user received a malicious mail explicitly asking to
click so and so to export secret keys, does the GUI have to issue several
warnings before eventually letting the user do it?  What about users who are so
gullible to not actually discern true from false?
Trying to support _all computer users_[*] may turn out to displease more than

@_date: 2020-05-14 09:56:29
@_author: Alessandro Vesely 
@_subject: Comparison of RSA vs elliptical keys 
However, its signing flavor, Ed25519, is described in RFC 8032:
   This document describes elliptic curve signature scheme Edwards-curve
   Digital Signature Algorithm (EdDSA).  The algorithm is instantiated
   with recommended parameters for the edwards25519 and edwards448
   curves.  An example implementation and test vectors are provided.
                                     Its use is standardized for DKIM signatures by RFC 8463.

@_date: 2020-05-29 12:52:03
@_author: Alessandro Vesely 
@_subject: Certified OpenPGP-encryption after release of Thunderbird 78 
Any chance that the BSI will approve the RNP library that Thunderbird is going
to use?


@_date: 2010-04-30 22:49:56
@_author: Nicolas Boullis 
@_subject: new tool: gpg-edit-recipients 
About 2 months ago, I asked this list if there was a tool to add new recipients (technically public-key encrypted session key packets) to an encrypted message. As a reminder I need such a tool because I replaced my old ElGamal encryption key with a new RSA one that is stored on a Since no such tool seemed to exist, I decided to write my own, using as much as possible of the source code for GnuPG, and here it is.
Currently, is is very GnuPG-dependant, so I distribute is with a copy of GnuPG 2.0.15.
Anyone who is interested (even remotely) by such a tool is welcome to test it and make comments or suggestions.
I'd also like to gather opinions about the best way to maintain and distribute such a tool in the future. I'm not really willing to maintain for gpg-edit-recipients a copy of all the functions I need from GnuPG. There are the options I've seen:
 * maintain and distribute it within GnuPG, in an extra directory (that    would be my prefered choice, but as I understand it the GnuPG    maintainers might not want to bloat GnuPG)
 * maintain it separately from GnuPG, but require the source- and    build-directory of GnuPG to build (I think that would be quite    unconvenient for users or packagers)
 * accept to maintain my own copy of all the functions I need.
Those who are interested can grab gnupg-edit-recipients at
  Nicolas Boullis

@_date: 2010-03-04 22:34:04
@_author: Nicolas Boullis 
@_subject: manipulating the set of keys that can decrypt a file/message 
Some time ago, I decided to revoke my old ElGamal encryption key and replace it with a new RSA one, that I keep stored on a smartcard. (The goal is to be ale to decrypt some messages/files with my laptop, but not have my keys compromised if it gets lost/stolen.)
The trouble is that I have a bunch of old messages/files, encrypted fr my old ElGamal key: I can't decrypt them on my laptop usig my smartcard.
So now, on a machine that has my old ElGamal secret key, I'd like to modify those messages/files to make it possible to decrypt them using my new RSA key.
I don't like the naive solution "gpg --decrypt | gpg --encrypt" because:
 - I would lose the signatures of messages/files that are both encrypted    and signed,
 - it requires to decrypt/encrypt the whole data whie it should be    sufficient to decrypt/encrypt the session key.
Reading RFC 4880 (OpenPGP standard), if I am able to decrypt the session key, it should be possible to create a new Public-Key Encrypted Session Key packet to allow a new key to decrypt the file/message. Removing a Public-Key Encrypted Session Key should also be trivial.
Does gnupg allow such manipulations?
Or does anyone have suggestions how I should implement this? Libraries to use?
I imagine such manipulations might also be interesting for things like encryped mailing-lists...

@_date: 2010-03-05 15:51:37
@_author: Nicolas Boullis 
@_subject: manipulating the set of keys that can decrypt a file/message 
OK, thanks for your answer.
I will now have a look at how things are organised in GnuPG code.
Would you suggest that I look at the GnuPG 1 or GnuPG 2 code?
And if I succeed to implement this correctly, do you think the feature might be merged in GnuPG?
As I understand it, it does not support ElGamal, which is a show-stopper for my needs. But that's interestig anyway.

@_date: 2010-11-22 11:38:23
@_author: Nicolas Boullis 
@_subject: Remove a recipient from a message without viewing it 
For what it's worth, a few months ago, I decided to write a gpg-edit-recipients tool. I announced it on thi list (see  at gnupg.org/msg13495.html).
My project is on standby because I haven't seen much interest in this tool, but if you are really interested, I guess it could be resurrected.
However, for your specific need, you don't even need such a tool, I think you may split your encrypted message with gpgsplit, and then concatenate the relevant packets together.

@_date: 2011-02-03 16:56:41
@_author: Nicolas Boullis 
@_subject: Add/remove recipient without re-encrypting 
For what it's worth, I tried to write such a tool for my own, and annouced it on this list; see  at gnupg.org/msg13495.html
for the announcement.
If you are interrested, I think it would be possible to resurrect this

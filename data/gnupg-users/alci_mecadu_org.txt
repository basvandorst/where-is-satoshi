
@_date: 2017-10-01 18:37:46
@_author: Franck Routier 
@_subject: Smartcard not seen when reinserted 
I have a problem where my OpenPGP smartcard is not recognized when I
remove it from the reader and reinsert it.
Moreover I like to remove the card and reinsert it when needed, as when
used for authentication with Poldi, I'm only asked for the PIN once, and
then the PIN is cached (at the smardcard level if I am to believe this
My problem when reinserting the card seems to be very similar to this
 , except I'm using a GemPC Twin
SmartCard usb card reader (ID 08e6:3437 Gemalto (was Gemplus)).
Restarting gpg-agent with gpgconf --kill gpg-agent does the trick but is
far from ideal... the solution should be to use scd-event, if I
understand the thread well.
So here are my (quite unrelated) questions:
1) is there a way to be asked for the PIN on each authentication
operation ? (fellowship openpgp card)
2) where is scd-event supposed to be located to be used ? ($GNUPGHOME is
not assigned on my ubuntu system)
3) the example scd-event is full of... examples I don't really
understand. Would someone be as kind as to give the magic that would
make the card recognized on reinsert...
I'm sorry for not being more autonomous on this, but I couldn't make my
way through the docs :-(
Best regards,

@_date: 2017-10-02 13:35:16
@_author: Franck Routier 
@_subject: Smartcard not seen when reinserted 
Le 01/10/2017 ? 20:33, Matthias Apitz a ?crit :
I agree with you, and I'm not asking for that. In fact I would like it
to ask for the pin each time I need to authenticate...
Thanks Matthias for your input. I think I was not clear, so let me
restate my problem.
My problem, in addition to the pin being cached "forever" (as long as
the card is inserted, with no time limit), is that when I remove and
reinsert the card, it is not recognized unless I restart gpg-agent.
So here is what happens:
card inserted
pam_poldi.so called (sudo)   --> PIN requested
pam_poldi.so called (sudo)   --> no PIN requested pam_poldi.so called (sudo)   --> no PIN requested
card removed (I don't like to let my card inserted, with no PIN
validation needed !)
card inserted                        --> card not seen (card error,
OpenPGP card unavailable)
gpgconf --kill gpg-agent       --> card seen
pam_poldi.so called (sudo)   --> PIN requested
pam_poldi.so called (sudo)   --> no PIN requested Hence my questions:
1) can I force PIN for authentication each time I use it (it seems that
the forcesig option is for signature only, not for authentication)
2) what can I do to have my card recognized on reinsert, without
ressorting to killing gpg-agent
    --> probably with some scd-event magic that's beyond my know-how for

@_date: 2017-10-04 10:13:18
@_author: Franck Routier 
@_subject: Smartcard not seen when reinserted 
Le 02/10/2017 ? 16:37, Matthias Apitz a ?crit :
Thanks Matthias for the input. I couldn't make the 'remove card' event
trigger anything... (with NOCARD status).
After browsing the internet a bit more, I finally tried to install pcscd
and tell scdaemon not to use its internal CCID implementation, and this
It also solves my other problem (IPN code being cached "forever"), as I
suppose pcscd reinitializes the card state after so time.
So this is solved for, by using pcscd.
Thanks again,

@_date: 2017-10-09 10:37:48
@_author: Alci 
@_subject: libpampoldi 
I think poldi source code caan be found here: After a long inactivity, there has been commit less rhan one year ago. It is available and working in ubuntu as well. Regards, Franck Envoy? depuis mon smartphone Sony Xperia?
---- rennfrikadelle--- via Gnupg-users a ?crit ----

@_date: 2017-09-06 11:30:02
@_author: Franck Routier (perso 
@_subject: Poldi example usage of gpg-connect-agent fails 
I am trying to get into smartcard usage, and would want to allow Authentication on my system with an OpenPGP Card (FSFE Fellowship As I understand it (I might be wrong), the right pam module is Poldi.
According to the Texinfo page (info poldi), current version is 0.4, and lacks the previous poldi-ctrl utility, so I have to create some config file manually.
Specifically, here is the example that is given:
    First, the system administrator has to associate the user moritz with
the card's serial number:
      $ echo "D2760001240101010001000006550000 moritz" >>     Second, the system administrator needs to write the card's key into a
card-specific key file.  Therefore he inserts Moritz' smartcard and
      $ gpg-connect-agent "/datafile --advanced OPENPGP.3" /bye
My problem is that the command  gpg-connect-agent "/datafile myfile" "SCD READKEY --advanced OPENPGP.3" /bye returns an error:
ERR 100663414 Identifiant incorrect Can anyone help me on this ? (or is there a better way to authenticate using an OpenPGP smartcard ?) (or is it just a bad idea ?)
Thanks in advance

@_date: 2017-09-08 11:00:31
@_author: Franck Routier (perso 
@_subject: Poldi example usage of gpg-connect-agent fails 
Hi, and thank you for your help,
Le 07/09/2017 ? 08:06, Alexander Paetzelt | Nitrokey a ?crit :
In fact poldi-ctrl is not included in the debian/ubuntu package.
The NEWS file in /usr/share/doc/libpam-poldi even states, at the very "Changes since version 0.4.1:
* poldi-ctrl is removed
   Please use gpg-connect-agent instead."
That said, I could compile poldi-ctrl from source to get the config file I needed.
The steps I followed are:
$ git clone $ sudo apt install libgpg-error-dev
$ sudo apt install libpam0g-dev
$ sudo apt install libgcrypt20-dev
$ ./configure;make
then poldi-ctrl is in poldi/src/ctrl/poldi-ctrl
I had to stop the running scdaemon to get it working, and poldi-ctrl -k finally gave me the right incantations.
So I now have it running. Now, the Debian packager, and even the upstram doc writer seem to think I should use gpg-agent...
So, anyone has an idea about why this fails:
$ gpg-connect-agent "/datafile myfile" "SCD READKEY --advanced OPENPGP.3" /bye
ERR 100663414 Identifiant incorrect

@_date: 2017-09-22 10:36:45
@_author: Franck Routier 
@_subject: OT: Which smartphone would you use 
Hi, Jolla did an official port of SailfishOS to Sony Xperia X hardware. It's about one year old, but you still can get one in Europe for around Then you'll have to buy (49?) a Sailfish for Xperia license, and install it. The only point is the the image is not yet available for purchase, but it should be a matter of days...
See Le 21/09/2017 ? 19:33, Thomas Hejze a ?crit :

@_date: 2020-01-08 18:50:39
@_author: Franck Routier (perso 
@_subject: What are some threats against which OpenPGP smartcards are useful? 
I think this can be configured:
ykman openpgp touch enc on
ykman openpgp touch sig on
Le 8 janvier 2020 18:35:20 GMT+01:00, Andrew Gallagher  a ?crit :

@_date: 2020-01-08 18:29:25
@_author: Franck Routier (perso 
@_subject: What are some threats against which OpenPGP smartcards are useful? 
Notice that some features, like the metal contact toggle on some yubikey can mitigate the problem of having an attacker with full local access. You then have to touch the key each time you want to use it, so illegitimate access would be noticed.
Le 8 janvier 2020 13:51:58 GMT+01:00, Andrew Gallagher  a ?crit :

@_date: 2020-07-09 19:22:17
@_author: Franck Routier (perso 
@_subject: Traveling without a secret key 
Le jeudi 09 juillet 2020 ? 14:58 +0200, Stefan Claas a ?crit :
For Android (actually I use /e/ degoogled OS), I use K9Mail and
OpenKeyChain, together with a NFC Yubikey. I also use PasswordStore for
all sort of passwords, that I synchronize using git with my other

@_date: 2020-07-09 19:22:37
@_author: Franck Routier (perso 
@_subject: Traveling without a secret key 
Le jeudi 09 juillet 2020 ? 14:58 +0200, Stefan Claas a ?crit :
For Android (actually I use /e/ degoogled OS), I use K9Mail and
OpenKeyChain, together with a NFC Yubikey. I also use PasswordStore for
all sort of passwords, that I synchronize using git with my other

@_date: 2020-11-21 10:37:57
@_author: Franck Routier (perso 
@_subject: Ask for passphrase once, but require confirmation each time a 
You could use a Yubikey: correctly configured, it will required you to
touch the yubikey capacitor button to allow the use of the gpg key
(once the passphrade is cached of course)
Le jeudi 19 novembre 2020 ? 22:08 +0100, dalz via Gnupg-users a ?crit?:

@_date: 2020-09-18 10:08:46
@_author: Franck Routier (perso 
@_subject: Which keyserver 
Le jeudi 17 septembre 2020 ? 18:13 -0400, Phil Pennock via Gnupg-users
a ?crit :
What is the status of WKD now, and is it to superseed centralized key
servers ?

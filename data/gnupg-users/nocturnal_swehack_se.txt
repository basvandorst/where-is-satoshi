
@_date: 2007-06-27 20:13:28
@_author: User Nocturnal 
@_subject: Problems with pthread when building gpgme. 
I have a few problems with building gpgme on FreeBSD 6.2-RELEASE with posix threads that come in FreeBSD base installed. Not sure if the Posix threads are causing problems but here is what happens when i run make after running the configure script with all defaults.  if /bin/sh ../libtool --tag=CC --mode=compile gcc -DHAVE_CONFIG_H  -I. -I. -I..   -I/usr/local/include -I/usr/local/include/pth   -I/usr/local/include/pth -I/usr/local/include/glib-2.0 -I/usr/local/lib/glib-2.0/include -g -O2 -Wall -Wcast-align -Wshadow -Wstrict-prototypes -MT ath-pthread.lo -MD -MP -MF ".deps/ath-pthread.Tpo" -c -o ath-pthread.lo ath-pthread.c;  then mv -f ".deps/ath-pthread.Tpo" ".deps/ath-pthread.Plo"; else rm -f ".deps/ath-pthread.Tpo"; exit 1; fi
  gcc -DHAVE_CONFIG_H -I. -I. -I.. -I/usr/local/include -I/usr/local/include/pth -I/usr/local/include/pth -I/usr/local/include/glib-2.0 -I/usr/local/lib/glib-2.0/include -g -O2 -Wall -Wcast-align -Wshadow -Wstrict-prototypes -MT ath-pthread.lo -MD -MP -MF .deps/ath-pthread.Tpo -c ath-pthread.c  -fPIC -DPIC -o .libs/ath-pthread.o
 In file included from ath-pthread.c:36:
 /usr/local/include/pth/pthread.h:285: error: conflicting types for 'pthread_t'
 /usr/include/sys/_pthreadtypes.h:64: error: previous declaration of 'pthread_t' was here
 /usr/local/include/pth/pthread.h:286: error: conflicting types for 'pthread_attr_t'
 /usr/include/sys/_pthreadtypes.h:65: error: previous declaration of 'pthread_attr_t' was here
 /usr/local/include/pth/pthread.h:288: error: conflicting types for 'pthread_once_t'
 /usr/include/sys/_pthreadtypes.h:71: error: previous declaration of 'pthread_once_t' was here
 /usr/local/include/pth/pthread.h:289: error: conflicting types for 'pthread_mutexattr_t'
 /usr/include/sys/_pthreadtypes.h:67: error: previous declaration of 'pthread_mutexattr_t' was here
 /usr/local/include/pth/pthread.h:290: error: conflicting types for 'pthread_mutex_t'
 /usr/include/sys/_pthreadtypes.h:66: error: previous declaration of 'pthread_mutex_t' was here
 /usr/local/include/pth/pthread.h:291: error: conflicting types for 'pthread_condattr_t'
 /usr/include/sys/_pthreadtypes.h:69: error: previous declaration of 'pthread_condattr_t' was here
 /usr/local/include/pth/pthread.h:292: error: conflicting types for 'pthread_cond_t'
 /usr/include/sys/_pthreadtypes.h:68: error: previous declaration of 'pthread_cond_t' was here
 /usr/local/include/pth/pthread.h:293: error: conflicting types for 'pthread_rwlockattr_t'
 /usr/include/sys/_pthreadtypes.h:73: error: previous declaration of 'pthread_rwlockattr_t' was here
 /usr/local/include/pth/pthread.h:294: error: conflicting types for 'pthread_rwlock_t'
 /usr/include/sys/_pthreadtypes.h:72: error: previous declaration of 'pthread_rwlock_t' was here
 ath-pthread.c: In function `_gpgme_ath_connect':
 ath-pthread.c:161: warning: passing arg 2 of `__pthread_connect' discards qualifiers from pointer target type
I have GNU Portable Threads 2.0.7 installed in /usr/local/include/pth and /usr/local/lib/pth, these seem to be the paths that the Makefile uses by default for -I and -L arguments to gcc. Med v?nliga h?lsningar
Stefan Midjich aka nocturnal
 [SWEHACK]

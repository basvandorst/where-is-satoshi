
@_date: 2006-07-27 18:40:39
@_author: Gilbert Fernandes 
@_subject: GnuPG 1.4.4 does not compile on NetBSD is curl library is installed 
Hello everyone,
when GnuPG 1.4.4 is compiled on NetBSD 3.0 it works fine. The configure
does its job, as the make and make install.
But if the curl library has been installed on the system (on one of my
it has been installed as dependency of clamav) then the make fails because
a file does not find the proper include file at the right place.
Here is the error message :
In file included from gpgkeys_finger.c:48:
ksutil.h:26:23: curl/curl.h: No such file or directory
In file included from gpgkeys_finger.c:48:
ksutil.h:108: error: parse error before "error"
*** Error code 1
make: stopped in /root/g/gnupg-1.4.4/keyserver
*** Error code 1
make: stopped in /root/g/gnupg-1.4.4
*** Error code 1
make: stopped in /root/g/gnupg-1.4.4
As soon as I remove the curl library (compiled from
When the curl library is installed, the curl.h file is located there :
To make a test, I have tried to compile the previous GnuPG version
(1.4.3) with and without that curl library installed :
keyserver.c:30:23: curl/curl.h: No such file or directory
In file included from keyserver.c:40:
../include/ttyio.h:32: warning: `libintl_printf' is an unrecognized
format function type
../include/ttyio.h:34: warning: `libintl_printf' is an unrecognized
format function type
In file included from keyserver.c:45:
../include/util.h:81: warning: `libintl_printf' is an unrecognized
format function type
../include/util.h:84: warning: `libintl_printf' is an unrecognized
format function type
../include/util.h:85: warning: `libintl_printf' is an unrecognized
format function type
../include/util.h:86: warning: `libintl_printf' is an unrecognized
format function type
../include/util.h:87: warning: `libintl_printf' is an unrecognized
format function type
../include/util.h:88: warning: `libintl_printf' is an unrecognized
format function type
keyserver.c: In function `parse_keyserver_uri':
keyserver.c:367: warning: subscript has type `char'
*** Error code 1
make: stopped in /root/g/gnupg-1.4.3/g10
*** Error code 1
make: stopped in /root/g/gnupg-1.4.3
*** Error code 1
make: stopped in /root/g/gnupg-1.4.3
Result is the same.
Here is my system uname -a :
NetBSD soekris 3.0 NetBSD 3.0 (SOEKRIS)  Fri May  5 19:19:40 UTC
2006  root i386
Installed software versions :
gmake-3.81 (I always compiled GnuPG using make, not gmake)
When I tried to compile without curl, both 1.4.3 and 1.4.4 compile fine.
After having installed curl, I did a new ./configure && make in both
GnuPG 1.4.3 folder and 1.4.4 folder after a make clean.
Two solutions :
1. GnuPG make file is adapted to NetBSD
2. The curl package maintener does a change that allows GnuPG make file
to find curl where it should be.
3.  __NETBSD__ include the curl file located in /usr/pkg/include/curl/
The curl library maintainer is Cc of this email.
Best regards,

@_date: 2006-07-27 18:40:48
@_author: Gilbert Fernandes 
@_subject: GnuPG 1.4.4 does not compile on NetBSD is curl library is 
Name your beer and address and I will handle the shipping :)
(er.. try to choose a beer I can find in France though ha ha)

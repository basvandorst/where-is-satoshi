
@_date: 2016-02-11 21:13:27
@_author: Mark H Weaver 
@_subject: [Issue2229] make check 14 of 35 tests failed 
[I wanted to add this to ,
but I wasn't able to find the email address where I should send it.]
We've run into this problem in GNU Guix.  Here's the report in our bug
  A few observations:
* The problem mostly only occurs on x86_64 systems.  On our build farm,
  gnupg-2.1.11 failed to build 8 times before it finally succeeded.  On
  our other supported architectures (i686, armhf, and mips64el), it
  succeeded on the first try.
* Sometimes there are 14 failures, and sometimes there's only 1 failure
  (gpgtar.test).
* Although we perform builds within an isolated build container, the
  problem tends to happen on some systems and not others.  Ludovic
  Court?s reported building gnupg-2.1.11 three times on his x86_64
  laptop, and that it succeeded all three times.  Other users have
  reported consistent build failures.
* One of the core Guix developers who consistently gets 14 failures did
  a git bisect, and found that the problem was apparently introduced in
  commit ee87c653bf.
     Regards,
       Mark

@_date: 2019-11-02 13:32:32
@_author: Mark H Weaver 
@_subject: How to decrypt a message while preserving the signature? 
Does GnuPG provide a mechanism to decrypt an encrypted-and-signed
message in such a way that preserves the original signature, such that
the original signature can be independently verified by an arbitrary
     Thanks,
       Mark

@_date: 2019-11-03 01:55:03
@_author: Mark H Weaver 
@_subject: How to decrypt a message while preserving the signature? 
I know what a detached signature is.  You misunderstood what I'm asking
In simple terms, my understanding is that when you sign-and-encrypt a
message, it is first signed, resulting in a signed message (a message
plus signature), and then the signed message (message plus signature) is
encrypted.  The details are likely more complicated, but at a high level
of abstraction, that's my understanding of what's going on.  Please
correct me if I'm wrong.
I'm asking if there's a way to decrypt the message while preserving the
existing signed message.  Of course, this requires the private
decryption key, but it should *not* require the private signing key.
I can study the details and implement this myself if necessary, but to
save myself precious time and energy, I'm asking if GnuPG already
provides a mechanism to do this.  More generally, does there exist free
software to do this?
      Thanks,
        Mark

@_date: 2019-11-03 02:06:13
@_author: Mark H Weaver 
@_subject: How to decrypt a message while preserving the signature? 
"Atomically", really?  I'm aware that the high-level user interface
makes it *appear* to be atomic, but if you actually believe it's atomic,
I think you are demonstrating that your knowledge of cryptography and
OpenPGP formats is even more superficial than my own.
Incidentally, I one of the first developers hired by PGP, Inc, and one
of the authors of PGP 5.x.  I worked with Phil Zimmermann quite closely,
and also with Hal Finney, RIP.  It was the last nonfree software I
worked on, back in the late 1990s.  Obviously, I did not work on the
actual cryptographic operations--my areas were the key management code,
cross-platform layer, API design, and design and production of the
scannable printed source code books that allowed PGP to be legally
exported to Europe for the first time.  Please do not mistake me for a
I'm reading RFC 4880 now, to get my own answers.  Still, I would be
grateful if someone with deeper knowledge would answer my question.
     Thanks,
       Mark

@_date: 2019-11-03 02:15:40
@_author: Mark H Weaver 
@_subject: How to decrypt a message while preserving the signature? 
Quoting the last paragraph of section 2.1 of RFC 4880:
   Both digital signature and confidentiality services may be applied to
   the same message.  First, a signature is generated for the message
   and attached to the message.  Then the message plus signature is
   encrypted using a symmetric session key.  Finally, the session key is
   encrypted using public-key encryption and prefixed to the encrypted
   block.
Exactly as I said.  So what I'm asking for can certainly be done.
      Mark

@_date: 2019-11-03 09:25:49
@_author: Mark H Weaver 
@_subject: How to decrypt a message while preserving the signature? 
Hi Peter,
Thanks very much Peter, this is what I was looking for.  I'm grateful.
     Regards,
       Mark


@_date: 2013-04-05 10:20:32
@_author: Jan Ignatius 
@_subject: A PC user unfamiliar with any free software would like to send 
Hash: SHA1
Perhaps a web based solution would be easier to adopt in this case?
Some examples:
You could access these services using Tor browser bundle ( to further hide your identity from 3rd parties.
I don't trust the above solutions as much as GNUPG but depending on the type of information you are exchanging with your friend, they may be

@_date: 2013-02-13 07:46:31
@_author: Jan Ignatius 
@_subject: Unable to access Crypto Stick with gpg2 
so far I've been (successfully) using gpg2 with Windows but having
recently installed Linux Mint 14 on a spare laptop, I've ran into
problems when trying to access my keys stored on a GPF Cryto Stick:
$ gpg2 --version
gpg (GnuPG) 2.0.19
libgcrypt 1.5.0
$ gpg2 --card-status
gpg: selecting openpgp failed: Unsupported certificate
gpg: OpenPGP card not available: Unsupported certificate
the card contains normal 2048bit keys. If I sudo I get this:
$ sudo gpg2 --card-status
gpg: WARNING: unsafe ownership on configuration file
`/home/jan/.gnupg/gpg.conf' scdaemon[2740]: PC/SC OPEN failed: reader
unavailable gpg: selecting openpgp failed: Card error
gpg: OpenPGP card not available: Card error
$ scdaemon[2740]: PC/SC OPEN failed: reader unavailable
scdaemon[2740]: PC/SC OPEN failed: reader unavailable
scdaemon[2740]: scdaemon (GnuPG) 2.0.19 stopped
What should I try next to get gpg2 working?

@_date: 2013-02-13 20:16:01
@_author: Jan Ignatius 
@_subject: Unable to access Crypto Stick with gpg2 
I may have missed something. I just restarted the machine
(which I had not done when trying to get the stick to work), performed the same actions again and got a different result:
$ gpg2 --card-status
gpg: selecting openpgp failed: Unsupported certificate
gpg: OpenPGP card not available: Unsupported certificate
$ sudo gpg2 --card-status
[sudo] password for jan: gpg: WARNING: unsafe ownership on configuration file
`/home/jan/.gnupg/gpg.conf' Application ID ...:
D276000124010200000500000C1D0000 Version ..........: 2.0
Manufacturer .....: ZeitControl
Serial number ....: 00000C1D
Name of cardholder: Jan Ignatius
Language prefs ...: en
Sex ..............: male
URL of public key : [not set]
Login data .......: [not set]
Signature PIN ....: forced
Key attributes ...: 2048R 2048R 2048R
Max. PIN lengths .: 32 32 32
PIN retry counter : 3 0 3
Signature counter : 18
Signature key ....: 08EC 7FDC BAAA EEF5 AFE8  BEEC 8B71 471F 7F86 1262
      created ....: 2012-07-25 18:21:13
Encryption key....: F316 9042 B599 FE06 ABFC  BB42 1D72 A9D5 F7EB DE4B
      created ....: 2012-07-25 18:21:13
Authentication key: B2EB 65F2 31F8 6B30 B917  06A7 1A8B 1F48 BEA5 709F
      created ....: 2012-07-25 18:21:13
General key info..: [none]
scdaemon[3638]: updating slot 0 status: 0x0000->0x0007 (0->1)
$ scdaemon[3638]: scdaemon (GnuPG) 2.0.19 stopped
So at least gpg2 can access the card with sudo but the scdaemon dies
after the first attempt. Coming back to your original proposal, could you give me some guidance
on how i can check the user permissions for the Crypto Stick? I've only
gotten as far as identifying the card by doing tail -f /var/log/syslog
and then plugging in the device:
Feb 13 19:59:59 Sibelius kernel: [  145.733139] usb 1-1.2: >new full-speed USB device number 5 using ehci_hcd
Feb 13 19:59:59 Sibelius kernel: [  145.826321] usb 1-1.2: >New USB device found, idVendor=20a0, idProduct=4107
Feb 13 19:59:59 Sibelius kernel: [  145.826330] usb 1-1.2: >New USB device strings: Mfr=1, Product=2, SerialNumber=0
Feb 13 19:59:59 Sibelius kernel: [  145.826337] usb 1-1.2: >Product: Crypto Stick v1.2
Feb 13 19:59:59 Sibelius kernel: [  145.826342] usb 1-1.2: >Manufacturer: German Privacy Foundation
Feb 13 19:59:59 Sibelius mtp-probe: checking bus 1, device 5: "/sys/devices/pci0000:00/0000:00:1a.0/usb1/1-1/1-1.2"
Feb 13 19:59:59 Sibelius mtp-probe: bus: 1, device: 5 was not an MTP device
Feb 13 19:59:59 Sibelius kernel: [  145.848956] WARNING! power/level is deprecated; use power/control instead
Feb 13 19:59:59 Sibelius pcscd: ccid_usb.c:1054:ControlUSB() control
failed (1/5): -9 Success
But I am at loss on how to proceed from here.

@_date: 2013-02-14 19:38:05
@_author: Jan Ignatius 
@_subject: Unable to access Crypto Stick with gpg2 
Turns out it was mounted on /dev/bus/usb/001/005:
crw-rw-r-- 1 root pcscd 189, 4 Feb 14 19:13 005
The access rights seem ok to me - the smart card daemon pcscd has full
rights to the device. Does anyone have other ideas I could test out?
A more directly gnupg related matter also came to light - after the
card reading fails (see my earlier examples) and the scdaemon goes
belly up it seems not to die peacefully: When I remove the Crypto Stick
my syslog starts filling up with thousands identical entries as follows:
Feb 14 19:22:43 Sibelius kernel: [  846.570762] usb 1-1.2: >USB
disconnect, device number 5
Feb 14 19:22:43 Sibelius pcscd: ccid_usb.c:660:WriteUSB() write failed
(1/5): -4 No such device
Feb 14 19:22:43 Sibelius pcscd: ifdwrapper.c:348:IFDStatusICC() Card
not transacted: 617
Feb 14 19:22:44 Sibelius pcscd: ccid_usb.c:660:WriteUSB() write failed
(1/5): -4 No such device
Feb 14 19:22:44 Sibelius pcscd: ifdwrapper.c:348:IFDStatusICC() Card
not transacted: 617
Feb 14 19:22:45 Sibelius pcscd:
eventhandler.c:303:EHStatusHandlerThread() Error communicating to:
German Privacy Foundation Crypto Stick v1.2 00 00 Feb 14 19:22:45
Sibelius pcscd: ccid_usb.c:660:WriteUSB() write failed (1/5): -4 No
such device Feb 14 19:22:45 Sibelius pcscd:
ifdwrapper.c:348:IFDStatusICC() Card not transacted: 617
Feb 14 19:22:46 Sibelius pcscd:
eventhandler.c:303:EHStatusHandlerThread() Error communicating to:
German Privacy Foundation Crypto Stick v1.2 00 00 Feb 14 19:22:47
Sibelius pcscd: ccid_usb.c:660:WriteUSB() write failed (1/5): -4 No
such device Feb 14 19:22:47 Sibelius pcscd:
ifdwrapper.c:348:IFDStatusICC() Card not transacted: 617
Feb 14 19:22:48 Sibelius pcscd:
eventhandler.c:303:EHStatusHandlerThread() Error communicating to:
German Privacy Foundation Crypto Stick v1.2 00 00 Feb 14 19:22:48
Sibelius pcscd: ccid_usb.c:660:WriteUSB() write failed (1/5): -4 No
such device Feb 14 19:22:48 Sibelius pcscd:
ifdwrapper.c:348:IFDStatusICC() Card not transacted: 617
Feb 14 19:22:49 Sibelius pcscd:
eventhandler.c:303:EHStatusHandlerThread() Error communicating to:
German Privacy Foundation Crypto Stick v1.2 00 00 Feb 14 19:22:49
Sibelius pcscd: ccid_usb.c:660:WriteUSB() write failed (1/5): -4 No
such device Feb 14 19:22:49 Sibelius pcscd:
ifdwrapper.c:348:IFDStatusICC() Card not transacted: 617
Feb 14 19:22:50 Sibelius pcscd:
eventhandler.c:303:EHStatusHandlerThread() Error communicating to:
German Privacy Foundation Crypto Stick v1.2 00 00 Feb 14 19:22:51
Sibelius pcscd: ccid_usb.c:660:WriteUSB() write failed (1/5): -4 No
such device Feb 14 19:22:51 Sibelius pcscd:
ifdwrapper.c:348:IFDStatusICC() Card not transacted: 617
Feb 14 19:22:52 Sibelius pcscd:
eventhandler.c:303:EHStatusHandlerThread() Error communicating to:
German Privacy Foundation Crypto Stick v1.2 00 00 Feb 14 19:22:52
Sibelius pcscd: ccid_usb.c:660:WriteUSB() write failed (1/5): -4 No
such device Feb 14 19:22:52 Sibelius pcscd:
ifdwrapper.c:348:IFDStatusICC() Card not transacted: 617
Feb 14 19:22:53 Sibelius pcscd:
eventhandler.c:303:EHStatusHandlerThread() Error communicating to:
German Privacy Foundation Crypto Stick v1.2 00 00 Feb 14 19:22:54
Sibelius pcscd: ccid_usb.c:660:WriteUSB() write failed (1/5): -4 No
such device Feb 14 19:22:54 Sibelius pcscd:
ifdwrapper.c:348:IFDStatusICC() Card not transacted: 617
Feb 14 19:22:55 Sibelius pcscd:
eventhandler.c:303:EHStatusHandlerThread() Error communicating to:
German Privacy Foundation Crypto Stick v1.2 00 00 Feb 14 19:22:55
Sibelius pcscd: ccid_usb.c:660:WriteUSB() write failed (1/5): -4 No
such device
...Ad infinitum
So I have to restart the machine to avoid bloating up the syslog. The same does not happen if I only plug in the stick and then remove it,
without running gpg2, the only entries (for the disconnect) are as
Feb 14 19:34:44 Sibelius kernel: [  206.379447] usb 1-1.2: >USB
disconnect, device number 5 Feb 14 19:34:44 Sibelius pcscd:
ccid_usb.c:660:WriteUSB() write failed (1/5): -4 No such device

@_date: 2013-02-14 22:20:11
@_author: Jan Ignatius 
@_subject: Unable to access Crypto Stick with gpg2 
This is what I could find from the output of that command that seemed
relevant for gpg:
1878 -                                        /usr/sbin/pcscd
2666 adm,cdrom,sudo,dip,plugdev,lpadmin,samba /usr/bin/gpg-agent
--daemon --sh
--write-env-file=/home/jan/.gnupg/gpg-agent-info-Sibelius /usr/bin/dbus-launch
--exit-with-session x-session-manager
2683 adm,cdrom,sudo,dip,plugdev,lpadmin,samba mate-keyring-daemon
--start --components=gpg
2781 adm,cdrom,sudo,dip,plugdev,lpadmin,samba /usr/bin/gnome-keyring-daemon
--start --components=gpg
As you can see, there are no entries for scdaemon. I've attached the
full output for reference. If I run scdaemon manually (scdaemon --daemon), this is the entry from
the ps-command:
7592 adm,cdrom,sudo,dip,plugdev,lpadmin,samba scdaemon --daemon
Is the solution such that I need to get the scdaemon to be a part of
the group "pcscd"?

@_date: 2013-02-16 11:42:42
@_author: Jan Ignatius 
@_subject: Unable to access Crypto Stick with gpg2 
On Thu, 14 Feb 2013 22:03:45 +0100
If I run "scdaemon --daemon", then ps -e -o pid,egroup,supgrp,args, I
4415 jan      adm,cdrom,sudo,dip,plugdev,lpadmin,samba scdaemon --daemon
1911 root     -                                        /usr/sbin/pcscd
So no "pcscd" for the scdaemon. While searching for more information, I stumbled on this discussion
thread from 2011:
That seemed propose a patch that would make scdaemon behave better when
a smart card is removed from the system (and not spam the syslog with
endless errors and prevent further access to the card). Did this ever
make it to a release of gnupg?
Also, is there a known release of gpg2 that people use with OpenPGP
cards that I could fall back to? Or a known Linux
distribution+gnupg version combo I could try? (I would really like to sever my dependency to Microsoft Windows and move my correspondence to
Linux but I need access to my signing keys before that can happen. :-/)

@_date: 2013-02-17 16:46:13
@_author: Jan Ignatius 
@_subject: Unable to access Crypto Stick with gpg2 
On Sat, 16 Feb 2013 11:42:42 +0200
I'm happy to report that I finally got a working setup by doing the
- removed gpg2, gpgme, gpa, kleopatra
- added "no-use-agent" to gpg.conf
- unchecked "Use GPG-agent to manage passwords" in Claws Mail (3.8.1)
- copied the udev rules from privacyfoundation.de to /dev/udev/rules.d
- removed /etc/xdg/autostart/gnome-keyring-gpg.desktop
Now I have gpg version 1.4.11 that works with the cryptostick without
sudo and provides encryption services to Claws Mail automatically.
Thank you again for everyone that helped me with this.

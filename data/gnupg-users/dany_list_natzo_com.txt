
@_date: 2005-02-03 23:04:51
@_author: Dany Nativel 
@_subject: Any LiveCD with GnuPG 1.4? 
This is the third time I'm trying to post to this list without success.

@_date: 2005-02-06 14:57:34
@_author: Dany Nativel 
@_subject: GnuPG 1.4.1rc1 + Smart Card reader package for Knoppix/Kanotix 
In a previous post (Any LiveCD with GnuPG 1.4?) I was asking about a potential LiveCD that supports Gnupg 1.4 (at least).
Thanks everyone for the valuable comments you've provided.
I received a private email from David Lorch suggesting recompiling gpg and associated libraries under Knoppix by mounting some ramdisk.
I kind of tried but it didn't go very far. Finally I found a way to get gpg 1.4.1rc1 to run under Knoppix without much hassle (using a SCM SCR331 reader which has a driver built-in gnupg). In fact it was as easy as ./configure and make !
I then added additional drivers for various readers using the Klik technology. In the end I had a handy package that contained gpg1.4.1rc1 as well as drivers that I could carry around and use with almost any Knoppix/Kanotix LiveCD. This is very convenient when it comes to key generation (on-card for example with off-card backup for example).
1)  Boot from Knoppix CD (3.7 12/08)  or even better from Kanotix BH X
IMPORTANT : for Knoppix I only used boot: knoppix26    .... I couldn't get most of my USB peripherals to work with regule knoppix (2.4).
Kanotix is 2.6 by default so no problems.
2) Download and extract gnupg-1.4.1-rc from ftp://ftp.gnupg.org/gcrypt/alpha/gnupg/gnupg-1.4.1rc1.tar.bz2   for example in your home directory (/home/knoppix)
3) Compile GnuPG
cd ~/gnupg-1.4.1rc1
the executable is available in ~/gnupg-1.4.1rc1/g10
4) Smart Card Reader
a) CCID reader directly supported by gnupg (e.g. USB SCM SCR331)
Nothing to do ... just use it :   ~/gnupg-1.4.1rc1/g10/gpg --card-status
b) CCID reader supported by libccid    (see  for a list of supported readers)
I've used it with the Gemplus GemTwin USB.
In order to use libccid you need the pcscd which can be downloaded as a "klik" application for Knoppix.
Knoppix  users you need an extra step to get the klik client up and running  (Kanotix users... go to the next step):
# Press Alt-F2 and paste:
# wget klik.atekon.de/client/install -O -|sh
Go to the following address    and "klik" to install  even faster open a web browser and enter : klik://pcscd
Now killall pcscd session that may have been opened during the installation process. I noticed that the pcscd would only work if launched with debug options.
This pcscd packages includes the libccid drivers by default so it's ready to go.
Unfortunately gnupg is looking for libpcslite.so so a link has to be created :
ln /tmp/klik/pcscd/usr/lib/libpcsclite.so.1 Now it's time to start the pcscd from the command line (not the icon on your desktop)
NB: this worked fine under Knoppix but not under Kanotix,   sudo Before starting gpg you need to set the path to libpcsclite.so :
export LD_LIBRARY_PATH=/tmp/klik/pcscd/usr/lib/:$LD_LIBRARY_PATH
You can now start gnupg but remember that if you're using a CCID reader not supported by GnuPG itself you must disable ccid when calling GnuPG so it won't try to talk to the reader directly. For example the GemTwin will fail if not started with the extra option.
~/gnupg-1.4.1rc1/g10/gpg --card-status --disable-ccid NB: SCR331 can also be used with libccid (it's supported by both gnupg and libccid)
c) Other Smart Card readers
If none of your reader is supported by the above solutions you need to install an additional driver.
Klik provides a convenient way to download precompiled drivers. Below is a list of available drivers:
- libasedrive-serial | PC/SC driver for the Athena ASEDrive IIIe serial smart card reader
- libasedrive-usb | PC/SC driver for the Athena ASEDrive IIIe USB smart card reader
- libcteco50000 | Orga Eco 5000 smartcard reader PCSC and CT-API driver
- libetoken | PC/SC Driver for Aladdin's eToken usb plug
- libgcr410 | PC/SC driver for GemPlus GCR410 serial SmartCard interface
- libgempc410 | PC/SC driver for the GemPC 410, 412, 413 and 415 smart card readers
- libgempc430 | PC/SC driver for the GemPC 430, 432, 435 smart card readers
- libslbreflex2 | Reflex 62/64 smartcard reader PCSC and CT-API driver
- libtowitoko2 | Towitoko smartcard reader PCSC and CT-API driver
Example  :  USB Towitoko Chipdrive Micro 130
After "kliking" on libtowitoko2 (  you'll find a new directory under /temp/klik called towitoko2
The drivers files need to be placed under the pcscd directory and according to a specific directory organization
mkdir /tmp/klik/pcscd/usr/lib/pcsc/drivers/ifd-towitoko2.bundle
mkdir /tmp/klik/pcscd/usr/lib/pcsc/drivers/ifd-towitoko2.bundle/Contents
mkdir cp /tmp/klik/libtowitoko2/usr/lib/libtowitoko.so.2.0.0 cp /tmp/klik/libtowitoko2/usr/share/towitoko/Info.plist and then start pcscd the same way :
Don't forget to set the path to libpcsclite.so before running gnupg :
export LD_LIBRARY_PATH=/tmp/klik/pcscd/usr/lib/:$LD_LIBRARY_PATH
~/gnupg-1.4.1rc1/g10/gpg --card-status
NB: Serial reader may also be used but they'll need a little bit more tweaking for properly configuring the serial port and so on. I tried to play a little bit with the GCR415 without success.
5) Conclusion
Now that you've got your reader up and running you probably don't want to go to this process next time you're booting from Knoppix/Kanotix.
The only thing you need to save (on a USB drive for example) is the You can also use the convenient persistent home directory and just move the klik to it so it will be available all the time. Don't forget to adjust the export LD_LIBRARY_PATH accordingly !
I've packaged a pre-compiled gpg-1.4.1rc1, pcsd (including libccid) and towitoko driver so you can just extract it under /home/knoppix and follow the instructions found in the short readme file.
The file can be downloaded from This should help users seeking to generate their keys on-card and save a backup copy off-card. For more security you should probably recompile gpg yourself (it doesn't take that long). One could also disable network connections (Knoppix sets them up automatically) and use encrypted swap file (especially if swap is mounted on a hdd).

@_date: 2005-02-17 22:22:17
@_author: Dany Nativel 
@_subject: Backup with encryption 
According to the man page, you can choose the one you like :
--encrypt-key */key/
    When backing up, encrypt to the given public key, instead of using
    symmetric (traditional) encryption. Can be specified multiple times.
BTW,  I use rdiff-backup ( which doesn't offer any encrytpion but  provides a very efficient way to perform incremental backups.

@_date: 2005-02-20 01:16:01
@_author: Dany Nativel 
@_subject: Advice for Web of Trust policy 
I've been playing around with the OpenPGP card and I'm now ready to go live. I'd like to get into the web of trust but I don't know which way to go :
1) Like most GnuPG users, dedicated off-line signing key for signing other people's keys and my subkeys
pros :
- not connected... that says all!
cons: - doesn't prevent from keyboard logger (passphrase)
- signing key can be physically duplicated (brute force attack possible)
2) OpenPGP card for both signing and encrypting
pros :
- One card for both web of trust and everyday's encryption/signing
- Not easy to duplicate key's secret material (but not impossible though ;))
- No complex passphrase to rememeber + automatic lock-down after 3 attempts
- Easier to use with services like biglumber.com because the signing key is linked to an email address and also has an encryption subkey. Some people will only give you a cert level 2 if the key is only a signing key.
- Card is going to be used on a machine connected to the Internet.
How is my policy (single OpenPGP card for everything) going to be accepted by the community ?
Is this going to be seen as a threat to the web of trust ?
Maybe I can get the advantage of 1) by only signing other people's keys with OpenPGP SmartCard, a LiveCD and no network)
Thanks for your feedback
Best regards

@_date: 2006-02-22 23:18:14
@_author: Dany 
@_subject: Necessity of GPG when using SSL 
I switched few years ago to fastmail.fm for several reasons :
- https + advanced protections when accessing from public terminal
(including url pseudo-scrambling)
- IMAP with SSL
- Text and only text for the webmail interface (no pop-up ad and no
graphics), just plain speed
- WebDAV (I don't use it)
- IMAP access on non-standard port like 80 and 443  so you can go
through some difficult firewalls
I usually don't promote commercial products but as they offer a free
plan as well I thought it might help some people.
PS: before writting this email I quickly started Ethereal and used the
webmail in order to check that the connection was SSL protected even
after login.
Henry Hertz Hobbit a ?crit :

@_date: 2006-05-17 09:26:15
@_author: Dany 
@_subject: smart card + gpg only root 
I'm trying to get regular users to use smart card readers under Ubuntu
(dapper). As far as I know Ubuntu uses udev rather than hotplug so I
followed the instructions found at  :
It works if I do sudo gpg --card-status. Unfortunately, when I do a
card-status using a regular user I get :
gpg: DBG: ccid-driver: usb_claim_interface failed: -1
I tried :
- To follow the instructions and use the two files found in the how-to
: gnupg-ccid.rules & gnupg-ccid
- to change group ownership (root -> scard) of the files found in
-rw-r--r-- 1 root root  001
-rw-r--r-- 1 root root  025
-rw-rw-r-- 1 root scard 001
-rw-rw-r-- 1 root scard 025
- to add 0x in front of the numbers found in gnupg-ccid.rules (except
for the 0660 mode)
- to use the script-less option found in the comments
Also in the how-to it looks like to me that there are three steps
described in the following sentence but I only see two commands after :
"You will now create a group scard, give this group permission to
access the smart card reader, and include the users who should have
access to the card reader to this group"
# addgroup scard
# addgroup yourusername scard (change for the right username)
Where is the "give this group permission to access the smart card
reader" done ?
Sorry for asking all those questions. I'm trying to convince myself to
migrate from SID to Ubuntu and this requires OpenPGP card support
under Ubuntu.
Thank you in advance

@_date: 2006-05-17 22:00:27
@_author: Dany 
@_subject: smart card + gpg only root 
Many many thanks. It worked.  I'll try to get the how-to found on
fsfe.org fixe.


@_date: 2011-02-23 19:00:02
@_author: Wayne Butterworth 
@_subject: gpg-agent: can't connect to the PIN entry module: End of file 
I'm trying to use gpg-agent as a replacement for ssh-agent, as a learning experience. It is possible that I am using the tools incorrectly, so I apologise in advance for doing something silly.
When I try to load the key using ssh-add, I receive the error
Error reading response length from authentication socket.
Broken Pipe
And the gpg-agent process dies.
The command I am using to load the key is
. $HOME/gpg-agent.sh; ssh-add css-dev
I am prompted for the passphrase, which I enter, and then get the error mentioned above.
The command ( and response ) that I used to start gpg-agent is:
gpg-agent --daemon --enable-ssh-support --write-env-file "${HOME}/gpg-agent.sh"  --log-file "${HOME}/gpg-agent.log" --debug-level guru
gpg-agent[13551]: enabled debug flags: command mpi crypto memory cache memstat hashing assuan
GPG_AGENT_INFO=/tmp/gpg-Jj1UU7/S.gpg-agent:13552:1; export GPG_AGENT_INFO;
SSH_AUTH_SOCK=/tmp/gpg-yP1qF5/S.gpg-agent.ssh; export SSH_AUTH_SOCK;
SSH_AGENT_PID=13552; export SSH_AGENT_PID;
The contents of the log file:
2011-02-23 18:44:26 gpg-agent[13552] gpg-agent (GnuPG) 2.0.17 started
2011-02-23 18:44:49 gpg-agent[13552] ssh handler 0x760a0 for fd 8 started
2011-02-23 18:44:53 gpg-agent[13552] ssh request handler for add_identity (17) started
2011-02-23 18:44:53 gpg-agent[13552] starting a new PIN Entry
2011-02-23 18:44:53 gpg-agent[13552] can't connect to the PIN entry module: End of file
I have a fresh build of pinentry 0.8.1 installed in /usr/local/bin:
root at iba5:/ $ ls -l /usr/local/bin/pin*
lrwxrwxrwx   1 root     root          15 Feb 23 16:00 /usr/local/bin/pinentry -> pinentry-curses
-rwxr-xr-x   1 root     root      120368 Feb 23 15:52 /usr/local/bin/pinentry-curses
-rwxr-xr-x   1 root     root      300556 Feb 23 15:52 /usr/local/bin/pinentry-gtk-2
I have fresh builds of gpg 2.0.17, libassuan 2.0.0, libgcrypt 1.4.6, libska 1.1.0 and pth 2.0.7, all built using default options.
I'm running Solaris 10.
Any help that you could provide would be greatly appreciated.
Thanks and regards,
This email has been scanned by the MessageLabs Email Security System.
For more information please visit

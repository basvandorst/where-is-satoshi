
@_date: 2008-09-10 15:32:34
@_author: Clough, Samuel (USPC.PRG.Atlanta 
@_subject: Signing Problem after Moving GPG and Keys 
I have a very frustrating problem with a file that is ascii armored and
signed.  Any help would be greatly appreciated as I've spent hours on
this with no solution and have never had a problem like this before.
For various reasons, we had to move our gpg installation from a RedHat
server to a Windows server.  The only differences (other than the
obvious OS difference) is that the RedHat GPG version is 1.2.1 and the
Windows GPG install is version 1.4.9.  We needed the exact same keys, so
I moved all the contents of ~/.gnupg from the Linux server to the gpg
home on the windows server.  I didn't touch or change the keyring and
everything seemed to work fine.  Encryption and decryption scripts are
running just fine.  However, one major vendor is complaining that when
they get our file there is no signature on it.   Their file is ascii
armored and signed.  It apparently decrypts on their end but the
signature doesn't pass.  As noted, I moved the keyring files, I didn't
do any import or export and I've made sure by copying the keyring again.
I'm also using the exact same GPG command path.  The gpg return code is
0 on both boxes.  The gpg output to stdout is identical except that on
RedHat I get  a line starting with "gpg: DSA signature" and on Windows I
get a line starting with "gpg: DSA/SHA1 signature."   Are these two versions somehow signing differently?  Neither install
uses any kind of custom conf file.  Does anybody have any clue where to
even begin looking?  At this point I'm thinking about trying to get the
1.2.1 version of GPG for windows and install it, although I don't see
how a version change would cause this problem, but I have nowhere else
to look at this point.  Any help is greatly appreciated as I'm having to
manually encrypt and send critical files because our automated process
has moved to the Windows environment but the encryption is not working
properly, or at least not properly by the vendors definition.

@_date: 2008-09-15 09:22:24
@_author: Clough, Samuel (USPC.PRG.Atlanta 
@_subject: Signature Question 
We recently moved our gpg processes from one server to another.  On the
new server, I installed the latest gpg build.  After that, one vendor
starting saying the signature on our files was bad.  I checked and
checked and gpg declared we were still signing them.  I checked the gpg
output between the old and new servers and found that the new server was
saying DSA/SHA signature applied whereas the old version simply said DSA
signature applied.  I rolled back to the older version (1.2.1) and the
vendor reported that our signatures looked good.  I haven't seen
anything in the notes or man page about different signature methods.
Could someone explain to me what changed with signing files?

@_date: 2008-09-16 09:02:11
@_author: Clough, Samuel (USPC.PRG.Atlanta 
@_subject: Signing Problem after Moving GPG and Keys 
I'm sorry, what I meant to say was that when I test with a test key, gpg
decrypts and says that the file is signed.  Our Vendor, however, says
the file is not signed when they decrypt it.  The follow up to this was
my second message where rolling back gpg to version 1.2.1 fixed the
problem (although I don't understand why).
-----Original Message-----
Sent: Monday, September 15, 2008 6:30 PM
Please clarify.  You state both that there is "no signature" and also  that the "signature doesn't pass".  Is there a signature on the file  or not?
David

@_date: 2008-09-16 09:02:53
@_author: Clough, Samuel (USPC.PRG.Atlanta 
@_subject: Signature Question 
To clarify I was signing a file as I was encrypting it.  I'm not sure
what sample I could provide besides the prints to standard out.
-----Original Message-----
Sent: Monday, September 15, 2008 6:26 PM
Not enough information to say.  Please show an example of an old  signature, and a new signature.  It has nothing to do with "DSA" or  "DSA/SHA".  That's just a human-readable message.  Unless you did  special configuration, all DSA signatures are DSA/SHA.
David

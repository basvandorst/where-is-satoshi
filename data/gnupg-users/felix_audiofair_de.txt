
@_date: 2016-07-25 12:08:30
@_author: Felix Winterhalter 
@_subject: Creating key stubs from smartcard without public key 
So I've recently started experimenting with a Yubikey.
I started off by creating an encryption subkey from my master key and moving that to the Yubikey.
This worked fine until I moved to a different computer and tried using it there.
It didn't automatically recognize the key on the card until I imported my publickey as well.
As far as I understand public key encryption regenerating the public key should always be possible
using the private key (which should be stored on the card).
My expected result would have been that gpg --card-status reads the card and then imports all keys on the card
generating the public key associated on the fly for local use.
The situation gets even more complicated if I want to have an authentication subkey on my Yubikey and not have it bound
to any specific master key (and certainly not publish it on any How can I export the ssh key (using gpg --export-ssh-key) when trying to do so using the key id yields:
gpg2 --export-ssh-key 0x5FECDB8C8311CB07!
gpg: key "0x5FECDB8C8311CB07!" not found: No public key
gpg: export as ssh key failed: No public key
Is there any way those public keys or key stubs can be created from the keys stored on the Yubikey or any smartcard itself?
Best regards,

@_date: 2016-09-24 14:10:27
@_author: Felix Winterhalter 
@_subject: Using GPGAgent as SSHAgent on Windows with cygwin/mingw 
So I am currently trying to get gpg-agent to play nice with ssh on
Windows. I'm running gpg version 2.1.15.
Using Linux I was able to get everything to run the way I want by adding
enable-ssh-support to the agent config
and setting the environment variable
SSH_AUTH_SOCK to the gpg agents ssh socket.
However on Windows I now get the error:
 ssh-add -L
Error connecting to agent: Bad file descriptor
Same for simple ssh during the public key lookup stage.
I can read the socket file using cat or less however and I get:
which seems to me to be a process ID + binary data. So the socket
appears to be there and it is recreated when I restart gpg-agent.
So the question is whether this is actually a gpg related bug or has
something to do with how ssh from cygwin works.
I do get the same error using ssh/ssh-add from MinGW though.
If anyone has any idea how to resolve this I'd be glad for some help.
However please don't suggest to simply use putty, I prefer to have a
shared configuration across my Linux and Windows boxes and I do use the
command line ssh utilities a lot for different things on Windows too.
Best regards,

@_date: 2017-07-17 12:14:49
@_author: Felix Winterhalter 
@_subject: Selecting SSH Key in gpg-agent ssh-agent mode 
Hey there fellow gpg-users,
I've been using gpg-agent for a while with my Yubikey and its working fine. Asking me the pin once on each plugin and then silently working in the background.
For various reasons I also have on-disk ssh-keys with passphrases that I added with ssh-add to the gpg-agents keystore.
However on servers where those keys are present gpg-agent will always ask me to unlock these keys first even if the Yubikey is already unlocked. On declining pinentry it will then continue to use the Yubikey's keys.
Is there any setting to reorder the order in which SSH-Keys are tried against a server? Or rather is there also a way to specifiy to first try unlocked keys?

@_date: 2017-05-16 17:26:20
@_author: Felix Winterhalter 
@_subject: suspicious key found 
There was a proof of concept attack on the fingerprints a couple of years ago. The keys were revoked afterwards.
TL;DR short key fingerprints are not secure at all. Also the web of trust is your friend here.

@_date: 2020-08-12 13:56:42
@_author: Felix 
@_subject: In case you use OpenPGP on a smartphone ... 
Just adding my 2 cents to this discussion.
I think it doesn't matter what sort of spyware potentially exists
somewhere out there for some phone, what matters is whether it is on
your phone.
This isn't really about the security of OpenPGP either but about a
fundamental trust in the things we use both hardware and software.
I can recommend this video from 36C3 that talks about hardware security
(spoilers: its absolutely non trivial and nigh impossible to verify):
It's also about threat models that you as the user of software (that you
trust does its job correctly) are trying to protect against.
If an attacker having root access to your device is part of a threat you
want to defend against your only choice is to use a (hopefully) known
good device that performs the encryption/decryption for you.
If you are only interested in end to end encryption where the message
might be intercepted in transit or verification of signatures then
OpenPGP does its job pretty damn well still.
There is not a single encryption algorithm that can't be defeated by
simply having full access to the device it is running on.
Now we can talk about mitigations that exist for the threat model where
the device you are using to read/send messages is compromised and I
think the recommendations in this thread are pretty sound.
I personally have been using OpenKeychain and a Yubikey via NFC. That
means that while any message that I have decrypted might be compromised
the keys used to decrypt are still secure (under the assumption that
Yubikeys are as secure as advertised, see the video above).
For me this is secure enough. For you it might not be.
I think that in general users of software should be aware that the
environment their software is running in is a threat vector, if you do
not trust it or you only trust it so far then only keep information you
can afford to get compromised in it.
If you are a person under close government watch, live in an
authoritarian regime or are a dissident I would of course recommend to
use an airgapped device.
If you are working for a company with important trade secrets you
hopefully don't have access to those on your phone anyway.
If you are a normal person not defending against any sort of advanced
persistent threat I think a smartphone still offers decent (enough)
security in day to day use for non-sensitive information.
And then there is of course still:
In the end it all comes down to: How much effort is the attacker going
to spend on you?
That determines how much effort you need to spend to protect yourself
against them.

@_date: 2020-08-12 20:07:04
@_author: Felix 
@_subject: In case you use OpenPGP on a smartphone ... 
I'm not sure that there are solutions orders of magnitude more secure
that are available readily.
Also people tend to get emails on the go as well that might be
encrypted. It's convenient to decrypt emails on a smartphone and not
really that insecure if you're using an external device for actual
keystorage (such as a Yubikey).
I don't actually see what's so silly about the whole thing.

@_date: 2020-08-13 02:00:45
@_author: Felix Winterhalter 
@_subject: In case you use OpenPGP on a smartphone ... 
That's a good article and I think it makes a lot of sense in the
context. I still think PGP is valid for sending encrypted emails if you
exchange public keys beforehand (as he also states he still uses it in
that manner). The web of trust also never did anything for me sadly.

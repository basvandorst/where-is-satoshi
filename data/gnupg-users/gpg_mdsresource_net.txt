
@_date: 2014-04-23 14:24:36
@_author: helices 
@_subject: GPG cannot import public key 
GPG version trying to import: gpg (GnuPG) 2.0.14
Header from shared armored public key: Version: Encryption Desktop 10.3.0
(Build 8741)
GPG error on import:
# gpg --import /tmp/imps.asc
gpg: key 845F5188: no valid user IDs
gpg: this may be caused by a missing self-signature
gpg: Total number processed: 1
gpg:           w/o user IDs: 1
Other GPG import:
# gpg --allow-non-selfsigned-uid --import /tmp/imps.asc
gpg: key 845F5188: accepted non self-signed user ID "Concerto Support Key <
concerto.support at impact-ps.com>"
gpg: key 845F5188: public key "Concerto Support Key <
concerto.support at impact-ps.com>" imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)
# gpg --list-keys 845F5188
pub      0s/845F5188 2013-03-05
uid                  Concerto Support Key # gpg --edit-key 845F5188
gpg (GnuPG) 2.0.14; Copyright (C) 2009 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
pub     0s/845F5188  created: 2013-03-05  expires: never       usage: SC
                     trust: unknown       validity: unknown
[ unknown] (1). Concerto Support Key Command> sign
User ID "Concerto Support Key " is not
self-signed.  Unable to sign.
Nothing to sign with key 31A070A8
No matter how I try, I cannot encrypt a file using that public key, even
using --edit-key to assign trust:
gpg: 845F5188: skipped: Unusable public key
gpg: /tmp/test.txt: encryption failed: Unusable public key
The owner of the public key insists that it is self-signed; but, our GPG
cannot find the self-signature
What am I missing?
Please, advise. Thank you

@_date: 2014-04-24 08:15:47
@_author: helices 
@_subject: GPG cannot import public key 
Thank you, for your response.
-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: Encryption Desktop 10.3.0 (Build 8741)
-----END PGP PUBLIC KEY BLOCK-----
[2] Interestingly enough, importing this key with "gpg (GnuPG) 1.4.5" is
# gpg --import /tmp/imps.asc
gpg: key 845F5188: public key "Concerto Support Key <
concerto.support at impact-ps.com>" imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)
[3] After several attempts to export a usable public key, they created a
NEW keypair using their Encryption Desktop 10.3.0, which is successful. Of
course, since they claim to be using the original without incident with
many other vendors, they want to "fix" their original keys.
[4] Worse, they tried to export it again and we got this error:
# gpg --import /tmp/imps.asc
Ohhhh jeeee: ... this is a bug (sexp.c:1259:sexp_sscan)
-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: Encryption Desktop 10.3.0 (Build 8741)
-----END PGP PUBLIC KEY BLOCK-----
[5] As this is a new vendor relationship with my employer, and since we
have automated processes for encrypting dozens of files every day, my
ultimate goal is to have a public key from this vendor that works
automatically, just like the hundreds of others that we have. That is to
say, a signed public key that we can sign and to which we can assign trust,
and that we can use to automatically encrypt and sign files that will be
sent to them on a regular basis.  Secondly, I understand and respect this
vendor's desire to use one (1) key pair with all of their vendors.
Can their original key be "fixed?"  Why does legacy GPG accept that public
I welcome all comments, suggestions and review. Thank you
~ helices

@_date: 2014-04-24 11:12:23
@_author: helices 
@_subject: GPG cannot import public key 
Hi, Daniel!
Please, re-read:
[4] Worse, they tried to export it again and we got this error:
# gpg --import /tmp/imps.asc
Ohhhh jeeee: ... this is a bug (sexp.c:1259:sexp_sscan)
Key  gives me that bizarre error on trying to import it.
I do appreciate your analysis. I hope that a GPG developer can use it to
advance gpg.

@_date: 2014-04-24 13:59:22
@_author: helices 
@_subject: GPG cannot import public key 
Thank you, David
For now, they have agreed to move forward with the new key pair that they
created yesterday, using that same "Encryption Desktop 10.3.0 (Build 8741)"
PGP is Symantec for several years now ...
It is strange to me that the newly created public key breezed through our
import processes without incident.
I cannot be sure how their original key pair was originally created - they
say that they have been using it for quite awhile. It would be nice - for
them now and for me in the future - if their original key can be "fixed."
Mostly, I'm not certain how much of this GPG and how much whatever is on
their side.

@_date: 2016-11-10 08:50:42
@_author: helices 
@_subject: PCI DSS compliance 
So would I!
At this point, our company must achieve PCI DSS compliance before year end,
and the road to that necessity leads through this auditor, who insists that
PGP satisfies all requirements.
There is no explanation that he shares with us.
~ Mike

@_date: 2016-11-10 09:24:29
@_author: helices 
@_subject: PCI DSS compliance 
O, yes! I forgot about that    :-(
I understand SSSS as far as this goes.
Our company must decrypt ~100 files 7x24 in near real time. How can SSSS
work - or any reasonable alternative - in such a production environment?
~ Mike
On Thu, Nov 10, 2016 at 9:07 AM, Kristian Fiskerstrand <

@_date: 2017-04-12 10:35:43
@_author: helices 
@_subject: How can I change the passphrase on our secret keys? 
How can I change the passphrase on our secret keys?
I've searched Google and gnupg.org to no avail.
What am I missing?
gpg (GnuPG) 2.0.14
gpg (GnuPG) 2.0.22

@_date: 2017-04-12 11:02:04
@_author: helices 
@_subject: How can I change the passphrase on our secret keys? 
Yes, I saw that. On one host, that works.
On other, I get following error:
gpg> passwd
Key is protected.
You need a passphrase to unlock the secret key for
user: "Sempris "
4096-bit RSA key, ID 80167A71, created 2016-03-18
gpg: cancelled by user
Can't edit this key: Operation cancelled
What am I missing?
On Wed, Apr 12, 2017 at 10:51 AM, Alaric L. Dailey

@_date: 2017-04-12 11:14:44
@_author: helices 
@_subject: How can I change the passphrase on our secret keys? 
Yes, I do have the passphrase.
My problem here is that gpg NEVER challenges me for the passphrase!

@_date: 2017-04-17 13:17:27
@_author: helices 
@_subject: How can I change the passphrase on our secret keys? 
What am I missing?
Why am I getting this error?
Please, advise. Thank you.

@_date: 2017-04-17 13:50:18
@_author: helices 
@_subject: How can I change the passphrase on our secret keys? 
Version info from previous post:
CentOS release 6.8 (Final)
gpg (GnuPG) 2.0.14
CentOS Linux release 7.3.1611 (Core)
gpg (GnuPG) 2.0.22
We are NOT using pinentry.
On Mon, Apr 17, 2017 at 1:37 PM, Daniel Kahn Gillmor

@_date: 2017-07-18 16:30:13
@_author: helices 
@_subject: How to NOT gnutar files during encryption? 
We have a simple process that has worked for thousands of files over the
1) Client ZIPs up a bunch of files
2) Client GPG/PGP encrypts that ZIP file
3) Client uploads that encrypted file to us
4) Our production server automatically decrypts the file
5) Our production server automatically unzips that file
6) Our production server automatically distributes those files
Today, we have a new wrinkle.  A new client is using Kleopatra to encrypt
the zip file.
Once we decrypt the file via GPG on Linux, we cannot unzip the file.
After many hours troubleshooting, I discovered that the decrypted "zip"
file is actually inside a TAR file!
Further investigation reveals that Kleopatra is gnuTARring the ZIP file
prior to encryption.
We must have many clients using GPG4WIN, and we have never had this problem
How can this new client NOT gnutar files, and still properly encrypt the
ZIP file?
What are we missing?
~ Mike

@_date: 2017-07-19 08:17:26
@_author: helices 
@_subject: How to NOT gnutar files during encryption? 
How to NOT gnutar files during encryption?
Thank you for your responses; but, you are all missing my point - and not
answering my question.
First, before encryption by Kleopatra, the file IS one (1) real ZIP file
(e.g., filename.zip)
After encryption and upload to us, the file is now an encrypted TAR file,
with the ZIP file inside (e.g., filename.zip.gpg)
Notice that there is NO indication of TAR anywhere in the filename.
Yes, I can rewrite our production processes to look for files of type TAR,
and automate that. We receive ~1000 encrypted files per day, and we have
never needed this before.
However, if they can turn OFF that TAR subprocess - which you state ought
only to happen when requested to encrypt multiple files - then, this
client's files will automatically process just like the thousands of other
clients' files we process without incident every single day.
So, to repeat myself:
    How to NOT gnutar files during encryption?
Please, advise. Thank you.
~ Mike

@_date: 2017-07-19 09:30:55
@_author: helices 
@_subject: How to NOT gnutar files during encryption? 
OK, for the record, I think that I've found the solution.
I looked in Kleopatra Settings and found nothing.
Then, I imported a proper key and began signing and encrypting a file:
In Kleopatra's Sign/Encrypt Files dialog, there is a checkbox: Archive
files with: TAR (PGP-compatible), which is checked by default.
Unchecking that box and encrypting, this file decrypted and unzipped
without incident: Archive.zip.gpg
I'm waiting for our client to upload a file encrypted this way.
HOWEVER, they right click the ZIP file and select "sign and encrypt" to
process files. Will the UNchecked checkbox for "Archive files with: TAR
(PGP-compatible)" be default now?
~ Mike

@_date: 2017-07-19 10:54:16
@_author: helices 
@_subject: How to NOT gnutar files during encryption? 
Archive.zip.gpg - which is why it took me so long to identify why I could
not unzip it ;-)
Grrrrr ... gmail makes it tedious to reply to list mail ...

@_date: 2017-03-28 08:22:39
@_author: helices 
@_subject: With which key did I sign my encrypted file? 
My company uses several keys for signing files encrypted with one of many
recipient public keys.
Once in awhile, we get pushback from a recipient that they cannot decrypt
our file, and sometimes they claim it is because the encrypted file is
Yesterday, I took the same file, encrypted it and signed it, as well as
encrypting it without signing it.
$ /usr/bin/gpg --verify signed.pgp
gpg: verify signatures failed: Unexpected error
$ /usr/bin/gpg --verify NO-sign.pgp
gpg: verify signatures failed: Unexpected error
$ /usr/bin/gpg --version
gpg (GnuPG) 2.0.14
What am I missing?
Please, advise. Thank you.
~ helices

@_date: 2017-03-29 09:46:28
@_author: helices 
@_subject: With which key did I sign my encrypted file? 
How can I see if an encrypted file is signed and by whom?
Please, advise. Thank you.
~ helices

@_date: 2017-03-29 10:55:43
@_author: helices 
@_subject: With which key did I sign my encrypted file? 
Thank you. That suffices.
Notice that I did provide --version in my original post.
~ helices
On Wed, Mar 29, 2017 at 10:40 AM, Peter Lebbing

@_date: 2018-02-14 14:20:10
@_author: helices 
@_subject: How can we utilize latest GPG from RPM repository? 
CentOS 7 uses gnupg2 v2.0.22. EPEL doesn't have anything newer.
We want to move to v2.2.x, and stay current, but we don't want to download
source and compile for dozens of systems.
We want all users to be using the same version all of the time.
Please, advise. Thank you.

@_date: 2018-02-15 08:10:07
@_author: helices 
@_subject: How can we utilize latest GPG from RPM repository? 
Yes, I know that.
In general, that scheme works well.
However, in another case, rsyslog, a certain function has been broken for
many years, and the only fix is to track the developers' most recent
versions. In that case, the developers maintain their own repository:
 ; which is easy to incorporate into:
We are hoping something similar is available for gnupg. I have not found
that; which is the reason for my posts here.
What am I missing?
Please, advise. Thank you.

@_date: 2018-02-15 09:32:16
@_author: helices 
@_subject: How can we utilize latest GPG from RPM repository? 
Jeffrey, please, your ad hominem accusations are not helpful.
You said, "What you?re missing is WHY you want a later upstream version."
How do you know that I'm missing that? That "why" is not at all relevant to
my question.
You said, "You can?t have it both ways:  You want to stay on a stable
distro/version which is the raison d?etre for RHEL/CentOS but want to have
the latest package."
As you know, CentOS contains thousands of files, and I have given one
example of a need to deviate from the default distribution for rsyslog.
Suffice it to say, we want to do the same with gnupg.
If there is no gnupg solution similar to our rsyslog solution, then we will
do something else.
Simply because I have not found a gnupg solution similar to our rsyslog
solution, does NOT mean that such a solution does not exist.
Hence, my original post here yesterday.
Actually answering my subject question would be helpful. You have not done
Thank you.

@_date: 2018-02-17 17:06:54
@_author: helices 
@_subject: How can we utilize latest GPG from RPM repository? 
I will probably never understand why wanting to run the most current
version of gnupg on a plethora of servers is controversial.
Nevertheless, the two (2) greatest reasons are:
   1. PCI DSS v3.2
   2. PCI DSS compliance audits
Being able to demonstrate that we are using the latest, greatest encryption
available on every one of our hosts, simplifies that portion of the audit
equation more than you probably believe.
Furthermore, following feature not availabe in 2.0.22 are more than
   - The file secring.gpg is not used to store the secret keys anymore.
   - All support for PGP-2 keys has been removed for security reasons.
   - The standard key generation interface is now much leaner.
   - Commands to create and sign keys from the command line without any
   extra prompts are now available.
   - There is no more need to manually start the gpg-agent.
   - A new format for locally storing the public keys is now used.
   - Revocation certificates are now created by default.
   - The format of the key listing has been changed to better identify the
   properties of a key.
Apparently, there is no current solution to our problem similar to that we
found for our rsyslog example. That is too bad. We will get over our
However, let it be said here and now, if the gnupg community wants the use
of gnupg to spread far further than a clique of geeks, making its use
easier for non-geeks is probably the simplest and most direct way.
Yes, that is my opinion, humble or otherwise.
Are there any other questions before I get a direct answer to my original
subject question?
Thank you.

@_date: 2018-02-22 08:18:37
@_author: helices 
@_subject: How can we utilize latest GPG from RPM repository? 
Let's cut through these ill-informed suppositions once and for all: If host
compliance was our problem, I would not have posted here at all.
Also, nowhere in this thread have I stated any inability to compile myself.
Having been doing such for 40+ years, that is not our problem either.
Defending processes and systems to egregiously non-technical auditors is a
challenge that grows year by year. If you have not qualified for PCI DSS
Level 1, then you probably have only a cursory understanding of this
situation. Based on previous questions I've posted here in last several
years, it's clear to me that none of the experts here have such experience.
Sometimes, a question is just a question. Overthinking the environment in
which that question was asked adds nothing to the discussion. Now that my
question has been directly answered - thank you, Ben - and indirectly
answered - thank you, to those who did not answer directly - we can move
forward in my enterprise architecture endeavor.
Thank you, Daniel, for describing the complexity of the gnupg problem.
Our new environment will continue with gnupg v2.0.22, because that is the
security level supported by stable and secure Linux operating systems.
Please, do not debate me on this. Yes, we could do otherwise, but that will
incur PCI DSS v3.2 challenges unnecessary to us.
Thank you.
~ helices

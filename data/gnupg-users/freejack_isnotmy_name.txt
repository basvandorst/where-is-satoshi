
@_date: 2010-12-29 17:10:10
@_author: freejack@is-not-my.name 
@_subject: How to process a big file of encrypted mails? 
Occasionally I get a big file of encrypted emails with mail headers
stripped out. All thats in the file is the begin and end PGP marks and all
the encrypted armored text in between. Some are encrypted to me, others to
my coworkers. Sometimes if I do gpg filename it finds all my mails and asks
for my password etc sometimes it doesn't. Is there anyway to tell gpg to
keep processing the entire file all the way until the end? Each of us in
the team will need to do the same thing to get his own emails. I didn't see
any option for gpg to carry on till it processes the entire file.
Someone said we should write a script to parse all the messages into
individual files and then do gpg on each one and that's what i'll do if
there isn't a way to get gpg to scan the whole file.

@_date: 2010-12-29 21:03:59
@_author: freejack@is-not-my.name 
@_subject: How to process a big file of encrypted mails? 
Ah snap...yes only inline coding, no PGP/MIME as far as the guys know. We're using Linux and recent versions of gpg such as 1.4.9 and newer.

@_date: 2010-12-30 10:40:52
@_author: freejack@is-not-my.name 
@_subject: How to process a big file of encrypted mails? 
Right then. Thanks Robert and Doug. Happy New Years to all! Cheers!

@_date: 2011-01-05 18:37:24
@_author: freejack@is-not-my.name 
@_subject: --digest-algo ignored on gnupg-1.4.9? 
Hi, it appears --digest-algo is ignored for symmetric encryption using gpg
1.4.9. I was able to verify --cipher-algo does work but for some reason no
matter what I specify for --digest-algo I always get RIPEMD160 as the hash
according to --list-packets and pgpdump. It's definitely looking at what I
specify for --digest-algo because an invalid value produces an error message
"selected digest algorithm is invalid" but good values specified seem to be
ignored and no warning message is issued.

@_date: 2011-01-05 21:00:28
@_author: freejack@is-not-my.name 
@_subject: --digest-algo ignored on gnupg-1.4.9? 
I was playing around with --digest-algo after seeing something odd when I
looked at a symmetrically encrypted file I was experimenting with. In the
case I encrypt to somebody else then I do use
--personal-digest-preferences. I understand the difference because I read
the postings from Werner, David, and you. :-)
Then something is very odd. Here's my output, only I used IDEA instead of
3DES for my test:
user:~$ gpg --version
gpg (GnuPG) 1.4.9
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Home: ~/.gnupg
Supported algorithms:
Pubkey: RSA, RSA-E, RSA-S, ELG-E, DSA
Cipher: IDEA, 3DES, CAST5, BLOWFISH, AES, AES192, AES256, TWOFISH
Hash: MD5, SHA1, RIPEMD160, SHA256, SHA384, SHA512, SHA224
Compression: Uncompressed, ZIP, ZLIB, BZIP2
user:~$ user:~$ gpg -c -ao test.asc --digest-algo sha1 --cipher-algo idea test.txt
Enter passphrase: 12345
Repeat passphrase: 12345
user:~$ gpg --list-packets test.asc
:symkey enc packet: version 4, cipher 1, s2k 3, hash 3
gpg: IDEA encrypted data
Enter passphrase: 12345
:encrypted data packet:
gpg: encrypted with 1 passphrase
:compressed packet: algo=1
:literal data packet:
gpg: WARNING: message was not integrity protected
user:~$ pgpdump test.asc Old: Symmetric-Key Encrypted Session Key Packet(tag 3)(13 bytes)
New: Symmetrically Encrypted Data Packet(tag 9)(33 bytes)
Sounds reasonable but then why is it using RIPEMD160? I tested with 3DES
instead of IDEA and got the same thing. RIPEMD160 is being used, not
SHA1. Thanks for looking at this.

@_date: 2011-01-06 00:26:37
@_author: freejack@is-not-my.name 
@_subject: --digest-algo ignored on gnupg-1.4.9? 
Hello Doug!
*Symmetric* encryption!
Maybe next time ;-)

@_date: 2011-01-06 22:37:03
@_author: freejack@is-not-my.name 
@_subject: --digest-algo ignored on gnupg-1.4.9? 
Robert J. Hansen said something like this:
Ok, thanks for the insight on cipher choice, but let's not get distracted
;-) The issue is gnupg 1.4.9 doesn't seem to honor --digest-algo. I take
your point maybe it shouldn't in some/all cases but it accepts a
specification and verifies it and gives you a message if you specify an
invalid choice. Then it silently ignores what you specified. Best case it's
a usability error, worst case it's a bug.
Has anybody tried this using 1.4.9?
Well according to what you posted, you did get this message. So I'm not sure
what one of us is smoking ;) Please check your post Message-ID:
<4D24BFF6.3030905__43652.2631127902$1294254146$gmane$org at sixdemonbag.org>
I'll do better than that. Here's a test with no .gnupg folder at all,
starting from scratch.
user:~$ gpg -c -ao test.asc --digest-algo sha512 --cipher-algo 3des test.txt gpg: directory `/home/user/.gnupg' created
gpg: new configuration file `/home/user/.gnupg/gpg.conf' created
gpg: WARNING: options in `/home/user/.gnupg/gpg.conf' are not yet active during this run
gpg: keyring `/home/user/.gnupg/pubring.gpg' created
Enter passphrase: 12345
Repeat passphrase: 12345
user:~$ gpg --list-packets test.asc gpg: keyring `/home/user/.gnupg/secring.gpg' created
:symkey enc packet: version 4, cipher 2, s2k 3, hash 2
gpg: 3DES encrypted data
Enter passphrase: 12345
:encrypted data packet:
gpg: encrypted with 1 passphrase
:compressed packet: algo=1
:literal data packet:
gpg: WARNING: message was not integrity protected
user:~$ gpg -v --version
gpg (GnuPG) 1.4.9
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Home: ~.gnupg
Supported algorithms:
Pubkey: RSA, RSA-E, RSA-S, ELG-E, DSA
Cipher: 3DES (S2), CAST5 (S3), BLOWFISH (S4), AES (S7), AES192 (S8),         AES256 (S9), TWOFISH (S10)
Hash: MD5 (H1), SHA1 (H2), RIPEMD160 (H3), SHA256 (H8), SHA384 (H9),       SHA512 (H10), SHA224 (H11)
Compression: Uncompressed (Z0), ZIP (Z1), ZLIB (Z2), BZIP2 (Z3)
user:~$ pgpdump test.asc Old: Symmetric-Key Encrypted Session Key Packet(tag 3)(13 bytes)
New: Symmetrically Encrypted Data Packet(tag 9)(33 bytes)
user:~$ it's clear it has nothing to do with IDEA, this example uses 3DES just like
your example and anyway since I didn't load it (no conf) IDEA is completely
out of the picture. I had said earlier it fails the same way when I used
3DES but here it is in black and white just to reinforce that.
What do you say to me now, Mr. Robert J. Hanson? I demand to talk to the
management! Where's Werner and David, still out on holiday vacation? ;-)
Now to answer 2 posts in one:
Thanks for your example, it may help if somebody had a gpg.conf, but given
my test was run with no .gnupg folder or gpg.conf and used all the defaults,
looks to me like there is some problem.
Thanks guys!

@_date: 2011-01-07 02:21:01
@_author: freejack@is-not-my.name 
@_subject: --digest-algo ignored on gnupg-1.4.9? 
Hi David,
I misunderstood, thanks for clearing it up. Maybe this is what Vedaal was
saying as well.
It was in a prior example, but that's not really the issue so much as my
--digest-algo wasn't affecting anything. Now I know why.
Yes, understood.
Thanks very much David and Robert and Vedaal. I'll verify this tomorrow. At
this point sorry for the false alarm and wasting your time. Off to work for
me now. Cheers guys!

@_date: 2011-01-13 10:22:29
@_author: freejack@is-not-my.name 
@_subject: Prosecution based on memory forensics 
This is an OS feature, not a hardware feature. Turn off hibernation. Encrypt
your swap file(s) or for Windows, go to system options and turn off swap and
reboot in safe mode, defrag your disk and delete any remaining swap file.
Better yet, uninstall Windows and set up a nice Linux or BSD! Encrypted swap
on Linux and BSD is trivial to set up and works a treat!
P.S. Robert, how about trimming your line lengths!

@_date: 2012-03-15 17:54:28
@_author: freejack@is-not-my.name 
@_subject: comments on uid 
Is it possible to add or edit comments on a uid? I didn't see any obvious
option in the help for edit.

@_date: 2012-03-17 00:11:39
@_author: freejack@is-not-my.name 
@_subject: comments on uid 
Right that's what I meant.
Thanks for the info. Is there some reason why we can't edit the UID? I
realize it doesn't help if the key is on a server but this key is not.

@_date: 2012-03-18 08:13:15
@_author: freejack@is-not-my.name 
@_subject: comments on uid 
Hahaha!!! Damn Hawaiins!
Alright that's a good answer but aren't people just confirming the email
address belongs to a known signer when they sign a key? Does it really
matter what the UID comment is? I think it may be going a bit too far to say
the UID is guaranteed.
Do I have to do anything with the keys when adding a UID and deleting the
old one? I don't remember.
My question is on a situation I didn't add the comment by mistake when I
created the key and now I'd like to be able to add a comment. The key isn't
signed etc. Thanks.

@_date: 2012-03-18 18:13:32
@_author: freejack@is-not-my.name 
@_subject: comments on uid 
That doesn't sound right. If you can't verify the email shown on the key
belongs to the user what have you accomplished? All you did was tie a key id
to a person (maybe, not sure if you provably accomplished that) but not the
email address. If the purpose of key signing is ultimately to relate
something useful to a person then I think it's more useful to know a certain
person owns a certain email adddress and what his key id is. YMMV.
Passports and other documents are easily forged, just take 100 bucks and sit
on the corner for 10 minutes. Practially, it's probably harder to spoof an
email address. How do you know what his key id is? Couldn't he also forge a
little printout with somebody else's key id, fingerprint, etc and give it to
you along with his passport? I'm sure somebody has thought it all through
but it seems to me the purpose of trusting a key is to bind somebody to an
email address, not just a key ID...sort of like S/MIME that contains the
email address, but without relying on a trusted third party.
Not necessarily but even if they did, how do they have access to the key?
I'm just saying 2 pieces of binding information sound better than one.
Wouldn't it be safer to ask the person who wants you to sign his key to mail
you his key id and then you respond with some piece of information he has to
bring when you sign his key, in additional to whatever else you do?

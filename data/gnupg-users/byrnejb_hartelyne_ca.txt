
@_date: 2014-04-01 11:03:56
@_author: James B. Byrne 
@_subject: x.509 and gpg 
. . .
Thank you.  I have put the issue aside for now as yours is the first response
I have received and I was unable to make much progress on my own.  I will
review the material you refer to and will indeed report on any progress or
difficulties I encounter.

@_date: 2014-04-14 17:03:58
@_author: James B. Byrne 
@_subject: The bug... More info. 
Not to mention that the U.S. Government, for all intents and purposes, gave up
doing background security checks around 2006 since it could not manage the
backlog.  Well, they did not give it up so much as contract it out to a
company that put profit ahead of product and they essentially stopped doing it
on the governments behalf.

@_date: 2014-03-27 16:50:16
@_author: James B. Byrne 
@_subject: x.509 and gpg 
gpgsm (GnuPG) 2.0.14
libgcrypt 1.4.5
libksba 1.0.7
We operate a private X.509 Certificate Authority (CA) for our company's own
use based upon OpenSSL-1.0.1e.  Our expertise is limited to issuing and
signing X.509 certificates for use with our https services.  We are in the
process of examining how to best provide email security and GnuPG seems to be
the preferred choice.  At least, I am unable to discover any reasonable
Members of our staff already possess certificates and keys authenticated by
our CA.  Therefore it seemed reasonable that these certificates should form
the basis of the PGP keys used by the same people.  After some research we
were able to determine the the process involves exporting the X.509 public and
private keys into pksc12 format and then importing that format into gpg format
using gpgsm.
However, gpgsm does not seem to want to deal with our certificates and I lack
the experience or knowledge to determine exactly why.  So, I am here asking
for your assistance to resolve this problem.
I started with a single certificate and key issued to myself and signed by our
openssl pkcs12 -export -in 3F.pem -inkey 3F.key -out 3F.p12
I then attempted to import this into my gpg keyring via the command line using
gpgsm --import 3F.p12
which resulted in this mess:
gpgsm[5321]: can't connect to `/home/byrnejb/.gnupg/S.gpg-agent': No such file
or directory
gpgsm: gpgsm: GPG_TTY has not been set - using maybe bogus default
gpgsm: can't connect to `/home/byrnejb/.gnupg/S.gpg-agent': No such file or
gpgsm: gpg-protect-tool: 2256 bytes of RC2 encrypted text
gpgsm: gpg-protect-tool: processing certBag
gpgsm: gpg-protect-tool: 2376 bytes of 3DES encrypted text
gpgsm: gpg-protect-tool: keygrip: 87B740FA84281D0D48AD535A3A5526567FA2EDBF
gpgsm: gpg-protect-tool: secret key file
already existsdirmngr[5378]: error opening
`/home/byrnejb/.gnupg/dirmngr_ldapservers.conf': No such file or directory
dirmngr[5378]: permanently loaded certificates: 0
dirmngr[5378]:     runtime cached certificates: 0
dirmngr[5378]: command LOOKUP failed: Not found
gpgsm: dirmngr cache-only key lookup failed: Not found
dirmngr[5378]: command LOOKUP failed: Not found
gpgsm: dirmngr cache-only key lookup failed: Not found
gpgsm: issuer certificate {13A6FB6414425B75F5F0F131CF608807E2601240}
( & Lyne
Limited,OU=Networked Data Services,CN=CA HLL ROOT) not found using
dirmngr[5378]: command LOOKUP failed: Not found
gpgsm: dirmngr cache-only key lookup failed: Not found
gpgsm: issuer certificate
( & Lyne
Limited,OU=Networked Data Services,CN=CA HLL ISSUER 01) not found
dirmngr[5378]: command LOOKUP failed: Not found
gpgsm: dirmngr cache-only key lookup failed: Not found
dirmngr[5378]: command LOOKUP failed: Not found
gpgsm: dirmngr cache-only key lookup failed: Not found
gpgsm: issuer certificate {13A6FB6414425B75F5F0F131CF608807E2601240}
( & Lyne
Limited,OU=Networked Data Services,CN=CA HLL ROOT) not found using
dirmngr[5378]: command LOOKUP failed: Not found
gpgsm: dirmngr cache-only key lookup failed: Not found
gpgsm: total number processed: 2
gpgsm:              unchanged: 1
gpgsm:       secret keys read: 1
gpgsm:  secret keys unchanged: 1
I gather from the first line of error that I should be running gpg-agent.  I
have read how to start this for command line sessions but I am hesitant to do
so before getting some expert help.  The session manager I am using for this
is gnome-terminal running from a non-privileged gnome desktop manager
(gnome-desktop.x86_64-2.28.2).  Should I start this from .bash_profile, which
would imply that a new gpg-agent would be started for each new session window?
or as some have suggested, start it from .Xsession? or perhaps gpg-agent
should not be started at all and I should use some option on gpgsm to avoid
the need for gpg-agent.
In any case, I am also trying to determine how to load our CA root and CA
issuer certificates or at least make them known to gpg/gpgsm as this seems
necessary given what I have read in the man pages.
Guidance on how to proceed at this point would be most welcome.

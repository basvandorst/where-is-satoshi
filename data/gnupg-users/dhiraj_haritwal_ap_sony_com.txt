
@_date: 2014-12-17 14:43:34
@_author: Haritwal, Dhiraj 
@_subject: Unable to encrypt file with private/public key 
I am using gpg (GnuPG) 1.4.7 & trying to encrypt a file with private key whose public key I have shared to the partner who have to decrypt this file. I tried with --armour -symmetric switches which requires a passphrase to encrypt but I have requirement to encrypt it through private/public key. If I am using -encrypt --hidden-recipient option showing below error. I am able to see the public key while running -list-keys option. I am running it on AIX 6.1 under root user.
gpg: --try-all-secrets: skipped: public key not found
gpg: /tmp/test/INSONY01122014001.CSV: encryption failed: public key not found
Kindly suggest what could be the problem & how to resolve it.
This email is confidential and intended only for the use of the individual or entity named above and may contain information that is privileged. If you are not the intended recipient, you are notified that any dissemination, distribution or copying of this email is strictly prohibited. If you have received this email in error, please notify us immediately by return email or telephone and destroy the original message. - This mail is sent via Sony Asia Pacific Mail Gateway..

@_date: 2014-12-18 15:39:35
@_author: Haritwal, Dhiraj 
@_subject: Unable to encrypt file with private/public key 
Thanks for your response.
About the below command, it's asking for passphrase whereas my requirement is to use only keys to encrypt/sign it.
gpg2 -u FFEEDDCC -r AABBCCDD -se supersecret.txt
I tried below command which shows confirmation screen where I have entered y (yes) & now able to see a file named  supersecret.txt.gpg. m not sure what file it is because it think encrypted file should has an .asc extension.
./gpg --encrypt --hidden-recipient AABBCCDD supersecret.txt
gpg: 89709B71: There is no assurance this key belongs to the named user
-----Original Message-----
Sent: 17 December 2014 23:03
If you just wish to encrypt, not sign, to the user, use:-
Or the shorter version:-
It will dump supersecret.txt.gpg, that's your encrypted file. This isn't signed (I.E. the receiver won't be able to verify _you_ sent it, and can be replaced (Although not read) in transit). If you wish to sign it, you'll also need a GPG key in your keyring, then run:-
Or the shorter version:-
Where FFEEDDCC is your key identifier and AABBCCDD is the recipient's key identifier. When they decrypt the file, they will see something along the lines of:-
the command you're using, --symmetric, is for using a passphrase for encryption/decrypt (I.E. symmetric encryption, not asymmetric).
--hidden-recipient should work too, and is used if you don't wish to include information about the recipient in the gpg file, you probably don't want to use this option (As oppose to --recipient) unless you really do wish to use the features it provides.
As for the failed public key, may I ask the exact command you're running? I get the same error message when I specify a recipient that doesn't exist:-
Gnupg-users mailing list
Gnupg-users at gnupg.org
This email is confidential and intended only for the use of the individual or entity named above and may contain information that is privileged. If you are not the intended recipient, you are notified that any dissemination, distribution or copying of this email is strictly prohibited. If you have received this email in error, please notify us immediately by return email or telephone and destroy the original message. - This mail is sent via Sony Asia Pacific Mail Gateway..

@_date: 2014-12-19 09:14:05
@_author: Haritwal, Dhiraj 
@_subject: Unable to encrypt file with private/public key 
Thank you all for your response.
What I have learned so far from these threads is Signing always require a passphrase whereas encryption can be done without Passphrase & it requires a Key. Correct me if my understand is not correct.
I was doing a mistake. I was trying to encrypt the file with Partner Key hence it was showing the warning. While sending the file to partner I have to use my own key which I have share with them to decrypt it.
-----Original Message-----
Sent: 18 December 2014 21:35
.gpg is the extension of encrypted files, .asc is normally ASCII armored files (Signatures and the like), if you'd like to generate one of those, look into the -a option (for Ascii). A complete command would look something like `gpg2 -u AABBCCDD -as supersecret.txt`. The generated supersecret.txt.asc will only verify to someone who already has the .txt that it hasn't been touched/modified and that the key AABBCCDD did verify it as being legitimate, they won't be able to extrapolate supersecret.txt out of it. It's _only_ for signing, _not_ for encrypting/transportation of data, which is why you often see them on this mailing list and downloads (You want to verify that the user sent the data, but not encrypt it (Since it's public)).
If you try to run:-
It should tell you it's encrypted and the destination public key, then error out (As it's not destined for you). As for the "There is no assurance this key belongs to thhe named user", this is because you haven't trusted them yet. If you do trust the key as being the key they claim to be, and have verified the key through out-of-bands means (I.E.
Not over the internet, or using an already secure channel over the internet, this is *not* emails, this is *not* Skype, this is *not* text messages), then you can take a look at this:- P.S. I'm replying to you on-list for the reasons:-
1. People are able to verify if I say anything stupid 2. In the case I haven't said anything stupid, someone else could also learn from this (I.E. Location this thread in the future via a search engine).
I recommend you do the same.
Gnupg-users mailing list
Gnupg-users at gnupg.org
This email is confidential and intended only for the use of the individual or entity named above and may contain information that is privileged. If you are not the intended recipient, you are notified that any dissemination, distribution or copying of this email is strictly prohibited. If you have received this email in error, please notify us immediately by return email or telephone and destroy the original message. - This mail is sent via Sony Asia Pacific Mail Gateway..

@_date: 2014-12-19 10:36:02
@_author: Haritwal, Dhiraj 
@_subject: Unable to encrypt file with private/public key 
Thanks for the clarification, Chris. I got confused with recipient switch. In general (Exchange), Recipient is the one to whom we are sending the data or who will receive data. In our case we are sending the data to partner hence I was using partner's public key to encrypt the file. After I used my private key, the warning has gone & the file is encrypted in .asc format.
One more query, partner is saying they are unable to decrypt this file with my private key which they have trusted & asking to encrypt this file with my private key & their public key (already trusted on my server). when I am suing both the key identifier's, giving some syntax error. Kindly suggest how can I do this.
Hash: SHA256
You encrypt a message with recipient's public key, no password is required.
(Password is only known by recipient.)
You sign a message with your own private key, you must admit your private key's password.
Regards, Chris
(RSA-Testkey 0x3E2E0598)
Gnupg-users mailing list
Gnupg-users at gnupg.org
This email is confidential and intended only for the use of the individual or entity named above and may contain information that is privileged. If you are not the intended recipient, you are notified that any dissemination, distribution or copying of this email is strictly prohibited. If you have received this email in error, please notify us immediately by return email or telephone and destroy the original message. - This mail is sent via Sony Asia Pacific Mail Gateway..

@_date: 2014-12-19 11:05:05
@_author: Haritwal, Dhiraj 
@_subject: Unable to encrypt file with private/public key 
One more thing, this time when I encrypt the file with my private key (without sign & only with armor switch), it's still asking passphrase to decrypt it even  on my same server. That means it's still using PassPhrase to encrypt the file. Does it somewhere set by default in the Gnupg config.
Sent: 19 December 2014 15:32
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256
You encrypt a message with recipient's public key, no password is required.
(Password is only known by recipient.)
You sign a message with your own private key, you must admit your private key's password.
Regards, Chris
(RSA-Testkey 0x3E2E0598)
Gnupg-users mailing list
Gnupg-users at gnupg.org
This email is confidential and intended only for the use of the individual or entity named above and may contain information that is privileged. If you are not the intended recipient, you are notified that any dissemination, distribution or copying of this email is strictly prohibited. If you have received this email in error, please notify us immediately by return email or telephone and destroy the original message. - This mail is sent via Sony Asia Pacific Mail Gateway..
Gnupg-users mailing list
Gnupg-users at gnupg.org
This email is confidential and intended only for the use of the individual or entity named above and may contain information that is privileged. If you are not the intended recipient, you are notified that any dissemination, distribution or copying of this email is strictly prohibited. If you have received this email in error, please notify us immediately by return email or telephone and destroy the original message. - This mail is sent via Sony Asia Pacific Mail Gateway..

@_date: 2014-12-22 13:52:02
@_author: Haritwal, Dhiraj 
@_subject: Unable to encrypt file with private/public key 
Thank you very much for all the explanation/links. Now things are bit clear.
Now I have to encrypt file with partner's Public Key. I tried with below command which is still showing warning message (gpg: 89709B71: There is no assurance this key belongs to the named user) whereas if I am checking partner_pubkey, it's showing full trust. How can I remove this message. Even I have added partner's public key as trusted.
./gpg --encrypt --recipient partner_pubkey --armor /tmp/test/data.CSV
Sent: Friday, December 19, 2014 2:36 AM
Thanks for the clarification, Chris. I got confused with recipient switch. In general (Exchange), Recipient is the one to whom we are sending the data or who will receive data. In our case we are sending the data to partner hence I was using partner's public key to encrypt the file. After I used my private key, the warning has gone & the file is encrypted in .asc format.
One more query, partner is saying they are unable to decrypt this file with my private key which they have trusted & asking to encrypt this file with my private key & their public key (already trusted on my server). when I am suing both the key identifier's, giving some syntax error. Kindly suggest how can I do this.
-----Original Message-----
Sent: 19 December 2014 15:32
* PGP Signed by an unknown key
You encrypt a message with recipient's public key, no password is required.
(Password is only known by recipient.)
You sign a message with your own private key, you must admit your private key's password.
Regards, Chris
(RSA-Testkey 0x3E2E0598)
* Unknown Key
* 0xD64D3126(L)
Gnupg-users mailing list
Gnupg-users at gnupg.org
This email is confidential and intended only for the use of the individual or entity named above and may contain information that is privileged. If you are not the intended recipient, you are notified that any dissemination, distribution or copying of this email is strictly prohibited. If you have received this email in error, please notify us immediately by return email or telephone and destroy the original message. - This mail is sent via Sony Asia Pacific Mail Gateway..
Gnupg-users mailing list
Gnupg-users at gnupg.org
This email is confidential and intended only for the use of the individual or entity named above and may contain information that is privileged. If you are not the intended recipient, you are notified that any dissemination, distribution or copying of this email is strictly prohibited. If you have received this email in error, please notify us immediately by return email or telephone and destroy the original message. - This mail is sent via Sony Asia Pacific Mail Gateway..

@_date: 2014-12-29 14:57:18
@_author: Haritwal, Dhiraj 
@_subject: Unable to encrypt file with private/public key 
Almost done now. After I signed partner?s public key, that warring has gone.
I am using below command to encrypt file with my private key & partner?s public key & partner is using my private key & their public key to decrypt it but it?s getting fail. M I using anything wrong here.
./gpg --local-user 'MY USER? --recipient partner_pubkey --encrypt --armor /tmp/test/data1.CSV
Tried to use --sign which is asking passphrase which don?t want to use. Can we sign without passphrase & only with public/private key.
Sent: 23 December 2014 11:24
I'm glad things are working better.
To resolve the issue with the assurance message, manually verify that the key belongs to the recipient (e.g. meet in person or call them and verify the fingerprint of their key) and then sign the key using GnuPG. (gpg --sign-key 0xKEYID)
In GnuPG you vouch that a particular public key belongs to a person (or organization) by signing their public key. This signature can be local or published publicly.
"Trust" in GnuPG is different, and reflects how much you trust the other key to correctly vouch for the identity of others. If you set their key as fully trusted, keys that are signed by that key are treated by your copy of GnuPG with the same level of assurance as if you signed them yourself. Typically this should only be reserved for people you know to always check the identity of other people thoroughly and correctly before signing their keys. The default is for trust to be set to "marginal".
By combining signatures and trust, one forms a "web of trust": This email is confidential and intended only for the use of the individual or entity named above and may contain information that is privileged. If you are not the intended recipient, you are notified that any dissemination, distribution or copying of this email is strictly prohibited. If you have received this email in error, please notify us immediately by return email or telephone and destroy the original message. - This mail is sent via Sony Asia Pacific Mail Gateway..

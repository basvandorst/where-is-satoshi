
@_date: 2012-04-19 12:39:22
@_author: Peter C. Dietrich 
@_subject: Cannot import private key 
Dear Scott,
I think you should try to export the private key unarmored, i.e. leave out  the -a option. This should work.

@_date: 2012-04-19 11:56:06
@_author: Peter C. Dietrich 
@_subject: gpg4win: homedir option not passed on to gpg-agent 
Hash: SHA256
Dear members of the gnupg-users list,
I use gpg on Windows XP Sp3 via gpg4win 2.1.1-svn1694.
I try to follow the off-line primary key paradigm (to some extent), hence  on the same computer there is one directory containing the keyring of my  secret primary key. There is also another directory with the keyring of  the corresponding secret subkeys for daily use. The latter one is set as  the gpg home directory in the Windows registry as described in the GnuPG  Specific Problem:
When I try to generate a revocation certificate for the primary key, I  issue this command (I realize the secret-keyring option is not necessary  here, it is only included to make clear the distinction between primary  and subkey secret):
gpg2 --homedir path/to/primary/secret  --secret-keyring  path/to/subkeys/secret  --gen-revoke PrimaryKeyID
This runs as expected until the point where I have to unlock the primary  key and enter my passphrase. There the pinentry box does not pop up,  instead I get "can't connect to the agent: IPC connect call failed" and  the process is aborted.
Alternative Problem description:
I can reproduce the above problem just by creating a new keyring in a  directory other than the gnupg-homedir:
gpg2 --homedir some/other/directory --gen-key. This also gives me the IPC  connect failure, when, in fact, the pinentry dialog should have popped up.
When I start the gpg-agent directly by saying gpg-agent --daemon --homedir  some/other/directory, I can complete the "gpg2 --homedir  some/other/directory --gen-key" successfully, i.e. with passphrase entry  in the pinentry box.
This leads me to believe, that the homedir option given to gpg2 is not  passed on the gpg-agent. I don't know how exactly gpg2 calls gpg-agent  (gpg-connect-agent, I suspect), and I don't know how to modify this call.
Would somebody, please, offer their help?
Kind regards,
Peter C. Dietrich

@_date: 2012-04-23 20:15:12
@_author: Peter C. Dietrich 
@_subject: gpg4win: homedir option not passed on to gpg-agent 
I installed this version (2.1.1-svn1694) only after I had experienced the  behavior I described with version 2.1.0. Then I searched for a solution  and what I found was just said version, I don't remember where I actually  got it from. I didn't know it was unbeknown to the developers.
Anyway, I have reinstalled the official release (2.1.0), and the behavior  is still as mentioned in my previous post (tried to generate a new keyring  in a directory that is not the home directory with "gpg2 --homedir  some/other/directory --gen-key" and receive gpg-agent related IPC error).
Installing the newest beta of gpg4win (gpg 2.1.1-git93779b3) did not make  a difference in this respect, either.
So, if you know of a way to mend this, tell me, please.
Kind regards,


@_date: 2002-03-08 02:50:01
@_author: Jenkins, Graham K [IBM GSA] 
@_subject: Problem with Perl Call 
Guys, I have been trying to feed a passphrase into
gpg 1.0.6 (on NetBSD, Solaris and Win32) platforms)
using a variation of a script suggested in some of the
pgp documentation.  Here's what I tried.  If somebody
can tell me why it doesn't work, I'd be Real Pleased ..
if (!fork) {
syswrite(WRITER, "secret1\n", 8);

@_date: 2002-03-09 01:59:02
@_author: Jenkins, Graham K [IBM GSA] 
@_subject: Problem with Perl Call 
My example oversimplified things a bit. My program
is actually meant to feed printer files via email
to a remote printer (in parts if necessary). So it
really needs a separate program like you suggest to
prepend the passphrase.
I am actually doing it this way now - building and
invoking a separate perl program on the fly - and
it is working very well.  But it seems a bit kludgey.
So I thought "There has to be a better way .." Perhaps there isn't!
Thanks for your help.
-----Original Message-----
Sent: 3/8/02 11:34 PM
On Fri, Mar 08, 2002 at 12:47:26PM +1100, Jenkins, Graham K [IBM GSA]
You may want to try something like this:
 open FILE, "|gpg --batch --no-tty --passphrase-fd 0 --armor --symmetric
2>> $stderr > $stdout" or die "Cannot gpg";
 print FILE "passphrase\n";
 print FILE "text to be encrypted\n";
 close FILE;

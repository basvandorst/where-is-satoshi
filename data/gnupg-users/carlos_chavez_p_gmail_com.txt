
@_date: 2010-02-23 13:34:11
@_author: Carlos Chavez 
@_subject: How to sign an email in PHP? 
I am having trouble figuring out how to send a gpg signed email from
PHP.  I can generate the message, sign it with a detached signature and then
include the signature in the message.  The problem is that my mail program
(Evolution on Linux) always tells me that the signature is invalid.
     Anyone have an example of how to do this in PHP?  I am using the GNUpg
functions in PHP (  Exactly when
do I sign the message?  Right now I sign the plaintext body of the mail
before I add any of the headers for the message boundaries, then do the
skeleton where I insert the body and then the signature.
     Thank you for the help.

@_date: 2010-02-23 21:06:51
@_author: Carlos Chavez 
@_subject: How to sign an email in PHP? 
message will look fine in clients that do not support GPG directly, that is
a requirement.  I have tried to create the complete message by manually
using all the headers I find from my Evolution sent messages.  It all seems
to work but like I said I always get an error saying that the signature does
not match.  I guess something in my code is introducing a line feed
somewhere but I can not see it.  I am also trying to do it using the PEAR
extension Mail_mime but I am still having the same problem.
     I guess there may also be a missing header but I am still going through
the documentarion for the pear class which is not very clear.  Doing the
clearsign works but most customers receiving messages from this system will
not have GPG installed or use a compatible client.  I will also need to add
attachments for documents which are not a problem by themselves but then I
will have to make sure they also get signed.

@_date: 2010-02-25 10:59:38
@_author: Carlos Chavez 
@_subject: How to sign an email in PHP? 
I can now sign the message and successfully verify the signature when it
arrives.  So far Evolution, Thunderbird and Outlook work without a hitch.  I
have to write the whole email manually in PHP because the PEAR libraries for
Mime do not quite get the headers right but I do not see that as a problem.
 My next test is to sign a message that includes an attachment which is
going to be a bit more difficult.

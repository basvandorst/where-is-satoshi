
@_date: 2015-03-09 22:06:28
@_author: Andy Brandt 
@_subject: A strange problem with GnuPG & PSI/PSI+ 
I have a strange problem with GnuPG, that I have discovered when trying to
get PSI to work with it.
The scenario is pretty simple - I configure PSI for GnuPG encrypted
messaging, then I do a test with another user. When I send a message to him
all works ok, the message is encrypted and decrypts ok on the other end.
When he sends me an encrypted message I do get the pinentry-qt4 window,
there I enter my key password, but then instead of decrypted content I get
"---BEGIN PGP---" message in Psi's chat window.
To eliminate PSI as being the source of the problem (esp. since I used
config files from Windows) I installed PSI+ and configured the account by
hand from scratch. Same problem. But it doesn't end here.
If I run gpg -d from the command line and paste the encrypted message from
the PSI chat window and end with ^D the behavior is strange, because
instead of decrypting the message to stdout it hangs and I have to hit ^C
to get back to shell (if password was not provided before pinentry-qt4
appears again, on subsequent invocations it does not because gpg-agent
keeps the password for a while). If I instead put the same message into a
file and again run gpg -d file.txt then it decrypts correctly typing the
result to stdout. This strange behavior leads me to believe the problem I
encounter is with the GnuPG, not Psi/Psi+.
I checked the gpg.conf but found nothing out of the ordinary there. I know
the other user's setup works, because when I boot into Windows (where I
have ident or talk with him from another machine everything works and he is
not changing his configuration.
I'm out of ideas for now, the Suse forum was unable to help me, so any help
would be greatly appreciated.
I use OpenSuse 13.2, versions:
- gpg (GnuPG) 2.0.26
libgcrypt 1.6.1
- Psi 0.15-patched
- Psi+ 0.16.376 (2014-07-23)

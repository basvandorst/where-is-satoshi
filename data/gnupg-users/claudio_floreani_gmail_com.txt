
@_date: 2019-03-10 15:54:45
@_author: Claudio Floreani 
@_subject: Keys in the keystore dir (private-keys-v1.d/) are being modified 
I recently updated to GnuPG 2.2 and migrated my secret keyring file
(secring.gpg) to the new keystore dir (private-keys-v1.d).
I use a VCS to track what is being modified inside my $GNUPGHOME.
After signing a file with my sign subkey I noticed that the private key
file of the sign subkey was modified. Why? What happens?
I expected that my private key and subkeys were immutable files in the
* C laudio F

@_date: 2019-03-12 15:33:11
@_author: Claudio Floreani 
@_subject: Keys in the keystore dir (private-keys-v1.d/) are being modified 
Il giorno dom 10 mar 2019 alle ore 20:10 Werner Koch  ha
Thank you Werner. So, if I understood it correctly, this should happen only
once for each key, the first time it is being used. Am I correct?
Are there any discussion or extended comments about what is deferred during
the migration, without having to scrabble around the source code? In
particular, I am interested in knowing 1) whether the "partially migrated"
keys have the same level of security of the "fully migrated" keys or not 2)
if also the private master key have to be used before being fully migrated.
Please be aware that future versions of GnuPG _may_ update the file with
If I may ask, do you think it will be a good idea to update metadata inside
the private keys?
I feel much more comfortable if my private keys do never change, so that I
can just compare their checksum or ask the VCS in order to know that they
have not been tampered. Sacrificing this assurance to have some less or
more useful metadata stored inside them, just doesn't seem worth the
What I expected was that the agent could decrypt the keys in volatile
memory and then just discard them after they have been used, instead of
full rewrite the keys in the persistent memory (a mobile storage, in my
case), which in turn adds a (tiny) security risk factor.
This arguments seems even more convincing considering that the metadata
associated with the keys could as well be written (encrypted or not it
depends on the kind of metadata) in a separate file.
  Claudio

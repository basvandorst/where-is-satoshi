
@_date: 2011-08-02 08:55:24
@_author: Randy Braun 
@_subject: decrypt adding ^M characters at the end of each line 
Anyone have any ideas as to why I am seeing ^M characters at the end of
each line after decrypting a file?
I am using the following:
--decrypt /path/path/testfile.txt.pgp
This is gnupg 1.4.10 on AIX 5.3.12.2

@_date: 2011-08-02 11:17:47
@_author: Randy Braun 
@_subject: decrypt adding ^M characters at the end of each line 
I have that very question out to the vendor to see what platform the file
was created on prior to encrypting it.
I have seen this same behavior with ftp when you go from windows to unix or
vice versa when you don't use binary mode.
I guess I as wondering if there is some sort of switch I can use with pgp
to strip out the ^M? I know I could cat the output file to sed and strip
out the ^M but I was hoping there was something in gpg that would do this.
Randy Braun
Foot Locker Corporate Services
Office 414-357-4148
Email  rbraun at footlocker.com
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
David Tomaschik                                                                                                         |
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
Randy Braun                                                                                                                |
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
gnupg-users at gnupg.org                                                                                                                             |
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
08/02/2011 10:18 AM                                                                                                                               |
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
Re: decrypt adding ^M characters at the end of each line                                                                                          |
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
Was the file encrypted on another platform?  Windows, for example,
places \r\n (carriage return, newline) at the end of each line.  UNIX
OSs use just \n, and Mac OS 9 and earlier used just \r.  ^M is another
representation of the carriage return character.  (Aka \r.)
David Tomaschik, RHCE, LPIC-1
System Administrator/Open Source Advocate
OpenPGP: 0x5DEA789B
david at systemoverlord.com
                    Visit us on-line at footlocker.com.
The information in this e-mail, and any attachment therein, is confidential
and for use by the addressee only. If you are not the intended recipient,
please return the e-mail to the sender and delete it from your computer.
Although the Company attempts to sweep e-mail and attachments for viruses,
it does not guarantee that either are virus-free and accepts no liability
for any damage sustained as a result of viruses.

@_date: 2011-08-02 11:19:33
@_author: Randy Braun 
@_subject: decrypt adding ^M characters at the end of each line 
Thanks... I'll see if I can get the vendor to add --textmode to their
encryption process.
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
David Shaw                                                                                                                 |
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
Randy Braun                                                                                                                |
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
gnupg-users at gnupg.org                                                                                                                             |
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
08/02/2011 10:43 AM                                                                                                                               |
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
Re: decrypt adding ^M characters at the end of each line                                                                                          |
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
This sort of thing can happen when the sender and receiver machines have
different conventions for what ends a line of text.  Unix machines use LF,
Windows uses CRLF, etc.  GPG has built-in support for handling this
confusion, but you have to tell it that the input file is text.
So, on the *encrypting* side, add "--textmode" to the command, and that
will tell GPG to store things appropriately, and the decrypting side will
recognize this and use the appropriate line endings in the resulting file.

@_date: 2011-08-02 12:44:47
@_author: Randy Braun 
@_subject: decrypt adding ^M characters at the end of each line 
OK thanks.... I'm going to try to get the vendor to encrypt in text mode if
not I'll have to strip out the ^M with sed before we process the file.
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
David Shaw                                                                                                                 |
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
Randy Braun                                                                                                                |
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
David Tomaschik , gnupg-users at gnupg.org                                                                                 |
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
08/02/2011 11:55 AM                                                                                                                               |
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
Re: decrypt adding ^M characters at the end of each line                                                                                          |
  >--------------------------------------------------------------------------------------------------------------------------------------------------|
There is just textmode, which is something the sender sets.  On the
recipient side, GPG follows the encoding inside the message.  If that
message is not textmode (i.e. no transformation) then GPG won't touch the
content, so you need to break out the sed.

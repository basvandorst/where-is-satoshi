
@_date: 2012-02-21 12:48:15
@_author: David.Vazquez-Landa@ecb.int 
@_subject: decrypt-file updates trustdb? 
Hello list,
I faced a problem lately and I didn?t know exactly what was going on?
I have a service, which calls gpg to decrypt files and I can?t move forward because I keep getting the following error:
?PGP decryption error - gpg: Signature made 02/06/12 14:08:19 using DSA key ID 23E858FE gpg: NOTE: trustdb not writable gpg: checking the trustdb gpg: public key 64A20A5A is 3219 seconds newer than the signature gpg: public key A1C13ADD is 153 seconds newer than the signature gpg: renaming `D:/GNU/GnuPG\pubring.gpg' to `D:/GNU/GnuPG\pubring.bak' failed: Permission denied gpg: failed to rebuild keyring cache: file rename error gpg: trustdb rec 247: write failed (n=-1): Bad file descriptor gpg: trustdb: sync failed: file write error?
This happens when trying the following command:
--homedir c:\GNU\GnuPG --passphrase password --no-tty --armor --yes --decrypt-files localFolder
Now, I could ignore the timestamp and I guess I would be able to open the trustdb and my service wouldn?t die. OR I could give write permissions on trustdb.gpg, pubring.gpg and pubring.bak to the user executing the service. But I wouldn?t want to do any of those without knowing why the command is trying to rebuild the keyring cache. Best Regards,
David V?zquez
EDEN Team
European Central Bank
__________________ Tel. (+49) 69 1344 7029
Mail. david.vazquez-landa at ecb.europa.eu  Any e-mail message from the European Central Bank (ECB) is sent in good faith but shall neither be binding nor construed as constituting a commitment by the ECB except where provided for in a written agreement. This e-mail is intended only for the use of the recipient(s) named above. Any unauthorised disclosure, use or dissemination, either in whole or in part, is prohibited. If you have received this e-mail in error, please notify the sender immediately via e-mail and delete this e-mail from your system.

@_date: 2012-02-23 14:19:56
@_author: David.Vazquez-Landa@ecb.int 
@_subject: decrypt-file updates trustdb? 
Hello Cia,
I don't know if this applies in my case. I forgot to add --sorry-- that the service is running on a Windows 2008 machine.
Best Regards,
David V?zquez
EDEN Team
European Central Bank
__________________ Tel. (+49) 69 1344 7029
Mail. david.vazquez-landa at ecb.europa.eu
Any e-mail message from the European Central Bank (ECB) is sent in good faith but shall neither be binding nor construed as constituting a commitment by the ECB except where provided for in a written agreement. This e-mail is intended only for the use of the recipient(s) named above. Any unauthorised disclosure, use or dissemination, either in whole or in part, is prohibited. If you have received this e-mail in error, please notify the sender immediately via e-mail and delete this e-mail from your system.

@_date: 2012-02-24 14:48:17
@_author: David.Vazquez-Landa@ecb.int 
@_subject: decrypt-file updates trustdb? 
Dear Werner,
Yes, I found that option when browsing through the documentation. The reason I haven't started using it is that first I would like to understand why, if I'm just decrypting a file, gpg asks for write permission to trustdb.gpg, pubring.gpg and pubring.bak. In other words, I wouldn't expect my command to have to write anything. Alas, I haven't found enough information on what gpg does when running decrypt-file (or list-keys, for that matter, which gives me the same issue).
Best Regards,
David V?zquez
EDEN Team
European Central Bank
__________________ Tel. (+49) 69 1344 7029
Mail. david.vazquez-landa at ecb.europa.eu
Any e-mail message from the European Central Bank (ECB) is sent in good faith but shall neither be binding nor construed as constituting a commitment by the ECB except where provided for in a written agreement. This e-mail is intended only for the use of the recipient(s) named above. Any unauthorised disclosure, use or dissemination, either in whole or in part, is prohibited. If you have received this e-mail in error, please notify the sender immediately via e-mail and delete this e-mail from your system.

@_date: 2012-02-28 10:42:49
@_author: David.Vazquez-Landa@ecb.int 
@_subject: decrypt-file updates trustdb? 
Thanks for the explanation Werner. Does this mean that it is OK then to have write permissions on trustdb.gpg, pubring.gpg and pubring.bak?
Best Regards,
David V?zquez
EDEN Team
European Central Bank
__________________ Tel. (+49) 69 1344 7029
Mail. david.vazquez-landa at ecb.europa.eu
Any e-mail message from the European Central Bank (ECB) is sent in good faith but shall neither be binding nor construed as constituting a commitment by the ECB except where provided for in a written agreement. This e-mail is intended only for the use of the recipient(s) named above. Any unauthorised disclosure, use or dissemination, either in whole or in part, is prohibited. If you have received this e-mail in error, please notify the sender immediately via e-mail and delete this e-mail from your system.

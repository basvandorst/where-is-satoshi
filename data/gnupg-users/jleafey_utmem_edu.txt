
@_date: 2002-06-11 16:31:01
@_author: Jay Leafey 
@_subject: (?) Problems building and running gpg on Tru64 v5.1 
I've attempted to build gnupg v1.0.7 on several Compaq Tru64 v5.1 boxes and=
 run into some problems.  Specifically, I keep getting the message "gpg: ou=
t of  memory while allocating 0 bytes" during the 'make check' phase of the=
 build.  Since Tru64 doesn't have /dev/random or /dev/urandom I have instal=
led and tried both egc and prng and get the same results with both.  Here's=
 the commands I use to build gnupg:
CC=3Dcc \
CPPFLAGS=3D"-I/usr/local/include" \
./configure \
        --enable-static-rnd=3Degd \
        --disable-dev-random \
        --disable-ldap
It always ends up this way:
make  all-am
Making all in checks
../g10/gpg --homedir . --quiet --yes --import ./pubdemo.asc      =
gpg: out of  memory while allocating 0 bytes
*** Exit 2
*** Exit 1
*** Exit 1
I have tried linking checks/entropy to the 'real' entropy pool, using both =
egd and prng, and still get the same error.  If I run gpg from the installe=
d directories to generate a key, here's what I get:
$ ./gpg --gen-key
gpg (GnuPG) 1.0.7; Copyright (C) 2002 Free Software Foundation, Inc.
This program comes with ABSOLUTELY NO WARRANTY.
This is free software, and you are welcome to redistribute it
under certain conditions. See the file COPYING for details.
Please select what kind of key you want:
   (1) DSA and ElGamal (default)
   (2) DSA (sign only)
   (4) ElGamal (sign and encrypt)
   (5) RSA (sign only)
Your selection? 1
DSA keypair will have 1024 bits.
About to generate a new ELG-E keypair.
              minimum keysize is  768 bits
              default keysize is 1024 bits
    highest suggested keysize is 2048 bits
What keysize do you want? (1024) =
Requested keysize is 1024 bits   =
Please specify how long the key should be valid.
         0 =3D key does not expire
        =3D key expires in n days
      w =3D key expires in n weeks
      m =3D key expires in n months
      y =3D key expires in n years
Key is valid for? (0) 1
Key expires at Wed Jun 12 09:26:47 2002 CDT
Is this correct (y/n)? y
                        =
You need a User-ID to identify your key; the software constructs the user i=
from Real Name, Comment and Email Address in this form:
    "Heinrich Heine (Der Dichter) "
Real name: Test Key
Email address: root
Comment: Test Key, expires in 1 day =
You selected this USER-ID:         =
    "Test Key (Test Key, expires in 1 day) "
Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? o
You need a Passphrase to protect your secret key.    =
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
Please wait, entropy is being gathered. Do some work if it would
keep you from getting bored, because it will improve the quality
of the entropy.
gpg: out of  memory while allocating 0 bytes
egc.pl indicates there is still plenty of entropy available in the pool, so=
 I don't think that's the problem, and also indicates that the program did =
indeed drain some bits from the entropy pool.  The make and cc used to buil=
d were the standard utilities shipped with Tru64.  Anybody have any thought=
Jay Leafey - University of Tennessee Health Science Center
E-Mail:  jleafey  Phone:  901-448-5848  FAX:  901-448-8199

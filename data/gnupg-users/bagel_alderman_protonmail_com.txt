
@_date: 2018-01-03 17:42:19
@_author: Bagel Alderman 
@_subject: Obtaining Key Stubs From Smartcard 
I've been trying to learn to use GnuPG and have hit a spot of trouble. My goal is to set up an off-line master key with a sub-key each for signing, encryption and authentication, and to keep the sub-keys on a smart card (Yubikey) for convenient use.
To prepare for the inevitable moment I destroy/lose my Yubikey, I want to keep a copy of my sub-keys on my backup Yubikey as well. So far I have been able to manage this by using keytocard, deleting the local stubs, and importing the sub-keys from a backup. Using this method, the most recent Yubikey to have keys moved to it is listed as the key which contains the sub-keys.
My concern is this: If I do lose my Yubikey, I wont be able to use my backup Yubikey without first deleting current stubs, importing my backup sub-keys, and keytocard-ing them to the backup Yubikey, since my machine thinks the stubs only exist on the lost/destroyed smart card.
I've heard several say that the workaround is to use gpg --card-status to create key stubs from the currently inserted smart card, but so far I haven't had any luck getting that to work, neither on my Ubuntu machine or my Windows 7 box.
Can anyone tell me why gpg --card-status isn't creating key stubs (even after  the original stubs are deleted)? It displays card information, but that seems to be all it does.
Ubuntu 16.04 using GnuPG v2.1.11 installed/updated with apt
Windows 7 using GnuPG v2.2.3 via gpg4win

@_date: 2018-01-04 11:56:41
@_author: Bagel Alderman 
@_subject: Obtaining Key Stubs From Smartcard 
UTC Time: January 4, 2018 10:27 AM
Command entered(Ubuntu 16.04):
gpg2 --card-status
Result (some card data replaced with ""):
Reader............: Yubico Yubikey NEO OTP U2F CCID 00 00
Application ID....: D2760001240102000006053043400000
Version...........: 2.0
Manufacturer......: Yubico
Serial number.....: Name of cardholder: Language prefs....: en
Sex...............: unspecified
URL of public key.: ''
Login data........: Signature PIN.....: forced
Key attributes....: rsa2048 rsa2048 rsa2048
Max. PIN lengths..: 127 127 127
PIN retry counter.: 3 3 3
Signature counter.: 20
Signature key.....: created...: 2018-01-02 20:50:36
Encryption key....: created...: 2018-01-02 20:51:07
Authentication key: created...: 2018-01-02 20:51:31
General key info..: [none]
After that, I run
gpg2 -K
to confirm I don't have stubs for the keys on the card.
Good to know, thanks.
Please let me know if there's anything else I can check that'd be useful for diagnosing this. I appreciate your help.

@_date: 2018-01-09 11:14:13
@_author: Bagel Alderman 
@_subject: Obtaining Key Stubs From Smartcard - Solved 
I stumbled across my answer. I didn't realize the public key was necessary for the private key stubs to appear with "gpg2 -K" and become usable. It turns out my system *was* registering the stubs under ~/.gnupg/private-keys-v1.d/, probably the whole time.
All I needed to do was to import my public key to make the stubs from either of my smart cards useful.
Thanks again for all your help, I know it often isn't easy working with someone as new to a technology as I am to GnuPG.

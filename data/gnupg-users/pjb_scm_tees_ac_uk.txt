
@_date: 2010-09-24 19:52:02
@_author: Phil Brooke 
@_subject: per-user data signatures [was: Re: multiple keys vs multiple 
Is there any particular difficulty or reason for it not being implemented by anyone?  (It looks very similar to, for example, the policy URL signature subpacket.)

@_date: 2011-10-28 14:07:53
@_author: Phil Brooke 
@_subject: MS Exchange server corrupting PGP-MIME emails 
(I'm rather late to this thread, but anyway....)
Nothing relating to encrypted data, but I've seen an MS Exchange system rewrite signed emails (both PGP/MIME and S/MIME) with the obvious effect of causing failed verifications.

@_date: 2011-10-31 12:53:16
@_author: Phil Brooke 
@_subject: MS Exchange server corrupting PGP-MIME emails 
I attach two messages: correct.email (fcc of an email) and broken.email (the version which went through our local Exchange server).  (Not sure if attachments will get through.  I'll try anyway.)  I've removed nearly every header and snipped out some of the same content.
The interesting bit is the diff of the body:
    2,4c2,4
    < Content-Type: multipart/signed; protocol="application/pgp-signature"; micalg="pgp-sha1"; boundary="=_MIME_CONTENT_BREAK_=_NZHRDBSCQSDTWZLUTFCCREKIFAYRUOM_="
    <
    < This is an OpenPGP/MIME signed message (RFC2440, RFC3156).
    ---
    > Content-Type: multipart/signed; protocol="application/pgp-signature";
    > 	micalg=pgp-sha1;
    > 	boundary="=_MIME_CONTENT_BREAK_=_NZHRDBSCQSDTWZLUTFCCREKIFAYRUOM_="
    7c7,8
    < Content-Type: multipart/mixed; boundary="1771607802-1616753266-1320061802=:11794"
    ---
    > Content-Type: multipart/mixed;
    > 	boundary="1771607802-1616753266-1320061802=:11794"
    10c11
    < Content-Type: TEXT/PLAIN; format=flowed; charset=UTF-8
    ---
    > Content-Type: text/plain; format=flowed; charset="UTF-8"
    17c18
    < Content-Type: TEXT/plain; charset=UTF-8; name=test1.txt
    ---
    > Content-Type: text/plain; charset="UTF-8"; name="test1.txt"
    20,21c21,22
    < Content-Description: A plain text file.
    < Content-Disposition: attachment; filename=test1.txt
    ---
    > Content-Description: test1.txt
    > Content-Disposition: attachment; filename="test1.txt"
    26c27
    < Content-Type: APPLICATION/pdf; name="test1 as a PDF.pdf"
    ---
    > Content-Type: application/pdf; name="test1 as a PDF.pdf"
    29c30
    < Content-Description: The file as PDF.
    ---
    > Content-Description: test1 as a PDF.pdf
All the changes, except the first (to the first Content-Type and
prologue) are within the signed part of the message.   So we've got
   - added quoting,
   - change of case in the Content-Type,
   - modification of Content-Description, and
   - changed folding.
I'm not sure which Exchange server version(s) we're running here.  In
case these received headers are useful:
    Received: from zzzzzz.zzzz.zz.zz (zzz.zzz.zzz.zz) by zzzzzz.zzzzzzz.zzzz.zz.zz
     (zzz.zzz.zz.zz) with Microsoft SMTP Server (TLS) id 8.2.255.0; Mon, 31 Oct
     2011 11:50:40 +0000
    Received: from zzzzzz.zzz.zzzz.zz.zz (zzz.zzz.zz.zz) by zzzzzz.zzzz.zz.zz
     (zzz.zzz.zzz.zz) with Microsoft SMTP Server (TLS) id 14.1.339.1; Mon, 31 Oct
     2011 11:51:04 +0000

@_date: 2011-10-31 13:34:38
@_author: Phil Brooke 
@_subject: MS Exchange server corrupting PGP-MIME emails 
A remark on these kludges: an S/MIME email from a colleague elsewhere using Outlook and their Exchange server was still mangled by our Exchange server.  Sending to their Exchange server (avoiding our Exchange server) didn't exhibit the same characteristics.  I would have hoped that staying entirely within one vendor's tools really should work.
The trigger in both this case (and the example emails I sent earlier) appears to be attachments.
Overall, it makes signed emails just so unreliable.  But I guess we already knew that.

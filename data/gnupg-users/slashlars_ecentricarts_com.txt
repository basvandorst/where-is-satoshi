
@_date: 2005-06-11 01:25:32
@_author: slashlars 
@_subject: encrypt data, not file, in one line? 
I want to invoke GnuPG on a Windows 2000 server from within a web application.
Problem: I don't want to write temporary plaintext files. Encrypting a file is no problem: I do something like:
gpg -o cipher.txt.asc -a -r slashlars --batch --encrypt plain.txt
My web app can retrieve a result from stdout, so I don't need the output file:
gpg -a -r slashlars --batch --encrypt plain.txt
But I can't figure out how to encrypt data from stdin, except interactively at the Windows command prompt, typing or pasting it in and ending with ctrl-C.
I had hoped to find an option like --encrypt-data which would cause the arg after --encrypt to be treated as plaintext data instead of a filename. gpg -a -r -r slashlars --batch --encrypt-data --encrypt Your secret word is 'dog'
Is there a way to get that to work, either a set of gpg options or in the way I call it on a command line?
The manuals, man page, Google search and a scan of the archives here in gnupg-users has not turned up anything for me.
My (very limited) Windows shell knowledge (plus searches online) doesn't tell me how to pipe data in, except that I can direct a file into stdin -- but of course, I don't want to write the plaintext into a file in the first place!
 -- Lars
"If they ever come up with a swashbuckling
 school, I think one of the courses should
 be Laughing, Then Jumping Off Something."
 -- Jack Handey

@_date: 2005-06-13 16:51:55
@_author: slashlars 
@_subject: encrypt data, not file, in one line? 
Thanks, Joe -- that does the trick, so long as SOME DATA HERE contains no line breaks. The results of some v quick tests: If the data contains characters the W32 shell would interpret (e.g. < ) then it seems the plaintext must be in double-quotes; unfortunately, the quotes become part of the plaintext and appear when ciphertext is decrypted.
It seems like there should be a way to allow for multi-line input or escaping special characters without quoting the entire input; if I come up with something (trial & error!) I'll post to list. (Not to bash MS but I find the command shell pretty anemic and the interface inconsistent... well, I don't have to like it, just use it at work.)
re: C.D.Rok's post and Jean-David Beyer's first in thread: yes, it's my understanding that attacks which capture the OS's scratch files or in-memory variables might recover plaintext. At my (modest) level of expertise, not much I can do about that!
Thanks to all for responses.
 -- Lars

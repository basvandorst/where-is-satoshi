
@_date: 2013-08-01 22:58:06
@_author: Martin T 
@_subject: How to detect fingerprint and type of the key from pubring.gpg(public 
RIPE(RIR in European region) database allows one to upload ASCII armored
PGP public keys: software is able to generate some "key-cert" object attributes
automatically. For example "method", "owner" and "fingerpr":
noc at T42 ~ $ whois -h whois.ripe.net -t key-cert | grep gene
method:         [generated]  [single]     [ ]
owner:          [generated]  [multiple]   [ ]
fingerpr:       [generated]  [single]     [inverse key]
noc at T42 ~ $
Example "key-cert" object provided by RIPE:
key-cert: PGPKEY-4B8AE00D
method:   PGP
owner:    Joe User fingerpr: 9D 82 4B B8 38 56 AE 12  BD 88 73 F7 EF D3 7A 92
certif:   ---BEGIN PGP PUBLIC KEY BLOCK---
certif:   Version: 2.6.3ia
certif:   mQA9AzZizeQAAAEBgJsq2YfoInVOWlLxalmR14GlUzEd0WgrUH9iXjZ
certif:   a/uqWiLnvN59S4rgDQAFEbQeSm9lIFRoZSBVc2VyIDxqb2VAZXhhbXB
certif:   iQBFAwUQNmLN5ee83n1LiuANAQFOFQGAmowlUYtF+xnWBdMNDKBiOSy
certif:   YvpKr05Aycn8Rb55E1onZL5KhNMYU/gd
certif:   =nfno
certif:   ---END PGP PUBLIC KEY BLOCK---
mnt-by:   EXAMPLE-MNT
changed:  joe at example.net 19981117
source:   TEST
How are those fields automatically detected/generated? "Owner"(UID in gpg
terminology) is written to public key- one can verify this with analyzing
the public key with hex editor. However:
1) is "method" also built into public key? At least "hexdump -C pubring.gpg
fingerprint which is understood by server-side software? Last but not
least, are there any other types besides "PGP"? I guess it is as pgpdump is
even able to dump the timestamp when the key itself was generated.
2) is fingerprint automatically hashed based on the UID?

@_date: 2013-08-02 10:56:59
@_author: Martin T 
@_subject: How to detect fingerprint and type of the key from 
thanks for the reply!
Exactly. However, how does RIPE server-side software detect that it's
a PGP key? Is this information(besides other information like key
creation date and UID) written into pubring.gpg file during the
creation of the public key?
Indeed. I revoked my current UID and changed it to another one and
both public and private key fingerprints remained the same. So the key
fingerprint is a hashed key material? Is it a SHA-1, MD5 or some other
type of hash?
2013/8/2, David Shaw :

@_date: 2013-08-02 13:51:10
@_author: Martin T 
@_subject: best practice for handing over the private key 
I need to create a public and private key pair for a person
representing an organization, upload the public key to RIPE(regional
Internet registry in Europe) public server, create some database
entries using those public and private keys and finally hand over the
private key + password protecting the private key to this person. I'm
aware that handing over the private key is not the best practice, but
at the moment I don't have an option. Has anyone been in similar
situation? I thought that I'll ship the private key on a USB memory
stick in closed envelope, send the password protecting the private key
over e-mail or SMS, delete the private key from my own machine and ask
him to change the password protecting the private key. Are there
better methods? Or ask him to create personal gpg key pair, upload the
public key to key-server and finally I'll encrypt this private key
with his personal public key from the key server and send the
encrypted private key to his e-mail? This method doesn't require
shipping the USB memory stick. Better ideas?

@_date: 2013-08-02 15:25:46
@_author: Martin T 
@_subject: best practice for handing over the private key 
I'm afraid this doesn't work because at the beginning I need to have
both the private and public key in order to carry out operations in
RIPE database. I don't see a difference if he generates the key pair,
uploads the ASCII armored public key to RIPE public database and then
has to send the private key and password protecting the private key to
2013/8/2, NdK :

@_date: 2013-08-02 16:31:24
@_author: Martin T 
@_subject: best practice for handing over the private key 
Not quite. At the beginning I need to use those keys myself in order
to create the needed database objects. Once those are done, I need to
hand over the private key to other person. So basically I'm generating
a key pair for other persons use which I need to use myself at the
So you mean that my correspondent sends me his public key, encrypted
to my public key which he finds from the key-server, in an e-mail.
Then I generate the key pair needed for the project. Finally I encrypt
the project private key with his public key and e-mail this encrypted
private key to him. Once he confirms that he has received the project
private key, I will delete the project private key from my machine as
I do not need it any more. Is that what you meant?
2013/8/2, John Clizbe :

@_date: 2013-08-09 17:35:13
@_author: Martin T 
@_subject: How to detect fingerprint and type of the key from 
Ok, I see. Probably RIPE server-side software behaves like file(1)
utility(or just calls the file(1) utility), which seems to determine
file as a "PGP public key block" if it contains the "BEGIN PGP PUBLIC
KEY BLOCK" string:
noc at T42 ~/.gnupg $ file pubkey.txt
pubkey.txt: PGP public key block
noc at T42 ~/.gnupg $ hexdump -C /usr/share/file/magic.mgc | grep -B 3 -A
3 "PGP PUBLIC"
000011f0  00 00 00 00 00 00 00 00  00 00 20 00 3d 1e 05 00  |.......... .=...|
00001200  00 00 00 00 02 00 00 00  00 00 00 00 16 00 00 00  |................|
00001210  00 00 00 00 00 00 00 00  2d 2d 2d 42 45 47 49 4e  |........---BEGIN|
00001220  20 50 47 50 20 50 55 42  4c 49 43 20 4b 45 59 20  | PGP PUBLIC KEY |
00001230  42 4c 4f 43 4b 2d 00 00  50 47 50 20 70 75 62 6c  |BLOCK-..PGP publ|
00001240  69 63 20 6b 65 79 20 62  6c 6f 63 6b 00 00 00 00  |ic key block....|
00001250  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
noc at T42 ~/.gnupg $

@_date: 2013-08-12 11:40:35
@_author: Martin T 
@_subject: understanding GnuPG "--clearsign" option 
one can sign the message with "--clearsign" option which adds ASCII
armored(Radix-64 encoding) "PGP signature" at the end of the text.
This "PGP signature" contains the UID of the signer, timestamp and key
ID. However, two questions:
1) Where is the UID of the signer, timestamp of the signature and
signer key-ID stored? If I execute "gpg2 --verify file.asc", then I'm
able to see the UID of the signer, timestamp and signer key-ID, but if
I decode the Radix-64/base64 data back to binary(base64 -d) and use
"hexdump -C" to analyze this data, I do not see the UID, timestamp or
signer key-ID.
2) What exactly is this "PGP signature"? Is it a SHA1 hash of the
message which is encrypted with my private key and then ASCII armored?

@_date: 2016-10-17 13:31:16
@_author: Martin T 
@_subject: regular update of all keys from a keyserver 
I am aware that one can update all the keys in local-keyring from a
keyserver using "gpg --refresh-keys". Are there any disadvantages to
simply put this command into user crontab and execute for example once
a day?

@_date: 2016-10-18 13:42:24
@_author: Martin T 
@_subject: list revoked UIDs 
I imported a public key from keyserver which has multiple UIDs and one
of those UIDs is revoked. When I execute "gpg --list-keys "
then I see only active UIDs and not that one revoked UID. Is there a
way to list that revoked UID? Or wasn't that imported in the first

@_date: 2016-10-26 23:21:48
@_author: Martin T 
@_subject: ways to ensure that GPG public key belongs to right person in 
let's say that Alice from company A and Bob from company B need to
exchange some private data with each other. Alice and Bob need to
encrypt data just that one time, they do not belong to web-of-trust,
but both company A and company B websites are trusted by certification
authority, secure and available only over TLS. This gives a first
option where both Alice and Bob ask their IT departments to publish
their public keys on the company website so Alice can get Bobs public
key over TLS from company B website and the other way around. Or when
for example website of company B is not trusted by CA, then Alice can
pick up the phone, call the customer-support of the company B and ask
for Bob and then ask Bob to send her an e-mail with a public key and
verify the fingerprint of the public key over a phone? Are there
better(easier to use or more secure) ways to ensure that GPG public
key belongs to right person in business to business communication?

@_date: 2016-10-27 23:52:23
@_author: Martin T 
@_subject: ways to ensure that GPG public key belongs to right person in 
thanks for reply! Unfortunately, Alice and Bob cannot meet in person
because of geographical distance. If they could, then this would
definitely be the best way to exchange public keys. I further
simplified my initial idea:
Alice from company A asks Bob from company B to send her Bobs public
key using an e-mail. Both Alice and Bob know each other e-mail
addresses because they have been in contact before during a project
which involves both company A and company B. Now when Alice receives
Bobs public key, she will send hers in return to same e-mail address
which she received the Bobs public key. Then she looks up the phone
number of the customer support department of company B from company B
official website and calls there and asks for Bob. Once she gets Bob
on the phone, she asks Bob to tell the fingerprint of his public key
and then Alice tells her public key fingerprint to Bob and asks Bob to
confirm that it matches.
I guess this provides reasonable security?
On Wed, Oct 26, 2016 at 11:51 PM, Daniel Kahn Gillmor

@_date: 2018-08-23 13:07:17
@_author: Martin T 
@_subject: gpg not able to find my secret key 
I forgot to add, that "gpg-connect-agent 'keyinfo --list' /bye" prints
four(if I remember correctly, then I had two keys) keys:
$ gpg-connect-agent 'keyinfo --list' /bye
S KEYINFO D1FB0DC2361FC6826CE6CB6EAB4D36DA6E254FFA D - - - P - - -
S KEYINFO EF4529B5ED613C1F849849C1025805114A13B946 D - - - P - - -
S KEYINFO 6B1903F77C2C0F502EC28F484F5BD9FCB4A3F3EB D - - - P - - -
S KEYINFO DE9D9A4362E8E4D8AA64B85149939F8A711B2CE0 D - - - P - - -
Maybe it is a communication issue between the gpg and gpg-agent?
However, I would expect the gpg to report it if this is the case.

@_date: 2018-08-23 12:54:57
@_author: Martin T 
@_subject: gpg not able to find my secret key 
I reinstalled my workstation and moved ~/.gnupg directory from old
machine to new one. Gpg version in both workstations is 2.1.18. The
problem is, that in the new workstation, when I try to decrypt a file,
it doesn't find the secret key:
$ gpg -o .file -d .file.gpg
gpg: encrypted with RSA key, ID 7BA1DFF9E00DF644
gpg: decryption failed: No secret key
When I list the secret keys(gpg --list-secret-keys), then the output
is empty. When I start the "gpg --list-secret-keys" with "strace -e
open", then ~/.gnupg/secring.gpg file is not searched. gpg-agent is
not running. When I start the gpg-agent, then it does't change
anything, i.e the "gpg --list-secret-keys" is empty.
Directory and file permissions for ~/.gnupg are the same as in old
installation. I also started both gpg and gpg-agent with
"--debug-level guru" option, but it provided no useful information.
For example:
$ gpg --debug-level guru --list-secret-keys
gpg: enabled debug flags: packet mpi crypto filter iobuf memory cache
memstat trust hashing ipc clock lookup extprog
gpg: DBG: [not enabled in the source] start
gpg: DBG: [not enabled in the source] keydb_new
gpg: DBG: [not enabled in the source] keydb_search_reset
gpg: DBG: keydb_search: reset  (hd=0x000055e6f13ce8b0)
gpg: DBG: [not enabled in the source] keydb_search enter
gpg: DBG: keydb_search: 1 search descriptions:
gpg: DBG: keydb_search   0: FIRST
gpg: DBG: keydb_search: searching keybox (resource 0 of 1)
gpg: DBG: keydb_search: searched keybox (resource 0 of 1) => EOF
gpg: DBG: [not enabled in the source] keydb_search leave (not found)
gpg: DBG: [not enabled in the source] stop
gpg: random usage: poolsize=600 mixed=0 polls=0/0 added=0/0
              outmix=0 getlvl1=0/0 getlvl2=0/0
gpg: secmem usage: 0/65536 bytes in 0 blocks
What might cause this?

@_date: 2018-08-24 09:47:59
@_author: Martin T 
@_subject: gpg not able to find my secret key 
Thanks for replies! The problem was indeed the existing
~/.gnupg/.gpg-v21-migrated file. Once I removed it, I did see the keys
in the output of "gpg --list-keys" and "gpg --list-secret-keys".
One more small question- in the output of "gpg --list-keys" or "gpg
--list-secret-keys" I see two keys, but in the output of
"gpg-connect-agent 'keyinfo --list' /bye" or "ls
~/.gnupg/private-keys-v1.d/" I see four keys with different hashes.
Why is that so?

@_date: 2018-08-27 13:14:52
@_author: Martin T 
@_subject: gpg not able to find my secret key 
thanks! I indeed have two primary key-pairs and each primary key-pair
has a subkey pair. When I execute "gpg --list-keys --with-keygrip",
then I see the same four public key hashes as with "keyinfo --list" in
gpg-connect-agent utility.

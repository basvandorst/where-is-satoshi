
@_date: 2012-04-18 17:13:27
@_author: Scott Armitage 
@_subject: Cannot import private key 
Hi everyone,
I am trying to integrate GnuPG with my workflow, and am in the stage of
setting up a new keypair for use across all of my computers. I have created
the key pair, given the private key a passphrase, and generated a
revocation certificate for that key. I am now trying to import that private
key on another computer, but I am having some issues.
I first export the private key using:
gpg --export-secret-key -a  > private.asc
This seems to work fine, and generates an ASCII-armored key file of the form
-----BEGIN PGP PRIVATE KEY BLOCK-----
Version: GnuPG v1.4.9 (MingW32)
-----END PGP PRIVATE KEY BLOCK-----
I then take this private key file to a new computer and try to import it
gpg --import private.asc
gpg: no valid OpenPGP data found.
gpg: Total number processed: 0
Any suggestions? This process works fine for exporting and importing public
keys, it's only the private one that is throwing this error. I have also
tried the --allow-secret-key-import, though I understand this is
effectively redundant now.

@_date: 2012-04-19 08:38:53
@_author: Scott Armitage 
@_subject: Cannot import private key 
Thanks, Peter; I tried that, but couldn't get it to work either.
I think I have solved the problem though (I still need to try and
reproduce it from scratch, to verify my theory). It seems that
Powershell uses UCS-2 character encoding when using redirectors (the
">" in my commands). Changing the file encoding to ANSI or UTF-8
allows the private key to be imported properly. It is unclear to me
why the public key would import fine, however.
For the record, I was using redirectors instead of the "-o" option
because apparently it has no effect (at least in Powershell on
Windows) if you use it after the --export option. I have now figured
out that I can use "-ao " before the "--export-secret-key
" and everything works fine:
gpg -ao private.asc --export-secret-key gpg --import private.asc
gpg: key : already in secret keyring
gpg: Total number processed: 1
gpg:       secret keys read: 1
gpg:  secret keys unchanged: 1
Thanks for the help!


@_date: 2005-01-21 16:40:16
@_author: lord grinny 
@_subject: Proxy trouble 
Hi everyone,
I'm trying to get Gnu-pg working over a proxy server,
but can't get it to work.
I'm using Windows 2000 SP 4 and have tried both verion
1.4.0a and 1.4.1 (cvs
build) which both gave the same error. I've also tried
1.4.0.2 for cygwin which
also gave me the same error.
I've added the option 'keyserver-options
honor-http-proxy' to my gpg.conf, have
set the environment variable 'http_proxy', to
 and
gpg.exe is on my PATH.
Now when I try to receive a key from the keyserver, it
tells me it can't find
the keyserver.
--keyserver x-hkp://keyserver
--recv-keys 0xBB36BA75
I know my proxy settings are good, cause I use the
same HTTP proxy for firefox.
The weirdest thing is, if I repeat the command above
with an IP address in stead
of a hostname, it also fails, but with a different
32 byte gegevens:
--keyserver x-hkp://69.36.241
--recv-keys 0xBB36BA75
My proxy only allows access to port 80 (HTTP) and port
443 (SSL). Is this a
known bug that hasn't been fixed yet, or am I doing
something really stupid?
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around

@_date: 2005-01-22 12:39:40
@_author: lord grinny 
@_subject: Proxy trouble 
Thanks for your response Jason,
--recv BB36BA75
D:\>gpg --keyserver hkp://keyserver.kjsl.com:80
--recv-keys 0xBB36BA75
gpg: requesting key BB36BA75 from hkp server
Host:           keyserver.kjsl.com
Port:           80
Command:        GET
gpgkeys: HTTP URL is
?: keyserver.kjsl.com: Host not found: ec=10065
gpgkeys: HKP fetch error: No error
gpg: no valid OpenPGP data found.
gpg: Total number processed: 0
I don't know what this is. My proxy is set up
correctly (works for Firefox) and I think I've setup gnu-pg correctly...
- Grinny -
__________________________________ Do you Yahoo!? Yahoo! Mail - Easier than ever with enhanced search. Learn more.

@_date: 2005-01-24 22:22:19
@_author: lord grinny 
@_subject: Gnupg-users Digest, Vol 16, Issue 34 
Thank you for your response Henry, one day I'll get it
to work and then I'll send you all an encrypted e-mail :-).
I tried this, but my DNS is definitly set up okee.
C:\Documents and
*** Can't find server name for address 192.168.0.1:
Non-existent domain
*** Default servers are not available
Server:  UnKnown
Address:  192.168.0.1
Non-authoritative answer:
Name:    keyserver.kjsl.com
Address:  69.36.241.130
192.168.0.1 is my gateway (A windows 98 box serving as
a router)
is either in your
Internet.  Until that
problem or not.  I just
INSTANTLY.  Here is what
some host you can
looks like you are
My proxy server doesn't allow me to ping. But I do
have connection to the internet, only not directly. I know my connection is
okee, cause I'm still surfing the internet with firefox, and have set up my
mail to run via the http proxy too.
are notorious for
That creates a problem
the request is handed
that I didn't request
would be fine, but I
on port 10, and I
the only alternatives
server other than one
could care less if
only one that should
request to.  All
establish a connection
these broadband
80.  If I sent it out,
another keyserver,
what port is being
Yeah, since I can't open ports on my side, I can only
get a direct response from the keyserver I asked for it (like HTTP).
going to allow the
necessarily the one I sent
they do that, and
keyservers to the
don't want to see an
my side I have to do
11371 to come in from
firewalls running on
with Windows, and PF
as the DI-604e or any
firewall will.   I do my
WELL documented way
NOT the only one that
iptables and move
up though, and I will
my WAN port.
I really wish I could open up more ports.... But I'm
not the owner/admin of the proxy server. So the only thing it will ever allow are
outgoing requests to port 80.
list.  Please forward
address anywhere in
it.  It isn't part of
versions.  If he were on
Linux all you have to
(everything after a '
which Securely
Do you think I have a better chance on FreeBSD? (I do
have a dualboot FreeBSD 5.1 and Windows 2000, but I use windows for checking
my email with thunderbird).
- Grinny -
Real programmers don't comment their code.  It was
hard to write, it should be hard to understand.
__________________________________ Do you Yahoo!? Yahoo! Mail - now with 250MB free storage. Learn more.

@_date: 2005-01-25 19:07:11
@_author: lord grinny 
@_subject: Gnupg-users Digest, Vol 16, Issue 34 
NOT ok. You could be
forwarding - at least
keyserver.kjsl.com in
on Win2k, /etc/hosts
to flush the name cache
 and setup
broadband provider
suggest some, but I don't
use a static address
192.168.0.1, and whatever
I'm sorry, I don't think I have explained it
correctly. My normal box (just called 'Grinny') is connected to the win98 router. The
win98 is a normal pc setup with Internet Connection Sharing so it acts as
gateway and as DHCP server. The win98 box is called 'mentor5'. 'Mentor5' routes
all incoming connections to the wireless pci card that's connected to a free
wireless network that spans the entire city ( So I don't
actually have an ISP, I internet for free :-). So 'mentor5' gets it's IP
address from a local wireless node that's connected (wireless) to the proxy server,
that also seems to run the DNS server for the entire network (When connection to
the proxy is lost, I can't ping the local node by it's name, only by its ip).
I did what you asked me, and put the line in 'hosts'
and ran 'ipconfig Allthough it does complain about   not knowing the name for 192.168.0.1, it does answer
my question and gives me the _correct_ ip address of the server. If I do a ping
to the same server, it fails because the proxy server won't allow pings to
the internet, but it does resolve the ip address correctly. Do you really think
this could still be a DNS problem, would I then still be able to browse the
internet with my browser? By the way do you know how I can tell 'Grinny' that the
name for 192.168.0.1, is 'mentor5'? It does know that 'mentor5' is 192.168.0.1.
Thanks for all your help, I know you must be getting
tired of it (I know I am), but one day I'll get it to work, this is personal now.
- Grinny -
Real programmers don't write in BASIC.  Actually, no
programmers write in BASIC after reaching puberty.
__________________________________ Do you Yahoo!? Yahoo! Mail - Find what you need with new enhanced search.

@_date: 2005-01-26 20:35:18
@_author: lord grinny 
@_subject: gpg --keyserver 
Thanks very much for your response,
I tried  your suggestion but with no effect. I don't
think it's a problem in my network setup, but that the problem lies with (my
installation of) gpg.
do with
Gpg still gives the same result:
gpg: requesting key BB36BA75 from hkp server
Host:           keyserver.kjsl.com
Port:           80
Command:        GET
gpgkeys: HTTP URL is
?: keyserver.kjsl.com: Host not found: ec=10065
gpgkeys: HKP fetch error: No error
gpg: no valid OpenPGP data found.
gpg: Total number processed: 0
I've setup firefox too use the same proxy
configuration and I can reach the site without any problem. Allthough nslookup complaint
about not knowing the host name of the router, it did give the correct result.
Ping also translates the hostname to a correct ip address, so I really don't
think this is a DNS problem.
The weirdest thing is that I get a different error
message when I use the ip address.... Since I know the rest of my applications
are setup correctly, so I know the network is okee, this leads me to believe
that either I'm _that_ stupid and fucked up my settings again (this has happened
before :-) ), or this is a bug in gpg.
gpg: requesting key BB36BA75 from hkp server
Host:           69.36.241.130
Command:        GET
gpgkeys: HTTP URL is
gpgkeys: HKP fetch error: No error
gpg: no valid OpenPGP data found.
gpg: Total number processed: 0
I allready use Thunderbird, I also have enigmail
installed, but since fetching keys didn't work, I went back to basic and tried to
retrieve a key from the console. Since that too failed I know the problem lies
with gpg.
- Grinny -
the source of my problems is in the source...
__________________________________ Do you Yahoo!? Yahoo! Mail - 250MB free storage. Do more. Manage less.

@_date: 2005-01-28 22:27:45
@_author: lord grinny 
@_subject: tempout.txt 
Hi everyone,
Could someone please send me a copy of tempout.txt
(you can get this with the '--keyserver-options keep-temp-files' options). I'd
like to know the fileformat.
- Grinny -
__________________________________ Do you Yahoo!? Yahoo! Mail - 250MB free storage. Do more. Manage less.

@_date: 2005-01-29 13:05:29
@_author: lord grinny 
@_subject: tempout.txt 
It doesn't work for me, since the 'helper' application
gpgkeys_http doesn't work for me, and I know it's very easy to write one myself
I would really like to know how tempout is supposed to look, this is mine:
VERSION 1
PROGRAM 1.4.1-cvs-2005-01-21
KEY 0xBB36BA75 BEGIN
KEY 0xBB36BA75 FAILED 9
Does it really...?
- Grinny -
__________________________________ Do you Yahoo!? Yahoo! Mail - You care about security. So do we.

@_date: 2005-01-29 15:02:03
@_author: lord grinny 
@_subject: tempout.txt 
Thanks Henry,
This wasn't exactly what I meant, but it is nice to
finaly see it do something it is supposed too. Importing your key worked without
any problem. The temp file I was asking for is where the gpgkeys_* helper
programs store their output. Gpg creates a temporary file, fills it with parameters and
calls the gpgkeys_* program. The helper program reads the parameters from
the temporary inputfile and then puts the result in the temporary output file.
Gpg reads the output file and extracts the key.
Because my network is a little complicated and nobody
else seems to have the problem I have. I decided to write a new version of
gpgkeys_http. This shouldn't be very hard, when I know what the exact output should
- Grinny -
Oh, I am a C programmer and I'm okay
         I muck with indices and structs all day
And when it works, I shout hoo-ray
         Oh, I am a C programmer and I'm okay
-keyserver-options \
is redirect
attaching 2log.txt,
2log.txt file
the file
see it.
you can
transaction, and
of the
pub/sub key?
you should type:
I am not, you
hand if I am
Hobbit \
WHERE SHOULD THE
WinPT.  It
works MUCH
the GnuPG
download the
__________________________________ Do you Yahoo!? The all-new My Yahoo! - What will yours do?

@_date: 2005-01-29 15:11:20
@_author: lord grinny 
@_subject: tempout.txt 
I did _NOT_ remove anything from the file the contents
I send is the only thing that's in the output (See the 'FAILED 9'). That's the
reason I was requesting the file, I want to know what's wrong and how it is
supposed to look.
I wouldn't even know what to "sanitize" :-).
- Grinny -
going to post things
"security" to the point
removed at least
__________________________________ Do you Yahoo!? Yahoo! Mail - Easier than ever with enhanced search. Learn more.

@_date: 2005-01-31 19:05:42
@_author: lord grinny 
@_subject: tempout.txt 
Thank you very much,
I've been trying to get gpg to work for weeks now,
finally gave up and decided
to hack it by replacing the http helper to fetch a key
through my (restrictive)
proxy server. This file was exactly what I needed to
get it to work. My only
regret is I didn't start hacking sooner :-). If
anybody still has proxy trouble
and wants to try my hack, mail me and I'll send you
the source. It doesn't
accept all the options yet, but if someone's
interrested I could add them.
Now if I could only get enigmail to work I could
actually sign this message....
- Grinny -
Oh, I am a C programmer and I'm okay
         I muck with indices and structs all day
And when it works, I shout hoo-ray
         Oh, I am a C programmer and I'm okay
tempout.txt since the
they still can't
sample tempout.txt:
__________________________________ Do you Yahoo!? The all-new My Yahoo! - Get yours free!

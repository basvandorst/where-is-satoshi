
@_date: 2019-08-25 23:26:00
@_author: Farhan Khan 
@_subject: Constantly restarting gpg-agent 
Hi all,
I use gnupg to sign my git commits, but after a few hours of use I have to restart gpg-agent. Before
doing so, what I presume is gpg-agent asks me to re-enter my password on a random terminal (but it
seems to drop characters and never works). As a result, the git commit fails. I have to kill
gpg-agent and restart it as "gpg-agent --daemon", which then works.
I would like to:
A. The calling terminal should be where I have to re-enter my password, not seemingly a random
B. Enter my password only once.
This is a headless remote system I ssh into running FreeBSD 12.0. Please find my configuration
Farhan Khan
PGP Fingerprint: 1312 89CE 663E 1EB2 179C 1C83 C41D 2281 F8DA C0DE

@_date: 2019-02-17 02:20:30
@_author: Farhan Khan 
@_subject: Yubikey keytocard: "Bad secret key" 
Hi all,
I am trying to import my existing PGP key to my Yubikey and I keep getting:
gpg: KEYTOCARD failed: Bad secret key
Even after I reset the pin or set a custom value. I am following the instructions here ( to reset the device, but am told the pin is wrong. This happens both when I set a custom pin and not. Am I doing something wrong? Below is an output of what I did to reset the pin, expecting it to be "1234578".
Please advise.
I am prompted to enter the PGP password, which seems to work, but when I enter the admin key of "12345678" I get this error. Any ideas where the problem may lay?
Farhan Khan

@_date: 2019-02-18 00:19:03
@_author: Farhan Khan 
@_subject: Using Yubikey only to encrypt/sign 
Hi all,
How does one utilize *just* the yubikey (or OpenPGP smartcard in general) to
encrypt, sign, or decrypt? This might be in a scenario where I only have the
keys on my card but not on disk such as while traveling. I can confirm that
'gpg --card-status' lists the keys as present.
I am simulating this scenario by moving ~/.gnupg to another directory, but
running 'gpg --list-keys' does not list the list the key as present.
Please advise.
Farhan Khan
PGP Fingerprint: 7BEF 02AB 89AF 9581 194D 57F1 BF0F 750D B428 FFFF

@_date: 2019-02-18 05:51:17
@_author: Farhan Khan 
@_subject: Yubikey keytocard: "Bad secret key" 
This was it, loading a 2048-bit key works just fine
Thanks Andrew!
Farhan Khan
PGP Fingerprint: 7BEF 02AB 89AF 9581 194D 57F1 BF0F 750D B428 FFFF

@_date: 2019-02-18 20:35:30
@_author: Farhan Khan 
@_subject: Using Yubikey only to encrypt/sign 
Hey Andrew,
I was given the message "gpg: decryption failed: No secret key". I ran this:
mv .gnupg .gnupg.bak
gpg --card-status
cat encrypted_message | gpg --decrypt
This gave me the warning message:
gpg: encrypted with 2048-bit RSA key, ID BF0F750DB428FFFF, created 2019-02-18
      "Farhan Khan "
gpg: public key decryption failed: Invalid ID
gpg: decryption failed: No secret key
When I run gpg --list-secret-keys, I see the serial number listed for my card.
I suspect this is a gpg-agent issue?
Farhan Khan
PGP Fingerprint: 7BEF 02AB 89AF 9581 194D 57F1 BF0F 750D B428 FFFF

@_date: 2019-02-18 21:39:47
@_author: Farhan Khan 
@_subject: Using Yubikey only to encrypt/sign 
So, I have two tracks I'm taking at once, and perhaps you can provide some clarity on usage. My intention was to have the key on both my disk for use locally and on card for use while away from my computer.
A. I have a keyring with the secret key. I ran --edit-key, then keytocard. When I list --secret-keys, I get this:
$ gpg --list-secret-keys farhan at farhan.codes
sec>  rsa2048 2019-02-18 [SCEA] [expires: 2021-02-17]
      7BEF02AB89AF9581194D57F1BF0F750DB428FFFF
      Card serial no. = XXXX XXXXXXXX
uid           [ultimate] Farhan Khan Notice the serial card number. At this point, I cannot decrypt files without the key present. Has the secret key been removed from disk? If so, this means I can only have the key in one place at a time and risk losing it. Ideally I would like to have the secret key on my computer, which I trust, but not on other devices.
B. I moved ~/.gnupg and created a new keyring. Then, I imported my public key. This simulates a situation where I can access my public key from the internet, but will not store it on the machine. Here is the output you requested:
$ gpg --list-secret-keys farhan at farhan.codes
sec>  rsa2048 2019-02-18 [SCEA] [expires: 2021-02-17]
      7BEF02AB89AF9581194D57F1BF0F750DB428FFFF
      Card serial no. = 0006 04708272
uid           [ unknown] Farhan Khan I expect to be able to decrypt messages, but cannot:
$ echo test | gpg --encrypt -r farhan at farhan.codes | gpg --decrypt
gpg: BF0F750DB428FFFF: There is no assurance this key belongs to the named user
pub  rsa2048/BF0F750DB428FFFF 2019-02-18 Farhan Khan  Primary key fingerprint: 7BEF 02AB 89AF 9581 194D  57F1 BF0F 750D B428 FFFF
It is NOT certain that the key belongs to the person named
in the user ID.  If you *really* know what you are doing,
you may answer the next question with yes.
Use this key anyway? (y/N) y
gpg: encrypted with 2048-bit RSA key, ID BF0F750DB428FFFF, created 2019-02-18
      "Farhan Khan "
gpg: public key decryption failed: Invalid ID
gpg: decryption failed: No secret key
Please advise where my mistakes or incorrect assumptions are.
Farhan Khan
PGP Fingerprint: 7BEF 02AB 89AF 9581 194D 57F1 BF0F 750D B428 FFFF

@_date: 2019-02-24 19:34:02
@_author: Farhan Khan 
@_subject: Why Signing key part of Master key 
Hi all,
I am still working on setting up the "perfect" setup. When I created the master, it was [SC]. I
question, why is the signing key part of the master key? Why not have it be a subkey? Almost
everywhere I looked, the two were a single key except this site
( In my own tests the signing
functionality worked the same when they the signing key was a subkey versus a part of the master.
Are there any advantages of disadvantages either way?
Thank you,
Farhan Khan

@_date: 2019-02-24 19:53:53
@_author: Farhan Khan 
@_subject: Why Signing key part of Master key 
February 24, 2019 2:39 PM, "Kristian Fiskerstrand" I was under the impression that best practice was to keep the master key offline in cold storage.
If so, wouldn't that make having the signing key impossible to use?
And if so, is it possible to remove the Signing functionality from my Certificate key that I already generated?
Farhan Khan

@_date: 2019-03-03 21:51:51
@_author: Farhan Khan 
@_subject: Invalid IPC Response requiring gpg-agent restart 
Hi all,
I am ssh'ing into a FreeBSD box with my PGP key. I noticed that when I try to
decrypt or sign something, I get this error:
$ echo test | gpg -a --sign
gpg: signing failed: Invalid IPC response
-----BEGIN PGP MESSAGE-----
gpg: signing failed: Invalid IPC response
When I check the running processes, I see this:
gpg-agent --homedir /usr/home/user/.gnupg --use-standard-socket --daemon
My ~/.gpg-agent.conf is:
default-cache-ttl 300
max-cache-ttl 1200
If I kill this process and restart using "gpg-agent --daemon', everything works
fine. Is there a long-term solution to fix whatever settings is broken?
Farhan Khan
PGP Fingerprint: 1312 89CE 663E 1EB2 179C  1C83 C41D 2281 F8DA C0DE

@_date: 2019-03-05 14:39:37
@_author: Farhan Khan 
@_subject: PGP Anonymous Board Idea 
Hi all,
I had an idea for an anonymous PGP messaging board system and wanted to get
feedback on it or know if this idea has already been done.
In short, this would be an anonymous messaging system where you can post
encrypted messages. Anyone can access the encrypted message but obviously only
the one with the private key can decrypt it. Receiving users can filter for
messages by their key ID to see if they have received anything. The system also
replicates data across multiple servers so you can post a message on server A
and a user can view the message on server B.
Problems this solves:
* Increase anonyminity of the *sender*. No attributable data is stored for the
sender, such as email headers or IP addresses. The receiver can take steps to
be anonymous, such as using a different key than a primary, but ultimately the
receiver will require some form of a unique identifier.
* While you can already do this on a message board or Usenet, those systems are
not designed for this. They are not easily searchable or centralized. For
example, I cannot filter for all messages sent to 0x0123456789ABCDEF on an
online forum without a manual effort.
The general process of the server would be to receive a message via HTTPS,
determine its key ID, store it in a binary format to reduce the size and make
it searchable by the limited metadata in all encrypted messages. Finally, two or
more servers can replicate data on a periodic or in-real-time basis.
And there are obviously standard problems, such as spam, the size of the
database or a rogue server storing sender IP address data. But these are
standard problems in all such systems.
Obviously this would not be the next big method of communication, but an
interesting niche idea and it seems easy to produce a proof-of-concept.
Thoughts? I full anticipate being torn down :)
Farhan Khan
PGP Fingerprint: 1312 89CE 663E 1EB2 179C 1C83 C41D 2281 F8DA C0DE

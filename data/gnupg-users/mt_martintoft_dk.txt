
@_date: 2008-02-27 20:06:57
@_author: Martin Toft 
@_subject: ISO-8859-1 mails getting marked as UTF-8 
I use GnuPG together with mutt on Debian Etch. I prefer to use
ISO-8859-1 and have these lines in my .muttrc to accomplish that:
  set charset="iso-8859-1"
  set config_charset="iso-8859-1"
  set send_charset="iso-8859-1"
When sending a mail without using GnuPG (by selecting "clear" in mutt's
PGP menu), the above configuration results in the following content type
in the mail's header:
  Content-Type: text/plain; charset=iso-8859-1
However, when signing the mail using GnuPG, the content type changes:
  Content-Type: text/plain; charset=utf-8; x-action=pgp-signed
The body of the mail is also converted to UTF-8. My Danish characters
(??????) end up being displayed incorrect at the receiver, as mutt still
inserts the following line in the header:
  Content-Transfer-Encoding: 8bit
I have tried a lot of things to avoid the conversion to UTF-8,
unfortunately without luck:
  - Using the mutt and GnuPG packages that come with Debian Etch (mutt
    1.5.13 and GnuPG 1.4.6).
  - Compiling my own versions of mutt and GnuPG (./configure without any
    options other than --prefix, mutt 1.5.17, GnuPG 1.4.8).
  - Invoking gpg with "--charset iso-8859-1".
  - Invoking gpg with "--display-charset iso-8859-1".
  - Having "charset iso-8859-1" in ~/.gnupg/gpg.conf.
  - Exporting LC_ALL=en_DK before starting mutt.
  - Exporting LC_ALL=en_DK.iso88591 before starting mutt.
  - Invoking gpg with "LC_ALL=en_DK gpg ...".
  - Invoking gpg with "LC_ALL=en_DK.iso88591 gpg ...".
  - Searched Google (mostly without luck).
  - Searched the gnupg-users at gnupg.org archive (on marc.info, completely
    without luck).
I have run out of ideas. What else can I try? Can you spot something
wrong in what I have tried so far?
Please CC me when replying, as I'm not subscribed to the list. I have
attached my locale configuration and most of my .muttrc (the GnuPG
relevant part) inline. Thanks in advance.
1. locale configuration:
  $ locale -a
  C
  en_DK
  en_DK.iso88591
  POSIX
  $ locale
  LANG=en_DK
  LC_CTYPE="en_DK"
  LC_NUMERIC="en_DK"
  LC_TIME="en_DK"
  LC_COLLATE="en_DK"
  LC_MONETARY="en_DK"
  LC_MESSAGES="en_DK"
  LC_PAPER="en_DK"
  LC_NAME="en_DK"
  LC_ADDRESS="en_DK"
  LC_TELEPHONE="en_DK"
  LC_MEASUREMENT="en_DK"
  LC_IDENTIFICATION="en_DK"
  LC_ALL=
2. My .muttrc (the GnuPG relevant part):
  [...]
   from   set pgp_decode_command="gpg %?p?--passphrase-fd 0? --no-verbose --batch --output - %f"
  set pgp_verify_command="gpg --no-verbose --batch --output - --verify %s %f"
  set pgp_decrypt_command="gpg --passphrase-fd 0 --no-verbose --batch --output - %f"
  set pgp_sign_command="gpg --no-verbose --batch --output - --passphrase-fd 0 --armor --detach-sign --textmode %?a?-u %a? %f"
  set pgp_clearsign_command="gpg --no-verbose --batch --output - --passphrase-fd 0 --armor --textmode --clearsign %?a?-u %a? %f"
  set pgp_encrypt_only_command="pgpewrap gpg --batch --quiet --no-verbose --output - --encrypt --textmode --armor --always-trust --encrypt-to 0xC0589D9E -- -r %r -- %f"
  set pgp_encrypt_sign_command="pgpewrap gpg --passphrase-fd 0 --batch --quiet --no-verbose --textmode --output - --encrypt --sign %?a?-u %a? --armor --always-trust --encrypt-to 0xC0589D9E -- -r %r -- %f"
  set pgp_import_command="gpg --no-verbose --import -v %f"
  set pgp_export_command="gpg --no-verbose --export --armor %r"
  set pgp_verify_key_command="gpg --no-verbose --batch --fingerprint --check-sigs %r"
  set pgp_list_pubring_command="gpg --no-verbose --batch --with-colons --list-keys %r"   set pgp_list_secring_command="gpg --no-verbose --batch --with-colons --list-secret-keys %r"   set pgp_autosign=yes
  set pgp_sign_as=0xC0589D9E
  set pgp_replyencrypt=yes
  set pgp_timeout=1800
  set pgp_good_sign="^gpg: Good signature from"
  set pgp_create_traditional=yes
  [...]

@_date: 2008-02-28 22:12:31
@_author: Martin Toft 
@_subject: ISO-8859-1 mails getting marked as UTF-8 
============================== START ==============================
Thank you very much for the elaborate explanations. I see now that my
decision to switch from PGP/MIME to inline signing a while ago caused
the problem.
I'll switch back to PGP/MIME and ignore recipients running Outlook. I
don't want to spend my time working around shortcomings in crap
Thanks again.


@_date: 2003-07-23 22:41:02
@_author: James R. Hendrick 
@_subject: Script with sensitive info 
If something is encrypted, to decrypt it you need to provide access to =
the "secret" (password, etc.)
If this script has to access encrypted data, it will need to access the =
key to unlock that data.
You *can* store that key in a file (but then you are at the mercy of the =
rest of the system security to protect that key).
You *can* require that a human input that key when the script starts up =
(maybe once per system boot). This still requires the key stay in memory =
in the clear (better than disk, but still possible to access).
Your choice.

@_date: 2003-07-24 15:04:02
@_author: James R. Hendrick 
@_subject: Script with sensitive info 
You should look at Perl modules related to GnuPG.=20
 has a number (if you search on gnupg)
I haven't had any personal experience using them, but it looks fairly =
straightforward. The one that looks most promising is GnuPG::Interface. =
It has functions for working with filehandles (needed to pass gnupg the =
passphrases, etc.) That way you could read the passphrase on startup and =
use it internally in the script.
Maybe someone with more experience directly using this module can chime =

@_date: 2003-07-30 13:14:02
@_author: James R. Hendrick 
@_subject: GPG decryption within shell scripts. - another option? 
I agree that giving key passphrases to an automated process puts the
burden of security elsewhere (like within the security of the system
where the passphrase is stored for example).
I disagree that it removes whatever security the passphrase gives.
Consider this process as a possible workaround:
Use two pairs of keys in the file exchange process.
Automated Key "A" - used for encryption/decryption - passphrase stored
on disk - key limited to short lifetime
Admin Key "A" - used to sign Automated Key "A" and Automated Key "B" -
passphrase stored in admin's brain :-)
Automated Key "B" - used for encryption/decryption - passphrase stored
on disk - key limited to short lifetime
Admin Key "B" - used to sign Automated Key "A" and Automated Key "B" -
passphrase stored in admin's brain :-)
This way the automated processes use the automated keys whose
passphrases are stored on disk which should be as well protected as the
policies of the systems allow.
The automated keys timeout according to whatever is deemed appropriate
for the data, the systems involved, and the paranoia of the admins.
Before they expire, new automated keys are generated/exchanged/signed
(note: this can be done securely using the admin keys)
If compromise is suspected, the automated key is revoked and a new one
generated/signed "early".
Admittedly not a totally seamless process, but:
 - it eliminates the need for encryption/authentication on the transfer
 - it provides for file-level security with built-in timeout for the
encrypted files
 - it allows an override by admins if compromise is suspected
 - it only requires GnuPG or something compatible on both ends
 - it assumes nothing about the transfer method (ftp, email, shared
filesystems, etc. etc. all work)
Clearly using human authentication is much better, but this does provide
the ability to do lots of files "after-hours".
Just another possibility.
-----Original Message-----
Sent: Tuesday, July 29, 2003 6:51 PM
Any automated process that's going to use your key must have complete
information to unlock the key.  Thus, automating the process removes
whatever security the passphrase gives.
    =
Your choices are:
  - Don't automate the process.  If you want the security provided by
    a passphrase, you must get a human to interactively authenticate
    using it.
  - Don't encrypt the file.  You might as well not encrypt the file at
    all if you're not going to interactively check that an authorised
    person is accessing it.
  - Don't set a passphrase on the key.  This results in a far less
    secure key, but it will at least not give you false illusions of
    security.
In short: once you automate the use of crypto, your authentication model
is reduced to the one used to access the files involved in the automated
process.  In which case, why use encryption at all?
 \     "I thought I'd begin by reading a poem by Shakespeare, but then |
  `\        I thought 'Why should I? He never reads any of mine.'"  -- |
_o__)                                                   Spike Milligan |
Ben Finney

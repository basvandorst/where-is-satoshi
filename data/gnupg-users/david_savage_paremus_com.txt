
@_date: 2009-10-20 15:41:46
@_author: David Savage 
@_subject: gpg-agent "unknown value for WHAT" 
Hi there,
I'm attempting to generate a 4096bit RSA key using gnupg 2.0.12 and
gpg-agent 2.0.11 but I'm getting an error message prior to entering
the passphrase:
"gpg: problem with the agent: Not supported"
Having done a little digging I decided to enable --debug-all to see if
this would shed any light on the problem - unfortunately the error
message means very little on first inspection - hence this mail.
"gpg-agent[66760.6] DBG: -> ERR 67109144 parameter conflict - unknown
value for WHAT"
I've included the full session output below with certain fields XXXXX'd out...
Mac OS X 10.5.8
gnupg2 installed via darwin ports
personal-digest-preferences SHA512
cert-digest-algo SHA512
default-preference-list SHA512 SHA384 SHA256 SHA224 AES256 AES192 AES
CAST5 ZLIB BZIP2 ZIP Uncompressed
Any help or suggestions of where to look further appreciated.
Session output...
bash-3.2$ gpg-agent --daemon --debug-all /bin/bash
gpg-agent[66759]: NOTE: no default option file
gpg-agent[66759]: listening on socket `/tmp/XXXXXXXXXXXX/S.gpg-agent'
bash-3.2$ gpg2 --gen-key
gpg (GnuPG) 2.0.12; Copyright (C) 2009 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Please select what kind of key you want:
   (1) RSA and RSA (default)
   (2) DSA and Elgamal
   (3) DSA (sign only)
   (4) RSA (sign only)
Your selection? 1
RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (2048) 4096
Requested keysize is 4096 bits
Please specify how long the key should be valid.
         0 = key does not expire
        = key expires in n days
      w = key expires in n weeks
      m = key expires in n months
      y = key expires in n years
Key is valid for? (0)
Key does not expire at all
Is this correct? (y/N) y
GnuPG needs to construct a user ID to identify your key.
Real name: XXXXXXXXX
Email address: XXXXXXXXXX
Comment: CODE SIGNING KEY
You selected this USER-ID:
    "XXXXXXX (CODE SIGNING KEY) "
Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O
You need a Passphrase to protect your secret key.
gpg-agent[66760]: handler 0x302780 for fd 6 started
gpg-agent[66760.6] DBG: -> OK Pleased to meet you
gpg-agent[66760.6] DBG: <- RESET
gpg-agent[66760.6] DBG: -> OK
gpg-agent[66760.6] DBG: <- OPTION display=/tmp/launch-JBTxKt/:0
gpg-agent[66760.6] DBG: -> OK
gpg-agent[66760.6] DBG: <- OPTION ttyname=/dev/ttys002
gpg-agent[66760.6] DBG: -> OK
gpg-agent[66760.6] DBG: <- OPTION ttytype=xterm
gpg-agent[66760.6] DBG: -> OK
gpg-agent[66760.6] DBG: <- OPTION lc-ctype=en_GB.UTF-8
gpg-agent[66760.6] DBG: -> OK
gpg-agent[66760.6] DBG: <- OPTION lc-messages=en_GB.UTF-8
gpg-agent[66760.6] DBG: -> OK
gpg-agent[66760.6] DBG: <- OPTION allow-pinentry-notify
gpg-agent[66760.6] DBG: -> OK
gpg-agent[66760.6] DBG: <- GETINFO cmd_has_option GET_PASSPHRASE repeat
gpg-agent[66760.6] DBG: -> ERR 67109144 parameter conflict - unknown
value for WHAT
gpg: problem with the agent: Not supported
gpg: Key generation canceled.

@_date: 2009-10-20 19:04:14
@_author: David Savage 
@_subject: gpg-agent "unknown value for WHAT" 
Firstly, thx for the quick replies.
I'm in the process of updating gpg using the urls Charly forwarded in
the previous email - I guess I could try to just update the gpg-agent
in use on my machine from that release then stick with the mac port
version of gpg? Just one less variable to tidy up?
Sound's like a patch is needed to mac ports in any case.
I'll try pinging a mail over there and see if there's any chance they
can update.

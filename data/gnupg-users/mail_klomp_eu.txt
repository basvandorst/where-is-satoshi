
@_date: 2010-12-09 14:38:48
@_author: Sven Klomp 
@_subject: multiple subkeys and key transition 
Hi Ben,
I had a similar situation: I started to use a CryptoStick, which can only handel RSA keys. After some discussions [1], I revoked the ElGamal and have now only one encryption key in my keyring.
[1]

@_date: 2010-11-05 11:58:13
@_author: Sven Klomp 
@_subject: Problems with two active encryption subkeys 
since I bought a Crypto Stick [1], I had to add an additional RSA subkey for encryption, since the stick doesn't support Elgamal. Thus, I have two encryption keys in my public keyring now. How does gpg decide which one to use for encryption? I thought, that every key is used and I can decide to use the Elgamal or RSA key for decryption. But it seems, that only one subkey is used (RSA) for encryption.
Do I have a general misunderstanding of the concept?
[1]

@_date: 2010-11-10 15:38:39
@_author: Sven Klomp 
@_subject: Problems with two active encryption subkeys 
Does nobody have a hint for me? Maybe my description was a little bit vague. Let's start again :-)
I have a public key configuration as follows:
Primary Key (DSA for signing other keys)
- Sub-key 1 (Elgamal for encryption)
- Sub-key 2 (RSA for signing mails/files)
- Sub-key 3 (RSA for encryption)
How does GnuPG decide, what encryption key should be used? In my tests, a file or mail is always encrypted with sub-key 3. But why? I'm afraid, that some other applications may choose the Elgamal sub-key... I thought a normal behaviour would be to use all valid sub-keys for encrypting files.
Is it only allowed to have one valid encryption sub-key?

@_date: 2010-11-11 09:50:30
@_author: Sven Klomp 
@_subject: Problems with two active encryption subkeys 
So the decision is done in the implementation and not covered in  the OpenPGP standard. Thus, other software may behave differently.
I think, I have to revoke one key to avoid problems...
Thanks for pointig this out.

@_date: 2010-11-11 13:33:35
@_author: Sven Klomp 
@_subject: Problems with two active encryption subkeys 
Since I don't have both keys at hand all the time. I have the RSA key on the Crypto Stick. However, the Elgamal is stored in a safe place.

@_date: 2010-11-16 11:15:22
@_author: Sven Klomp 
@_subject: Testing with card, some questions 
This seems to be a bug of scdaemon. Kill the daemon and gpg -card-status will have no information. Insert the card and the informations is available...
You could also try to decrypt or sign a file, while the card is not inserted. It should fail...

@_date: 2010-11-16 12:29:01
@_author: Sven Klomp 
@_subject: Fwd: Re: Testing with card, some questions 
I foward this message to the list. It seems that reply-to of the mailing-list configuration is not correctly set...
----------  Forwarded Message  ----------
Also, when having card OUT, in GPA GUI card-key is present, with also the icon indicating it is indeed a cmartcard key and when doing the backup the resulting file indeed have both public and private keys in it.. It feels like GPG has the keys in ordinary key files, but indicates nonetheless that the keys originates from the card, hence the icon, and is either way able to make the complete backup.
There is a slight risk of confusion here. There is the risk that I, the user, feels comfortable that the key is in (and only in) the card when that icons shows in the GUI.
I don't understand how that could be unless I somehow accidently and without realizing it imported the newly generated - and backed up - keys when looking at the backup file just after the smartcard keys were generated. And even so, perhaps somehow the user should be warned that key is not 'only' on the card, Perhaps I should kill the keys and test again, without making backups this time.. Any other notes on the subject welcome.

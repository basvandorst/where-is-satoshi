
@_date: 2007-08-20 20:26:16
@_author: James Davis 
@_subject: GnuPG & OpenSSH 
Steps 1-4 on this page still apply if you're not using a smart card. You'll want to use ssh-add to add keys rather than expect it to pick them up automatically though.
That and gpg-agent's man page were enough to get me familiar with these

@_date: 2007-08-22 13:02:27
@_author: James Davis 
@_subject: Questions about generating keys 
- People may have problems searching for your key on a keyserver if you
don't have your e-mail address in there.
- E-mail clients using PGP won't be able to automatically know which key
to use when e-mailing you - they'd have to setup specific mappings.
Looking at the archives of this very list, it's mainly historial.

@_date: 2007-07-09 15:52:34
@_author: James Davis 
@_subject: Generating an authentication key for smart card 
I've been playing with generating keys for transferal to a smart card.
This way I can make backups of my keys by exporting them before placing
them on the card.
Creating 1024-bit RSA keys for signing and encryption is straight
forward enough but what do I need to do to generate a (sub?)key to use
for authentication which I can later transfer to the card? Or am I
forced to create an authentication key on the card?

@_date: 2007-06-08 15:52:10
@_author: James Davis 
@_subject: Importing backed up card generated key 
I've just generated a key pair using my smartcard and asked it to make a
backup which it did. I'm doing a practice restore to see how the
procedure works and I'm a little stuck. I can import my new public key
onto my keyring but when I try to import the secret key it fails to do
so and I get the following output.
$ gpg --import james.davis at ja.net-20070608-secret.gpg
gpg: key D7DDFF42: no user ID
gpg: Total number processed: 1
gpg:       secret keys read: 1
What should I be doing? :-)

@_date: 2007-06-18 11:10:57
@_author: James Davis 
@_subject: Importing backed up card generated key 
Sorry to bring up this thread again but I've still not been able to work
out what I should be doing and I'd appreciate any help you can give me
as it's holding back my adoption of the smart card.

@_date: 2007-06-19 14:24:37
@_author: James Davis 
@_subject: Problems generating keys on card "`SCD WRITEKEY' to agent failed: 
I'm sure I'll get there eventually. I tried generating some new keys on
the card today and after it appeared to successfully generate the keys
this error came up. Here's part of the output from gpg.
    "James Davis "
Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O
You need a Passphrase to protect your secret key.
Not enough random bytes available.  Please do some other work to give
the OS a chance to collect more entropy! (Need 46 more bytes)
gpg: sending command `SCD WRITEKEY' to agent failed: ec=4.281
gpg: storing key onto card failed: general error
Key generation failed: general error
I've turned on logging in scdaemon but there's nothing in there that
looks obviously wrong at first glance.

@_date: 2007-06-21 16:10:24
@_author: James Davis 
@_subject: Problems generating keys on card "`SCD WRITEKEY' to agent failed: 
Further to my last e-mail this only occurs when I ask for a backup copy
of my key to be kept. Keeping everything on the card causes no problems.

@_date: 2007-06-22 11:11:45
@_author: James Davis 
@_subject: Importing backed up card generated key 
I'm making a little progress on this. Someone suggested it was because
gpg was confused by the existing secret key it believed was on the card
but deleting my secret key before trying to import it from the backup
didn't help.
I can use the backed up key using
--secret-keyring ~/sk_B6D49AF9C7335BD1.gpg
and copying sk_B6D49AF9C7335BD1.gpg over ~/.gnupg/secring.gpg works too
but neither are entirely practical. I've got other secret keys which I'd
like to avoid overwriting if it's just my card I've lost. I thoguht I
could do something like
$ gpg -a --secret-keyring ~/sk_B6D49AF9C7335BD1.gpg --export-secret-key
C7335BD1 > mysecretkey.asc but again I end up with a secret key that gpg
refuses to import with an error "gpg: key C7335BD1: no user ID".
Is there some way I can force a user ID upon gpg when I import the key?

@_date: 2007-06-25 19:14:57
@_author: James Davis 
@_subject: Problems svn+ssh+gpg(-agent)+smartcard 
There are some circumstances (bugs!) under which the scdaemon process stops working.  Kill that process and try again; does that help?

@_date: 2007-05-22 11:11:58
@_author: James Davis 
@_subject: Problems using SCR335 and gnupgp 
I've recently bought a SCR335 card reader and gnupg smartcard. I'm
having difficulties getting the card reader working on my Debian 4.0
system with gnupg 1.4.6
I've followed the instructions at
 but
running --card-status gives the following error.
# gpg --card-status
winscard_clnt.c:3232:SCardCheckDaemonAvailability() PCSC Not Running
gpg: pcsc_establish_context failed: no service (0x8010001d)
gpg: card reader not available
gpg: OpenPGP card not available: general error
dmesg gives the following on unplugging and replugging in the reader
usb 5-3.2: USB disconnect, address 7
usb 5-3.2: new full speed USB device using ehci_hcd and address 8
usb 5-3.2: configuration  chosen from 1 choice
and lsusb correctly shows the reader
cressida:~# lsusb
Bus 005 Device 008: ID 04e6:5115 SCM Microsystems, Inc. SCR335 SmartCard
Any idea on where I should be looking to solve my problem?

@_date: 2007-05-22 14:28:09
@_author: James Davis 
@_subject: Problems using SCR335 and gnupgp 
Please ignore my last message. Some other software was stealing away the
reader :-) It's now working fine.

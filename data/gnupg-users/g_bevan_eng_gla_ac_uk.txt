
@_date: 2003-08-05 18:56:01
@_author: Geraint Paul Bevan 
@_subject: Works now (Encryption with expired key?) 
Hash: SHA1
I've finally resolved the remaining problems I was having communicating
with the user of the iT_SEC plugin.
It seems that the key sent by their key server contains two keys: an
encryption key and a signing key. When sending a message, I
(mozilla/enigmail/gnupg) was using their signing key to encrypt the
message, and the recipient was unable to decrypt it. Deleting the
signing key from my keyring forced the use of the correct key. With
appropriate options set, everything then worked.
FWIW (in case anyone has similar problems) the options that worked for
me are:
cipher-algo 3DES or cipher-algo IDEA
armour (I don't know if this one is necessary)
There seems to be a slight oddity that messages can only be decrypted at
the other end if I don't sign them, but I can live with this limitation.
Thanks for all the help,

@_date: 2003-07-18 10:45:04
@_author: Geraint Paul Bevan 
@_subject: Encryption with expired key? 
I am very new to gpg, so apologies if this is a stupid question. I've read all the documentation I could find, but haven't yet found an answer.
I have been given a key, which I have been assured works fine with PGP. However, if I try encrypting a file with it using the command:
'gpg --encrypt -r name file'
the encryption fails with the error message:
gpg: name: skipped: unusable public key
gpg: file: encryption failed: unusable public key
Looking at the key with --edit-key, it shows
pub  1024R/  created: 2003-03-12 expires: 2003-03-12 trust: -/e
sub  1024R/  created: 2003-03-12 expires: 2006-03-11
Is gpg giving me correct behaviour, or is this a bug? More importantly, how can I encrypt a message with this key?
Thanks in advance,

@_date: 2003-07-18 11:46:22
@_author: Geraint Paul Bevan 
@_subject: Encryption with an expired key? 
Firstly, I am very new to gpg, so apologies if this is a stupid question. I've read all the documentation I could find, but haven't yet found an answer.
I have been given a key, which I have been assured works fine with PGP. However, if I try encrypting a file with it using the command:
'gpg --encrypt -r name file'
the encryption fails with the error message:
gpg: name: skipped: unusable public key
gpg: file: encryption failed: unusable public key
Looking at the key with --edit-key, it shows
pub  1024R/  created: 2003-03-12 expires: 2003-03-12 trust: -/e
sub  1024R/  created: 2003-03-12 expires: 2006-03-11
Is gpg giving me correct behaviour, or is this a bug? More importantly, how can I encrypt a message with this key?
Thanks in advance,

@_date: 2003-07-18 11:46:32
@_author: Geraint Paul Bevan 
@_subject: Encryption with an expired key? 
I am very new to gpg, so apologies if this is a stupid question. I've read all the documentation I could find, but haven't yet found an answer.
I have been given a key, which I have been assured works fine with PGP. However, if I try encrypting a file with it using the command:
'gpg --encrypt -r name file'
the encryption fails with the error message:
gpg: name: skipped: unusable public key
gpg: file: encryption failed: unusable public key
Looking at the key with --edit-key, it shows
pub  1024R/  created: 2003-03-12 expires: 2003-03-12 trust: -/e
sub  1024R/  created: 2003-03-12 expires: 2006-03-11
Is gpg giving me correct behaviour, or is this a bug? More importantly, how can I encrypt a message with this key?
Thanks in advance,

@_date: 2003-07-18 12:06:02
@_author: Geraint Paul Bevan 
@_subject: Encryption with expired key? 
Thanks for the reply. It is rather unfortunate because the key works with PGP and I am not really in a position to insist that the recipient alters their key.
Could anyone who has some knowledge of the gpg internals please give me some indication of what parts of the code I would need to edit to override the check for expiry?

@_date: 2003-07-28 18:33:17
@_author: Geraint Paul Bevan 
@_subject: Encryption with expired key? 
This is a multi-part message in MIME format.
 name="gnupg-getkey.c.diff"

@_date: 2003-07-28 20:07:02
@_author: Geraint Paul Bevan 
@_subject: Encryption with expired key? 
It agrees with you about an 18 m expiry time on the signature (not that I doubted you).
:public key packet:
:signature packet: algo 1, keyid

@_date: 2003-07-29 12:16:02
@_author: Geraint Paul Bevan 
@_subject: Encryption with expired key? 
>
 > Workaround for you: Use gpgsplit on the key, delete the firest
 > signature packet and the cat everything back together, delete the ey
 > from your keyring and import the newly created key.
 >
It seems that gpgsplit doesn't like this key either:
gpgsplit: invalid CTB 2d
Could this be caused by the expiry time problem, or does this indicate
that something else is wrong?

@_date: 2003-07-31 22:26:02
@_author: Geraint Paul Bevan 
@_subject: importing keys with expired signatures into gnupg 
============================== START ==============================
 > recently there was a description about about v3 key with an expired  >  causing a problem with its importation into gnupg
 >
 > [1] is this only for v3 keys, or all key types ?
 >
 > [2] can this be maliciously exploited by signing a key with a signature
 > set to expire for the next day, uploading the key, and then causing  > for anyone trying to import it?
If you are referring to the problems that I have been having recently, I
have just today been sent another copy of the key (v3) from my
correspondent's corporate key server; this one didn't have the dodgy v4
expired signature and it appeared to import flawlessly.
(I'd just like to take this opportunity to thank you all for the
assistance I have been given, particularly Werner Koch)
This dud signature certainly caused me a lot of problems, but it was a
signature by the owner of the key, rather than just that of a random
stranger. I don't know if that would make any difference. It might not
be a bad idea to have an "--ignore-expire" option for gnupg however
(although having looked closely at the code, I don't think that I am up
to the task of contributing to it at the moment, sorry)
By the way, I am still having problems with my communications; although
I can encrypt messages, this particular recipient can't decrypt the
messages (certainly secure!). I wonder if it may be the options that I
am using (algorithm, compression, ascii, etc.) that are causing the
problem. I know that tools from iT_SEC and MS Outlook are being used at
the other end. Does anyone have any experience of using GnuPG to
communicate with the iT_SEC stuff? Any hints would be greatly appreciated.

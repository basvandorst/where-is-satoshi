
@_date: 2010-04-12 12:45:31
@_author: Michael E. Strout 
@_subject: Invalid Marker Packet issue using PGP to encrypt using GnuPG 
Hi all,
                We're using GnuPG to both create an asynchronous key pair, the public key of which we provide to clients, and to decrypt the files encrypted with that certificate after its been transfered.  One particular client is uploading files which return an "Invalid Marker Packet" error when I try to decrypt them.
I've tried installing the newest versions of gpg, but it doesn't matter whether I'm using 1.4.9 or 2.0.12, I get an "invalid marker packet" error.
I've opened up an older upload which I was able to decrypt and the most recent upload in a hex editor and can see that the bytes following the PGP in the marker packet are different,
 i.e. the one in the old file is 50 47 50 c1 c0 4c which reads as P G P 193 192 76 or PGP 12697676 or PGP??L
While the one in the new file is 50 47 50 C1 C1 4E  which reads as P G P 193 193 78 or PGP 12697934 or PGP??N
I figure the client is using PGP software (hence the marker packet) and may have upgraded their software since the last successfully decrypted upload, but I thought they could put anything they wanted in the marker packet and gpg would be fine...
Has anyone else seen this and know of a way past it?
- CONFIDENTIALITY NOTICE -
This e-mail message from ClearStructure Financial Technology, LLC is intended only for the individual or entity to which it is addressed. This e-mail may contain information that is privileged, confidential and exempt from disclosure under applicable law. If you are not the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you received this e-mail by accident, please notify the sender immediately and destroy this e-mail and all copies of it. We take steps to protect against viruses but advise you to carry out your own checks and precautions as we accept no liability for any which remain. We may monitor emails sent to and from our server(s) to ensure regulatory compliance to protect our clients and business.

@_date: 2010-04-12 18:07:03
@_author: Michael E. Strout 
@_subject: Invalid Marker Packet issue using PGP to encrypt using GnuPG 
Both Files begin with A8 03 50 47 50
Michael Everett Strout
Systems Administrator & Software Engineer
ClearStructure Financial Technology, LLC
Michael.Strout at clearstructure.com
+1 203 205 2720 (direct)
+1 203 942 5031 (mobile)
+1 203 205 2700 (main)
+1 203 205 2739 (fax)
Transparent is Good. Clear is Better.
-----Original Message-----
Sent: Monday, April 12, 2010 18:01
The only valid marker packet contains exactly 3 bytes: P, G, and P.  Given that the following byte is C1, it looks like that's the beginning of the next packet, rather than part of the marker packet.  C1 would be the encrypted session key packet, which makes sense at that point in the document.
Can you tell me a few bytes from *before* the P, G, P?  Perhaps the length is wrong.
This email has been scanned by the MessageLabs Email Security System.
For more information please visit - CONFIDENTIALITY NOTICE -
This e-mail message from ClearStructure Financial Technology, LLC is intended only for the individual or entity to which it is addressed. This e-mail may contain information that is privileged, confidential and exempt from disclosure under applicable law. If you are not the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you received this e-mail by accident, please notify the sender immediately and destroy this e-mail and all copies of it. We take steps to protect against viruses but advise you to carry out your own checks and precautions as we accept no liability for any which remain. We may monitor emails sent to and from our server(s) to ensure regulatory compliance to protect our clients and business.

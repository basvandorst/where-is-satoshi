
@_date: 2014-02-08 18:58:10
@_author: Luis Ressel 
@_subject: Using a Gemalto IDBridge K30 with the internal CCID driver 
I'm having trouble setting up GnuPG to use my new smartcard. I'm using
GnuPG 2.0.22 and a Gemalto IDBridge K30 (aka USB Shell Token v2). More
specifically, I can't get it to work using scdaemon's in-built CCID
driver. I've attached scdaemon's log; the error seems to be
"ccid-driver: invalid response for S-block (Change-IFSD)". Does anyone
have an idea about this?
I'll use pcscd if I have to, but I'd rather prefer the internal driver
if it's possible to fix this problem.
Luis Ressel
Luis Ressel GPG fpr: F08D 2AF6 655E 25DE 52BC  E53D 08F5 7F90 3029 B5BD

@_date: 2014-02-08 19:19:33
@_author: Luis Ressel 
@_subject: Using a Gemalto IDBridge K30 with the internal CCID driver 
I'm having trouble setting up GnuPG to use my new smartcard. I'm using
GnuPG 2.0.22 and a Gemalto IDBridge K30 (aka USB Shell Token v2). More
specifically, I can't get it to work using scdaemon's in-built CCID
driver. I've attached scdaemon's log; the error seems to be
"ccid-driver: invalid response for S-block (Change-IFSD)". Does anyone
have an idea about this?
I'll use pcscd if I have to, but I'd rather prefer the internal driver
if it's possible to fix this problem.
Luis Ressel
Luis Ressel GPG fpr: F08D 2AF6 655E 25DE 52BC  E53D 08F5 7F90 3029 B5BD

@_date: 2014-02-09 16:26:08
@_author: Luis Ressel 
@_subject: Difference between setpref and options in the configuration 
You missed a detail here. As the man page says, the personal-* settings
aren't used for creating keys, but for *overriding* preferences of
other keys while encrypting. You want "default-preference-list". This
is the section in my gpg.conf:
cert-digest-algo SHA512
default-preference-list SHA512 SHA384 SHA256 SHA224 AES256 AES192 AES TWOFISH CAMELLIA256 CAMELLIA192 CAMELLIA128 CAST5 BZIP2 ZLIB ZIP Uncompressed
personal-cipher-preferences AES256 AES192 AES TWOFISH CAMELLIA256 CAMELLIA192 CAST5
personal-compress-preferences BZIP2 ZLIB ZIP Uncompressed
personal-digest-preferences SHA512 SHA384 SHA256 SHA224
s2k-cipher-algo AES256
s2k-digest-algo SHA512
(I added Camellia and CAST5 because 3DES gets forcibly added at the end
and I'd still prefer those two over 3DES...)
Luis Ressel
Luis Ressel GPG fpr: F08D 2AF6 655E 25DE 52BC  E53D 08F5 7F90 3029 B5BD

@_date: 2014-02-13 21:13:22
@_author: Luis Ressel 
@_subject: Subject: openpgp card and basiccard RNG 
You've got to sign an NDA to learn about the implementation of this
security device which is supposed to be open? That sounds nasty and
basically means there could even be backdoors in the implementation, not
only in the underlying system...
Luis Ressel

@_date: 2014-02-15 22:17:39
@_author: Luis Ressel 
@_subject: gpg-agent chooses wrong identity when picking SSH key 
Adding "IdentitiesOnly no" to the top of your ~/.ssh/config should
Luis Ressel

@_date: 2014-02-17 13:21:06
@_author: Luis Ressel 
@_subject: gpg asks for the same passphrase each time it uses new subkey 
Huh? It shouldn't be neccessary at all to enter your passphrase for
Luis Ressel GPG fpr: F08D 2AF6 655E 25DE 52BC  E53D 08F5 7F90 3029 B5BD

@_date: 2014-11-11 23:49:20
@_author: Luis Ressel 
@_subject: GnuPG 2.1.0: --refresh-keys regression 
One of the changes introduced with GnuPG 2.1 -- namely, using dirmngr
for key retrieval -- has caused some problems for me. First of all, I'm
not able to use gpg --refresh-keys anymore, as dirmngr requests all of
the keys from the keyserver at once, instead of one-by-one as GnuPG 2.0
For keyrings with more than approx. 70 keys, the keyserver
(sks-keyservers.net) denies the request, thereby causing the error
    gpg: keyserver refresh failed: Too many objects
and failure to receive any key updates.
I assume keymngr should handle this in a better way (or is it wrong for
the keyservers to deny such requests?)
dirmngr also seems to have problems with hkps certificate checking for
keyserver addresses with round-robin DNS, but I need to examine this
further before I can provide details.
Luis Ressel

@_date: 2016-12-15 23:28:09
@_author: Luis Ressel 
@_subject: [Announce] Libgcrypt 1.7.5: secmem trouble 
since I've upgraded to libgcrypt 1.7.5, gpg emits the warning 'Warning:
using insecure memory!' (and hence refuses to run, since my config file
includes 'require-secmem').
Any hints for debugging this issue would the greatly appreciated.
Luis Ressel

@_date: 2016-12-17 16:14:27
@_author: Luis Ressel 
@_subject: [Announce] Libgcrypt 1.7.5: secmem trouble 
Indeed. Looks like I mixed up those versions; it was the 1.7.3 -> 1.7.4
upgrade which caused the issue, and 1.7.5 fixes it again.
Thanks for your help, and sorry about the noise!
Luis Ressel

@_date: 2017-01-20 20:41:45
@_author: Luis Ressel 
@_subject: Fresh OS installation 
This filesystem entry just reprents the socket that gnupg uses to
communicate with gpg-agent. It's not a file, and no data is stored in
Luis Ressel

@_date: 2017-01-20 23:29:55
@_author: Luis Ressel 
@_subject: Choosing between multiple signing keys 
today I created a new key with two separate signing keys and moved
those to my two yubikeys. But now, gpg insists on always using the
second of those subkeys for signing operations, even when the yubikey
with the first subkey is plugged in.
How can I explicitly specify which subkey should be used? I've tried
passing in the subkey ID via the '-u'-option, but this didn't work.
I'm using GnuPG 2.1.17.
Luis Ressel

@_date: 2017-01-21 01:26:14
@_author: Luis Ressel 
@_subject: tofu: Missing entry in the bindings table for new key 
I created a new key today. When I tried to verify a signature made by
this key, I got the error message
gpg: Signature made Sat Jan 21 01:07:59 2017 CET
gpg:                using RSA key DEADBEEF
gpg: Good signature from "foo " [ultimate]
gpg: aka "foo " [ultimate]
gpg: error updating TOFU database: NOT NULL constraint failed: signatures.binding
gpg: TOFU: error registering signature: General error
Apparently no entry for my key/userid had been recorded in the bindings
table. I was of course able to fix this by calling
"gpg --tofu-policy good DEADBEEF", but it still looks like a bug to me.
Any ideas how this could happen?
Potentially relevant facts:
* The new key's userid collides with that of my old key.
* I'm using the setting "tofu-default-policy unknown".
Luis Ressel

@_date: 2017-01-21 18:11:11
@_author: Luis Ressel 
@_subject: Choosing between multiple signing keys 
Thanks for the hint! This did indeed fix my problem.

@_date: 2017-01-24 12:36:44
@_author: Luis Ressel 
@_subject: tofu: Missing entry in the bindings table for new key 
This was easier to reproduce than I expected. I've attached the
transcript of a shell session demonstrating the problem. Manually
calling "gpg --tofu-policy good $KEYID" fixes the issue.
I'm using gpg 2.1.17; I haven't checked yesterday's release yet.

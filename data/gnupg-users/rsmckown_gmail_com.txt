
@_date: 2017-04-09 10:07:17
@_author: Steve McKown 
@_subject: Passphrase cache w/Yubikey varies: sign vs auth 
I'm using a Yubikey NEO with GnuPG 2.1.11 on Ubuntu 16.04 LTS.
Everything is working fine except that caching of the passphrase works
differently depending upon whether the first operation is sign or
authenticate.  I can show this with two GnuPG operations: sign a file
and ssh key-based login (I'm using gpg-agent.conf enable-ssh-support).
If after inserting the Yubikey I sign first and then ssh second, both
operations ask for the passphrase via pinentry.
  gpg2 --clearsign somefile  # pinentry dialog
  ssh someserver             # pinentry dialog
I'm not sure why the ssh login above asks again for the passphrase.
If after re-inserting the Yubikey I do ssh before sign, the sign uses
the passphrase cached from the previous ssh, as expected:
  ssh someserver             # pinentry dialog
  gpg2 --clearsign somefile  # NO pinentry dialog
It is true that the passphrase entered on first sign is cached, because
if I run two back to back the second doesn't ask.  Again, after
re-inserting the Yubikey:
  gpg2 --clearsign somefile  # pinentry dialog
  gpg2 --clearsign somefile  # NO pinentry dialog
The pinentry dialog for signing includes the text "[sigs done:NNN]" that
is not present for auth or crypt operations.
Can someone explain why ssh after sign asks for the passphrase again,
and what I might be able to do to avoid this condition?  It's not a big
deal, but I do wonder if it suggests a misconfiguration on my part.

@_date: 2017-04-09 22:56:09
@_author: Steve McKown 
@_subject: Passphrase cache w/Yubikey varies: sign vs auth 
Thanks for the clear and informative answer.  Much appreciated!

@_date: 2019-12-31 15:46:27
@_author: Steve McKown 
@_subject: Syncing GnuPG data between computers 
============================== START ==============================
I use different computers at different times, either my office computer
or one on-site provided by a customer.
I want to be able to propagate changes I make to GnuPG on one computer
to other computer I use, without resorting to duplicating the changes
I currently only manage one GnuPG identity, and its private key material
is stored on a smart card (Yubikey).  So I think I'm only caring about
other's keys, trust relationships, and the like.
I do this kind of thing for several data types today, for example my
"dot" files.  I use a 'master copy' scheme, where changes made on one
computer are "pushed" to the master copy, and other computers' copies
can be updated by "pulling" from the master copy.
A GnuPG example.  If I import, verify, and sign some new keys, I'd
"push" from that computer and then later "pull" from a different
computer so I could use those new keys there.
The GnuPG configuration files are simple enough, but the database files
are another story I imagine.
My search-fu keeps suggesting using gpg import and export, like:
Has anyone else done something like this?  Any references or suggestions
are appreciated.

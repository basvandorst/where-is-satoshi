
@_date: 2009-01-10 08:02:45
@_author: Anne Wilson 
@_subject: Can't find one identity 
I'm not sure whether this is a gpg or keychain/ssh issue.  I use keychain to handle mounts to my server box for maintenance.  Every day, the first time I start konsole, I'm asked for my ssh password.  I get a connection, but also get  '* Warning: can't find annew at kde.org; skipping'
I did wonder whether my keyring on the server needed updating, but using 'gpg --refresh-keys' told me that 1 key was processed but unchanged.
Does this error message spring from the fact that annew at kde.org was not an identity when I created the ssh password, or is it something I'm overlooking in gpg?

@_date: 2009-01-12 15:36:45
@_author: Anne Wilson 
@_subject: Setting up a new laptop - importing keyrings 
I'm setting up a new netbook, and have copied into the .gnupg folder my keyrings and associated files from this laptop.  Kgpg lists the keys correctly, but all is not well.  When I try to set keys for signing and encryption I get the endless searching bar, as Chris described a few days ago.
I considered starting from an empty keyring and importing signatures as they arrive in kmail, but I think the problem is that I don't know how to get the secret key recognised.
I'm happy to delete everything and start again if there is a better way, but I need help to get this sorted.  Thanks

@_date: 2009-01-13 08:15:16
@_author: Anne Wilson 
@_subject: Setting up a new laptop - importing keyrings 
Yes, they are.  All CLI commands work fine.
I think something is preventing communication between kmail and the keyrings, but only in some circumstances.  While I can't, in the Fedora installations, set my key to encrypt mail, I can read the encrypted mail that comes to me.
I don't think that agent is the problem - it holds the passphrase for the correct amount of time.  This is the agent conf file:
pinentry-program /usr/bin/pinentry-qt
default-cache-ttl 3600
# GPGConf disabled this option here at Fri 13 Jul 2007 10:47:33 IST
# log-file socket:///home/anne/.gnupg/log-socket
 GPGConf ---+++
default-cache-ttl 3600
debug-level basic
log-file socket:///home/anne/.gnupg/log-socket
 GPGConf ---+++ Sun 11 Jan 2009 08:44:43 GMT
# GPGConf edited this configuration file.
# It will disable options before this marked block, but it will
# never change anything below these lines.
It may be relevant to mention that on my Mandriva laptop I use keychain to help with remote administration.  There, when I open konsole for the first time each morning, I'm asked for the passphrase.  I always then see
 * Warning: can't find annew at kde.org; skipping
Identity added: /home/anne/.ssh/id_dsa (/home/anne/.ssh/id_dsa)
can't connect to `/home/anne/.gnupg/log-socket': Connection refused
If this (the last line) isn't relevant to this particular problem I'll deal with it in a separate thread later.  It doesn't appear to stop anything working.  On that particular laptop everything works as expected except for automatically importing keys for signed emails.

@_date: 2009-01-13 15:16:25
@_author: Anne Wilson 
@_subject: Setting up a new laptop - importing keyrings 
Are these log messages likely to be relevant?
    kdm: :0: PAM adding faulty module: /lib/security/pam_gnome_keyring.so: 5     kdm: :0: PAM unable to dlopen(/lib/security/pam_gnome_keyring.so): file or directory: 5 Time(s)
    polkit-grant-helper: granted authorization for org.freedesktop.packagekit.package-install-untrusted to pid 9436 [uid=500] [auth=root]: 1 Time(s)

@_date: 2009-01-13 17:53:12
@_author: Anne Wilson 
@_subject: Can't find one identity 
OK - thanks for the clarification.  It doesn't appear to cause any problems, so I'll just ignore it.

@_date: 2009-01-24 08:19:03
@_author: Anne Wilson 
@_subject: compatibility of Gnupg-1.4.9 to Gnupg-1.0.6 
Is this something that all of us with old keyrings need to do?  If so, can you please either point us to instructions that a user could follow, or explain how to do it?  Thanks.
I'm wondering if that is part of the problems I've been having lately.

@_date: 2009-01-24 18:48:30
@_author: Anne Wilson 
@_subject: compatibility of Gnupg-1.4.9 to Gnupg-1.0.6 
Thanks for replying.  I didn't realise that we were talking of such a big time-span.  I think I started using gpg around 2003, but I've been updating my distros fairly regularly since then, so it looks as though it's unnecessary for me.

@_date: 2011-05-26 19:06:07
@_author: Anne Wilson 
@_subject: I can't stop encryption being done with a wrong key 
I have a friend whose gpg key became corrupt.  He created a new key, and I imported it.  Then we discovered that KMail insists on trying to encrypt using the old key, even though I have changed his addressbook entry to reflect the new key.
At this point we thought it was a KMail issue, so I moved to Thunderbird for answering his mail.  Signed mail in both directions is no problem.  He can send an encrypted message and I can read it.  The new key is fine.  However, when I send an encrypted message to him we hit the rocks.
In Thunderbird I have only a minimal addressbook.  I set his record to use the new key for encryption, and I can't see any way that Thunderbird should know about the old key.  However, the test email I sent him was signed by the RSA subkey of his old key.
Can someone please explain to me how this could be happening, and what I need to do to correct it?  Should I remove his old key from my keyring?  If I do, I assume that I won't be able to read his older messages.

@_date: 2011-05-27 16:19:25
@_author: Anne Wilson 
@_subject: I can't stop encryption being done with a wrong key 
I eventually found where I could disable the key both in Thunderbird and in KMail, so all is now well.
Thanks to all who answered.

@_date: 2011-05-28 11:20:23
@_author: Anne Wilson 
@_subject: I can't stop encryption being done with a wrong key 
To be honest, I'm not sure that it is the fault of gpg.  To my mind, both Thunderbird and KMail should always respect the preference marked as the default key for the user in question.  It seems to me that it is more of a job for the address book interface, to ask for the default key and whether older keys are to be disabled. Or am I misunderstanding again - is that part actually handled by gpg?
I'll add to the bug report mentioned above.

@_date: 2011-05-28 11:48:28
@_author: Anne Wilson 
@_subject: I can't stop encryption being done with a wrong key 
Slight problem - I created an account but can't see any way to add comments.  Sorry - I'm used to bugzilla, but obviously this is quite different.

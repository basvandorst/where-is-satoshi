
@_date: 2016-07-04 19:13:46
@_author: yuriping@sohu.com 
@_subject: invoke gpg with popen but cannot get output from the pipe 
Hi all:    I'm using gpg 1.4.10.    Now I want to operate it in my program, and I want to get the output info of gpg from popen, in order that I can process them. Codes like the following:---------------------------------------------------------------- <stdio.h> <sys/wait.h> <string.h> <stdlib.h>int main(void){    FILE *fpout = popen("gpg --verify yrp.sig yrp", "r");    char buf[1024];    bzero(buf, 1024);    int len = fread(buf, 1024, 1, fpout);    printf("The return of fread = %d, The length of the buf = %d\n", len, strlen(buf));    printf("%s\n", buf);    pclose(fpout);    exit (0);}----------------------------------------------------------------The result didn't appear normal:gpg: Signature made Mon 04 Jul 2016 06:14:44 PM CST using RSA key ID 5FEC9A32gpg: Good signature from "yuriping (3) <yuriping at sohu.com>"The return of fread = 0, The length of the buf = 0But when I popen "ls" as following, ---------------------------------------------------------------- <stdio.h> <sys/wait.h> <string.h> <stdlib.h>int main(void){    FILE *fpout = popen("ls", "r");    char buf[1024];    bzero(buf, 1024);    int len = fread(buf, 1024, 1, fpout);    printf("The return of fread = %d, The length of the buf = %d\n", len, strlen(buf));    printf("%s\n", buf);    pclose(fpout);    exit (0);}----------------------------------------------------------------It worked properly:The return of fread = 0, The length of the buf = 60popen_lspopen_ls.csignsign.cverifyverify.cyrpyrp.sigIt seems that the output of gpg does not be redirected to the popen command buffer, it still output to the stdout.I want to know what causes the difference, and how to fix it. By the way, this issue appears when "popen("gpg --detach-sign yrp", "w")"Best Regards!

@_date: 2016-07-05 19:38:53
@_author: yuriping@sohu.com 
@_subject: How to invoke gpg command in C-program 
Hi ALL:    I'm using gpg 1.4.10 to perform sign-verify processing.    In general, two gpg commands will be used as following:    0. gpg --detach-sign file    1. gpg --verify file.sig file    I notice that in the executing process of command 0, a passphrase will be required to be typed manually;    and the return value in shell($?) of command 1 have the meanings : 0-verify successfully, 1-verify failed, 2-file opening failed;    Now I want to invoke these 2 commands in C-program in order that the process can be excuted automatically, but I do not know how to implement.    -- How can I input the passphrase for command 0 automatically? One way I know is to use gpg-agent, is it all right? And does gpg-agent 2.1.9 match with gpg 1.4.10?    -- How can I get the return value of command 1? I have tried using "popen", it does not worked and seemed that the output of gpg does not be redirected to the pipe.    Expect any suggestion.    Best Regards!

@_date: 2016-07-16 10:39:50
@_author: yuriping@sohu.com 
@_subject: Where  Can I get sign and verify demo for GPGME 
Hi, all,    We're using GPGME now and are going to perform signing and verifying process.    Could you tell me where can I get demos of GPGME for signing and verifying using C program.    Best Regards!

@_date: 2016-07-17 11:59:02
@_author: yuriping@sohu.com 
@_subject: GPGME signing failed: Bad passphrase 
Hi, all,    We're using GPGME now.    Follow is my key-list:root at YRP-ES-QD:/opt/TestCell# gpg --list-key/root/.gnupg/pubring.gpg------------------------pub   2048R/6F9DDC7B 2016-06-12uid                  yuriping (No) <yuriping at sohu.com>sub   2048R/1FFB24D9 2016-06-12pub   2048R/5FEC9A32 2016-06-12uid                  yuriping (3) <yuriping at sohu.com>sub   2048R/DD422577 2016-06-12pub   2048R/843ECE40 2016-06-12uid                  yuriping (0000) <yuriping at sohu.com>sub   2048R/3A19E9FD 2016-06-12pub   2048R/86111D4F 2016-06-15uid                  yuriping (0002) <yuriping at sohu.com>sub   2048R/DC783135 2016-06-15    I encountered one problem When running ./run-sign demo, as following:root at YRP-ES-QD:/opt/TestCell# ./run-sign --key 5FEC9A32 gpgme_test.c run-sign: signing failed: Bad passphrase    Does this mean I should use gpg-agent, or I should assign the passphrase somewhere?    Thanks for any reply!    Best Regards!

@_date: 2016-07-19 15:03:17
@_author: yuriping@sohu.com 
@_subject: GPGME signing failed: Bad passphrase 
Hi, all,    We're using GPGME now.I encountered one problem When running ./gpgme-1.6.0/tests/run-sign demo, as following:root at YRP-ES-QD:/opt/TestCell# ./run-sign --key 5FEC9A32 filerun-sign: signing failed: Bad passphrase    Does this mean I should use gpg-agent, or I should assign the passphrase somewhere?    By the way, if there is no "gpg" in my system, does the program invoking GPGME work properly?    Thanks for any reply!    Best Regards!

@_date: 2016-07-20 13:25:59
@_author: yuriping@sohu.com 
@_subject: GPGME-if gpg is necessary 
Hi, SirI'm using GPGME now to perform singnature and verifying.I
 have installed gpg on my Ubuntu, and I want to invoke GPGME in my C-program. What I want to know is if gpg is necessary when I invoke GPGME in a C-program, or my program can run independently with "gpg".Best Regards!

@_date: 2016-06-16 18:17:44
@_author: yuriping@sohu.com 
@_subject: keytyping never end when gen-key, and importing key warning 
Hi, allWe're using gpg 1.4.20 on an arm target board;Problem 1.When
 I run "gpg --gen-key", everything done well, except the last step, type
 on the keyboard to gain enough entropy for the random number generator,
 the process seemingly will never end.Ref. to the attatchment, pls. download and check.I want to know what cause it and how to solve?So I generate one key on PC running Ubuntu, export the key, and then import the key into the target board.Now I can signature files with the key, but when I verify the signature successfully, one Warning emerged as belowProblem 2.    gpg: Signature made Thu Jun 16 10:56:45 2016 CST using RSA key ID 86111D4F    gpg: Good signature from "yuriping (0002) <yuriping at sohu.com>"    gpg: WARNING: This key is not certified with a trusted signature!    gpg:          There is no indication that the signature belongs to the owner.    Primary key fingerprint: 826B 7296 F49E AED4 F45B  443C 1907 1CAC 8611 1D4FHow can I solve this problem?    Best Regards!

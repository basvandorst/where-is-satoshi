
@_date: 2014-08-11 12:50:16
@_author: Philip Jackson 
@_subject: Error - bad passphrase 
These are the same errors I got but they had nothing to do with either
Thunderbird 31 or enigmail (which was on version 1.6 at the time).
I had recently abandoned Windows 7 for linux UbuntuStudio 14.04 and everything
worked fine but the standard gpg issue in the distribution was (and is) 1.4.16.
I decided to install the gnupg 2.0.22 (Ubuntu flavour) and that's when I had the
same errors you have even though I hadn't entered any passphrase (nor even been
asked to provide it).
I removed 2.0.22 and all the errors disappeared.
I'm still trying to pluck up courage to have another go at gnupg2 and then into
smart cards.

@_date: 2014-08-11 22:15:37
@_author: Philip Jackson 
@_subject: gnupg-2.1 Install 
I'm also a new Ubuntu user (UbuntuStudio 14.04) and I find it difficult to find
my way around.  I'm not yet up to doing it myself from source code so I look to
the resources in the distribution : Ubuntu Software Centre, and Synaptic Package
The latest Gnupg's in the Software Centre are :
gnupg  1.4.16-1ubuntu2.1
gnupg2 2.0.22-3ubuntu1.1
and this info is confirmed by Synaptic Package Manager which I update at least
once every week (and all the repositories are checked in the package manager's
Gnupg 1.4.16 is what I'm using.  I tried installing the gnupg2 package but all
that it did for me was to stop enigmail/thunderbird from signing or encrypting
emails.  So I removed it pending more courage and/or a later version and/or
understanding more about do-it-yourself.
Maybe you could tell me if there are other places to check the Ubuntu repositories ?

@_date: 2014-08-13 10:56:25
@_author: Philip Jackson 
@_subject: Different signing & encryption keys 
The important here must be 'by default'.  Last year, I followed a thread on the
gpg4win forum and created an 8192 key using gpg --batch command.  The key
produced was a single RSA8192 key for encrypt, sign, certify, authenticate,
probably because I did not specify any sub-key.  (I still have it but have never
used it nor released it to the world).
I don't recall having been prompted by gpg to specify a sub-key so I could say
that gpg produced a single key 'by default'.  It was a year ago so I could be

@_date: 2014-08-23 12:56:11
@_author: Philip Jackson 
@_subject: email verification as casual checking? 
I take it that a 'faked key' in this context is one associated with an
unverified email address.  If I send an encrypted message to that email address,
two possible outcomes occur to me :
- the email address belongs to some other person who does not control the key
and he can't open it.  Not much problem here.  My secret remains hidden.
- the email address belongs to a person who does control the key and he may or
may not be the person named in the email address.  I am risking my secrets with
an unknown person.  I had better take care of the nature of those secrets.  It
looks like this is the case covered by your original post.
What extra security does a key server certification give in this case ?  It just
says that if you use this key with this email address, the email will be
delivered to someone who controls both the address and the key.
In any case, there is always the possibility that this 'certified' person or key
is actually controlled by someone else.  I have difficulty in seeing what
additional security is provided by a casual signature, given by a key-server or
by any other party.

@_date: 2014-08-24 16:48:18
@_author: Philip Jackson 
@_subject: installing gnupg-2.0.26 
I'm looking for some help here please.  I'm trying to install 2.0.26 using the
./configure, make, make install  procedure.  This is something completely
unknown to me and this is a first time attempt at this sort of thing in linux.
I downloaded the tar.bz2 file and checked its signature ok.  I extracted it into
I noted the dependencies and the order to install them.  So I downloaded the
libgpg-error-1.9.tar.bz2 file and set about extracting, configure, make, make
install.  All seemed to go ok and it was rapid.
Then I started on libgcrypt -  - I downloaded libgcrypt-1.6.2.tar.bz2 file from
When I ran ./configure on  /usr/local/src/libgcrypt-1.6.2, the last few lines in
the terminal are :
last few lines ...
....whether NEON support is requested... yes
checking whether a -O flag munging is requested... yes
checking whether to enable AMD64 as(1) feature detection... yes
checking for gpg-error-config... /usr/local/bin/gpg-error-config
checking for GPG Error - version >= 1.11... no
configure: error: libgpg-error is needed.
                See ftp://ftp.gnupg.org/gcrypt/libgpg-error/ .
Looks to me as though it thinks gpg-error cannot be found. Is this correct ?
But I can see that the install I did of libgpg-error had created the following
two files in /usr/local/bin :
gpg-error-config  and gpg-error (executable)
How come they don't seem to be found when running ./configure on libgcrypt?
What did I miss out ?
All advice welcome - thanks.

@_date: 2014-08-24 18:23:22
@_author: Philip Jackson 
@_subject: installing gnupg-2.0.26 
Wow, that's a pretty dumb mistake to make.  I just assumed the latest version
was at the bottom of the list on the ftp page.  Sorry about that.

@_date: 2014-08-26 15:12:51
@_author: Philip Jackson 
@_subject: installing gnupg-2.0.26 
I've now got the four dependencies noted in the gnupg-2.0.26 README installed
under /usr/local/ at latest versions :
Running configure on gnupg-2.0.26 produced a demand for pth which I downloaded
and installed (pth-2.0.7).
Then 'configure' zapped thro rapidly without any further errors noted at the end
so I ran 'make' which failed - last few lines in the terminal are :

@_date: 2014-08-26 23:33:14
@_author: Philip Jackson 
@_subject: installing gnupg-2.0.26 
Thanks Werner.  zlib now installed and gnupg 2.0.26 installed and seems to work
but produces an error when asked to encrvypt or verfiy a file :
gpg: invalid item `BZIP2' in preference string
gpg: invalid default preferences
When I compare the output of 'gpg --version' with the output of 'gpg2 --version'
, the last line about compression shows that gpg2 does not have BZIP2.
I suppose gnupg-1.4.16 and the new 2.0.26 share the same gpg.conf so I could
remove BZIP2 from the gpg.conf file or perhaps better is to recompile 2.0.26
with BZIP2.
What do you recommend ?

@_date: 2014-08-27 15:42:11
@_author: Philip Jackson 
@_subject: installing gnupg-2.0.26 
Thanks - I've used the gpg.conf-2 solution for a temporary fix and gpg2 seems to
work so far and enigmail has picked it up and works with it ok.
When I get a little more time, I'll track down the source code for libbz2-dev
and build it in my gnupg-2.0.26 installation.
My linux distribution already has libbz2-1.0 but it will be elsewhere in the
file structure and I haven't yet found out how to make use of it for my
installation of 2.0.26.
For the moment, I'm more than happy that my first experience of compiling from
source code has worked.

@_date: 2014-08-27 21:43:33
@_author: Philip Jackson 
@_subject: installing gnupg-2.0.26 
I downloaded bzip2=1.0.6.tar.gz and now gnupg 2.0.26 seems to be working fine.
Thanks everyone for the help.

@_date: 2014-08-28 13:12:30
@_author: Philip Jackson 
@_subject: email verification as casual checking? 
Whether or not I want to send secrets to a person depends on lots of things.  I
think at present that I would be unlikely to send any important secret by email.
 I cannot imagine my confidence levels on the person's identity or
trustworthiness being enhanced at all by a keyserver process alone.  Not even if
the keyserver were linked to a lie detector :-)
The question would always remain "Who is pulling his strings ?"

@_date: 2014-12-31 13:42:49
@_author: Philip Jackson 
@_subject: photo-ID 
I've been looking for documentation with info on adding a photo id to a gpg key.
 The instructions for adding are available but I can't find any advice for the
size, format, dpi etc of the image to be used.
I guess that the image size should be kept down somewhat to avoid making the key
too large.  And it appears that not all software will display the image at the
same size.
Can anyone offer practical advice on the image parameters ?

@_date: 2014-12-31 22:57:44
@_author: Philip Jackson 
@_subject: photo-ID 
Thanks, Sandeep.  I had found that page but didn't realise that I'd actually
have to implement the command to get the additional info on a suggested size.
That is not actually very clever - it hardly permits you to prepare an image
before installing it to the key.

@_date: 2014-12-31 23:21:12
@_author: Philip Jackson 
@_subject: photo-ID 
I take your point, Robert, regarding size.  I've just tried a 240x288 image at
72 dpi and it is really small on my screen but it only weighs 29kB.
I'll have a look at your suggestion, keybase.io.

@_date: 2014-07-11 15:10:45
@_author: Philip Jackson 
@_subject: GPG4Win question 
In Windows 7, 64bit, these files are in
 /Users/your_user_name/AppData/Roaming/gnupg/

@_date: 2014-06-18 19:04:16
@_author: Philip Jackson 
@_subject: help needed getting gnupg to function correctly in linux 
I can't send signed or encrypted emails in Thunderbird.
I am using Thunderbird 24.5, enigmail 1.6, UbuntuStudio 14.04. Gnupg 1.4.16 was
already installed in the linux distribution and I installed gnupg2  v2.0.22. I
also installed Kleopatra and GPA because I am used to those gui's in Win7.  I
imported my public and secret keyrings from Win7 and also the trust database.
All the keys are displayed correctly in enigmail, Kleo, GPA and Thunderbird
indicates good signature for those emails received where I have the public key.
I am in the process of moving everything I can off Windows7 onto UbuntuStudio.
I have been using T'bird and enigmail for several years under windows so I know
more or less how it works at user level.
Currently, sending signed or encrypted mails fails with a 'bad passphrase
message' without even having given me the opportunity to enter the passphrase.
I am comparatively new to linux but turning to a terminal to try gpg leads to
the following conclusions :
using gpg :
I can sign a test message.  gpg warns that there is a problem with the agent and
it has disabled it.  But nevertheless it produces a test-message.gpg or
test-message.asc depending on the command given.  It requests and accepts my
gpg can verify the .gpg and the .asc files and gives 'good signature message'
using gpg2 :
I cannot sign a test message - gpg2 says that a passphrase is needed for my key
but then aborts before I can enter anything and the following error is returned -
In /.gnupg/gpg.conf : default-key has been entered.
gpg2 can and does verify the .gpg and .asc files produced by gpg returning a
good signature message.
Kleopatra cannot sign files.  Returns 'bad passphrase' message without ever
having asked for a passphrase.
Kleopatra cannot verify the clearsigne .asc file produced on the cli bu gpg :
returns message 'no signature found'
Kleopatra cannot verify the .gpg file produced by gpg and returns message  :
'could not open file "" for reading: Input/output error (218136625)'
Note that it doesn't even have the name of the file.
It appears to me (in all my ignorance) that there is a problem connected with
gpg-agent and PINentry.   The Synaptic Package Manager shows that I have
gnupg-agent v.2.0.22-3ubuntu1 installed.
I'd appreciate all and any help offered bearing in mind that I'm new to linux
and command line stuff.

@_date: 2014-06-20 11:33:43
@_author: Philip Jackson 
@_subject: help needed getting gnupg to function correctly in linux 
Thank you Bernhard for your reply :
I checked using the entries above and get exactly what you quoted.  So does this
mean that pinentry is working ok ?
Checking with Synaptic package manager shows that both pinentry-qt4 and
pinentry-gtk2 are installed.  Notes in the package manager say that the qt4
version is especially for users of KDE4 and that the gtk2 version is especially
suitable for users of Gnome.
It seems to me that UbuntuStudio is Gnome based but when I check the version :
pinentry --version  on my pc returns
pinentry-qt4 (pinentry)
I'm not quite sure what you mean by "....can do it'
gpg-agent  returns
gpg-agent: gpg-agent running and available
and it's version 2.0.22
when I look in the gpg-agent.conf file, there are only 2 settings and these are
for cache size and max cache.
Should there be other entries telling the agent how and what to do ?
Where should I go from here ?

@_date: 2014-06-21 16:45:27
@_author: Philip Jackson 
@_subject: help needed getting gnupg to function correctly in linux 
Hash: SHA1
Ok Tristan, thanks.  I went and opened an account on my wife's pc which uses
Ubuntu Desktop and just has gnupg 1 installed as basic.  Thunderbird and
enigmail sent off a signed mail with no problem after asking for my password.
I then un-installed gnupg2 from my pc, rebooted and sent a test signed message
ok - Thunderbird and enigmail presented the usual pinentry dialog (showing
pinentry-GTK-2) asking for password.
I have checked with some signing and encrypting and verfiying using a terminal
(gpg 1.4.16) and all now works as it should. Terminal reports pinentryQt4.
So either the UbuntuStudio release of gnupg2 is defective or gnupg 1 and
gnupg2 have problems of coexistence.  But the gnupg.org site does say they can
I'll try and take it up with Ubuntu.

@_date: 2014-11-14 16:01:59
@_author: Philip Jackson 
@_subject: Fermi estimates 
Thanks for that (and the previous).... It makes the brain hurt but raises a few
questions in my mind.
Does anything prevent the key breaker getting lucky and cracking it first try?
It seems to me that all discussions on key breaking with their very large
numbers always assume that the last try is THE ONE.
And how does the cracker know he has succeeded ?  Does he have to pause between
each iteration to see if he has 'something good' ?  And in the 10**38 key
attempts, what's the chance of having multiple apparently 'GOOD ONES' ?
Perhaps a double bluff is needed :  send the message in plain text with just a
hint that it might be encrypted ?

@_date: 2014-11-15 17:43:00
@_author: Philip Jackson 
@_subject: Why the software is crap 
It appears that David might well be the postmaster at gbenet.com which seems to
be a recent site apparently specializing in cryptology.  What little it contains
has to be accessed via the 'sitemap'.  The texts are a similar sort of rant, in
poor language with little if any punctuation.
The name of the site recalls to me what was a popular expletive in the UK in or
around the 1970's : "Gordon Bennett!!"
Best forgotten.

@_date: 2014-11-16 17:54:18
@_author: Philip Jackson 
@_subject: The Facts: 
I had this same difficulty around June this year when I migrated from Windows7
to UbuntuStudio 1404. (both 64 bit).
I wanted to use gnupg2 rather than the standard gnupg1-4.-16 which was packaged
with Ubuntu and the gnupg website said that gnupg1 and gnupg2 could co-exist ok
on the same machine.  So I installed the Ubuntu gnupg2 package 2.0.22.
I had migrated my Thunderbird profile ok from Windows7 to Ubuntu and was happily
using Thunderbird 24.6 and enigmail 1.6 before I installed gnupg2.  Afterwards,
I could not get emails to be signed.  I did get the bad passphrase message
without having been asked to provide one.  I also got a 'no pinentry' message.
I removed the Ubuntu gnupg2.0.22 package and using only gnupg1.4.16, Thunderbird
and enigmail worked perfectly.
I then set about learning how to install myself the latest version (at that
time) which was gnupg2.0.26 with help from this list.  When I got it installed,
enigmail then worked perfectly.
I cannot advise how to install gnupg2.0.26 - it was above my pay-grade at the
time but I did manage it.  And I have subsequently upgraded Thunderbird many
times (now at 31.2) and enigmail too (now at 1.7.2).  I confirm that on
UbuntuStudio 14.04 64 bit, Thunderbird 31.2 with enigmail 1.7.2 works just fine
with gnupg2.0.26.
I wrote up some of my problem on launchpad (Ubuntu bug reports) and there is at
least one other bug reporting similar behaviour.  For further info on these, try
these links :
My conclusion was that there must have been some issue with the gnupg2.0.22
package as prepared and released by ubuntu.

@_date: 2014-11-30 00:23:26
@_author: Philip Jackson 
@_subject: Keygrip v fingerprint ? 
I see on :
references to both --with-keygrip and --with-fingerprint.  When I try
--with-keygrip on gnupg2.0.26, it appears not to be a valid option.
The only other time I have seen a reference to a keygrip (and I don't remember
where I saw it), it seemed to me that a keygrip looked just like a fingerprint.
Could someone please explain the difference between a keygrip and a fingerprint
or point me to a relevant document ?

@_date: 2014-10-05 20:44:47
@_author: Philip Jackson 
@_subject: gpg offering to encrypt to an unwanted key 
During a recent encryption of a file, I made a mistake in the command options
and gpg looked as if it was going to encrypt to another key. It picked a key
which was in my keyring but not specified as a default in gpg.conf.  (my own key
is specified as default in the gpg.conf)
My mistake was to mis-spell  the encrypt part :
I put '-encrypt'  instead of '-e' or '--encrypt'
This is what I got :
(pinentry asked my password, then second confirmation entry) then
This is repeatable as often as I want.  If I use one of the correct options for
encrypt, the operation goes perfectly.
Why would gnupg pick an unwanted key for encryption ?  That seems a potentially
dangerous thing to do even though there was a warning message.

@_date: 2014-10-05 23:41:23
@_author: Philip Jackson 
@_subject: gpg offering to encrypt to an unwanted key 
Thank you for the explanation, Peter.  It all sounds rather logical.

@_date: 2014-10-21 00:36:41
@_author: Philip Jackson 
@_subject: smart card under linux 
After a couple of weeks away from the smartcard issue, I've tried again from
scratch.  Under Windows7 using GpG4win 2.2.2 with an SCM3512 reader, SCM's
drivers and G10's openpgp v2 card, gpg --card-status provides the following output :
Application ID ...: D2760001240102000005000028700000
Version ..........: 2.0
Manufacturer .....: ZeitControl
Serial number ....: 00002870
Name of cardholder: [not set]
Language prefs ...: [not set]
Sex ..............: unspecified
URL of public key : [not set]
Login data .......: [not set]
Signature PIN ....: forced
Key attributes ...: 2048R 2048R 2048R
Max. PIN lengths .: 0 0 0
PIN retry counter : 0 0 0
Signature counter : 0
Signature key ....: [none]
Encryption key....: [none]
Authentication key: [none]
General key info..: [none]
This looks promising but I didn't take it any further because I want to get it
going under my UbuntuStudio 1404 linux. Using gnupg2 2.0.26.
Trying to use the GnuPG driver to access CCID cards, "gpg2 --card-status" yields
the following output :
gpg: selecting openpgp failed: Card error
gpg: OpenPGP card not available: Card error
I've followed, I believe, all the instructions in the gnupg.com smartcard howto.
 In para 2.3.1 CCID : I've tried both the instructions under 'with udev
(preferred installation)' and further down 'with hotplug (deprecated in modern
In the /etc/udev/rules.d/ directory there is a README which says that symbolic
links should not be used in Ubuntu (unlike Debian) so I placed a copy of
gnupg-ccid.rules directly in that directory.  But that didn't help.
lsusb shows that the SCM card reader is recognised and present but gpg doesn't
seem to be able to make contact.
I'd appreciate any ideas for what to try next.

@_date: 2014-10-21 15:10:58
@_author: Philip Jackson 
@_subject: smart card under linux 
I'm using UbuntuStudio 1404 - one of the Ubuntu flavours.
Practically all I know about smart cards is from the GnuPG smartcard howto on
gnupg.org website. There, it makes reference to 'Two standard protocols are used
by GnuPG to access card readers.' and then proceeds to cover CCID in some detail
with three apparent alternatives being detailed.
It then treats the other protocol, PC/SC, but all it says is "TODO - To use
PC/SC make sure you disable CCID by passing the --disable-ccid option to GnuPG."
more useful / or more modern so I didn't touch anything about PCSC and this
means that pcscd is not running on my system.
Is this a major error on my part ?

@_date: 2014-10-21 15:51:46
@_author: Philip Jackson 
@_subject: smart card under linux 
I've seen other threads about the interference made by Gnome's keyring with
gpg-agent.  I don't knowingly use any gnome application which requires its
keyring management but I do note from the system monitor that the
gnome-keyring-daemon is running sometimes (not every time).  I have supposed
that it gets started at bootup (but if that's so, why isn't it always running
?).   And the UbuntuStudio flavour doesn't use the Unity desktop but xfce.

@_date: 2014-10-21 17:26:54
@_author: Philip Jackson 
@_subject: smart card under linux 
lsof doesn't produce anything except :
lsof: WARNING: can't stat() fuse.gvfsd-fuse file system /run/user/1000/gvfs
      Output information may be incomplete.
So libpcsclite is not in use which kind of lines up with what I wrote above
about choosing to try the howto CCID protocol rather than the pcsc protocol.

@_date: 2014-10-22 15:24:05
@_author: Philip Jackson 
@_subject: smart card under linux 
Jens -
Yes - I checked every time and there is no pcsc process running at all.
gpg-agent runs ok and it starts scdaemon when I try gpg2 --card-status so my
difficulty lies with reading the card.
(the card and reader are good because I can access them with the card-status
command in Windows7 using gpg4win)
Thankyou for the link to your blog.  I'll get back into it a bit later when I've
more time.

@_date: 2014-10-22 15:43:15
@_author: Philip Jackson 
@_subject: smart card under linux 
Thank you for all this, Peter.  It will take me a little while to digest and
check out.

@_date: 2014-10-22 21:07:03
@_author: Philip Jackson 
@_subject: smart card under linux 
Peter, I've had time to read and try to get to grips with the contents of your
email.  They've helped me make some progress :
I got (and get) for the SCT3512 :
Bus 002 Device 009: ID 04e6:5410 SCM Microsystems, Inc. SCR35xx Smart Card Reader
The SCT3512 is seen as an SCR35xx reader and I took the value 5410 for the
I get similar indications but don't see myself listed as a user - not to worry
for the moment.
I found two such files :
I found the 70-uaccess.rules file but nothing for systemd
based on your code above, I prepared a couple of files for /etc/udev/rules.d/
40-gnupg2-extra.rules    with appropriate modifications and using the idProduct
value = 5410
The result was definitely showing some progress has been achieved :
gpg2 --card-status
scdaemon[5697]: PC/SC OPEN failed: no service (0x8010001d)
scdaemon[5697]: PC/SC OPEN failed: no service (0x8010001d)
gpg: selecting openpgp failed: Card error
gpg: OpenPGP card not available: Card error
:~$ scdaemon[5697]: scdaemon (GnuPG) 2.0.26 stopped
Although not success, it was different. scdaemon tried to use PC/SC and failed.
 Up until present, all I got from gpg2 --card-status was the 2 gpg lines.  the
scdaemon process that was stopped [5697] was not the process I have seen open
prior to this attempt and which is still open [2997].
So why would this attempt at gpg2 --card-status open another process rather than
use the one already open ?
Using gpg was more successful :
gpg --card-status
Application ID ...: D2760001240102000005000028700000
Version ..........: 2.0
Manufacturer .....: ZeitControl
Serial number ....: 00002870
Name of cardholder: [not set]
Language prefs ...: de
Sex ..............: unspecified
URL of public key : [not set]
Login data .......: [not set]
Private DO 1 .....: [not set]
Private DO 2 .....: [not set]
Signature PIN ....: forced
Key attributes ...: 2048R 2048R 2048R
Max. PIN lengths .: 32 32 32
PIN retry counter : 3 0 3
Signature counter : 0
Signature key ....: [none]
Encryption key....: [none]
Authentication key: [none]
General key info..: [none]
This is very similar but not identical to what I got under Windows7 with Gpg4win
2.2.2 ( language prefs has changed from 'not set' to de and some other
parameters appear which were not shown, and others have some different values)
but the essential is that the reader was recognised and the card was clearly
read.  So under gnupg 1.4.16 (the standard Ubuntu distro install) I now have
access to the card.
But I still have a bit more work to do for gnupg2 2.0.26
Thanks for your help,

@_date: 2014-10-22 21:36:34
@_author: Philip Jackson 
@_subject: smart card under linux 
Your blog provides a lot of good stuff that I shall use when I get round to
populating the card.
The link to the card reader setup (udev) howto,
which I came upon reading your blog and following the links, contains
essentially the same stuff I found on the gnupg.org howto.  I had already tried
the downloads of the two files gnupg-ccid.rules and gnupg-ccid script and the
associated instructions for placing them.  This did not work for me.
Peter L provided something similar in many respects but different in others and
this did work for me with gnupg 1.4.16  but not yet for gnupg2 2.0.26.
So I am still trying to get gpg2 to work.

@_date: 2014-10-28 00:20:20
@_author: Philip Jackson 
@_subject: Update on USG, Software, and the First Amendment 
It would be very interesting to read and I add my name to the request.
(I remember well the late 80's when it was a major task getting agreement to
permit the relocation of a micro-VAX from an office in UK to another office,
same company, in France.)

@_date: 2014-09-01 16:18:32
@_author: Philip Jackson 
@_subject: Smart Card 4096 Key Question 
I tried to buy an SCT3512 usb key device from Amazon.de and also from SCM in
Germany.  Neither will ship to an address outside Germany'
I tried the shop at kernelconcepts.de for the card but I can't get into their
website with Firefox under linux nor under windows - I just get a weird error page :
"Fatal error: Call to a member function add_current_page() on a non-object in
It looks like security is alive and doing well in Germany.  I though we had
something going for us in Europe these days but apparently not.
Can anyone suggest a supplier in Europe who will sell outside his frontier ?

@_date: 2014-09-02 15:14:54
@_author: Philip Jackson 
@_subject: Smart Card 4096 Key Question 
Thanks to all who have responded with offers of help.
I've had email correspondence from scm's web shop (scm-pc-card.de) and they do
send worldwide.  Their webshop is not sophisticated enough to be able to
calculate post and packing costs for dispatches outside Germany (not even for
France which is next door and the scm3512 reader only weighs 8g and doesn't
appear more fragile than a usb memory stick).
But they have rapidly rectified the situation and sent me a pro-forma invoice
which I have paid online.  So, I hope, my problem is now resolved.
It is however, some years since I last encountered so much kerfuffle for such a
small purchase on the net.
I point out too, that scm-pc-card did reply promptly to my emails.  A similar
query sent to a French company remains unanswered.

@_date: 2014-09-20 15:05:31
@_author: Philip Jackson 
@_subject: New beta 
What, please, is the reason for the step no. 2 in the above list ?

@_date: 2014-09-21 18:03:34
@_author: Philip Jackson 
@_subject: New beta 
What are the symptoms of gnome highjacking pinentry ?
I'm using UbuntuStudio1404 - Enigmail (w.thunderbird) is working with gpg2.
When I need to enter a passphrase for enigmail, it goes into the pinentry-gtk2
dialog box ok.
The system monitor shows me that gnome-keyring-daemon process is running (but I
don't think I'm actually doing anything with gnome keyrings) but it doesn't seem
to interfere with encrypting/decrypting or signing emails or using gpg2 to
verify signatures from the cli.

@_date: 2014-09-23 13:24:22
@_author: Philip Jackson 
@_subject: smartcards : bad link on howto page 
I've finally received my smartcard from Kernel-concepts and I have a USB reader
SCT3512 from SCM.  I am trying to follow the howto on this page :
and I've reached step 2.3.1 CCID
The file gnupg-ccid.rules downloaded ok from the link provided but the next link
for the second file, gnupg-ccid is a link for the page I'm already on :
it just takes me to the top of the page.
This file is however available on the same link as the first file.
Looks like something to correct ?

@_date: 2014-09-23 14:37:41
@_author: Philip Jackson 
@_subject: help with installing a smartcard 
I'm using UbuntuStudio1404.
Working from :
I completed the steps in 2.3.1 using the section "With udev (preferred
I took it that the following stuff under the heading "With hotplug (deprecated
in modern systems)" was a deprecated alternative.  Was this the correct assumption ?
In any case, when I ran the test in 3.1, clearly the system cannot see the card
- I get the following :
gpg --card-status
gpg: selecting openpgp failed: ec=6.108
gpg: OpenPGP card not available: general error
Looking into the directory /etc/udev/rules.d/, I found a README with the following -
"The files in this directory are read by udev(7) and used when events
are performed by the kernel.  The udev daemon watches this directory
with inotify so that changes to these files are automatically picked
up, for this reason they must be files and not symlinks to another
location as in the case in Debian."
so I tried replacing the link created during section 2.3.1 of the howto webpage
with a file.  But the result is the same.
Have I misinterpreted the steps in 2.3.1 ?

@_date: 2014-09-26 15:35:53
@_author: Philip Jackson 
@_subject: Free Software Foundation statement on the GNU Bash "shellshock" 
the 2 attachments.asc are :
1. the sender's public key
2. the electronic signature of the message signed by the sender
the two permit you to verify that the message is sent by the sender (if you
already have and trust his key) and has not been modified en route.
If you don't have his key, you can use the first attachment to import into your
keyring.  Then whether or not you trust his signature is your decision.

@_date: 2015-12-10 14:05:15
@_author: Philip Jackson 
@_subject: Error message "gpg: Can't check signature: Broken public key" 
I'm using gpg2.0.22 on my desktop and I can never verify your emails
(MFPA) - I always get from enigmail :
"Unverified signature; the key type is not supported by your version of
"Unverified signature
UNTRUSTED BAD signature from 2014-667rhzu3dc-lists-groups at riseup.net
<2014-667rhzu3dc-lists-groups at riseup.net>"
Which is normal for an ECC key.
On my laptop, with Debian Jessie and gpg2.1.7, the signature verifies
ok.  Again normal for 2.1.x

@_date: 2015-12-13 00:11:05
@_author: Philip Jackson 
@_subject: Error message "gpg: Can't check signature: Broken public key" 
I don't use the laptop regularly for mail but I did update its inbox
today just to check out what it does now.
gpg2.1.7 with enigmail 1.9a1 of 30 Nov 2015 verifies all your emails of
2015 as 'good signature'.  However, when I look to see more details, the
verification behind the enigmail 'Details' button quotes key ID
0x547B7194 which is the RSA 2048 public key identity.
But when I look into the enigmail log, there I see that signatures were
made by both EDDSA subkey 0x1712BC461AF778E4 and RSA subkey
Getting back to the desktop --
On my desktop with 2.0.22 with enigmail 1.9a1 of 8 Oct 2015, enigmail
provides differing info depending on whether you're inline or pgp/mime.
The latter gives the more alarming info behind enigmail's Details button
"Untrusted bad signature ...."
But again, enigmail's logfile shows both subkeys were used.  Enigmail
doesn't use the available info which is there in the logfile wrt the RSA
key ...(I quote from the logfile)...
"using subkey 0x6B7C74CEB31F25F0 instead of primary key 0x251BCCEB547B7194
gpg: using PGP trust model
gpg: key 0x26BD500A23543A63: accepted as trusted key
gpg: Good signature from "MFPA" [unknown]
gpg:                 aka "2014-667rhzu3dc-lists-groups at riseup.net
<2014-667rhzu3dc-lists-groups at riseup.net>" [unknown]
gpg:                 aka "0x251BCCEB547B7194" [unknown]
gpg: WARNING: This key is not certified with a trusted signature!"
Never mind the trust issue.  The logfile does show "good signature".

@_date: 2015-02-10 20:09:59
@_author: Philip Jackson 
@_subject: moving up from 2.0.26 to 2.1.1 
I've been a linux user for less than a year and the only configure/make/install
I've done is for 2.0.26 and its dependencies (when I couldn't get the distro
supplied package 2.0.22 to work).
Now when I look at the dependencies for gnupg 2.1.1,  I see that I need to
upgrade libassuan to 2.2.0, libgpg-error to 1.17 and gpgme to 1.5.3.
The first question I have is whether it is necessary to remove the versions I
already have prior to installing the later versions ?  I suppose simply
installing the later version will not automatically replace the previous version ?
Up to present, all updates to software have been done by the distro's 'Software
updater' and this has not made me any the wiser on the procedure for manual
Is there a risk of having a sedimentary layer of unwanted an outdated versions
accumulate on disk when updating manually ?
Any and all advice will be gratefully accepted, thank you.

@_date: 2015-02-11 14:44:15
@_author: Philip Jackson 
@_subject: moving up from 2.0.26 to 2.1.1 
Thank you for your reply, Daniel.
I'm using UbuntuStudio 1404 - a flavour of Ubuntu, kept up to date by frequent
downloads by their "Software Updater" utility.
I originally tried using the gnupg2 2.0.22 available as a package from Ubuntu,
but once installed I couldn't make it work (and I do know about enigmail having
to locate gpg2).  As soon as I removed it, enigmail worked fine with gnupg1.4.16
(the standard with the distro download).
I then tried 2.0.26 on my own and this worked a treat.
I find that distro packages (for Ubuntu) lag well behind what is available and I
do appreciate that there is a trade-off between proven reliability and
up-to-dateness and also that distros rely on maintainers who may well be
volunteers.  So I don't mind trying available releases more up to date than the
distro makes available.  I'm quite happy using enigmails's nightly builds.
Neither "Ubuntu Software Centre" nor "Synaptic Package Manager" indicate
availability of anything more modern than 1.4.16 / 2.0.22 - unless you know better ?

@_date: 2015-02-11 20:02:49
@_author: Philip Jackson 
@_subject: moving up from 2.0.26 to 2.1.1 
Thank you for that suggestion, Brian.  I looked into the link you provided and
decided that to see the precise name of the package, I'd add the repository
address into source info in Synaptic Package manager.  Which I did, together
with Debian's gpg key.
After reload, I searched for possible packages available at Debian experimental
repo but failed to find any with names like gpg*, gnupg*.
So I'm not there yet.  No hurry, though - lots to learn.

@_date: 2015-02-11 20:06:34
@_author: Philip Jackson 
@_subject: moving up from 2.0.26 to 2.1.1 
Yes, I guess that I fall into this type slot.
A priori, this doesn't seem very transparent but I suppose there must be a way
to determine if 2.0.22 is original or augmented ?

@_date: 2015-02-11 22:35:27
@_author: Philip Jackson 
@_subject: moving up from 2.0.26 to 2.1.1 
.... snip...
I used the Synaptic Package Manager gui to search for gnupg2 after adding the
experimental repository in the Settings/repository using the formula given on
the website link provided by Brian Minto (above) :
deb  experimental main
Amongst all the items listed then as available in experimental (after reload)
there was nothing shown in Synaptic Package Manager under gnupg.
When I try your way from the command line, I get :
$ apt-cache policy gnupg2
  Installed: 2.0.22-3ubuntu1.1
  Candidate: 2.0.22-3ubuntu1.1
  Version table:
     2.1.1-1 0
          1  experimental/main amd64 Packages
 *** 2.0.22-3ubuntu1.1 0
        500  trusty-updates/main amd64 Packages
        500  trusty-security/main amd64 Packages
        100 /var/lib/dpkg/status
     2.0.22-3ubuntu1 0
        500  trusty/main amd64 Packages
I'm not sure what this is telling me but I think it is indicating :
1.	that 2.1.1 is available in experimental/main Packages.
2.	that I have 2.0.22 installed
3.	that latest available for my distro (candidate) is 2.0.22
Although I did, last summer, install 2.0.22 using the distro's software centre,
I subsequently used the same software centre to remove it before building 2.0.26
on my own.  So I don't know why the above indicates that 2.0.22 is installed.
If I do gpg2 --version, it comes back clearly with 2.0.26. and enigmail clearly
indicates that it has found the gpg2 that I built.
So, moving on, if I do :
 apt-get -t experimental install gnupg2
will I get 2.1.1 installed together with its dependencies ?
And returning to my original questions, since it is written that 2.0* and 2.1
cannot co-exist, I suppose that I shall have to remove manually everything
connected with my 2.0.26 ?
Thanks, Philip

@_date: 2015-02-13 00:04:29
@_author: Philip Jackson 
@_subject: moving up from 2.0.26 to 2.1.1 
Hi Stephan,
Ok - this was already selected by default when I looked (and the English
version is :  Settings > Preferences > Distribution > "Always prefer the highest
version" )
But I just found the latest version of gnupg available in Debian experimental by
highlighting the gnupg2 package in Synaptic Manager and then selecting
'properties > Versions tab'  It is not shown in the main window but only in the
properties dialog box.  But that's now clearer to me.
Thanks for that suggestion, Stephan.  I hadn't noticed that there were two
different removal options in Synaptic Package Manager : removal and complete
In fact when I removed 2.0.22, I did so using ubuntu's 'Software Centre' using
its removal button.  It looks like the Software Centre only does a little bit of
How strange, it's like the old story of being only a little bit pregnant.
Best, Philip

@_date: 2015-02-16 13:53:41
@_author: Philip Jackson 
@_subject: MIME or inline signature ? 
With the expression you used, (gpg --verify signature.asc), gpg will look for a
similarly named data file in the same directory where you saved signature.asc.
Is that data file (the signed email) present there or is it still in your email
client ?  Since gpg replies that 'no valid opengpg data found' it would seem
that you saved the signature.asc file in some convenient place completely
removed from the email concerned and gpg couldn't make the connection.
In any case, the Beckus signed emails do check fine with good signature in my
thunderbird/enigmail client.

@_date: 2015-02-16 22:14:07
@_author: Philip Jackson 
@_subject: moving up from 2.0.26 to 2.1.1 
I passed an interesting Sunday afternoon : removed gnupg2.0.26 and attempted to
replace it with gnupg-2.1.2.  The experience was not entirely successful.
I got the updated libraries installed using configure/make/checkinstall.  I used
checkinstall because various howto articles on ubuntu's wiki recommend it and
deprecate the older 'make install'.
Checkinstall offered the advantage (or so it seemed to me) of producing a deb
package which when installed could be easily identified by the package
management system - all the easier to remove it later if needed.  Sure enough,
for the libraries involved, Synaptic Package Manager recognizes these packages
installed in the /usr/local/... region of the file system.
However, when it came to using checkinstall on the gnupg-2.1.2 build, the deb
package installed itself OVER the distro's gnupg-1.4.16. So the end result was a
gain of 2.1.2 together with a loss of 1.4.16.
Eventually, after re-installing 1.4.16 for a third time, and going back to 'make
install', I got 2.1.2 installed without losing 1.4.16.
2.1.2 started up and looked good until I tried to do something with it and then
it could not get gpg-agent running :
gpg-agent: "error while loading shared libraries: libnpth.so.0: cannot open
shared object file: No such file or directory"
libnpth.so.0 is certainly present in /usr/local/lib/.
Then I ran out of time - put the distro standard version back into service and
went back to life (until next time).

@_date: 2015-02-27 12:57:38
@_author: Philip Jackson 
@_subject: How to send a key to a keyserver? 
I cut and pasted your command string and then substituted my key identity for
yours.  It worked ok.  I tried the long id version like you  used and also the
short id version.  All worked ok.
So maybe it was just a keyserver glitch ?

@_date: 2015-01-04 14:39:50
@_author: Philip Jackson 
@_subject: How to upgrade from 1.14.16 to 2.0.26 without duplicating, and 
You don't need to worry greatly.  Gnupg 1.4.16 and gnupg 2.0.26 can co-exist on
the same machine with no problem.
I am in exactly the same case with Ubuntu.  I did the same as you and Enigmail
immediately picked up the 2.0.26 gpg2 which it uses with no problems.
I tend to use 1.4.16 from the command line.
However, the next step is to to move to gnupg 2.1 and that cannot co-exist with
2.0 versions.

@_date: 2015-01-05 21:52:36
@_author: Philip Jackson 
@_subject: Key generation, subkeys and improved documentation 
It is possible to create keys larger than 4096.  When I was on Windows, there
was a discussion on the gpg4win forum which gave steps to create an 8192 key
pair.  I followed the procedure out of curiosity and I do now have an 8192 key
which I've never used (for various reasons).

@_date: 2015-01-24 20:05:02
@_author: Philip Jackson 
@_subject: GPA fails to verify certain .asc files 
Using GPA 0.9.4 in linux.
I downloaded a file and its signature as a .asc from a website that I have used
many times.  While looking at the spelling of the filename, I accidentally
clicked on the signature file and launched GPA so decided to use it to verify
the download.  GPA gave me a 'bad' status.
The file verified as a good signature at the command line.
When I checked, I found that a signature "filename.asc" could be generated by
several means using gpg and gpg2 :
gpg --clearsign test1.txt
gpg --clearsign -a test1.txt
gpg --sign -a test1.txt
gpg --detach-sign -a test1.txt
each command/option gave a signature file test1.txt.asc
The last one, generated using '--detach-sign -a' could not be verified in GPA,
giving a 'bad' status.  All four could be verified correctly in the command line.
When opened in a text editor, the downloaded signature file had a similar
structure to the one made using the -ba command/option.
So it appears to be a bit hit and miss trying to use GPA to verify downloaded
.asc signatures.

@_date: 2015-01-24 22:23:41
@_author: Philip Jackson 
@_subject: GPA fails to verify certain .asc files 
I doubt the failure is anything caused by gnupg 2.1 (unless maybe the file I
downloaded was signed under 2.1.
I am using 2.0.26 and 1.4.16 and I have signed and tested quite a few files
trying to find out why GPA will verify some but not others.
The only ones I can sign (with cli)  and then fail to verify with GPA are when I
use the  "gpg --detach-sign -a" command and option.  Such signature files will
verify perfectly well with the command line but not with the GPA gui.
--batch doesn't come into the question either.  And in every case, the matching
data file.txt was in the same directory together with the signature file.txt.asc
Other signature files (.sig, .gpg) were not affected.
My point was that when a file with name like filename.tar.xz.asc is downloaded
with its data file of similar name and someone tries to verify it using GPA,
they could get a false 'bad' signature response from GPA.

@_date: 2015-01-25 14:27:46
@_author: Philip Jackson 
@_subject: GPA fails to verify certain .asc files 
I'm using GPA 0.9.4 which was available within my distro which is UbuntuStudio
I use gnupg 1.4.16 which is the standard issue with my distro.
I tried gnupg 2.0.22 which was the standard offered by my distro but I couldn't
get their installation to work at all and I concluded that there must be
something wrong with it so I downloaded and compiled/installed myself 2.0.26
last summer (ish) and this worked fine with Thunderbird/enigmail (so far).

@_date: 2015-01-25 14:32:35
@_author: Philip Jackson 
@_subject: GPA fails to verify certain .asc files 
Thanks Damien - this looks like the issue I was facing.  I don't habitually use
GPA.  I did on this occasion because I accidentally opened GPA when I clicked
inadvertently on the downloaded signature file - so I decided to use GPA to
verify and got the 'bad' signature.
I'll try and upgrade the GPA.

@_date: 2015-01-25 14:49:58
@_author: Philip Jackson 
@_subject: GPA fails to verify certain .asc files 
You are right, Peter, about the signed and detached being different cases.  I
did not know then that GPA 0.9.4 couldn't tell the difference between signed
files and detached signature files all having same .asc extension.
Normally I verify the download with the command line but to avoid typos in a
lengthy and complicated file name, I was copying and pasting the name from the
file manager display and I accidentally clicked on the name and caused GPA to open.
This is an indicator of the risks of having out of date versions of an
application that you don't normally use anyway still remaining on your system.
I'm sorry if I've wasted people's time with a worry from the past that no longer

@_date: 2015-03-05 13:22:24
@_author: Philip Jackson 
@_subject: where can one find an official gnupg project statement on the 
Wow .... at last someone has said it.  What a good idea !! For gnupg 2.1.2 as
well ...
This might encourage distros to be a little more adventurous and also spread the
workload from distro maintainers to include other volunteers.
At present, the concensus of many threads is that encryption in general is just
too difficult for the average email user to use willingly and successfully.  The
'average email user' just has his burden increased exponentially if he has to
build everything from source as well in order to follow the progress of the

@_date: 2015-03-14 17:52:54
@_author: Philip Jackson 
@_subject: Making the case for smart cards for the average user 
Geographic distribution of the product seems to be limited to US only - at least
for your sponsors.

@_date: 2015-03-26 15:20:24
@_author: Philip Jackson 
@_subject: upgrading v1 to v2 
I have a ubuntu flavour 14.04 and gnupg2 is certainly available in its
repository as well as gnupg1.1.16
You should easily be able to find 2.0.22 in 14.04.
In a few weeks, you'll be able to get 15.04 (I suppose) and this could have
something later than 2.0.22.

@_date: 2015-05-18 14:51:59
@_author: Philip Jackson 
@_subject: Ohhhh jeeee: can't encode a 512 bit MD into a 608 bits frame 
Using UbuntuStudio 1404 (and updates), gnupg 1.4.16 and gnupg2 2.0.22 (ubuntu
I came across this line (see subject) in an enigmail debug log recently and it
was held as the likely cause of the display of an alertbox containing absolutely
no information.
Now today, while using the command line to check some public keys, I came across
the same message.
using :
gpg -k  : this gives what appears to be a normal listing terminating normally.
gpg2 -k : gives a shorter listing which is terminated by :
What causes this with gpg2 and not with gpg and what does it mean ?  How should
I recover this situation ?

@_date: 2015-05-19 23:18:20
@_author: Philip Jackson 
@_subject: Ohhhh jeeee: can't encode a 512 bit MD into a 608 bits frame 
I do have SHA-512 set as first preference in gpg.conf for both "message digest
algorithm used when signing a key" and for "personal-digest-preferences"
My key and sub-keys are RSA2048 - I didn't think that would be classed as a
small key.  And this message doesn't seem to me to have anything to do with signing.
I first saw this message in an enigmail debug log after having received an
enigmail alertbox containing absolutely no information.  The alertbox appeared
when I opened the next message in a recent thread of the gnupg-users mail list.
 The message was signed by its sender but enigmail would not display the key
Patric B suggested that the cause of the blank alertbox was this line in the
debug log :
gpg: Ohhhh jeeee: can't encode a 512 bit MD into a 608 bits frame
A couple of days' later, I wanted to look at my public keyring contents so I
entered :  gpg2 -k    and the listing stopped short with the following :
gpg: Ohhhh jeeee: can't encode a 512 bit MD into a 608 bits frame
Aborted (core dumped)
134 philip at philip-desktop:~$
(134 being, I suppose, the error return)
This does not happen with gpg -k  (ie using gnupg 1.4.16)
None of this is directly connected with attempting to sign a key (which I
haven't done for several months).

@_date: 2015-05-21 19:27:55
@_author: Philip Jackson 
@_subject: Ohhhh jeeee: can't encode a 512 bit MD into a 608 bits frame 
Thanks for that Werner.  I found the key causing the problem.  I compared the
output of gpg -k and gpg2 -k and then tried gpg2 --list-sigs on the first key
missing from the gpg2 listing.
The --list-sigs failed with the same 'Ohhhhh jeeeee..." message.
The key ID was 0x6e767393
gpg2 --delete-keys 0x6e767393  also failed and gave the same "Ohhhh jeeee..."
message - that surprised me but the same command with gpg worked ok
Once that key was eliminated from the public keyring, gpg2 -k listing runs to
completion correctly.
And also the keyID which enigmail Key Management would not display, now displays
correctly.  That key was not the one causing the problem. (The problem key had
not been used to sign the key which would not display so I don't understand the
connection between the two events.)
Is it normal that gpg2 would not delete the key causing the problem ?  If that
is so, then we'll need to keep a copy of gnupg 1.xxx for keyring management.

@_date: 2015-05-27 13:53:15
@_author: Philip Jackson 
@_subject: Ohhhh jeeee: can't encode a 512 bit MD into a 608 bits frame 
You're right - this key has an ECC subkey for signing.  I've imported this key
into another pc using Deb8, gnupg 2.1.3, Icedove and enigmail 1.8.2 and it
doesn't cause any problem on that setup.
I tried to re-import it into the original desktop system to see if the problem
recurred.  (I should have done that before writing the last mail, to confirm
fault). With the original desktop : gpg 1.4.16 and gpg2 2.0.22, Thunderbird with
enigmail 1.8.2 :
- enigmail filed to import the key
- gpg2 failed with the message
gpg2 --recv-keys 0x6e767393
gpg: requesting key 0x6E767393 from hkp server pool.sks-keyservers.net
Version: SKS 1.1.5
gpg: armour header:
Comment: Hostname: sks.alpha-labs.net
gpg: armour header:
gpg: can't handle public key algorithm 19
gpg: pub  4096R/0x2A234ABC6E767393 2013-10-08  Jacky Alcin? gpg: key 0x2A234ABC6E767393: removed multiple subkey binding
gpg: can't handle public key algorithm 22
gpg: can't handle public key algorithm 18
gpg: Ohhhh jeeee: can't encode a 512 bit MD into a 608 bits frame
Aborted (core dumped)
- gpg imported it ok
- gpg -k  runs to complete listing showing the problem key as the last one in
the listing (which it is)
-gpg2 -k  runs listing but stops just before the problem key which it does not
list and gives this same message :
gpg: Ohhhh jeeee: can't encode a 512 bit MD into a 608 bits frame
Aborted (core dumped)
- enigmail will not list this key
I have other keys in my public keyring which also have ECC subkeys and these do
not cause any difficulty either with enigmail or gpg2.0.22
So far it is only key 0x6e767393 which causes the problem.

@_date: 2015-05-27 15:24:10
@_author: Philip Jackson 
@_subject: Ohhhh jeeee: can't encode a 512 bit MD into a 608 bits frame 
One of the problems with using linux distribution packages.  The latest for
Ubuntu 1404 is 2.0.22-3ubuntu1.3 which I have.  Ubuntu 1404 is the current
LongTermSupport version.
One of the standard advice replies given on this list is to stick to the
official packages but these move like the wheels of eternity.
Ubuntu's latest active development version is Wily Werewolf and that will have
2.0.26 - so it might take a decade or so before gnupg2.1.xxx gets into the loop.

@_date: 2015-05-28 12:44:08
@_author: Philip Jackson 
@_subject: error computing keygrip 
Using gnupg 2.1.3 on an old portable with Debian Jessie.
gpg -K lists all private keys
gpg2 -K lists all private keys and follows this with eight identical lines of
"gpg: error computing keygrip"
'gpg2 -K myname'  lists all private keys without any error messages
gpg2 --with-keygrip -K  lists all private keys with their keygrips followed by
the 8 lines of error messages.
Again, qualifying the command line instruction by adding the username at the end
gets the keygrips printed without the error messages.
So it doesn't look like gnupg has any real problem with the computation of keygrips.
I fear I may have done something which introduced this error when I decided to
test the use of my smartcard on the portable.  I removed the secring and pubring
and the files which indicated that 2.1.3 had already carried out the migration.
I copied across from my desktop machine the secring with the smartcard stubs, an
updated pubring and updated trustdb and then set 2.1.3 going again.  The
smartcard seems to work fine on the portable. And so does 2.1.3 except for the
'error calculating keygrip' messages under restricted circumstances.
Any ideas about what might have gone wrong and why adding the username gets the
same job done without any error messages ?

@_date: 2016-04-27 22:48:40
@_author: Philip Jackson 
@_subject: Website usability issue 
I have a similar setup on an old laptop (Debian 8.4 Jessie with
Iceweasel 38.7.1esr-1-deb8u1) with touchpad.  But I don't see the
problem you outline with the dropdown menus on gnupg.org (at least I
presume you are writing about gnupg.org ?).
I also use a wireless mouse but also no problem.  And I'm cafeine
deficient so move very slowly at this time of day :-)

@_date: 2016-09-08 18:44:03
@_author: Philip Jackson 
@_subject: smart card no longer works 
I have changed from Ubuntu 14.04 to a clean install of Ubuntu 16.04.1
This comes with gpg 1.4.20 and gpg2 2.1.11 as distro standards.
I brought into the new installation my keyfiles and config files and
The private-keys-v1.d directory is populated with a series of
xyzzz123333.key files
The problem I have is that I cannot any longer decrypt files and this
manifests in 2 ways :
1. with gpg2 :    gpg2 --card-status
gpg: error getting version from 'scdaemon': No SmartCard daemon
gpg: OpenPGP card not available: No SmartCard daemon
2. with gpg :   gpg --card-status gives a lengthy and apparently good
But the command  gpg -o output_file -d input_file.gpg
seems to be proceeding ok and puts up a pinentry window (anonymous)
asking for my pin.
I enter the pin (and I have double checked that it is correct) and get
It's a real PITAa failure :
gpg: ccid_transceive failed: (0x1000a)
gpg: apdu_send_simple(0) failed: card I/O error
gpg: using subkey 0x79D467BFF5DF6C91 instead of primary key
gpg: encrypted with 2048-bit RSA key, ID 0x79D467BFF5DF6C91, created
      "Philip Jackson (Jan 2013 +) "
gpg: public key decryption failed: general error
gpg: decryption failed: secret key not available
Its a real PITA that a simple clean installation of an OS won't give a
working smartcard operation. It looks like the whole smartcard thing is
a little lacking in robustness.
[evidently, I can no longer sign emails with enigmail either]
So if someone could indicate where to start looking for the problems
with gpg2 and gpg, I'd be very grateful.

@_date: 2016-09-09 16:52:34
@_author: Philip Jackson 
@_subject: :-(( Re: smart card no longer works 
As I recall, in Ubuntu 14.04 I just used the in-stock driver in gnupg.
I have now installed the missing scdaemon deb package and that makes a
big improvement as far as gpg2 is concerned.
Both gpg and gpg2 --card-status return essentially the same data which
looks good.
For decrypting a file, both gpg and "gpg2 -o output_file -d
input_file.gpg" fail with the same message :
gpg: public key is 0x79D467BFF5DF6C91
gpg: using subkey 0x79D467BFF5DF6C91 instead of primary key
gpg: using subkey 0x79D467BFF5DF6C91 instead of primary key
gpg: encrypted with 2048-bit RSA key, ID 0x79D467BFF5DF6C91, created
      "Philip Jackson (Jan 2013 +) "
gpg: public key decryption failed: Operation cancelled
gpg: decryption failed: No secret key
Since in my first attempts, the pinentry window which came up was
anonymous, I supposed there might be a problem with the choice of
pinentry.  So I put "pinentry-program /usr/bin/pinentry-gtk-2" into the
gpg-agent.conf file.
The pinentry dialogue is no longer anonymous, it does say
pinentry-gtk-2, but the result is the same, no decrypt.

@_date: 2016-09-10 14:27:50
@_author: Philip Jackson 
@_subject: :-(( Re: smart card no longer works 
I don't think the pinentry is the problem. I have tried several versions
and no matter if I enter the pin via dialogue box or on the command
line, the result is the same.
I verified the pin using gpg --card-edit & it is ok.
I think the problem must be more connected with how I introduced my
secring and pubring to the new distro installation when I installed
ubuntu 16.04
I have tried reverting to my old secring.gpg file from before starting
with the smartcard (back in 2014), the one with the full key and not the
'stubs'.  This enables me to run the file decrypt command but of course
I have to enter the old full passphrase rather than the six digit pin of
the smartcard.

@_date: 2016-09-11 12:28:11
@_author: Philip Jackson 
@_subject: :-(( Re: smart card no longer works 
No - how do you do that ?  I am just a user nunky-dunk.
Not specifically before doing the clean install of 1604. I didn't know I
had to. I backed up all my home directory and saved a few other things
that occurred to me but nothing specifically for gnupg (except the old
.gnupg in the home directory).
I copied into the .gnupg directory of the new installation the files
that I have copied over onto other machines in the past : pubring,
secring,trustdb, and conf files.
The screen output was just what gpg (1.4.20) displayed. After I solved
the missing scdaemon issue, gpg2 (2.1.11) produces the same output.
There doesn't appear to be anything wrong with the encrypted file
because it decrypts fine (as I noted) using my pre-smartcard secring.
It looks like I got the process of moving to a new installation wrong.
So I am in need of a precise process description to start again and do
it correctly.

@_date: 2016-09-11 22:36:46
@_author: Philip Jackson 
@_subject: :-(( Re: smart card no longer works 
The smartcard is a version2.0 made by ZeitControl and bought from
Kernel-concepts and used with a SCT3512 usb holder from SCM.
I bought it in or around August / September 2014 and installed it using
UbuntuStudio1404 LTS with gnupg 2.0.22.  The keys were generated in 2013
using the gnupg2 stuff in Windows 7 except for a couple of the sub keys
which were made on the card in October 2014.
I guess I'll have to dig in the archives and see if I can find records
of how I got it working back in 2014.

@_date: 2016-09-17 15:18:07
@_author: Philip Jackson 
@_subject: :-(( Re: smart card no longer works 
Thank you Stephan - got it working.  For the record, I did not undo
anything that I had previously done. Just left the installation as it
was then did :
gpg2 --import /path-to-my-key/mykey.asc
inserted smartcard
gpg2 --card-status
then run tests. Can now sign and encrypt emails, sign and encrypt and
decrypt files although verify on its own causes me a problem but I
shouldn't think that is connected with the smartcard.

@_date: 2016-09-20 22:43:17
@_author: Philip Jackson 
@_subject: :-(( Re: smart card no longer works 
Yes, Stephan, that seems to have solved the issues I had with
verification. The command you suggested does not work as you wrote it -
I got words to the effect that the command was not recognised.
After consulting man gpg2, I tried the following and this worked.
gpg2 --import --import-options keep-ownertrust

@_date: 2017-09-09 14:54:23
@_author: Philip Jackson 
@_subject: Unable to sign or decrypt with card 
gpg (GnuPG) 2.1.11  in UbuntuStudio 16.04 LTS
libgcrypt 1.6.5
At the end of April, I made a detached signature of a file that I was
distributing. Today I updated that file and tried to make another
detached signature. The operation failed with a not very informative
error message :
gpg: signing failed: Operation cancelled
I checked the card-status and it seemed normal so I encrypted a test
file and that was ok. The PIN is certainly correct.
Then I tried to decrypt the test file and the operation failed with a
better message :
gpg: public key decryption failed: Operation cancelled
gpg: decryption failed: No secret key
So it looks like my secret key has vanished from sight and contact of
gpg in the past 4 months although I have changed strictly nothing in my
setup in that period - except regular UbuntuStudio security updates and
I don't recall having seen and gpg stuff go through.
gpg2 -K does list my secret key -
Suggestions as to how to check and correct this situation would be

@_date: 2017-09-11 18:57:16
@_author: Philip Jackson 
@_subject: Unable to sign or decrypt with card 
I don't think the pinentry is a problem. When I launch the command to
decrypt a document, the pinentry dialog box opens, I enter the pin and
click ok and the operation promptly fails.
I looked in gpg-agent.conf and found that I had commented out the
pinentry-program line back around March 2015 when I was trying to move
from gpg 2.0.22 to 2.0.26 and I was getting two pinentry dialog boxes
when trying to decrypt emails in enigmail. Commenting out the line in
gpg-agent.conf solved this problem at the time and the file has remained
like this ever since.
However, just to check, I uncommented it (and pinentry-gtk-2 is
installed on the machine) :
pinentry-program /usr/bin/pinentry-gtk-2
and tried again to decrypt the document.  The only difference was that
this time the pinentry dialog box carried the name of 'pinentry-gtk-2'
instead of being anonymous. But the operation failed just the same.
Which doesn't mean much to me, I'm afraid.
Yes, pinentry gives 'OK Pleased to meet you' and a prompt. Then entering
getpin produces the pinentry box in which I enter the pin and the next
line is
D zzzzzz  (where zzzzzz is the pin I entered) followed by
OK, I added this to gpg-agent.conf and I now have a log file of a single
attempt to decrypt a sample file with command :
gpg2 -v -o encrypt-decrypt -d encrypt_test.gpg
This produced the pinentry dialog into which I put my pin and the
operation promptly failed with this on the screen :
# off=0 ctb=85 tag=1 hlen=3 plen=268
:pubkey enc packet: version 3, algo 1, keyid 79D467BFF5DF6C91
gpg: public key is 0x79D467BFF5DF6C91
gpg: no running gpg-agent - starting '/usr/bin/gpg-agent'
gpg: waiting for the agent to come up ... (5s)
gpg: connection to agent established
gpg: using subkey 0x79D467BFF5DF6C91 instead of primary key
# off=271 ctb=d2 tag=18 hlen=2 plen=0 partial new-ctb
:encrypted data packet:
gpg: using subkey 0x79D467BFF5DF6C91 instead of primary key
gpg: encrypted with 2048-bit RSA key, ID 0x79D467BFF5DF6C91, created
      "Philip Jackson (Jan 2013 +) "
gpg: public key decryption failed: Operation cancelled
gpg: decryption failed: No secret key
I have the log file which I attach.
It shows  a number of reports of the same error  (lines 89,91,97,99,101)
ERR 83886254 Unknown option , before it asks me for the pin
(line 111). It says 'confidential data not shown' three times but I only
entered the pin once.
Can you determine anything from this ?

@_date: 2017-09-15 00:53:23
@_author: Philip Jackson 
@_subject: Unable to sign or decrypt with card 
Card status seems to be ok :
gpg --card-status
Application ID ...: D2760001240102000005000028700000
Version ..........: 2.0
Manufacturer .....: ZeitControl
Serial number ....: 00002870
Name of cardholder: Philip Jackson
Language prefs ...: en
Sex ..............: male
URL of public key : [not set]
Login data .......: [not set]
Private DO 1 .....: [not set]
Private DO 2 .....: [not set]
Signature PIN ....: forced
Key attributes ...: 0R 0R 0R
Max. PIN lengths .: 32 32 32
PIN retry counter : 3 0 3
Signature counter : 406
Signature key ....: 60FF 4A45 7DD4 C4E2 CCAB  D98D 5154 49A8 9A99 D8BD
      created ....: 2014-10-28 23:13:28
Encryption key....: C04C 016C 3460 2B42 CDBB  2566 79D4 67BF F5DF 6C91
      created ....: 2014-10-28 23:18:24
Authentication key: [none]
gpg: using subkey 0x515449A89A99D8BD instead of primary key
General key info..: pub  2048R/0x515449A89A99D8BD 2014-10-28 Philip
Jackson (Jan 2013 +) sec   2048R/0x26BD500A23543A63  created: 2013-01-22  expires: never
ssb   2048R/0x2ACB19812A3EC90F  created: 2013-01-22  expires: never
ssb>  2048R/0x515449A89A99D8BD  created: 2014-10-28  expires: never
                      card-no: 0005 00002870
ssb>  2048R/0x79D467BFF5DF6C91  created: 2014-10-28  expires: never
                      card-no: 0005 00002870
I created the scdaemon.conf file as you suggested and then ran a decrypt
test :
gpg2 -v -o encrypt_test_decrypt -d encrypt_test.gpg
this failed just as previously stated in the earlier post. The debug log
covering the period of this test is attached : scd_decrypterror.log
I see on line 377 the request for the PIN and on line 471 that the
operation failed.
Perhaps there is something you can see which explains the problem ?
Thanks for your help.

@_date: 2018-01-07 17:10:25
@_author: Philip Jackson 
@_subject: symmetric encryption is not working 
It would seem that the command '-d' is missing.
gpg -d testfile.gpg
works for me. And requests the password before decrypting.

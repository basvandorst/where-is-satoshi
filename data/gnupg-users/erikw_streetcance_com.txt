
@_date: 2000-09-18 10:25:56
@_author: Erik Wessel 
@_subject: encrypting as "nobody" 
I have a perl CGI script which I need to have encrypt data for me. Since it's a CGI it runs as "nobody". But on my system "nobody" doesn't have a home directory.  So I tried using the --homdir flag (--homedir erik) to point to a different users home directory, but when I do, I get this error in my http error log:
gpg: keyblock resource `erik': file open error
gpg: keyblock resource `erik': file open error
gpg: erik: skipped: public key not found
gpg: [stdin]: encryption failed: public key not found
I know this decreases security, but on the off chance it would work, I made my pubring.gpg readable by all, but I still get the same error.
I can get the script to work fine when I run it under my user ID from the command line.
Does anyone know what I'm missing?
Erik Wessel
STREET | CANCE
MARKETING COMMUNICATIONS
233  North  Water  Street
Milwaukee  WI  53202
ph   414 | 765 | 0333
fax  414 | 765 | 1207

@_date: 2000-09-21 11:45:13
@_author: Erik Wessel 
@_subject: Cannot Create a Real Name 
It looks like you're trying to put all the information into the Real Name field, rather than just your real name. It will ask you for each of those bits of info in turn.  A session should look similar to this
Real Name: Jeff Rudichuck
Comment: Sys Admin
Email Address: rudichj

@_date: 2000-09-21 15:25:03
@_author: Erik Wessel 
@_subject: CGI encryption (again) 
Thanks everyone for you earlier suggestions.  I've tried several methods, but the most promising was Jack McKinney's suggestion that I create a directory for the web server user.  This I have done, even logging in as that user and importing the keys and everything from the command line as the web server user ('nobody', in this case). When logged on as 'nobody' I can create keys and encrypt on keys I've imported.  But as soon as i have my CGI script try it, it tells me:
gpg: fatal: ~/.gnupg: can't create directory: No such file or directory
I've checked to make sure that there's a .gnupg directory already, and that it, and everything in it, is readable by 'nobody', but nothing can get rid of this error in my web server log.  This is really getting out of hand.  Any help would be appreciated.
Erik Wessel
STREET | CANCE
MARKETING COMMUNICATIONS
233  North  Water  Street
Milwaukee  WI  53202
ph   414 | 765 | 0333
fax  414 | 765 | 1207

@_date: 2000-09-26 13:26:05
@_author: Erik Wessel 
@_subject: gpg/cgi 
The solution which finally worked for me was to set the HOME environment variable in my script:
$ENV{'HOME'} = '/path/to/nobodys/directory';
It apparently doesn't matter what user you run the script under if this variable is not set, it will fail.  It wasn't set by default on my server, which is a pretty run-of-the-mill apache 1.3.12 .  Hope this helps.
Erik Wessel
STREET | CANCE
MARKETING COMMUNICATIONS
233  North  Water  Street
Milwaukee  WI  53202
ph   414 | 765 | 0333
fax  414 | 765 | 1207

@_date: 2000-09-26 13:30:43
@_author: Erik Wessel 
@_subject: PGP can't decript messages encripted with GPG 
It seems you're trying to import a secret ring created by GPG into PGP and then encrypt on that in PGP.  What I would do is create the key in PGP, import the public key into GPG.  Use that key to encrypt in GPG, which PGP should then be able to decrypt.
More generically, always decrypt with the software which created the key in the first place.
Hope this helps.
Erik Wessel
STREET | CANCE
MARKETING COMMUNICATIONS
233  North  Water  Street
Milwaukee  WI  53202
ph   414 | 765 | 0333
fax  414 | 765 | 1207

@_date: 2000-09-18 10:25:56
@_author: Erik Wessel 
@_subject: encrypting as "nobody" 
I have a perl CGI script which I need to have encrypt data for me. Since it's a CGI it runs as "nobody". But on my system "nobody" doesn't have a home directory.  So I tried using the --homdir flag (--homedir erik) to point to a different users home directory, but when I do, I get this error in my http error log:
gpg: keyblock resource `erik': file open error
gpg: keyblock resource `erik': file open error
gpg: erik: skipped: public key not found
gpg: [stdin]: encryption failed: public key not found
I know this decreases security, but on the off chance it would work, I made my pubring.gpg readable by all, but I still get the same error.
I can get the script to work fine when I run it under my user ID from the command line.
Does anyone know what I'm missing?
Erik Wessel
STREET | CANCE
MARKETING COMMUNICATIONS
233  North  Water  Street
Milwaukee  WI  53202
ph   414 | 765 | 0333
fax  414 | 765 | 1207

@_date: 2000-09-21 11:45:13
@_author: Erik Wessel 
@_subject: Cannot Create a Real Name 
It looks like you're trying to put all the information into the Real Name field, rather than just your real name. It will ask you for each of those bits of info in turn.  A session should look similar to this
Real Name: Jeff Rudichuck
Comment: Sys Admin
Email Address: rudichj

@_date: 2000-09-21 15:25:03
@_author: Erik Wessel 
@_subject: CGI encryption (again) 
Thanks everyone for you earlier suggestions.  I've tried several methods, but the most promising was Jack McKinney's suggestion that I create a directory for the web server user.  This I have done, even logging in as that user and importing the keys and everything from the command line as the web server user ('nobody', in this case). When logged on as 'nobody' I can create keys and encrypt on keys I've imported.  But as soon as i have my CGI script try it, it tells me:
gpg: fatal: ~/.gnupg: can't create directory: No such file or directory
I've checked to make sure that there's a .gnupg directory already, and that it, and everything in it, is readable by 'nobody', but nothing can get rid of this error in my web server log.  This is really getting out of hand.  Any help would be appreciated.
Erik Wessel
STREET | CANCE
MARKETING COMMUNICATIONS
233  North  Water  Street
Milwaukee  WI  53202
ph   414 | 765 | 0333
fax  414 | 765 | 1207

@_date: 2000-09-26 13:26:05
@_author: Erik Wessel 
@_subject: gpg/cgi 
The solution which finally worked for me was to set the HOME environment variable in my script:
$ENV{'HOME'} = '/path/to/nobodys/directory';
It apparently doesn't matter what user you run the script under if this variable is not set, it will fail.  It wasn't set by default on my server, which is a pretty run-of-the-mill apache 1.3.12 .  Hope this helps.
Erik Wessel
STREET | CANCE
MARKETING COMMUNICATIONS
233  North  Water  Street
Milwaukee  WI  53202
ph   414 | 765 | 0333
fax  414 | 765 | 1207

@_date: 2000-09-26 13:30:43
@_author: Erik Wessel 
@_subject: PGP can't decript messages encripted with GPG 
It seems you're trying to import a secret ring created by GPG into PGP and then encrypt on that in PGP.  What I would do is create the key in PGP, import the public key into GPG.  Use that key to encrypt in GPG, which PGP should then be able to decrypt.
More generically, always decrypt with the software which created the key in the first place.
Hope this helps.
Erik Wessel
STREET | CANCE
MARKETING COMMUNICATIONS
233  North  Water  Street
Milwaukee  WI  53202
ph   414 | 765 | 0333
fax  414 | 765 | 1207

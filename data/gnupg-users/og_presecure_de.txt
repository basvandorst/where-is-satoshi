
@_date: 2003-03-18 11:56:56
@_author: Olaf Gellert 
@_subject: v4-only (2003-03-09) keyanalyze results 
Thanx Jason, very interesting. It seems that most of the
old-timers in security still use v3-keys (what sounds
perfectly reasonable if you follow the old general rule
of networking: be moderate in what you send, and be
complaisant in what you accept).
In the long run the v3-keys will be used less and less
for sure, but until now it seems they are still the
heart of the web of trust...

@_date: 2004-08-26 10:37:07
@_author: Olaf Gellert 
@_subject: Automatic Encryption 
Hi all,
I am trying to use GPG for automatic encryption of files,
called by a script. My first attempt would be something
gpg --batch -a --yes -notty -r 0x799241C1 --encrypt file
What I do get is:
gpg: 799241C1: There is no indication that this key really belongs to the owner
gpg: todo: encryption failed: unusable public key
Ok, seems that GPG has a look into the trustdb.
But on this system I do not want to maintain a trustdb,
so I would like to tell GPG "yes, sure, do as I said"
on the command line.
Any ideas?
  Olaf
P.S.: Sometimes I wonder what the options "--batch" and
      "-notty" and "--yes" are good for if they are not
      always evaluated by GPG. If I call GPG with
      gpg --yes -notty -r 0x799241C1 --encrypt todo
      I am asked if gpg should really use this key. Well,
      why does GPG assume I did not mean "YES" and "NOTTY"?

@_date: 2005-08-12 10:02:11
@_author: Olaf Gellert 
@_subject: [outlgpg] Outlook 2003 problems 
But you could do a screenshot of the window, I guess!

@_date: 2005-08-17 11:48:35
@_author: Olaf Gellert 
@_subject: Signature verification fails with GPG 1.4.0 
Hi all,
I tried to verify the detached signature for a file
using GPG 1.4.0 (on SuSE 9.3). GPG told me that it was
a bad signature:
gpg: Signature made Mon 01 Aug 2005 11:29:02 PM CEST using RSA key ID 23D2FAC3
gpg: BAD signature from "Prelude Hybrid IDS Archives Verification Key
Well, right now I installed GPG 1.4.2 and the signature
is validated successfully:
gpg: Signature made Mon 01 Aug 2005 11:29:02 PM CEST using RSA key ID 23D2FAC3
gpg: Good signature from "Prelude Hybrid IDS Archives Verification Key
Some bug that was fixed recently? This is a little
bit weird... The files were:
and they were transferred correctly (otherwise gpg 1.4.2 should
fail to validate the signature, too). Could this be related to
the signature being a "textmode" signature (on a binary file)?
Cheers, Olaf

@_date: 2005-02-01 08:01:23
@_author: Olaf Gellert 
@_subject: gpgsm: building of certificate chains 
Hi list,
I was just experimenting with cross-certificates and
came across a little strange behaviour of gpgsm. Obviously
the building of certificate chains (eg from enduser to
subCA to rootCA) is influenced by the order of the
certificates in the keyring! In the case of cross-certificates
this can lead to different validation results depending
on the order of imported keys...
Example: I have the following certificates:
ranum gpgsm --list-keys | grep fingerprint
Secure memory is not locked into core
gpgsm: NOTE: THIS IS A DEVELOPMENT VERSION!
gpgsm: It is only intended for test purposes and should NOT be
gpgsm: used in a production environment or with production keys!
  fingerprint: 83:F2:31:0B:BF:DE:EB:0A:AF:8A:22:3D:E6:37:93:3A:C3:45:2E:1C
  fingerprint: 99:9B:C4:25:AB:88:59:D1:5F:B0:E1:39:5B:0F:98:19:3B:26:80:AE
  fingerprint: 44:C4:9C:82:1E:78:FA:86:53:78:2D:33:A1:41:28:E9:BF:C0:39:EE
  fingerprint: 26:10:10:4B:0A:D2:9A:06:78:97:D5:CF:D1:26:50:FD:C5:4B:EF:D1
  fingerprint: 52:81:29:C5:AD:64:5F:B6:A6:02:C1:D1:E1:E1:52:4B:5B:3A:97:DC
Now I try to verify a signed email:
ranum gpgsm --verify testetext.signed
Secure memory is not locked into core
gpgsm: NOTE: THIS IS A DEVELOPMENT VERSION!
gpgsm: It is only intended for test purposes and should NOT be
gpgsm: used in a production environment or with production keys!
gpgsm: Signatur erzeugt am 2005-01-31 16:47:13mittels Zertifikat ID C54BEFD1
gpgsm: CRLs not checked due to --disable-crl-checks option
gpgsm: Korrekte Signatur von "/CN=Test User B3/O=Test Organization B/C=DE/EMail=user    alias "user
Ok, now I change the order of the certificates by removing the
certificate 99:9B:C4:... and reimporting it. Result:
ranum gpgsm --verify testtext.signedlist-keys | grep fingerprint
Secure memory is not locked into core
gpgsm: NOTE: THIS IS A DEVELOPMENT VERSION!
gpgsm: It is only intended for test purposes and should NOT be
gpgsm: used in a production environment or with production keys!
  fingerprint: 83:F2:31:0B:BF:DE:EB:0A:AF:8A:22:3D:E6:37:93:3A:C3:45:2E:1C
  fingerprint: 44:C4:9C:82:1E:78:FA:86:53:78:2D:33:A1:41:28:E9:BF:C0:39:EE
  fingerprint: 26:10:10:4B:0A:D2:9A:06:78:97:D5:CF:D1:26:50:FD:C5:4B:EF:D1
  fingerprint: 52:81:29:C5:AD:64:5F:B6:A6:02:C1:D1:E1:E1:52:4B:5B:3A:97:DC
  fingerprint: 99:9B:C4:25:AB:88:59:D1:5F:B0:E1:39:5B:0F:98:19:3B:26:80:AE
And now I try to verify the signed text again:
ranum gpgsm --verify testtext.signed
Secure memory is not locked into core
gpgsm: NOTE: THIS IS A DEVELOPMENT VERSION!
gpgsm: It is only intended for test purposes and should NOT be
gpgsm: used in a production environment or with production keys!
gpgsm: Signatur erzeugt am 2005-01-31 16:47:13mittels Zertifikat ID C54BEFD1
gpgsm: Das Wurzelzertifikat ist nicht als vertrauensw?rdig markiert
gpgsm: Fingerprint=52:81:29:C5:AD:64:5F:B6:A6:02:C1:D1:E1:E1:52:4B:5B:3A:97:DC
gpgsm: DBG: BEGIN Certificate `issuer':
gpgsm: DBG:      serial: 00
gpgsm: DBG:   notBefore: 2005-01-12 12:37:40
gpgsm: DBG:    notAfter: 2007-01-12 12:37:40
gpgsm: DBG:      issuer: 1.2.840.113549.1.9.1=
CN=Test Root CA B1,O=Test Organization B,C=DE
gpgsm: DBG:     subject: 1.2.840.113549.1.9.1=
CN=Test Root CA B1,O=Test Organization B,C=DE
gpgsm: DBG:   hash algo: 1.2.840.113549.1.1.5
gpgsm: DBG:   SHA1 Fingerprint: 52:81:29:C5:AD:64:5F:B6:A6:02:C1:D1:E1:E1:52:4B:
gpgsm: DBG: END Certificate
gpgsm: after checking the fingerprint, you may want to add it manually to the li
st of trusted certificates.
gpgsm: invalid certification chain: Nicht vertrauensw?rdig
I would say, the certificate chains should be build using
an exhaustive search of the existing certificates, gpgsm
seems to try only the first match.

@_date: 2005-02-17 11:39:34
@_author: Olaf Gellert 
@_subject: Newsgroup signing error 
I do not know what all the others observe with your
signature. This is what my enigmail says:
UNTRUSTED Good signature from Jason Barnett , Key Id 0x74D2856A
So obviously enigmail is able to verify your
signature (only that your key is not trusted
by GPG, but the signatrue is alright).
I use Mozilla 1.7.3 and Enigmail 0.85.0.0
I attached a screenshot so you can see how the
email should look like. Maybe some others do have
difficulties verifying signatures? Or some
crappy mail transfer agent doing some changes
to the mail (like converting encodings, newlines,

@_date: 2005-02-24 18:34:45
@_author: Olaf Gellert 
@_subject: Chemnitzer Linuxtage 2005 
Yes, me and the other guys from DFN-CERT and PRESECURE,
a good opportunity to push your key far up in the web
of trust... :-)
I think there will be no explicit keysigning party
as in the last two years, so bring your keyinfos
(keyID, userID and fingerprint, and better a few
copies of this) and your passport with you...
my keyIDs: 4403EB31, 799241C1, 48285EB9 & AFD42D45

@_date: 2005-02-24 21:34:19
@_author: Olaf Gellert 
@_subject: Check if file is a key file 
What else could the file be? If I just use the unix command
"file" on some files, I already get the following:
.gnupg/pubring.gpg: data
.gnupg/secring.gpg: PGP key security ring
gellert.asc: PGP armored data public key block
So it does not recognize a GPG public keyring, but it
does recognize secret keyrings and ASCII-armored keys.
Or do you need something that really checks if the
file contains a VALID key?
Cheers, Olaf

@_date: 2005-02-27 10:22:00
@_author: Olaf Gellert 
@_subject: GPG scdaemon help 
Hi all,
just a request for a few short hints: I have some
USB-tokens (eg. Aladdin eToken Pro, Safenet iKey3000)
which seem to work with OpenSC. Is there any FAQ
or tutorial or helpful information on how to make
this work with the smartcard daemon of GPG?
  Olaf

@_date: 2005-01-20 18:10:40
@_author: Olaf Gellert 
@_subject: gpg-agent and trusted root certificates 
Hi all,
I was just trying out the X.509 stuff of recent
GPG versions and I was wondering, on what occasions
the gpg-agent will ask the user to verify new
root certificates.
I already included the option "allow-mark-trusted"
into the configuration. When I include the hash of
a root certificate manually into the trustlist.txt,
everything works. When I tell kleopatra to validate
the root certificate, kleopatra queries the agent to
do the job.
When gpg-agent logs the following, should it not
ask the user to verify the root certificate?
  7 - 2005-01-20 15:37:56 gpg-agent[4598.0x8085e78] DBG: <- HAVEKEY FB982E01EF2FE327A450FA5EB12B6172FBEBCD2F
  7 - 2005-01-20 15:37:56 gpg-agent[4598.0x8085e78] DBG: -> ERR 208 no secret key
  7 - 2005-01-20 15:37:56 gpg-agent[4598.0x8085e78] DBG: <- ISTRUSTED 0701EF37D0568429C057453D804646C3D016E660
  7 - 2005-01-20 15:37:56 gpg-agent[4598.0x8085e78] DBG: -> ERR 304 not trusted
  6 - 2005-01-20 15:37:56 gpgsm[6011.0x807d9c0] DBG: -> D
crt:i:2048:1:804646C3D016E660:20050112T123638:20070112T123638:00::1.2.840.113549.1.9.1= Root CA B1,O=Test Organization
Root CA B1,O=Test Organization B,C=DE::%0Auid:i::::::::::%0A
  6 - 2005-01-20 15:37:56 gpgsm[6011.0x807d9c0] DBG: -> OK
  6 - 2005-01-20 15:37:56 gpgsm[6011.0x807d9c0] DBG: <- BYE
  6 - 2005-01-20 15:37:56 gpgsm[6011.0x807d9c0] DBG: -> OK closing connection
[client at fd 6 disconnected]
  7 - 2005-01-20 15:37:56 gpg-agent[4598.0x8085e78] DBG: <- [EOF]
  7 - 2005-01-20 15:37:56 gpg-agent[4598]: handler for fd 6 terminated

@_date: 2005-01-21 00:45:29
@_author: Olaf Gellert 
@_subject: gpg-agent and trusted root certificates 
Well, as I said:
So I do have the entry in the config, but the
agent still does not query me. After some fiddling
on another system (importing certs, deleting them,
rebooting, ...) at some point it worked, but on
a clean new SuSE install, it does not. So the question
is: Are there any other conditions that may prevent
the agent from asking the user?
P.S.: By the way, I was really impressed by the
      new X.509 functionality, OCSP, LDAP, GUI,
      wow!

@_date: 2005-01-21 13:11:35
@_author: Olaf Gellert 
@_subject: gpg-agent and trusted root certificates 
Have a look at this log:
ranum ps aux | grep agent
ranum     5391  0.0  0.1  3324 1004 ?        S    12:59   0:00 gpg-agent --daemon --no-detach --allow-mark-trusted --keep-display /bin/bash /etc/X11/xinit/xinitrc
ranum     5791  0.0  0.1  2660  736 pts/2    S+   13:05   0:00 grep agent
So gpg-agent is running with --allow-mark-trusted.
And then:
ranum gpgsm --list-keys --with-validation 07:01:EF:37:D0:56:84:29:C0:57:45:3D:80:46:46:C3:D0:16:E6:60
Secure memory is not locked into core
gpgsm: NOTE: THIS IS A DEVELOPMENT VERSION!
gpgsm: It is only intended for test purposes and should NOT be
gpgsm: used in a production environment or with production keys!
Serial number: 00
       Issuer: /CN=Test Root CA B1/O=Test Organization B/C=DE/EMail=ca
      Subject: /CN=Test Root CA B1/O=Test Organization B/C=DE/EMail=ca
          aka: ca
     validity: 2005-01-12 12:36:38 through 2007-01-12 12:36:38
     key type: 2048 bit RSA
    key usage: certSign
 chain length: unlimited
  fingerprint: 07:01:EF:37:D0:56:84:29:C0:57:45:3D:80:46:46:C3:D0:16:E6:60
gpgsm: DBG: connection to agent established
  [Das Wurzelzertifikat ist nicht als vertrauensw?rdig markiert]
  [certificate is bad: Nicht vertrauensw?rdig]
secmem usage: 1344/16384 bytes in 2 blocks
No request window. Hmmm... The version is GPG 1.9.10.
  Olaf

@_date: 2005-01-27 20:53:30
@_author: Olaf Gellert 
@_subject: gpgsm for Windows 
Just a short question, I did not find anything like this
on my first short search:
Is there already a binary/port of gpgsm for windows?
 Olaf

@_date: 2005-01-29 00:17:16
@_author: Olaf Gellert 
@_subject: gpgsm for Windows 
Thanx, Werner. :-)
No worries, in this special case we are
only abusing it as a very simple solution
to store and retrieve certificates...

@_date: 2005-11-17 15:07:00
@_author: Olaf Gellert 
@_subject: Key Capabilities 
I have read about the following key capabilites:
- sign
- encrypt
- authenticate
- certification
When I generate an RSA key, GPG provides the capabilities
sign, encrypt and authenticate (in expert mode), but
not certification.
Is certification somethin that is actually implemented
or planned for the near future? What usage is expected
to depend on this capability?
Cheers, Olaf

@_date: 2005-11-18 12:29:04
@_author: Olaf Gellert 
@_subject: Key Capabilities 
Jep, I just stumbled on GPG not displaying it (because
I was just creating a key that will mainly be used to
sign other keys). Thanks, Christoph and David for enlighting

@_date: 2005-09-02 16:59:56
@_author: Olaf Gellert 
@_subject: PKCS#11 support for gpg-agent 
You are wrong in this regard: PGP is widely
adpopted (and what is your definition of
"the world"?). And it makes perfectly sense
to have both worlds.
OpenPGP offers a completely different trust
model which suits the needs of some users
very well (you can establish a web of trust
with anyone without overhead) while S/MIME
(or better: X.509) uses a centralized, CA-
based model. For some applications I would
never trust a commercial certification
authority, so in X.509 you have to operate
your own CA...
Both S/MIME and OpenPG are standards (S/MIME
v.1 was more or less proprietary stuff),
you might have a look at the according IETF
working groups (
Well, you might have a look at KMail, which
uses all the GPG 1.9 stuff. I was impressed
by having a key manager, a smart card daemon
and the easy interface of gpg-agent. This
framework does far more than any PKCS11-
implementation: For exampel it is able to
handle revocation lists and OCSP-queries.
This enables applications to use S/MIME without
re-inventing the wheel.
So please be fair: Both S/MIME and PGP have
their advantages and disadvantages. And GPG
seems to be on the way to be able to handle
both. This sounds like a good idea to me.
Cheers, Olaf

@_date: 2005-09-02 21:09:04
@_author: Olaf Gellert 
@_subject: PKCS#11 support for gpg-agent 
And I won't argue about that...
But it's not easy... There is no initial trust
in a self signed certificate but there may be a lot
of trust in a PGP key signed by some special people.
An S/MIME implementation will normally refuse
to import self-signed certificates from emails,
it will only import certificates issued by
an already trusted CA.
Well, you might have a look at this report that
was done by myself and a colleague of mine:
You might think twice before saying such things
But if you integrate Smart-Card functionality
into the GPG framework, your application does not
have to care about the smart-card at all. If
your application uses PKCS11, it still has to
do CRL-checking, certificate-validation and stuff
like this. PKCS11 is on quite a low level,
I would prefer to simply ask the GPG-agent, if
a used certificate is stil valid (and GPG in turn
might have a PKCS11 interface to actually
access the smart card)...
You do not seem to understand what a web of
trust is. I do have more than 140 signatures
under my PGP key. So whenever someone gets
my key, it is sufficient if he trusts one
of the 140 persons to identify persons.
So how would you do this in X.509? Creating
140 CAs (one for every user)? Then I would
have 140 certificates for the same key?
X.509 uses a centralized model of trust,
only CAs can issue certificates (and a self-
signed cert is only signed by itself, like a
pgp-key without any foreign signatures).
X.509 is different from PGP...
You might read a little bit about cross
certificates and stuff like this, maybe
you figure out some creative ways to build
a web (but I ensure you: This will not work
with many S/MIME implementations: Loops in the
trust paths in X.509 are not supported
too well). See:
Unfortunately this report is done by myself,
too...  ;-)
For sure, I have read much more about tokens
and PKCS11 than you think. And even if you
cannot believe it: It may well be that
some people have different experiences and
different opinions and these do not necessarily
have to be wrong. There are more things than
black and white...
   Olaf

@_date: 2005-09-28 14:18:10
@_author: Olaf Gellert 
@_subject: Any way to get smaller key sizes? 
Thanks for your unwanted comment. You can verify S/MIME-
signatures with gpgsm (a tool with nearly the same command-
line interface as gpg). This is the way kmail verifies
S/MIME emails. And I have no trouble in using both GPG
and S/MIME in Mozilla/Thunderbird. So why vote for less?
S/MIME (X.509) and OpenPGP use a different model of
trust, so if the S/MIME model fits your needs better,
it does not mean that OpenPGP is bad. Getting an S/MIME-
certificate that is validated successfully by the
normal applications usually requires some money (as
you need it to be issued by a trusted CA). If you
have special requirements of trust (for example if
you want to use X.509 certificates for login), you have
to establish your own CA (and end up with your certificates
being untrusted by default), so you have different
troubles in the X.509 world.
As always: The world is not black and white. :-)
  Olaf

@_date: 2006-02-10 13:18:09
@_author: Olaf Gellert 
@_subject: gpg on cron task 
You should be aware that any user on the system who can
run "ps" might see the password while your commands are
And even when "--no-tty" and "--batch" are given on the
commandline, GPG may ask questions, if I remember correctly.
For encrpytion it should work anyway, without questions.

@_date: 2006-02-14 09:38:04
@_author: Olaf Gellert 
@_subject: gpg on cron task 
Hi Werner,
We found such a case some time ago: Signing a key non-
interactively. When the key to be signed had an expiry
date, gpg asked for how long the signature should be
valid (even when --no-tty and --batch and --yes were
specified). I tested last week and this bug is obviously
gone, so I do not know of any other issue like that.
Cheers, Olaf

@_date: 2006-07-25 12:41:41
@_author: Olaf Gellert 
@_subject: Driving licence as identification and accepting signed 
Hi all,
You might take a look on the presented dokument itself.
Ask yourself a few questions:
- do I believe or even know that this is an official
  document (and not a fake)?
- is this something which could be faked easily?
I guess there is a difference for example between
the US drivers licenses and the new European ones
(regarding the possibility of faking these), I
feel that at least where I live (Germany) the
drivers license would be fairly equal to a
passport. But that's for sure not true for all
kinds of documents (eg. very old driving licenses
here). Another (more paranoid) question would be:
- do I believe that it is difficult in the country
  where the document was issued, to get it issued
  to a wrong name (by giving the officer a nice
  little present)? ;-)
And you might ask yourself for what purposes you
would use a validation according to the web of trust.
If my life would depend on it: No ways. For sending
some usual business information: No problem. ;-)
So I do accept passports / official IDs only
for my private key. With my company key I have to
be more relaxed (cause sometimes a good bit
of security is much more already than having
none at all). So my identification policy
depends on the key that's used. Schizophrenia!
Regards, Olaf

@_date: 2006-06-29 18:55:54
@_author: Olaf Gellert 
@_subject: "valid from" date? 
I can imagine that it makes sense for a key with
no subkeys. You can already collect signatures
before you actually use the key.
In the case of subkeys that seems to be not
Well, producing cryptographic material years ahead does
not really sound like very good idea. The used algorithms
may have already proven to be insecure by the time the
key get's valid. And advances in hardware technology and
crpytographic attacks may enable an attacker to spend plenty
of time on hacking your key in advance.
These issues might render the key useless before the "start
from" date is actually reached.
So it's the usual trade off between convenience and
Cheers, Olaf

@_date: 2006-03-03 16:03:59
@_author: Olaf Gellert 
@_subject: Which Digest Algorithm to use? 
I do have some old PGP-2 keys (that are pretty well
connected in the WebOfTrust). I understand that PGP2
keys use MD5 as default hash algorithm and they do
not contain any fields to store adapted preferences.
But I still can use "--digest-algorithm" to create
SHA1 or SHA256 signatures. But what are the implications
of this? I guess GPG will successfully validate these
signatures. PGP2 will certainly not. What about PGP 6,
7, 8, ...?
Which algorithm should be used instead of MD5? Right
now I would switch to SHA256 (because there were first
indications of weaknesses in SHA1 already)...
Does this makes any sense anyways because the own
selfsignatures use MD5 which is weak. I could do
new self-sigs with another algorithm, correct?
What is the actual proposed way to go?
Pointers to documents regardings this are as welcome
as any other hints... :-)
Regards, Olaf

@_date: 2006-03-06 14:32:03
@_author: Olaf Gellert 
@_subject: Which Digest Algorithm to use? 
Well, it seems to be like this:
When I sign a PGP-2 key (which has no preferences)
with my own PGP2-key, MD5 is the default hash algorithm
(which makes some sense because PGP2 will probably not
be able to validate signatures based on other algorithms).
When I sign a PGP2 key with a newer key (DSA), it
would be SHA1 (even though the recipient will probably
not be able to validate this with his PGP2 program).

@_date: 2006-03-16 10:41:31
@_author: Olaf Gellert 
@_subject: How to tell the gpg agent to forget a passphrase 
is there any documentation on the commands that the
gpg agent understands?
I am usign gpg agent with Mozilla/Enigmail. This works
fine. One thing that I am missing is how to tell the
agent to forget the stored passphrases. I know that I
can use gpg-connect-agent to send commands directly
to the agent. The command "clear_passphrase" sounds
exactly like what I am looking for, but what argument
does it require?
I did not find any documents on the commands that the
agent understands. That would be very much apreciated!
By the way: What does "--enable-ssh- support" do? Sounds
like acting as a replacement for the ssh-agent?
Cheers, Olaf

@_date: 2006-03-23 10:31:18
@_author: Olaf Gellert 
@_subject: [Fwd:] Public Keyserver with LDAP 
This came in on gnupg-users mailinglist, I thought
I should forward it to pgp-keyserver-folks, too.
Teujn, is there still an LDAP server at surfnet?

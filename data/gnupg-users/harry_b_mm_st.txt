
@_date: 2004-09-01 15:35:01
@_author: harry_b@mm.st 
@_subject: initrd missing TTY 
Hash: SHA1
Hi there,
I am not sure where to ask this question but I hope this is the right place.
I am trying to setup an encrypted root partition where the key is stored
gpg-encrypted on an USB memorystick. So far everything works quite nicely
but I fail to get a TTY working in the initial RAM disk.
All I get is gpg complaining:
gpg: cannot open '/dev/tty': No such device or address
Any idea what's necessary to get a TTY within the RAM disk? Or is there any
other way to pass a passphrase to gpg without displaying it on the screen?
(yes, I know about the --no-tty and --passphrase-fd options but when I use
Any ideas or hints?

@_date: 2005-04-07 08:45:11
@_author: harry_b@mm.st 
@_subject: Question regarding GpgMe 
I am working on an application which has its datafile encrypted using the GpgMe library. So far everything is fine except that I have to tell it with each program start which keys to use for encrypting the data.
I would just like to reencrypt the file with the same keys which were used before. The question now is, how can I find out which keys the message was encrypted for?
When I run 'gpg --decrypt FILE', all the keys are listed before the decryption is performed. How can I get this information using GpgMe?
Any hints are highly welcome!!
TIA, Harry
1024D/40F14012 18F3 736A 4080 303C E61E  2E72 7E05 1F6E 40F1 4012
-----BEGIN GEEK CODE BLOCK-----
Version: 3.12
GIT/S dx s: a C++ ULS++++$ P+++ L+++$ !E W++ N+ o? K? !w !O !M
V PS+ PE Y? PGP+++ t+ 5-- X+ R+ !tv b++ DI++ D+ G e* h r++ y++
------END GEEK CODE BLOCK------

@_date: 2005-04-07 17:57:42
@_author: harry_b@mm.st 
@_subject: gpgme on Debian 
I am currently experiencing something very weird with libgpgme 1.0.2 on Debian (unstable).
I have checked my own source quite thoroughly and it does exactly the same as the example t-encrypt-sign in the libraries source distribution but it does not work. What happens is this:
  1. in the whole process no error occurs until I try to call
     gpgme_data_seek();
  2. gpgme_data_seek returns with the error message
     'Unspecified source: Invalid argument'
  3. The output buffer seems not to contain no data at any time
And now comes the weird thing:
  1. I got the libgpgme source, did './configure && make' and
     started 'GNUPGHOME=. GPG_AGENT_INFO= ./test/gpg/t-encrypt-sign'
     --> result: this worked quite fine
  2. I compiled t-encrypt-sign.c manually and linked it against my
     systems library running the command
     'gcc -lgpgme  t-encrypt-sign.c -o t-encrypt-sign'
  3. now 'GNUPGHOME=. GPG_AGENT_INFO= ./test/gpg/t-encrypt-sign'
     returns the message
     't-support.h:56: Unspecified source: Invalid argument'
     and nothing works any more.
What is going on here?! I have been looking into this problem for quite a few hours but I can't get nowhere. :-/
Does anyone have some hints what could be wrong here?
1024D/40F14012 18F3 736A 4080 303C E61E  2E72 7E05 1F6E 40F1 4012
-----BEGIN GEEK CODE BLOCK-----
Version: 3.12
GIT/S dx s: a C++ ULS++++$ P+++ L+++$ !E W++ N+ o? K? !w !O !M
V PS+ PE Y? PGP+++ t+ 5-- X+ R+ !tv b++ DI++ D+ G e* h r++ y++
------END GEEK CODE BLOCK------

@_date: 2005-04-08 11:00:04
@_author: harry_b@mm.st 
@_subject: gpgme on Debian, followup 
Hi once more,
I tried some more to get libgpgme to run and found the following:
When I try to run the dynamically linked version of 't-encrypt-sign' (compiled with 'gcc -lgpgme  t-encrypt-sign.c -o t-encrypt-sign') the following happens when called like this:
Anyone who might spare some insight on this issue?
TIA, Harry
1024D/40F14012 18F3 736A 4080 303C E61E  2E72 7E05 1F6E 40F1 4012
-----BEGIN GEEK CODE BLOCK-----
Version: 3.12
GIT/S dx s: a C++ ULS++++$ P+++ L+++$ !E W++ N+ o? K? !w !O !M
V PS+ PE Y? PGP+++ t+ 5-- X+ R+ !tv b++ DI++ D+ G e* h r++ y++
------END GEEK CODE BLOCK------

@_date: 2005-04-08 14:59:57
@_author: harry_b@mm.st 
@_subject: Problem with gpgme 1.0.2 
Hi guys,
I was battling this problem for quite some hours until I finally found a (temporary solution).
  - System: Debian unstable
  - gcc 3.3.5
  - libgpgme 1.0.2
The problem occured as this:
  1. when statically linked, the test t-encrypt-sign worked fine
  2. when dynamically linked, the test failed when gpgme_data_seek()
     was called
I tried to debug this for quite a long time until - with all my desperation - I had a look at the GTK project gpa. In there I found, that they don't use the recommended function gpgme_data_seek() but instead gpgme_data_rewind() which is considered to be deprecated.
I replaced the call to gpgme_data_seek() with gpgme_data_rewind() and all works fine now - the test code t-encrypt-sign compiles and runs properly and my own code works quite nicely as well.
What's the matter here and how can this be fixed? I assume that its not a good idea to use deprecated function to get the code working. ;-)
1024D/40F14012 18F3 736A 4080 303C E61E  2E72 7E05 1F6E 40F1 4012
-----BEGIN GEEK CODE BLOCK-----
Version: 3.12
GIT/S dx s: a C++ ULS++++$ P+++ L+++$ !E W++ N+ o? K? !w !O !M
V PS+ PE Y? PGP+++ t+ 5-- X+ R+ !tv b++ DI++ D+ G e* h r++ y++
------END GEEK CODE BLOCK------

@_date: 2005-04-12 16:35:36
@_author: harry_b@mm.st 
@_subject: Problems finding keyring with GnuPGME 
this should be quite easy - just set the environment variable GNUPGHOME before you start your process and all should be fine.
It defaults to '$HOME/.gnupg' I think but you can set it to whatever you want. The directory should not be readable by anybody else than the current HTH, Harry
1024D/40F14012 18F3 736A 4080 303C E61E  2E72 7E05 1F6E 40F1 4012
-----BEGIN GEEK CODE BLOCK-----
Version: 3.12
GIT/S dx s: a C++ ULS++++$ P+++ L+++$ !E W++ N+ o? K? !w !O !M
V PS+ PE Y? PGP+++ t+ 5-- X+ R+ !tv b++ DI++ D+ G e* h r++ y++
------END GEEK CODE BLOCK------

@_date: 2005-04-25 09:56:36
@_author: harry_b@mm.st 
@_subject: [Announce] German speaking mailing list 
Hi everybody,
I am trying to get around the lacking feature of gpgme to tell me for which keys a message has been encrypted for.
I am running gpg 1.4.0 on Debian unstable.
I thought, that 'gpg --list-only filename' should give me all keys, a message was encrypted for. Unfortunately, this seems not to include my own If a message is encrypted for several recipients, it lists all except my own keys. If its encrypted for myself only, it doesn't list anything at all.
Do I miss something here? Can I somehow get ALL keys?
  Harry
1024D/40F14012 18F3 736A 4080 303C E61E  2E72 7E05 1F6E 40F1 4012
-----BEGIN GEEK CODE BLOCK-----
Version: 3.12
GIT/S dx s: a C++ ULS++++$ P+++ L+++$ !E W++ N+ o? K? !w !O !M
V PS+ PE Y? PGP+++ t+ 5-- X+ R+ !tv b++ DI++ D+ G e* h r++ y++
------END GEEK CODE BLOCK------

@_date: 2005-04-25 10:23:37
@_author: harry_b@mm.st 
@_subject: gpg --list-only argument 
Hi everybody,
sorry for the wrong subject before - I repost my message with the proper subject this time.
I am trying to get around the lacking feature of gpgme to tell me for
which keys a message has been encrypted for.
I am running gpg 1.4.0 on Debian unstable.
I thought, that 'gpg --list-only filename' should give me all keys, a
message was encrypted for. Unfortunately, this seems not to include my
own keys.
If a message is encrypted for several recipients, it lists all except my
own keys. If its encrypted for myself only, it doesn't list anything at
Do I miss something here? Can I somehow get ALL keys?
  Harry
1024D/40F14012 18F3 736A 4080 303C E61E  2E72 7E05 1F6E 40F1 4012
-----BEGIN GEEK CODE BLOCK-----
Version: 3.12
GIT/S dx s: a C++ ULS++++$ P+++ L+++$ !E W++ N+ o? K? !w !O !M
V PS+ PE Y? PGP+++ t+ 5-- X+ R+ !tv b++ DI++ D+ G e* h r++ y++
------END GEEK CODE BLOCK------


@_date: 2015-04-20 20:12:28
@_author: aslam karachiwala 
@_subject: Passphrases for SSH connections not accepted via pinentry 
gpg 2.0.22
pinentry 0.9.0
When attempting to establish an SSH connection, either from the command
line or a graphical app like a file manager or an IDE, the pinentry
dialog appears. This dialog...
1. does not allow the passphrase to be pasted, and
2. does not accept the correct passphrase that is typed into the field.
If done from the command line, the following error is reported:
"Agent admitted failure to sign using the key."
The gpg-agent log reports:
2015-04-03 22:33:16 gpg-agent[3928] failed to unprotect the secret key:
Operation cancelled
2015-04-03 22:33:16 gpg-agent[3928] failed to read the secret key
I know the passphrase I enter is correct because it works when entered
into the the graphical app's (e.g., Dolphin, Eclipse IDE) prompt which
appears after pinentry fails three times. This happens with both
pinentry-qt4 and pinentry-gtk-2. I was able to also reproduce it with
gpg 2.0.27 & pinentry-0.9.1, which I built from source.
This behavior started in early 2015. Before that, pinentry would give a
command-line prompt (via pinentry-curses?) if an ssh connection was
initiated from the command line.
 GPGConf ---+++ Sun 20 Jul 2014 06:18:30 PM EDT
# GPGConf edited this configuration file.
# It will disable options before this marked block, but it will
# never change anything below these lines.
 pinentry program to manage gpg keys.
 for KDE:
pinentry-program /usr/bin/pinentry-qt4
 for Cinnamon/GNOME:
 /usr/bin/pinentry-gtk-2
min-passphrase-len 16
debug-level advanced
log-file /home/aslam/.gnupg/log/gpg-agent.log
default-cache-ttl 1800
max-cache-ttl 36000
Any thoughts on what's causing this and how to fix it?

@_date: 2015-04-21 09:29:36
@_author: aslam karachiwala 
@_subject: Passphrases for SSH connections not accepted via pinentry 
If by "passphrase associated with your login account" you mean the
system password for my username, then that is not why my SSH connection
succeeds when I enter the passphrase in the dialogs presented by
graphical apps. My SSH passphrase is not the same as my system password.
Secondly, when initiating the SSH connection on the command line, I get
a prompt explicitly asking for the password associated with my username
after three failed SSH attempts, which is how I have been working around
the issue. IOW, the SSH connection is indeed failing.
Also, why is the pinentry-qt4/gtk-2 dialog appearing at all when I am
SSHing from the command line? Shouldn't I get a command-line prompt?
PGP key  fingerprint: 736C D83E 32DB A2FD 0208
9113 0FC8 BA7D FECF 84FB
Help power cutting-edge research in health, poverty and sustainability./

@_date: 2015-08-12 13:57:27
@_author: aslam karachiwala 
@_subject: Temporary lock files? 
gpg (GnuPG) 2.0.22
My ~/.gnupg directory is getting filled with files named like
Shouldn't these get deleted automagically?

@_date: 2015-09-09 17:24:49
@_author: aslam karachiwala 
@_subject: Temporary lock files? 
Meant to post this earlier... The accumulation of the lock files
apparently had to do with a misconfigured backup/sync. They stopped
accumulating after I excluded them from the backup.
That was the only time I ever saw the lock files, so this is likely not
an issue.


@_date: 2015-12-01 13:50:53
@_author: Harbord Jonathan-EURITEC 
@_subject: Provide user PIN to gpg-agent? 
Is it possible to pass the user PIN of a smartcard to gpg-agent in a command?
I'd like to stop the pinentry program appearing for an automated system.

@_date: 2015-12-02 14:29:19
@_author: Harbord Jonathan-EURITEC 
@_subject: Provide user PIN to gpg-agent? 
Thank you so much for your help! It worked.
I was using gpg4win, which of course does not include v2.1. I need to download the windows version from gnupg.org.
I had some difficulty with the syntax of a windows batch file but eventually succeeded with
Where  contained:
And where  was the ID of the card from gpg --card-status as you suggested,
and  was a file containing the PIN.
Thank you again for your kind advice.
-----Original Message-----
Sent: 02 December 2015 03:07
Please note that I don't have any experience like that, and I don't generally recommend such a usage.
In general, we can provide a special application specific pinentry program for such a special purpose.
In GnuPG 2.1.x, there is allow-loopback-pinentry option.  When enabled it by .gnupg/gpg-agent.conf or as an argument invoking gpg-agent, we can do something like:
    gpg-connect-agent \
        "OPTION pinentry-mode=loopback"
        '/definqfile PASSPHRASE /tmp/passphrase-for-smartcard' \
        "SCD CHECKPIN " /bye
having a file /tmp/passphrase-for-smartcard, where  is the one in the output of 'gpg --card-status' like:
Substitute  by D276000124010200F517000000010000.
Please try.

@_date: 2015-11-27 16:16:52
@_author: Harbord Jonathan-EURITEC 
@_subject: Bypass PIN entry 
I am using GPG on windows.
Is there a way to pass the user PIN of a smartcard in a gpg-agent batch file or script?
I am using a nitrokey as a private key store for an unattended SFTP system.
It simply runs a WinSCP script to pickup and send files via SFTP.
Before the script runs I launch I run a batch file to invoke the gpg-agent:
gpg-connect-agent.exe" /bye
WinSCP is then able to use the private key on the smartcard. However, the first time I connect the pinentry program appears and requires me to enter the user PIN.
Is there a way for a script to pass this PIN and unlock the nitrokey when gpg-agent launches?


@_date: 2016-12-13 00:23:48
@_author: sivmu 
@_subject: Smartcards and tokens 
recently I came across the toptic of hardware tokens for pgp keys and I
am thinking about getting one myself.
From what I have found so far there are several candidates such as the
Openpgp smartcard, Yubikey and Nitrokey USB tokens.
One question remaining is what is the difference between the openpgp
smartcard and the USB based tokens.
Also how much would you trust those vendors and can the use of such
tokens actually decrease security?
Any advise would be welcome

@_date: 2016-12-15 20:35:23
@_author: sivmu 
@_subject: Smartcards and tokens 
Am 15.12.2016 um 02:35 schrieb NIIBE Yutaka:
From what I understand, a malicious token can e.g. perform encryption
operations with weak randomness to create some kind of backdoor that is
hard to detect. Maybe there is also a way to secretly send the secret
keys loaded onto the smartcard/token to the adversary using the PC and
network it is used on.
If there is no way to detect such malicious devices and given that
certain organisations tend to mess with security tokens and crypto
devices, it seems using those specific devices actually decreases
security, assuming it is easy to manipulate specialised vendors of
security hardware compared to manipulating electronic hardware in general.
Or is this too much of a conspiracy theorie? (not that those do not have
a tendency to be outrun by reality anyway)
With nitrokey,  both the hardware design and the software is open source
and both have been audited. Bu I don't think that will keep some people
from intercepting deliveries of such devices or mess with the production.
I'm really not sure if specialised devices for crypto is a good idea,
give that it presents such a promising target.

@_date: 2016-12-16 03:30:24
@_author: sivmu 
@_subject: Smartcards and tokens 
Am 15.12.2016 um 22:17 schrieb Damien Goutte-Gattat:
I assumed the public key of the recipient is transferred to the token so
that it can do the encrytion internally. This is one of the things I
worry about. If the token does the encryption (and signing) operations,
it needs randomness. Something that is often messed with and hard to
produce reliably compared to a device with user interaction.

@_date: 2016-12-18 01:17:44
@_author: sivmu 
@_subject: Smartcards and tokens 
Am 16.12.2016 um 13:36 schrieb Andrew Gallagher:
Thats what i wanted to hear. If the symmetric key is generated on the
host, that stops any scenario where the smartcard can subvertly
compromise the encryption process, assuming....
... that this means RSA encrzption is reproducable, meaning encrypted
files of the same plaintext result in the same ciphertext, as this woul
make the process reproduceable and any malfunction can be easily noticed.
Signing could still be manipulated by a compromised smartcard I guess

@_date: 2016-12-18 02:53:58
@_author: sivmu 
@_subject: Smartcards and tokens 
Am 18.12.2016 um 01:30 schrieb Andrew Gallagher:
You are right, I forgot that.
Having some kind of way to check if the card is operating normally would
be awesome though...

@_date: 2016-12-20 09:55:08
@_author: sivmu 
@_subject: gpg-agent 2.1.16 needs about 10s for initialization saying 
Am 19.12.2016 um 02:20 schrieb Jan Kundr?t:
I can confirm simular behavior.
After upgrading to 2.1.16 it takes 10 seconds on the first operation
performed. Any following operations are fast as usual.

@_date: 2016-12-20 09:56:30
@_author: sivmu 
@_subject: Smartcards and tokens 
Am 18.12.2016 um 10:49 schrieb Peter Lebbing:
Thats good to know. Thanks
Implement a GSM chip into the token? :)

@_date: 2017-02-04 07:33:56
@_author: sivmu 
@_subject: Unecrypted download of public keys 
When using --revc-key  or the gpa frontend, I noticed that the
target public keys are still downloded using unencrypted http. While the
trnasmitted information is generally public, it doesmake things pretty
easy for an adversary to collect metadata such as your contacts.
This is expecially relevant if you refresh your keys all at once, as
this will leak your complete contact list to the network.
Is there any reason gnupg does not use https by default to connect to
the keyservers? I think this is an unnecessary leak of privacy.

@_date: 2017-02-04 21:14:50
@_author: sivmu 
@_subject: Unecrypted download of public keys 
Am 04.02.2017 um 08:18 schrieb Daniel Kahn Gillmor:
I suppose this config did not change after upgrading from 2.1.17.
Just tested it on 2.1.18 using arch and it still uses http on my setup.
But this would be rather an issue with the distro, correct?

@_date: 2017-02-05 00:34:40
@_author: sivmu 
@_subject: Unecrypted download of public keys 
Am 04.02.2017 um 23:27 schrieb Daniel Kahn Gillmor:
This is the script for the arch gnupg package:
But I do not see any sign of overriding the defaults and I never changed
the settings either.
I might just setup a new arch system in a VM and test this on a clean
installation to make sure I did not mess something up.
Could it be that installing gpa changed the defaults?

@_date: 2017-02-17 13:37:06
@_author: sivmu@web.de 
@_subject: Download of public keys 
Some time ago I asked about the unencrypted download of public keys.
The answer was that the current gnupg does use https by default to fetch the keys.
I found the time to retest this on a new setup and found that gnupg 2.1.18 still uses http connections to fetch the keys.
I uses a newly installes arch linux setup with basically nothing but the base linux tools and downloaded a public key whil sniffing on the network.
All requests, first to keys.gnupg.net and tehn to some other keyservers were in plaintext.
The default dirmngr.conf file provided by arch, which seems to use gnupg 2.1.18 without changes, contains the followging lines:
# If exactly two keyservers are configured and only one is a Tor hidden
# service, Dirmngr selects the keyserver to use depending on whether
# Tor is locally running or not (on a per session base).
keyserver hkp://jirk5u4osbsr34t5.onion
keyserver hkp://keys.gnupg.net
This would explain why no encryption is used. Is there something I missed or is this unintended?

@_date: 2017-02-17 19:00:04
@_author: sivmu@web.de 
@_subject: Download of public keys 
Am 17.02.2017 um 17:31 schrieb Kristian Fiskerstrand:
Arch does not ship a dirmngr.conf either as far as I can see.
When running the gpg command for the first time on a new system, the dirmngr.conf file is creates together with some other files.
I just tested it again on ubuntu 16.04.2 and the same file appear in the gnupg directory, so it does not seem to be a distribution issue.
It seems that gnupg does ship this template file as dirmngr-conf.skel although I am not sure if the distributions have anything to do with it being copied to the user directory.
In any case, it might be a good idea to change the template gnupg ships
Changing the lines:
keyserver hkp://jirk5u4osbsr34t5.onion
keyserver hkp://keys.gnupg.net
keyserver hkps://jirk5u4osbsr34t5.onion
keyserver hkps://keys.gnupg.net
would solve this I guess.
I will although check with the arch maintainer about this to be sure but I do not think this is a distro issue

@_date: 2017-02-17 21:46:21
@_author: sivmu@web.de 
@_subject: Download of public keys 
Am 17.02.2017 um 20:43 schrieb Kristian Fiskerstrand:
Not quite sure I get this.
So what this means is that effectively gnupg still uses plaintext connections to update public keys by default, does it not?
If the change I suggested is not correct, shouldn't we find another way to use secure connection by default whenever possible?
As it is now, the default fallback mentioned in the referenced commit never takes effect as long as the skel file is used.

@_date: 2017-02-17 22:28:19
@_author: sivmu@web.de 
@_subject: Download of public keys 
Am 17.02.2017 um 21:57 schrieb Kristian Fiskerstrand:
That was the goal all along, as mentioned in the initial post some weeks ago.
Especially when the complete keyring is updated, this leaks the complete contact list to the network, which is kinda bad. And privacy is kinda also somthing people use gnupg for isn't it.
So I don't know the best way to change this but I would like to suggest that future versions use https only by default, e.g. by changing the skel file.

@_date: 2017-02-23 19:24:02
@_author: sivmu@web.de 
@_subject: SHA1 collision found 
Today was announced that SHA1 is now completely broken
A few weeks back it was mentioned that there is a new proposal for a openpgp standart including a new algorithm for pgp fingerprints.
As this is currently not applicable in practice, I would like to know what this new development means for pgp-gnupg and the use of SHA1 for key identification.
After researching how the fingerprint is generated, I think it would be easy to include a new option in gnupg to print a fingerprint using sha256. Would that be something that will/can be included in future versions of gnupg?
That way users could publish both the sha1 and sha256 finderprint in the future.

@_date: 2017-02-23 20:26:37
@_author: sivmu@web.de 
@_subject: SHA1 collision found 
Am 23.02.2017 um 19:48 schrieb Peter Lebbing:
I would rather see this as a means to manually check the key to enable users to potentially discover fake keys.
Since I did not find a simple way to generate the fingerprint and identifying the key contents to be hashed seems really tricky, putting an additional option in gnupg to generate a longer fingerprint seems like the easiest solution.
Having an option like --fingerprint  would allow users to use any hash they want until a new openpgp standard is published. This is not something that needs to be used by default, just something that can be used by those who look for it.
After looking into second-preimage attacks the issue does not seem to be that critical though. Still it would be a nice feature and if I did not misunderstand the how the fingerprint is generated it could be implemented by adding very little code.

@_date: 2017-02-23 22:50:44
@_author: sivmu@web.de 
@_subject: SHA1 collision found 
Am 23.02.2017 um 20:09 schrieb vedaal at nym.hush.com:
Yes but who know how many years it will take until a new standard is accepted...
Not sure about you but I am not able to see the difference between a valid pgp key and "gibberish" ;)
The question is how many tries it takes until a colliding key is found that is accepted by common pgp implementations when imported, is it not?
As said, if it is as easy as i think it is, providing an option for different hash algos to generate fingerprints would be a nice solution until a new standard is established.

@_date: 2017-01-25 01:05:15
@_author: sivmu 
@_subject: gnupg website 
not sure this is the perfect place, but I wanted to point out that the
gnupg.org website still uses sha1 as a mac.
If I am not mistaken, several common browsers have announced to display
warnings fur this kind of tls connection, so it might be a good idea to
update the server at the next opportunity.
Also, activating OCSP to increase privacy might be a good idea too.
Thanks for your work on open source encryption.
- Regards

@_date: 2017-01-25 22:07:08
@_author: sivmu 
@_subject: gnupg website 
Am 25.01.2017 um 12:14 schrieb Peter Lebbing:
Yes that is what I meant, sorry for the confusion.
I think this might be relevant for some people who would prefer not to
trigger unnecessary queries for privacy reasons.
Anyways ssllabs shows a warning that the website will be degraded from A
to C in a month. Not sure that matters all that much, but if there is an
oppertunity to change the available ciphers at some point...

@_date: 2017-01-25 22:36:16
@_author: sivmu 
@_subject: gnupg website 
Am 25.01.2017 um 22:25 schrieb Damien Goutte-Gattat:
That would be the sweet32 attack Basically if you can collect a few hundred GB of data, it is trivial to
calculate the key. There is a prove of concept for https connections,
although I believe this is especially relevant for VPN connections
(openvpn uses a 64 bit ciphers (blowfish) by default)

@_date: 2017-01-25 23:18:25
@_author: sivmu 
@_subject: gnupg website 
Am 25.01.2017 um 23:00 schrieb Robert J. Hansen:
There are prove of concepts against TLS and openvpn It is not quite that simple I think.

@_date: 2017-01-26 00:47:36
@_author: sivmu 
@_subject: sha1 pgp fingerprint 
I have been wondering for a while about the use of sha1 in pgp fingerprints.
Although sha1 may not be easily broken in practise, there are
theoreticall collosion attacks that are feasible for well funded
Cryptographers, like Bruce Schneier, have been recommending for years to
migrate to a new hash algorithm for all sorts of reasons.
New versions of gpg do not use sha1 in any encryption operation if I am
not mistaken. But we still use sha1 fingerprints to compare of our keys.
The question I have not yet found any clear answer for, is why is nobody
talking about this and should pgp keys be identified by a stronger hash
alogrithm in the future?

@_date: 2017-01-30 21:07:04
@_author: sivmu 
@_subject: gnupg website 
Am 30.01.2017 um 18:22 schrieb Werner Koch:
Wow that was fast, thanks.
OSCP stapling is still missing though and I'm not sure NIST curves for
ECDHE are the way to go (would prefer DHE) but that's not a primary
concern I guess :)

@_date: 2017-03-17 22:39:38
@_author: sivmu@web.de 
@_subject: dirmngr failes with missing file 
When gpg -recv-key ID is used with the line hkps://hkps.pool.sks-keyservers.net enabled in dirmngr.conf, it failes with an error message saying dirmngr not found.
The solution to this is to add the empty file ~/.gnupg/dirmngr_ldapservers.conf
Shouldn't this be added automatically to avoid this error?

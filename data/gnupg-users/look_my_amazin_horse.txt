
@_date: 2018-05-19 19:02:55
@_author: Vincent Breitmoser 
@_subject: [openpgp-email] Efail - Possible Measures? 
(Also cross-posting to Autocrypt)
Patrick Brunschwig(patrick at enigmail.net) May 19, 2018 at 06:47:08PM +0200:
I used to parse stuff in a generic way in K-9 Mail at first, but changed it
later (mid 2016?) to show decrypted data only in known mime structures.
I planned to add support for other things as they came up, but so far I haven't
received feedback about any incompatibilities.
This is the only mime structure I handle, any other pgp/mime structure will show
up as an attachment. When displaying a decrypted mail, the decrypted payload is
displayed like a normal message would. PGP/INLINE is handled only if the pgp
data is the very first non-whitespace content, otherwise it won't be decrypted.
If there are mime parts outside the encrypted payload, they are displayed as
"unprotected attachments" that require an extra click to open. For the case of
text/plain parts following the encrypted part, those are shown as "Unsigned
Text" at the bottom and displayed in a text-only widget, nicely covering the use
case of mailing list footers:
I don't handle this. Does it come up for you?
 - V
PS: Randomly signing this message.

@_date: 2019-08-12 14:35:11
@_author: Vincent Breitmoser 
@_subject: PGP Key Poisoner 
No it's not. It is the basis of cryptograhpy.
See also: Yes. And that point is that some of our security was built on obscurity.
See also:  - V

@_date: 2019-08-14 12:29:59
@_author: Vincent Breitmoser 
@_subject: Difficulty of fixing reconciliation 
We are talking about a sand castle here that was kicked down by a kid. It's
a bit bizarre to claim that it was built to withstand rockets.
Given that the recon algorithm was designed as a PhD thesis, it seems like
a safe bet that it was designed to solve the academic problem of set
reconciliation between distributed systems with optimal message complexity.
Funny story how it ended up becoming infrastructure for a security ecosystem.
 - V

@_date: 2019-07-02 13:47:00
@_author: Vincent Breitmoser 
@_subject: SKS Keyserver Network Under Attack 
Huh, that's interesting. I was not aware of this issue, and wish you had reached
out to me, or to support at keys.openpgp.org, or filed an issue on Hagrid.
This BSI requirement was not known to me. While it would be preferable to stick
with AEAD ciphersuites, I would of course add another ciphersuite if you say you
consider this a worthwhile tradeoff.
It would be good to sort out the policy issue at some point as well, but
I understand that won't happen overnight.
 - V

@_date: 2019-07-03 11:48:34
@_author: Vincent Breitmoser 
@_subject: SKS and GnuPG related issues and possible workarounds 
Friendly reminder: There are no developers working on SKS right now. Zero. No
actual work has been done on SKS in years.
 - V

@_date: 2019-06-16 00:10:54
@_author: Vincent Breitmoser 
@_subject: New keyserver at keys.openpgp.org - what's your take? 
Hi Konstantin,
Sure is. There are ways to solve this problem, but at the moment they are all at
an early conceptual state at best.
For example, we could allow third-party signatures if they are cross-signed by
the signee (in an unhashed subpacket, for example).  Assuming a caff-style
workflow, this would be a fairly minor change to user workflows, and solve the
abuse issue because the owner of each key remains in charge of any signatures
published for it.
Wiktor also suggested before to accept key material from signed upload requests
(roughly "gpg --export keyid | gpg --sign-as keyid | curl). But I'm unsure of
how well this can really work in practice, given how hard it is to keep one's
local keyring in any kind of clean state.
Of course, closed user groups with different trust models and abuse
circumstances can solve this much more easily.
Maintaining hagrid for the keys.openpgp.org use case takes up all the free time
I can spend on this project - which is why it is currently built to do exactly
that, no more no less.
I would be open to contributions that allowed the use of hagrid in other
scenarios such as this. More eyes on the code base sure wouldn't hurt. (I would
also probably be available for commissions, if you're into that :)
Note that, for better or worse, hagrid uses a filesystem-based database.  We
maintain all keys in the filesystem, and route most requests directly from
nginx, and the rest via x-accel-redirect.  This is not something everybody is
comfortable with, so beware ;)
 - V

@_date: 2019-06-15 23:41:19
@_author: Vincent Breitmoser 
@_subject: New keyserver at keys.openpgp.org - what's your take? 
Indeed! This is a use case that would be interesting to explore though, feel
free to open an issue on our tracker if you want to help think it through!
Is "resilient" really a word you would use to describe SKS these days? Are you
aware of issues like this?:
 - V

@_date: 2019-06-16 13:51:33
@_author: Vincent Breitmoser 
@_subject: New keyserver at keys.openpgp.org - what's your take? 
Interesting thought!  I would be a bit worried about slipping into a gatekeeper
role, but at least there are no technical issues with this.
 - V

@_date: 2019-06-21 12:24:26
@_author: Vincent Breitmoser 
@_subject: New keyserver at keys.openpgp.org - what's your take? 
Pretty happy with how this turned out so far. :)
Feedback I received was almost universally positive, other than the folks on
heise comments who really really really like the Web of Trust. In particular,
I heard of almost no isues with the verification flow, which hopefully means
things "just work" for everybody.
The heise article helped a lot getting the word out, we are closing in on 2k
verified email addresses:
With the patch I recently submitted to gnupg-devel, `--refresh-keys` works very
smoothly for me. I wouldn't say it's blazingly fast, but my 320 keys take about
two minutes to refresh, and almost all of that time is spent in dirmngr. The
patch is already applied in Debian experimental, but hopefully we can get it
upstream soon as well. For those who want to give it a shot:
 - V

@_date: 2019-06-25 16:30:49
@_author: Vincent Breitmoser 
@_subject: New keyserver at keys.openpgp.org - what's your take? 
Hi Dirk,
thanks for your thoughts!
As mentioned in our FAQ, the reason we don't support those is that with the SKS
model, anyone can attach arbitrary data to others' keys.  It's hard to overstate
how problematic that is. I can just add a megabyte or fifty of data to your key.
There are solutions that still allow for some of the TPS-based use cases, but
until there is at least some agreement on how to proceed, we decided against
supporting them.
Free distribution of arbitrary TPSes is quite simply not a viable model for any
keyserver. The discussion shouldn't be about liking or disliking them, it should
be about what alternatives could be.
I see from your signing policy that you do a caff-style workflow. Have you
considered the option to have keys cross-sign third party signatures for
publication? It's a very slight switch in tooling if we assume a caff workflow,
but that way each key remains in control of the public version of itself.
The open federation model of SKS means all email addresses are enumeratable.
That's a privacy no-go in my opinion, which people have gotten surprisingly used
to in this community.
I can imagine a closed federation model, where we have a handful of operators
but still don't need to have personal information of our users in the open.
Maybe we'll move in that direction once the dust has settled a bit. The
keyserver ecosystem has been stagnant in more than a decade, so.. one step after
Why not? Do you think "find all Dirks on the keyserver" is a valid use case that
should be supported?
 - V

@_date: 2019-06-25 17:54:00
@_author: Vincent Breitmoser 
@_subject: New keyserver at keys.openpgp.org - what's your take? 
We restrict upload of user ids to the owner of the user id, identified by email
verification. Non-identity data (subkeys, revocations, ...) can be freely
distributed, but only with a verified self-signature.
Is there any other mechanism you can come up with to allow upload by the owner
of some key data or email addresses, but not others?
Great! I've been getting generally positive feedback about this idea, perhaps we
should look into that more seriously.
What if I upload your key to a server though? Keep in mind this is not just
a "nice to have", it is a legal requirement.
Of course! And we do support that, given consent from the owner of an address.
Without that, only non-identity data (still enough for M2M) is distributed.
This is exactly what we do. :)
 - V

@_date: 2019-06-27 03:18:55
@_author: Vincent Breitmoser 
@_subject: New keyserver at keys.openpgp.org - what's your take? 
I assume you have looked into this already and are not asking this out of
uninformedness. But, I'll bite.
Article 2, "Material Scope":
There are four exceptions to general applicability, none of which even possibly
apply to this scenario. We are obviously operating in the EU, so territorial
scope (Article 3) also applies. Let's look at the definitions of "processing"
and "personal data", then:
The definition of personal data, Article 4:
Given that there is legal commentary that even IP addresses in logs already
count as personal data, I don't find it contestable that e-mail addresses do
constitute personal data.
Here's what "processing" means, same article:
This is most certainly what we are doing.
So assuming that e-mail addresses are personal data, and we process this data,
there is an (exhaustive!) list of possible situations in which we are lawfully
allowed to do so, two of which can potentially apply. Article 6:
The first is clear - if we have consent, we're good. The second *could* possibly
be argued, but I have a hard time believing the haphazard handling of e-mail
addresses on traditional keyservers serves the public interest. Even if we did
assume this, there is the "right to object", which allows data subjects to
object to the use of their data. Article 21:
All in all, I find it pretty clear that GDPR does apply to processing of e-mail
addresses on public keyservers. There are various nuanced conclusions one may
draw, for example "it applies, but you probably won't get sued, so just keep on
running them pool servers". It is unclear to me how one could look at this and
conclude that keyservers aren't affected by GDPR.
GDPR is a [regulation], not a [directive]. As such, it is an immediately
enforcable law that does not require a per-country implementation to be
I'm aware of work on this by folks with legal background, but due to funny
academic publishing culture I'm not at liberty to share.  Hopefully something
will be available to the public soon.
 - V
[regulation]: [directive]:

@_date: 2019-06-30 12:01:43
@_author: Vincent Breitmoser 
@_subject: SKS Keyserver Network Under Attack 
Depending on what you mean by "fully compatible". The single biggest issue is
importing keys that don't have identity info on them. I submitted a patch to
GnuPG to fix this issue, but for some reason that is beyond me there seems to be
resistance to merging it:  - V

@_date: 2019-10-18 12:02:05
@_author: Vincent Breitmoser 
@_subject: FAQ: seeking consensus // SKS plans 
Worth mentioning that at the openpgp summit recently, Kristian announced some
plans that the SKS pool would:
1) Move implementation from SKS to Hockeypuck
2) Disable search by user id entirely
3) Filter out third party signatures, at least for a while
None of those seemed set in stone, and there is no timeline as far as I'm aware.
But be aware those things are being planned.
 - V

@_date: 2019-10-18 12:24:43
@_author: Vincent Breitmoser 
@_subject: FAQ: seeking consensus 
I concur keys.mailvelope.com is a fine keyserver today. However, you might want
to consider:
An "encrypted" verification email in no way, shape or form "authenticates"
a key any more than an unencrypted email.  It may seem like it should at first
glance, but it really doesn't if you think through the attack scenarios.
This property also makes it susceptible to flooding attacks, and Mailvelope
doesn't make use of third party sigs itself.
I talked to Thomas (from Mailvelope) the other day, and he said he would either
want to make their implementation more abuse resistant (which I assume means
dropping third party sigs as well), or decommissioning it altogether in favor of
 - V

@_date: 2019-10-20 17:11:14
@_author: Vincent Breitmoser 
@_subject: FAQ: seeking consensus 
Are you sure that it is though? Seems to me you're giving out ill-informed
advice here.
 - V

@_date: 2019-10-21 21:39:03
@_author: Vincent Breitmoser 
@_subject: Future OpenPGP Support in Thunderbird 
You state this so matter-of-factly, I feel compelled to point out that among
cryptographers, libgcrypt's reputation is not all that great...
 - V

@_date: 2019-09-14 14:58:55
@_author: Vincent Breitmoser 
@_subject: keys.openpgp.org not sending confirmation email 
Hi Binarus,
keys.openpgp.org admin here! Can you please contact support at keys.openpgp.org
from the address in question? I'll try to help you from there, if we tried to
deliver mails there will surely be something in the logs or bounces.
 - V

@_date: 2019-09-17 15:08:53
@_author: Vincent Breitmoser 
@_subject: keys.openpgp.org not sending confirmation email 
Right, that's because we currently use an actual rfc2822 parser on
keys.openpgp.org. This works fine for *most* users, but in the end causes more
trouble than it's worth, so we will probably switch to something more lenient
See also dkg's thoughts on the matter on the openpgp-wg mailing list, to align
the specification with reality:
 - V

@_date: 2019-09-17 17:35:22
@_author: Vincent Breitmoser 
@_subject: keys.openpgp.org not sending confirmation email 
If your statement here includes the "by convention contains an rfc2822
name-addr" part of the wording, please bring this opinion up on the openpgp-wg
The argument is being made (and I agree) that it's plain to see that
implementations neither emit user ids as rfc2822, nor parse them as such, by
convention or otherwise.  The spec is factually wrong and misleading for
implementors in this aspect, and should be updated to reflect reality.
 - V

@_date: 2019-09-17 18:28:07
@_author: Vincent Breitmoser 
@_subject: Automatically delete old keys from servers 
The simple truth is: For the SKS servers, it is not technically possible to
remove keys, and never will be.
People have speculated, postulated, counterargued, rambled on several mailing
lists about how great or terrible a thing that is. But no matter what anyone
tells you or how many mails are written - the simple truth is: For the SKS
servers, it is not technically possible to remove keys, and never will be.
 - V

@_date: 2020-08-29 22:17:49
@_author: Vincent Breitmoser 
@_subject: Brace yourself: User-friendly but broken OpenPGP is here 
I believe what you're experiencing here is actually a direct consequence of
a GnuPG policy decision: Subkeys that don't have an encryption flag *are*
typically allowed for decryption by GnuPG. I suspect it only doesn't work
because you are using a smartcard key (or perhaps the policy has changed?).
Some more background: I filed an issue with GnuPG for this in 2018, when
I received related bug reports for OpenKeychain. Users complained that they
received encrypted data they couldn't decrypt with OpenKeychain, but could with
GnuPG. I'm aware of at least one bank that does this, as well as a Perl OpenPGP
implementation, and now apparently canarymail.
GnuPG allows this behavior, so other implementations will in practice rely on
it. Hyrum's law:
Relevant issue on the GnuPG issue tracker: For convenience, here's the relevant response from Werner:
And the response from Andre (GnuPG dev):
Hope that sheds some light on this.
 - V

@_date: 2020-03-22 23:16:27
@_author: Vincent Breitmoser 
@_subject: monkeysign removal from bullseye 
Hi Andrew,
Have you seen openpgp-ca? It's an effort that sounds similar to what you are
describing, based on sequoia-pgp. They project is still in the requirements
engineering phase I believe, so if you have specific needs for a conrete use
case, your input may be very valuable to them:
 - V

@_date: 2020-05-17 10:48:43
@_author: Vincent Breitmoser 
@_subject: keys require a user-id 
Hey folks,
this thread touches on userid-less keys, and keyservers.
I agree with Peter and Rob's points that userid-less keys are questionable for
use as-is. OpenPGP transfers information in the self-signatures of user ids. If
we use keys without any known UID, we might miss out on e.g. expiration dates,
or key flags.
There is one more angle to this topic: key updates. keys.openpgp.org uses
userid-less keys in some cases, to distribute revocations and subkey updates.
More specifically, this happens when no User ID on a key has been verified.
The logic is simple:
1. Without consent, we don't distribute email addresses.
2. We want to distribute revocations and subkey updates regardless.
3. Revocations and key updates are cryptographically independent from User IDs.
A key store that already has a UserID for some key can integrate revocation
certificates and subkey updates from such a userid-less key into its local
certificate. Implementation-wise, this is easy to do.
GnuPG upstream rejects such updates. Conretely, if you hand a primary key with
only a revocation signature to GnuPG, it will parse the revocation, verify that
it is cryptographically valid, and then throw it away.
For those interested, this issue has been discussed at length here:
 - V

@_date: 2020-09-18 12:55:45
@_author: Vincent Breitmoser 
@_subject: Which keyserver 
Not for folks who have their email address at the domain of an email provider,
or an organization that doesn't support WKD. So statistically, everyone but
a rounding error.
That said, for folks who run their own domain, a it seems WKD is gaining some
ground.  keys.o.o has a (sort of experimental) "[WKD as a Service]" feature, and
at this point there are more than 100 domains running on it. That's not a huge
amount, assuming most of those are single-user domains, but it's something :)
 - V
[WKD as a Service]:

@_date: 2020-09-19 02:33:28
@_author: Vincent Breitmoser 
@_subject: Which keyserver 
Let me break the prose down into the simple facts:
* the "HKPS" pool is no longer actually a "pool". it is a [single server].
* the "HKP" pool still contains a few servers, but using it means *all communication happens in plain text*.
* the newest release of SKS is [1.1.6], from august 2016.
It is true the attacks were what brought it down, but the amount of effort was not a "sustained
attack" by any measure. The invested resources are somewhere around "couple hours and $0.00".
 - V
[single server]:  (hkps column)
[1.1.6]:

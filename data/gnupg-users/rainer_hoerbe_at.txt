
@_date: 2017-04-09 08:09:16
@_author: Rainer Hoerbe 
@_subject: Smart card 
?secure? is not a one-dimensional scale with ?yes? and ?no? at each end. Precise definitions are only useful for specific attack vectors. Standards and laws like NIST 800-63 or eIDAS give a good overview on various risks, as they have been trying to squeeze them into assurance levels to reduce complexity.
A long and random passphrase is a good measure against dictionary and brute force attacks. It does not defend against malware sniffing the keyboard or scraping memory pages. It protects your /encrypted/ private key, but not during signing and encryption. Moving operations needing the unencrypted key to a smartcard provides additional protection on an infested system. Smartcard readers with pinpads and displays add defense against certain attacks that are possible against a Yubi-/Nitrokey-type reader.
- Rainer

@_date: 2017-04-09 17:13:15
@_author: Rainer Hoerbe 
@_subject: Smart card 
Good point, and I agree to that for a very basic assessment. However, the assumption that only politicians and government employees holding a security clearance are targeted by Mossad & co is a thing of the past. System admins, developers and certain NGO actors became exposed persons as well. In addition, attacks already have been automated to a high degree. Bulk penetration of end user devices is not only technically feasible, but has been legalized in the UK with the Investigatory Powers Act 2016. If you think that it is OK if the GCHQ is holding your passwords and SSH keys, think twice. APT tools have been automated, and escaped into the wild in the past. At the end of the day we do not have good enough data for a general threat assessment. Data from maleware vendors, cloud providers and forensics are too specific and biased. So we have to do our own fuzzy risk judgement, and, yes, I lean to the cautious side.
Memory scraping is just one of several attack vectors against unencrypted private keys. And of course smartcards are only one in many security measures.
We agree in this point.
- Rainer

@_date: 2017-04-09 18:34:42
@_author: Rainer Hoerbe 
@_subject: Smart card 
and their main competitor?s govmnt in reverse as well :-)
Sorry, not any more. Look at the online-banking fraud business. Automated credential stealing tools from simple keyloggers to sophisticated maleware such as from the Zeus family are available on a pay-and-play basis. I thought your private key is so well encrypted that your can publish it in a news paper?
Anyway, from a market success point of view the dominant applications for smartcards are mobile and bank cards. They have solved the usability problem, which GPG, PKCS11 etc. did not do yet. As long as the effort to setup smartcards is so high it will not make sense to users to spend time with a risk that is difficult to assess.
- Rainer

@_date: 2017-04-09 20:50:28
@_author: Rainer Hoerbe 
@_subject: Smart card 
I know of PGP-based WoT used in security-aware networks of sysadmins, CERTs etc. I would have guessed that a significant part of the audience of this list are professional/experienced/involved admins or developers. But let me know why the majority of users are not.
- Rainer

@_date: 2017-04-10 12:01:34
@_author: Rainer Hoerbe 
@_subject: What could make GnuPG + Enigmail "easier"? 
I think that we could reach a better mutual understanding when we put the arguments into context.
Context A: non-technical users, such as Jenny, who encrypt mail with sensitive content, or sign a message.
Context B: IT-experts with typical use cases of SW-signature or SSH-login.
I think that many arguments on this thread make a lot of sense in their respective contexts.
- Rainer

@_date: 2017-03-17 22:44:47
@_author: Rainer Hoerbe 
@_subject: Mac Pinentry problem 
I copied my key to a OpenPGP card and was able to create signatures and authentication via SSH using the card. Now moving the the Mac I am stuck with pinentry-mac, because it keeps asking me for another card.
gpg --delete-secret-keys 0x64C2F99E904F1906
gpg2 --card-status
gpg2 --clearsign /etc/hosts
pinentry-mac brings up a dialogue box, asking to insert the card with the serial number D2760001240102000006030374100000. The Application ID (is this the serial number?) do not match. gpg2 --card-status
Reader ...........: Gemalto PC Twin Reader
Application ID ...: D276000124010201000500004EBD0000
Version ..........: 2.1
Manufacturer .....: ZeitControl
Serial number ....: 00004EBD
Name of cardholder: Rainer Hoerbe
Language prefs ...: de
Sex ..............: male
URL of public key : [not set]
Login data .......: [not set]
Signature PIN ....: forced
Key attributes ...: rsa2048 rsa2048 rsa2048
Max. PIN lengths .: 32 32 32
PIN retry counter : 3 0 3
Signature counter : 2
Signature key ....: 7D23 36BF A95F F788 4C80  B7DA 64C2 F99E 904F 1906
      created ....: 2017-01-30 14:47:18
Encryption key....: [none]
Authentication key: [none]
General key info..: pub  rsa2048/0x64C2F99E904F1906 2017-01-30 Rainer Hoerbe (Identinetics GmbH) sec>  rsa2048/0x64C2F99E904F1906  created: 2017-01-30  expires: 2027-01-28
                                  card-no: 0006 03037410
What could be the problem?

@_date: 2017-03-23 07:33:36
@_author: Rainer Hoerbe 
@_subject: haaveged + gpg --sign fails with "signing failed: Operation cancelled" 
Just for the record: Adding entropy using haveged does not work in my setup - it will cause the signature to fail without useful error message.
My setup is:
Linux keymgmt 4.9.14-200.fc25.x86_64  SMP Mon Mar 13 19:26:40 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux
gpg (GnuPG) 2.0.22
libgcrypt 1.5.3
The procedure that repeatedly fails when including haveged:
sudo /usr/sbin/pcscd
sudo /usr/sbin/haveged
gpg2 --import my_pub.gpg
gpg2 --card-status
echo -e "trust\n5\ny" > /tmp/gpg_editkey.cmd
gpg2 --command-file /tmp/gpg_editkey.cmd --edit-key gpg2 --sign mydoc.txt
Rainer H?rbe
Identinetics GmbH

@_date: 2017-03-29 08:23:32
@_author: Rainer Hoerbe 
@_subject: haaveged + gpg --sign fails with "signing failed: Operation 
This system is based on a LiveCD starting a Docker container. Therefore there is no init.d, only pcscd and haveged. In my understanding wait time to collect entropy should not be the problem when having a blocking RNG - the process just waits.
I did this before, and it worked. As not using havegd did work for me I have no need to fix this problem. I just would recommend to add a note to gpg that users are warned about the issue, as gpg will not yield a meaningful error message, even with -vvv.
Thanks, Rainer

@_date: 2017-05-31 13:54:50
@_author: Rainer Hoerbe 
@_subject: PGP for official documents / eIDAS and ZertES 
Hi Daniel,
The eIDAS regulation is replacing the national e-signature laws to make signatures (besides other other things) interoperable across borders. While the law is fairly technology-neutral, the implementation acts have to reference specific technologies, which are CMS, PDF- and XML signature, but not PGP-signature.
Beyond that, even if the EU would include PGP signatures, the technical interoperability would just be the beginning. There are quite heavy legal and organization layers on top of the technology that assure security levels, notification (mutual acceptance) and cooperation procedures. IMHU none of these exist in the PGP world.
- Rainer

@_date: 2017-05-31 20:55:59
@_author: Rainer Hoerbe 
@_subject: PGP for official documents / eIDAS and ZertES 
CMS and PGP signatures are similar in concept, but incompatible. GPG-signatures could be added to xmldsig quite easily, but implementing this securely in different libraries would be a major undertaking. In addition, the WoT model is not compatible with the PKI + Trust Status Lists of eIDAS, although one could bridge the models, somehow.
PGP is sufficient - I would say even better and more secure - in use cases where a small community leverages a trust relationship from the physical world. An example are CERT-employees or Federation Operators who know each other directly or with usually one intermediary from conferences and meetings, and are technically versed enough to overcome the learning curve.
eIDAS has a very different scope, trying to make electronic identities of all EU citizens trustworthy between member states.  It is hard to judge if SuisseID is expensive or not. With support and integration a price range of 50?/year is what enterprises pay for an employee smartcard. But I guess that even ?expensive" cards like nPA and SuisseID are somehow subsidized by the taxpayer. We will probably know only in hindsight if it was worth the investment from a macroeconomic point of view.
PGP might grab significant market shares inside specific domains, where its poor usability does not matter or is covered by scripts and shells. However, as a competitor to eIDAS it would need a massive investment and industry + government support.
Not cheap, because the vetting of persons against public registers requires administrative procedures. AFAIK only Estonia is offering such a service as of now, called the e-Residency program.
- Rainer


@_date: 2008-04-03 10:17:14
@_author: Reinhard =?ISO-8859-1?Q?M=FCller?= 
@_subject: Siemens card reader 
Am Mittwoch, den 02.04.2008, 19:53 +0200 schrieb Werner Koch:
Using these options with a card with PIN 123456 gives me:
$ gpg --debug-ccid --debug-ccid --clearsign foo
gpg: DBG: ccid-driver: using CCID reader 0 (ID=0BF8:1006:X:0)
gpg: DBG: ccid-driver: idVendor: 0BF8  idProduct: 1006  bcdDevice: 0203
gpg: DBG: ccid-driver: ChipCard Interface Descriptor:
gpg: DBG: ccid-driver:   bLength                54
gpg: DBG: ccid-driver:   bDescriptorType        33
gpg: DBG: ccid-driver:   bcdCCID              1.00
gpg: DBG: ccid-driver:   nMaxSlotIndex           0
gpg: DBG: ccid-driver:   bVoltageSupport         7  ?
gpg: DBG: ccid-driver:   dwProtocols             3  T=0 T=1
gpg: DBG: ccid-driver:   dwDefaultClock       4800
gpg: DBG: ccid-driver:   dwMaxiumumClock      8000
gpg: DBG: ccid-driver:   bNumClockSupported      4
gpg: DBG: ccid-driver:   dwDataRate          10752 bps
gpg: DBG: ccid-driver:   dwMaxDataRate      412903 bps
gpg: DBG: ccid-driver:   bNumDataRatesSupp.    106
gpg: DBG: ccid-driver:   dwMaxIFSD             254
gpg: DBG: ccid-driver:   dwSyncProtocols  00000007  2-wire 3-wire I2C
gpg: DBG: ccid-driver:   dwMechanical     00000000 gpg: DBG: ccid-driver:   dwFeatures       000207B2
gpg: DBG: ccid-driver:     Auto configuration based on ATR
gpg: DBG: ccid-driver:     Auto clock change
gpg: DBG: ccid-driver:     Auto baud rate change
gpg: DBG: ccid-driver:     Auto PPS made by CCID
gpg: DBG: ccid-driver:     CCID can set ICC in clock stop mode
gpg: DBG: ccid-driver:     NAD value other than 0x00 accepted
gpg: DBG: ccid-driver:     Auto IFSD exchange
gpg: DBG: ccid-driver:     Short APDU level exchange
gpg: DBG: ccid-driver:   dwMaxCCIDMsgLen       271
gpg: DBG: ccid-driver:   bClassGetResponse    echo
gpg: DBG: ccid-driver:   bClassEnvelope       echo
gpg: DBG: ccid-driver:   wlcdLayout           none
gpg: DBG: ccid-driver:   bPINSupport             0 gpg: DBG: ccid-driver:   bMaxCCIDBusySlots       1
gpg: DBG: ccid-driver: usb_bulk_read error: Resource temporarily
gpg: DBG: ccid-driver: USB: CALLING USB_CLEAR_HALT
gpg: DBG: ccid-driver: usb_bulk_read error: Resource temporarily
gpg: DBG: ccid-driver: USB: RETRYING bulk_in AGAIN
gpg: DBG: ccid-driver: usb_bulk_read error: Resource temporarily
gpg: DBG: ccid-driver: USB: RETRYING bulk_in AGAIN
gpg: DBG: ccid-driver: status: 00  error: 00  octet[9]: 00
               data: 3B FA 13 00 FF 81 31 80 45 00 31 C1 73 C0 01 00 00
90 00 B1
gpg: DBG: ccid-driver: status: 00  error: 00  octet[9]: 01
               data: 11 10 FF 45 00 80 00
gpg: DBG: ccid-driver: GetParametes returned 82 07 00 00 00 00 05 00 00
01 11 10 FF 45 00 80 00
gpg: DBG: ccid-driver:   protocol ..........: T=1
gpg: DBG: ccid-driver:   bmFindexDindex ....: 11
gpg: DBG: ccid-driver:   bmTCCKST1 .........: 10
gpg: DBG: ccid-driver:   bGuardTimeT1 ......: FF
gpg: DBG: ccid-driver:   bmWaitingIntegersT1: 45
gpg: DBG: ccid-driver:   bClockStop ........: 00
gpg: DBG: ccid-driver:   bIFSC .............: 128
gpg: DBG: ccid-driver:   bNadValue .........: 0
gpg: DBG: ccid-driver: sending 61 07 00 00 00 00 06 01 00 00 11 10 FF 45
00 80 00
gpg: DBG: ccid-driver: status: 00  error: 00  octet[9]: 01
               data: 13 10 FF 45 00 80 00
gpg: DBG: ccid-driver: sending 6F 0B 00 00 00 00 07 04 00 00 00 A4 04 00
06 D2 76 00 01 24 01
gpg: DBG: ccid-driver: status: 00  error: 00  octet[9]: 00
               data: 6F 12 84 10 D2 76 00 01 24 01 01 01 00 01 00 00 07
AC 00 00 90 00
gpg: DBG: ccid-driver: sending 6F 05 00 00 00 00 08 04 00 00 00 CA 00 4F
gpg: DBG: ccid-driver: status: 00  error: 00  octet[9]: 00
               data: D2 76 00 01 24 01 01 01 00 01 00 00 07 AC 00 00 90
gpg: DBG: ccid-driver: sending 6F 05 00 00 00 00 09 04 00 00 00 CA 00 C4
gpg: DBG: ccid-driver: status: 00  error: 00  octet[9]: 00
               data: 00 FE FE FE 03 03 03 90 00
gpg: DBG: ccid-driver: sending 6F 05 00 00 00 00 0A 04 00 00 00 CA 00 6E
gpg: DBG: ccid-driver: status: 00  error: 00  octet[9]: 00
               data: 4F 10 D2 76 00 01 24 01 01 01 00 01 00 00 07 AC 00
00 73 81 9D C0 01 78 C1 05 01 04 00 00 20 C2 05 01 04 00 00 20 C3 05 01
04 00 00 20 C4 07 00 FE FE FE 03 03 03 C5 3C 4A D9 E9 39 32 E4 58 75 0A
F5 80 98 2A 6F D3 72 87 7C A6 E3 1E 9A 5B 89 0C BA F5 36 7E 2E 09 93 74
5F EC 25 AD 08 A0 AE C6 F9 89 47 13 3A EC DA 62 61 0D E7 8A ED 10 D3 D0
C4 48 5B C6 3C C4 85 A6 CD 7E C6 6E 9E EC 33 65 F2 70 F2 75 E4 C3 2F 6C
A5 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 CD 0C 44 D5 EB 94 44
D5 EB C2 44 D5 EB 3D 5E 08 72 65 69 6E 68 61 72 64 90 00
gpg: DBG: ccid-driver: sending 6F 05 00 00 00 00 0B 04 00 00 00 CA 00 5E
gpg: DBG: ccid-driver: status: 00  error: 00  octet[9]: 00
               data: 72 65 69 6E 68 61 72 64 90 00
gpg: DBG: ccid-driver: sending 6F 05 00 00 00 00 0C 04 00 00 00 CA 00 6E
gpg: DBG: ccid-driver: status: 00  error: 00  octet[9]: 00
               data: 4F 10 D2 76 00 01 24 01 01 01 00 01 00 00 07 AC 00
00 73 81 9D C0 01 78 C1 05 01 04 00 00 20 C2 05 01 04 00 00 20 C3 05 01
04 00 00 20 C4 07 00 FE FE FE 03 03 03 C5 3C 4A D9 E9 39 32 E4 58 75 0A
F5 80 98 2A 6F D3 72 87 7C A6 E3 1E 9A 5B 89 0C BA F5 36 7E 2E 09 93 74
5F EC 25 AD 08 A0 AE C6 F9 89 47 13 3A EC DA 62 61 0D E7 8A ED 10 D3 D0
C4 48 5B C6 3C C4 85 A6 CD 7E C6 6E 9E EC 33 65 F2 70 F2 75 E4 C3 2F 6C
A5 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 CD 0C 44 D5 EB 94 44
D5 EB C2 44 D5 EB 3D 5E 08 72 65 69 6E 68 61 72 64 90 00
gpg: DBG: ccid-driver: sending 6F 05 00 00 00 00 0D 04 00 00 00 CA 00 7A
gpg: DBG: ccid-driver: status: 00  error: 00  octet[9]: 00
               data: 93 03 00 20 B5 90 00
gpg: Bisher erstellte Signaturen: 8373
Bitte geben Sie die PIN
 ein [Verarbeitete Signaturen: 8373]
gpg: DBG: ccid-driver: sending 6F 0B 00 00 00 00 0E 04 00 00 00 20 00 81
06 31 32 33 34 35 36
gpg: DBG: ccid-driver: status: 00  error: 00  octet[9]: 00
               data: 90 00
gpg: DBG: ccid-driver: sending 6F 0B 00 00 00 00 0F 04 00 00 00 20 00 82
06 31 32 33 34 35 36
gpg: DBG: ccid-driver: status: 00  error: 00  octet[9]: 00
               data: 90 00
gpg: DBG: ccid-driver: sending 6F 28 00 00 00 00 10 04 00 00 00 2A 9E 9A
23 30 21 30 09 06 05 2B 0E 03 02 1A 05 00 04 14 4E 64 F2 0F 81 0E 0E 5B
A6 1A 4F A6 DE AB 51 67 A5 AB A0 31
gpg: DBG: ccid-driver: status: 41  error: F4  octet[9]: 00
               data:
gpg: DBG: ccid-driver: CCID command failed: Procedure byte conflict
gpg: ccid_transceive failed: (0x10009)
gpg: apdu_send_simple(0) failed: card inactive
gpg: Beglaubigung fehlgeschlagen: Allgemeiner Fehler
gpg: foo: clearsign failed: Allgemeiner Fehler
gpg: DBG: ccid-driver: status: 01  error: 00  octet[9]: 01
               data:

@_date: 2008-04-03 13:07:59
@_author: Reinhard =?ISO-8859-1?Q?M=FCller?= 
@_subject: Siemens card reader 
thanks for investigating.
Am Donnerstag, den 03.04.2008, 12:04 +0200 schrieb Werner Koch:
Hm, this seems to be a useful page :-)
Can I assume that all of the listed readers work with GnuPG? I'm
specifically looking for an internal reader, like the SCM-SCR333.

@_date: 2008-04-16 13:44:02
@_author: Reinhard Mueller 
@_subject: SCM SCR-333 card reader: works! 
just to let you know that I installed the SCM SCR333 card reader and it
worked out of the box. Seems to be a recommendable device if somebody is
looking for an internal card reader for a desktop computer.

@_date: 2008-03-30 15:52:07
@_author: Reinhard =?ISO-8859-1?Q?M=FCller?= 
@_subject: Siemens card reader 
============================== START ==============================
I've tried a Siemens S26361-F1260-L801 internal USB card reader with an
OpenPGP card. Siemens claims the reader is CCID compatible.
After the usual fix of the permissions for the device, "gpg
--card-status" works perfectly, but with "gpg --clearsign foo" I get:
$ gpg --clearsign foo
gpg: Bisher erstellte Signaturen: 8307
Bitte geben Sie die PIN
 ein [Verarbeitete Signaturen: 8307]
gpg: ccid_transceive failed: (0x10009)
gpg: apdu_send_simple(0) failed: card inactive
gpg: Beglaubigung fehlgeschlagen: Allgemeiner Fehler
gpg: foo: clearsign failed: Allgemeiner Fehler
Any hint?

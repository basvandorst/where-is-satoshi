
@_date: 2001-08-23 08:14:01
@_author: CO Group Support 
@_subject: Can't gpg --gen-key 
Hi.  I'm trying to do gpg =
--gen-key on a=20
FreeBSD system from a remote terminal (telnetted in) and, when it gets =
to the=20
end and tries to generate the key, it complains that it's not getting =
entropy and NEVER completes.  I mean NEVER.  Any ideas? =20

@_date: 2001-08-24 17:06:01
@_author: CO Group Support 
@_subject: GNUPG and/or PGP with PHP 
$pgppath = "/usr/home/myhome/.pgp";
$uid = "Recipient Name ";
$to = "recip
$subject = "Seekwit Message";
$from = "me
$msg = "This is a vewy, vewy seekwit message.";
$cmd = "/usr/local/bin/gpg --textmode --always-trust ";
$cmd .= "--armor --batch --no-secmem-warning --homedir '$gnupghome' ";
$cmd .= "--compress-algo 1 --cipher-algo cast5 --recipient '$uid' --encrypt
$cmd .= "| /usr/bin/mail -s '$subject' $to";
$pp = popen($cmd, "w");
fputs($pp, $msg);
$cmd = "echo '$msg' | /usr/local/bin/gpg --textmode --always-trust ";
$cmd .= "--armor --batch --no-secmem-warning --homedir '$gnupghome' ";
$cmd .= "--compress-algo 1 --cipher-algo cast5 --recipient '$uid' --encrypt
$cmd .= "| /usr/bin/mail -s '$subject' $to";
$cmd = "echo '$msg' | /usr/local/bin/gpg --textmode --always-trust ";
$cmd .= "--armor --batch --no-secmem-warning --homedir '$gnupghome' ";
$cmd .= "--compress-algo 1 --cipher-algo cast5 --recipient
'$uid' --encrypt";
$encrypted = `$cmd`;
$encrypted = "From: $from\n\n" . $encrypted;
mail($to, $subject, "", $encrypted);
Here are some code snippets where the PGP works fine, but Apache complains:

@_date: 2001-08-25 05:07:02
@_author: CO Group Support 
@_subject: GNUPG and PGP with PHP 
into the pgp command to send all that STDERR noise down the toilet.
I can't sign the message because, when I include the -s option, pgp needs my
a pass-phrase, which I don't want to put on the command line in clear text.
So, I am just sending the messages unsigned, unless you can think of a way
around this problem. :-)
Anyway, thanks for the help.  I am including the working code below in case
someone finds it useful.  There are a lot of questions on the message boards
and mailing lists about how to get this done.
Hash: SHA1
The PGP question is a bit off-topic, but here's a question for you.  What
version of PGP are you using?  Also, you may want to try to add the
following to your PGP command:
+force +batchmode
We have an automated system that encrypts/decrypts files, and those two
flags keep the system from outputting any additional messages or
prompting, which is probably why it's causing you problems.  PGP is
"noisy" by default.
Also, you aren't signing the output.  Don't you want -feast?
Here's what your modified line should look like:
pgp -feast +force +batchmode '$uid' |
        ^  ^^^^^^ ^^^^^^^^^^
We usually specify the +force and +batchmode at the end, but since you are
using it as a UNIX-style filter, I think it's probably okay.
Hope that helps.


@_date: 2018-09-02 14:38:07
@_author: mlnl 
@_subject: "gpg: signing failed: Invalid length" when use brainpool512r1 
tested & confirmed with GnuPG 2.2.10, libgcrypt 1.8.3 Debian Stretch 9.5

@_date: 2018-09-03 17:40:57
@_author: mlnl 
@_subject: "gpg: signing failed: Invalid length" when use brainpool512r1 
I have looked at my gpg.conf and found a commented hint for myself ;):
# cert-digest-algo SHA512 for ECC >= 512-bit
Tested again with cert-digest-algo SHA512 without problems:
pub   brainpoolP512r1/0D9032C369992D8E 2018-09-03 [SCA] [verf?llt:
Schl.-Fingerabdruck = 2601 6E4C BA25 2686 EEC1  EBB8 0D90 32C3 6999 2D8E
  Keygrip = 985D56A2FE62C404CC0382815C391E01B5769F58
uid  testbp512

@_date: 2019-02-14 10:52:14
@_author: mlnl 
@_subject: Problem with generating Brainpool P-512 
Hi Werner,
you should add it in the man page, because it's a FAQ:
cert-digest-algo !< SHA512 ing gpg.conf for ECC >= 512-bit

@_date: 2020-08-28 21:39:39
@_author: mlnl 
@_subject: [Announce] GnuPG 2.2.22 released 
today, i have compiled 2.2.22 under Debian Buster. Decryption of
files fail in terminal. Decryption of e-mails with Claws-Mail fail too.
For Claws i had compiled and installed gpgme-1.12.1. I'm using a Yubikey
for key storage & usage. Works flawless with GnuPG 2.2.21.
From my gpg-agent.log:
2020-08-28 21:20:46 gpg-agent[23604] SIGUSR2 received - updating card event counter
2020-08-28 21:20:46 gpg-agent[23604] DBG: chan_11 <- ERR 100663297 Allgemeiner Fehler  2020-08-28 21:20:46 gpg-agent[23604] smartcard decryption failed: Allgemeiner Fehler 2020-08-28 21:20:46 gpg-agent[23604] command 'PKDECRYPT' failed: Allgemeiner Fehler 2020-08-28 21:20:46 gpg-agent[23604] DBG: chan_10 -> ERR 100663297 Allgemeiner Fehler 2020-08-28 21:21:05 gpg-agent[23604] smartcard decryption failed: Dateiende
2020-08-28 21:21:05 gpg-agent[23604] command 'PKDECRYPT' failed: Dateiende 2020-08-28 21:21:05 gpg-agent[23604] DBG: chan_10 -> ERR 67125247 Dateiende 2020-08-28 21:21:13 gpg-agent[23604] error accessing card: Daten?bergabe unterbrochen (broken pipe)
2020-08-28 21:21:13 gpg-agent[23604] smartcard decryption failed: Daten?bergabe unterbrochen (broken pipe)
2020-08-28 21:21:13 gpg-agent[23604] command 'PKDECRYPT' failed: Daten?bergabe unterbrochen (broken pipe)
2020-08-28 21:21:13 gpg-agent[23604] DBG: chan_10 -> ERR 67141741 Daten?bergabe
unterbrochen (broken pipe) I went back to 2.2.21.

@_date: 2020-08-31 09:22:52
@_author: mlnl 
@_subject: [Announce] GnuPG 2.2.22 released 
Hi Werner,
$ systemctl --user start gpg-agent.service
$ gpg-connect-agent 'scd getinfo version' /bye
D 2.2.22
And i don't know why, but encryption and decryption works in
terminal today (the outputs with --verbose --verbose are looking OK) :)
The other thing is Claws-Mail. I can't check signatures or
decrypte-mails. With the hint from Micha? G?rny (gpg --card-status) it
works. Without gpg --card-status i get (with claws-mail --debug):
sgpgme.c:716:setting gpgme CTYPE locale sgpgme.c:723:setting gpgme
CTYPE locale to: de_DE.UTF-8 sgpgme.c:730:setting gpgme locale to UTF8:
de_DE.UTF-8 sgpgme.c:733:done
sgpgme.c:741:setting gpgme MESSAGES locale
sgpgme.c:748:setting gpgme MESSAGES locale to: de_DE.UTF-8
sgpgme.c:754:setting gpgme locale to UTF8: de_DE.UTF-8
sgpgme.c:767:GpgME Protocol: OpenPGP
Version: 2.2.22 (req 1.4.0)
Executable: /usr/local/bin/gpg
sgpgme.c:767:GpgME Protocol: CMS
Version: 2.2.22 (req 2.0.4)
Executable: /usr/local/bin/gpgsm
sgpgme.c:767:GpgME Protocol: GPGCONF
Version: 2.2.22 (req 2.0.4)
Executable: /usr/local/bin/gpgconf
sgpgme.c:767:GpgME Protocol: Assuan
Version: 1.0.0 (req 1.0.0)
Executable: /run/user/1000/gnupg/S.gpg-agent
sgpgme.c:767:GpgME Protocol: UIServer
Version: 1.0.0 (req 1.0.0)
Executable: /run/user/1000/gnupg/S.uiserver
sgpgme.c:767:GpgME Protocol: Spawn
Version: 1.0.0 (req 1.0.0)
Executable: /nonexistent
prefs_gpg.c:521:Saving GPG config
prefs.c:295:Found [GPG]
plugin.c:527:Plugin PGP/Core (from
file /usr/lib/x86_64-linux-gnu/claws-mail/plugins/pgpcore.so) loaded
plugin.c:527:Plugin PGP/inline (from
file /usr/lib/x86_64-linux-gnu/claws-mail/plugins/pgpinline.so) loaded
plugin.c:527:Plugin PGP/MIME (from
file /usr/lib/x86_64-linux-gnu/claws-mail/plugins/pgpmime.so) loaded
signature checking:
pgpmime.c:189:Checking PGP/MIME signature
sgpgme.c:465:data 0x72d1a7190810 (2903 618)
sgpgme.c:110:err code 9
sgpgme.c:110:err code 9
procheader.c:174:generic_get_one_field: empty line
    message/rfc822 (offset:0 length:7882 encoding: 6)
        multipart/encrypted (offset:4131 length:3751 encoding: 6)
            application/pgp-encrypted (offset:4278 length:11 encoding:
6) application/octet-stream (offset:4414 length:3429 encoding: 6)
messageview.c:1400:decrypting message part
sgpgme.c:465:data 0x7ffde758bef0 (4414 3429)
GPG_AGENT_INFO=/run/user/1000/gnupg/S.gpg-agent:0:1 sgpgme.c:505:can't
decrypt (Dateiende) pgpmime.c:343:plain is null!

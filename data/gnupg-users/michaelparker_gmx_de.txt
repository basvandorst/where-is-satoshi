
@_date: 2007-02-11 15:44:37
@_author: Michael Parker 
@_subject: external pinpad, gnupg, SPR532 PinPad SmartCard Reader 
Hi,  I tried to setup an external smartcard reader with a pinpad and on gentoo I don't get it to work.  On an ubuntu-installation the pin isn't enterd by the external pinpad but by the regualar keyboard and that works fine.  On gentoo I'm asked to enter the pin on the pinpad of the reader. After entering it doesn't find the secret key.  Some details of my system:  It's a   Bus 002 Device 002: ID 04e6:e003 SCM Microsystems, Inc. SPR532 PinPad SmartCard Reader  gpg-agent.conf   pinentry-program /usr/bin/pinentry-qt  no-grab  default-cache-ttl 1800
 gpg.conf   grep -v ^# gpg.conf | grep -v ^$  require-cross-certification  keyserver hkp://subkeys.pgp.net  hidden-encrypt-to 0219F045  hidden-encrypt-to 18BA2C46  default-recipient 0219F045  default-recipient 18BA2C46  use-agent  reader access works  gpg --card-status    Application ID ...: D276000124010101000100000AA60000  Version ..........: 1.1  Manufacturer .....: PPC Card Systems  ...  I tried those variations of useflags settings   emerge -tpv gnupg  Calculating dependencies... done!  [ebuild   R   ] app-crypt/gnupg-2.0.2  USE="X nls smartcard -bzip2 -doc -ldap -openct -pcsc-lite (-selinux)" 0 kB  emerge -tpv gnupg  These are the packages that would be merged, in reverse order:  Calculating dependencies... done!  [ebuild   R   ] app-crypt/gnupg-2.0.2  USE="X nls pcsc-lite smartcard -bzip2 -doc -ldap -openct (-selinux)" 0 kB  gpg-agent is running   ps ax | grep agent  23837 ?        Ss     0:00 gpg-agent --daemon  installed software    app-crypt/gnupg        Latest version available: 2.0.2        Latest version installed: 2.0.2        Size of files: 3,876 kB        Homepage:              Description:   The GNU Privacy Guard, a GPL pgp replacement        License:       GPL-2   app-crypt/pinentry        Latest version available: 0.7.2-r2        Latest version installed: 0.7.2-r2        Size of files: 389 kB        Homepage:              Description:   Collection of simple PIN or passphrase entry dialogs which utilize the Assuan protocol        License:       GPL-2  sys-apps/pcsc-lite        Latest version available: 1.3.1-r1        Latest version installed: 1.3.1-r1        Size of files: 822 kB        Homepage:              Description:   PC/SC Architecture smartcard middleware library        License:       as-is  sys-libs/libchipcard        Latest version available: 2.1.8        Latest version installed: 2.1.8        Size of files: 974 kB        Homepage:              Description:   Libchipcard is a library for easy access to chip cards via chip card readers (terminals).        License:       GPL-2  *  dev-libs/opensc        Latest version available: 0.10.1        Latest version installed: 0.10.1        Size of files: 1,275 kB        Homepage:              Description:   SmartCard library and applications        License:       LGPL-2  *  dev-libs/openct        Latest version available: 0.6.6        Latest version installed: 0.6.6        Size of files: 550 kB        Homepage:              Description:   library for accessing smart card terminals        License:       BSD  Does the external pinpad in between work at all under linux ?  If ubuntu is configured that way, so pins are still enterd by the regular keybord, how do I configure it the same with gentoo ?
Do I have to change my software/configuration ?  Any hints will be appreciated

@_date: 2007-02-11 18:18:03
@_author: Michael Parker 
@_subject: external pinpad, gnupg, SPR532 PinPad SmartCard Reader 
Hi Alon,
thanks for the hint !
I don't know if I get it.
For example:
when I try
pkcs11-tool -L
I get:
winscard_clnt.c:320:SCardEstablishContextTH() Cannot open public shared file: /var/run/pcscd.pub
Available slots:
Slot 0           (empty)
Slot 1           (empty)
Slot 2           (empty)
Slot 3           (empty)
Slot 4           (empty)
Slot 5           (empty)
Slot 6           (empty)
Slot 7           (empty)
which doesn't mean a think to me.
I don't think that this is the reason for my problem. A year ago it already worked with the exception that there was not popup asking me to enter the pin by the cardreader.
As I mentioned the ubuntu-distribution behaves different.
Kind regards,

@_date: 2007-02-11 20:08:24
@_author: Michael Parker 
@_subject: external pinpad, gnupg, SPR532 PinPad SmartCard Reader 
ok, I did a
 * Starting pcscd ...   I get in /var/log/messages
Feb 11 20:03:36 zaphod su(pam_unix)[3950]: session opened for user root by Feb 11 20:06:18 zaphod pcscd: configfile.l:106:evaluatetoken() Error with device GEN_SMART_RDR: No such file or directory
Feb 11 20:06:18 zaphod pcscd: configfile.l:107:evaluatetoken() You should use 'DEVICENAME /dev/null' if your driver does not use this field
Feb 11 20:06:18 zaphod pcscd: configfile.l:127:evaluatetoken() Error with library /usr/lib/readers/usb/libgen_ifd.so: No such file or directory
Feb 11 20:06:18 zaphod pcscd: pcscdaemon.c:489:at_exit() cleaning /var/run
Feb 11 20:06:18 zaphod pcscd: pcscdaemon.c:508:clean_temp_files() Cannot unlink /var/run/pcscd.comm: No such file or directory
That would be fine with me, because the pinpad wasn't supported in the past at Kind regards,


@_date: 2010-06-16 05:39:47
@_author: beppecosta 
@_subject: Compile PTH on AIX 
There are 2 pth.h. One is in "/pth.20.07", while the other is in "/usr/local/include" and
both have the test   defined(FD_SETSIZE) .....

@_date: 2010-06-17 02:29:05
@_author: beppecosta 
@_subject: Compile PTH on AIX 
YES - All pth.h  have these lines :
 PTH_VERSION_STR "2.0.7 (08-Jun-2006)"
    /* check if the user requests a bigger FD_SETSIZE than we can handle */
 defined(FD_SETSIZE)
 FD_SETSIZE > 8192
 "FD_SETSIZE is larger than what GNU Pth can handle."

@_date: 2010-05-04 05:50:57
@_author: beppecosta 
@_subject: Compile PTH on AIX 
I'm trying to compile pth-2.0.7 on AIX (as prerequisite for GnuPG 2.0.15).
Configure runs fine while make exits with this error:
./shtool scpp -o pth_p.h -t pth_p.h.in -Dcpp -Cintern -M '==
pth_compat.c pth_debug.c pth_syscall.c pth_errno.c pth_ring.c pth_m
ctx.c pth_uctx.c pth_clean.c pth_time.c pth_tcb.c pth_util.c pth_pqueue.c
pth_event.c pth_sched.c pth_data.c pth_msg.c pth_cancel.c
pth_sync.c pth_attr.c pth_lib.c pth_fork.c pth_high.c pth_ext.c pth_string.c
./libtool --mode=compile --quiet gcc -c -I. -O2 -pipe pth_debug.c
In file included from pth_p.h.in:54, from pth_debug.c:29:
pth.h:93:2: error:  "FD_SETSIZE is larger than what GNU Pth can
handle."  I ran a simple utility check that says: FD_SETSIZE=65534 Is there any solution to carry on with build ?

@_date: 2010-05-05 08:33:47
@_author: beppecosta 
@_subject: Compile PTH on AIX 
I've retried configure as suggested but I get this error:
Optional Platform Environment:                                           checking for number of signals... 64                                     checking for default value of FD_SETSIZE... 1024                         configure: error: invalid FD_SETSIZE specified -- allowed: 10-9999

@_date: 2010-05-06 01:07:25
@_author: beppecosta 
@_subject: Compile PTH on AIX 
Because FD_SETSIZE is defined somewhere as 65534, I think that
fdsetsize=8192 would produce the same  "FD_SETSIZE is larger than what
GNU Pth can handle."

@_date: 2010-05-06 09:09:59
@_author: beppecosta 
@_subject: Compile PTH on AIX 
As you suggested, I tried with 8192 and both "configure" and "make" did
complete without errors.
"make test" says : OK - ALL TESTS SUCCESSFULLY PASSED. "make install" is OK.
Next week I will try again to compile gpg 2.

@_date: 2010-05-11 05:15:20
@_author: beppecosta 
@_subject: Compile PTH on AIX 
Hi Newton
I've successfully built and installed PTH 2.0.7 and the pth-config says: pth_version="2.0.7 (08-Jun-2006)"
Now I've tried to compile gnupg-2.0.15 but configure fails with error:
configure: checking for programs checking for pth-config... /QOpenSys/usr/local/bin/pth-config    checking for PTH - version >= 1.3.7... yes                       checking whether PTH installation is sane... no                  configure: checking system features for estream                configure:                                                     ***                                                            *** It is now required to build with support for the           *** GNU Portable Threads Library (Pth). Please install this    *** library first.  The library is for example available at    ***   ftp://ftp.gnu.org/gnu/pth/                              configure: error:                                                      ***                                                                    *** Required libraries not found. Please consult the above messages    *** and install them before running configure again.                   ***

@_date: 2010-05-11 06:38:59
@_author: beppecosta 
@_subject: Compile PTH on AIX 
I think that the problem is still with FD_SETSIZE ....
configure:7909: checking for pth-config
configure:7927: found /QOpenSys/usr/local/bin/pth-config
configure:7940: result: /QOpenSys/usr/local/bin/pth-config
configure:7954: checking for PTH - version >= 1.3.7
configure:7980: result: yes
configure:7982: checking whether PTH installation is sane
configure:8006: gcc -o conftest -g -O2 -I/QOpenSys/usr/local/include  -L/QOpenSys/usr/local/lib conftest.c  -lpth -ldl -lnsl >&5
In file included from conftest.c:37:
than what GNU Pth can handle."
configure:8006: $? = 1
configure: failed program was:
configure:8022: result: no

@_date: 2010-05-17 23:57:38
@_author: beppecosta 
@_subject: Compile PTH on AIX 
We understand that the problem is about FDSETSIZE.
PTH has been configured and compiled --with-fdsetsize=8192
However gnupg-2 doesn't recognize this option: "configure: WARNING: unrecognized options: --with-fdsetsize"  How can I solve this ?

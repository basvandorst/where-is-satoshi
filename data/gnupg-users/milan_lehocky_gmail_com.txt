
@_date: 2005-12-02 18:57:14
@_author: Milan Lehocky 
@_subject: gpgme streaming example 
i'm trying to write o code (using gpgme library) with on-the-fly
encryption. The amount of data is about 10MB and i don't want them to
be saved on the file system. Is it possible? Can you provide me an
example code please?
How can I use gpgme_data_new_from_stream() ?
 Milan

@_date: 2005-12-13 17:34:52
@_author: Milan Lehocky 
@_subject: GPGME signing problem 
running the example t-sign.c (gpgme-1.0.3) hangs on function
gpgme_op_sign() when the passphrase_cb is set.
If I remove the gpgme_set_passphrase_cb(..) example ends with no
signatures made.
The passphrase callback function is never called.. - that is strange.
I'm running SunOS 5.8.
I also tried this:
pass_cb (void *opaque, const char *uid_hint, const char *passphrase_info,
               int last_was_bad, int fd)
  write (fd, "asdf\n", 5);
  return 0;
  gpgme_set_passphrase_cb (ctx, pass_cb, NULL);
  err = gpgme_get_key (ctx, "", &signers_key, 1);
  fail_if_err (err);
  err = gpgme_signers_add(ctx, signers_key);
  fail_if_err (err);
  printf("before\n");
  err = gpgme_op_sign(ctx, in, out_signed, GPGME_SIG_MODE_CLEAR);
  printf("after\n"); // this never hapens..
But it hangs, too.
Do you have any suggestions?
Thanks a lot,
Milan Lehocky

@_date: 2005-12-15 17:45:45
@_author: Milan Lehocky 
@_subject: GPGME signing problem 
this is from log (plain text already passed to gpg):
posix-io.c:340: gpgme:select on [ r3 ]
posix-io.c:386: select OK [ r3 ]
posix-io.c:72: fd 3: about to read 1024 bytes
posix-io.c:79: fd 3: got 94 bytes
fd 3: got `[GNUPG:] USERID_HINT 30E8F3701B56AE33 Application (toto je
testovaci kluc pre App) posix-io.c:340: gpgme:select on [ r3 r10 ]
posix-io.c:386: select OK [ r3 ]
posix-io.c:340: gpgme:select on [ r3 ]
posix-io.c:386: select OK [ r3 ]
posix-io.c:72: fd 3: about to read 1024 bytes
posix-io.c:79: fd 3: got 64 bytes
fd 3: got `[GNUPG:] NEED_PASSPHRASE 30E8F3701B56AE33 30E8F3701B56AE33 17 0
posix-io.c:340: gpgme:select on [ r3 r10 ]
posix-io.c:386: select OK [ r3 ]
posix-io.c:340: gpgme:select on [ r3 ]
posix-io.c:386: select OK [ r3 ]
posix-io.c:72: fd 3: about to read 1024 bytes
posix-io.c:79: fd 3: got 37 bytes
fd 3: got `[GNUPG:] GET_HIDDEN passphrase.enter
posix-io.c:340: gpgme:select on [ r3 r10 ]
posix-io.c:386: select OK [ ]
posix-io.c:340: gpgme:select on [ r3 r10 ]
posix-io.c:386: select OK [ ]
posix-io.c:340: gpgme:select on [ r3 r10 ]
this continues until i press ctr-c
gpg asks for passphrase, but nothing happens

@_date: 2005-12-20 17:26:30
@_author: Milan Lehocky 
@_subject: GPGME signing problem 
I found the problem: the script mkstatus (which should generate
status-table.h) is not working because of awk used there. The awk on
my SunOS 5.8 seems not to accept using variables without '-vvar=value'
etc.. I modified the script and it works now :)
Thanks o lot for your time,

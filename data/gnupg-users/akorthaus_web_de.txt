
@_date: 2002-06-04 18:16:02
@_author: akorthaus@web.de 
@_subject: Cannot encrypt/decrypt zip-Files correctly 
I´ve got a strange problem.  I try to encrypt a gz-file on my Linux Server
using GPG, and download the encrypted file, and decrypt it with WinPT on my
That`s what I´ve tried in SHELL:
(17:23:59) [webseite] gpg -o out.txt -a -e --default-recipient akorthaus
in the same way I encrypted html-files which I could decrypt without any
Now I open out.txt and copied the code to my clipboard. After that I opened
WinPT and decrypted the code from clipboard, that worked correctly, but the
result was:
As I allready said - the same way worked with html Files!
What could be the problem, or how can I decrypt complete files using WinPT?

@_date: 2002-06-04 23:21:04
@_author: akorthaus@web.de 
@_subject: Cannot encrypt/decrypt zip-Files correctly (Andreas) 
I think that is not correct, I think it´s simply not possible to decrypt a
binary file by clipboard. It´s just possible with WinPT filemanager. Also it
is just possible wizthout -a or --armor!!!

@_date: 2002-06-04 23:50:02
@_author: akorthaus@web.de 
@_subject: Cannot encrypt/decrypt zip-Files correctly (Andreas) 
But later I will use gzip for better comression, don´t I?  Because It´s a
realy big amount of data, and I have to store dumps from ervery day vor 30
days, and in my PHP-script I always send me the actual mysql-dump for
security reasons, and that should be encrypted - you see?
% That creats the file 'data.gpg', which I can decrypt an my PC. On PHP this
should look something like this:
% Yes, but mysqldump und gzip also have no homedirectory, and that working
fine! And the keyrings, how should I include them? If the path to the
keyring is like that:  /www/path/to/pubring.gpg  how can I build this in  my

@_date: 2002-06-05 03:27:02
@_author: akorthaus@web.de 
@_subject: Cannot encrypt/decrypt zip-Files correctly (Andreas) 
Does someone now, what I have to do, if my  pgp is run by the webserver and
has no home-directory, no keyrings, no keys, if I just want to get the
following script running:
% That creates the file 'data.gpg', which I can decrypt an my PC. On PHP
this should look something like this:
% If I only compress a file with gzip, there is no problem, for example:
 file.sql");
this works, but pgp doesn´t and I don´t know why. The same code in SHELL
works perfectly ?!?!
David T-G said:
% ... you've neglected an important part: when the php script is run, it's
% run by the web server, and the web server is not you, and so gpg has no
% home directory, no keyrings, and no keys.
But how can I get this information into my code? Does someone know what to

@_date: 2002-06-05 03:57:02
@_author: akorthaus@web.de 
@_subject: Cannot encrypt/decrypt zip-Files correctly (Andreas) 
gpg and the key-files are in different folders - which one should I choose?

@_date: 2002-06-05 04:14:03
@_author: akorthaus@web.de 
@_subject: Idea how to leave double-mails out? 
Du you hav any idea, what I can do against all these doubble-mails? OK, I
can make a rule, that I don´t get all mails from me again, but if you send a
mail to me and the List, I get the mail twice! Is there anything to do
against it?

@_date: 2002-06-05 04:34:01
@_author: akorthaus@web.de 
@_subject: Cannot encrypt/decrypt zip-Files correctly (Andreas) 
YOU ARE GREAT!!!
Thank you very much, now it works, I just had to add --homedir, that was
all. CHMOD was 700, but it was not important. That´s how it works:
system ("gzip -c /www/path/to/file.htm | gpg --homedir
Thanks a lot!
Now I try to get the whole Script running. But what did you think about
compression? Why not gzip?

@_date: 2002-06-05 04:53:01
@_author: akorthaus@web.de 
@_subject: get 'real' gz-file when decrypting 
Now my complete Script works perfectly, thank you very much!
But two small features would be fine:
1. How can I encrypt the gzip contend that I get 'file.gz' and not just
'file' when I decrypt?
mysqldump database | gzip | gpg --homedir /www/.gnupg -o
output.pgp -e --default-recipient andreas
what could I do? If I decrypt  the file 'output' is created, but I would
like to have 'output.gz'
2. I did not write --recipient, but --default-recipient. I only did so,
because if I only write --recipient, there is asked:
If a answer yes, all is OK. Is it OK to use --default-recipient, or should I
worry about this?

@_date: 2002-06-05 05:03:02
@_author: akorthaus@web.de 
@_subject: Cannot encrypt/decrypt zip-Files correctly (Andreas) 
I can not beleave - even without using -z AND without | gzip it is
compressed nearly in the same way! Perhaps 1 or 2 percent less - great! If I
use -z too, will there be mir compression possible?
Thank You very much!

@_date: 2002-06-05 05:27:02
@_author: akorthaus@web.de 
@_subject: get 'real' gz-file when decrypting 
Oh my god! you´re right, it seems to be too late(early) for me ;-)
Yes, here in germany it becomes bright, I can hear the beards singing...
it´s 5:30 in the morning, but I wanted to finish this, befor goin to bed
Thank you for your help!

@_date: 2002-06-05 11:50:02
@_author: akorthaus@web.de 
@_subject: Does someone know about GPGOE? 
yes I do so! And that has been the Problem - by removing 'use default key'
ist works perfectly, was my mistake, sorry.
in which option file can I set it?

@_date: 2002-06-05 12:09:01
@_author: akorthaus@web.de 
@_subject: problems with trusting in key --recipient or --default-recipient 
For my first question the answer was really easy, but the second one seems
to be more difficult.
perhaps someone knows why the following problem occours, if I
choose --recipient instead of --default-recipient(which I´ve never chosen
somewhere, I have just tried out:-)) With --default-recipient everything
works without any problem, but is it correct? Because there will be a reason
for the following dialog in the commadnd-line, if I just take --recipient:
use --default-recipient, or should I
command-line later on, but from a PHP-Script!

@_date: 2002-06-05 13:30:01
@_author: akorthaus@web.de 
@_subject: why is an existing file not overwritten by output-file? 
Is there another possibility instead of:
rm output.gpg | mysqldump database | gpg -o
output.gpg -e --default-recipient andreas
But that doesn´t work, the file is removed, but nothing else happens. And
what happens, if 'output.gpg' does not exist?
Overwriting would be the best idea, but how?

@_date: 2002-06-05 13:36:02
@_author: akorthaus@web.de 
@_subject: why is existing file not overwritten by output-file? 
--yes was a great idea! It works perfectly!
Thank you!

@_date: 2002-06-05 14:16:01
@_author: akorthaus@web.de 
@_subject: why is an existing file not overwritten by output-file? 
if I try:
gzip -c zip.php | gpg --homedir /www/link/to/.gnupg -o test.gpg -a -e
I get:

@_date: 2002-06-05 15:04:01
@_author: akorthaus@web.de 
@_subject: =?iso-8859-1?Q?can=B4t_uncompress_files_anymore=3F!?= 
It worked so fine, and I don´t know what´I´ve changed, theonly thing I
changed is the trust of the recipient. I can encrypt the file, and I can
decrypt it on my PC, size semms to be right, but I can´t unzip it anymore
'archiev either unknown format or damaged' command is the following:
mysqldump database | gpg --homedir /link/to/.gnupg -o
file.gz.gpg  -e --default-recipient andreas --yes
Why shouldn´t work this? If I try -a or leave out --yes  the result is the
same. Do you have an idea? It is so strange, because some hours ago it
worked perfectly! What could be a possible reason?

@_date: 2002-06-05 15:16:02
@_author: akorthaus@web.de 
@_subject: =?iso-8859-1?Q?Re:_can=B4t_uncompress_files_anymore=3F!?= 
I´m so sorry ;-) I don´t even have to unzip the file, GPG does it while
decrypting automatically....
Erverything´s all right!

@_date: 2002-06-05 16:06:02
@_author: akorthaus@web.de 
@_subject: (no subject) 
OK, I tried tho following:
(14:24:59) [test] gpg --list-keys --with-colons
pub:q:1024:17:95D93FF113D7356F:2002-06-03::59:m:andreas :
I changed the trust of the public key 'andreas', it´s the only key I have on
that server, because I only use it for one daily cronjob at the moment.
So why cannot use -r, only --default-recipient? I can´t understand! What do
you think? Is should I generate on own private key on that server, to sign
this puplic key andreas? What can I do to use just -r without the described

@_date: 2002-06-05 16:06:06
@_author: akorthaus@web.de 
@_subject: trust keys 
OK, I tried tho following:
(14:24:59) [test] gpg --list-keys --with-colons
pub:q:1024:17:95D93FF113D7356F:2002-06-03::59:m:andreas :
I changed the trust of the public key 'andreas', it´s the only key I have on
that server, because I only use it for one daily cronjob at the moment.
So why cannot use -r, only --default-recipient? I can´t understand! What do
you think? Is should I generate on own private key on that server, to sign
this puplic key andreas? What can I do to use just -r without the described

@_date: 2002-06-06 11:57:02
@_author: akorthaus@web.de 
@_subject: Web of trust 
% > happy to see a couple of resources posted; I'll read up on them myself.
% They look like they're potentially useful, especially in the very
% areas like Germany or US, and in the big cities.
In germany last year we had a new law, that a digital signature is worth
more than a normal signature by hand, in front of the law
(  - click 'digital signature'!)! Also the
german 'Ministry of Economics and Technology' helps building gnupp
(  ). That should help
companies to use more digital documets in future, to have no disadvantage in
front of law anymore!
How is this in other countries?

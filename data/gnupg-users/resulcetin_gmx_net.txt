
@_date: 2009-05-15 12:30:27
@_author: Resul Cetin 
@_subject: Changing usage of master key 
I generated a new RSA cert/sign key. Default is to use it as sign and cert, but I wanted to use a seperated sign subkey and use the master key only for cert stuff. Is it possible to change it afterwards and how to do it? I have no fear of hex editors and unix commandline tools. My first idea is to switch a bit somewhere in a `gpg --export` and then reimport it to do a resign of the key and upload it again to a key server.
Is there now a good way to move a subkey between two keys? The method described at  don't work because in the step "resign using the expire trick" doesn't work. I cannot see a usage behind the short output of the `key` command in --edit-key and when I try to save it after the resign, gpg will end with 2 as return code (I would assume that the key and its subkey wasn't saved). A export and reimport afterwards removes the "moved" key.
Can you please cc me, because I am not subscribed to the mailing list (but will look at the archives from time to time).
Best regards,

@_date: 2009-05-18 16:46:02
@_author: Resul Cetin 
@_subject: Changing usage of master key 
Does there exist another program to do this (I won't tell anyone ;) )? The PGP Desktop applications doesn't seem to be able to do anything advanced.
I will look at the gnupg source code to try to find the correct section to manipulate the usage. But the info that it can be handled by a new self signature helps a lot. Now I know that it doesn't get ignored by the information stored on the key server. Thanks

@_date: 2009-05-18 17:47:29
@_author: Resul Cetin 
@_subject: Changing usage of master key 
Ok, it was quite easy to do (not clean, but it could be done in a fast and hackish way). Just searched for gnupg-1.4.9/g10/getkey.c:parse_key_usage and changed p to non-const and always set "(*p) &=~2;". Afterwards I started my new compiled hackish-gpg --edit-key and set the expire of my master key. After this procedure I had only the Cert flag set. Thanks Christoph - you are my personal hero of the day :)

@_date: 2009-05-18 18:47:29
@_author: Resul Cetin 
@_subject: Changing usage of master key 
Just removed the do_check for sig->sig_class == 0x18 in sig-
check.c:check_key_signature2 and it worked. Please never ever do that at home.
Best regards,

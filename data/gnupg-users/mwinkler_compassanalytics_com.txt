
@_date: 2011-10-15 19:51:45
@_author: Megan Winkler 
@_subject: GPGME and Windows Server 2003/2008 
We are using GPGME in our C++ application to decrypt PGP files  sent to us by a client.  The files are approximately 60meg encrypted,  500meg decrypted.
We have tested the application on two different boxes with the following configurations:
*         Windows Server 2003 R2 x64 16GB RAM 8 3GHz cores
*         Windows Server 2008 R2 x64 16GB RAM 8 3GHz cores
*         Latest Windows Hot fix
*         GPG 1.1.4
Our application is using a single thread for the decryption.  We are dynamically linking to the libpgme-11.dll using LoadLibrary().
During testing we are only running the application that is doing the decryption and we have been testing only  one data file.   What is troubling is that the amount of time taken to decrypt the file varies tremendously - in the best case it takes less than 2 minutes and in the worse case 7+ hours.   No matter how long it takes the decryption completes successfully.
What could be causing the performance differences?
Also, I have noticed that the GPG.exe process  does not terminate and continues to use the CPU even after the application cleans up and shuts down.  I have observed multiple GPG.exe processes in Task Manager.  The decryption cleanup calls gpgme_data_release() to free the data buffers, gpgme_release to free the context, and FreeLibrary to unload the dll.  What am I neglecting to do?
Any help would be greatly appreciated!


@_date: 2006-11-19 19:24:33
@_author: Stoyan Angelov 
@_subject: problem building libassuan + pth 
hello all,
i am trying to build gnupg 2.0 on Solaris 10 (x86) but i have some problems building the libassuan library with the required pth support.
pth itself builds and installs without problems (i use pth 2.0.7 and all 'make test' test pass successfully) however when i use the configure script for libassuan i get:
checking for PTH - version >= 1.3.7... yes
checking whether PTH installation is sane... no
checking the config.log output i see the following:
configure:3633: checking whether PTH installation is sane
configure:3662: gcc -o conftest -g -O2 -Wall -Wcast-align -Wshadow -Wstrict-prototypes -I/usr/local/include   -L
conftest.c:22: warning: function declaration isn't a prototype
collect2: ld returned 1 exit status
configure:3668: $? = 1
configure: failed program was:
configure:3700: result: no
can anyone help with this issue ?

@_date: 2006-11-20 10:48:52
@_author: Stoyan Angelov 
@_subject: problem building libassuan + pth 
hello Doug,
i tried running ./configure with explicitly set CFLAGS and LDFLAGS variables, however the result is the same. from an earlier config.log file i can see that paths were already guessed correctly. i also run the configure script with the  --with-pth-prefix=/usr/local option.

@_date: 2006-11-21 11:04:37
@_author: Stoyan Angelov 
@_subject: problem building libassuan + pth 
hello Werner,
thank you for your answer! adding LIBS="-ldl -lsocket -lnsl" to configure as you suggested fixed the problem and libassuan is now successfully  build with pth support.
i had a similar problem with gnupg 2.0 - adding LIBS="-ldl -lsocket -lnsl" to configure does not work as with libassuan, so i had to change the configure script itself:
<          LIBS="$LIBS `$PTH_CONFIG --libs`"
 >          LIBS="$LIBS `$PTH_CONFIG --libs --all`"
now "configure" finishes successfully but when i use "make" i get the following error:
gcc -I/usr/local/include  -I/usr/local/include -I/usr/local/include -I/usr/local/include -g -O2 -Wall -Wno-pointer-sign   -o gpg2  gpg.o build-packet.o compress.o compress-bz2.o free-packet.o getkey.o keydb.o keyring.o seskey.o kbnode.o mainproc.o armor.o mdfilter.o textfilter.o progress.o misc.o openfile.o keyid.o parse-packet.o status.o plaintext.o sig-check.o keylist.o pkglue.o pkclist.o skclist.o pubkey-enc.o passphrase.o seckey-cert.o encr-data.o cipher.o encode.o sign.o verify.o revoke.o decrypt.o keyedit.o dearmor.o import.o export.o trustdb.o tdbdump.o tdbio.o delkey.o keygen.o helptext.o keyserver.o photoid.o call-agent.o card-util.o exec.o -L/usr/local/lib -lgcrypt -L/usr/local/lib -lgpg-error ../gl/libgnu.a ../common/libcommon.a ../jnlib/libjnlib.a ../common/libgpgrl.a -lz -lbz2 -lresolv  -lreadline ../intl/libintl.a -liconv  -lsocket -lnsl  -L/usr/local/lib -lassuan -L/usr/local/lib -lgpg-error
../common/libcommon.a(libcommon_a-asshelp.o): In function `send_one_option':
collect2: ld returned 1 exit status
make[2]: *** [gpg2] Error 1
make[2]: Leaving directory `/root/gnupg-2.0.0/g10'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/root/gnupg-2.0.0'
make: *** [all] Error 2

@_date: 2006-11-21 13:47:38
@_author: Stoyan Angelov 
@_subject: problem building libassuan + pth 
hello Werner,
asprintf.o builds ok in the ../gl directory. i have checked the g10/Makefile - it does include a line for LIBOBJS:
LIBOBJS =  mkdtemp$U.o vasnprintf$U.o printf-args$U.o printf-parse$U.o asnprintf$U.o vasprintf$U.o asprintf$U.o

@_date: 2006-11-21 16:59:42
@_author: Stoyan Angelov 
@_subject: problem building libassuan + pth 
hello Werner,
sorry to bother you again - i have applied the patch you sent me. i have also modified the g10/Makefile.in otherwise the g10/Makefile was not changed. i run in another problem:
gcc -I/usr/local/include  -I/usr/local/include -I/usr/local/include -g -O2 -Wall -Wno-pointer-sign   -o gpg2keys_ldap gpg2keys_ldap-gpgkeys_ldap.o gpg2keys_ldap-ksutil.o gpg2keys_ldap-no-libgcrypt.o -L/usr/local/lib -lldap -lsocket -lnsl -liconv ../intl/libintl.a -liconv
gpg2keys_ldap-gpgkeys_ldap.o: In function `ldap2epochtime':
gpg2keys_ldap-gpgkeys_ldap.o: In function `build_attrs':
gpg2keys_ldap-gpgkeys_ldap.o:/root/gnupg-2.0.0/keyserver/gpgkeys_ldap.c:435: more undefined references to `strsep' follow
collect2: ld returned 1 exit status
make[2]: *** [gpg2keys_ldap] Error 1
make[2]: Leaving directory `/root/gnupg-2.0.0/keyserver'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/root/gnupg-2.0.0'
make: *** [all] Error 2

@_date: 2008-11-20 10:05:30
@_author: Stoyan Angelov 
@_subject: gnupg 1.4.9 binaries for hp-ux (11.23 hppa) 
hello all,
i noticed that there is no recent binary distribution for the hp-ux  i have built and packaged gnupg 1.4.9 (32-bit binaries for hp-ux  11.23, PA-RISC platform).
details about the build are available here:
the binary "depot" distribution itself:
signatures and md5 digests are available on the url below:
i have tested the binaries and believe they are working well.
hope someone finds these useful.
Stoyan Angelov

@_date: 2008-11-25 20:52:07
@_author: Stoyan Angelov 
@_subject: gnupg 2.0.9 compile problem on hp-ux 11.23 (hppa) 
hello list,
i am trying to compile gnupg 2.0.9 on hp-ux 11.23 (hppa), using hp's C/ aC++ compiler.
the following dependencies are installed:
libgpg-error 1.6
libgcrypt 1.4.3
libassuan 1.0.5
libksba 1.0.4
gmake gives the error below:
cc -DHAVE_CONFIG_H -I. -I..  -I../intl -O -I/usr/local/gnupg2/include - I/usr/local/include -I/usr/local/include -I/usr/local/include -I/usr/ local/include -I/usr/local/gnupg2/include -g -Ae -D_HPUX_SOURCE -c  of "sendfile" with a different storage class specifier: "sendfile"  will have internal linkage.
of "sendpath" with a different storage class specifier: "sendpath"  will have internal linkage.
rm -f libjnlib.a
ar cru libjnlib.a stringhelp.o strlist.o utf8conv.o argparse.o  logging.o dotlock.o mischelp.o
source='t-stringhelp.c' object='t-stringhelp.o' libtool=no \
         DEPDIR=.deps depmode=hp /bin/sh ../scripts/depcomp \
         cc -DHAVE_CONFIG_H -I. -I..  -I../intl -O -I/usr/local/gnupg2/ include -I/usr/local/include -I/usr/local/include -I/usr/local/include  -I/usr/local/include -I/usr/local/gnupg2/include -g -Ae -D_HPUX_SOURCE  -c t-stringhelp.c
source='t-support.c' object='t-support.o' libtool=no \
         DEPDIR=.deps depmode=hp /bin/sh ../scripts/depcomp \
         cc -DHAVE_CONFIG_H -I. -I..  -I../intl -O -I/usr/local/gnupg2/ include -I/usr/local/include -I/usr/local/include -I/usr/local/include  -I/usr/local/include -I/usr/local/gnupg2/include -g -Ae -D_HPUX_SOURCE  -c t-support.c
cc -I/usr/local/gnupg2/include -g -Ae -D_HPUX_SOURCE  -L/usr/local/ gnupg2/lib -L/usr/local/lib -L/usr/local/lib -L/usr/local/lib -o t- stringhelp t-stringhelp.o t-support.o libjnlib.a /usr/local/lib/ libintl.sl -L/usr/local/lib /usr/local/lib/libiconv.sl /usr/local/lib/     gpg_err_code_from_errno (first referenced in  libjnlib.a(stringhelp.o)) (code)
    gpg_err_code_from_syserror (first referenced in  libjnlib.a(stringhelp.o)) (code)
gmake[2]: *** [t-stringhelp] Error 1
gmake[2]: Leaving directory `/install/users/aduritz/buildfarm/gnupg/ gmake[1]: *** [all-recursive] Error 1
gmake[1]: Leaving directory `/install/users/aduritz/buildfarm/gnupg/ gmake: *** [all] Error 2
any help will be appreciated.
Stoyan Angelov


@_date: 2013-06-29 12:49:57
@_author: Jan Geep 
@_subject: Smart card works with GPG v1 but not with GPG v2 on Ubuntu 
I have a CryptoStick v1.2 and am trying to get it to work with gpg 2.0.17
on Ubuntu 12.04.2
It works perfectly when I use gpg v14.11 and I am trying to figure out what
to do to get gpg2 to work would any people have suggestion?
$ /usr/bin/gpg --card-status
Application ID ...: B0000000000000000000000000000000
Version ..........: 2.0
Manufacturer .....: ZeitControl
Serial number ....: 00999999
Name of cardholder: [not set]
Language prefs ...: de
Sex ..............: unspecified
URL of public key : [not set]
Login data .......: [not set]
Private DO 1 .....: [not set]
Private DO 2 .....: [not set]
Signature PIN ....: forced
Key attributes ...: 2048R 2048R 2048R
Max. PIN lengths .: 32 32 32
PIN retry counter : 3 0 3
Signature counter : 0
Signature key ....: [none]
Encryption key....: [none]
Authentication key: [none]
General key info..: [none]
(NB: Application ID / Serial number redacted)
Now problem begins if I try to use GPG2
$ /usr/bin/gpg2 --card-status
gpg: selecting openpgp failed: Unsupported certificate
gpg: OpenPGP card not available: Unsupported certificate
$ GPG_AGENT_INFO= gpg2 --card-status
gpg-agent[3434]: can't connect to the SCdaemon: IPC connect call failed
gpg: OpenPGP card not available: No SmartCard daemon
And syslog entries when connecting cryptostick:
kernel: [ 1111.106918] usb 3-2: new full-speed USB device number 8 using
kernel: [ 1111.124152] usb 3-2: New USB device found, idVendor=20a0,
kernel: [ 1111.124160] usb 3-2: New USB device strings: Mfr=1, Product=2,
kernel: [ 1111.124164] usb 3-2: Product: Crypto Stick v1.2
kernel: [ 1111.124167] usb 3-2: Manufacturer: German Privacy Foundation
kernel: [ 1111.124573] usb 3-2: ep 0x81 - rounding interval to 128
microframes, ep desc says 192 microframes
mtp-probe: checking bus 3, device 8:
mtp-probe: bus: 3, device: 8 was not an MTP device
[ 1113.231440] xhci_hcd 0000:00:14.0: WARN Event TRB for slot 7 ep 4 with
no TDs queued?
[ 1113.231450] xhci_hcd 0000:00:14.0: WARN Event TRB for slot 7 ep 3 with
no TDs queued?
[ 1113.231454] xhci_hcd 0000:00:14.0: WARN Event TRB for slot 7 ep 2 with
no TDs queued?
[ 1113.231457] xhci_hcd 0000:00:14.0: WARN Event TRB for slot 7 ep 0 with
no TDs queued?

@_date: 2013-06-29 15:20:47
@_author: Jan Geep 
@_subject: Smart card works with GPG v1 but not with GPG v2 on Ubuntu 
Thanks Pete, I had the first two installed but not gpgsm, installed it but
still no go.
$ dpkg -l | egrep 'libccid|pcscd|gpgsm'
ii  gpgsm  2.0.17-2ubuntu2.12.04.2       GNU privacy guard - S/MIME version
ii  libccid  1.4.5-1                                 PC/SC driver for USB
CCID smart card readers
ii  pcscd  1.7.4-2ubuntu2                      Middleware to access a smart
card using PC/SC (daemon side)

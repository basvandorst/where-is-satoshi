
@_date: 2004-08-31 16:48:15
@_author: Brian Greenberg 
@_subject: Patch: Correct creation of ~/.gnupg (Was: Error on initial call 
I noticed this behavior a few days ago, and have fixed it.
Changes were made to g10/keydb.c that implemented file locking for the
creation of the keyring files.  The new code checks for a readable
keyfile, and if it cannot find one, tries to create a lockfile so that
it can continue with the creation of this file.  If it cannot create the
lock file it aborts.
The issue is that there is no check for the existence of the parent
directory before attempting to create the lockfile.  If the parent does
not exist, lock creation will always fail.
The attached patch moves the homedir creation logic ahead of the file
locking logic.  Basically, if a readable keyring does not exist, a check is made if it's parent exists.  If not, a lockfile is used for the parent
and try_make_homedir() is called.  If this succeeds, then creation of the keyring lockfile (and subsequently the keyring) is allowed to continue.

@_date: 2004-12-02 18:15:11
@_author: Brian Greenberg 
@_subject: Protecting Private key 
Keep in mind that for something like this to work for an attacker,
they must have read rights to your secret keyring.  The fact that read
rights to such a file is quite easy to get (ie:  Anyone with Admin
rights) is why there is a passphrase.
Further,  "gpg -ao tsPub.ky --export  NNNNN" exports the *public* key,
in ASCII format.  To export a secret key, one needs to do:
     gpg -ao tsSec.ky --export-secret-keys  NNNNN
Of course, all this does is give an ASCII formatted version of the
secret keyring.  While this information is sensitive, it's not very
useful without the passphrase for the secret key.  If an attacker can
get both, then they can use the key as easily as you.  This is why the
paranoid will keep their secret keys on removable media.
(GnuPG novice)

@_date: 2004-09-24 16:32:50
@_author: Brian Greenberg 
@_subject: gpg 1.2.6 fails to create ~/.gnupg on Solaris 
The fix can be downloaded from the CVS:
   BTW:  Is there any good reason *not* to use a lockfile when creating
the gpg home dir?  The comment at the top of the patch implies that
this is because the application calling gpg should do so, but if this
code is running, it obviously *hasn't*....

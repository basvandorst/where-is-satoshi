
@_date: 2015-09-22 11:07:22
@_author: SGT. Garcia 
@_subject: default-ttl not honoured 
this is my gpg-agent.conf:
default-cache-ttl 31536000
this has stopped working! i'm getting asked for password every 20 minutes or so.
anyone else hitting this bug? hopefully i don't have to go:
"Oh, shit! Swamp leeches. Everybody, check for swamp leeches, and pull them
off... Nobody else got hit? I'm the only one? What's the deal?"

@_date: 2015-09-22 11:13:38
@_author: SGT. Garcia 
@_subject: unlock keychain with pam authentication 
hello again,
been looking for a solution to get gpg dance nicely with pam in the sense that
once a user authenticated in keychain is unlocked. that is to have one central
authentication that lasts for the duration of the user's session.
well, no luck so far; any ideas?

@_date: 2015-09-22 11:21:23
@_author: SGT. Garcia 
@_subject: default-ttl not honoured 
forgot to include info!
Linux 4.2.0  SMP PREEMPT x86_64 GNU/Linux [Exherbo]
sys-libs/ncurses-6.0 [ncurses-5 had the same problem]

@_date: 2015-09-22 13:50:01
@_author: SGT. Garcia 
@_subject: default-ttl not honoured 
app-crypt/gnupg::installed               2.1.7 {:0}

@_date: 2015-09-27 20:14:20
@_author: SGT. Garcia 
@_subject: unlock keychain with pam authentication 
thanks, will have a look in a tick.
i use pass to manage my passwords:
all passwords are encrypted with one single passphrase which is what i would
like to have in *sync* with pam's OK on user's successful authentication.
import where? i'm not sure if i follow. pass only manages passwords for my email
accounts, so far at least, and i don't see how this comes into play. would care
to elaborate please?
i don't use desktop environment. my machine usually boots into console and i may
or may not run xinit to start X with dwm (a window manager). this may change in
the future when i start X's systemd session-manager which apparently requires a
login-manager. same goes for wayland incidentally and afaik. in that case i
would be looking into integration that login-manager with gnupg for the same

@_date: 2015-09-27 22:04:40
@_author: SGT. Garcia 
@_subject: unlock keychain with pam authentication 
i get 'not found' error. google finds me this:
assuming they're the same thing it mentions gnupg smartcards; not sure what that
is but i'm guessing the module can be used with pam regardless even without the
card; correct?

@_date: 2015-09-28 13:16:06
@_author: SGT. Garcia 
@_subject: unlock keychain with pam authentication 
i think neither is what i'm asking. the following particular use case should
explain it better.
on my user's first login into this machine i run 'notmuch new' this calls mbsync
to sync my email with gmail but in order for mbsync to do so it has to get my
password from pass. pass in turn has encrypted all my passwords and for that i
have to provide the passphrase *manually*. i would like it to happen
automatically on user login. hence the pam integration. note that i already have
a user systemd service to run 'notmuch new' on user login. it of course fails
until i run the command first to unlock my email passwords.
that would be my email account not my local user account, correct?

@_date: 2015-09-28 15:39:13
@_author: SGT. Garcia 
@_subject: unlock keychain with pam authentication 
hmm, it pinenty asked me for passphrase, how did that happen? gnupg imports the
new key automatically?

@_date: 2015-09-28 16:00:38
@_author: SGT. Garcia 
@_subject: unlock keychain with pam authentication 
i really want it as the only authentication required that is open password from
user logs him in and decrypts the passwords.
how does it work, does gnupg phone home? i suspect not. i did not agree to
import anything but apparently my mail client (mutt) and/or gnupg took the
initiative to do so. if that's true then that's a misconfiguration or bad
default configuration of mutt and/or gnupg, i think.

@_date: 2015-09-28 18:16:17
@_author: SGT. Garcia 
@_subject: unlock keychain with pam authentication 
this is the first time i hear about *importing* to be honest. after reading, yes
just reading, your email a new key was added and on the next run of 'notmuch
new' i was asked for it by pinentry. i'm guessing mutt imports any key it finds
in attachments.
it's not your fault. i think i'm missing some background on this.
for now i just nuked my old .gnupg directory and created a new one without
passphrase. seems to accomplish the same thing, i.e. no more annoying passphrase
dialog. i will have to confirm on the next boot though.

@_date: 2015-09-29 11:02:19
@_author: SGT. Garcia 
@_subject: unlock keychain with pam authentication 
mutt indeed; not notmuch. notmuch; well in fact in my setting isync is going to
sync _everything_ with upstream imap repo regardless. my best guess is that it's
mutt that imports the key. i will resend a copy of this to mutt's mailing list.

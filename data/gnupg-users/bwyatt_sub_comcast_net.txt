
@_date: 2009-09-02 15:12:49
@_author: Bob Wyatt 
@_subject: Install GnuPG 2.0.12 on AIX 5.3 Maintenance (Technology) Level 3 
I am boldly trying to get GnuPG 2.0.12 installed, even though I don't really
need S/MIME or desktop support.
So while this request for help festers a bit, I will download the 1.4
version and see if I can get that to go.
When I configure GnuPG 2.0.12, it tells me that linassuan-1.0.4 (minimum)
nor Pth are installed.
I initially tried libassuan 1.0.5, but it gave me several problems, so I
went back to 1.0.4. GnuPG wants libassuan-1.0.4 (API 1), but I can only find
1 version of 1.0.4, so I presume that is API 1.
I had issues installing Pth-2.0.7, arising from fdsetsize, but I worked
around that with the help of the Pth users (Ken, specifically) by doing the
configure with -with-fdsetsize=1024.
Both libassuan-1.0.4 and pth-2.0.7 did install into /usr/local/lib, in the
end, with no errors.
Does anyone have any hints what options I may need to change on my
configure, or other advice?

@_date: 2009-09-02 16:55:01
@_author: Bob Wyatt 
@_subject: GnuPG-1.4.9 Install on AIX 5.3 Maintenance (Technology) Level 3 
After doing a CFLAGS="-g -02 -mcpu=powerpc" ./configure, the following is
configure: WARNING: pthread.h: present but cannot be compiled
configure: WARNING: pthread.h:     check for missing prerequisite headers?
configure: WARNING: pthread.h: see the Autoconf documentation
configure: WARNING: pthread.h:     section "Present But Cannot Be Compiled"
configure: WARNING: pthread.h: proceeding with the preprocessor's result
configure: WARNING: pthread.h: in the future, the compiler will take
configure: WARNING:      -------------------------------- configure: WARNING:      Report this to bug-gnupg at gnu.org configure: WARNING:      -------------------------------- Has anyone seen this before and have a workaround?

@_date: 2009-09-03 16:23:09
@_author: Bob Wyatt 
@_subject: linassuan-1.0.5 on AIX 5.3 TL 3 
After my prior note, I tried updating the libassuan package from 1.0.4 to
1.0.5 using the entire ftp'd from the gnupg site.
With the environment set as follows:
                export CC=gcc
                export LIBPATH=/usr/lib:/usr/ccs/lib:/usr/local/lib
                export CFLAGS="-g -O2 -mcpu=powerpc"
and running configure as:"
                ./configure -with-pth-prefix=/usr/local
I receive the following:
gcc -DHAVE_CONFIG_H -I. -I.. -I.. -I../include    -g -O2 -mcpu=powerpc -Wall
ast-align -Wshadow -Wstrict-prototypes -Wpointer-arith -MT assuan-io.o -MD
-MP -
MF .deps/assuan-io.Tpo -c -o assuan-io.o assuan-io.c
assuan-io.c: In function `_assuan_usleep':
assuan-io.c:225: error: storage size of `req' isn't known
assuan-io.c:226: error: storage size of `rem' isn't known
assuan-io.c:234: warning: implicit declaration of function `nanosleep'
assuan-io.c:225: warning: unused variable `req'
assuan-io.c:226: warning: unused variable `rem'
make[3]: *** [assuan-io.o] Error 1
make[3]: Leaving directory `/usr/local/libassuan-1.0.5/src'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/usr/local/libassuan-1.0.5/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/usr/local/libassuan-1.0.5'
make: *** [all] Error 2
The code that seems to be problematic for this system is:
+219  _assuan_usleep (unsigned int usec)
+220  {
+221   HAVE_W32_SYSTEM
+222    /* FIXME.  */
+223    Sleep (usec / 1000);
+224  +225    struct timespec req;
+226    struct timespec rem;
+228    if (usec == 0)
+229      return;
+231    req.tv_sec = 0;
+232    req.tv_nsec = usec * 1000;
+234    while (nanosleep (&req, &rem) < 0 && errno == EINTR)
+235      req = rem;
+236  +237  }
Has anyone run into this or have advice to get around this?

@_date: 2009-09-03 15:40:23
@_author: Bob Wyatt 
@_subject: GnuPG 2.0.12 on AIX 5.3 TL 03 
When I run configure, I now have in my environment:
                export CC=gcc
                export CFLAGS="-g -O2 -mcpu=powerpc"
                export LIBPATH=/usr/lib:/usr/ccs/lib:/usr/local/lib
When running the configure for GnuPG, I execute:
                ./configure -program-prefix=/usr/local
-with-libassuan-prefix=/usr/local -with-pth-prefix=/usr/local
The configure runs through several checks, reporting:
configure: checking for libraries
checking for gpg-error-config... /usr/local/bin/gpg-error-config
checking for GPG Error - version >= 1.4... yes (1.7)
checking for libgcrypt-config... /usr/local/bin/libgcrypt-config
checking for LIBGCRYPT - version >= 1.4.0... yes (1.4.4)
checking LIBGCRYPT API version... okay
checking for libassuan-config... /usr/local/bin/libassuan-config
checking for LIBASSUAN - version >= 1.0.4... yes (1.0.4)
checking LIBASSUAN API version... okay
checking for libassuan-config... (cached) /usr/local/bin/libassuan-config
checking for LIBASSUAN pth - version >= 1.0.4... no
checking for libassuan-config... (cached) /usr/local/bin/libassuan-config
checking for LIBASSUAN - version >= 1.0.1... yes (1.0.4)
checking LIBASSUAN API version... okay
checking for ksba-config... /usr/local/bin/ksba-config
checking for KSBA - version >= 1.0.2... yes (1.0.7)
checking KSBA API version... okay
checking for usb_bulk_write in -lusb... no
checking for usb_create_match... no
checking for library containing dlopen... none required
checking for openpty in -lutil... no
checking for shred... /usr/bin/shred
checking for pth-config... /usr/local/bin/pth-config
checking for PTH - version >= 1.3.7... yes
checking whether PTH installation is sane... no
So I'm thinking this looks good, up until whether the pth installation is
declared as not being sane.
But at least I now have the libassuan, so this is progress!
Until the ./configure terminates with:
configure: WARNING:
*** To support concurrent access to the gpg-agent and the SCdaemon
*** we need the support of the GNU Portable Threads Library.
*** Download it from ftp://ftp.gnu.org/gnu/pth/
*** On a Debian GNU/Linux system you might want to try
***   apt-get install libpth-dev
configure: checking for networking optionsconfigure: checking system
features for estream
*** You need libassuan with Pth support to build this program.
*** This library is for example available at
***   ftp://ftp.gnupg.org/gcrypt/libassuan/
*** (at least version 1.0.4 (API 1) is required).
*** It is now required to build with support for the
*** GNU Portable Threads Library (Pth). Please install this
*** library first.  The library is for example available at
***   ftp://ftp.gnu.org/gnu/pth/
*** On a Debian GNU/Linux system you can install it using
***   apt-get install libpth-dev
*** To build GnuPG for Windows you need to use the W32PTH
*** package; available at:
***   ftp://ftp.g10code.com/g10code/w32pth/
configure: error:
*** Required libraries not found. Please consult the above messages
*** and install them before running configure again.
The configure and makes of libassuan and pth are seemingly error-free - no
fatal exits or errors are reported.
What am I missing? Any advice?

@_date: 2009-09-03 17:02:23
@_author: Bob Wyatt 
@_subject: GnuPG 2.0.12 on AIX 5.3 TL 03 
What options did you use to compile pth?
Sorry the unnecessary traffic/confusion...
The same environment (CC=gcc, CFLAGS="-g -O2 -mcpu=powerpc", and
LIBPATH=/usr/lib:/usr/ccs/lib:/usr/local/lib) as my other posts...
./configure --prefix=/usr/local --with-fdsetsize=1024
__________ Information from ESET NOD32 Antivirus, version of virus signature
database 4392 (20090903) __________
The message was checked by ESET NOD32 Antivirus.


@_date: 2002-07-11 16:26:01
@_author: Ivo Alxneit 
@_subject: v3/v4 keys - v3/v4 signatures 
i generated my standard DSA/ElGamal key with gnupg 1.0.6 and probably
had (inadvertedly) 'force-v3-sigs' in my options file. at least i have a
v3 self-signature on my v4 key(v4 right?). why a v3 signature?
'force-v3-sigs' only affects data signatures but not key certificates.
now i removed 'force-v3-sigs' from my options file and i found that
whatever key i sign (i.e. certify) gets a v3 signature. is this correct?
from the man pages i understand that a v4 key by default certifies keys
with a v4 signature. 'force-v3-sigs' only affects signatures of data but
not of keys. the only thing you can gnupg force to do is to sign a v3
key with a v4 signature ('force-v4-certs').
could anybody please clarify the behavior (or my misunderstanding)

@_date: 2002-07-11 21:27:01
@_author: ivo.alxneit@psi.ch 
@_subject: v3/v4 keys - v3/v4 signatures 
yes indeed i was assuming sig!3 means v3 signature! so everything was
working correctly (i was signing all the key with gnupg 1.1.7 and did a
'very thorough check' before signing any key. this made the signature
sig!3 too)

@_date: 2008-10-03 16:57:53
@_author: Ivo Alxneit-Kamber 
@_subject: verifying signatures with gpgme 1.1.6 
Hash: SHA1
hi all
i do not quite understand how i should interpret the result of
using gpg for my two files `foo` and `bar` i obtain what i expected.
$ gpg --verify foo
gpg: Signature made Thu 02 Oct 2008 10:32:46 AM CEST using DSA key ID
gpg: Good signature from "Ivo Alxneit (work) "
gpg:                 aka "Ivo Alxneit (privat, old) "
gpg:                 aka "Ivo Alxneit (privat) "
- -> good signature from "trusted" key
$ gpg --verify bar
gpg: Signature made Tue 23 Sep 2008 05:05:00 PM CEST using RSA key ID
gpg: Good signature from "Timestamp Service "
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the
Primary key fingerprint: 4B 12 BC D5 78 85 11 06  3B 54 31 90 E0 9D F3 06
- -> good signature from "untrusted" key
i then use the following code to verify the signatures using gpgme
(version 1.1.6)
gpgme_op_verify(ctx, sig, NULL, text);
result = gpgme_op_verify_result(ctx);
s = result->signatures;
while (s) {
        fprintf(stdout, "\nsummary=%d\n", s->summary);
        fprintf(stdout, "fpr=%s\n", s->fpr);
        fprintf(stdout, "status=%d\n", s->status);
        fprintf(stdout, "timestamp=%lu\n", s->timestamp);
        fprintf(stdout, "wrong_key_usage=%u\n", s->wrong_key_usage);
        fprintf(stdout, "pka_trust=%u\n", s->pka_trust);
        fprintf(stdout, "chain_model=%u\n", s->chain_model);
        fprintf(stdout, "validity=%d\n", s->validity);
        fprintf(stdout, "validity_reason=%d\n", s->validity_reason);
        fprintf(stdout, "key=%d\n", s->pubkey_algo);
        fprintf(stdout, "hash=%d\n", s->hash_algo);
        s = s->next;
    }
this seems to work fine. but i do not understand all of the result
for `foo` i obtain
summary=3       (GPGME_SIGSUM_VALID + GPGME_SIGSUM_GREEN)
validity=4      (GPGME_VALIDITY_FULL)
why not validity=5 (GPGME_VALIDITY_ULTIMTE) as my key hast validity and
trust set to ultimate.
$ gpg --edit-key 0x515e30c7
Secret key is available.
pub  1024D/515E30C7  created: 2002-02-11  expires: never       usage: SCA
                     trust: ultimate      validity: ultimate
sub  2048g/0503D66E  created: 2002-02-11  expires: never       usage: E
for `bar` i obtain
summary=0       (??)
validity=0      (GPGME_VALIDITY_UNKNOWN)
why not summary=2 (GPGME_SIGSUM_GREEN)
so how ist the correct / intended way to detect a good signature made by
an untrusted key?
thanks for the help


@_date: 2001-12-07 01:09:01
@_author: Simon Josefsson 
@_subject: S/MIME or PGP/MIME? 
Both are widely used.  Use whatever you like most, or whichever is
used by the people you communicate with.
I don't understand, S/MIME is a spec similar to PGP/MIME.  If you are
looking for a implementation of S/MIME, there are several, of which
Mozilla NSS and OpenSSL are free resp open source.

@_date: 2001-12-07 15:52:02
@_author: Simon Josefsson 
@_subject: S/MIME or PGP/MIME? 
Hm, your message was garbled, it was flagged as text/plain instead of
Not really, text/plain is the default type unless you specify one,
according to the MIME specs.
I think the reason is that Outlook does not support RFC 1847 and such
messages show up as attachments.
S/MIME is based on PKCS while PGP/MIME is based on OpenPGP.  The
reason there are two are that they was developed in parallel with
different design goals.  There are maybe 5 more to choice from if you
want to confuse things further as well, but I'd guess that over 80 %
of encrypted or signed email uses PGP, S/MIME or PGP/MIME.  (In order
of popularity as perceived by me.)

@_date: 2001-12-07 15:54:01
@_author: Simon Josefsson 
@_subject: S/MIME or PGP/MIME? 
Yes, removing the certificates from the S/MIME blob and integrating
directory services / look up systems for finding other people's
certificates would be much better. (DNS CERT RR!)

@_date: 2001-12-07 16:02:02
@_author: Simon Josefsson 
@_subject: S/MIME or PGP/MIME? 
If you have support in Outlook, you don't need anyone else supporting
it. :-)
Seriously, Outlook and Netscape has supported S/MIME for years and
they have a large part of the MUA market.  Very few mailers have had
_integrated_ PGP support until the last year or so.
The key can be found using a online lookup service as well, which is
probably more efficient.
I wouldn't call this a feature, but you can do this with PGP/MIME as
Yes, this is probably the main reason why S/MIME is popular.

@_date: 2001-12-07 16:05:01
@_author: Simon Josefsson 
@_subject: S/MIME or PGP/MIME? 
There is no way to prevent people from using 0 bit encryption (that
is, when they forget to push the "encrypt" button) when sending
PGP/MIME messages to you either.  A good S/MIME enabled mailer would
never use weak crypto.
I don't think S/MIME is dumb, so if you can prove me wrong I will
learn something, so please dig it up. :-)

@_date: 2001-12-07 20:56:02
@_author: Simon Josefsson 
@_subject: S/MIME or PGP/MIME? 
A good client should make the user aware when he is using weak crypto
as well.
A "good" client would be standards compliant AND protect the interests
of the user.
This is a good point, the OpenPGP standards allows you to convey the
preferred encryption algorithm and key size to use to the person that
wants to communicate with you.
On the other hand, I believe you can achive something similar using
SMIMECapabilities when using S/MIME?
Further, the S/MIME spec does not say you must support sending using
weak crypto.  RFC 2633 even says
   Before sending a message, the sending agent MUST decide whether it is
   willing to use weak encryption for the particular data in the
   message.  If the sending agent decides that weak encryption is
   unacceptable for this data, then the sending agent MUST NOT use a
   weak algorithm such as RC2/40.  The decision to use or not use weak
   encryption overrides any other decision in this section about which
   encryption algorithm to use.
so I think this risk is slightly exaggerated here.

@_date: 2002-08-16 20:46:01
@_author: Simon Josefsson 
@_subject: libgcrypt: weak DES keys checking? 
Is there a users' list for libgcrypt?
The DES implementation in libgcrypt seem to check for weak, semi weak
and possibly weak keys, but it seems I can't get it to reject one of
the "middle" weak keys:
E0 E0 E0 E0 F1 F1 F1 F1 (with parity)
E0 E0 E0 E0 F0 F0 F0 F0 (without parity)
FF FF FF FF 00 00 00 00 (actual key)
What am I doing wrong?  Sample code attached.  The weak key table in
des.c seems rather opaque, perhaps there is a bug somewhere.
You need to patch CVS HEAD with the following to make DES work though.
Index: cipher/cipher.c
RCS file: /cvs/gnupg/libgcrypt/cipher/cipher.c,v
retrieving revision 1.45
diff -u -p -r1.45 cipher.c
--- cipher/cipher.c	14 Aug 2002 19:07:52 -0000	1.45
+++ cipher/cipher.c	16 Aug 2002 18:42:56 -0000
 -34,7 +34,7   "dynload.h"
  MAX_BLOCKSIZE 16
- TABLE_SIZE 14
+ TABLE_SIZE 15
  CTX_MAGIC_NORMAL 0x24091964
  CTX_MAGIC_SECURE 0x46919042
 -229,7 +229,7  setup_cipher_table(void)
 					 &cipher_table[i].decrypt     );
     if( !cipher_table[i].name )
 	BUG();
+    i++;
     cipher_table[i].algo = CIPHER_ALGO_DUMMY;
     cipher_table[i].name = "DUMMY";
     cipher_table[i].blocksize = 8;
Content-Disposition: attachment; filename=gcry.c
  main(int argc, char argv[])
  int res;
  GCRY_CIPHER_HD ch;
  int j;
  unsigned char key[8];
  ch = gcry_cipher_open (GCRY_CIPHER_DES, GCRY_CIPHER_MODE_CBC, 0);
  if (ch == NULL)
    {
      puts("open fail");
      return 1;
    }
 X & 0xFE
    key[0] = 0xE0 X;    key[1] = 0xE0 X;    key[2] = 0xE0 X;    key[3] = 0xE0 X;
    key[4] = 0xF1 X;    key[5] = 0xF1 X;    key[6] = 0xF1 X;    key[7] = 0xF1 X;
    printf("parity key: \n");
    for (j = 0; j < 8; j++)
    printf("\n");
  res = gcry_cipher_setkey(ch, key, 8);
  if (res != GCRYERR_SUCCESS)
    {
      puts("setkey fail");
    }
  if (res == GCRYERR_WEAK_KEY)
    {
      printf("weak key\n");
    }
  gcry_cipher_close (ch);
  return 0;

@_date: 2002-01-05 22:39:01
@_author: Simon Josefsson 
@_subject: list of keyservers? 
^^^^^^^^^^^^^^^
This hasn't worked for a long time for me, is it supposed to?  It
seems as if pgp.net's nameservers have disabled zone transfers.
$ host -l pgp.net
Host pgp.net. not found: 9(NOTAUTH)
; Transfer failed.

@_date: 2002-01-05 23:35:01
@_author: Simon Josefsson 
@_subject: list of keyservers? 
No, it has been like this for very long (many months, maybe years).
Ah.  I'm in .se so I'm probably seeing some elaborate BIND optimizing
that makes it always talk to the closest server, which is .no.  I
would expect the round-robin to connect me to some other server
though, but this doesn't seem to happen.

@_date: 2002-01-18 00:08:02
@_author: Simon Josefsson 
@_subject: Virus-checking software flagging GNUpg signatures? 
Another "practical" problem with PGP/MIME is that MIME headers is sometimes changed in transit or by mail servers which breaks the signature.  The "Outlook plugin" approach to PGP and MIME works better in the real world, I'm sorry to say.  (That approach being to encode the message with text/plain, application/pdf etc MIME tags and then simply replace each MIME part body with PGP blobs.)

@_date: 2002-01-24 20:36:01
@_author: Simon Josefsson 
@_subject: signed messages & mutt 
Looks like a vanilla OpenPGP packet, that is != PGP/MIME.  Perhaps
Mutt doesn't support vanilla openPGP?

@_date: 2002-07-02 18:01:02
@_author: Simon Josefsson 
@_subject: feature request: --show-photos additions 
Two things I miss in the photo id stuff:
1) A possibility of outputing the JPEG image programmatically.
2) An option for viewing any photo ID present in keys used for
   verifying contents.  Putting show-photos in options works fine, but
   only for list-keys and others, not for verifying data.

@_date: 2002-07-02 22:01:02
@_author: Simon Josefsson 
@_subject: feature request: --show-photos additions 
How do I use it?
I've tried
$ gpg --list-keys B565716F --photo-viewer 'cat>foo' --show-photos
$ gpg --list-keys B565716F --photo-viewer 'echo %I' --show-photos
but it still forked the default photo viewer and didn't do anything
else.  I don't have any photo-viewer in my options file.
Yes.  Ideally I'd like my mail reader to show the JPEG alongside the
GPG result (which is why I want 1), but it probably requires some code
in the mailreader, so it would be nice if GPG started the photo viewer
whenever I verify some data from my mail reader.

@_date: 2002-07-09 00:20:01
@_author: Simon Josefsson 
@_subject: gnupg-1.0.7: keyserver subdir? 
FYI, I have written one for retrieving OpenPGP certificates from DNS,
see I'm working on the server side now, the current zone
(dnskeys.josefsson.org) is only a prototype even though it seem to

@_date: 2002-07-09 16:32:02
@_author: Simon Josefsson 
@_subject: DNS keyserver (was Re: gnupg-1.0.7: keyserver subdir?) 
I added both lists, feel free to remove -user when replying to this.
Aha.  The ldap/hkp keyserver plugins do this though.
I used jkp because I didn't see the plugin map in any well defined way
onto dns URIs.  A jkp://dnskeys.josefsson.org/ URI references a DNS
zone, not a DNS server or DNS domain like dns URIs do.  Also, a
"keyserver dns://dnskeys.josefsson.org" option doesn't say exactly how
the keys are stored (what owner name).  Since I don't use the CERT RFC
naming scheme, the method needs to be signalled somehow.  Hence jkp.
I think it still makes sense though, dns://dnskeys.josefsson.org/ does
not contain enough information for this context.  But I don't care
much either way.
Yes, definitely, this should be done.  I'm not yet sure whether the
client or the server should do this though.  Opinions?  The client can
add all the entries correctly. The server could also parse all the
incoming keys and populate the zone correctly.  Perhaps the latter
works better with how other PGP servers behaves.  I haven't really
gotten a HKP keyserver up and running (where do I get the keyring for
instance?) to be able to hook my code into it.
The CERT RFC is also unclear if the CRC24 value should be included in
the RR data or not, I chosed to not include it because it was simpler,
but it may make sense to include it.  Opinions?

@_date: 2002-07-09 19:08:02
@_author: Simon Josefsson 
@_subject: DNS keyserver (was Re: gnupg-1.0.7: keyserver subdir?) 
Yes, one UDP round-trip is wasted.  OTOH the server can guess that
CERT RR's should be fetched with TCP, or it can use EDNS.0 to increase
the 512 byte limit (EDNS.0 is required with IPv6 and DNSSEC anyway, if
I recall correctly).
Distributed caching, round-trip optimization, automatic fail over, and
a possibility of having signed answers could still be advantages for
DNS though.  Some of these can surely be implemented with HKP too, but
doesn't seem to be today.
I think DNS servers cache things unless you disable it by policy.  A
department running a name server for the benefits of their users would
probably not disable this by policy.  Then if everyone in the
department received a signed email from the outside and retrieved the
key, it would be an 1:n optimization.
But the amount of traffic we are talking about here is just noise, I
don't see efficiency as the main advantage.
One advantage would be that eventually it could be possible to secure
the link between a domain and user in that domain (consider
company.com signing its zone containing references to their users
keys).  Then a fake business card and a fake uploaded key on a
keyserver isn't enough to mount a man-in-the-middle attack.
Yes, that should be done.  If DNS is used for that, I don't see how it
harms to have DNS as an option for retrieving certificates too.  I'm
sure lots of people will continue to use HKP for many years anyway.

@_date: 2002-07-10 12:59:02
@_author: Simon Josefsson 
@_subject: DNS keyserver (was Re: gnupg-1.0.7: keyserver subdir?) 
How so?
The revocation certificate idea is a good one though, even without
Hm.  That is a problem. Perhaps it is easier to state that it won't
work with keys larger than 64kb though.

@_date: 2002-07-10 13:54:02
@_author: Simon Josefsson 
@_subject: DNS keyserver (was Re: gnupg-1.0.7: keyserver subdir?) 
Hence "eventually". :-)
A more immediate use of signed responses would be to protect against
substitution attacks between key servers and users.
Communicating via a socket might be the way to go.  Btw, if you use
several key servers, are they called asynchronous?  I'd like to add
lots of keyservers and have gpg use the answer from the first one.
Right now it seems that if one of the keyservers are down, gpg stalls.

@_date: 2002-07-10 18:30:01
@_author: Simon Josefsson 
@_subject: DNS keyserver (was Re: gnupg-1.0.7: keyserver subdir?) 
Is the packet size really the important factor?  I thought a good DDOS
attack used a protocol that generated several packets given only one.
Like broadcast ping.
Also, is it possible to spoof an EDNS.0 session?  I don't remember the
details, but it may include some kind of cookie, like TCP, which you
need to guess in order to continue.
Are they that large?
Yup, that could work.
Or switch to TCP.
Yes, it looks rather messy.

@_date: 2002-07-10 18:33:01
@_author: Simon Josefsson 
@_subject: DNS keyserver (was Re: gnupg-1.0.7: keyserver subdir?) 
I'm not sure which one is the best, my concern is only from the user
side of things where it hangs.  It would be nice to somehow be able to
specify several servers and have gpg continue to work when some of
them are down.

@_date: 2002-07-10 19:57:02
@_author: Simon Josefsson 
@_subject: DNS keyserver (was Re: gnupg-1.0.7: keyserver subdir?) 
But to generate a 64kb UDP packet you need to have negotiated EDNS.0
with the other server.  Is it possible to spoof that negotiation?  I
don't know.  But this isn't endemic to this, IPv6 and DNSSEC is going
to generate bigger packages too, making it possible to exploit this in
the same way.  Hopefully EDNS.0 negotiations cannot be spoofed.
For all the other benefits -- caching, round-trip optimization, fail
over, easy way to sign packets, synergy with certificate revocation.

@_date: 2002-07-10 20:20:01
@_author: Simon Josefsson 
@_subject: DNS keyserver (was Re: gnupg-1.0.7: keyserver subdir?) 
Ah. Ok.  Then the keyserver should probably disable EDNS.0 then,
forcing clients to switch to TCP.  This seems to be a generic problem
Then you should know. :-)

@_date: 2002-07-10 20:57:02
@_author: Simon Josefsson 
@_subject: DNS keyserver (was Re: gnupg-1.0.7: keyserver subdir?) 
Ouch.  Hm.
Yup, I guess it should be changed.  Shouldn't HKP be X-HKP then too?

@_date: 2002-06-09 19:08:02
@_author: Simon Josefsson 
@_subject: Windows-PGP/Linux-GnuPG mails compatibility issues 
Are you sure it is RFC 2015/3156 compatible?  Most Outlook PGP plugins
The scheme that works with all Windows PGP users I've communicated
with is to apply vanilla OpenPGP inside each terminal MIME object
without modifying the MIME headers at all.
Gnus doesn't support this method (yet), so you will have to do it
manually, which isn't difficult.

@_date: 2002-05-06 19:24:01
@_author: Simon Josefsson 
@_subject: Nullify's GnuPG 1.0.7 Release 2 
FWIW, very few of the S/MIME encrypted/signed mail I receive are
broken, compared to maybe 1 out 20 for PGP.  Having three commonly
used methods of embedding PGP in mail (and several more methods that
are less commonly used) is probably one of the reasons.

@_date: 2002-10-23 11:29:01
@_author: Simon Josefsson 
@_subject: E-Mail Encryption: Why Isn't Everyone Doing It? 
Why isn't everyone doing phone encryption?  Why isn't everyone
encrypting their personal postal mail?  Just because something is
technically possible doesn't mean everyone should use it.

@_date: 2002-09-24 14:04:01
@_author: Simon Josefsson 
@_subject: Gnus 
The current OpenPGP integration in Emacs has copyright assignment
problems, Mailcrypt is not FSF owned and it is probably too late to
find out who wrote exactly what.  Gpg.el had problems too which
lawyers supposedly was looking on, but I'm not sure what become of it.
However, there is a third OpenPGP backend with FSF copyrights that can
be used.  I remember integrating it in my local Gnus tree some time
ago, but either I never asked FSF if they had papers for it or I
didn't get a response.  I'll take a look...

@_date: 2002-09-24 16:27:02
@_author: Simon Josefsson 
@_subject: Gnus 
It is called PGG, part of SEMI but the project to integrate SEMI into
Emacs seems to be indefinitely postponed.  Supposedly PGG is planned
to be separated from SEMI, and there is CVS branch of SEMI called
EMIKO which even contains documentation.
I just installed code in Gnus to support it, I'll be checking in PGG
into a separate directory too (Lars agreed to this earlier this year)
and we can move it into the main distribution when papers have been
checked (all of the main files are FSF copyrighted).

@_date: 2002-09-24 17:39:02
@_author: Simon Josefsson 
@_subject: Signature as attachment ? 
Perhaps a GUI for this would be useful, although this isn't
Emacs/Gnus's strongest feature.
Mouse-2 clicking on the MIME button should reveal all diagnostic
output from the OpenPGP implementation.
Yes, it would be nice if we supported the scheme used by Outlook PGP
plugins to do this.  But it is not a RFC so supporting it is really a
Most of the critique still applies though...

@_date: 2003-12-08 21:45:03
@_author: Simon Josefsson 
@_subject: RSA key size restriction? 
Why is the RSA support in GnuPG limited keysizes <= 4096 bits?
Unless the reason is fundamental, any thoughts on extending/removing
the limit?

@_date: 2003-11-12 00:33:52
@_author: Simon Josefsson 
@_subject: Mutt's GNUpg signing. 
What is 'format=text'?  RFC 2646 only describe 'flowed' and 'fixed' as
values for the 'format' variable.
I believe using either PGP/MIME (RFC 3156), or inline PGP within
text/plain parts, is more likely to work, than (like your MUA does)
using inline PGP within application/pgp.  The content type
application/pgp is not even registered with IANA, as far as I can

@_date: 2004-04-14 23:17:56
@_author: Simon Josefsson 
@_subject: pgp/mime vs in-line pgp 
For messaging applications, I don't think it is unreasonable to
consider plain OpenPGP is "old-style" and "deprecated".  Quoting RFC
   Note that many applications, particularly messaging applications,
   will want more advanced features as described in the OpenPGP-MIME
   document, RFC 2015. An application that implements OpenPGP for
   messaging SHOULD implement OpenPGP-MIME.
For plain OpenPGP to work in e-mail, you pretty much need to only use
ASCII.  If you want to be compatible with PGP 2.x/5.x, there are even
more restrictions (no dash-escaped text, allegedly you also need to
remove trailing whitespace which would break format=flowed, and
probably more that I forget).

@_date: 2004-12-21 11:35:48
@_author: Simon Josefsson 
@_subject: Using the "preferred keyserver URL" in GnuPG 1.4 
When I do this, gpg seem to expire my key...  what am I doing wrong?
jas gpg --version|head -1
gpg (GnuPG) 1.4.0
jas gpg --list-key b565716f
gpg: WARNING: using insecure memory!
gpg: please see  for more information
pub   1280R/B565716F 2002-05-05 [expires: 2005-04-13]
uid                  Simon Josefsson uid                  Simon Josefsson sub   1280R/4D5D40AE 2002-05-05 [expires: 2005-04-13]
jas gpg --edit-key b565716f
gpg (GnuPG) 1.4.0; Copyright (C) 2004 Free Software Foundation, Inc.
This program comes with ABSOLUTELY NO WARRANTY.
This is free software, and you are welcome to redistribute it
under certain conditions. See the file COPYING for details.
gpg: WARNING: using insecure memory!
gpg: please see  for more information
Secret key is available.
pub  1280R/B565716F  created: 2002-05-05  expires: 2005-04-13  usage: CS
                     trust: ultimate      validity: ultimate
sub  1280R/4D5D40AE  created: 2002-05-05  expires: 2005-04-13  usage: E
[ultimate] (1). Simon Josefsson [ultimate] (2)  Simon Josefsson Command> keyserver gpg: WARNING: no user ID has been marked as primary.  This command may
              cause a different user ID to become the assumed primary.
You need a passphrase to unlock the secret key for
user: "Simon Josefsson "
1280-bit RSA key, ID B565716F, created 2002-05-05
pub  1280R/B565716F  created: 2002-05-05  expired: 2003-05-05  usage: CS
                     trust: ultimate      validity: expired
sub  1280R/4D5D40AE  created: 2002-05-05  expired: 2005-04-13  usage: E
[ expired] (1). Simon Josefsson [ expired] (2)  Simon Josefsson Command> q
Save changes? (y/N) y
jas gpg --list-key b565716f
gpg: WARNING: using insecure memory!
gpg: please see  for more information
pub   1280R/B565716F 2002-05-05 [expired: 2003-05-05)]
uid                  Simon Josefsson uid                  Simon Josefsson

@_date: 2004-12-21 15:38:44
@_author: Simon Josefsson 
@_subject: Using the "preferred keyserver URL" in GnuPG 1.4 
It works fine now.
jas gpg --edit-key b565716f
gpg (GnuPG) 1.4.0; Copyright (C) 2004 Free Software Foundation, Inc.
This program comes with ABSOLUTELY NO WARRANTY.
This is free software, and you are welcome to redistribute it
under certain conditions. See the file COPYING for details.
gpg: WARNING: using insecure memory!
gpg: please see  for more information
Secret key is available.
pub  1280R/B565716F  created: 2002-05-05  expires: 2005-04-13  usage: CS
                     trust: ultimate      validity: ultimate
sub  1280R/4D5D40AE  created: 2002-05-05  expires: 2005-04-13  usage: E
[ultimate] (1). Simon Josefsson [ultimate] (2)  Simon Josefsson Command> keyserver dns:simon.josefsson.org?type=CERT
gpg: WARNING: no user ID has been marked as primary.  This command may
              cause a different user ID to become the assumed primary.
You need a passphrase to unlock the secret key for
user: "Simon Josefsson "
1280-bit RSA key, ID B565716F, created 2002-05-05
pub  1280R/B565716F  created: 2002-05-05  expires: 2005-04-13  usage: CS
                     trust: ultimate      validity: ultimate
sub  1280R/4D5D40AE  created: 2002-05-05  expires: 2005-04-13  usage: E
[ultimate] (1)  Simon Josefsson [ultimate] (2). Simon Josefsson Command> q
Save changes? (y/N) y

@_date: 2004-12-21 17:51:05
@_author: Simon Josefsson 
@_subject: Using the "preferred keyserver URL" in GnuPG 1.4 
I did some work on a DNS based client earlier,
, but I'm not sure how well it
works today.
But writing a gpgkeys_dns.c using res_query should not be difficult.
Would you accept it if I wrote it?  Could be a fun Christmas
Sadly there is no easily available C libraries for dynamic update, so
sending keys to DNS keyservers is more difficult to implement in C.
Can gpg use the keyserver infrastructure for revocation checking?

@_date: 2004-12-21 22:24:30
@_author: Simon Josefsson 
@_subject: Using the "preferred keyserver URL" in GnuPG 1.4 
I think the main concern is that res_query is non-standard, but when
it is not available, disabling gpgkeys_dns seem like a simple
solution.  Fortunately there seem to already be code in gpg that have
the same issue, so much can be reused.
Perhaps gpg could support it for those keyserver protocols were it is
easy to support that model.  Could be a nice test of PGP revocation
certs using CERT.  On the other hand, there are some advantages in
creating a new DNS type for OpenPGP revocation certs, that is separate
from CERT.  (Query simon.josefsson.org IN CERT to see why...  The PKIX
certificate would still overflow the UDP limit.)  However,
implementing the idea in gpg might be a first step in dispersing
knowledge about the idea...

@_date: 2004-12-22 02:19:55
@_author: Simon Josefsson 
@_subject: Using the "preferred keyserver URL" in GnuPG 1.4 
I tried my Perl version, and it still worked.  Is Perl acceptable, or
do I have to rewrite it in C?
Get  and install it in
the keyserver directory, add
keyserver jkp://josefsson.org
The server knows the 57548DCD and b565716f keys only:
jas gpg gnupg-1.4.0.tar.bz2.sig
gpg: WARNING: using insecure memory!
gpg: please see  for more information
gpg: Signature made Thu 16 Dec 2004 11:50:52 AM CET using DSA key ID 57548DCD
gpg: requesting key 57548DCD from jkp server josefsson.org
gpgkeys: attempting key 0x68B7AB8957548DCD from jkp://josefsson.org
gpgkeys: querying for (0x57548DCD.josefsson.org, CERT)
gpgkeys: key 0x57548DCD retrieved from josefsson.org
gpg: key 57548DCD: public key "Werner Koch (gnupg sig) " importedgpg: 3 marginal(s) needed, 1 complete(s) needed, classic trust model
gpg: depth: 0  valid:   3  signed:   3  trust: 0-, 0q, 0n, 0m, 0f, 3u
gpg: depth: 1  valid:   3  signed:   5  trust: 2-, 0q, 0n, 1m, 0f, 0u
gpg: next trustdb check due at 2005-04-13
gpg: Total number processed: 1
gpg:               imported: 1
gpg: Good signature from "Werner Koch (gnupg sig) "
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: 6BD9 050F D8FC 941B 4341  2DCC 68B7 AB89 5754 8DCD
How will you design the protocol for revocation checks only?
When is it appropriate to do the revocation check?  It sounds as if
this should be configurable?  Maybe add a parameter:
revocationserver jkp://josefsson.org
or something?
Or would revocation only be done through the "preferred key server"
field from the owner's key?
Perhaps revocation checks shouldn't be done too often?  Might be some
work in remembering when the last check was done, though...
PS.  I'll take care of the paper work as well, of course.

@_date: 2004-12-22 16:33:07
@_author: Simon Josefsson 
@_subject: Using the "preferred keyserver URL" in GnuPG 1.4 
Yes.  I worry that "dns" might not be unique enough, though.  I think
it might be possible to use DNS storage of keys in other ways than how
I would want to do it.  Hence jkp, inspired by hkp, to signal the
specific non-standard approach used here.  I see there are gpgkeys_hkp
and gpgkeys_http, what is the difference between them?
That should be sufficient.
The way I read the 2440 wording for preferred key server, it seems
possible to implement it as making the URL empty until you revoke the
key, in which case you place the revocation certificate there.  I'm
not sure this is what people do, though.  I suspect everyone just
places an URL to their current key in the field.  Which would be
inefficient to retrieve every time you want to do a revocation check.
So there seem to be some motivation to separate these features.  I.e.,
separate "updated key" and "revocation server".
What does
OPTION include-revoked
mean?  Perhaps the interface could be
OPTION only-revoked
or something?  Assuming other plugins ignore unknown options, this
seem backwards compatible.
Right.  Better not support it initially.  I suspect it shouldn't be
the default, as well.  People who enable it can experiment with how
well it works, and if a caching mechanism is required.  Data should be
cached in your local DNS forwarded, though.  (I'm using dnsmasq on my
firewall, which, alas, doesn't cache responses received over TCP...)

@_date: 2004-07-26 20:47:58
@_author: Simon Josefsson 
@_subject: gpg 1.9.10 confused about default user id? 
In my ~/.gnupg/gpg.conf I have 'default-key B565716F'.  When I try to
sign a key, gpg things it should use an expired and disabled key of
mine instead.  See below.  How can I get it to use my current key?
gpg 1.2 work fine.
jas gpg2 --edit-key C14EB282
Secure memory is not locked into core
gpg (GnuPG) 1.9.10-cvs; Copyright (C) 2004 Free Software Foundation, Inc.
This program comes with ABSOLUTELY NO WARRANTY.
This is free software, and you are welcome to redistribute it
under certain conditions. See the file COPYING for details.
gpg: NOTE: THIS IS A DEVELOPMENT VERSION!
gpg: It is only intended for test purposes and should NOT be
gpg: used in a production environment or with production keys!
pub  1024D/C14EB282  created: 2003-08-25 expires: never
                     trust: unknown      validity: unknown
sub  1024g/7287A947  created: 2003-08-25 expires: never
(1). Pav Lucistnik (2)  Pav Lucistnik (3)  Jan Hornyak Command> sign
Really sign all user IDs? y
pub  1024D/C14EB282  created: 2003-08-25 expires: never
                     trust: unknown      validity: unknown
 Primary key fingerprint: 2622 B7E3 7DA5 5C53 2079  855B 9ED7 583F C14E B282
     Pav Lucistnik      Pav Lucistnik      Jan Hornyak How carefully have you verified the key you are about to sign actually belongs
to the person named above?  If you don't know what to answer, enter "0".
   (0) I will not answer. (default)
   (1) I have not checked at all.
   (2) I have done casual checking.
   (3) I have done very careful checking.
Your selection? (enter '?' for more information): 3
Are you really sure that you want to sign this key
with your key: "Simon Josefsson " (5C980097)
I have checked this key very carefully.
Really sign? ^C
jas gpg2 --edit-key 5C980097
Secure memory is not locked into core
gpg (GnuPG) 1.9.10-cvs; Copyright (C) 2004 Free Software Foundation, Inc.
This program comes with ABSOLUTELY NO WARRANTY.
This is free software, and you are welcome to redistribute it
under certain conditions. See the file COPYING for details.
gpg: NOTE: THIS IS A DEVELOPMENT VERSION!
gpg: It is only intended for test purposes and should NOT be
gpg: used in a production environment or with production keys!
Secret key is available.
pub  1024D/5C980097  created: 2001-04-10 expires: 2002-04-10
                     trust: unknown      validity: expired
*** This key has been disabled
sub   768g/368A26A6  created: 2001-04-10 expires: 2002-04-10
(1). Simon Josefsson (2)  Simon Josefsson (3)  Simon Josefsson (4)  Simon Josefsson Command> quit

@_date: 2004-11-06 00:11:17
@_author: Simon Josefsson 
@_subject: Should I use S/MIME? 
To give an alternative view, I'd recommend against CAcert.  Initially
I thought their service was a good idea, but when I signed up for a
certificate, they asked me for lots of personal details that I don't
feel comfortable giving out to some unknown organization.
If someone knows of a public X.509 CA that issue you a certificate if
you prove possession of a private key and an email address, I am
interested and would recommend it to others.  Heck, even one that give
you a certificate and a private key if you prove possession of an
email address would suffice.
Perhaps PGP keyservers could issue X.509 certificates for their users,
they have the email address and public key.

@_date: 2004-11-08 15:07:41
@_author: Simon Josefsson 
@_subject: Should I use S/MIME? 
Right, I agree.
However, in the case of CACert, it seems suspect to give out privacy
critical information to someone you don't have a paper contract with.
CACert try to suggest that their service provide a strong binding of
the certificate and the real person, but it really doesn't.  They only
seem to verify the e-mail <-> certificate binding.  I think it would
give a better impression of a service to only ask for personal
information that they actually verify, than to ask for personal
information just because they think they need it.
Btw, someone suggested  as an example of a CA I
asked for above.  I enrolled for a certificate, they asked me for my
personal name, e-mail address and gender, and I got a certificate.
Nice work, even though it could be improved by making the personal
name and gender optional.  Of course, giving out TLS web server
certificates for free would also be useful.

@_date: 2004-11-18 23:47:27
@_author: Simon Josefsson 
@_subject: support for non-openpgp cards 
IMHO, you should not care about broken implementations.  There is a
well-defined PKCS specification, even including header files.
Write code for the specification.  If something doesn't work because
someone isn't implementing the specification, that's their problem.
Polluting GnuPG code with  would make GnuPG users pay the price
of other's bad work.
To make things work in the real world, and not just a dream world
where everyone implement the specification, you can write a module
that translate from broken PKCS to correct PKCS  IMHO, this is
much better than coding for broken PKCS directly.
But hey, I'm not doing any work, so if you are, you get to chose the
strategy. ;-)
There is a GNU PKCS package:
Alas, it uses OpenSSL.

@_date: 2004-09-03 17:02:16
@_author: Simon Josefsson 
@_subject: Tutorial for gpgsm? 
Is there a tutorial on using gpgsm?  I find it a tad bit difficult to
use.  For example, steps I would want described are:
* How to mark a CA certificate as trusted.
* How to import a key and bind it to some certificate already
  imported.  Alternatively, import key and certificate together, from
  a pkcs12 blob, or pkcs8 + certificate blobs, or whatever.
  Alternatively, don't import the key at all, but specify location of
  key using a parameter when signing.
* How to import a CRL
I'm trying to replace the S/MIME support in OpenSSL with gpgsm for the
MUA Gnus.
Perhaps I shouldn't be using gpgsm directly?  gpgme didn't seem to
have a command line front end.

@_date: 2004-09-10 13:07:44
@_author: Simon Josefsson 
@_subject: Tutorial for gpgsm? 
I'm afraid I can't get this part to work.  Here's what I'm trying to
do and what happens:
0. rm ~/.gnupg/pubring.kbx
1. Import CA certificate, seems to work.
jas gpgsm --import cacert.crt
Secure memory is not locked into core
gpgsm: NOTE: THIS IS A DEVELOPMENT VERSION!
gpgsm: It is only intended for test purposes and should NOT be
gpgsm: used in a production environment or with production keys!
gpgsm: keybox `/home/jas/.gnupg/pubring.kbx' created
gpgsm: total number processed: 1
gpgsm:               imported: 1
jas gpgsm --list-keys
Secure memory is not locked into core
gpgsm: NOTE: THIS IS A DEVELOPMENT VERSION!
gpgsm: It is only intended for test purposes and should NOT be
gpgsm: used in a production environment or with production keys!
Serial number: 00
       Issuer: /CN=CA Cert Signing Authority/OU=http:\x2f\x2f CA/EMail=support
      Subject: /CN=CA Cert Signing Authority/OU=http:\x2f\x2f CA/EMail=support
     validity: 2003-03-30 12:29:49 through 2033-03-29 12:29:49
     key type: 4096 bit RSA
 chain length: unlimited
  fingerprint: 13:5C:EC:36:F4:9C:B8:E9:3B:1A:B2:70:CD:80:88:46:76:CE:8F:33
jas echo '135CEC36F49CB8E93B1AB270CD80884676CE8F33 S' >> ~/.gnupg/trustlist.txt
2. Import key and user certificate.
jas gpgsm --import cacert.user.key
Secure memory is not locked into core
gpgsm: NOTE: THIS IS A DEVELOPMENT VERSION!
gpgsm: It is only intended for test purposes and should NOT be
gpgsm: used in a production environment or with production keys!
gpgsm: no issuer found in certificate
gpgsm: basic certificate checks failed - not imported
gpgsm: total number processed: 1
gpgsm:           not imported: 1
The cacert.crt and cacert.user.key files attached below.  (I know I'm
sending my private key.  It should be revoked when my testing is

@_date: 2004-09-10 13:07:58
@_author: Simon Josefsson 
@_subject: Tutorial for gpgsm? 
Here's another problem, gpgsm --verify doesn't seem to like my S/MIME
messages.  Shouldn't the input be on e-mail format?
jas gpgsm --verify msg.txt
Secure memory is not locked into core
gpgsm: NOTE: THIS IS A DEVELOPMENT VERSION!
gpgsm: It is only intended for test purposes and should NOT be
gpgsm: used in a production environment or with production keys!
gpgsm: ksba_cms_parse failed: End of file

@_date: 2004-09-27 21:30:32
@_author: Simon Josefsson 
@_subject: Weaknesses in SHA-1 
I don't have an opinion personally, but there's always the argument
that if SHA256 is getting a lot of attention, you could end up in the
situation where SHA256 has been broken, but Tiger192 hasn't.
Read-only support could be a useful for a safety fallback mechanism.
The problem is when people start to use Tiger192 without good

@_date: 2004-09-27 22:35:21
@_author: Simon Josefsson 
@_subject: Weaknesses in SHA-1 
And that's bad.  Maybe we can penalize such users somehow?  Only
enable Tiger192 read-only support if a certain token is in the config
file?  Then there is an escape mechanism if all but Tiger192 is
OTOH, you might take the stand that if SHA256 is broken, you have a
lot of other problems.  So any solution that would work for other
applications (that is, release a new version with support for SHA3)
would work for GnuPG as well.
Personally, I would rather have to upgrade once in a while due to
cryptographic advances, than have even more dead code to review in
security critical applications.  And if I were a maintainer, I
wouldn't want to maintain practically useless code, nor maintain an
escape mechanisms that might not ever be used, nor take on the support
cost of a niche market.
Just my $.2...

@_date: 2005-08-08 14:33:02
@_author: Simon Josefsson 
@_subject: Proof of email ownership 
I get this:
jas gpg -s -Npka-address foo
You need a passphrase to unlock the secret key for
user: ?Simon Josefsson ?
1280-bit RSA key, ID B565716F, created 2002-05-05
gpg: can't put notation data into v3 (PGP 2.x style) signatures
Is my key unusable with this scheme?

@_date: 2005-08-08 14:33:27
@_author: Simon Josefsson 
@_subject: Proof of email ownership 
You could have multiple TXT records, one for each key.  Would that work?

@_date: 2006-08-09 18:06:53
@_author: Simon Josefsson 
@_subject: Key Certificates in GNUPG 
There is a tool 'certtool' in GnuTLS though, which can generate X.509
certificates.  It uses libgcrypt.

@_date: 2006-03-21 17:26:21
@_author: Simon Josefsson 
@_subject: How to sign with non-subkey? 
I recently created a signing sub-key (on a smartcard, if it matters)
and gpg now use it by default.  How do I sign messages using my
non-subkey?  I thought -u would do it, but it doesn't seem to work:
jas echo foo |gpg -a -s -v -u b565716f
gpg: using subkey AABB1F7B instead of primary key B565716F
gpg: writing to stdout
gpg: using subkey AABB1F7B instead of primary key B565716F
gpg: RSA/SHA1 signature From: simon ("AABB1F7B Simon Josefsson)"
The key details are:
jas gpg --edit-key b565716f
gpg (GnuPG) 1.4.2.2; Copyright (C) 2005 Free Software Foundation, Inc.
This program comes with ABSOLUTELY NO WARRANTY.
This is free software, and you are welcome to redistribute it
under certain conditions. See the file COPYING for details.
Secret key is available.
pub  1280R/B565716F  created: 2002-05-05  expires: 2006-08-14  usage: CS
                     trust: ultimate      validity: ultimate
sub  1280R/4D5D40AE  created: 2002-05-05  expires: 2006-08-14  usage: E
sub  1024R/09CC4670  created: 2006-03-18  expires: 2007-04-22  usage: A
sub  1024R/AABB1F7B  created: 2006-03-18  expires: 2007-04-22  usage: S
sub  1024R/A14C401A  created: 2006-03-18  expires: 2007-04-22  usage: E
[ultimate] (1). Simon Josefsson [ultimate] (2)  Simon Josefsson

@_date: 2006-05-18 14:31:35
@_author: Simon Josefsson 
@_subject: auto-key-locate 
I'm having trouble getting hkp keyservers to work with
auto-key-locate.  gpg do appear to retrieve the key successfully, but
then it complains that it can't use it.  Ideas?
~/.gnupg/gpg.conf contains:
auto-key-locate x-hkp://subkeys.pgp.net
jas gpg -a -e -r dshaw
gpg: searching for names from hkp server subkeys.pgp.net
gpg: key 99242560: public key "David M. Shaw " imported
gpg: key 3CB3B415: public key "David M. Shaw " imported
gpg: key D46DCCC5: "David M. Shaw (High Security) " not changed
gpg: key DFF20E79: public key "David M. Shaw " imported
gpg: 3 marginal(s) needed, 1 complete(s) needed, classic trust model
gpg: depth: 0  valid:   4  signed:  21  trust: 0-, 0q, 0n, 0m, 0f, 4u
gpg: depth: 1  valid:  21  signed:  43  trust: 1-, 0q, 0n, 1m, 19f, 0u
gpg: depth: 2  valid:  29  signed: 223  trust: 24-, 0q, 0n, 0m, 5f, 0u
gpg: depth: 3  valid:  24  signed: 158  trust: 24-, 0q, 0n, 0m, 0f, 0u
gpg: next trustdb check due at 2006-07-10
gpg: Total number processed: 4
gpg:               imported: 3  (RSA: 3)
gpg:              unchanged: 1
gpg: automatically retrieved `dshaw via x-hkp://subkeys.pgp.net
gpg: dshaw skipped: unusable public key
gpg: [stdin]: encryption failed: unusable public key
jas gpg -a -e -r dshaw
gpg: 1643B926: There is no assurance this key belongs to the named user
pub  2048g/1643B926 2002-01-28 David M. Shaw  Primary key fingerprint: 7D92 FD31 3AB6 F373 4CC5  9CA1 DB69 8D71 9924 2560
      Subkey fingerprint: F0EC 51D9 2ED0 C183 8977  DDD0 AE28 27D1 1643 B926
It is NOT certain that the key belongs to the person named
in the user ID.  If you *really* know what you are doing,
you may answer the next question with yes.
Use this key anyway? (y/N)
Btw, DNS CERT retrieval work fine, see:
foo gpg -a -e -r simon
gpg: key B565716F: public key "Simon Josefsson " imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)
gpg: no ultimately trusted keys found
gpg: automatically retrieved `simon via DNS CERT
gpg: A14C401A: There is no assurance this key belongs to the named user
pub  1024R/A14C401A 2006-03-18 Simon Josefsson  Primary key fingerprint: 0424 D4EE 81A0 E3D1 19C6  F835 EDA2 1E94 B565 716F
      Subkey fingerprint: 9FB3 8B75 7032 6114 34B5  649E C0C3 8BF5 A14C 401A
It is NOT certain that the key belongs to the person named
in the user ID.  If you *really* know what you are doing,
you may answer the next question with yes.
Use this key anyway? (y/N)

@_date: 2006-05-18 16:09:08
@_author: Simon Josefsson 
@_subject: auto-key-locate 
No, that only removes the question on the second invocation of gpg.
It doesn't make the first one succeed.  The key appear to be found and
imported successfully, but gpg doesn't seem to be able to use it


@_date: 2007-12-28 22:03:15
@_author: Brad Tilley 
@_subject: pipes cgi and gnupg 
I can do this from a python cgi script from a browser:
os.system("gpg --version > gpg.out")
However, I cannot do this from a browser:
os.system("echo %s | gpg --batch --password-fd 0 -d %s > d.out"
%(pass, filename))
The output file is produced, but it's zero byte. I want the decrypted
file's content, but the pipe seems to mess things up. The script works
fine when executed from command line. The output file is produced as
expected. When executed by a browser, it does not work as expected...
only produces a zero byte output file. Any tips? I've googled a bit
and experimented for a few nights, still no go.
Here's the entire script:
import cgi
import cgitb; cgitb.enable()
import os
import tempfile
print "Content-Type: text/html"
print "T"
print "H"
form = cgi.FieldStorage()
if not form.has_key("pass"):
    print "Enter password"
filename = "test.gpg"
pass = form.getvalue("pass").strip()
os.system("gpg --version > gpg.out")
os.system("echo %s | gpg --batch --password-fd 0 --decrypt %s > d.out"

@_date: 2008-01-02 11:10:42
@_author: Brad Tilley 
@_subject: pipes cgi and gnupg 
On linux, would it be possible to use the Linux Key retention service
to overcome this:

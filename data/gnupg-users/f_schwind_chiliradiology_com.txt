
@_date: 2008-08-11 12:43:59
@_author: Florian Schwind 
@_subject: Passphrase caching with gpgme and gpg2 
I already send this question to gnupg-devel... which might not be the right place because I didn't get an answer there :-) May be someone from gnupg-users might help me with this issue.
With gpg-1.4.9 I used the passphrase_cb() from gpgme to handle passphrases. What is the recommended way to handle the passphrase with gpgme and gpg2? Since I'm building a server application I can not use any form of dialog-box.

@_date: 2008-08-11 18:31:12
@_author: Florian Schwind 
@_subject: Passphrase caching with gpgme and gpg2 
Is there a timeframe when this will be fixed? And I still don't see how to uses the preset-passphrase with gpgme?

@_date: 2008-08-18 14:30:03
@_author: Florian Schwind 
@_subject: import and export with different gpg versions 
I exported an key from my keyring with gpg 1.4.9 and tried to import it with gpg 1.2.4 on an other system. The import worked well until I tried to run gpg --update-trust-db which halted with an error:
gpg: kein uneingeschr?nkt vertrauensw?rdiger Schl?ssel 080CB4A8 gefunden
(which probably means "no ultimated truted key 080CB4A8 found")
This is some kind of irritating me since I don't know nothing about this keyID. I do not have this key in the keyring whrer I exported the key from and I don't have it in the new keyring where I imported the key (which was previously empty). I even get this error when I remove the trustdb.gpg in $GPG_HOME an let gpg rebuild it!
Is there a problem using this two version together?

@_date: 2008-10-06 13:48:14
@_author: Florian Schwind 
@_subject: keyserver with gpgme 
How do I know which one is stable? And why isn't the latest stable
release on  Should I always take the newest
version from
Best Regards

@_date: 2008-10-20 09:58:47
@_author: Florian Schwind 
@_subject: gpgme 1.1.7 and verify signature 
Hello List.
I tried to uses the new gpgme-1.1.7 on linux with gpg-1.4.9 and I now
get a gpgme "Bad file descriptor" error when I try to verify a normal
signature with "gpgme_op_verify(ctx, sig, NULL, plain);" which worked
fine with gpgme-1.1.4.
Anyone else discovered this behavior or can help me?

@_date: 2008-09-19 12:29:00
@_author: Florian Schwind 
@_subject: keyserver with gpgme 
Is it possible to use a keyserver for verification of signatures with gpgme? (I think it is possible with the gpg commandline client).
Best Regards

@_date: 2008-09-29 09:03:14
@_author: Florian Schwind 
@_subject: keyserver with gpgme 
It would be real nice if someone could point me in the right direction
with this. I still don't know how to communicate with a keyserver using
Or is this the wrong group to ask?

@_date: 2008-09-29 13:26:25
@_author: Florian Schwind 
@_subject: keyserver with gpgme 
First of all there is no t-gpgconf.c in my /tests/gpg/ directory (using
the latest gpgme from gnupg.org, which is 1.1.4)
And what I'm actually looking for, is a way to use a keyserver with
gpgme like I'm used to with the console-application
e.g. for verification:
gpg --keyserver subkeys.pgp.net --keyserver-options auto-key-retrieve
--verify document.asc
or to search for keys on the server:
gpg --keyserver subkeys.pgp.net --search-key mail at internet.com
Best Regards

@_date: 2009-01-20 12:15:45
@_author: Florian Schwind 
@_subject: PHP Frontend 
The real question is, if you want to create keys over the web? I would
never trust any key I haven't created myself... and definitely not some
key generated with a webapp.
Best Regards

@_date: 2009-03-19 09:14:57
@_author: Florian Schwind 
@_subject: gpgme on windows 
Try something like this:
int translate_fd(int fd, int for_write) {
 WIN32
    int x;
    if (fd == -1) {
    }
    x = _open_osfhandle ((long)fd, for_write ? 1 : 0);
    if (x == -1) {
    }
    return x;
 /*!WIN32 */
    return fd;
Best Regards

@_date: 2009-03-20 13:33:37
@_author: Florian Schwind 
@_subject: gpgme on windows 
Have a look at:
I don't think this is a complete tutorial, but I managed to compile
gpgme after a few days :-). When you finished to compile gnupg on
windows, it should only be a matter of another few days to compile a
static gpgme library. I can not lead you thru the whole process because
there is  a lot of try-and-error involved.
It would be nice if there was more windows gpgme support...
Best Regards

@_date: 2010-02-17 09:48:59
@_author: Florian Schwind 
@_subject: gpeme_get_key returns a 'general error' after some time. 
I identified the the piece of code responsible causing the error. It happens in the  _gpgme_io_set_close_notify method in posix-io.c
I'm getting a fd > 256 which seams to be the maximum of fds gpgme can handle. It might be some sort of design-issue in my software causing so many open fds, but I'd still like to overcome this fd limitation. As far as I can see, gpgme is using the fd as index for the notify_table. So could I just increase the size of the notify_table without breaking things?
Best Regards

@_date: 2010-02-25 12:35:17
@_author: Florian Schwind 
@_subject: How to decrypt signatures with gpgme? 
Hello List,
when I create a signature with "gpg --sign", I'm able to use "gpg --decrypt" to get the plaintext from the signature.
When I'm try to to this using gpgme resp.
gpgme_op_decrypt (gpgme_ctx_t ctx, gpgme_data_t cipher, gpgme_data_t plain)
I'm getting a GPG_ERR_NO_DATA error if cipher does not contain any data to decrypt.
So is there a way to get the plaintext from the signature using gpgme?
  Florian

@_date: 2010-01-21 11:43:16
@_author: Florian Schwind 
@_subject: gpeme_get_key returns a 'general error' after some time. 
Hello all,
I have some strange problems using gpg (1.4.9) resp. gpgme (1.1.4) and hope someone can help me.
I'm using gpgme to encrypt a lot of files and at some point the function "gpgme_get_key" returns a "General error" and all further encryptions fail until I restart the process. Sometimes the system runs for only a few minutes and sometimes it lasts for hours before the error occurs.
My first thought was that there might be some problems with multi-threading so I synchronized all calls and took care of the encryption never running parallel.
Does someone has any idea how to fix this?
Thanks for your help!
Florian Schwind

@_date: 2010-01-25 10:10:03
@_author: Florian Schwind 
@_subject: gpeme_get_key returns a 'general error' after some time. 
thanks for the tip with debuglog but this is not practical in my case because 2 minutes after starting the application I already have over 1GB of logdata, and the error might occur only after a few hours runtime...
Best Regards
  Florian

@_date: 2010-01-27 10:47:56
@_author: Florian Schwind 
@_subject: gpeme_get_key returns a 'general error' after some time. 
I updated to gpg 1.4.10 and gpgme 1.2.0 but this doesn't solve the problem.
I will put more debug output in gpgme and try to identify where the error happens.
Best Regards
  Florian Schwind

@_date: 2010-11-19 11:12:08
@_author: Florian Schwind 
@_subject: GPG does not build on SuSE SLES 11 
Hi all,
I was not able to run the "make ckeck" for GPG 1.4.10 on a SLES 11 (i386) successfully (I also tried 1.4.11). Since I'm not sure if there is some configuration issue with my server, I'm sending this to the bug-address and the user-list as well.
Maybe someone experienced similar problems with GPG on a SLES 11 and might help me to figure out what's wrong? (On my SuSE 11.3 x86 it compiles without problems)
If I try to encrypt with the build gpg I get following errors:
florian at davinci:~/gnupg/davinci> gnupg-1.4.11-bin/bin/gpg --encrypt -r test plaintext.txt
Rijndael-128 test encryption failed.
gpg: weak key created - retrying
gpg: weak key created - retrying
gpg: weak key created - retrying
gpg: weak key created - retrying
gpg: weak key created - retrying
gpg: weak key created - retrying
gpg: weak key created - retrying
gpg: weak key created - retrying
gpg: weak key created - retrying
gpg: weak key created - retrying
gpg: weak key created - retrying
gpg: weak key created - retrying
gpg: weak key created - retrying
gpg: weak key created - retrying
gpg: weak key created - retrying
gpg: weak key created - retrying
gpg: fatal: cannot avoid weak key for symmetric cipher; tried 16 times!
secmem usage: 2048/2112 bytes in 4/5 blocks of pool 2112/32768
This is the result of "make check":
florian at davinci:~/gnupg/davinci/gnupg-1.4.11> make check
Making check in m4
make[1]: Entering directory make[1]: Nothing to be done for `check'.
make[1]: Leaving directory Making check in intl
make[1]: Entering directory make[1]: Nothing to be done for `check'.
make[1]: Leaving directory Making check in zlib
make[1]: Entering directory make[1]: Nothing to be done for `check'.
make[1]: Leaving directory Making check in util
make[1]: Entering directory make[1]: Nothing to be done for `check'.
make[1]: Leaving directory Making check in mpi
make[1]: Entering directory make[1]: Nothing to be done for `check'.
make[1]: Leaving directory Making check in cipher
make[1]: Entering directory make[1]: Nothing to be done for `check'.
make[1]: Leaving directory Making check in tools
make[1]: Entering directory make[1]: Nothing to be done for `check'.
make[1]: Leaving directory Making check in g10
make[1]: Entering directory make[1]: Nothing to be done for `check'.
make[1]: Leaving directory Making check in keyserver
make[1]: Entering directory make[1]: Nothing to be done for `check'.
make[1]: Leaving directory Making check in po
make[1]: Entering directory make[1]: Nothing to be done for `check'.
make[1]: Leaving directory Making check in doc
make[1]: Entering directory make[1]: Nothing to be done for `check'.
make[1]: Leaving directory Making check in checks
make[1]: Entering directory ../g10/gpg --homedir . --quiet --yes --no-permission-warning --import ./pubdemo.asc	
echo timestamp >./prepared.stamp
make  check-TESTS
make[2]: Entering directory gpg (GnuPG) 1.4.11
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Home: .
Supported algorithms:
Pubkey: RSA, RSA-E, RSA-S, ELG-E, DSA
Cipher: 3DES, CAST5, BLOWFISH, AES, AES192, AES256, TWOFISH, CAMELLIA128,
         CAMELLIA192, CAMELLIA256
Hash: MD5, SHA1, RIPEMD160, SHA256, SHA384, SHA512, SHA224
Compression: Uncompressed, ZIP, ZLIB
PASS: version.test
PASS: mds.test
PASS: decrypt.test
PASS: decrypt-dsa.test
MD5 SHA1 RIPEMD160 SHA256 SHA384 SHA512 SHA224 | PASS: sigs.test
PASS: sigs-dsa.test
FAIL: encrypt.test
3DES CAST5 BLOWFISH AES FAIL: encrypt-dsa.test
FAIL: seat.test
PASS: clearsig.test
FAIL: encryptp.test
PASS: detach.test
PASS: armsigs.test
FAIL: armencrypt.test
FAIL: armencryptp.test
FAIL: signencrypt.test
PASS: signencrypt-dsa.test
FAIL: armsignencrypt.test
PASS: armdetach.test
PASS: armdetachm.test
PASS: detachm.test
PASS: genkey1024.test
3DES CAST5 BLOWFISH AES FAIL: conventional.test
3DES CAST5 BLOWFISH AES FAIL: conventional-mdc.test
PASS: multisig.test
PASS: verify.test
PASS: armor.test
10 of 27 tests failed
Please report to bug-gnupg at gnu.org
make[2]: *** [check-TESTS] Error 1
make[2]: Leaving directory make[1]: *** [check-am] Error 2
make[1]: Leaving directory make: *** [check-recursive] Error 1
  Florian

@_date: 2010-11-19 12:28:02
@_author: Florian Schwind 
@_subject: GPG does not build on SuSE SLES 11 
I just found out that there seems to be a problem with gcc 4.3.2 and rijndael.c witch is already known. Option 1 is to updated to gcc 4.5.0 which works or the use CFLAGS="-O1" instead of O2 and don't optimize the code heavily.
Perhaps someone wants to look into rijndael.c and find out where the optimizationproblems with gcc come from?
  Florian


@_date: 2001-10-18 10:04:01
@_author: Tommi Vainikainen 
@_subject: GnuPG and PGP 2.6: unusable public key 
I got public key from a friend.  That key was generated with some
version of PGP 2.6.  To import that key I had to use
--allow-non-selfsigned-uid, but now the key is in my public keyring.
When I'm trying to encrypt message to him, I got very short and
nothing explaining error message "unusable public key".  So what is
the reason key is unusable, how do I know this reason?  (This is a bug
in GnuPG, would I say.)  Even --verbose didn't bother to explain more.
bash:~$ gpg --verbose --rfc1991 --cipher-algo idea --compress-algo  1 -a --encrypt -r bob
gpg: bob: skipped: unusable public key
gpg: [stdin]: encryption failed: unusable public key
bash:~$ So what should I do to be able to encrypt messages to my friend?  (And
btw, I've idea-extension in my gpg.)

@_date: 2001-10-19 12:57:01
@_author: Tommi Vainikainen 
@_subject: GnuPG and PGP 2.6: unusable public key 
This didn't help at all.  I had signed it already.  Same error
But with more testing, it seems gpg doesn't allow using keys without
selfsignature.  I tested this with my temporarily generated pgp2 keys,
after selfsigning temp key, gpg allowed me to encrypt to that temporal
pgp2 key, but not without selfsignature even tough I added almost
every possible parameter.  So is this a bug or what because man page
says --always-trust would be enough for everbody (or did I
misunderstood that)?
       --always-trust
                 Skip key validation and assume  that  used  keys
                 are  always  fully  trusted.  You won't use this
                 unless you have installed some external  valida=AD
                 tion scheme.
       --allow-non-selfsigned-uid
                 Allow the import of keys with user IDs which are
                 not self-signed, but have at  least  one  signa=AD
                 ture.  This only allows the import - key valida=AD
                 tion will fail and you have to check the  valid=AD
                 ity  of  the  key  my other means.  ...
What I understood from those, (quoted from gpg man page) that non
selfsigned key is not valid, but always-trust would skip validation
and thus wouldn't care about validness of key.
Last night I did read some gpg code, adding oneliner "pk->is_valid =3D
1;" to right place is sufficient to force gpg to encrypt.  I tested
Second problem is that pgp2 cannot decrypt those messages.  Difference
in messages generated by gpg and pgp2 was that length of encrypted
packet was "unknown" when generated by gpg and some integer when
generated by pgp2.  (That was with gpg's --list-packets.)  So what is
wrong here?  Does this mean gpg is not pgp2 compatible at all?  What
does --rfc1991 if pgp2 still cannot decrypt those messages?
Tommi Vainikainen

@_date: 2001-10-19 17:59:06
@_author: Tommi Vainikainen 
@_subject: GnuPG and PGP 2.6: unusable public key 
Yes I understand this is one possible solution.  Another solution
would be use --always-trust but it seems gpg is buggy and is trying to
force me to do extra work.  No good.
This is exactly why US patent/dual-use export restrictions are very
useful.  Those make it so complicated to people so people don't want
to use crypto.  And gpg seems to be supporting this complicateness
more with extra checks, detecting pgp2 keys and warning more but still
not denying users from doing what they want would be the right
solution for this.  Also using idea algorithm by default for pgp2
recipients (when idea extension is available) would be very nice and
would allow people use gpg more easily.
Seems like it was my problem, I didn't remeber to give --cipher-algo
idea --compress-algo 1 --rfc1991 to gpg, after that pgp2 was able to
decrypt message.  But if I used many recipients, myself (with
DSA/ElGamal key) included, then even with those parameters pgp2 was
not able to decrypt.  But of course moving from pgp2 to pgp5 and
keeping key same is almost trivial, so this should not be big problem,
maybe I have to push my friends to do that then.
BTW, does anyone know why gpg doesn't allow creating new RSA keys?  In
pgp5 there seems to be some compatibility options and it doesn't like
my DSA key when there are multiple recipients others using RSA keys
and me using DSA.  Creating RSA key with pgp5 and then importing
public and secret keys to my gpg keyring is possible and that's what I
probably must do.

@_date: 2001-10-23 22:27:01
@_author: Tommi Vainikainen 
@_subject: FORGOT PASSPHASE 
Not of course impossible.  Bruteforce attacks work always, ie. just
trying every possible password.  Also keep in mind that password is
usually shorter than key.


@_date: 2012-10-17 14:56:57
@_author: Gabi 
@_subject: Problem trying to automate decrypt option 
We want to automate the decrypt process in some file with a task in the
operating system (Windows 7 64)
What we want to do is from command line is: gpg2.exe --decrypt file.gpg >
result.txt Of course it works ok, but launch pinentry.exe, a dialog box to
ask for the password of the certificate.
So we use a pipeline to send the password to gpg2 like this:
echo "myPassword" | gpg2.exe --decrypt file.gpg > result.txt
But this does not work.
One possible workaround is that once we have put the password in the
pinentry.exe dialog, we can decrypt again WITHOUT using the password and
after some time (some minutes) gpg2.exe ask us for a password again.(For
example after writing password if we run the same bat with the same command
it does not ask us for a password...in some minutes at least)
So there could be 2 possible solutions we don't know how to implement.
1) A way to send the password to the dialog, the command echo "myPassword" |
gpg2.exe --decrypt file.gpg > result.txt was supposed to work, we find it in
a forum, but it does not work.
2) Can we change the time it ask again for the password? Where? How? If we
can set it to, for example 1 year, the we can run the command, type the
password in the dialog box and use the same command in a daily task and
it'll work until next year...
Has anybody an answer for 1) or 2)? Any of them will solve the problem...

@_date: 2012-10-18 08:34:13
@_author: Gabi 
@_subject: Problem trying to automate decrypt option 
Thanks but both of them does not work, the dialog is ever shown, using
gpg2.exe or gpg.exe.
If I write gpg2.exe --help (or gpg.exe --help) the command or option
--passphrase is not shown anywhere.
I'm using windows version. Is that a feature not available in windows
(And yes storing in a task is a bad idea, is not the final solution, but
only a way to automate a process we'll do in another way but meanwhile...)
-----Mensaje original-----
De: David Tomaschik [mailto:david at systemoverlord.com] Enviado el: jueves, 18 de octubre de 2012 1:33
Para: Gabi
Asunto: Re: Problem trying to automate decrypt option
Have you tried --passphrase "myPassword" or --passphrase-fd 0 (with the
(Standard statement about how storing the passphrase in a scheduled
task is a bad idea, etc.)

@_date: 2012-10-18 11:35:30
@_author: Gabi 
@_subject: Problem trying to automate decrypt option 
Thanks, we find the solution with help of an user (Lee Elcocks), the problem
was to write an space between password and pipe.
Echo "mypasswd"| gpg.exe ...... use it without space between "mypasswd" and
Thanks for your effort, Werner, we're using the first one (only had to
remove empty space on the .bat) but your solution seems ok too.
-----Mensaje original-----
De: Werner Koch [mailto:wk at gnupg.org] Enviado el: jueves, 18 de octubre de 2012 10:39
Para: Gabi
Asunto: Re: Problem trying to automate decrypt option
On Thu, 18 Oct 2012 08:34, gabi at idieikon.com said:
Note that --help does not show all options.  See the man page for a
complete list.
It is the same on all platforms.
What you need to use is the command gpg-preset-passphrase to tell the
gpg-agent the passphrase in advance.
       gpg-preset-passphrase [options] [command] keygrip
       The gpg-preset-passphrase is a utility to seed the internal cache
       of a running gpg-agent with passphrases.  It is mainly useful for
       unattended machines, where the usual pinentry tool may not be
       used and the passphrases for the to be used keys are given at
       machine startup.
       Passphrases set with this utility don't expire unless the
       --forget option is used to explicitly clear them from the cache
       --- or gpg-agent is either restarted or reloaded (by sending a
       SIGHUP to it).  It is necessary to allow this passphrase
       presetting by starting gpg-agent with the --allow-
       preset-passphrase.
       gpg-preset-passphrase is invoked this way:
         gpg-preset-passphrase [options] [command] keygrip
       keygrip is a 40 character string of hexadecimal characters
       identifying the key for which the passphrase should be set or
       cleared.  This keygrip is listed along with the key when running
       the command: gpgsm --dump-secret-keys. One of the following
       command options must be given:
       [...]
For use with gpg you can use
       gpg2 --with-keygrip -K
to view the keygrip.
   Werner

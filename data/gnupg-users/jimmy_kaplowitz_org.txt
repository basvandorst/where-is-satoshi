
@_date: 2006-03-29 02:56:30
@_author: Jimmy Kaplowitz 
@_subject: Remote use of keys on smartcard via gnupg-agent? 
I know that gnupg-agent can allow remote use of OpenPGP keys on a
locally-connected smartcard machine to authenticate an ssh connection
from one remote machine to another.  Access to the OpenPGP keys is
forwarded over the first ssh connection to the GPG agent as necessary,
without actually transfering the keys over the wire. (Please correct me
if I misunderstand this.)
What I'd like to do is forward access to those keys from the local
machine to a remote machine, but instead of using them to authenticate
ssh, I'd like to use them to sign or decrypt messages on the remote
machine, with a remote copy of gpg talking to the forwarded gpg-agent
just as it would talk to a non-forwarded copy on that machine. Is there
a way to do this, or can it be added?
I currently access my email via mutt over SSH, and therefore my private
key is currently stored on that remote server. I am fully aware how bad
of an idea this is, and so if what I ask above is possible, I plan to
move my private key to a secure offline location, put subkeys on a
smartcard that I take with me, and forward access to them over SSH to
the remote email server for routine use. Hopefully I'm not the only one
who wants this.
- Jimmy Kaplowitz

@_date: 2006-03-29 11:45:02
@_author: Jimmy Kaplowitz 
@_subject: Remote use of keys on smartcard via gnupg-agent? 
Hi Rapha?l,
Isn't that basically what gpg-agent does already for ssh authentication?
If I sit at machine A with a smartcard plugged in, connect to machine B
with an authentication key from the smartcard, and then try to connect
from machine B to machine C, that same authentication key on the
smartcard will be available despite it not being stored on either
machine B or machine C. The request will be tunneled by gpg-agent over
ssh, and the password prompt and cryptographic interaction with the key
will happen locally on machine A.
Am I misunderstanding how that works? If not, I'm just asking for the
same ability to forward access to keys over ssh but use them remotely
(such as on machine B or C) for any GPG signing and decryption, as well
as ssh authentication.  If I understand this right, the crypto happens
on the smartcard in any case.
Sometimes I use gpg remotely on the command line, and even within mutt,
there are many different commands it might want to issue to gpg. There
are also other programs I might want to start using, like a console
password manager, that would also want to access the gpg key. This seems
like a very clumsy way to do what gpg-agent already does very well on
the local machine for signing/decrypting/authenticating and on remote
machines for authenticating. I just want to equalize its capabilities on
remote machines with those on local machines, while keeping the
private-key crypto local to the smartcard as it already is with
Still, thanks for giving a first stab at a solution. Hopefully we'll be
able to figure out something, whether or not involving code changes.
- Jimmy Kaplowitz

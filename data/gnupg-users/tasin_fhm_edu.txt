
@_date: 2002-08-05 13:35:32
@_author: W. Tasin 
@_subject: Problems receiving keys with DSL connection 
first at all using:
actual gpg from CVS - STABLE-BRANCH-1-0 [but it occurs also in the previous versions]
under linux and Win32
gpg --recv-keys at home with DSL connection doesn't work very well. Accessing  to receive a key often (~70%) ends up with:
[fd 3]: read error: Connection reset by peer
Using url_get or any browser to get the keys *always* work fine! So I don't think that it is a problem with the connection.
I also built http-test to check out the problem, but I didn't get a result.
Here's what I found out, using the following patch to get more information:
diff -u -r1.48.2.20 iobuf.c
--- iobuf.c     22 Apr 2002 15:49:31 -0000      1.48.2.20
+++ iobuf.c     3 Aug 2002 20:30:08 -0000
 -416,11 +416,13                         int n;
             nbytes = 0;
             do {
                 n = read ( f, buf, size );
-            } while (n == -1 && errno == EINTR );
+               log_error("%s: check error: %s, n: %d, size: %d\n",
+                         a->fname, strerror(errno), n, size);
+            } while (n == -1 && errno == EINTR);
             if ( n == -1 ) { /* error */
                 if (errno != EPIPE) {
                     log_error("%s: read error: %s\n",
produces the following output:
tasin ./http-test Scheme: http
Host  : search.keyserver.net
Port  : 11371
Path  : pks/lookup
Query : op=get
Query : search=0x7961A645
http-test: [fd 3]: check error: Success, n: 1484, size: 8192
http-test: open_http_document succeeded; status=200
Public Key Server -- Get ``0x7961A645''
Public Key Server -- Get ``0x7961A645''
-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: OpenKeyServer v1.2
Comment: Extracted from http-test: [fd 3]: check error: Connection reset by peer, n: -1, size: 8192
http-test: [fd 3]: read error: Connection reset by peer
and of course some data is missing!
Since I haven't found any solution in gnupg-devel@ and gnupg-users@ here my question:
Does anybody know about this problem? Is there any solution?
PS: BTW building gnupg with automake 1.5 and autoconf 2.52 needs "scripts/depcomp" which isn't in the repository. Thx to "automake --add-missing" this isn't a big problem... but it should be included anyway IMHO.
PPS: Please cc me, I think the reason is obvious.
PPPS: Thanks for this product!


@_date: 2006-07-29 14:45:24
@_author: Werner Dittmann 
@_subject: Smartcard reader and SUSE 10.1 
after having tried all howTos now I'm sort of stuck. I have read
the e-mail thread of Tony Whitmore and Werner Koch - bur this also
does not contains a solution.
My errors are the same as Tony describes. Just to get some more
information I put a error printout in the gnupg-ccid script to get
the info which parameters are given to that script. I see the
following input:
add, /proc/bus/usb/001/010
this is an add operation to the device in /proc/....
The I tried to lookup the device doing a
ls /proc/bus/usb/001/010
gives me a "file or directory not found" err message.
Doing a
ls /dev/bus/usb/001/010
shows a file there. I can even read from that device (under
root doing a "cat /dev/bus/usb/001/010" gives some binary data.
My conclusion is that something is very wrong here :-)

@_date: 2006-07-30 00:58:15
@_author: Werner Dittmann 
@_subject: Smartcard reader and SUSE 10.1 
after having tried all howTos now I'm sort of stuck. I have read
the e-mail thread of Tony Whitmore and Werner Koch - bur this also
does not contains a solution.
My errors are the same as Tony describes. Just to get some more
information I put a error printout in the gnupg-ccid script to get
the info which parameters are given to that script. I see the
following input:
add, /proc/bus/usb/001/010
this is an add operation to the device in /proc/....
The I tried to lookup the device doing a
ls /proc/bus/usb/001/010
gives me a "file or directory not found" err message.
Doing a
ls /dev/bus/usb/001/010
shows a file there. I can even read from that device (under
root doing a "cat /dev/bus/usb/001/010" gives some binary data.
My conclusion is that something is very wrong here :-)

@_date: 2006-10-18 01:51:27
@_author: Werner Dittmann 
@_subject: Problem generating keys on FSFE card 
during generation of keys on the FSFE card I have some problems.
I'm using the how-to on the FSFE site to generate keys
(refer to the Using your Card with subkeys only (recommended) how-to).
The first time it worked as described. Because I wanted to change
some parameters (key validity dates) I tried it once again. During
this second time I got the following error message after some time
during key generation
gpg: Bitte warten, der Schl?ssel wird erzeugt ...
gpg: pcsc_transmit failed: not transacted (0x80100016)
gpg: apdu_send_simple(0) failed: card I/O error
gpg: Schl?sselerzeugung fehlgeschlagen
gpg: key generation failed: Allgemeiner Fehler
Schl?sselerzeugung fehlgeschlagen: Allgemeiner Fehler
I'm using gpg (GnuPG) 1.4.2.
What I can report on top of this: during the second time
the order of the PIN entry was revered. When doing it the
first time gpg asked for the ADMIN PIN first, then for
the normal PIN. During second (and all subsequent tries)
it first asked the normal PIN, then the ADMIN PIN.
Because I was curious I tried to generated some keys using
the --card-edit / admin/ generate sequence. Same error message
are quite some while.
I disconnected the card reader to force a reset, did  reboot
to clear any "hanging" software - and always "pkill" the pgp-agent.
Nothing helped.
Any ideas? Need to "reset" the card?

@_date: 2006-10-18 20:31:35
@_author: Werner Dittmann 
@_subject: Problem generating keys on FSFE card 
thanks for the hint. The gpg internal CCID reader works and
it seems it solved the problem.
Just as an info for the other fellow list members:
IMHO the gpg version included in SUSE 10.1 was not compiled
with libusb support thus it requires the pcscd and the
associated libraries. Therefore I downloaded the current version
(1.4.5) and did the usual tripple-play
./configure; make; sudo make install
Now I can access the smart card directly via CCID (after having
done the preliminary steps to install the card reader in udev)
BTW, the howto on the FSFE page
" states that
after successful creation of the sub-keys I shall register
the new encryption sub-key (stored on the card) with the
key servers. What about the signature sub-key? Or shall I
register the complete key, that is the keys created with
"addcardkey" and the ElGamal encryption key, with the key
server? Some advise appreciated.
Werner D.

@_date: 2007-10-21 14:47:16
@_author: Werner Dittmann 
@_subject: Question regarding libgcrypt and openSuse 10.3 
after updating to openSuse 10.3 I tried to rebuild a project
that uses libgcrypt as a shared library. Using 10.2 I had no
problems so far. When linking my own shared library I get the
following error message from libtool:
ZrtpPacketGoClear.lo ZrtpPacketClearAck.lo ZrtpPacketHelloAck.lo ZrtpPacketHello.lo ZrtpPacketError.lo ZrtpPacketErrorAck.lo ZrtpStateClass.lo ZrtpTextData.lo
Base32.lo ZrtpQueue.lo    -L/usr/local/lib -pthread -lccgnu2 -ldl -lrt   -L/usr/local/lib -pthread -lccrtp1 -lccgnu2 -ldl -lrt   -L/lib64 -lgcrypt -L/lib64
-lgpg-error -lpthread
grep: /usr/lib64/libgcrypt.la: No such file or directory
libtool: link: `/usr/lib64/libgcrypt.la' is not a valid libtool archive
seems that libgcrypt.la file is missing. During ./configure the
libgrypt was found. I've tried several versions during ./configure
but none helped to solve the problem.
Is this a problem of libgcrypt or a problem of the openSuse 10.3
package. Of course I installed the devel packages :-)
Werner D.

@_date: 2008-03-10 18:15:29
@_author: Werner Dittmann 
@_subject: OpenPGP card stopped working 
I've the same problem with an SCM 535. By running the pcscd in
forgroung with debug enabled I got the follwoing messages:
pcscdaemon.c:294:main() pcscd set to foreground with debug send to stderr
pcscdaemon.c:507:main() pcsc-lite 1.4.3 daemon ready.
hotplug_libusb.c:454:HPAddHotPluggable() Adding USB device: 001:012
readerfactory.c:1115:RFInitializeReader() Attempting startup of SCM SPR 532 (6020177D) 00 00 using
readerfactory.c:982:RFBindFunctions() Loading IFD Handler 3.0
ifdhandler.c:1239:init_driver() LogLevel: 0x0003
ifdhandler.c:1249:init_driver() DriverOptions: 0x0004
ifdhandler.c:77:IFDHCreateChannelByName() lun: 0, device: usb:04e6/e003:libusb:001:012
ccid_usb.c:229:OpenUSBByName() Manufacturer: Ludovic Rousseau (ludovic.rousseau at free.fr)
ccid_usb.c:239:OpenUSBByName() ProductString: Generic CCID driver v1.3.0
ccid_usb.c:245:OpenUSBByName() Copyright: This driver is protected by terms of the GNU Lesser General Public License version 2.1, or (at your option) any later
ccid_usb.c:393:OpenUSBByName() Found Vendor/Product: 04E6/E003 (SCM SPR 532)
ccid_usb.c:395:OpenUSBByName() Using USB bus/device: 001/012
ccid_usb.c:704:ccid_check_firmware() Firmware (4.15) is bogus! but you choosed to use it
ccid_usb.c:744:get_data_rates() IFD does not support GET_DATA_RATES request: Broken pipe
commands.c:754:CmdPowerOff() ICC Power Off failed: Broken pipe
commands.c:754:CmdPowerOff() ICC Power Off failed: Broken pipe
commands.c:754:CmdPowerOff() ICC Power Off failed: Broken pipe
commands.c:845:CmdGetSlotStatus() ICC Slot Status failed: Broken pipe
commands.c:845:CmdGetSlotStatus() ICC Slot Status failed: Broken pipe
commands.c:845:CmdGetSlotStatus() ICC Slot Status failed: Broken pipe
ifdhandler.c:115:IFDHCreateChannelByName() failed
readerfactory.c:1154:RFInitializeReader() Open Port 200000 Failed (usb:04e6/e003:libusb:001)
readerfactory.c:1027:RFUnloadReader() Unloading reader driver.
readerfactory.c:254:RFAddReader() SCM SPR 532 (6020177D) init failed.
pcscdaemon.c:586:signal_trap() Preparing for suicide
readerfactory.c:1381:RFCleanupReaders() entering cleaning function
pcscdaemon.c:532:at_exit() cleaning /var/run
Well, I thought my card reader is defect because of these broken pipe
messages. However, it was all of a sudden, but after some updates
(YOU on my opensuese 10.3). Maybe there was some new software released that
don't like the card readers anymore :-) . Does somebody have any clue
about this?
Sven Radde schrieb:

@_date: 2009-06-12 08:43:40
@_author: Werner Dittmann 
@_subject: Smartphone platforms andd gnupg 
Malte Gell schrieb:
Or use "twinkle" together with the ZRTP support and it works. Zfone has
(currently) some drawback with respect to firewall setup. The Java based
SIP Communicator that also support ZRTP is IMHO a bit too big for netbooks
albeit an Android port is in an early alpha state AFAIK.

@_date: 2009-11-29 11:13:01
@_author: Werner Dittmann 
@_subject: Some questions regarding libgcrypt-config 
to set-up configuration script I use the libgcrypt-config command
to determine parameters about libgcrypt. During tests I get a
confusing result :-) when checking available algorithms:
To check the availabe algorithms I do:
libgcrypt-config --algorithms
Symmetric cipher algorithms: arcfour blowfish cast5 des aes twofish serpent rfc2268 seed camellia
Public-key cipher algorithms: dsa elgamal rsa ecc
Message digest algorithms: crc md4 md5 rmd160 sha1 sha256 sha512 tiger whirlpool
My program uses SHA384 from libgcrypt but this algorithm is no listed.
Thus is it save to assume if SHA512 is avaliable then SHA384 is also
Werner D.


@_date: 2004-08-30 16:41:16
@_author: Karl and Tanya Pizzolatto 
@_subject: kmail doesn't recognize s/mime support in gpg 
I have read the mailing lists and readmes in the gnupg packages.
I have successfully built the following gnupg packages and installed them:
I am using kde-3.3.
kmail insists that gpgme was built without s/mime support.
gnupg-1.9.10 seems to have gpgsm built:
here's the line from the package listing:
gpgme seems to recognize this (here's the end of ./configure):
        GPGME v0.3.16 has been configured as follows:
        GnuPG version: min. 1.2.0
        GnuPG path:    /usr/bin/gpg
        GpgSM version: min. 0.9.2
        GpgSM path:    /usr/bin/gpgsm
And cryptplug seems to have gpg-smime, also (here's the package)
Is there something else I must install in order for gnupg to have s/mime What must I do to convince kmail that gnupg s/mime support is installed?
Thanks for your assistance!

@_date: 2004-09-02 13:22:33
@_author: Karl Pizzolatto 
@_subject: kmail doesn't recognize s/mime support in gpg 
============================== START ==============================
-----Original Message-----
Sent: Aug 30, 2004 1:42 PM
On Fri, 27 Aug 2004 19:27:03 -0400, Karl and Tanya Pizzolatto said:
Cryptplug is only used with old kmails; the latest kmail requires an
up-to-date gpgme (i.e. 0.9.0).  Don't know whey kmail does not check
for this.
  Werner
Ah.  I begin to see.  Your August 2 post recommending gpgme 0.3.16 only applies to kmail versions using cryptplug.
Do I correctly understand that kmail packaged with kde-3.3 does not require cryptplug?
I will remove cryptplug and build the latest gpgme, then report back to the list.
Thank you for the suggestion.

@_date: 2004-09-02 13:22:40
@_author: Karl and Tanya Pizzolatto 
@_subject: kmail doesn't recognize s/mime support in gpg 
I recompiled gpgme 0.9.0, but still no help.
When building gpgme, ./configure ends with:
config.status: executing depfiles commands
        GnuPG version: min. 1.2.2
        GpgSM version: min. 1.9.6
which sure sounds like it includes s/mime support...
build is fine, with no errors.
but kmail still says gpgme was compiled without s/mime support.
I'm sure it's something very obvious I'm doing wrong, but I just don't see And ideas?  How do I get kmail to see s/mime support in gpgme?

@_date: 2004-09-02 13:22:41
@_author: Karl Pizzolatto 
@_subject: kmail doesn't recognize s/mime support in gpg 
Didn't know you had to do that.
I will rebuild kdepim.
I thought it was a plug-in!
I knew it was something silly I was doing.
-----Original Message-----
Sent: Sep 1, 2004 4:05 AM
On Tue, 31 Aug 2004 20:31:08 -0400, Karl and Tanya Pizzolatto said:
You configured and build kmail (kdepim) after installing gpgme; right?
 Werner

@_date: 2004-09-06 12:00:40
@_author: Karl and Tanya Pizzolatto 
@_subject: kmail & gnupg working now 
Here's how I did it, with much help from all the group:
First, I built & installed gpg stuff.
It took several builds to figure it out, but I think this is the correct sequence (dependancies) if you're going to do it in one shot:
Next, I rebuilt kdepim-3.3.0
Next, I put this in my $HOME/.profile (per the gnupg readme)
if test -f $HOME/.gpg-agent-info && \
       kill -0 `cut -d: -f 2 $HOME/.gpg-agent-info` 2>/dev/null; then
         GPG_AGENT_INFO=`cat $HOME/.gpg-agent-info`
         export GPG_AGENT_INFO
    else
         eval `gpg-agent --daemon`
         echo $GPG_AGENT_INFO >$HOME/.gpg-agent-info
    fi
either logout & login again, or execute $HOME/.profile & make sure $GPG_AGENT_INFO contains the line pointing to /tmp/.... (where the socket S.gpg-agent is)
Everything now works just peachy!
I have slackware build scripts if you need them
Oh, yeah--
I suid root (chmod 4755) some gnupg executables.  This allows secure memory to be used.  Understand suid root before you use it, because it can be a security risk.  Probably make a "gnupg" group and chgrp those executables.  Then add the appropriate users to group "gnupg".
Have fun, and thanks to all the group for mucho help and excellent coding!!

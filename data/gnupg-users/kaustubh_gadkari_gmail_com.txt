
@_date: 2009-04-10 12:00:20
@_author: Kaustubh Gadkari 
@_subject: libgpgme error 
I've got an error with libgpgme that I haven't been able to figure
out. I wrote a simple program to check if libgpgme works, and I get an
error on line 136 of my code (attached to the email); the error code
returned is 2. My platform is Ubuntu 6.06 LTS i686, with libgpgme
v1.1.8 and libgpgerror v1.7. libgpgme is in /usr/local/lib and that
path is in LD_LIBRARY_PATH.  The program was compiled as follows:
g++ -L/usr/local/lib -I/usr/local/include simple-signer.cc
-lgpgme-pthread -lgpg-error -o simple-signer
Can anyone point me to figuring out what's wrong?

@_date: 2009-04-14 08:51:40
@_author: Kaustubh Gadkari 
@_subject: libgpgme error 
off_t is 4 bytes, although I am not sure how that could be a problem,
since the error I get does not occur on the line where off_t is used.
I've tried this program out on other Ubuntu, FreeBSD and MacOS X
boxes, and it runs correctly on all of them, if that helps narrow down
the problem.

@_date: 2009-04-23 16:52:46
@_author: Kaustubh Gadkari 
@_subject: Gpgme does not find key after setuid() 
I have code that sets uid after I start it as root. I have a user A
that owns a key, and I su - to root. Then I do:
./simple-signer  ''  A
In this case, gpgme does not find the key for user A.
However, if I run the following as user A:
./simple-signer  ''
gpgme finds the key for user A.
I am attaching my code, for reference. My question is : do I need to
do something that will enable gpgme to find the key when I run my code
as root?

@_date: 2009-05-20 09:13:50
@_author: kaustubh.gadkari@gmail.com 
@_subject: gpgme does not find key for user after setuid() 
I have a signer, that I run as root, but which drops privileges to a user 'A', using setuid(). I run the signer with the command below:
./simple-signer 'name of key' 'data to sign' A
When run like this, the signer does not find the key for user A. If I run the signer as user A:
./simple-signer 'name of key' 'data to sign'
gpgme finds the key.
Any pointers as to why this happens would be appreciated.


@_date: 2011-08-08 14:58:30
@_author: lists.gnupg-users@duinheks.nl 
@_subject: Problem with GPG 
I call PGP from Pine with a simple script:
      echo "xxxxxxxxxxxx" | /usr/bin/gpg --batch --sign --armour --clearsig --passphrase-fd 0 $1
   mv $1.asc $2
   Lately I noticed that it did not work, withour giving me any
   warning.
When I use it 'by hand' I see an error:
   echo "xxxxxxxxxxxxxxx" | /usr/bin/gpg --batch --sign
     --armour --clearsig --passphrase-fd test
   -----BEGIN PGP SIGNED MESSAGE-----
   Hash: SHA1
   gpg: pkglue.c:41: mpi_from_sexp: Assertion `data' failed.
   Aborted
What's happening and how can I repair it?
The file test contains nothing spectacular:
   /home/jbeekhui/.gnupg/pubring.gpg
   ---------------------------------
   pub  1024D/4F702D4A 2001-10-27 Johannes D.H. Beekhuizen
        Key fingerprint = C913 300F FEF9 92BE 8320  07B4 2DF2 2641 4F70 2D4A
   uid                            Johannes Beekhuizen
   sub  1024g/1074CC1A 2001-10-27
I'm running GNUpg 2.0.18 under SlackWare 13.0, built with the
   libgpg-error	1.9
   libgrypt	1.5.0
   libksba	1.2.0
   libassuan	2.0.2
Maby yhnals for any helpful help,
 	Hans Beekhuizen.
J.D.H. Beekhuizen
e-mail:	jdh.beekhuizen at duinheks.nl
tel:	+31(0)714015437
fax:	+31(0)714017198

@_date: 2011-08-09 13:34:40
@_author: lists.gnupg-users@duinheks.nl 
@_subject: Problem with GPG 
Hello Werner,
Yesterday, Aug 8, Werner Koch wrote to lists.gnupg-users at duinheks.nl about...:
WK > You should better use
WK >  gpg --batch --sign --armour --clearsig --passphrase-fd 0 --yes -o "$1".asc "$1"
I will do that in future.
WK > to avoid the mv.  Even better use gpg-agent.
That will take some thinking. Will look into it.
WK > >   gpg: pkglue.c:41: mpi_from_sexp: Assertion `data' failed.
WK > >   Aborted
WK > Please show us the output of WK >    /usr/bin/gpg --version Of course:
  $ gpg --version
  gpg (GnuPG) 2.0.18
  libgcrypt 1.5.0
  Copyright (C) 2011 Free Software Foundation, Inc.
  License GPLv3+: GNU GPL version 3 or later
  This is free software: you are free to change and redistribute it.
  There is NO WARRANTY, to the extent permitted by law.
  Home: ~/.gnupg
  Supported algorithms:
  Pubkey: RSA, ELG, DSA
  Cipher: 3DES, CAST5, BLOWFISH, AES, AES192, AES256, TWOFISH, CAMELLIA128,
          CAMELLIA192, CAMELLIA256
  Hash: MD5, SHA1, RIPEMD160, SHA256, SHA384, SHA512, SHA224
  Compression: Uncompressed, ZIP, ZLIB, BZIP2
J.D.H. Beekhuizen
e-mail:	jdh.beekhuizen at duinheks.nl
tel:	+31(0)714015437
fax:	+31(0)714017198

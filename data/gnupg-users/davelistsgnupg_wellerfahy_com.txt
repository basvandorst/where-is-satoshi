
@_date: 2003-08-22 06:06:02
@_author: David J. Weller-Fahy 
@_subject: Problem with key showing up as expired... 
Content-Disposition: inline
I noticed that a key from a debian list member was showing up as expired
when signed messages were validated.  Not sure how to figure out what's
wrong, so I figured I'd ask here.
List of keys for this person:
[dave gpg --list-key "Paul Johnson"
pub  1024D/D372F715 2002-05-14 Baloo Ursidae uid                            Paul Johnson (Main Key) sub  2048g/BC444D45 2002-05-14
pub  1024D/A5692B69 2003-03-11 Baloo Ursidae uid                            Paul Johnson (Replacement key 3/10/03) sub  1024g/A7B945C1 2003-03-11
pub  1024D/5A103307 2003-08-07 Paul Johnson (Mail and News) sub  2048g/52F76818 2003-08-07 [expires: 2009-03-08]
pub  1024D/8B362A2F 2003-08-06 Paul Johnson (Mail and News) sub  1024g/D64421EB 2003-08-06 [expires: 2009-03-09]
gpg verifying the message, and determining that the key is expired:
[dave gpg --verify expired.msg
gpg: Signature made Thu 07 Aug 2003 09:33:06 PM AKDT using DSA key ID 8B362A2F
gpg: Good signature from "Paul Johnson (Mail and News) "
gpg: Note: This key has expired!
Primary key fingerprint: 2C96 25E6 37D7 1E48 9253  FFED B029 6674 8B36 2A2F
Listing of the key ID that is listed when the messages was verified:
[dave gpg --fingerprint 8B362A2F
pub  1024D/8B362A2F 2003-08-06 Paul Johnson (Mail and News)      Key fingerprint = 2C96 25E6 37D7 1E48 9253  FFED B029 6674 8B36 2A2F
sub  1024g/D64421EB 2003-08-06 [expires: 2009-03-09]
gpg version information.
[dave gpg --version
gpg (GnuPG) 1.2.2
Copyright (C) 2003 Free Software Foundation, Inc.
This program comes with ABSOLUTELY NO WARRANTY.
This is free software, and you are welcome to redistribute it
under certain conditions. See the file COPYING for details.
Home: ~/.gnupg
Supported algorithms:
Pubkey: RSA, RSA-E, RSA-S, ELG-E, DSA, ELG
Cipher: 3DES, CAST5, BLOWFISH, AES, AES192, AES256, TWOFISH
Hash: MD5, SHA1, RIPEMD160, SHA256
Compression: Uncompressed, ZIP, ZLIB
The particular message (since it would be difficult to duplicate without
a signed message) is attached.
The machine is an Athlon T-Bird 1GHz running Debian Testing (updated a
few days ago).  Basically, I'm looking for ways to determine if this is
a GnuPG problem, or not.  If any information that was not included would
be useful, please let me know on the list as I've just subscribed.

@_date: 2003-08-23 03:08:01
@_author: David J. Weller-Fahy 
@_subject: Problem with key showing up as expired... 
* David Shaw  [2003-08-22 10:30]:
Ok, I think I've figured out where I'm confusing myself.  Correct me if
(as usual) I'm wrong, but in this particular case the main key was
created 2003-08-05 and expired on 2003-08-07.  However, there is a
subkey that was created on 2003-08-05 and expires on 2009-03-08?
I've just looked at the key, it looks that way to me, but I'd like
confirmation (for my sanity's sake, if nothing else).
Regards (and excuse the blundering about, I'm a bit new to gpg)...
  David

@_date: 2003-08-23 18:46:02
@_author: David J. Weller-Fahy 
@_subject: Problem with key showing up as expired... 
* Werner Koch  [2003-08-22 22:22]:
Understood.  Is it normal for the primary key to have expired, but the
sub key to still be valid?
    David

@_date: 2003-08-24 02:12:02
@_author: David J. Weller-Fahy 
@_subject: Problem with key showing up as expired... 
* Jason Harris  [2003-08-23 11:22]:
  ^^^^^^^
Learning all sorts of things this week.  Didn't know about that
particular tool.  Thanks.
I exported 0xB02966748B362A2F and ran pgpdump on the resulting file.
Unfortunately none of the parameters listed for pgpdump produced the
output I left above.  How did you get that output?
Ok, revoked I understand.  The quick expiration being he edited the key,
and told it to expire, right?
Hrm... so am I. :]  I'll keep learning, and not put any more keys onto
the servers until I feel comfortable with my level of knowledge.
Especially as you cannot remove any mistakes.
Just to make sure that I have this straight:
    The key that he's signing with is not yet expired (because of the
    subkey which hasn't expired yet), but will be reported as such
    because the primary key is expired.
I get the impression (from your comments) that public keys are generally
not be this convoluted, right?
  David

@_date: 2003-08-24 02:16:02
@_author: David J. Weller-Fahy 
@_subject: Problem with key showing up as expired... 
* David Shaw  [2003-08-23 15:06]:
Ok... Just seemed a bit odd, because at first (and second) impressions
it seemed that the key was expired, yet he was using it to sign mail.
Well, live and learn. ;]
  David

@_date: 2003-08-24 16:53:01
@_author: David J. Weller-Fahy 
@_subject: Problem with key showing up as expired... 
* David Shaw  [2003-08-23 16:41]:
Good to know.
Well, I did.  The owner told me which keyserver he uploads to, and I
double checked my copy against that server.  It's up to date.  However,
the message that he sent with that information was signed with key
0x5A103307, not 0x8B362A2F.
I'll bet that signing with the old key was not intentional.
Thanks for all the info...
  David

@_date: 2003-08-27 03:43:01
@_author: David J. Weller-Fahy 
@_subject: Problem with key showing up as expired... 
* Jason Harris  [2003-08-25 11:22]:
I deleted 0xB02966748B362A2F and set 'subkeys.pgp.net' as my primary
auto-retrieve server, then I loaded up the message again.  After
exporting the key and using pgpdump I get the above output.
Thank goodness, now I can go have some Rice Krispie treats instead of
sitting at the computer. ;]
Thanks for the explanations,

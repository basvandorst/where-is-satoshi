
@_date: 2015-01-03 20:30:53
@_author: Ken Kundert 
@_subject: preventing gpg-agent from storing a symmetric encryption key 
Is there a way of preventing the agent from storing a symmetric encryption I am writing a password generation program. The main password database will be encrypted with my private key and the passphrase to that key will be kept in gpg-agent so I don't have to retype this long passphrase every time I need one of my passwords.  But I worry that someone might gain access to my console while the agent has my passphrase, so would like to encrypt my passwords a second time with short password. The idea that most of the protection comes from the private key, but once that is unlocked anyone that gained access to the console would still have to know the short secondary password. Unfortunately, this plan is defeated if gpg-agent also saves the secondary password. So, I am looking for a command line option that I can use when doing the second level decrypt to prevent those short secondary passwords from being saved in the agent.

@_date: 2015-01-05 01:51:55
@_author: Ken Kundert 
@_subject: preventing gpg-agent from storing a symmetric encryption key 
Hi Doug.
    I am aware of the ability to set inactivity timeouts and to clear the entire agent.  And I still believe I can use this feature.
What I have noticed about myself is that I will walk away from my keyboard without locking the screen. I just forget to do it. I have been trying to change this behavior for the last few years, and yet I still do it. Now, the screen locks itself after 10 to 15 minutes, so that is my window of vulnerability.  Unless I set the gpg-agent inactivity time-out to no more than a minute or two, it is not going to help this situation much.  However, I cannot bear to set the time-out that short because it would effectively be like turning off the agent altogether. That is problematic for me because I use long passphrases.
So my thought is to double encrypt my secrets, once with my private key that is protected with a long XKCD style passphrase and once with a symmetric cipher with a relatively short password, and keep the passphrase in gpg-agent but not the password. Use of the private key with the long passphrase protects me in case someone steals both the private key and the cipertext and mounts an automated attack.  The short passwords are there to protect me if someone sits down at my keyboard while I am at lunch.  Here the chance of an automated attack is much lower, and so a short easy to type password should be sufficient in most Anyway, that is what I would like to do. I think I can do it with the original GPG, but I was hoping to use GPG2.
As an aside, after switching to longer XKCD style passphrase a few years ago I came to realize that most security programs inadvertently discourage the use of long passphrases. Probably 99% of the time that I type a passphrase I am alone, so obscuring the passphrase provides little value. But the longer passphrase you have the more chance you are going to have a typo, and with the passphrase obscured you cannot see it or correct it. Thus in my experience, obscuring the passphrase largely limits me to using about 4 words, anything longer than that and I find myself in seeming endless passphrase entry loops.  Pinentry suffers from this problem. I would like to suggest that a button be added to pinentry that un-obscures the passphrase.
So those are my two suggestions:
1. reactivate the --no-use-agent command line option in gpg2
2. add an 'unobscure passphrase' button to pinentry.
I love gpg, and I use it heavily. Thank you to all that contribute to it.

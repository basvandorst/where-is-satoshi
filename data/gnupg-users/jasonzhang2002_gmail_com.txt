
@_date: 2015-04-12 19:31:12
@_author: jason zhang 
@_subject: can not decrypt file suddenly 
I have a encrypted file in Fedora 15 system.
I have decrypted the file repeatedly many times for two years.
Today, I could not decrypt it suddenly.
Here is what a decrypt session looks like
I reboot my machine several times. I updated gpg from 1.4.12 to 1.4.19. But
I still cann't decrypt my file.
Help is really appreciated.
This is an important file. That is why I encrypt it.

@_date: 2015-04-13 15:27:19
@_author: jason zhang 
@_subject: can not decrypt file suddenly 
Any clue? Where should I start to investigate?
I checked another encrypted file. I cloud not decrypt it, either.
But I can encrypt /decrypt new file successfully.
I remembered my laptop was shut down abruptly due to out of power while I
edit the file in email. Could this cause the problem?
On Sun, Apr 12, 2015 at 7:31 PM, jason zhang

@_date: 2015-04-13 20:07:09
@_author: jason zhang 
@_subject: can not decrypt file suddenly 
Hi NIIBE
Thank you very much for the help.
Yes, it asked me the passphrase just after "gpg: CAST5 encrypted data"
line, and I gave the passphrase. The passphrase is definitely right since I
used it very 2 or 3 days.
Here is a whole debug session:
gpg  -v --debug-all --no-use-agent j.gpg
gpg: NOTE: no default option file `/home/jason/.gnupg/gpg.conf'
gpg: DBG: fd_cache_open (j.gpg) not cached
gpg: DBG: iobuf-1.0: open `j.gpg' fd=3
gpg: DBG: iobuf-1.0: underflow: req=8192
gpg: DBG: iobuf-1.0: underflow: got=6705 rc=0
gpg: DBG: parse_packet(iob=1): type=3 length=13 (parse.mainproc.c.1261)
gpg: CAST5 encrypted data :======================ASK passphrase here
gpg: DBG: free_packet() type=3
gpg: DBG: iobuf-1.1: push `block_filter'
gpg: DBG: iobuf chain: 1.1 `block_filter' filter_eof=0 start=0 len=0
gpg: DBG: iobuf chain: 1.0 `file_filter(fd)' filter_eof=0 start=17 len=6705
gpg: DBG: init block_filter 0x8a398d0
gpg: DBG: parse_packet(iob=1): type=9 length=0 (new_ctb)
gpg: encrypted with 1 passphrase
gpg: DBG: iobuf-1.1: underflow: req=8192
gpg: DBG: iobuf-1.1: underflow: got=6685 rc=0
gpg: decryption failed: bad key
gpg: DBG: free_packet() type=9
gpg: DBG: iobuf-1.1: underflow: req=8192
gpg: DBG: iobuf-1.1: underflow: got=0 rc=-1
gpg: DBG: free block_filter 0x8a398d0
gpg: DBG: iobuf-1.1: pop in underflow (!len)
gpg: DBG: iobuf chain: 1.0 `file_filter(fd)' filter_eof=0 start=6705
gpg: DBG: iobuf-1.0: underflow: eof
gpg: DBG: iobuf-1.0: underflow: req=8192
gpg: DBG: iobuf-1.0: underflow: got=0 rc=-1
gpg: DBG: j.gpg: close fd 3
gpg: DBG: fd_cache_close (j.gpg) new slot created
gpg: DBG: iobuf-1.0: underflow: eof
gpg: DBG: iobuf-1.0: underflow: eof (due to filter eof)
gpg: DBG: iobuf-1.0: close `?'
random usage: poolsize=600 mixed=0 polls=0/2 added=10/176
              outmix=0 getlvl1=0/0 getlvl2=0/0
secmem usage: 1472/2240 bytes in 3/6 blocks of pool 2240/32768
[jason at f15 ~]$ echo $GPG_AGENT_INFO
================EMPTY GPG_AGENT_INFO. To avoid possible issue from genome,
I login in as ssh.
my gpg version is 1.4.19
Can I move the encrypted file to another machine? Since I use symmetric
encryption, it should not depend on the machine it is on. Right?

@_date: 2015-04-13 20:56:25
@_author: jason zhang 
@_subject: can not decrypt file suddenly 
Hi Doug
Yes, the problem started after the unscheduled shutdown. Unfortunately, I
don't have an archived version. The problem is that another encrypted,
which I have not touched for sometime, cann't be opened either.

@_date: 2015-04-13 21:12:18
@_author: jason zhang 
@_subject: can not decrypt file suddenly 
Here are the output from "file" and "gpg --list-packets"
[jason at f15 ~]$ file .jsbk.gpg
.jsbk.gpg: DOS executable (COM)
[jason at f15 ~]$ gpg --list-packets .jsbk.gpg
:symkey enc packet: version 4, cipher 3, s2k 3, hash 2
    salt 51c310499a629643, count 65536 (96)
gpg: CAST5 encrypted data
:encrypted data packet:
    length: unknown
gpg: encrypted with 1 passphrase
gpg: decryption failed: bad key
[jason at f15 ~]$ file .pingpin.gpg
.pingpin.gpg: DOS executable (COM)
[jason at f15 ~]$ gpg --list-packets .pingpin.gpg
:symkey enc packet: version 4, cipher 3, s2k 3, hash 2
    salt a31c35cff9314421, count 65536 (96)
gpg: CAST5 encrypted data
:encrypted data packet:
    length: unknown
gpg: encrypted with 1 passphrase
gpg: decryption failed: bad key

@_date: 2015-04-14 07:53:37
@_author: jason zhang 
@_subject: can not decrypt file suddenly 
Hi NIIBE
what else I can try?
Can I feed a guessed length for Type=9 repeatedly from command line?

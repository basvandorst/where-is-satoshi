
@_date: 2005-04-01 09:29:05
@_author: Carlo Luciano Bianco 
@_subject: The PATH problem (was Re: Libcurl) 
Il /31 mar 2005/, *David Shaw* ha scritto:
Not at all, David. I am always glad to be helpful.
Excellent. Thanks for fixing! ;-)

@_date: 2005-01-18 13:49:16
@_author: Carlo Luciano Bianco 
@_subject: Using GnuPG to sign web pages. 
Dear all,
We have put online a brief tutorial on a possible use of GnuPG (or any other OpenPGP-compliant software) to sign web pages. It is at:
Suggestions and comments are welcome!

@_date: 2005-01-18 13:52:40
@_author: Carlo Luciano Bianco 
@_subject: GPG on USB drive 
Il /12 gen 2005/, *Werner Koch* ha scritto:
Are you sure? I think it can be useful, anyway...
And what about distributing a .7z ( file instead of a .zip one? The LZMA 7z archive with all 1.4.0a distribution *and* iconv.dll is 1.2MB, i.e. much less than the zip archive without iconv.dll. And the 1.4.0a distribution alone is compressed in 765KB. The sfx stub is less that 70KB.

@_date: 2005-01-18 23:10:11
@_author: Carlo Luciano Bianco 
@_subject: Using GnuPG to sign web pages. 
Il /18 gen 2005/, *Neil Williams* ha scritto:
First of all, thank you for your feedback!
I am just the English translator of the page (originally in Italian), but I am actively discussing this matter with the author (i.e. TJL73).
IMVHO the most "clean" solution at this stage is the first one, i.e. writing the checksums in a table in the "comment" section together with the OpenPGP signature (I think I will do this in my web pages, for the moment). But inserting them in the "img" tag makes easier to write a plug-in to check them automatically in the browser window, that's why TJL73 added that last Both "title" and "id" have already their intended meaning, but there is a thread on the it.comp.sicurezza.crittografia newsgroup (an Italian newsgroup about encryption) where we are discussing, also with TJL73, possible solutions using XHTML instead of HTML4.
Maybe, or maybe a Firefox extension... ;-)

@_date: 2005-03-18 13:45:28
@_author: Carlo Luciano Bianco 
@_subject: [Announce] GnuPG 1.4.1 released 
Il /15 mar 2005/, *Werner Koch* ha scritto:
Thanks, Werner. It builds fine with MinGW/MSYS, even using the new libcurl I have just updated my page accordingly.

@_date: 2005-03-18 18:07:44
@_author: Carlo Luciano Bianco 
@_subject: [Announce] GnuPG 1.4.1 released 
Il /18 mar 2005/, *David Shaw* ha scritto:
Yes, David, with libcurl as well. I used the ready-to-run libcurl mingw library described on my page. The resulting gpgkeys_curl.exe depends on libcurl.dll, so I think it is actually using it...
I seems so, but be careful. When I say "it build fine" I mean exactly this and not more than this: the exe files are produced by GCC without errors. I have not yet tested them extensively.
Beside doing a "make check" (25 passed over 25), I have only tested GnuPG 1.4.1 with one day of regular use without finding any problem. However, there are many features I had not tested yet *including* keyserver support, i.e. *including* curl.
So, I cannot be sure that the gpgkeys_curl.exe I have compiled is actually working right. I saw your post on gpg-devel about testing curl code and I hope to have time to make some tests in the week-end...

@_date: 2005-03-20 16:17:15
@_author: Carlo Luciano Bianco 
@_subject: Libcurl (was Re: [Announce] GnuPG 1.4.1 released) 
Il /18 mar 2005/, *David Shaw* ha scritto:
Yes, it builds, but there is a small building problem I discovered in the
tests I did yesterday. The libcurl mingw version I used supports SSL but
has not a "config" script, so GnuPG's "configure" does not enable HTTPS
and FTPS. I fixed this by manually editing "config.h" after "configure" and before
"make", uncommenting the relevant definitions. Of course, this is not a GnuPG problem, but a mingw-libcurl one.
Thank you, David. Here is my report:
1) It seems that, when running a subprocess like a gpgkeys_*.exe, gpg.exe
does not pass it the environment variables. Most notably, it does not pass
the system %PATH%. Both gpg.exe and gpgkeys_*.exe depends on many dlls
(zlib, bzip2, libiconv, libintl, ecc.) which I keep in a separate folder
under "Common files" because they are used also by many other programs I
have (e.g. GIMP, gnuplot, ecc.). Of course, this folder is in the system
%PATH% and gpg.exe has no problems in finding the dlls he needs. But if I
try to retrieve a key from a keyserver (no matter what protocol), gpg.exe
tries to run the relevant gpgkeys_*.exe which returns an error saying that
some dlls are missing. If I copy the dlls in the gnupg folder everithing
works. 2) gpgkeys_hkp.exe, gpgkeys_finger.exe and gpgkeys_ldap.exe seem to work
OK (provided the dlls are found), but gpgkeys_curl.exe does not run at
all. As soon as it is started by gpg.exe, it crashes (and DrWatson comes
out) even before trying to connect to the net (my firewall does not see
any connection). I tried many times, but always with the same result: a
crash. I have checked the temporary file gpg.exe uses to pass commands to
gpgkeys_curl.exe, but it seems OK to me... Are there any other test I can do to understand better the problem? Does
anybody else have these same problems?

@_date: 2005-03-22 00:19:33
@_author: Carlo Luciano Bianco 
@_subject: Libcurl (was Re: [Announce] GnuPG 1.4.1 released) 
Il /21 mar 2005/, *David Shaw* ha scritto:
No, David. The only configure options I used are "--prefix" and "--with-
libcurl". The only one difference between the configure commmand line reported on my web page and the one I actually used is in the CFLAGS part, where I used, e.g., "-march=athlon-xp" and some other optimizations. And exec-path is not in my gpg.conf (I checked, to be double sure).
I have only modified, like reported on my web page, the lines in the "configure" script where the directories are defined (lines 23881-23885):
 G10_LOCALEDIR     "c:\\\\programmi\\\\gnupg\\\\locale"
 GNUPG_LIBDIR      "c:\\\\programmi\\\\gnupg"
 GNUPG_LIBEXECDIR  "c:\\\\programmi\\\\gnupg"
 GNUPG_DATADIR     "c:\\\\programmi\\\\gnupg"
 GNUPG_HOMEDIR     "h:\\\\gnupg"
Yes, I can. I think it is better I rebuild it with "-g" and without optimizations, right? I'll do it tomorrow as soon as I can.

@_date: 2005-03-22 10:13:11
@_author: Carlo Luciano Bianco 
@_subject: Libcurl (was Re: [Announce] GnuPG 1.4.1 released) 
Il /22 mar 2005/, *David Shaw* ha scritto:
This can be a problem, yes, but it would affect only the last two folders of the path (the ones with ":" instead of ";"). Are you sure the gnupg path is not added as the first one followed by ":"?
Can the presence of "spaces" in the path (e.g. "C:\Programmi\File comuni") be a problem, also?
Well... I agree, but to experience this problem you need two very uncommon 1) You must have dll-linked gnupg executables, which is very uncommon (the official MinGW build is statically linked).
2) You must have the dlls not in the gnupg folder but in a different one.
Thanks! I'll try when I rebuild with "-g" and I'll let you know.
OK, I hope to have some time this afternoon...

@_date: 2005-03-22 10:42:28
@_author: Carlo Luciano Bianco 
@_subject: Libcurl (was Re: [Announce] GnuPG 1.4.1 released) 
Il /22 mar 2005/, *Carlo Luciano Bianco* ha scritto:
I did much earlier than expected... ;-)
I tried your patch, but the problem is exactly the same.
Well... I never used gdb before, I hope I did not too many mistakes...
Here is what I did:

@_date: 2005-03-22 13:11:41
@_author: Carlo Luciano Bianco 
@_subject: Libcurl (was Re: [Announce] GnuPG 1.4.1 released) 
Il /22 mar 2005/, *Neil Williams* ha scritto:
Thanks, Nail. As I told, I am quite new to this sort of things. Here is the

@_date: 2005-03-22 13:19:26
@_author: Carlo Luciano Bianco 
@_subject: Libcurl (was Re: [Announce] GnuPG 1.4.1 released) 
Il /22 mar 2005/, *Carlo Luciano Bianco* ha scritto:
I mean "Neil", of course, I am really sorry about that...

@_date: 2005-03-22 18:48:58
@_author: Carlo Luciano Bianco 
@_subject: Libcurl (was Re: [Announce] GnuPG 1.4.1 released) 
Il /22 mar 2005/, *David Shaw* ha scritto:
Well, I did the following test:
If I issue:
gpg --keyserver hkp://whatever --recv-keys 99999999
then gpgkeys_hkp.exe does not start due to a missing dll.
But, if I issue:
gpg --keyserver hkp://whatever --exec-path "%PATH%" --recv-keys 99999999
then all works OK. So, it seems the problem is in the path created by exec.c... Maybe due to the blank spaces in the folder names...

@_date: 2005-03-22 19:00:14
@_author: Carlo Luciano Bianco 
@_subject: Libcurl (was Re: [Announce] GnuPG 1.4.1 released) 
Il /22 mar 2005/, *David Shaw* ha scritto:
The last one available for MinGW: 7.13.0
I did a quite different test. I downloaded the pre-compiled libcurl binary
for MSVC, which is the last version (7.13.1). Then I simply replaced the
libcurl.dll with this new version and it works perfectly! So, it was a problem of the MinGW build of the dll, maybe because it is an
old version. The gpgkeys_curl.exe so obtained has been compiled with the *.h files of
mingw-libcurl 7.13.0 and linked against the .a library of mingw-libcurl
7.13.0, but uses MSVC version 7.13.1 of "libcurl.dll" and works perfectly. I will update as soon as possible my page about this problem.
Is this of libcurl 7.13.0 a known problem? Or maybe is just a problem of that particular build? If you think it is important, I can try to rebuild with MinGW both libcurl 7.13.0 and libcurl 7.13.1 to debug them...

@_date: 2005-03-22 23:35:28
@_author: Carlo Luciano Bianco 
@_subject: Libcurl (was Re: [Announce] GnuPG 1.4.1 released) 
Il /22 mar 2005/, *David Shaw* ha scritto:
Well, I am very pleased too! ;-)
So, my report about the new libcurl code is very positive, at the end... ;-)
Thank you very much, David, for your help. And thanks also to Neil (this time without typos...). I have already updated my page to deal with this libcurl By the way, what do you think about the path problem? I tried to add "exec-
path "%PATH%"" in gpg.conf, but it does not work. It needs to be used from the command line. I will make some other tests and I will let you know...
Thanks again!
Carlo Luciano

@_date: 2005-03-23 10:02:23
@_author: Carlo Luciano Bianco 
@_subject: Libcurl (was Re: [Announce] GnuPG 1.4.1 released) 
Il /22 mar 2005/, *David Shaw* ha scritto:
Sure. Without exec-path:

@_date: 2005-03-23 18:44:54
@_author: Carlo Luciano Bianco 
@_subject: Libcurl (was Re: [Announce] GnuPG 1.4.1 released) 
Il /23 mar 2005/, *David Shaw* ha scritto:
Well... Consider that 99% of Win32 GnuPG users has a statically linked executable and that, moreover, 99% of the remaining ones keeps the dlls in GnuPG folder. So I was the only one who could have this problem... ;-)
OK, I agree with you on this. Just looking the entire PATH for a keyserver helper is far too risky...
Maybe it is possible to run the keyserver helpers not just by their name, but by their *entire* name: instead of running "gpgkeys_xxx.exe", gpg.exe should run "c:\programmi\gnupg\gpgkeys_xxx.exe". In other words, instead of putting its own folder in the PATH, gpg.exe should put its own folder in front of the name of the keyserver helper to be executed.
In this way you should be pretty sure that you execute the right file, and you can keep the system PATH as it is. But maybe it is not so simple...
In any case, thank you again for all your help!
Carlo Luciano

@_date: 2005-03-26 01:47:21
@_author: Carlo Luciano Bianco 
@_subject: The PATH problem (was Re: Libcurl) 
Il /25 mar 2005/, *David Shaw* ha scritto:
Yes, I see...
Of course! I have tried and it seems it is working OK!
Some more details:

@_date: 2006-09-07 00:18:31
@_author: Carlo Luciano Bianco 
@_subject: Compiling GnuPG 1.4.5 for Windows on Windows 
Il /06 set 2006/, *John Clizbe* ha scritto:
I absolutely agree on this point.
Note: mingw-runtime-3.10 will not work (i.e. GnuPG will not build at all), unless you apply a small patch to random.c. You have to rename "times.h" into "time.h" in line 49 (see point 4.3 of my tutorial and also the message by Joe Vender on gnupg-devel mailing list:
If you do not want to patch the source files, you must use MinGW Runtime 3.9... :-/
... until a couple of "ifdef"s will be added to random.c in the official source tarball. ;-)
It is better to avoid readline, because it may give problems. That's why I took it away completely from the new versions of my tutorial.
By the way, not all libraries are required. If you are performing a "minimal" build (like in this case) and you are interested to English language only, only bzip2 is really required.
I have built openssl myself too, and I just realized (thanks to Joe Vender for pointing this out to me) that things goes a bit different for those who downloaded the pre-built openssl libraries... :-/
I will have to heavily rewrite the curl-relevant part of the tutorial (i.e. point 3.4). Anyway, I hope libcurl is still optional for keyserver helpers, isn't it?
Do you mean in the "Minimal" build or in the "Complete" one?
Which is actually the only one "extra" step in the minimal build... ;-)
... and which I hope someday will be included in the official tarball, allowing me to remove 2 images from my tutorial! ;-))

@_date: 2006-09-07 13:29:58
@_author: Carlo Luciano Bianco 
@_subject: Compiling GnuPG 1.4.5 for Windows on Windows 
Il /07 set 2006/, *Werner Koch* ha scritto:
I understand your point of view, Werner.

@_date: 2006-09-07 13:33:29
@_author: Carlo Luciano Bianco 
@_subject: Compiling GnuPG 1.4.5 for Windows on Windows 
Il /07 set 2006/, *Mica Mijatovic* ha scritto:
Very interesting page, thanks for the link!
By the way, I have to point out a small mistake in the credits in
the "PGP signed HTML" page
... ;-) I am not the author of the pages stored at
, nor of the "OpenPGP
Digitally Signed HTML" tutorial. The author is TJL73, which is a
different person from myself and which deserves all the credits for
the "OpenPGP Digitally Signed HTML" tutorial. TJL73 wrote his
tutorial in Italian and asked me to translate it in English,
and so I am just the (poor!) English translator of the tutorial...

@_date: 2006-09-14 01:19:05
@_author: Carlo Luciano Bianco 
@_subject: Compiling GnuPG 1.4.5 for Windows on Windows 
Sorry for my delay in the reply, but I am currently at a meeting
outside Italy and my internet connection capabilities are a bit less
than usual... Il /07 set 2006/, *Mica Mijatovic* ha scritto:
Well... Actually I do not need an Italian translator... At least,
not yet! ;-) Yes, in that case, instead, I deserve the credits for the tutorial
itself, beside being also the official English translator... ;-) After many years discussing together everyday on
it.comp.sicurezza.pgp and it.comp.sicurezza.crittografia usenet
groups, maybe we started to write in a similar way... ;-) I agree, but here we are dealing with building on a
not-officially-supported platform, that's why I emphsized (and is
also clearly written in my tutorial) that the procedure is not for
every user...

@_date: 2006-09-27 01:31:01
@_author: Carlo Luciano Bianco 
@_subject: DSA2 
Il /24 set 2006/, *Qed* ha scritto:
OK, I agree. This is a real advantage which I did not consider,
thanks for the clarification.

@_date: 2006-09-27 01:38:26
@_author: Carlo Luciano Bianco 
@_subject: DSA2 
Il /25 set 2006/, *John Clizbe* ha scritto:
Thank you very much for the links, they are very interesting!
Well... Does this mean that we can link GnuPG to OpenSSL library for
ECC subroutines and stay safe from patent problems? If so, this can
be a temporary solution (of course, if OpenSSL license is compatible
with GnuPG one)...

@_date: 2006-09-28 00:58:22
@_author: Carlo Luciano Bianco 
@_subject: DSA2 
Il /27 set 2006/, *David Shaw* ha scritto:
I was afraid of something like that... :-/
Do you mean I would better change my tutorial to use only libcurl
with no SSL support? I see...
But ECC could be included in the new RFC2440-bis draft currently
being written, that's why I have asked about the status... Of course...
I see, this is the real problem... :-/

@_date: 2008-09-09 11:51:35
@_author: Carlo Luciano Bianco 
@_subject: Tutorial on Secure Key Generation with GnuPG 
Dear all,
We have put online a brief tutorial about how to generate and manage
with GnuPG a keypair that can be stored in a "quite" secure way. The
tutorial can be found at:
Suggestions and comments are welcome!
Best regards,
Carlo Luciano Bianco

@_date: 2008-09-09 11:50:21
@_author: Carlo Luciano Bianco 
@_subject: Using GnuPG to sign web pages and Javascripts 
Dear all,
We have put online an update to the tutorial about using GnuPG (or
any other OpenPGP-compliant software) to sign web pages. This update
deals with signing Javascript codes. The tutorial is available at:
Suggestions and comments are welcome!
Best regards,
Carlo Luciano Bianco

@_date: 2009-09-05 00:04:09
@_author: Carlo Luciano Bianco 
@_subject: 1.4.10 & BZIP2 in Windows Build 
Il /04 set 2009/, *John W. Moore III* ha scritto:
There is another possibility, John... I have just updated my tutorial for the new versions of MinGW, MSYS and GCC and, of course, for GnuPG 1.4.10a including bzip2 support... ;-)
As usual, comments, suggestions, clarifications, insults, and so on are welcome! ;-)

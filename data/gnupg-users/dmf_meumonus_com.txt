
@_date: 2011-04-13 20:20:34
@_author: dmf@meumonus.com 
@_subject: GnuPG failing to decrypt all files 
I have a curious problem. I just installed GPG4win and I'm having issues with my tests. I randomly selected three files from my desktop to encrypt. Two were clear text and one was an xlsx. I encrypted them in a folder with no errors. It did package them in a gzipped tarball I believe. When I decrypted, Kleopatra insisted there were no errors. However when I went to check only two of the files were present (one ascii and the xslx). The one that didn't decrypt was a bat file, so I thought it may exclude those from the tar so I changed it to a .txt extension to no avail.after testing for a bit I thought it was a fluke and moved on.
I then tried setting up GPG4win on a user's computer and encrypted 101 files. Mostly Excel and Word binaries (before they went XML). The same thing happened. 101 files selected for Encryption, 100 files decrypted. We saved a copy (only modifying the name) of the Excel file and out of 102 files, only 101 decrypted! And the copy encrypted/decrypted fine. The original file was still missing.
I went back to check my first error on my computer with verbose logging, and I clipped what I thought was relevant below (input/out errors) from the gpgagent daemon. Am I doing something wrong? Can I check to see what was encrypted file-by-file to ensure all files are archiving properly?
I'm hoping to replace a securitybox install with this. Any help would be appreciated.
gpg-agent[5844]: chan_000000F0 <- GETINFO cmd_has_option GET_PASSPHRASE repeat
gpg-agent[5844]: chan_000000F0 -> OK
gpg-agent[5844]: chan_000000F0 <- GET_PASSPHRASE --data --repeat=0 -- 24ECA7F198F175DFFAC198448D37D03FD154F634 X X Please+enter+the+passphrase+to+unlock+the+secret+key+for+the+OpenPGP+certificate:%0A%22user+(test)+%22%0A2048-bit+RSA+key,+ID+D154F634,%0Acreated+2011-03-31.%0A
2011-04-13 11:51:58 gpg-agent[5844] DBG: agent_get_cache `24ECA7F198F175DFFAC198448D37D03FD154F634'...
2011-04-13 11:51:58 gpg-agent[5844] DBG: ... miss
2011-04-13 11:51:58 gpg-agent[5844] starting a new PIN Entry
gpg-agent[5844]: chan_000000E8 <- OK Your orders please
2011-04-13 11:51:58 gpg-agent[5844] DBG: connection to PIN entry established
gpg-agent[5844]: chan_000000E8 -> OPTION grab
gpg-agent[5844]: chan_000000E8 <- OK
gpg-agent[5844]: chan_000000E8 -> OPTION ttyname=/dev/tty
gpg-agent[5844]: chan_000000E8 <- OK
gpg-agent[5844]: chan_000000E8 -> OPTION default-ok=_OK
gpg-agent[5844]: chan_000000E8 <- OK
gpg-agent[5844]: chan_000000E8 -> OPTION default-cancel=_Cancel
gpg-agent[5844]: chan_000000E8 <- OK
gpg-agent[5844]: chan_000000E8 -> OPTION default-prompt=PIN:
gpg-agent[5844]: chan_000000E8 <- OK
gpg-agent[5844]: chan_000000E8 -> OPTION touch-file=C:\Documents and Settings\user\Application Data\gnupg\S.gpg-agent
gpg-agent[5844]: chan_000000E8 <- OK
gpg-agent[5844]: chan_000000E8 -> GETINFO pid
gpg-agent[5844]: chan_000000E8 <- D 3856
gpg-agent[5844]: chan_000000E8 <- OK
gpg-agent[5844]: chan_000000F0 -> INQUIRE PINENTRY_LAUNCHED 3856
gpg-agent[5844]: chan_000000F0 <- END
gpg-agent[5844]: chan_000000E8 -> SETDESC Please enter the passphrase to unlock the secret key for the OpenPGP certificate:%0A%22user (test) %22%0A2048-bit RSA key, ID D154F634,%0Acreated 2011-03-31.%0A
gpg-agent[5844]: chan_000000E8 <- OK
gpg-agent[5844]: chan_000000E8 -> SETPROMPT Passphrase
gpg-agent[5844]: chan_000000E8 <- OK
gpg-agent[5844]: chan_000000E8 -> [[Confidential data not shown]]
2011-04-13 11:51:58 gpg-agent[5844] handler 0x98c for fd 220 started
gpg-agent[5844]: chan_000000DC -> OK Pleased to meet you
gpg-agent[5844]: chan_000000DC <- OPTION ttyname=/dev/tty
gpg-agent[5844]: chan_000000DC -> OK
gpg-agent[5844]: chan_000000DC <- OPTION allow-pinentry-notify
gpg-agent[5844]: chan_000000DC -> OK
gpg-agent[5844]: chan_000000DC <- SCD SERIALNO
2011-04-13 11:51:58 gpg-agent[5844] new connection to SCdaemon established (reusing)
gpg-agent[5844]: chan_000000EC -> SERIALNO
gpg-agent[5844]: chan_000000EC <- ERR 100663404 Card error gpg-agent[5844]: chan_000000DC -> ERR 100663404 Card error gpg-agent[5844]: chan_000000DC <- BYE
gpg-agent[5844]: chan_000000DC -> OK closing connection
gpg-agent[5844]: chan_000000EC -> RESTART
gpg-agent[5844]: chan_000000EC <- OK
2011-04-13 11:51:58 gpg-agent[5844] handler 0x98c for fd 220 terminated
2011-04-13 11:52:00 gpg-agent[5844] handler 0xce0 for fd 192 started
gpg-agent[5844]: chan_000000C0 -> OK Pleased to meet you
gpg-agent[5844]: chan_000000C0 <- OPTION ttyname=/dev/tty
gpg-agent[5844]: chan_000000C0 -> OK
gpg-agent[5844]: chan_000000C0 <- OPTION allow-pinentry-notify
gpg-agent[5844]: chan_000000C0 -> OK
gpg-agent[5844]: chan_000000C0 <- SCD SERIALNO
2011-04-13 11:52:00 gpg-agent[5844] new connection to SCdaemon established (reusing)
gpg-agent[5844]: chan_000000EC -> SERIALNO
gpg-agent[5844]: chan_000000EC <- ERR 100663404 Card error gpg-agent[5844]: chan_000000C0 -> ERR 100663404 Card error gpg-agent[5844]: chan_000000C0 <- BYE
gpg-agent[5844]: chan_000000C0 -> OK closing connection
gpg-agent[5844]: chan_000000EC -> RESTART
gpg-agent[5844]: chan_000000EC <- OK
2011-04-13 11:52:00 gpg-agent[5844] handler 0xce0 for fd 192 terminated
gpg-agent[5844]: chan_000000E8 <- [[Confidential data not shown]]
gpg-agent[5844]: chan_000000E8 <- [[Confidential data not shown]]
gpg-agent[5844]: chan_000000E8 -> BYE
2011-04-13 11:52:01 gpg-agent[5844] DBG: agent_put_cache `24ECA7F198F175DFFAC198448D37D03FD154F634' requested ttl=0 mode=3
gpg-agent[5844]: chan_000000F0 -> [[Confidential data not shown]]
gpg-agent[5844]: chan_000000F0 -> [[Confidential data not shown]]
gpg-agent[5844]: chan_000000F0 <- [error: Input/output error]
2011-04-13 11:52:01 gpg-agent[5844] Assuan processing failed: Input/output error
2011-04-13 11:52:01 gpg-agent[5844] handler 0x3c0 for fd 240 terminated
2011-04-13 11:52:02 gpg-agent[5844] handler 0x17ac for fd 200 started
gpg-agent[5844]: chan_000000C8 -> OK Pleased to meet you
Sent on the Sprint? Now Network from my BlackBerry?

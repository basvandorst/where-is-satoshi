
@_date: 2000-08-23 13:21:49
@_author: Morten Liebach 
@_subject: Trustdb is corrupted. 
I'm having problems with lbdb.
In the process of trying to fix it I tried to run
'gpg --list-keys --with-colons', which is the command lbdb calls gpg
It output my keyring as it should, and then at the end, last line:
gpg: the trustdb is corrupted; please run "gpg --fix-trustdb".[1]
I try "gpg --fix-trustdb", but get:
gpg: this command ist not yet implemented."
gpg: A workaround is to use "--export-ownertrust", remove
gpg: the trustdb file and do an "--import-ownertrust".
OK, I do as it says, "gpg --export-ownertrust", and I get this:
# List of assigned trustvalues, created ons 23 aug 2000 13:00:00 CEST
# (Use "gpg --import-ownertrust" to restore them)
That's OK, I haven't assigned trust to anyone yet, so it's as it should
be, and I make a trust.txt file out of the above, backup the corrupt
trustdb.gpg (out of principle) and remove the original, then do a
'gpg --import-ownertrust trust.txt'.
All my keys scroll by with the message "inserted into trustdb", and then
in the end I get:
gpg: trust record 1793, req type 3: read failed: trust database error
gpg: the trustdb is corrupted; please run "gpg --fix-trustdb".
Man, can I do nothing right!?
I don't want to enter that loop.
I simply don't understand, and I hope someone can help me, or tell me
what's going on.
Oh yeah, versions of my stuff:
morten gpg --version
gpg (GnuPG) 1.0.1
Home: ~/.gnupg
Supported algorithms:
Cipher: 3DES, CAST5, BLOWFISH, TWOFISH
Pubkey: ELG-E, DSA, ELG
Hash: MD5, SHA1, RIPEMD160
morten uname -a
Linux pc89225 2.2.17  tir aug 1 00:04:55 CEST 2000 i586 unknown
morten cat /etc/debian_version It's the stock Debian Potato package of GnuPG, and I use LANG=da_DK and
LC_ALL=da_DK, to explain the date-formats and such ....
I've been very verbose here, I hope it's OK, and I hope I've not
overlooked something terribly obvious!
[1]: if I grep for 'gpg:' in the output, these are all the messages:
gpg: key 66468D05.168: expired at tir 06 jul 1999 01:32:03 CEST
gpg: key 9E780DEC.573: expired at tor 03 aug 2000 13:56:46 CEST
gpg: key 5AF274F7.1119: expired at fre 07 jul 2000 17:47:26 CEST
gpg: key 5AF274F7.1119: expired at fre 07 jul 2000 17:47:26 CEST
gpg: NOTE: signature key expired tir 06 jul 1999 01:32:03 CEST
gpg: NOTE: signature key expired tir 06 jul 1999 01:32:03 CEST
gpg: NOTE: signature key expired tir 06 jul 1999 01:32:03 CEST
gpg: NOTE: signature key expired tir 06 jul 1999 01:32:03 CEST
gpg: 1793: read expected rec type 3, got 5
gpg: trust record 1793, req type 3: read failed: trust database error
gpg: the trustdb is corrupted; please run "gpg --fix-trustdb".

@_date: 2000-08-23 13:21:49
@_author: Morten Liebach 
@_subject: Trustdb is corrupted. 
I'm having problems with lbdb.
In the process of trying to fix it I tried to run
'gpg --list-keys --with-colons', which is the command lbdb calls gpg
It output my keyring as it should, and then at the end, last line:
gpg: the trustdb is corrupted; please run "gpg --fix-trustdb".[1]
I try "gpg --fix-trustdb", but get:
gpg: this command ist not yet implemented."
gpg: A workaround is to use "--export-ownertrust", remove
gpg: the trustdb file and do an "--import-ownertrust".
OK, I do as it says, "gpg --export-ownertrust", and I get this:
# List of assigned trustvalues, created ons 23 aug 2000 13:00:00 CEST
# (Use "gpg --import-ownertrust" to restore them)
That's OK, I haven't assigned trust to anyone yet, so it's as it should
be, and I make a trust.txt file out of the above, backup the corrupt
trustdb.gpg (out of principle) and remove the original, then do a
'gpg --import-ownertrust trust.txt'.
All my keys scroll by with the message "inserted into trustdb", and then
in the end I get:
gpg: trust record 1793, req type 3: read failed: trust database error
gpg: the trustdb is corrupted; please run "gpg --fix-trustdb".
Man, can I do nothing right!?
I don't want to enter that loop.
I simply don't understand, and I hope someone can help me, or tell me
what's going on.
Oh yeah, versions of my stuff:
morten gpg --version
gpg (GnuPG) 1.0.1
Home: ~/.gnupg
Supported algorithms:
Cipher: 3DES, CAST5, BLOWFISH, TWOFISH
Pubkey: ELG-E, DSA, ELG
Hash: MD5, SHA1, RIPEMD160
morten uname -a
Linux pc89225 2.2.17  tir aug 1 00:04:55 CEST 2000 i586 unknown
morten cat /etc/debian_version It's the stock Debian Potato package of GnuPG, and I use LANG=da_DK and
LC_ALL=da_DK, to explain the date-formats and such ....
I've been very verbose here, I hope it's OK, and I hope I've not
overlooked something terribly obvious!
[1]: if I grep for 'gpg:' in the output, these are all the messages:
gpg: key 66468D05.168: expired at tir 06 jul 1999 01:32:03 CEST
gpg: key 9E780DEC.573: expired at tor 03 aug 2000 13:56:46 CEST
gpg: key 5AF274F7.1119: expired at fre 07 jul 2000 17:47:26 CEST
gpg: key 5AF274F7.1119: expired at fre 07 jul 2000 17:47:26 CEST
gpg: NOTE: signature key expired tir 06 jul 1999 01:32:03 CEST
gpg: NOTE: signature key expired tir 06 jul 1999 01:32:03 CEST
gpg: NOTE: signature key expired tir 06 jul 1999 01:32:03 CEST
gpg: NOTE: signature key expired tir 06 jul 1999 01:32:03 CEST
gpg: 1793: read expected rec type 3, got 5
gpg: trust record 1793, req type 3: read failed: trust database error
gpg: the trustdb is corrupted; please run "gpg --fix-trustdb".

@_date: 2000-10-19 00:28:05
@_author: Morten Liebach 
@_subject: Insecure Memory Warning! ???. 
Log on as root!
Seriously, that isn't a good solution, it's a very bad workaround.
is `echo "no-secmem-warning" >> $HOME/.gnupg/options' that hard to do?
:-) (or make gpg suid root ...)
HTH, HAND

@_date: 2000-10-19 00:28:05
@_author: Morten Liebach 
@_subject: Insecure Memory Warning! ???. 
Log on as root!
Seriously, that isn't a good solution, it's a very bad workaround.
is `echo "no-secmem-warning" >> $HOME/.gnupg/options' that hard to do?
:-) (or make gpg suid root ...)
HTH, HAND


@_date: 2012-05-29 09:45:48
@_author: Steven Lefevre 
@_subject: getting an encrypted file to show what public key was used 
I am using gnupg via PHP's wrapper for it. I am sending an ecrypted
files to remote hosts, using two different keys for the respective
hosts. One host can decrypt the file properly, but the other host
I am trying to troubleshoot this bug. Of course, I do not have the
private keys from the remote hosts, so I cannot troubleshoot the
complete circuit on my own.
The host that cannot decrypt their file has the decruption running in
some kind of Windows batch file. The error message they get seems to
indicate the name of the public key that was used to encrypt the file.
I am trying to figure out of the name of the public key is actually
encoded into the gpg file. This is their error message:
Beginning GPG Decryption
Using current version of GNUPG
gpg: encrypted with 2048-bit ELG-E key, ID F1940956, created 2002-04-25
      "Different Public Key "
gpg: decryption failed: secret key not available
However, when I try to decrypt the file I'm sending them, without the
key, I get simply
$> gpg --decrypt sensitive_file.gpg
gpg: encrypted with ELG-E key, ID F1940956
gpg: decryption failed: secret key not available
I want gpg to report the email address of the key used to encrypt the
file, like in the error message I'm getting from the remote host. I
want to see "Different Public Key ",
like in their error message. But my gpg doesn't report that.
Is the name of the public key really encoded into the encrypted file?
Or is something else mixed up on the remote host (for instance, them
having the other hosts' private key)?
How can I see the name of the public key that encrypted the file? Am I
missing a switch?

@_date: 2012-05-29 13:54:34
@_author: Steven Lefevre 
@_subject: getting an encrypted file to show what public key was used 
This is, not surprisingly, the case. There was bad logic in my script
and somehow, somewhere, it's using the wrong key for this particular
I was confused about how the remote host could learn the "name" of the
public key, but apparently their script looks it up from public
sources, or already has it on their keyring, or whatever.
I was not aware of a method I could use to tell which key I had just
encrypted a file with, but thanks to the replies, I now know that the
key ID will let me know :)
Steve Lefevre

@_date: 2012-05-29 15:32:50
@_author: Steven Lefevre 
@_subject: getting an encrypted file to show what public key was used 
I was being a bit ambiguous -- by 'script' I meant a PHP program, not
a shell script :P

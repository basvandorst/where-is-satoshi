
@_date: 2005-04-19 11:54:12
@_author: folkert@vanheusden.com 
@_subject: fixing a corrup keyring 
I have a keyring with quiet a few keys (thousands) and now something
is wrong with it:
gpg --list-keys gives
gpg: Ohhhh jeeee: mpi crosses packet border
secmem usage: 1408/1408 bytes in 2/2 blocks of pool 1408/32768
after a while.
How can I fix this keychain? Are there any automatic tools?
Folkert van Heusden
Auto te koop, zie: Op zoek naar een IT of Finance baan? Mail me voor de mogelijkheden.
Phone: +31-6-41278122, PGP-key: 1F28D8AE
Get your PGP/GPG key signed at

@_date: 2005-04-21 20:36:11
@_author: folkert@vanheusden.com 
@_subject: corrupted keyring; now what is corrupted? 
I'm trying to write a program that fixes the keyring. I can read the
chain and do some sanity checks but I find nothing wrong.
So I ran gpg with some debugging switched on and then I get this:
gpg: DBG: parse_packet(iob=1): type=14 length=525 (search.../../g10/keyring.c.974)
gpg: DBG: parse_packet(iob=1): type=6 length=418 (search.../../g10/keyring.c.974)
gpg: DBG: parse_packet(iob=2005): type=6 length=418 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=13 length=39 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=70 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=70 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=76 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=76 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=76 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=76 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=76 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=76 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=76 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=98 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=106 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=13 length=43 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=103 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=13 length=44 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=70 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=70 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=76 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=76 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=76 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=76 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=76 (parse.../../g10/keyring.c.391)
gpg: DBG: parse_packet(iob=2005): type=2 length=76 (parse.../../g10/keyring.c.391)
gpg: Ohhhh jeeee: mpi crosses packet border
secmem usage: 1408/1408 bytes in 2/2 blocks of pool 1408/32768
My question now is: what is this mpi crossing that packet border? Is this mpi-
data longer then what is in the packat? So a packet type ct == 6 || ct == 14 ||
ct == 5 || ct == 7 follows after the last one listed (right?) and the mpi-data
is bigger then that length-field? How can I see if an mpi is the correct length?
Folkert van Heusden

@_date: 2005-04-21 21:26:38
@_author: folkert@vanheusden.com 
@_subject: corrupted keyring; now what is corrupted? 
Ok, I figured out how to check the mpi.
Now, what I don't understand is why gpg bails out: when my program runs, it doesn't
find any problems with mpi's in the whole keyring.
The program (not yet finished altough it might be able to fix some problems with
certain damages) is available from: Folkert van Heusden

@_date: 2005-04-22 07:12:56
@_author: folkert@vanheusden.com 
@_subject: corrupted keyring; now what is corrupted? 
Will that also fix gpgme? It seems it has the same troubles.
Folkert van Heusden

@_date: 2005-08-09 18:18:21
@_author: Folkert van Heusden 
@_subject: removing revoked or expired signatures 
How can I remove revoked and/or expired signatures from my public key?
E.g. keys like these:
sig       X  CA57AD7C 2005-07-15  PGP Global Directory Verification Key
Folkert van Heusden

@_date: 2005-08-09 19:05:22
@_author: Folkert van Heusden 
@_subject: removing revoked or expired signatures 
Doesn't work:
0 folkert gpg --edit-key 1f28d8ae
Secret key is available.
Command> clean
Invalid command  (try "help")
Folkert van Heusden

@_date: 2005-08-09 19:36:39
@_author: Folkert van Heusden 
@_subject: Forgot the key passowrd 
If it is not too long (too many characters), try 'nasty':
Folkert van Heusden

@_date: 2005-08-10 10:43:09
@_author: Folkert van Heusden 
@_subject: Forgot the key passowrd 
IIRC 200/s on a 2.8GHz P4
I discussed improving nasty with an unnamed gpg-expert and he thought it
should be feasable to do at least a million per second. But as nasty is
a proof of concept I can't get myself motivated to improve it.
Folkert van Heusden

@_date: 2005-08-10 11:39:26
@_author: Folkert van Heusden 
@_subject: Forgot the key passowrd 
Apart from the fact that this is (more or less) security by obscurity
even if my program would be a million times faster, 7 characters still
would take a day.
Folkert van Heusden

@_date: 2005-08-15 15:44:27
@_author: Folkert van Heusden 
@_subject: signing only one particular uid on a key? 
Because of my Robot CA (see for details) I would like to sign only 1 UID and not all UIDs on a key.
How can this be done? Yes, I checked the man-page.
Folkert van Heusden

@_date: 2005-08-16 13:41:27
@_author: Folkert van Heusden 
@_subject: signing only one particular uid on a key? 
Aha ok. I expected the --edit-key to be for your own key only. Is it
also possible to select the uid from the commandline?
Folkert van Heusden

@_date: 2005-07-10 20:44:57
@_author: Folkert van Heusden 
@_subject: revokation thing 
How do I create such a revocation certificate without revoking my key
yet? Could not find it.
Folkert van Heusden

@_date: 2005-07-30 23:54:34
@_author: Folkert van Heusden 
@_subject: optimizing gpg for the gpgme library 
I propose the following:
split-up gpg into a front-end and a shared library. The shared library
then contains all code for handling the keyring-files, doing the
crypto-stuff, etc. while the front-end (just a normal executable)
contains the code for parsing commandlines and calling the shared
library with all the previously mentioned functions. That way, the
gpgme-library can also link against this library so that it only has to
do function-calls instead of invoking the whole gpg-executable when it
wants to do anything pgp-ish.
Folkert van Heusden

@_date: 2005-07-31 00:10:18
@_author: Folkert van Heusden 
@_subject: problem with certain commandline switches 
I'm trying to send my keys to the Tor pgp-keyservers.
For that I use:
but that doesn't work!
I then get:
If I, instead, do the following:
everything works perfectly.
(with .gnupg/options.tor1 containing this:
What can be the cause of this?
Folkert van Heusden

@_date: 2005-05-03 17:29:25
@_author: folkert@vanheusden.com 
@_subject: selecting the preferred UID 
If I do a list-key on my key:
folkert gpg --list-key 1F28D8AE
pub   1024D/1F28D8AE 2005-01-21
uid                  Folkert van Heusden (use this one if you want to reach me at the AMC) uid                  Folkert van Heusden (key used after 2005-01-21) uid                  Folkert van Heusden uid                  Folkert van Heusden (e-mail address at Yacht) uid                  Folkert van Heusden (e-mail address at AMC) uid                  [jpeg image of size 10520]
sub   4096g/E4151B95 2005-01-21
it shows my 'F.J.vanHeusden as the first UID.
I would like to have my 'folkert as the primary UID.
How can I change this?
Folkert van Heusden

@_date: 2005-05-03 21:12:44
@_author: Folkert van Heusden 
@_subject: selecting the preferred UID 
Found out that you also need to 'unselect' the old primary one.
Op zoek naar een IT of Finance baan? Mail me voor de mogelijkheden!
+------------------------------------------=  =-+

@_date: 2005-05-17 18:18:46
@_author: Folkert van Heusden 
@_subject: gpgme doesn't seem to return the signatures 
I have the following version:
130 folkert dpkg --list | grep gpgme
ii  libgpgme11     1.0.2-1        GPGME - GnuPG Made Easy
ii  libgpgme11-dev 1.0.2-1        GPGME - GnuPG Made Easy
ii  libgpgme6      0.3.16-2       GPGME - GnuPG Made Easy
lrwxrwxrwx  1 root root     18 Apr 14 08:27 /usr/lib/libgpgme.so -> libgpgme.so.11.3.3
lrwxrwxrwx  1 root root     18 Apr 14 08:26 /usr/lib/libgpgme.so.11 -> libgpgme.so.11.3.3
-rw-r--r--  1 root root 127368 Jan 15 15:27 /usr/lib/libgpgme.so.11.3.3
lrwxrwxrwx  1 root root     17 Apr  3 02:12 /usr/lib/libgpgme.so.6 -> libgpgme.so.6.3.7
-rw-r--r--  1 root root  99184 May  1  2004 /usr/lib/libgpgme.so.6.3.7
I'm doing:
        (void)gpgme_check_version(NULL);
        err = gpgme_new(&ctx);
        err = gpgme_op_keylist_start (ctx, NULL, 0);
Now sigs in this case is *always* NULL!
And I've verified (with gpg --list-sigs) that *all* keys have one or more signature.
Oh, and do I need to free-up something after I do gpgme_op_keylist_next?
Folkert van Heusden

@_date: 2006-01-06 15:04:17
@_author: Folkert van Heusden 
@_subject: hard-copy backups 
Burning a cd at low speeds doesn't neccessarily make it last longer.
If you need them to stay in a good condition for a long time, buy
gold cds. Like the Delkin archival gold series:
Folkert van Heusden

@_date: 2015-07-01 21:22:50
@_author: folkert 
@_subject: [Announce] GnuPG 2.1.6 released 
At least with gpg2 2.1.4-1 and gpgme 1.5.5-2 the passphrase callback
does not work.
When enabled I get the "secret key unusable" error, and without the
callback (enter passphrase via agent) it works fine.
If I remember correctly you stated that you need gpg2 v2.1 or better
for that to work:
Folkert van Heusden

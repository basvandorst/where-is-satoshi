
@_date: 2010-04-05 21:38:45
@_author: Grant Olson 
@_subject: What to do when subkey expires? 
You could create new subkeys and upload them and just let the old ones
If you feel the keys are still safe and uncompromised, you could also
just change the expiration date and upload the latest version of the
keys to the servers.
You probably don't want or need to revoke them.
You really don't want to delete them if you want to read your previously
encrypted data.  Also, deleting them will mean they're still out there
on the keyservers.  You'll just get them back if/when you run an update
from the keyservers, as will anyone who has your key.

@_date: 2010-04-07 13:21:00
@_author: Grant Olson 
@_subject: Receiving invalid packet errors when decryption Ascii Armored data 
That's a CRC checksum.  It's probably good enough for what you're doing,
but 'md5sum' would calculate the md5.
Hopefully they won't be. ;-)  But if they are, I'd get the version of
gnupg that the vendor is using.
It might also help if you let us know how exactly you're sending the
files to the vendor.  Email?  Ftp?  Etc...

@_date: 2010-04-07 16:41:45
@_author: Grant Olson 
@_subject: WikiLeaks Crackers 
According to the above thread, it was encrypted via OpenSSL with a
(presumably weak) passphrase, not public/private key encryption.
Thread might be a hoax.  There's no way I'm downloading the encrypted
version of the file to verify the headers.

@_date: 2010-04-13 17:28:26
@_author: Grant Olson 
@_subject: How to NOT Use IDEA? 
Does this happen for any recipient?  Like if you encrypt to yourself, or
me?  Maybe that particular recipient has IDEA in his preferences.  You
can look at his (or your own) preferences by running 'gpg --edit-key
key_id' and then 'showpref'.  Do either of these have IDEA listed as a

@_date: 2010-04-28 08:31:12
@_author: Grant Olson 
@_subject: GPG using key ring in D:\Documents and Settings\Default 
You can use "gpg --homedir c:\foo\bar" to specify a directory.
Alternately, you can configure the automated scheduler to run the job
under an account that has an existing profile with a good keyring.  I
imagine right now it's running as SYSTEM.

@_date: 2010-08-25 15:28:35
@_author: Grant Olson 
@_subject: Modified user ids and key servers and a possible security risk? 
Since this has come up a few times in the past months, I guess I'm
curious as to what the correct 'round-one' implementation of
cryptographically enabled key-servers would would be.  Is it:
(1) Verifying that the keydata hasn't been tampered with, like editing
in a hex editor?
(2) Only accepting keydata that has been signed by the key owner?
(3) Possibly accepting keydata signed by trusted keys, for example peer
keyservers that that also perform the same verifications?
(4) Possibly saving the signature as well, so peer keyservers can
optionally perform the same verification at step (2) when you sync?
Or am I totally off base here?

@_date: 2010-08-25 19:27:58
@_author: Grant Olson 
@_subject: Modified user ids and key servers and a possible security risk? 
I was thinking of that for the case where Tomas, the OP, managed to
upload a key to a keyserver that gpg was rejecting as invalid.  Should
the keyserver reject something with a corrupt sig in advance?  But I
guess you're already talking about that below...
The one big use case people throw around for keyservers with crypto
support is that keyservers could then honor the 'keyserver no-modify'
flag.  I'm not really too concerned with that, but I guess I'll frame
the conversation as that being the killer feature that crypto would
I was originally thinking, "How do you verify third party signatures?"
and the initial hacky answer seemed to be have the submitter sign the
keydata, not with a self-signature, but with a standard signature on the
whole file.  Less hacky solution proposed below...
I think for this and (4), I was out-thinking myself.  How would
keyservers trust each other enough to sync?  Or re-create the chain of
custody?  Would a pool of servers even be possible since syncing is
propagating data via a third party?  I wouldn't want a solution where
you couldn't sync between two servers.
Anyway, after some googling, it looks like there's a third-party
confirmation signature type in the spec.  I'm not sure exactly how that
works, but that seems like the less hacky way to deal with things.
A brief look at the rfc makes it look like I could certify the third
party sigs on my own keyring.  If that's right, maybe that's the only
way a keyserver would import third party sigs when no-modify is set.
You could have the keyserver:
(1) Perform crypto on self-sigs, only upload a key if the self-sigs on
the packets check out.
(2) If the newly uploaded key has the no-modify flag set, only add
third-party keys that have a "Third Party Confirmation" from the
original keyholder.
That seems like a reasonable solution if I'm understanding the
confirmation signature correctly.
Regarding a crypto algo that the server doesn't understand, or one
that's been flagged as 'weak' in the configuration, I think the server
would just have to reject that info.

@_date: 2010-08-25 23:40:19
@_author: Grant Olson 
@_subject: Modified user ids and key servers and a possible security risk? 
Yes, of course.
I don't know if that's an issue.  At least with their attack.  They
weren't able to impersonate an existing CA.  They created a bogus
intermediate certificate, and a normal one that had a hash collision.
Once the normal one was signed by a single lax CA, they could issue
certificates that were recognized worldwide based on many web browser's
default settings.
Since all OpenPGP keys are created equal, and none are trusted by anyone
by default, it's a little harder to exploit.  To use the same exploit,
you'd need to:
(1) Generate a bogus pgp key, for example 'barak at whitehouse.gov'.
(2) Generate a colliding key for 'joe.sixpack at gmail.com'.
(3) Get a bunch of people to sign the colliding key, which would
probably involve getting fake identification, etc.
(4) Hope that many of the people signing the key are using MD5.
(5) Hope that many of the people using MD5 are trusted by many OpenPGP
users, GSWOT a member or the PGP Global Directory, or at least someone
in the strong set.
(6) After all that you might (repeat might) be able to get the three
signatures required for a random user to fully trust the bogus key.
(7) Profit...
Compare steps 3, 4, and 5 in the OpenPGP scenario to that one lax X.509
CA that's already trusted by browsers worldwide.  And even then, you'll
only trusted by some (possibly many) OpenPGP users.  You won't get
instant world domination.

@_date: 2010-12-06 14:38:41
@_author: Grant Olson 
@_subject: GPF Crypto Stick vs OpenPGP Card 
Yes.  Ultimately a malicious user with 'root' access can compromise any
software solution.  Maybe that means downloading your keys and mounting
an offline attack.  Maybe that means downloading your keys and
installing a keylogger to get your passphrase.  Or finding your
unencrypted key that's been cached by gpg-agent in system memory.  Full
Disk Encryption doesn't provide protection there when your system is up
and running, it only helps when someone steals your laptop, or tries to
access the system while it's powered down.
By moving the keys to a dedicated hardware device, it creates a
partition between your (possibly compromised) computer's OS and and the
device.  The key information never gets loaded into the OS and is opaque
to the system.  So now a malicious user would need to 'root' your card,
or card reader, which would probably involve something like trying to
access or change the physical chips on the device, and is much much
harder than installing a root-kit, or creating a virus, or developing
some other malicious software.
That's also why people are talking about readers with pin-pads.  That
prevents someone from installing a general-purpose keyboard sniffer to
get your pin, stealing your physical token, and having the two pieces of
info they need to use your keys.

@_date: 2010-12-07 14:40:03
@_author: Grant Olson 
@_subject: Store revoke cert. in symmetric file? 
But that does no good if you lose your private-key.  You can't
re-decrypt the file from [1] to get the symmetric key when you need it.
 And if you still have the private key, you don't need the revocation
certificate.  You can generate a new one on the fly if your key has been
compromised but not lost forever.

@_date: 2010-12-07 18:55:57
@_author: Grant Olson 
@_subject: GPF Crypto Stick vs OpenPGP Card 
I don't think you need two active cards.
I personally created a key normally (actually the one that I had been
using for months before I got the card), had backups and all that, and
migrated the keys to the card.  Alternately, it sounds like people are
saying you are prompted to create a backup file if you try to create a
key directly on a card, but I didn't do this so I can't confirm if/how
that works.
Either way, if you have a proper backup, you can restore the backup to
disk normally, then move it onto a replacement key's hardware.

@_date: 2010-12-09 12:25:53
@_author: Grant Olson 
@_subject: multiple subkeys and key transition 
Right.  If the hash algo is your only concern, you can just change that.
 No need to regenerate a key, unless you're just using that as an
motivator to bump up your key-size and/or create an offline primary key.
Regarding RSA vs DSA/ElGamal, without having done any research at all,
I'm assuming the defaults in GPG changed from DSA/ElGamal to RSA/RSA for
a reason, so I went with the latter.
And apologies, because I know you said you have no intention of using a
smartcard (twice), but if you're creating a key for the next ten years
then it's possible you'll change your mind say five years from now.

@_date: 2010-12-11 15:16:43
@_author: Grant Olson 
@_subject: multiple subkeys and key transition 
There's the MonkeySphere project, but I don't think it's widely used...

@_date: 2010-12-11 15:42:15
@_author: Grant Olson 
@_subject: Add sign key only? 
If you're voluntarily handing the key over to the authorities because of
a court order or something, you could delete the signing key, change the
passphrase, run export-secret-subkeys, and they'll still get everything
they want.  Having a seperate encryption key probably doesn't help with
a malicious attacker, or someone who's forcing you to hand over the key
with a rubber hose.

@_date: 2010-12-14 13:47:01
@_author: Grant Olson 
@_subject: best practices 
Now I'm going to spend all day wondering if anyone's tweaked the source
to make smaller keys.  An eight-bit key would surely save your
bandwidth, right?

@_date: 2010-12-18 15:26:19
@_author: Grant Olson 
@_subject: 'Tis the Season -- again. 
It's also a good time to take care of all those administrative tasks
that you've been lazy about.
I created an authentication subkey this year and never properly backed
it up.  Sure I could revoke it and create a new one, but getting the new
key onto a bunch of servers will be a pain.
Also put FDE on my laptop, but I was running Time Machine on an
unencrypted external drive.  So now I'm encrypting this 2 TB whopper.
Looks like I've got about 1 day, 3 hours, and 28 minutes to go.
So ask yourself if you have backups of your critical info.  If the
backups are up-to-date.  If the media is still good.  If it's
appropriately secured.  If you printed out a rev cert.  If you're still
using the same lame password on every website, even though you know deep
down you shouldn't be.  Etc...

@_date: 2010-02-17 03:19:07
@_author: Grant Olson 
@_subject: It'd be nice if "--refresh-keys" was covered on the website. 
Hey, I'm not sure if this is the right place to talk about this, but the
maintainer contact email listed in the Privacy Handbook is dead, the doc
mailing list has a last post in 2008, and it doesn't seem like it
belongs on the developer list.  So...
There's no mention of --refresh-keys usage on the website's manpage or
the Privacy Handbook.
I was reading about revoking keys on various sites, but I couldn't for
the life of me figure out how other users would know that your key was
revoked.  How they'd get that information.  I was searching around like
crazy.  I knew there had to be a better option than just catching things
by manually re-importing the key when you're on a new computer.  Or
having to email everyone who has your old private key with the bad news.
After days of searching, I finally found the "--refresh-keys" option.  I
thought once I had that figured out, it'd obviously be on the gnugp
site.  But it's not covered in the handbook, nor is it covered in the
site's online man page.  (Glad on the manpage, I know I read it a
hundred times.)
Anyway, it makes me wonder how many other people don't know about this
command, and how many never check to see they've got bad keys on their
keyring.  I thought it would be also be a nice addition to the Privacy
Handbook, a subsection under "Section 3: Key Management."
I'm not a OpenPGP guru, but I could try my hand at a rough draft of some
appropriate text if no-one else is up for it.  It looks like the doc
could also use some other minor updates (still say the default key is
DSA/ElGammal..., etc).
It might also be nice if the manpage on the website had the actual
current manpage, since searching for "man gpg" inevitably ends up there.
Like I said, I'm happy to do some of the legwork here if someone can
point me in the right direction and think it's a reasonable request.

@_date: 2010-02-17 03:19:01
@_author: Grant Olson 
@_subject: It'd be nice if "--refresh-keys" was covered on the website. 
Hey, I'm not sure if this is the right place to talk about this, but the
maintainer contact email listed in the Privacy Handbook is dead, the doc
mailing list has a last post in 2008, and it doesn't seem like it
belongs on the developer list.  So...
There's no mention of --refresh-keys usage on the website's manpage or
the Privacy Handbook.
I was reading about revoking keys on various sites, but I couldn't for
the life of me figure out how other users would know that your key was
revoked.  How they'd get that information.  I was searching around like
crazy.  I knew there had to be a better option than just catching things
by manually re-importing the key when you're on a new computer.  Or
having to email everyone who has your old private key with the bad news.
After days of searching, I finally found the "--refresh-keys" option.  I
thought once I had that figured out, it'd obviously be on the gnugp
site.  But it's not covered in the handbook, nor is it covered in the
site's online man page.  (Glad on the manpage, I know I read it a
hundred times.)
Anyway, it makes me wonder how many other people don't know about this
command, and how many never check to see they've got bad keys on their
keyring.  I thought it would be also be a nice addition to the Privacy
Handbook, a subsection under "Section 3: Key Management."
I'm not a OpenPGP guru, but I could try my hand at a rough draft of some
appropriate text if no-one else is up for it.  It looks like the doc
could also use some other minor updates (still say the default key is
DSA/ElGammal..., etc).
It might also be nice if the manpage on the website had the actual
current manpage, since searching for "man gpg" inevitably ends up there.
Like I said, I'm happy to do some of the legwork here if someone can
point me in the right direction and think it's a reasonable request.

@_date: 2010-02-23 18:23:42
@_author: Grant Olson 
@_subject: How to sign an email in PHP? 
Are you attaching it as a normal attachment?  Does PHP support pgp/mime?
If you even end up accidentally adding a few CRLFs to the body of the
PHP message when you fill in the skeleton, that would invalidate the
Is there a reason you don't want to clearsign the message?  I think it'd
be easier to do that.  Clearsign and then use the clear signature as
email body.  That's basically how this email is signed.
Then even if you have a few extra linefeeds before or after, the client
will say that the message is partially signed.  It'll have delimiters
built into the text so that any extra stuff won't matter.
I think that'll be a lot easier to debug.  If it's not working you can
view the raw source, save it somewhere, and run gpg commands manually.
On the downside, it'll look uglier to clients that aren't configured for

@_date: 2010-02-23 22:29:22
@_author: Grant Olson 
@_subject: How to sign an email in PHP? 
The kicker is that pgp/mime messages will look weird in Outlook Express
or Windows Live Mail.
According to the RFC (  ), most of
the headers exist outside of the message, so if you're putting them in
the message body before signing that isn't right.  The only headers that
should exist in the message body are Content-Type and

@_date: 2010-02-24 18:30:16
@_author: Grant Olson 
@_subject: Questions about "--group" for group encryptions. 
Ultimately, that's a trust issue.  You have to trust people to behave
properly.  If they can access the key, or the unencrypted files, they
can copy them somewhere.  Some sort of token authentication, like a
smart card, or (not for gpg) a SecurID card, makes it harder for people
to cheat and hand their password out.
How are users exchanging files?  It almost sounds like what you really
want is some sort of secured file share that you can control via an
Access Control List.  Something like Samba, nfs, scp, web-dav...  Yes,
users could copy the unencrypted contents somewhere, but they could do
the same with gpg.
If they need to use the files offline and on the road, and that's why
you need encryption, you could store them on an encrypted filesystem
locally with something like TrueCrypt or LUKS or BitLocker.  When you
kill access to the share, they can't get any more updates.  Sure, they
might be able to grab the old data and copy it somewhere, if you can't
revoke their access to (for example) a laptop, but they could have
already done that before you killed the access.

@_date: 2010-02-24 19:44:19
@_author: Grant Olson 
@_subject: key question 
You won't be able to read anything encrypted with that key.  You'll
still be able to verify signatures created with the key, if you can get
the public key from a keyserver or something.
If it's been stolen, someone else could possibly access your encrypted
info and/or impersonate you.  If possible, you'll want to revoke it with
a revocation certificate:
(That whole manual is pretty good.  You might want to read the whole thing.)
You can back it up properly by exporting the key and burning the file to
a cd.  "gpg --export-secret-key > key_backup_file"
You could also backup your whole keyring, including all the public keys,
trust levels, local signatures, etc.  That's under "Documents and
Settings\user\Application Data\gnupg" on windows XP.  Not sure if that's
the same on Windows 7.
See above.  The actual file is secring.gpg.

@_date: 2010-02-26 13:30:16
@_author: Grant Olson 
@_subject: key question 
As a practical matter, even if your contacts agree to respect your
wishes, it's still pretty easy for them to accidentally send it to the
keyservers.  Perhaps mis-typing a command when they try to upload their
own key.  Perhaps clicking the wrong button.  Perhaps because they just
don't really know how gpg works and start typing random commands.
From a practical perspective, whether it's right or wrong, you've got to
assume that if they can, they will, and that key will be out there
forever.  One of the reasons to use public/private key encryption is
because you don't always trust the other parties to do the correct thing.
So if you are worried about the keyservers having information that could
somehow implicate you in whatever, you'd need to obfuscate your UID, as
you mentioned in another post.  Asking people not to publish the key
doesn't offer any real protection.  And if you've done that, you might
as well publish the key yourself.

@_date: 2010-02-26 15:37:03
@_author: Grant Olson 
@_subject: key question 
Just curious... Does support just mean it sets the bit?  Or will it turn
an attempt to --send-keys on that key into a no-op?

@_date: 2010-02-27 12:38:25
@_author: Grant Olson 
@_subject: key generation: email-address necessary? 
Enigmail will lookup the key by key ID (0xDEADBEEF) when you tell it to
retrieve the public key.  So that will work.  When you send someone an
encrypted email and it doesn't match an email address from the key-ring,
it will prompt you to select which key you want to use for that user for
encryption.  Pretty painless.
Not sure what other clients do.

@_date: 2010-02-27 16:54:56
@_author: Grant Olson 
@_subject: Fwd: Re: key question 
Doh!  Originally sent off list...  Maybe Robert got a psychic vibe...
It sounds like you're using the software to do the opposite thing that
many people do.  I think digital signatures are utilized much more than
encrypted communication.  And digital signatures are about
authenticating to a real person, and not anonymity.
If you don't want to publish your email for the anonymity/privacy
reasons you've outlined, then you probably don't want to use your legal
name either.  And it looks like you don't.  Which is fine for encrypting
documents.  But it renders two key features of digital signatures
meaningless.  Authentication and Non-repudiation go out the window.  How
do I authenticate that an anonymous entity is really an anonymous
entity?  That doesn't make any sense.  How do I get into a dispute with
an anonymous entity about whether he really agreed to do X?  And
although it does prove message integrity, that, in and of itself,
doesn't mean much for an anonymous entity.
So a few examples to elaborate.  I'm going to use MFPA as the anonymous
user who doesn't have a real ID for clarity sake.  It's better than
"anonymous entity".  Just to be clear, I'm not really talking about you
or making any personal attacks in the examples.  You're just the generic
guy with the non-identifiable key.
Farfetched example.  An email from MFPA pops up on the list.  "My house
burnt down.  Lost my key.  Lost my rev certificate.  Here's my new
info."  Five minutes later, another email from MFPA.  "That dude
generated a fake key.  Keep using the old one.  The new one is bad!"  A
third email from MFPA.  "That last dude is lying.  Turns out he stole my
laptop before burning my house down."  Who do we trust?  Which key do we
use?  We have no way of knowing who the real MFPA is, because he was
anonymous to begin with.
How could I sign your key?  It sounds like you don't want anyone to sign
it anyway, plenty of other people want to sign keys and build the web of
trust.  I can't verify your key in any way.  You're anonymous.  There's
no way to prove you're MFPA.  So I can't sign your key.
Lets assume among your circle of friends, who know each other personally
in real life, you sign off on each others keys.  And I somehow know one
of your friends, and we sign each others keys.  To me, it's a
meaningless assertion for someone to claim that they've verified that
you're the real MFPA.  That doesn't mean anything to me because you're
anonymous to me.  It also doesn't mean anything if you've signed off on
someone's key.  What does it mean to me that MFPA vouched for someone
else's identity?  Another meaningless assertion.
I'm not really using OpenPGP encryption at all.  I may never need to
send an encrypted email.  None of my real-life friends, family,
co-workers use it.  Not Cuban, Iranian, or in the Falun Gong.  I use it
for two things, (1) to post on computer geek mailing lists, and (2) to
verify software packages.  For (1), I guess I'm not too concerned about
digital signatures.  The PGP Global Directory is good enough
authentication for me.  For (2), I actually am.  It'd be nice to have
the software packages signed by a validated key.  If people don't use
personally identifying information, the web of trust breaks.  The only
way for me to actually validate a key is to meet with the software
packager personally.
And I think many people fall into that camp.  Authentication is more
important to them than anonymity and encryption.

@_date: 2010-02-28 14:58:05
@_author: Grant Olson 
@_subject: How to give the keywork from command line. 
Also, if you encrypt to a key, you shouldn't need to provide a
passphrase at all, unless you need to sign the file too.  I get nervous
about passphrases in batch files...

@_date: 2010-02-28 16:19:28
@_author: Grant Olson 
@_subject: key question 
for you, since you can choose who to trust and who not to, but that's
not the information encoded in there.  I "know" dozens of people on the
net.  I've exchanged encrypted mail with them, I've worked with them, in
some case for years... and I've never met them in person.  For all I
know, they're actually a group of people sharing the same email address
and using a name that looks like a real one, and not obviously
pseudonymous like MFPA.
signature.  The signature only maps back to a real person indirectly.
Good points all.  Here's what I'm thinking.  Imagine I trace path on the
web of trust, like with those pgp pathfinders out there.
Example one:
me ->
user1 at example.org ->
user2 at example.org ->
user3 at example.org ->
Now not that it's practical, but I could trace through that.  user1 -
he's an old college buddy.  I ask him how he knows user2.  He's been
sitting in the next cube over from user1 for twenty years.  I ask user2
how he knows user3.  Key-signing party.  A passport and a driver's
license.  I ask user3 how he knows you.  We've been working on some open
source project for years.  I could, not that it's practical to do,
perform additional verification all of these claims.
Example 2:
me ->
user1 at example.org ->
user2 at example.org ->
a at b.c ->
User1 same story.  College buddies.  User2.  Same story.  They work
together.  I ask user2 how he knows a at b.c.  He responds that he's not
allowed to disclose the info for privacy concerns.  I ask you how you
know a at b.c.  You give the same response.  Can't contact a at b.c to ask who
he is because it's not a real email.
I would argue that those two examples have much different levels of
indirectness, since I can't conceivably verify the chain in example 2.

@_date: 2010-07-04 17:10:50
@_author: Grant Olson 
@_subject: Relative path in GPG.conf 
This should work out-of-the-box without any manual configuration if you
installed GPG for Thunderbird portable correctly.  Check to see if you
have a dirctory under the main Thunderbird Portable directory called
You should also have a directory under the thunderbird portable
directory called data/gpg.  You can copy your existing keyrings there if
you want to.

@_date: 2010-07-21 13:00:38
@_author: Grant Olson 
@_subject: Keypair is expiring. 
They'll need to get it somehow.
But that's where keyservers are handy.  You push the key with the new
expiration date to the keyserver.  People (hopefully) refresh regularly
and get the new date.  If they don't refresh regularly, when they see
the expired key they will (hopefully) refresh manually from the
keyserver.  If they don't do either, when they tell you your key is
expired, you can tell them it's up-to-date on the keyserver and/or mail
them a copy of the new public key.

@_date: 2010-07-22 19:36:58
@_author: Grant Olson 
@_subject: Using pinentry-curses interactively in Linux boot process fails 
Are all the files for gpg2 on your boot partition?  I'm not near a linux
box now, but I'm guessing some of the files you need are installed to
the encrypted drive is mounted onto the filesystem.

@_date: 2010-07-23 16:32:18
@_author: Grant Olson 
@_subject: Using pinentry-curses interactively in Linux boot process fails 
Just keep in mind that if you're not encrypting the whole disk, your
sensitive data can leak to /tmp and swap.  I'm only bringing this up
because it seems like you've taken some elaborate steps to protect your

@_date: 2010-06-22 01:39:20
@_author: Grant Olson 
@_subject: local signatures: should they be importable by default in some 
To me a local sig is basically saying, "I'm signing this key as a
convenience, but I haven't done proper verification, so I'm not going to
publicly vouch for this key."  In that case, the only local sigs I can
trust are the ones that I myself created.  And if I have the public key
that's a pretty good indication that the local signature came from me.

@_date: 2010-06-23 09:53:04
@_author: Grant Olson 
@_subject: Help for a newby - gen-key error message 
What does line 5 of your gpg.conf file say?  Will things work if you
simply comment that line out with a # sign?

@_date: 2010-06-27 19:00:27
@_author: Grant Olson 
@_subject: "No-Keyserver" (and other) flags on keys 
I believe it's the "Keyserver no-modify" flag, which is probably already
set on your key.  It says that only the owner of the key should be able
to update or modify the key on the keyserver.
When you're getting that deep into all things OpenPGP, it's probably
best just to go straight to the RFCs.

@_date: 2010-06-27 22:10:46
@_author: Grant Olson 
@_subject: "No-Keyserver" (and other) flags on keys 
But then keyservers wouldn't be able to sync with each other.  User X
uploads to keyserver A.  Keyserver B syncs with A.  Keyserver B has no
verification that the info from keyserver A was authorized by User X.
That might be fine for some servers, but would completely break
something like pool.sks-keyservers.net.
I imagine that'd even be the same issue for a client that tries to honor
the no-keyserver settings.  I grab User X's sig from keyserver A, how do
I know that User X authorized it?
The only way to know that the key came from an authoritative source,
with or without a "don't upload" flag, is a self-signature.

@_date: 2010-03-02 17:45:42
@_author: Grant Olson 
@_subject: Unable to decrypt/verify from own machine 
You'll need to add yourself as a recipient in addition to the client (-r
me at myemail.com) or *you* won't ever be able to decrypt the file.
Also, what is the encryption subkey for the user's key id?  If you run
"gpg --list-keys 5872AF6A".  My guess you'll see the encryption subkey:
"003B38FA"  Something like:
sub   2048R/003B38FA 2010-01-11 [expires: 2011-03-01]
You also might want to consider a front end to gpg that ties into
explorer.  Like GPGShell or gpgEX.  It can make things easier on you.

@_date: 2010-03-03 20:31:50
@_author: Grant Olson 
@_subject: Continued PKA problems on Windows 
I noticed two things that may or may not matter...
If I open " in firefox, it opens
right in the browser.  If I open yours, it opens a "Save As..." window.
 So they have different content types.
Also, the url listed in the firefox "Save as" window is some crazy
computer generated url, not Just doing a quick test with curl, it takes like 4 302 redirects before
you actually get to the file.  It wouldn't be totally unsurprising to me
if a series of redirects caused problems.

@_date: 2010-03-04 12:51:32
@_author: Grant Olson 
@_subject: Changing & verifying the --max-cert-depth in Windows 
If you haven't signed any keys, then there's nowhere to go.  The
certificate depth starts with keys you've signed.  Then it looks at the
keys those keys have signed.  Etc.  Etc.
Since you haven't signed any keys, the chain of trust doesn't have
anywhere to begin.  So it's showing that the only key you trust is your
own, that's the 1u, and that's at the zeroth level of certificate depth.
If you want to test, sign a few keys with the local non-exportable
option and you'll see depth: 1 and possibly more.  Or maybe locally sign
something like the PGP Global Directory key, or configure the gswot keys.

@_date: 2010-03-04 13:01:42
@_author: Grant Olson 
@_subject: Changing & verifying the --max-cert-depth in Windows 
I believe that's the number of keys they've signed that are in your
keyring.  The signature attaches to the recipient's key, not the
signer's.  So if you don't have the recipient's key in your keyring, you
don't even know it's been signed by one of the keys you've certified.

@_date: 2010-03-04 16:33:44
@_author: Grant Olson 
@_subject: Changing & verifying the --max-cert-depth in Windows 
But out of those 83, only 11 have marginal or full trust, right?  A
signature isn't valid (for you) if they key isn't marginally or fully
trusted to begin with.  Would you buy that number from the 11 valid and
trusted keys?

@_date: 2010-03-05 17:04:27
@_author: Grant Olson 
@_subject: Memory forensics 
That article was a little vague.  And I don't know much about memory
forensics in practice.  Do you know that it actually was a hibernation
file and not swap space?

@_date: 2010-03-05 18:09:54
@_author: Grant Olson 
@_subject: Memory forensics 
Thanks a million for all this.  The company "Volatile Systems" was
really messing with my google-fu.

@_date: 2010-03-06 14:27:15
@_author: Grant Olson 
@_subject: Memory forensics 
I was probably just being a little dense.  I could see that they had a
memory forensics tool, but the company pages that I got when searching
on "volatile memory forensics" were steering me away from basic
definition and intro and FAQ pages.  Anyway, thanks again for the info.

@_date: 2010-03-11 13:23:51
@_author: Grant Olson 
@_subject: gpg encryption failed no public key 
The first command isn't working because you need to double-dash the
options.  "--recipient" and "--encrypt".
You really shouldn't need the -keyring option if you're using your
default keyring.  But for the option to work, you would need quotes
around the filename since it has spaces in it.

@_date: 2010-03-12 16:10:09
@_author: Grant Olson 
@_subject: updprefs command and changing key 
Yep.  The key itself is the same and the encoded preferences changed.
Your old contacts can still do all the same stuff they were before using
your old preferences until they update their copy of your public key.
Your new ones will use the new preferences.  Nothing should break.
If you're using the keyservers, you'll want to send the new public key
out so that people can get your new preferences.

@_date: 2010-03-12 15:06:17
@_author: Grant Olson 
@_subject: Question about passphrase-fd 
gpg should know how the file was encrypted.  You shouldn't need to
specify anything to decrypt.

@_date: 2010-03-12 16:27:54
@_author: Grant Olson 
@_subject: Pass phrase help 
Unfortunately, you're screwed...
If you generated a revocation certificate, you can send that out so that
people know the key is bad.  Here's one quick article that explains the
If you want/need to continue using encryption, you'll need to generate a
new private key.  You don't need to reinstall gnupg.  You can just
choose "Keys -> New Key" from the GNU Privacy Assistant.
You'll then either need to send the new key to the vendor or to the
keyservers, and have people use that one.

@_date: 2010-03-12 15:25:27
@_author: Grant Olson 
@_subject: gpg encryption failed no public key 
You shouldn't need to sign the key.  It should give you a warning but
let you encrypt it anyway:
Signing will remove that warning, but you don't need to sign every
single key you import to use encryption.

@_date: 2010-03-12 18:51:31
@_author: Grant Olson 
@_subject: updprefs command and changing key 
Doing that wouldn't comply with the spec.  The spec says that
implementations MUST support 3DES:
It's the only encryption algorithm that must be implemented, so that's
why it ends up being the final fallback option.

@_date: 2010-03-15 16:14:14
@_author: Grant Olson 
@_subject: Portable GnuPG? (Ideally with portable TB+Enigmail) 
I think you just found the wrong page.  Install the latest
thunderbirdPortable from here:
And install gpg from here:
This one isn't listed as a development test or beta status like the page
you had.
Then install Enigmail.
It worked fine for me.
Also keep in mind it's not a good idea to insert a USB Drive with your
private key into an untrusted computer.  You might want to make a dummy
key for demo purposes.

@_date: 2010-03-16 10:02:33
@_author: Grant Olson 
@_subject: Should I set cert-digest-algo? 
A while ago I stumbled onto instructions to up my prefs to use a better
hash than SHA1:
Today I was surfing around, and saw some relatively recent posts on the
list that said setting "digest-algo" in gpg.conf was a Bad Idea(tm).  I
didn't find any threads on setting "cert-digest-algo", but the manpage
notes that this can cause interoperability issues.
So is setting "cert-digest-algo SHA256" okay, or is it going to cause

@_date: 2010-03-16 20:49:51
@_author: Grant 
@_subject: Gnupg stopped working after being moved to new host 
You're going to need to provide A LOT more details to get some help.  To
start with, did the keyring get migrated as well?  Are the public keys
you need on the new server?  (gpg --list-keys)

@_date: 2010-03-18 11:37:40
@_author: Grant Olson 
@_subject: Secure unattended decryption 
Physically walk out?  You could use some full disk encryption instead.
And a lock on the server room door helps.  ;-) Hypothetically?  Like
someone hacking ssh or nfs or something?  Like you said, it's a bit of a
contradiction.  Now someone can just hack the nodes.  (Or even the
clients that are accessing the nodes.  But they could probably do that now.)
How specifically do you imagine someone stealing the data?

@_date: 2010-03-18 14:43:16
@_author: Grant Olson 
@_subject: Secure unattended decryption 
Not sure exactly what sort of database you're using, but gpg (to my
knowledge) doesn't do block-level/random access.  You can't just mount
the database, stop using pgp, and write a block here and a block there.
 You need to use gpg to encrypt the whole file on each write and decrypt
on each read.  If you've got an uber-database on a SAN where there's
lots of reads and writes, and DBA's are tuning block size and what not,
it seems like the wrong tool for the job.

@_date: 2010-03-19 17:25:46
@_author: Grant Olson 
@_subject: Secure unattended decryption 
Apologies Daniel.  That went right over my head.  I didn't realize you
were talking about two separate keys.  I thought you were saying you had
a key that was a gpg key, not that you were encrypting database key X
with gpg key Y.  Ignore pretty much everything I said.

@_date: 2010-03-19 17:30:32
@_author: Grant Olson 
@_subject: gpg-agent is ignored 
The file is 'gpg-agent.conf'.  It's located in your gpg configuration
directory.  You can find that for your OS by running gpg --version.

@_date: 2010-03-19 19:42:33
@_author: Grant Olson 
@_subject: gpg-agent is ignored 
You probably just need something like:
default-cache-ttl 600
Where 600 is the number of seconds the password is cached.  My whole
gpg-agent.conf file is:
default-cache-ttl 600
max-cache-ttl 999999
And that's working for me.

@_date: 2010-03-20 23:33:59
@_author: Grant Olson 
@_subject: Generating a new key 
I stumbled on this wikipedia page a few weeks ago:
I'm not sure how up-to-date the info is, but it basically says that even
with Moore's law, 2048 bit keys should be good until 2030.
I would think if you want to future-proof anything, it'd be the primary
key.  You can create a separate signing subkey with a more reasonable
bit length.  And then if you need to crank up the signing/encryption key
bit-lengths in the future, you can create new subkeys and expire the old
ones, and you'll keep all your signatures on the existing primary key.

@_date: 2010-03-29 08:22:45
@_author: Grant Olson 
@_subject: URGENT: GNuPG 1.2.1 - secret keys help 
Did you set the file type to binary in cvs?  CVS might be 'fixing'
linefeeds or doing some keyword expansion if you didn't.
Do the files have the same checksums on your local machine and the
server if you run something like "md5 file" or "sha256sum file"?

@_date: 2010-05-11 20:49:43
@_author: Grant Olson 
@_subject: Encryption to key with multiple subkeys 
I think the semantics and correct behavior become unclear when one of
the keys is revoked.
- Alice has two encryption keys.
- Bob sends to both keys.
- Alice revokes one key.
- Bob doesn't refresh his keys.  Continues sending to both keys.
- The unrevoked key decrypts things just fine.
If Alice has one key and revokes it, she'll get a warning that Bob is
still sending to the revoked key, and can take corrective action.
If Alice has two keys and revokes one, should it behave any differently
than if another revoked key is used?  Right now when I decrypt
something, gpg doesn't bother to check to see if other users are revoked
(according to my keyring.)  gpg is still matching one good key with one
good asymmetrically encrypted symmetric key packet.
So now Alice doesn't even realize that Bob is still sending sensitive
info on a potentially compromised key.
You might be able to put a weird exception where gpg checks to see if
any of your private keys that are revoked are one of the keys that gpg
has encrypted to, but that would behave completely differently than
having a revoked key from random user X on the keyring.
And if you did, I'm not sure how applications like Enigmail would end up
handling the special case.

@_date: 2010-05-24 22:19:50
@_author: Grant Olson 
@_subject: new Installation... configure issues 
Can you use sunfreeware?  I believe they have binaries available for
install.  I'm not running solaris now, so I can't tell you how well they

@_date: 2010-05-26 12:42:00
@_author: Grant Olson 
@_subject: Encrypted Directory 
If you're talking about a 'live' directory, one that you're editing,
you're probably better off using something like truecrypt or luks (with
FreeOTFE on windows) to create an encrypted partition.
If you're talking about a static directory, just zip it up and encrypt

@_date: 2010-05-27 10:15:46
@_author: Grant Olson 
@_subject: Encrypted Directory 
I was using zip generically.  But I think pkzip aka winzip aka not-gzip
only accepts ascii filenames.
I still think you're better off using some sort of encrypted filesystem.
 You can't get public key encryption, but you can setup two-factor
encryption, where someone can't login unless they have both a passphrase
and a key-file or smart-card or something like that that has been
authorized by the admin.

@_date: 2010-10-05 19:05:14
@_author: Grant Olson 
@_subject: Encrypt Error - There is no assurance this key belongs to the 
Since it's listing the validity as unknown, gpg doesn't seem to think
the key is signed by your key.  (Maybe you didn't set your own key to
ultimate trust?)
As Robert said, unknown validity will usually Y/N prompt you for
confirmation instead of completely failing.  Are you encrypting from a
batch file?  From a gui front end?  From the command line?
And that's still not an actual error message.  Could you try something
like the following and post the acutal error?
johnmudhead:~ grant$ echo foo > bar.txt
johnmudhead:~ grant$ gpg -r pashbrook at chcw.com --encrypt bar.txt
gpg: pashbrook at chcw.com: skipped: No public key
gpg: bar.txt: encryption failed: No public key

@_date: 2010-10-14 16:31:09
@_author: Grant Olson 
@_subject: Confirmation for cached passphrases useful? 
But ultimately once you start trying to fix the problem by offloading
the checks to special hardware, you might as well just key a smart card
reader with an integrated keypad.  Then you can use a simple pin.  Not
quite as convenient as hitting Y/N, but way more convenient than a
really strong password.

@_date: 2010-10-15 18:34:58
@_author: Grant Olson 
@_subject: Confirmation for cached passphrases useful? 
But is it good?  To me this feature seems like "security theater."  It
makes you feel all warm and fuzzy and lets you sleep at night, but
doesn't provide any real protection.
Is it good to have users thinking that there's no way their box can be
compromised, because they're not getting pop-ups, when in reality they
may be completely compromised?  Do the percieved protections of this
feature come anywhere close to the actual protection provided?

@_date: 2010-08-31 19:48:41
@_author: Grant Olson 
@_subject: Why do smart cards have a 'sex' option? 
I just got my new crypto-stick, and it's pretty slick.  I understand why
I'd want to set my name and language preferences, but I was trying to
come up with a good scenario where my sex would be useful, or what the
rational was for including that field.
I'm just curious more than anything.

@_date: 2010-08-31 21:34:37
@_author: Grant Olson 
@_subject: Generating smart-card stubs on a clean computer? 
I can find docs on generating a key on a smart card, and migrating an
existing key to the smart card.  But I can't figure out how to configure
the smart card on a clean machine that never had my secret keys.
The card has both signing and encryption keys on it.  The drivers are
installed.  I'm running gpg2 (via gpg4win) on a Windows XP box.
--card-status and --card-edit work.  But if I try to sign something, I'm
told I don't have any secret keys.  How do I get stubs to show up in the
local gpg configuration?
Does anyone know how I can do this?

@_date: 2010-08-31 23:28:48
@_author: Grant Olson 
@_subject: Generating smart-card stubs on a clean computer? 
I guess the issue is that I don't have a key at all on the new machine.
I thought I could run some magic command that'd load the stubs for my
smartcard keys into my secret keyring.
If I manually export the stub keys from my 'good' machine, and import
them onto the new machine, things work.  But that seems clunky.  Now I
need to carry around my smart-card, and a USB stick with the key stubs,
to configure a new machine.
If that's what I have to do, I guess that's what I have to do.  But I
thought there'd be an easier way to get things working?, using nothing
but the smartcard.

@_date: 2010-09-01 00:49:01
@_author: Grant Olson 
@_subject: Generating smart-card stubs on a clean computer? 
That did the trick.  As did John's suggestion to run fetch from 'gpg
--card-edit'  I'm assuming 'fetch' just runs an import for the keys
stored on the card.

@_date: 2010-09-01 15:55:55
@_author: Grant Olson 
@_subject: Why do smart cards have a 'sex' option? 
Yeah, that makes perfect sense.  I think I did know that somewhere in
the back of my head.  But I found some smartcard spec doc that indicated
the UI is allowed to grab this value and adjust the interface
accordingly.  And I was just thinking, "What's the UI supposed to do?
Show hello-kitty and unicorns if it's a woman, and monster trucks and
cyborg ninjas if it's a guy?"

@_date: 2010-09-07 19:21:56
@_author: Grant Olson 
@_subject: scdaemon loses connection when I unplug/replug a crypto-stick 
I'm on OSX Snow Leopord, the latest version of MacGPG2.
When I remove my cryptostick and plug it back in, scdaemon doesn't see
it anymore.  This causes gpg-agent to complain that it can't find a
smart-card.  If I manually lookup the PID for scdaemon and give it a
"kill -9" things work again.
I imagine that the cryptostick is a little unique in this regard.  Most
people would have a reader that's more permanently attached, but with
the crypto-stick, the reader is integrated with the card.
Anyone know of an easy way for me to fix this?

@_date: 2010-09-14 16:34:31
@_author: Grant Olson 
@_subject: gpg-agent ssh authentication sees non-existent key? 
I'm using gpg-agent instead of ssh-agent on OS X with a smart card.
When I didn't have the card plugged in, it was falling back to the file
~/.ssh/id_rsa, which seemed reasonable, even though I didn't want to use
the old key.
When I moved the file, gpg-agent still seems to see it some how.
It prompts:
Please enter the passphrase for the ssh key
  /Users/grant/.ssh/id_rsa
If I enter the old passphrase, I authenticate.
But the file doesn't exist:
johnmudhead:.ssh grant$ cd ~/.ssh
johnmudhead:.ssh grant$ ls -a
.		id_rsa.old	known_hosts
..		id_rsa.pub.old	known_hosts~
johnmudhead:.ssh grant$
I even rebooted to make sure that gpg-agent wasn't stashing a copy in
memory.  Same behavior.
Did gpg-agent stash a copy of the private key?  How do I delete that copy?

@_date: 2010-09-14 21:17:05
@_author: Grant Olson 
@_subject: gpg-agent ssh authentication sees non-existent key? 
Thanks, that did the trick.
So I've got two questions (for everyone).
I tried a bunch of random commands as I was getting things setup.  Did I
run something that copied the key from ~/.ssh/id_rsa to
~/.gnupg/private-keys-v1.d/DEADBEEFC00FEE.key?  Or did gpg-agent do that
Does anyone else think it'd be better for pinentry to list the new
location (~/.gnupg/private-keys-v1.d/DEADBEEFC00FEE.key) or something
like "imported from ..." to indicate the real location of the gpg-agent
version of the key?  I could probably write a patch for that if people
think it's a good idea.

@_date: 2010-09-24 17:23:22
@_author: Grant Olson 
@_subject: how slow are 4Kbit RSA keys? [was: Re: multiple keys vs multiple 
I can test on a Motorola i1 (Boost' droid) with APG, but I'll only be
able to do a stopwatch test.  As far as I'm concerned, under one sec is
I believe you've got a 4096 bit key that uses a serious hash.  Would you
mind posting a test clearsigned message so that we're all using the same
document to test against?

@_date: 2010-09-29 18:25:00
@_author: Grant Olson 
@_subject: Benchmarking OpenPGP operations with GnuPG [was: Re: how slow 
I did a few quick tests with APG using both 2048 and 4096 bit keys.
AGP is promising, but it's still pretty beta.  Anything it does do seems
to work well, but there's a lot of stuff it doesn't do.  I couldn't
figure out how to sign a document without encrypting, couldn't import
keys from keyservers, etc.
I used the UTF-8 text version of "The Raven" from Project Gutenberg as
my test document.  Of course the document length will only effect the
hash calcs or symmetric encryption inside the envelope, so those
portions should be the same for either document.  But I want interested
parties to have a rough idea of the length of the document.
Basic times for decrypting the document were about 4-5 seconds for the
2048 bit key and 5-6 seconds for the 4096 bit key.  Basic times to
encrypt-to-self and sign with the same key were 5-6 seconds for the 2048
bit key, and 6-7 for the 4096 bit key.
It looks like the times do include using the passphrase to decrypt the
public key, nothing like GPGAgent running...
There's also a mail app, K-9 mail, that has basic GPG integration.  It
can only verify and sign inline, and doesn't seem to be able to import
keys for a given message.  I might go ahead and copy my normal keyring
to the phone and subscribe to a few gpg lists with a dummy account to
see how things work on that front.  If I do, I'll be sure to post a report.

@_date: 2011-04-01 13:15:42
@_author: Grant Olson 
@_subject: Public keys on smartcard 
The v2 spec says they should support at least 2048k keys.  The actual
cards say they can handle up to 3072k.

@_date: 2011-04-03 15:05:25
@_author: Grant Olson 
@_subject: No SmartCard Daemon 
For some reason debian-based software includes scdaemon in the gpgsm
Part of me feels like this is a bug in the packaging, but I don't know
enough about debian packaging to file a bug report.  That, or I'm too

@_date: 2011-04-03 15:13:39
@_author: Grant Olson 
@_subject: No SmartCard Daemon 
I decided to stop being lazy, but it looks like there's a 4 year old bug
report that requests the exact thing I had in mind:  Either move
scdaemon somewhere else, or at least include its name in the description
so people can find scdaemon via searches.

@_date: 2011-04-07 21:37:32
@_author: Grant Olson 
@_subject: How to verify the e-mail address when certifying OpenPGP User 
Well, yes, but then you have to ask how OpenPGP protects against someone
using a forged passport.  Or more outlandishly, getting plastic surgery
and using another person's real ID.  At some point, technology can't
solve the problem of authentication.
In the case you proposed, you need to evaluate how much you trust Peter
Hanssen in real life.  If you've known him for years, it's unlikely he's
just been waiting all this time to trick you into signing a key as part
of some elaborate scam.  Then again, if you've known him for years
because you've been buying his counterfeit jeans, or he offered you
$5000 dollars to buy your newborn baby, maybe you don't trust him and
you don't sign the key.
In the case of something like a key-signing party, (as Daniel described)
you're really only confirming that (1) you've validated that they have
something that you believe to be a valid government id, (2) You've
validated their key's fingerprint in person, and (3) you've validated
that they somehow control the attached email address.
It is possible to assign different levels to your signature, so that you
can distinguish between people you met at a software conference, and
that guy who was your cellmate in that Turkish prison for 12 years.
It's also possible to provide a link to an URL with your keysigning
policy, where you can explicitly spell out the meaning of each level of
certification to you.
Keep in mind that the web-of-trust isn't the mafia.  If you 'vouch' for
someone and they turn out to be a rat, nobody's going to two bullets in
your chest, and one in your head.  Mistakes happen.  You can always
revoke your signature if you start to doubt the key's validity.  You
haven't made a mistake that will haunt you for the rest of your life.
And if you're still worried about elaborate and obscure attack
scenarios, then maybe the web-of-trust just isn't for you.  This is
perfectly fine.  Just sign your real-life contact's keys with a local
sig, which won't get exported to the keyservers.

@_date: 2011-04-08 14:38:41
@_author: Grant Olson 
@_subject: Do not conflate key+userID certification with "vouching" [was: 
We're on the same page here, although I probably made my point sloppily.
 Two definitions of vouch:
1. Assert or confirm as a result of one's own experience that something
is true or accurately so described.
2. Confirm that someone is who they say they are or that they are of
good character: "someone could vouch for him".
A sig is the first definition.  Organized crime is the second.
Jan seems to be worried that if he signs a key, and Eve is somehow
illegally using an email or whatever, that his signature would add some
sort of credibility or trust measurement to Eve when she initiates her
Nigerian 411 scam.  I was (sloppily) saying that the signature implies
no such thing.
Like I said, if you want to do this, using certification levels and a
signing policy might be a less ad-hoc way of accomplishing this.  (Not
that any clients currently do anything with that info.)  And yes,
there's still a distinction between the acutal person and their key.
Like you say below, attaching various certification levels may actually
be undesirable and leak more personal info than some people want out there.
"I am gravely disappointed. Again you have made me unleash my dogs of war."

@_date: 2011-04-08 14:59:00
@_author: Grant Olson 
@_subject: keys not available for signed messages in this maillist 
You missed the last digit of the key id:
You also need start that with 0x so it knows it's a hexadecimal key id.
And you probably want to use my primary key.  but either:
gpg --search-keys 0xA18A54D6
gpg --search-keys 0xE3B5806F
Should work.

@_date: 2011-04-09 20:41:04
@_author: Grant Olson 
@_subject: Is anyone using a SPR-332 smart card reader? 
I've been having some trouble.  Basically, gpg2 (from git's
STABLE-BRANCH-2.0) will prompt for a pin, but even if I enter the right
one the unit buzzes.  Looking at the logs, they report that pin entry
was canceled.
Any time I try to search around, I end up at the same thread from 2006:
Which implies there was a similar minor problem that would be fixed shortly.
If I use gpg without gpg-agent, I get a prompt for the pin via the
shell. not the pinpad, and then operations actually work.
I thought this model was basically the same as the SPR-532 that Kernel
Concepts sells, minus a serial port connector, so I'm really surprised
that it isn't working.
Just wondering if anyone has this reader, and if it's working for them,
before I try some more in-depth diagnostics and debugging.

@_date: 2011-04-10 16:42:14
@_author: Grant Olson 
@_subject: Signing a key (meaning) 
The biggest benefit is that you can actually email the person. ;-)
If you don't believe or know (to a reasonable degree) that a person has
control of his email, then you can't communicate with them securely by
email.  At best, they never get the message and it's pointless.  At
worst, some hypothetical exploit by some hypothetical attacker
compromises your communications.  (Developing this hypothetical attack
is left as an exercise to the reader...)
You could use something like pgpboard or a usenet group.  You could
fedex them a usb stick.  You could use a carrier pigeon.  In which case,
yes, their email address is irrelevant for your purposes.  But an
overwhelming majority of people are going to prefer email to the
In the case of your friend, who you've already been communicating with,
I don't think sending the signature to his email address performs any
additional verification.  But that's because you've already established
a few conditions of key validity, not because you don't care if he
controls an email account or not.
You already have good reason to believe that: (1) you know his real
world identity, because you know him in the real world.  (2) He has
control of the communication endpoint (the email address) because you've
been emailing him back and forth.  When those two conditions are already
established, you only need to verify the fingerprint directly to
establish there's not a MITM attack.
I think the email check is more useful and perhaps even required for
something like a key-signing party, where you've never engaged in email
communications with this person before.  You start off with everything
about this person as an unknown.  You need to (1) examine a government
issued id to verify this persons real-world identity.  (2) Get the
fingerprint directly to demonstrate that he actually controls the key in
question; he's not a MITM.  (3) Send the info to the email tests that he
actually controls the endpoint he claims to control.

@_date: 2011-04-11 13:06:48
@_author: Grant Olson 
@_subject: Signing a key (meaning) 
The obvious example is the standard MITM attack.  They don't have access
to a person's inbox, but they intercept messages before it gets to their
ISP's mail server, and re-encrypts it to the 'real' key.  They still
don't have control over the endpoint, they can't read, modify, or delete
existing messages, but they can modify things in transit.
Again, I think you can probably start with a different set of base
assumptions when signing an associate's key and a stranger's key.
And some people have reasons I can't even fathom:
johnmudhead:~ grant$ gpg --keyserver pool.sks-keyservers.net
--search-keys president at whitehouse.gov
gpg: searching for "president at whitehouse.gov" from hkp server
(1)	Barak Obama (I'm the president) (2)	Barack Hussein Obama (DOD) (3)	BUsh the past coming... (4)	clinton_lewinsky (5)	ElPresi! (the president of the white house...) (7)	George Bush (I am a fag. I support the NWO.) (9)	BushBush (10)	John Kerry (11)	George Walker Bush (DOD) Keys 1-11 of 24 for "president at whitehouse.gov".  Enter number(s), N)ext,
or Q)uit >
I personally don't think there is one.

@_date: 2011-04-11 18:49:10
@_author: Grant Olson 
@_subject: Signing a key (meaning) 
I don't think it counts as the middle if you have access to the email
If I've got your logon info, and I'm accessing your account that way,
it's no longer invisible when I try to quickly delete the original
message and throw up a fake replacement.  You might see a message hit
the inbox, get deleted, and see a similar one pop up from your mail
client.  And if you reply to the forged message, I can't stop that from
going out into the world to trick the other party.

@_date: 2011-04-11 19:34:11
@_author: Grant Olson 
@_subject: Signing a key (meaning) 
Yes, of course.  I was referring to the scenario somewhere in this
thread where a malicious user has illegal access to your email account.
 For that case, I have a hard time conjuring up a reliable exploit where
people are sending you stuff that gets to your inbox with the attacker's
key, and you don't notice anything suspicious.

@_date: 2011-04-17 19:39:42
@_author: Grant Olson 
@_subject: A better way to think about passwords 
I think it's worth noting that the low entropy of english (you quoted
2.5 bits per char in another thread) isn't just an academic issue.  Real
password crackers actually do employ multiple strategies and passes in
order of complexity.  For example, starting with dictionary, then
dictionary w/leetspeak, eventually brute force, etc.
My other big gripe with this article is that it completely ignores the
possibility of an offline attack against the hashes.  It's assuming that
the limiting factor is the number of times you can access a webpage.
I've been goofing around with BitCoin this weekend, and my MacBook Pro
is generating about 2 Million SHA256 hashes a second.

@_date: 2011-04-17 20:00:18
@_author: Grant Olson 
@_subject: A better way to think about passwords 
Apologies, actually you didn't say this.  You said, "English text has in
the neighborhood of 1.5 to 2.5 bits of entropy per glyph."  Just
correcting myself because I know how annoying it is to be misquoted.

@_date: 2011-04-17 22:50:17
@_author: Grant Olson 
@_subject: A better way to think about passwords 
That's back-of-the-envelope math, based on having to resort to a brute
force attack.  If you're using English words, then ask yourself how many
letters can follow the letter q.  There's obviously only one, and that's
u.  Now those two characters that should have 26^2 possibilities
according to the back-of-the-envelope math really only be 26^1
Allow me to digress for a little bit.  I've been reading a book on Game
Theory.  It explained the best possible strategy for winning
rock-paper-scissors.  If you don't already know the answer, take a
second and try come up with an ideal strategy for the game.
It turns out the perfect strategy is to make real random selections.  If
you do this, over time you'll end up with a 50% win rate against any
opposing strategy.
If you attempt to use any strategy other than that, your opponent can
develop a counter-strategy that beats you.  And then you can develop a
counter-counter-strategy to beat them.  And they can... Well it's like
that scene in the Princess Bride where the villain analyzes the hero's
strategy to determine which cup is poisoned.  You can't win.
Back to passwords.
If you develop a completely random string consisting of nothing but a-z
and a minimum length of 15, then yes it will take on average half the
total time listed in that article to crack the password.  And yes, that
is better than the eight digit "p at ssw0rd".
But if you don't, and you use a dictionary word, or a dictionary word
with l33t-sp34k, or two dictionary words, your opponent can develop a
strategy that beats the average case brute force time.  And your
opponent actually does this now.  The McAfee article conveniently
ignores that the Cane & Abel can do dictionary attacks, and it can do
rainbow table lookups.
Given how much I've seen the original article you posted in the last few
weeks, I'm sure the people who write password crackers are coming up
with multiple-dictionary-word strategies, assuming they haven't already.
And the kicker is, even if they run through all of these strategies and
must eventually fall back on a brute-force attack, it's not much more
computationally expensive to do so.  All these strategies might account
for something like 1% of the total search space.  They'll still
ultimately get the totally random password in about the same average
time, but they'll get many not-so-random passwords out of the way much
much more quickly.
The seventeen character "imtoosexyformycar" may be much much easier to
hack than the seventeen character "qkgfnroefdsoeyhzz" depending on your
opponent's strategy, and it may not, but it'll never be significantly

@_date: 2011-04-18 14:09:30
@_author: Grant Olson 
@_subject: A better way to think about passwords 
There are more than a few password managers and generators that do have
the option to create pronounceable passwords like you're talking about.
 Gibberish, but where the consonants and vowels are arranged in a way
where you can read it out loud:

@_date: 2011-04-18 14:10:35
@_author: Grant Olson 
@_subject: A better way to think about passwords 
DOH!  Need more caffeine.  I thought you were saying you wished APG had
that feature.

@_date: 2011-04-19 15:42:59
@_author: Grant Olson 
@_subject: Gnupg-users Digest, Vol 91, Issue 30 
For an OS or some rpc call, a three strikes rule makes sense.  An
attacker is attacking from an outside system, you still have control of
your system, and the login is a barrier between the two.
But an encrypted file can be on the attacker's system.  We could
conceivably add a three-strikes option to gnupg, but since the OpenPGP
standard is published and gnupg is open source, a malicious user could
just write their own program that doesn't have a delay, or run a
modified copy of gpg.  It's the same with a zip file.  You can't enforce
the rule in any reliable way.

@_date: 2011-04-27 02:29:51
@_author: Grant Olson 
@_subject: Passphrase 
If you're only worried about the revocation certificate, and not
recovering encrypted documents, then not being able to revoke the key
isn't the end of the world.  There are plenty of dead keys floating
around the keyservers.
Issuing a revocation would be more critical if you thought the key had
been compromised.  But if the private key inaccessible to everyone,
including you, I don't think there are any exploits you need to worry about.
Just create a new key and let your contacts know about it.  If someone
sends something to your old key, just reply letting them know you don't
have the key, and they need to encrypt to your new one in the future.
(And of course take a little more care with your backups and revocation
certificates this time around.)

@_date: 2011-08-23 12:56:45
@_author: Grant Olson 
@_subject: Smartcard PIN may be shorter than passphrase? 
The minimum normal PIN is 6 characters, and the minimum admin PIN is 8.

@_date: 2011-08-24 13:46:08
@_author: Grant Olson 
@_subject: a Question about Key Servers 
No.  Users need to manually refresh their keys periodically to get changes.
But people can be lazy about this.  One way to force them to refresh is
to have an expiration date that you bump up (for example) every year.
Then after your key expires, they'll need to refresh and get any other
changes as well.
It depends.
If you revoked the key because it's compromised, then you probably want
to notify important contacts.
If you add a new UID, for example your new work email, and an existing
associate only contacts you on your personal email, things will keep on
working even if they don't have the new UID.
If the key expires on someone's local keyring, they'll need to re-fetch
it to get updates.  So you could probably do nothing  Some people will
refresh automatically when they see the key is expired.  Others will
tell you your key is expired, in which case you can tell them they need
to refresh.

@_date: 2011-08-30 14:58:38
@_author: Grant Olson 
@_subject: Migrating to Smartcards 
I actually found this to be really annoying in day-to-day use when I
tried to use two cards with the same key.  gpg really wants you to have
one card tied to one set of keys per computer.
If you're only using one on the road, and one at home, I guess that
wouldn't come up though.

@_date: 2011-02-05 14:24:56
@_author: Grant Olson 
@_subject: IPC call failed 
What OS? What version of gnupg?  What commands are you trying to run?
How are you trying to run them:  batch file, command line, program like
enigmail, somethign else?  Have you verified that gpg-agent is actually
running?  Etc.

@_date: 2011-02-07 12:20:01
@_author: Grant Olson 
@_subject: Problems to migrate keys between two windows pcs 
My guess is that you didn't actually import the secret keys.  That would
affect your ability to decrypt, but of course the secret key isn't
required to encrypt.
If you run 'gpg --list-secret-keys' on the new machine, does it show the
keys you need?
If that is the problem, you could either run something like "gpg
--export-secret-keys > secret.keys" on the original machine and import
the generated file on the new machine, or copy over secring.gpg.
If you have the secret key, maybe double-check the trust level for the
secret key.  That should be set to ultimate.

@_date: 2011-02-09 15:27:13
@_author: Grant Olson 
@_subject: gpg --check-sigs should indicate if a signature is made by a 
The man page does say that this is intentionally not done for
performance reasons:
       Same as --list-sigs, but the signatures are verified.  Note that
       for performance reasons the revocation status of a  signing  key
       is not shown.  This command has the same effect as using --list-
       keys with --with-sig-check.
But shouldn't a user let the trust calculations do their magic and break
the WoT to Bob's key once Alice's key has been revoked?  Before the key
was valid because Alice had full trust, now it's unvalidated because
Alice's key is revoked.
It seems like this attack only works if you ignore the WoT and
explicitly start signing keys X-degrees-of-separation away without
proper verification.  (Not that I'm saying I can't conceive of real
people doing this.)

@_date: 2011-02-12 19:41:26
@_author: Grant Olson 
@_subject: How do I import an X.509 Certificate onto an OpenPGP smartcard? 
In both the product description for the OpenPGP V2.0 card and the spec
itself there is some discussion of a "Cardholder Certificate" Data
Object in the V2.0 cards.
I've got one of those free X.509 email certificate from Comodo, and was
attempting to upload it to the card.  I can import the .p12 file into
gpgsm, but then it resides in a file under .gnupg.
Firstly, can I actually import a certificate like this onto the card?
Or do I simply misunderstand the specs?
Secondly, is there a command somewhere in gpg/gpgsm/gpg* to do this, or
is it specified and implemented on the OpenPGP card only at this point
in time?
Thirdly, the SCUTE docs start by generating a certificate request from
your OpenPGP authentication key.  In this scenario, are you just using
the Same RSA key for both your OpenPGP and X509 certificates?  Does the
certificate imported into gpgsm just contain the public key and the CA's
signature and somehow defer operations to the card?

@_date: 2011-02-13 12:46:02
@_author: Grant Olson 
@_subject: Help with OpenPGP plugin in Mozilla Thunderbird and Claws Mail 
They short answer is yes, it contains everything.  If you add another
user's public key to your keyring, it will contain everything minus the
secret key.
Signing works in reverse compared to encryption.  With encryption,
anyone can generate an encrypted message with your public key, but only
you can decrypt it because only you have the private key.  With signing,
only you can generate a valid signature because only you have the
private key, but anyone with your public key can verify the signature.
Signing a message to a complete stranger won't compromise your private
part of the key in any way.

@_date: 2011-02-15 11:12:08
@_author: Grant Olson 
@_subject: Help with OpenPGP plugin in Mozilla Thunderbird and Claws Mail 
In my opinion, the easiest way is to:
1) Send your key to a keyserver like pool.sks-keyservers.net.  Rest
assured this only sends the public part of your key.  (In
Thunderbird/Enigmail you do this by going to OpenPGP -> Key Management
-> Right clicking on your key -> Upload public keys to keyservers)
2) Send a signed email to the person you want to correspond with.
That person can then import the key and verify the signature.  And once
they have your key they can encrypt to you.
If you don't want to send your keys to the keyserver, you can email them
a copy of the key.  (In Enigmail you do this by going to OpenPGP -> Key
Management -> Right clicking on your key -> Send public keys by email.)
If you want to test everything out, there is a robot email address at
adele-en at gnupp.de .  If you try to send that your public key, it well
tell you if you did everything right or not, and suggest some next steps
to continue testing.

@_date: 2011-02-16 00:33:23
@_author: Grant Olson 
@_subject: ld.so.1: gpg: fatal: libusb.so.1: open failed: No such file or 
Completely off-topic, but this reminded me of Raymond Chen's ongoing
series about psychic debugging:

@_date: 2011-02-26 21:36:57
@_author: Grant Olson 
@_subject: SCR3310 reader working for root, but not scard group 
That doc is pretty out of date, at least regarding hardware
configuration.  You shouldn't need to do anything config-wise to get a
CCID-enabled reader working these days.  I've used my SCR3310 on Ubuntu
10.10 as well as 10.4 without any problems and without having to do any
manual configuration.
I do seem to remember that I had to install the gpgsm package.  For some
reason the smart card daemon program was bundled there.  You might want
to give that a try.  (But I guess that'd only matter if you have
'use-agent' configured or are running gpg2 instead of gpg.)
You also might want to make sure that root or another user didn't grab
on to the reader and refuse to release the resources while you were
testing, either by looking at your processes, or doing a good
old-fashioned reboot.

@_date: 2011-02-26 22:10:49
@_author: Grant Olson 
@_subject: Smart Card Physical Best Practices? 
I usually just leave it in until I leave the computer for lunch or a
meeting or whatever.
One thing I didn't realize at first, is that once you've unlocked either
your encryption or authentication key, it will remain unlocked as long
as the card is powered up, regardless of any password cache settings
you've set in your gpg configuration.
If that bothers you, but you don't want to keep yanking and inserting
the smartcard, you can kill the scdaemon process and it'll effectively
'unplug' your card.  I'm pretty sure there's an easier command to do
this too, but I can't remember it off-hand.
But I personally just assume I'll notice the blinking activity light on
my reader if some malware script or something weird tries to run gpg
commands while the card is activated.

@_date: 2011-02-26 22:29:55
@_author: Grant Olson 
@_subject: SCR3310 reader working for root, but not scard group 
If you issue a smartcard related command before the reader is plugged
in, or unplug the reader and replug after scdaemon is running, the
process will lock up and you need to kill it.  There is a fix for this
in the git repository, but won't be available otherwise until the 2.0.19
release, whenever that happens.

@_date: 2011-02-26 23:45:43
@_author: Grant Olson 
@_subject: GnuPG Card with ssh authentication problems 
"ssh-add -L" does this a little better.  But yes, the more obscure
features in gpg get, the more obscure the documentation is. ;-)
You can check to see if gpg-agent knows about the key by checking the
contents of ~/.gnupg/private-keys-v1.d/.  If there's nothing there, the
key didn't make it into gpg-agent:
grant at johnyaya:~$ ls /home/grant/.gnupg/private-keys-v1.d/
Another thing that might help...
If gpg-agent is working properly, it'll also import your old keys like
~/.ssh/id_rsa, asking you for an old password, and then asking for a new
password to save, and generating a file under ~/.gnupg/private-keys-v1.d/.
So you could try creating normal ssh keys, adding those to your
authorized keys file normally, ssh'ing normally, without gpg-agent.  If
all that works, enable gpg-agent again and see if pinentry takes over
when you ssh to the box, and tries to import ~/,ssh/id_rsa.
That will at least let you know if it's gpg-agent or the card that's
giving you problems.

@_date: 2011-02-27 00:15:57
@_author: Grant Olson 
@_subject: GnuPG Card with ssh authentication problems 
The exact same issue came up a month ago:
Maybe this is worth a FAQ entry on the website.

@_date: 2011-02-27 14:16:14
@_author: Grant Olson 
@_subject: GnuPG Card with ssh authentication problems 
If you want someone to cleanup and update the howto, I volunteer.  I
just need to know the name of the cvs project.  'card-howto' didn't seem
to work.

@_date: 2011-02-27 15:00:00
@_author: Grant Olson 
@_subject: PGP/MIME considered harmful for mobile 
Hash: SHA512
Hey guys,
Both camps can argue all day and they're not going to change anyone's
Both standards are valid, one doesn't supersede the other, and if you're
interested in OpenPGP, you're probably want to run a mail client that
can handle both Inline and PGP/Mime messages.  If your contacts aren't
interested, they should at least be able to read your emails.
Which takes us back to the start of this conversation.  Apparently
Robert's mail client on Android doesn't like PGP/MIME messages, and
won't display the body of a PGP/MIME message.  Several other people have
said that the default mail client shows the message body just fine, and
that alternate mail clients like K-9 do the same.
Can we narrow down exactly when PGP/MIME is broken on droid phones?
Maybe start a new thread where people report their results since this
one is getting pretty big and has many side arguments?  Subject "Android
PGP/Mime Test"  List whether or not your phone displays PGP/Mime
messages, the model and manufacturer, droid version, email client and
I do have a droid, but I don't use email on it.  I'll fire up a test
account and report back.
I suppose if anyone wants to test on an iPhone, Blackberry, or other
smartphone, that info would be handy as well.

@_date: 2011-02-27 15:26:43
@_author: Grant Olson 
@_subject: Android PGP/MIME test results 
Provider: Boost
Manufacturer: Motorola
Model: I1
Droid version: 1.5
This phone has two mail applications by default, one called 'email' and
another called 'gmail'.  Both displayed PGP/MIME messages without any
trouble.  Neither verified sigs of course.
I see no easy way to determine the version number of either of these
apps.  If anyone has tips on how I can get this info, let me know.

@_date: 2011-02-27 22:59:39
@_author: Grant Olson 
@_subject: PGP/MIME considered harmful for mobile 
Especially on a list where many people self-identify as newbies.
I've been toying with the idea of expiring my key and seeing how long it
takes for anyone to notice.  In fact, I've just decided I will do this
sometime in the next year.  It'll be interesting to see how long it
takes people to notice even after I've announced my intentions.
If anyone remembers this conversation when I do this, please let me know
my key is expired off-list, so we can collect more data than the first

@_date: 2011-02-28 00:27:55
@_author: Grant Olson 
@_subject: Android PGP/MIME test results 
It's worth a lot.
Since the rational behind this thread is buried in a long convoluted
thread about PGP/MIME vs PGP/Inline, allow me to re-explain.  I imagine
some people got sick of that thread and are ignoring it.
It seems Robert experienced the "Outlook Express" problem on his Droid,
where a PGP/MIME message didn't get displayed properly on his phone, and
instead showed a blank message.
I just wanted to gague how severe the problem was, by getting feedback
from various people's smartphones.
So if you've got a smartphone, and you check your email on it, please do
reply to this thread, letting me know:
- The service provider
- The make and model of the phone.
- The droid version.
- The email application(s) installed.
- If said application(s) displayed the text of a PGP/MIME message so
that you could read the message.
- If said application(s) could verify a message.  (The answer here is
probably no, but it seems like at least one person said K-9 mail could
verify PGP/MIME.)
- Any other pertinent information.
That'll help everyone gauge the severity of the problem and adjust their
preferences accordingly.

@_date: 2011-02-28 00:35:58
@_author: Grant Olson 
@_subject: PGP/MIME considered harmful for mobile 
Yep, basically I will set my key to expire one day later and push it to
the keyservers.  I will intentionally not retrieve the updated
expiration on my machines and continue to sign as usual.  And see how
long it takes people to catch on.
I've always wondered how many people would actually realize a key has
been revoked after publishing a revcert to the keyservers.  If could
undo a revocation, I'd do that instead.  But I think a expiration is a
good enough simulation.  It should cause people to raise some eyebrows
if they're refreshing their keyrings regularly.
I've already got a date picked out.  You've been warned... ;-)

@_date: 2011-02-28 12:34:25
@_author: Grant Olson 
@_subject: Question regarding shared keys 
David's talking about an advanced scenario.  And maybe the company did
do this, but I've got a feeling you might be over-thinking things.
Normally, if you encrypt a file to four users, each user has their own
key that's completely independent of the other users.  If you're trying
to see if the file was encrypted to another manager, who hopefully
hasn't conveniently 'lost' his key, you can examine the encrypted file
and get a list of the keys it's encrypted to.
So for example, here you can see that even if I claim to have lost my
key, David is another person who could decrypt the contents...
johnmudhead:~ grant$ gpg -r kgo at grant-olson.net -r dshaw at jabberwocky.com
 --encrypt bar.txt
File `bar.txt.gpg' exists. Overwrite? (y/N) y
johnmudhead:~ grant$ gpg --list-packets bar.txt.gpg
:pubkey enc packet: version 3, algo 1, keyid 1458BCCB6A8F7CF6
:pubkey enc packet: version 3, algo 16, keyid AE2827D11643B926
:encrypted data packet:
gpg: encrypted with 2048-bit ELG key, ID 1643B926, created 2002-01-28
      "David M. Shaw "
gpg: encrypted with 2048-bit RSA key, ID 6A8F7CF6, created 2010-01-11
      "Grant T. Olson (Personal email) "
:compressed packet: algo=2
:literal data packet:

@_date: 2011-02-28 12:45:54
@_author: Grant Olson 
@_subject: plateform supported ? 
And perhaps invest 15-20 minutes giving the software a basic trial run.
This document provides a good overview of the software:

@_date: 2011-01-02 17:13:10
@_author: Grant Olson 
@_subject: Fingerprint useless if not self-signed key? 
gpg provides many options for backward compatibility and
interoperability with other OpenPGP implementations.  I'm presuming
David is talking about this:
    Allow the import of keys with user IDs which are not self-signed.
This is only allows the import - key validation will fail and you have
to check the validity of the key my other means. This hack is needed for
some German keys generated with pgp 2.6.3in. You should really avoid
using it, because OpenPGP has better mechanics to do separate signing
and encryption keys.
As you've said, I'm not sure how plausible it is to worry about that
attack scenario.  If someone is in a position gto modify your gpg.conf,
there are much easier ways to attack you than modifying that setting and
tricking you into loading an non-self-signed key years later.
That's technically correct-- the best kind of correct.  If I were
writing an introduction to OpenPGP, I'd focus on the purpose of the
fingerprint, and not the implementation details of keys and subkeys and
signing, and all that.
A fingerprint:
1) Allows you to verify that the key you have is the one you think you
have, and it hasn't been forged or modified.
2) Is only useful if obtained via an out-of-band channel, such as
meeting in person or over the phone.  If someone can forge one email,
they can forge another.  Same with webpages or keyservers.
3) Only authenticates the key itself.  It doesn't do anything to
authenticate the user.  It doesn't prove that jack_bauer at ctu.gov is who
he says he is.  That's up to you.

@_date: 2011-01-02 19:50:05
@_author: Grant Olson 
@_subject: Signing 
And of course there are also no fixed semantics for the UID.  It's just
a random string.  gpg arguably obscures this by asking you three
questions when generating the ID, but the ID string can be anything.
So ultimately, a signature is saying "I believe this arbitrary ID,
whatever it is, is valid, by whatever method I used to validate it."
OpenPGP lets you describe your own security model, which is its blessing
and its curse. ;-)
That's where the trust rating comes into play.  It's how much you trust
another person to sign keys in a way you consider appropriate.  Validity
is how much you 'trust' that the key itself is valid.  That can be a bit
confusing at first.
I for one trust the PGP Global Directory just fine, at least for casual
communication.  That performs the opposite certification that we're
talking about.  It validates that the email address is controlled by the
key owner (baring a man-in-the-middle attack), and does nothing to
validate the person himself.
But anyway, I'd be reluctant to sign a key that said something like
"Grant Olson (Nightwatch Division) " if I knew this person
had no affiliation with the FBI, or didn't know that he did, whether or
not I thought the owner of the key could exploit the bogus email address.

@_date: 2011-01-11 22:56:58
@_author: Grant Olson 
@_subject: Official gnupg signing key (0x1CE0C630) expired 
I'm assuming this just needs the year end bump.  Looks like it expired

@_date: 2011-01-17 16:03:03
@_author: Grant Olson 
@_subject: Do smartcards stay unlocked forever by design? 
Hey all,
I've been using a smartcard for several months now.  It's a cryptostick
if the model is important.  Every time I sign something, it asks me for
my pin.  But once the card is unlocked, ssh authentication and
decryption seem to happen forever, regardless of any ttl-cache settings
in gpg-agent.conf.  I just want to make sure I understand the semantics
It seems:
1) Once I enter my pin, the card is unlocked as long as it's connected.
2) I get prompted when making a signature because the sig counter gets
incremented, and that's a write operation to the card.  Decrypting and
authenticating don't prompt because the operations don't write to the card.
3) The proper way to 'lock' the card is to remove it from the reader.
Is this correct?

@_date: 2011-01-25 12:16:02
@_author: Grant Olson 
@_subject: SSH authentication using OpenPGP 2.0 smartcard 
Did you create an authentication key?  You might only have signing and
encryption keys.  You need a third key for authentication.  (A quick
look at pool.keyservers.net doesn't show an auth subkey.)
I just setup Debian 6.0RC1 last week.  I have a key I've already been
using to ssh.  I had no problems.  Just needed to add some stuff to
.bashrc as documented in the manpage for gpg-agent.

@_date: 2011-01-25 12:39:33
@_author: Grant Olson 
@_subject: SSH authentication using OpenPGP 2.0 smartcard 
Actually, I also needed to run 'gpgkey2ssh 0xDEADBEEF >>
~/.ssh/authorized_keys" so I could ssh into the box as well.

@_date: 2011-01-25 23:21:53
@_author: Grant Olson 
@_subject: Future plans for implementation of other algorithms 
I think it's really the OpenPGP specs that drive the algorithms included
in gnupg.  There's no point in adding something if other OpenPGP
implementations don't understand it.
Right now there's a draft RFC to include Elliptic Curve Cryptography in
OpenPGP, but it hasn't been finalized yet.  That's probably the next big
algo.  Just this week on gnupg-devel, Werner announced a git branch
containing an implementation of Elliptic Curve Cryptography for 2.1.
Even after that code hits the gnupg mainline and the RFC gets approved,
it might be a while before you can reliably assume people can handle
ECC, given the number of people and distros that still default to 1.4.
(Not that I'm saying there's anything wrong with using 1.4; I just doubt
ECC will be back-ported.)

@_date: 2011-01-26 16:03:18
@_author: Grant Olson 
@_subject: Future plans for implementation of other algorithms 
That was completely uninformed speculation on my part.
But I still think that like any new standard and technology, even after
ECC makes it into an official gnupg release, it'll probably be years
before you'll be able to use it on a general purpose key, due to any
number of systems or users that won't instantly support ECC in OpenPGP.
That was really my main point.

@_date: 2011-01-26 19:58:12
@_author: Grant Olson 
@_subject: SmartCard Import/Export 
I just got a card and reader from them.  They did everything by the
book.  There was a customs declaration on the outside of the box.  They
even had an FCC clearance for the reader inside the box just in case
customs decided to open it up.  (They didn't.)
Meanwhile, when I ordered a crypto-stick from the GPF I'm pretty sure it
just showed up in a yellow envelope with a hand-written address.  I
don't think it had any customs declaration or anything.  And that showed
up just fine as well.
I don't think you have anything to worry about.

@_date: 2011-01-29 00:28:37
@_author: Grant Olson 
@_subject: ID-000 SmartCard Form Factor 
As far as the cards themselves, you can used the ID-000 cards in a
full-sized reader or pop the chip out.  So if you have any doubt there,
you can get the ID-000 card and keep your options open.
I don't think the readers make that much of a difference either.
In theory, it's nice that the ID-000 readers will fit on your keychain,
and you can use them anywhere.  But in practice, personally I'm either
working at home or have my laptop bag with me.  I'm not using a smart
card at a computer lab or a library or something like that.
In theory, a full-sized card and reader would be nice if you used
multiple cards, like a separate ID to sign software or something, or
different users on the same computer, but most people probably don't
have to worry about that.  A full-sized reader also has a cord, which
can be convenient if it's hard to get to your USB ports, instead of
climbing behind some desk every day.
If you're already leaning towards a thumb-drive sized reader, that
should work just fine.

@_date: 2011-01-29 13:54:11
@_author: Grant Olson 
@_subject: Did I just fry my smartcard? 
This is actually a spare card I was just messing around with, not my
main one.  It's a standard OpenPGP v2.0 card from g10.
I wanted to reset the card to the factory defaults and mess around with
the onboard key generation.  I issued the series of commands listed
here, among other places:
After that, the card wasn't reset, was locked out, and it won't do
anything useful.  If I run a command like gpg --card-status, I'm
prompted with:
gpg: detected reader `SCM SCR 3310 [CCID Interface] 00 00'
gpg: pcsc_connect failed: sharing violation (0x8010000b)
gpg: apdu_send_simple(0) failed: locking failed
Please insert the card and hit return or enter 'c' to cancel:
gpg: pcsc_connect failed: sharing violation (0x8010000b)
gpg: pcsc_connect failed: sharing violation (0x8010000b)
gpg: apdu_send_simple(0) failed: locking failed
And if I try to issue the apdu sequence manually, nothing responds.
grant at johnsmallberries:~$ gpg-connect-agent
ERR 100663351 Invalid value ERR 100663351 Invalid value ERR 100663351 Invalid value Does anyone have any tips for resetting the card, or am I out of luck?
On the plus side, I can confirm that the Admin Password Lockout does
indeed work as advertised.  I've always wanted to give that a try.  ;-)

@_date: 2011-01-30 11:18:56
@_author: Grant Olson 
@_subject: Did I just fry my smartcard? 
DOH!  I think it was gpg-agent.  If I use gpg2 I get these results:
grant at johnyaya:~$ gpg2 --card-status
gpg: OpenPGP card not available: Not supported
grant at johnyaya:~$ gpg2 --card-edit
gpg: OpenPGP card not available: Not supported
gpg: OpenPGP card not available: Not supported
With those options enabled, I tried issuing the reset codes.  First time
it complained because no card was inserted.  Second time it complained
because it couldn't find a supported application on the card.  I'm not
sure if that message is normal when the card is in admin-lockout mode,
or if it indicates there are more serious prolems with the card.
grant at johnyaya:~$ gpg-connect-agent
ERR 100663406 Card removed ERR 100663406 Card removed ERR 100663351 Invalid value ERR 100663351 Invalid value ERR 100663351 Invalid value   5 - 2011-01-30 11:12:40 scdaemon[3871]: updating slot 0 status:
0x0007->0x0004 (7->8)
  5 - 2011-01-30 11:12:40 scdaemon[3871]: sending signal 12 to client 3871
  5 - 2011-01-30 11:12:42 scdaemon[3871]: updating slot 0 status:
0x0004->0x0007 (8->9)
  5 - 2011-01-30 11:12:42 scdaemon[3871]: sending signal 12 to client 3871
  4 - 2011-01-30 11:12:50 gpg-agent[3716]: chan_7 <- scd apdu 00 e6 00 00
  4 - 2011-01-30 11:12:50 gpg-agent[3716]: new connection to SCdaemon
established (reusing)
  4 - 2011-01-30 11:12:50 gpg-agent[3716]: chan_9 -> apdu 00 e6 00 00
  5 - 2011-01-30 11:12:50 scdaemon[3871]: chan_7 <- apdu 00 e6 00 00
  5 - 2011-01-30 11:12:50 scdaemon[3871]: chan_7 -> ERR 100663406 Card
removed   4 - 2011-01-30 11:12:50 gpg-agent[3716]: chan_9 <- ERR 100663406 Card
removed   4 - 2011-01-30 11:12:50 gpg-agent[3716]: chan_7 -> ERR 100663406 Card
removed   4 - 2011-01-30 11:12:56 gpg-agent[3716]: chan_7 <- scd apdu 00 44 00 00
  4 - 2011-01-30 11:12:56 gpg-agent[3716]: chan_9 -> apdu 00 44 00 00
  5 - 2011-01-30 11:12:56 scdaemon[3871]: chan_7 <- apdu 00 44 00 00
  5 - 2011-01-30 11:12:56 scdaemon[3871]: chan_7 -> ERR 100663406 Card
removed   4 - 2011-01-30 11:12:56 gpg-agent[3716]: chan_9 <- ERR 100663406 Card
removed   4 - 2011-01-30 11:12:56 gpg-agent[3716]: chan_7 -> ERR 100663406 Card
removed   4 - 2011-01-30 11:13:01 gpg-agent[3716]: chan_7 <- scd serialno
  4 - 2011-01-30 11:13:01 gpg-agent[3716]: chan_9 -> serialno
  5 - 2011-01-30 11:13:01 scdaemon[3871]: chan_7 <- serialno
  5 - 2011-01-30 11:13:01 scdaemon[3871]: no supported card application
found: Invalid value
  5 - 2011-01-30 11:13:01 scdaemon[3871]: chan_7 -> ERR 100663351
Invalid value   4 - 2011-01-30 11:13:01 gpg-agent[3716]: chan_9 <- ERR 100663351
Invalid value   4 - 2011-01-30 11:13:01 gpg-agent[3716]: chan_7 -> ERR 100663351
Invalid value   4 - 2011-01-30 11:13:09 gpg-agent[3716]: chan_7 <- scd apdu 00 e6 00 00
  4 - 2011-01-30 11:13:09 gpg-agent[3716]: chan_9 -> apdu 00 e6 00 00
  5 - 2011-01-30 11:13:09 scdaemon[3871]: chan_7 <- apdu 00 e6 00 00
  5 - 2011-01-30 11:13:09 scdaemon[3871]: no supported card application
found: Invalid value
  5 - 2011-01-30 11:13:09 scdaemon[3871]: chan_7 -> ERR 100663351
Invalid value   4 - 2011-01-30 11:13:09 gpg-agent[3716]: chan_9 <- ERR 100663351
Invalid value   4 - 2011-01-30 11:13:09 gpg-agent[3716]: chan_7 -> ERR 100663351
Invalid value   4 - 2011-01-30 11:13:13 gpg-agent[3716]: chan_7 <- scd apdu 00 44 00 00
  4 - 2011-01-30 11:13:13 gpg-agent[3716]: chan_9 -> apdu 00 44 00 00
  5 - 2011-01-30 11:13:13 scdaemon[3871]: chan_7 <- apdu 00 44 00 00
  5 - 2011-01-30 11:13:13 scdaemon[3871]: no supported card application
found: Invalid value
  5 - 2011-01-30 11:13:13 scdaemon[3871]: chan_7 -> ERR 100663351
Invalid value   4 - 2011-01-30 11:13:13 gpg-agent[3716]: chan_9 <- ERR 100663351
Invalid value   4 - 2011-01-30 11:13:13 gpg-agent[3716]: chan_7 -> ERR 100663351
Invalid value   4 - 2011-01-30 11:13:15 gpg-agent[3716]: chan_7 <- [eof]
  4 - 2011-01-30 11:13:15 gpg-agent[3716]: chan_9 -> RESTART
  5 - 2011-01-30 11:13:15 scdaemon[3871]: chan_7 <- RESTART
  5 - 2011-01-30 11:13:15 scdaemon[3871]: chan_7 -> OK
  4 - 2011-01-30 11:13:15 gpg-agent[3716]: chan_9 <- OK
  4 - 2011-01-30 11:13:15 gpg-agent[3716]: handler 0x9c50a38 for fd 7

@_date: 2011-01-30 23:26:14
@_author: Grant Olson 
@_subject: Did I just fry my smartcard? 
Okay, I solved the problem.  I'm just describing what I did for the sake
of the archives and future generations...
Numerous attempts to get the serial number of the card or issue reset
commands via gpg-connect-agent failed, on different computers, different
OS'es, etc.
I downloaded the debian package pcsc-tools.  Surprisingly, the command
'pcsc_scan' picked up on the fact that I had an OpenPGP card right away,
despite gpg-agent and gpg2 --card-status failures to recognize the card.
From there I tried the APDU reset commands via the tool 'gscriptor',
also included with 'pcsc-tools':
00 e6 00 00
00 44 00 00
Still nothing.
From the OpenPGP Card 2.0 spec, it seemed there were two commands I
could issue after TERMINATE DF (00 e6 00 00).  One was ACTIVATE FILE (00
44 00 00) which I've been trying repeatedly.  The other was SELECT FILE
(00 A4 04 00 06 D2 76 00 01 24 01 00).  So I tried that.
BAM!  It worked.  At some point yesterday I also tried to send SELECT
FILE via gpg-connect-agent, and I know that didn't work.
Not sure why gscriptor seemed to work better than gpg-connect-agent and
'scd apdu', but all's well that ends well.  The only obvious difference
is that I could just tell gscriptor to turn on the card, without having
to issue something like a serialno command to spin it up.

@_date: 2011-07-24 20:23:08
@_author: Grant Olson 
@_subject: Smartcards and readers 
I've used both an SCR3310 and an SCR3500 without problems on OSX, as
well as Windows and Linux.  The SCR3500 has a nice form factor if you
have a laptop, but I'm always afraid I'm going to accidentally smack it
on something and break it.  The SCR3310 is nice, but I wish there was a
model with a six inch cord.

@_date: 2011-07-28 02:29:05
@_author: Grant Olson 
@_subject: Including public key 
Unless you're trying to keep your key 'off the grid' I'd just send the
key to the keyservers.  Then people who use OpenPGP will retrieve the
key based on your email's signature.  People who don't care will just
ignore your sig, which will be smaller than your full public key.
If you are trying to keep the key 'off the grid' then you don't want to
include it as a generic signature either.
In general, it's best to get the key from a different source than your
signed email.  If your signature and key are in the same email, an
attacker could have forged both.  They could in other circumstances as
well, but it's less likely for someone to forge both a public key on the
keyservers (or your personal website, or your business card, etc), and a
signature on a forged email.  They need to compromise two lines of defense.

@_date: 2011-06-14 15:46:20
@_author: Grant Olson 
@_subject: Aspects of trust 
No.  It's two values.
Validity is established by signing a key, or via web-of-trust calculations.
Trust is a different value, which can be set through --edit-key, or by
running "gpg --update-trustdb"
If you sign a key, establishing validity, but don't give it at least
marginal trust, it won't be used in your web-of-trust calculations.

@_date: 2011-02-28 19:32:05
@_author: Grant Olson 
@_subject: Security of the gpg private keyring? 
There actually is a 'keyserver no-modify' setting in the spec, and by
default just about every key has it turned on.
But to honor it the keyservers would have to do crypto.  And after that
it creates an issue with syncing.  If I upload a key to
pool1.sks-keyservers.net, and it tries to sync with
pool2.sks-keyservers.net, how do you maintain the custody chain?
Both problems are, as they say in engineering-speak, non-trivial.

@_date: 2011-02-28 19:44:22
@_author: Grant Olson 
@_subject: Security of the gpg private keyring? 
I was actually just thinking about monkeysphere with regards to this
topic.  You guys basically came up with a loose pretty-obvious standard
for key names and wrote the tools from there.  Ultimately, the
keyservers don't care or need to know what a UID is at all.
I think something similar could be done with hashed emails.  Just some
(non)standard like:
But using something better than my obviously naive hash-collision
prevention algorithm.
If that could be agreed on, you could probably get a few mailing list
regulars to add that ID in addition to their normal UIDs.  From there
start with a shell script that writes out a correct 'gpg --search-keys'
request.  Then on to more advanced things, like adding hashed_uid search
to the default sks-keyserver pages, enigmail integration, etc.
Really the only problem is that MFPA is stuck doing all the work until
(if ever) the (non)standard starts to take off.  And it's a lot of work.

@_date: 2011-02-28 21:02:09
@_author: Grant Olson 
@_subject: Security of the gpg private keyring? 
So if I'm only going to accept keys authorized by the owner, I need to
validate the owner.  Instead just receiving the key:
KEY => KEYSERVER-1
I now need to receive a signed copy of they key
SIGNED(KEY) => KERSERVER-1
The keyserver would then to something like:
1. Temporarily import the KEY as a TEMPKEY.
2. Verify that TEMPKEY and SIGNATURE are the same user.
3. Verify TEMPKEY with SIGNATURE.
4. Upload verified TEMPKEY into the real database.
So far not too bad, even if the current keyservers don't do any of this.
But when it tries to sync with KEYSERVER-2, I no longer have
SIGNED(KEY).  So KEYSERVER-2 won't be able to perform the above
algorithm.  It cannot verify that KEYSERVER-1 obtained the key from the
owner in the first place.
You could store SIGNED(KEY) in your database, but then you end up
performing the above algorithm millions of times when syncing, which
will eat up a bunch of time.  10 seconds per key adds up quickly.
You could say that you know KEYSERVER-1 did an initial verification, so
you don't need to, but then a malicious or misconfigured peer could get
bad data into your database.  If you decide to stop peering with
KEYSERVER-1, then how do you know which entries in your db are possibly
compromised or invalid?
Arguably a key owner could say they only wanted their key on
gingerbear.net, not the whole sks-keyserver pool.  Or more reasonably,
that sks-keyservers shouldn't sync with PGP Corp, or gnupg.org, or
hushmail, or whoever, since they didn't explicitly authorize it.  The
correct behavior here hasn't been specified anywhere.
There are probably many more issues like that tucked away once you start
to think seriously about implementing the feature properly.

@_date: 2011-02-28 21:20:12
@_author: Grant Olson 
@_subject: hashed user IDs [was: Re: Security of the gpg private keyring?] 
I'll take a look when I get some more time.
To be honest though, I'm not particularly interested in the feature either.
I was just trying to illustrate that MFPA could get something going
without needing a new OpenPGP RFC, or without spending years of effort
until he got tangible results.  And if the (non)standard got got popular
enough, tools, whether they be keyservers or mail clients or gnupg,
would start to handle hashed userid lookups.
Even just two simple script that wrap around gnupg,
'generate-hashed-userid' and 'retrieve-hashed-userid', would be a huge
Yes, of course.  I was just thinking of the initial implementation and
testing phase.  It'd be nice if MFPA could see that the tools work
correctly, by seeing the 'before' and 'after' versions of UIDs, and
without people having to maintain a separate secret key.  I wouldn't
mind testing to help out, but I'm not throwing away my current key
anytime soon.

@_date: 2011-03-07 18:20:34
@_author: Grant Olson 
@_subject: "This key may be unsafe" 
Here's a case where the difference between < and <= is HUGE.
gnupg 1.4 only switched the defaults from 1024 DSA/ElGamal to 2048
RSA/RSA in 1.4.10, which isn't even two years old.  I still see plenty
of boxes in the wild that only have 1.4.9, and not just those ones that
are old and creaky and people are afraid to reboot for fear of an actual
hardware failure.
Like you said, I would avoid creating one that size now, but even just a
year-and-a-half ago, your mantra of "use the defaults unless you know
what you're doing" would have resulted in 1024 bit keys for most users.
Meanwhile, warning about keys < 1024 bit would be a little more
practical, at least until ECC hits the standard.

@_date: 2011-03-11 19:40:47
@_author: Grant Olson 
@_subject: For Windows 
Sorry, I don't have any windows boxes around right now, but did want to
provide two notes.
- GPG4WIN is the right package to install gpg2 on windows, so you've got
the right installer.  It's a shame GPA doesn't work with a screen reader.
- The 1.4 branch is still supported and maintained in parallel with the
2.0 branch.  If 1.4.9 is working for you, just stick with 1.4.9, or
perhaps upgrade to 1.4.11.

@_date: 2011-03-13 18:29:46
@_author: Grant Olson 
@_subject: For Windows 
I really don't want to get involved in this debate.  The same one two
weeks ago didn't change anyone's mind and this one won't either.
Last time I tested, maybe a year ago, Windows Live Mail had the same
weird behavior.  It leads me to believe that it's just a re-branded
version of outlook express.
If we actually want to add some new content the MIME vs Inline debate
this time, consider that the OP is blind and uses a screen reader.  I've
got a strong suspicion that PGP/Mime would play much more nicely with a
screen reader or braille display than PGP/Inline.

@_date: 2011-03-17 16:58:06
@_author: Grant Olson 
@_subject: keyservers 
There were a few emails on sks-devel this morning.  Apparently it is
indeed down.

@_date: 2011-03-18 13:48:47
@_author: Grant Olson 
@_subject: keyservers 
Some news is starting to pop up on sks-devel.  I know you've seen all
this, but for the sake of people who don't subscribe:
+ Kristian was out of town when things went down.
+ He's aware of the issue.  Said it was a hardware problem, and he's
expecting to have working hardware on Sunday.
+ He will be looking into more redundancy with slave dns servers in
alternate locations.
Until then, I'll just use my favorite member of the sks pool:

@_date: 2011-03-19 17:55:43
@_author: Grant Olson 
@_subject: keyservers 
It's just the only name I actually remember.  Not sure if it's because
of the distinctiveness, or the repeated exposure via John's sig...

@_date: 2011-03-20 16:41:31
@_author: Grant Olson 
@_subject: Keyservers 
Thunderbird sigs work just fine in any configuration.  If they don't,
I'd consider that a bug in enigmail, and let them know on the enigmail list.

@_date: 2011-03-20 17:35:41
@_author: Grant Olson 
@_subject: Keyservers 
Ingo's talking about the body of the message.  Most mailing lists people
reply after the question, so it's in context when you find a thread
later, instead of before, at the top of the message.
Arguably, when reading a message out of context, it's easier when most
people see:
QUESTION: What is the secret to life, the universe and everything?
ANSWER: 42
Rather than:
ANSWER: 42
QUESTION: What is the secret to life, the universe and everything?
Which is what happens when you 'top-post' your answer at the top of the
If it's hard to do compose an interleaved reply with your screen-reader,
that's fine, but you will get people complaining about it every now and
then.  If it's easy, you probably want do to reply after people's
comments, in context, instead of before, when you're on mailing lists.

@_date: 2011-03-20 17:39:41
@_author: Grant Olson 
@_subject: KEYSERVER 
Hate to complain, but I'm only seeing one side of this conversation on
the mailing list.  I originally thought Mike posted the first message
accidentally.  Please keep it all on-list or all off-list, or it makes
no sense to the rest of us.

@_date: 2011-03-21 10:44:15
@_author: Grant Olson 
@_subject: libgcrypt git repository 
Run the commands without '/trunk'.  I'm guessing that's an artifact from
the subversion command.
git clone git://git.gnupg.org/libgcrypt libgcrypt
git clone git://git.gnupg.org/libksba libksba

@_date: 2011-03-21 16:19:59
@_author: Grant Olson 
@_subject: deniability 
If you want to get really paranoid, post to  via
a TOR connection.  That makes it difficult to show the message even
originated from you.

@_date: 2011-03-21 16:51:12
@_author: Grant Olson 
@_subject: Revoke signature from key 
But that doesn't provide any easy way for me to only trust your
identity+metadata certifications, if, for example, I trust you to sign
in your role for a company, but don't trust or care about your
personally-issued sigs.  Instead of signing your key, I need to manually
inspect any and all keys that may have your signature.

@_date: 2011-03-21 17:41:33
@_author: Grant Olson 
@_subject: Revoke signature from key 
It's manual because now I can't just sign your key, let the WoT and gpg
do it's job, and get on with my life.  I need to manually run
--list-sigs on any new keys.
Regarding your other points, I don't have any semantic problems with
what you're proposing, I just don't think it's a workable solution
today.  It seems like we're in agreement on that.

@_date: 2011-03-22 18:28:12
@_author: Grant Olson 
@_subject: what are the sub keys 
Plenty of people move existing keys to smart cards.  Generating a key
on-board is more secure, but then you're left dealing with two keys.
The old software one, and the new smart card one.  And if you've still
got an old software key to deal with, then what's the benefit of a smart
card anyway?  And the new key doesn't have any of your existing signatures.

@_date: 2011-03-22 18:47:49
@_author: Grant Olson 
@_subject: what are the sub keys 
Why wouldn't it be more secure?  Before my key was encrypted but
available on disk, and available unencrypted in system memory.  Now it's
on a specialized smart-card, completely inaccessible to the OS.
History of my key.
1) Normal key for a few months.
2) Moved the primary key offline, only used subkeys on networked
computers, and did that for a few more months.
3) Moved the subkeys to a dedicated smart card.
Sure, I can't guarantee that the NSA or a Chinese Hacker didn't
compromise my keys a year ago, but I'm still much more secure now than I
was then.

@_date: 2011-03-22 18:53:15
@_author: Grant Olson 
@_subject: 4096 bit keys 
The actual cutting edge solution is to move from RSA to ECC.  Even a
8192 bit or 16k bit RSA key isn't approved by the NSA or NIST for TOP
SECRET materials, but ECC-521 is.
ECC actually is up-and-running in the beta for gpg 2.1, but
realistically it'll be (at least) a few years before it gets mainstream

@_date: 2011-03-22 20:04:24
@_author: Grant Olson 
@_subject: 4096 bit keys 
I suppose in the sense I can't prove a negative, I don't have a cite.
There could be another recommendation out there, but I was going off of
NSA Suite B.  (Link and text follow.)   It says that RSA 2048 bit keys
can be used while transitioning to ECC, but for SECRET level only.  It
also says ECC-384 is good enough for TOP SECRET.  I just mis-remembered
that as ECC-521.
AES with 128-bit keys provides adequate protection for classified
information up to the SECRET level. Similarly, ECDH and ECDSA using the
256-bit prime modulus elliptic curve as specified in FIPS PUB 186-3 and
SHA-256 provide adequate protection for classified information up to the
SECRET level. During the transition to the use of elliptic curve
cryptography in ECDH and ECDSA, DH, DSA and RSA can be used with a
2048-bit modulus to protect classified information up to the SECRET level.
AES with 256-bit keys, Elliptic Curve Public Key Cryptography using the
384-bit prime modulus elliptic curve as specified in FIPS PUB 186-3 and
SHA-384 are required to protect classified information at the TOP SECRET
level. Since some products approved to protect classified information up
to the TOP SECRET level will only contain algorithms with these
parameters, algorithm interoperability between various products can only
be guaranteed by having these parameters as options.

@_date: 2011-03-22 20:14:53
@_author: Grant Olson 
@_subject: 4096 bit keys 
Elliptic Curve Cryptography
Since it isn't based on prime numbers, it 'scales' better than RSA or
DSA, and keys of similar security levels are much smaller.

@_date: 2011-03-22 20:29:08
@_author: Grant Olson 
@_subject: 4096 bit keys 
That's why I said "but
realistically it'll be (at least) a few years before it gets mainstream
adoption." ;-)
Even if the draft standard got approved today, and both gpg and pgp corp
had working production implementations, it'll be years before it gets to
the point where you can assume random users will be able to support ECC.
But if you just wanted to use it with your inner circle, be it an
eco-terrorist cell or a fantasy football league, you actually could
start using it today.

@_date: 2011-03-26 15:44:47
@_author: Grant Olson 
@_subject: [PGPNET] Jerome 
Can you create an easy reproducible?  Does something like this exhibit
the same broken behavior on your system?
grant at johnyaya:~$ echo foo | gpg2 --throw-keyids -r kgo at grant-olson.net
-r Lance at TheHaverkamps.net --encrypt --armor | gpg2 --decrypt -vvvv
gpg: using character set `utf-8'
gpg: armor: BEGIN PGP MESSAGE
Version: GnuPG v2.0.18-git1226772 (GNU/Linux)
:pubkey enc packet: version 3, algo 16, keyid 0000000000000000
gpg: armor header:
gpg: public key is 00000000
:pubkey enc packet: version 3, algo 1, keyid 0000000000000000
gpg: public key is 00000000
gpg: anonymous recipient; trying secret key 6A8F7CF6 ...
gpg: okay, we are the anonymous recipient.
gpg: public key encrypted data: good DEK
:encrypted data packet:
gpg: encrypted with ELG key, ID 00000000
gpg: encrypted with RSA key, ID 00000000
gpg: AES256 encrypted data
:compressed packet: algo=2
:literal data packet:
gpg: original file name=''
gpg: decryption okay

@_date: 2011-05-02 12:57:01
@_author: Grant Olson 
@_subject: Offline Master Key 
This link provides much more detailed instructions.  Maybe this link can
replace the fortytwo.ch page on the main site.

@_date: 2011-05-05 13:30:46
@_author: Grant Olson 
@_subject: Best practice for periodic key change? 
Some organizations create a master signing key, which is (supposedly)
kept secure and usually off-line.  That's used to sign the release keys.
 Then users sign the master key and/or see if the master key trusts the
key used to sign the release.
Like all the solutions proposed here, I have no idea how usable this
strategy is for people who try to verify software packages, but only
have a limited understanding of OpenPGP's trust model.

@_date: 2011-05-08 16:40:36
@_author: Grant Olson 
@_subject: Fwd: Re: Best practice for periodic key change? 
Meant to sent on-list...
-------- Original Message --------
The old releases won't have an invalid sig as long as the sig was made
before the expiration date.  Expiring a key now doesn't invalidate a sig
made yesterday.  Gpg will print out a note saying the key is expired,
but it's not as drastic as the error with a post-dated signature.

@_date: 2011-05-06 16:54:28
@_author: Grant Olson 
@_subject: Best practice for periodic key change? 
Doug is saying that if the key's been compromised, and not lost, Eve can
create a new expiration date and push that to the keyservers.

@_date: 2011-05-06 22:33:17
@_author: Grant Olson 
@_subject: Best practice for periodic key change? 
I know nothing about German laws, but that just doesn't sound right to me.
1) I digitally sign a document saying I owe you money.  The signing key
has an expiration date.
2) Key expires.  I do nothing.
3) The original document is invalidated.  I no longer owe you money?

@_date: 2011-05-07 16:31:34
@_author: Grant Olson 
@_subject: Best practice for periodic key change? 
Yes, of course.
Okay, now I understand.  It sounds like you're talking something like a
digital notarization.  That makes sense now.

@_date: 2011-05-07 18:26:58
@_author: Grant Olson 
@_subject: Best practice for periodic key change? 
That's funny.
I wanted to make sure I wasn't lying before replying.  A little later I
was deploying code to some servers.  After the update the interface said
the servers were last updated two days ago.  I was freaking out for
about five minutes until I realized I changed my system clock.

@_date: 2011-05-10 01:01:01
@_author: Grant Olson 
@_subject: Best practice for periodic key change? 
I can confirm.  The cards only get the hash and sign that.  The trouble
is the the "smart" cards are pretty dumb by modern standards.  They
don't actually know much about OpenPGP itself, they basically just do
RSA signing, encryption, and decryption.  gpg passes the minimal
operations off to the card in very simple APDU commands.
The smartcard spec itself doesn't even acknowledge the difference
between a certification sig vs a normal sig.  And even with a valid
smart-card, you still need to retrieve the public key from the
keyservers when setting up your card.  The whole public key is just too
much info to store on the card.
This is pure speculation on my part, but now that the chip-cards aren't
that powerful, and the even less powerful contact-less smart-cards are
becoming more popular, I don't expect the standard to get much more
sophisticated in the near future.  Maybe ECC gets added in the new spec,
but I can't see the stuff you guys are talking about hitting the 3.0

@_date: 2011-05-10 01:30:33
@_author: Grant Olson 
@_subject: Best practice for periodic key change? 
I haven't been totally following this thread, but...
The card itself only has one Signature key slot.  If you generate this
key on-board, that will be both the certification key and the signing
key.  If you migrate a signing sub-key, you'll still have an offline
master key.  The card itself doesn't know if you have a signing subkey
or not.  It just knows, "This is the signing key I use."
If you generate all keys on-card, you only have a master
Certification/Signing key, along with (optionally) one encryption and
one authentication key.
If you didn't generate the keys on-card, and have an offline master key,
the card itself won't know about it, but the certificate will still
imply that the on-card signing key isn't the master key, since the card
only allows one signing key and don't know the difference.
But there's no way to prove that the keys were originally generated
on-card, and weren't imported from a software private key where there
was never a separate master certification key.
I think a 'generated on card' flag is something that you could probably
fit into the constraints of a smart-card spec, if this is all you need.
 But at least in the US, you'd probably need some sort of
certification/approval process (like the NIST lab) to demonstrate to the
government that you're actually setting this flag correctly.  The same
way PGP Corp software has some government approvals that gpg will never

@_date: 2011-05-10 01:42:08
@_author: Grant Olson 
@_subject: Best practice for periodic key change? 
Okay, yeah, if the CA sets up the card, authenticates it with their
signing key, and ships it to you, then there would never be a separate
master key, no problem there.  I get the feeling the card won't like it
if you try to create a software signing key, but I'm not sure how that
will work.  I do have a spare card here if you want me to test this.

@_date: 2011-05-19 20:27:38
@_author: Grant Olson 
@_subject: Temporarily remember passphrase? 
Yes you want to use gpg-agent.  What OS are you on?  You might need to
install gpg2 if you're on Linux or Mac.

@_date: 2012-02-09 14:17:17
@_author: Grant Olson 
@_subject: Moving from openpgp card to cryptostick 
I would suggest setting up the new card off of a temp keyring using the
homedir option:
mkdir newcard
gpg --homedir newcard import backup.gpg
gpg --homedir newcard --card-edit
... etc
If that works, delete your private key from your real keyring and run
--card-status to use the new card.

@_date: 2013-02-09 18:12:35
@_author: Grant Olson 
@_subject: Best way to catch INSECURE unverified sig status when shelling 
Hash: RIPEMD160
Sorry INSECURE was actually from my test key.  The actual text is of
course WARNING.  Just wanted to note that before I was corrected...

@_date: 2013-02-09 18:09:49
@_author: Grant Olson 
@_subject: Best way to catch INSECURE unverified sig status when shelling out 
Hash: RIPEMD160
I'm currently writing a plugin that allows you to OpenPGP sign/verify
ruby software packages:
Right now I'm just shelling out to gpg and checking the status code to
determine success or failure.  When I have an unverified but good
signature I don't get an error code.
What is the best way to check for this?  I presume something like
stdout.include?("INSECURE") is not localization friendly.

@_date: 2013-02-25 19:06:00
@_author: Grant Olson 
@_subject: Questions about OpenPGP best practices 
Yep, that's the one you want.
If you are using a passphrase, your secret key will already be
encrypted.  I don't see any advantage to double-encrypting.

@_date: 2013-02-26 08:30:47
@_author: Grant Olson 
@_subject: what is the option for "Use this key anyway? (y/N) y" 
If this is a key you use regularly, and you trust its authenticity, you
can sign the key locally:
gpg --lsign 0xDEADBEEF
Then you won't get the prompt.

@_date: 2013-03-01 15:33:16
@_author: Grant Olson 
@_subject: PGP for zLinux 
Most linux distributions include gnupg by default.  I don't know if this
is the case with zLinux.  Try this from the command line to see if it's
gpg --version

@_date: 2013-03-09 19:10:20
@_author: Grant Olson 
@_subject: Fix for smartcards on some newer linux distros 
I found a few threads going back at least a year where people where
having trouble getting smartcards running with gpg2 on newer linux
distros.  Users would see this error when querying the card-status:
    gpg: selecting openpgp failed: Unsupported certificate
    gpg: OpenPGP card not available: Unsupported certificate
I just ran into the error and spent a few days banging my head against
the wall. But I got things working and thought I'd report here for
the sake of the interwebz.
 Hack fix - disable gnome-keyring-daemon
Just move gnome-keyring-daemon so it doesn't load:
    sudo mv /usr/bin/gnome-keyring-daemon
 Better fix - enable-ssh-support
After I had things running I setup gpg-agent to act as my ssh agent as
well.  Then I went to write a blog post and couldn't reproduce the
problem to copy-and-past the output.  Sure enough, after disabling ssh
support in gpg-agent, the problem resurfaced.
So that's a better fix that lets gnome-keyring-daemon run.
I'm guessing that once you enable ssh support, gpg-agent grabs access
to the smart card before the gnome-keyring-daemon.
I wrote up a more detailed blog post here:
Hope this helps some other unfortunate souls.
P.S.  Wonder if we can get a better error message since this really
has nothing to do with unsupported certificates.

@_date: 2013-03-11 08:56:36
@_author: Grant Olson 
@_subject: Fix for smartcards on some newer linux distros 
Hash: SHA1
Oh! That actually makes much more sense than what I was thinking.  I
thought it was taking over the reader device.

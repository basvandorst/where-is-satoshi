
@_date: 2015-07-08 09:51:47
@_author: =?UTF-8?B?TWFya28gQm/Fvmlrb3ZpxIc=?= 
@_subject: gpg-agent and putty/ssh agent bug 
I'm not using a smartcard (yet :)
Maybe gpg-agent thinks I am using a smartcard on the first try and then just
gives up when it doesn't find one?
The second and all subsequent tries work fine until I restart gpg-agent.

@_date: 2015-07-09 09:46:39
@_author: =?UTF-8?B?TWFya28gQm/Fvmlrb3ZpxIc=?= 
@_subject: gpg-agent and putty/ssh agent bug 
With that in mind, I disabled scdaemon in gpg-agent settings and restarted it
(killed the scdaemon as well), but I still get the same behaviour.

@_date: 2015-07-20 09:49:18
@_author: =?UTF-8?B?TWFya28gQm/Fvmlrb3ZpxIc=?= 
@_subject: Optimal setup for corporate keys 
To add one more thing: if you wish to add comments to your partner keys in
order to distinguish them easily, take a look at notations before generating
keys as notations are the only way to add 'comments' to your subkeys and you
have to specify them when generating a key (at least I haven't found a way to
add them afterwards)

@_date: 2015-07-20 09:49:18
@_author: =?UTF-8?B?TWFya28gQm/Fvmlrb3ZpxIc=?= 
@_subject: Optimal setup for corporate keys 
To add one more thing: if you wish to add comments to your partner keys in
order to distinguish them easily, take a look at notations before generating
keys as notations are the only way to add 'comments' to your subkeys and you
have to specify them when generating a key (at least I haven't found a way to
add them afterwards)

@_date: 2015-07-23 15:30:27
@_author: =?UTF-8?B?TWFya28gQm/Fvmlrb3ZpxIc=?= 
@_subject: gpg 2.1.6 toggle doesn't 
Hi all,
I've just noticed that the 'toggle' command in gpg 2.1.5/6 on Windows doesn't
switch key display. It still seems to switch the keys, since I moved my
authentication private key to a smartcard successfully.
Thank you,

@_date: 2015-07-27 09:48:11
@_author: =?UTF-8?B?TWFya28gQm/Fvmlrb3ZpxIc=?= 
@_subject: gpg 2.1.6 toggle doesn't 
Hash: SHA512
Ok, but why doesn't it make much sense anymore? Is there another way to get
private key info while in --edit-key mode? (e.g. key location, like the bug
submitter mentions)

@_date: 2015-07-27 11:46:09
@_author: =?UTF-8?B?TWFya28gQm/Fvmlrb3ZpxIc=?= 
@_subject: gpg 2.1.6 toggle doesn't 
Hash: SHA512
I know that, and I'm using 2.1 exclusively... Still, it would be nice to be
able to see the state of private keys (e.g. primary key not present in the
keyring, private keys are on the card, etc) while editing keys. It seems
that the only way to see private key info is running gpg(2) -K (or am I
missing something?)

@_date: 2015-07-27 15:06:53
@_author: =?UTF-8?B?TWFya28gQm/Fvmlrb3ZpxIc=?= 
@_subject: gpg 2.1.6 toggle doesn't 
Hash: SHA512
I'm not sure we're talking about the same thing...
When I run gpg -K (2.1), I get a listing of my private keys' info from my
pubring.kbx. In the listing, there are indicators for missing/deleted
private keys (sec and private key "placeholders" (not sure if that's the
term) for keys that are stored on the card (ssb>).
This is what the output looks like (notice # and >'s)
sec#  rsa4096/AAAAAAAA 2015-05-11 [expires: 2018-05-10]
uid       [ultimate] uid       [ultimate] ssb>  rsa2048/XXXXXXXX 2015-05-11 [expires: 2016-05-10]
ssb>  rsa2048/YYYYYYYY 2015-05-11 [expires: 2016-05-10]
ssb>  rsa2048/ZZZZZZZZ 2015-05-11 [expires: 2016-05-10]
Previously, using toggle, you could see that info while running gpg --edit-key

@_date: 2015-07-28 14:58:04
@_author: =?UTF-8?B?TWFya28gQm/Fvmlrb3ZpxIc=?= 
@_subject: gpg 2.1.6 toggle doesn't 
Yes, that would be good.
When we're talking about private keys "not being there", is there a difference
between a private key that has been deleted from your own keypair and a
private key that's never been there (i.e. you only have someone else's public
Also, the indicator that the private key is present on the card (> in the gpg
-K output) would be useful in gpg --edit-key output.
Thank you,

@_date: 2015-06-25 14:36:41
@_author: =?UTF-8?B?TWFya28gQm/Fvmlrb3ZpxIc=?= 
@_subject: Windows, GnuPG, ssh, github, ... 
Hi all,
Apologies for a long post :)
I haven't used gpg in years and recently I've picked it up with renewed
interest for many different reasons.
My initial goal would be to use gpg for ssh and github authentication
(currently covered by ssh keyfiles and putty pageant). The intermediate goal
would be to use duplicity for secure cloud backup of personal data and my end
goal would be to use a physical token (yubikey or something similar) to handle
my keyrings, passwords, etc...
I've started working on the initial goal of having gpg-agent replace putty
pageant and ssh-agent (for Cygwin's OpenSSH, which I prefer to putty) on my
Windows machines. It's been nearly impossible to find all of the information I
need in one place, but I think I've managed to piece together enough bits(ha!)
Gpg on Windows should work with putty out of the box - if I understood
correctly, Gpg4Win for 2.0.X and the official 2.1.x builds support putty
interop. ssh-pageant provides a "bridge" that enables OpenSSH to talk to
gpg-agent on Windows.
Now, there is one bit I don't quite understand why things work the way they
do... I've reduced the process to these steps (on 2.0.X):
1. create a master S, C key, 4096 RSA
2. create an A subkey, 4099 RSA
3. configure gpg-agent to run with putty support
4. run gpg-agent
-> run Cygwin bash
5. start ssh-pageant (using dev's instructions)
6. running 'ssh-add -l' returns no identities
At this point, I would expect gpg-agent to serve my authentication pubkey as
an identity. I haven't tried using gpg-agent as an ssh-agent on Linux yet, but
I don't suspect this is a Windows-specific issue/thing, since I can make
gpg-agent serve my pubkey using following steps:
7. export my subkey
8. use monkeysphere's openpgp2ssh to convert the key to SSH format (this one
is inconvenient if you're on a Windows machine since there is no Win port of
9. while pgp-agent and ssh-pagenat are running, run ssh-add  to
add the key to gpg-agent.
10. as a result, the key is imported into private-keys-v1.d directory and
added to sshcontrol file.
11. running ssh-add -l after that produces the desired output
My question is basically: what are the reasons that make these additional
steps necessary? Why is it necessary to export my authentication key and
import it into slightly different location in order for it to get serverd by
gpg-agent? It only makes subkey management more difficult.
I did find writeups with people mentioning that the things work with steps 1-6
if a smartcard is used to store the keyring, but the additional steps (7-11)
are needed if keyrings are stored on a disk, but nobody explains why.
Or am I doing something wrong? :)
Thnak you,

@_date: 2015-06-26 09:44:55
@_author: =?UTF-8?B?TWFya28gQm/Fvmlrb3ZpxIc=?= 
@_subject: Windows, GnuPG, ssh, github, ... 
Yup, the main reason why I wanted to try 2.1.x is because of that (Gpg4Win
uses 2.0.x) Reading your comment gave me a brainwave... It seems that even
though all the keys reside in private-keys-v1.d directory, you still need to
manually add a keygrip to the sshcontrol file for it to be served through
It kind of makes sense, but it's not very well documented (if at all :)
Thank you,

@_date: 2015-06-26 11:45:25
@_author: =?UTF-8?B?TWFya28gQm/Fvmlrb3ZpxIc=?= 
@_subject: Windows, GnuPG, ssh, github, ... 
I'd definitely be interested in something like this... I primarily use
Windows, but Cygwin is irreplacable for me and when I need SSH, I prefer
staying in cmd line.
Would it be possible to have both types of socket emulation (SSH and putty)
running at the same time? Git on Windows uses putty's pagenat a key agent...
Thank you,

@_date: 2015-06-28 23:56:42
@_author: =?UTF-8?B?TWFya28gQm/Fvmlrb3ZpxIc=?= 
@_subject: gpg-agent and putty/ssh agent bug 
Hi all,
I think I've found a bug with gpg-agent acting as a putty pageant.
System details
Windows 7 x64 Ultimate
UAC disabled
logged in as a member of Administrators
GnuPG details
a primary 4096 bit RSA key, with SC capabilities
3 2048 bit RSA keys - one for each: S, E, A
A key's keygrip added to the sshcontrol file, with TTL set to 0 and no
additional flags
options file
cipher-algo AES256
digest-algo SHA512
s2k-cipher-algo AES256
s2k-digest-algo SHA512
gpg-agent.conf file
gpg-agent.exe --homedir F:\Users\bozho\.gnupg --use-standard-socket --daemon
Steps to reproduce
I have attached gpg-agent's debug log (gpg-agent.log)
I have also used Spy++ to log WM_COPYDATA messages from gpg-agent
The first four lines (2 WM_COPYDATA messages) are from the unsuccessful
attempt (notice that fProcessed is False in the second message)
The last four lines are from the second, successful attempt.
Additionally, all four messages seem to have the same message parameters:
wParam: 00000000
lParam: 028CFE84
   dwData: 804E50BA
   cbData: 23
   lpData: 0039E7C0
I hope this helps in locating the bug :)
Thank you,

@_date: 2015-06-29 16:33:35
@_author: =?UTF-8?B?TWFya28gQm/Fvmlrb3ZpxIc=?= 
@_subject: Adding a subkey notation 
I've looked for a way to add some sort of comments on subkeys - I'd like to
have multiple authentication subkeys and easily distinguish among them.
find a way to set them on already existing subkeys...
In general, I haven't found a comprihensive documentation on notations
anywhere. Is there some kind of guide/best practices documentation for them?
Thank you,

@_date: 2015-06-30 13:57:50
@_author: =?UTF-8?B?TWFya28gQm/Fvmlrb3ZpxIc=?= 
@_subject: gpg-agent and putty/ssh agent bug 
Sure, I'll try to do it tonight...
Also, last night I *think* gpg-agent worked fine after being started by gpg (I
was testing notations). Then, after some time I started ssh-pagenat and
OpenSSH connectect on the first try. I'll try to see if I can replicate this
as well..

@_date: 2016-02-26 09:55:39
@_author: =?UTF-8?B?TWFya28gQm/Fvmlrb3ZpxIc=?= 
@_subject: Single GPG key and multiple yubikeys 
Maybe keep two separate gpg home dirs, one for each yubikey?

@_date: 2017-09-18 11:38:44
@_author: =?UTF-8?B?TWFya28gQm/Fvmlrb3ZpxIc=?= 
@_subject: Extending expiration date and SSH 
Hi all,
I use my authentication GPG key for SSHing into different machines. My GPG
keys are stored on a Yubikey and I use gpg-agent to interface with the Yubikey
and use the keys for SSH authentication.
My GPG keys have expired and while that doesn't have any effect on SSH
authentication, I'd still like to extend their expiration date.
Will that change the SSH public key (as it is exported using ssh-add -L for
adding to .ssh/authorized_keys)?
I'm looking for a best practice approach to avoid locking myself out of my
machines :)
Thank you!


@_date: 2004-02-24 05:43:32
@_author: E. Stuart Hicks 
@_subject: Bus error on Solaris 9 
I'm trying to compile 1.2.4 on a Solaris 9 server and keep getting this
during the make:
Making all in checks
make[2]: Entering directory `/root/build/gnupg-1.2.4/checks'
../g10/gpg --homedir . --quiet --yes --no-permission-warning --import
make[2]: *** [prepared.stamp] Bus Error
make[2]: Leaving directory `/root/build/gnupg-1.2.4/checks'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/root/build/gnupg-1.2.4'
make: *** [all] Error 2
This is using a standard ./configure; make.  Has anyone else had this
problem?  Does anyone know what to do about it?  Thanks

@_date: 2004-02-24 07:05:06
@_author: E. Stuart Hicks 
@_subject: Bus error on Solaris 9 
[root mpi]# cat asm-syntax.h
[root mpi]#
[root g10]# gdb ./gpg
GNU gdb 5.3
Copyright 2002 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "sparcv9-sun-solaris2"...(no debugging symbols
(gdb) run --homedir . --quiet --yes --no-permission-warning --import
Starting program: /root/build/gnupg-1.2.4/g10/gpg --homedir
. --quiet --yes --no-permission-warning --import ../checks/pubdemo.asc
(no debugging symbols found)...(no debugging symbols found)...(no debugging
symbols found)...
(no debugging symbols found)...(no debugging symbols found)...
Program received signal SIGSEGV, Segmentation fault.
0x00000001000f87c8 in mpihelp_rshift ()
(gdb) bt
  0x00000001000f87c8 in mpihelp_rshift ()
  0x00000001000ec4b8 in mpi_rshift ()
  0x00000001000ee2b4 in mpi_invm ()
  0x00000001000dedd0 in verify ()
  0x00000001000df400 in dsa_verify ()
  0x00000001000a9460 in pubkey_verify ()
  0x000000010004d508 in do_check ()
  0x000000010004e510 in check_key_signature2 ()
  0x000000010004dce0 in check_key_signature ()
  0x000000010007e53c in chk_self_sigs ()
 0x000000010007c84c in import_one ()
 0x000000010007b34c in import ()
 0x000000010007b090 in import_keys ()
 0x000000010000ae28 in main ()
(gdb) bt full
  0x00000001000f87c8 in mpihelp_rshift ()
No symbol table info available.
  0x00000001000ec4b8 in mpi_rshift ()
No symbol table info available.
  0x00000001000ee2b4 in mpi_invm ()
No symbol table info available.
  0x00000001000dedd0 in verify ()
No symbol table info available.
  0x00000001000df400 in dsa_verify ()
No symbol table info available.
  0x00000001000a9460 in pubkey_verify ()
No symbol table info available.
  0x000000010004d508 in do_check ()
No symbol table info available.
  0x000000010004e510 in check_key_signature2 ()
No symbol table info available.
  0x000000010004dce0 in check_key_signature ()
No symbol table info available.
  0x000000010007e53c in chk_self_sigs ()
No symbol table info available.
 0x000000010007c84c in import_one ()
No symbol table info available.
 0x000000010007b34c in import ()
No symbol table info available.
 0x000000010007b090 in import_keys ()
No symbol table info available.
 0x000000010000ae28 in main ()
No symbol table info available.
It doesn't look all that useful to me but I can't find any configure options
to include symbol table info so maybe it means something to you.  Thanks
----- Original Message ----- Sent: Tuesday, February 24, 2004 12:16 AM

@_date: 2004-02-24 18:43:25
@_author: E. Stuart Hicks 
@_subject: Bus error on Solaris 9 
Nope.  In fact, gcc v3.3 was, after much hair pulling, set up to compile
64bit so everything that compiles now should be in 64bit mode, including
----- Original Message ----- Sent: Tuesday, February 24, 2004 8:02 AM

@_date: 2004-02-24 21:14:43
@_author: E. Stuart Hicks 
@_subject: Bus error on Solaris 9 
The patch didn't help (although the change in asm-syntax.h was successful)
but disabling the assembly worked.  I've got both Sun's default assembler in
using.  (/usr/local/bin comes 1st in the path)  It's possible that whichever
one it's trying to use isn't compiling it properly.  It's also possible that
the sparc code doesn't work right on my ultrasparc processors.  I'll leave
that to you guys to figure out.  If you need an ultrasparc testbed just let
me know and I can hook you up.  Thanks!
----- Original Message ----- Sent: Tuesday, February 24, 2004 1:16 PM

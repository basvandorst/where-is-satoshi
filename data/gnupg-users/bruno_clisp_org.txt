
@_date: 2005-07-05 16:16:28
@_author: Bruno Haible 
@_subject: UTF-8 support 
Regarding localcharset.c, you are right. Please use the appended patch,
which I'll also use in libiconv-1.10.

@_date: 2005-07-13 10:45:39
@_author: Bruno Haible 
@_subject: UTF-8 support 
The application needs to know where it intends to send a certain
string of text. As a rule of thumb, when writing to a GUI or to a file,
GetACP() is appropriate, and when writing to a console, GetOEMCP()
or GetConsoleOutputCP() (I don't know the difference) is appropriate.
There will always be cases where this heuristic doesn't work, such as
when writing to a pipe whose output ends on the console.
If in the application, you are not able to know in advance whether
a string will end up in the GUI or on a console, a possible implementation
is to work with strings in GetACP() encoding, and recode the output on
the fly in your output routines, immediately before calling WriteFile
or WriteConsole.
Sounds reasonable.
Such cases will always remain, but one can try to minimize them.

@_date: 2005-07-19 15:01:37
@_author: Bruno Haible 
@_subject: UTF-8 support 
Thanks for explaining.
Yes. I don't want to introduce new API variants for just a single platform
(because when you do that, the outcome is such baroque like the Microsoft
.NET API). You have the source code of the locale_charset() function, and
it doesn't change very often. It's easy for you to duplicate it, replacing
GetACP() with GetConsoleOutputCP().
Interesting hack...

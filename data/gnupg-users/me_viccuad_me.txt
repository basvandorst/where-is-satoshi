
@_date: 2015-08-12 20:55:10
@_author: =?UTF-8?B?VsOtY3RvciBDdWFkcmFkbyBKdWFu?= 
@_subject: Possible bug when using smartcards and gpg-agent2.0 as the ssh-agent 
I'm using gpg-agent 2.0.28 (Debian Stretch) as the ssh agent, with
I have disabled the Gnome Keyring, and I'm only using gpg-agent. I have
a properly configured Yubikey Neo with an auth subkey, and the Yubikey
is correctly configured and in use. I have a clean ~/.gnupg/sshcontrol
file, and no ~/.ssh directory at all.
At first instance everything works fine, 'ssh-add -l' and 'ssh-add -L'
show my key when I have my Yubikey connected: (I'm redacting the key and
the card number)
$ ssh-add -l
2048 **:**:**:**:**:**:**:**:**:**:**:**:**:**:**:**:**:**
cardno:00060******* (RSA)
Yet when I try to use it to connect to the server by ssh I get a GUI
popup that says:
"take out the current card and insert the one with the serial number:
(In my case, in spanish, "Retire tarjeta actual e inserte la que
tiene n?mero de serie: ")
The serial number on ssh-add -L is the same "card-no" that appears next
to the auth subkey in gpg --card-status, which is 12 chars long.
The gpg-agent pop-up serial numbers seems to correspond to the
"Application ID" displayed in gpg --card-status, which is 32 chars long.
This seems like a bug. Am I missing something? Should I post this on
Thanks in advance,


@_date: 2007-07-02 20:41:03
@_author: Mario Lenz 
@_subject: getting signed text in plain 
I ran the test program with the latest version (1.1.4) and attached the
   Mario
Am Montag, den 02.07.2007, 15:52 +0200 schrieb Werner Koch:
They can tak' oour lives but they cannae tak' oour troousers!

@_date: 2007-07-05 18:43:52
@_author: Mario Lenz 
@_subject: getting signed text in plain 
I've tried around a bit and it looks like the plaintext is already
missing in gpg_verify() in gpgme/rungpg.c :-(
But *should* my code work and it's a bug in gpgme or have I done
anything wrong?
   Mario
Well is it said: "See a pin and pick it up, and all day long you'll have
a pin."

@_date: 2007-06-30 20:24:19
@_author: Mario Lenz 
@_subject: getting signed text in plain 
Hi I'm trying to get the "plaintext" out of a signature, but without any
success :-/
Here's a little bit of code to show you what I mean (I used a keyring
without a password for testing so I don't need to
    main (int argc, char *argv[])
  gpgme_ctx_t ctx;
  gpgme_error_t err;
  gpgme_data_t plain, signed_text;
  char *agent_info, buffer[100];
  ssize_t size;
  gpgme_check_version (NULL);
  err = gpgme_engine_check_version (GPGME_PROTOCOL_OpenPGP);
  if (err)
    exit (1);
  err = gpgme_new (&ctx);
  if (err)
    exit (2);
  err = gpgme_data_new_from_mem (&plain, "Hallo Leute\n", 13, 0);
  if (err)
    exit (3);
  err = gpgme_data_new (&signed_text);
  if (err)
    exit (4);
  err = gpgme_op_sign (ctx, plain, signed_text, GPGME_SIG_MODE_NORMAL);
  if (err)
    exit (5);
  gpgme_data_release (plain);
  err = gpgme_data_new (&plain);
  if (err)
    exit (6);
  gpgme_data_seek (signed_text, 0, SEEK_SET);
  err = gpgme_op_verify (ctx, signed_text, NULL, plain);
  if (err)
    exit (7);
  gpgme_data_seek (plain, 0, SEEK_SET);
  size = gpgme_data_read (plain, buffer, 100);
  if (size > 0)
    printf ("%s\n", buffer);
  else
    printf ("failed with size %d\n", size);
  gpgme_data_release (plain);
  gpgme_data_release (signed_text);
  gpgme_release (ctx);
  return 0;
Although verification doesn't fail, I'm unable to get the signed text
out of plain. I've been trying this for some time now and wasn't able to
make it work. Could you please help me?
   Mario
I'm working on Debian Etch, but I linked the program above also against
the latest gpgme version (1.1.4) and the problem stays.
Rule One: Do not act incautiously when confronting little bald wrinkly
smiling men.

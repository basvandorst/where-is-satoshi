
@_date: 2013-04-02 10:00:08
@_author: Tim Chase 
@_subject: gpg4win --gen-key fails to connect to IPC when using --homedir 
I found a similar thread here:
but it doesn't seem to have been resolved.  gpg4win was installed
using the default location, and with none of the add-ons (no
Outlook, shell, extensions, just gpg).  The same operation without
--homedir works as expected.
Any way to get this to work?
C:\work\tempgpg> gpg --homedir . --gen-key
gpg (GnuPG) 2.0.17; Copyright (C) 2011 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
gpg: keyring `./secring.gpg' created
gpg: keyring `./pubring.gpg' created
Please select what kind of key you want:
   (1) RSA and RSA (default)
   (2) DSA and Elgamal
   (3) DSA (sign only)
   (4) RSA (sign only)
Your selection? 1
RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (2048) 2048
Requested keysize is 2048 bits
Please specify how long the key should be valid.
         0 = key does not expire
        = key expires in n days
      w = key expires in n weeks
      m = key expires in n months
      y = key expires in n years
Key is valid for? (0) 0
Key does not expire at all
Is this correct? (y/N) y
GnuPG needs to construct a user ID to identify your key.
Real name: Joe User
Email address: joe at example.com
Comment: Test You selected this USER-ID:
    "Joe User (Test) "
Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? o
You need a Passphrase to protect your secret key.
gpg: can't connect to the agent: Invalid value passed to IPC
gpg: problem with the agent: No agent running
gpg: can't connect to the agent: Invalid value passed to IPC
gpg: problem with the agent: No agent running
gpg: Key generation canceled.
C:\work\tempgpg>gpg --version
gpg (GnuPG) 2.0.17 (Gpg4win 2.1.0)
libgcrypt 1.4.6
Copyright (C) 2011 Free Software Foundation, Inc.

@_date: 2013-07-06 19:53:16
@_author: Tim Chase 
@_subject: GPG keys for multiple email accounts 
[snip a whole bunch of helpful stuff]
[snip a whole bunch more useful stuff]
This was an amazingly helpful email.  I've seen a lot of posts (both
blog and here on the mailing list) that are full of technical
explanations, but very few that go over best practices for managing
multiple identities.  I too juggle several dozen email addresses
(many of which come to a single catch-all mailbox, but help in
filtering the incoming deluge), so if you know of any "Best practices
in managing multiple GPG identities for dummies" resources, I'd love
to become better versed at whatever links you provide.
Could you explain this a little more?  This sounds very important,
but I feel I'm not grasping the interplay of mainkeys vs. subkeys and
how they are (or should be) accessed.  I'd understood that unlocking
a keyring got you access to all the keys on it, so accessing a
sub-key in a non-safe environment would potentially risk exposing
your mainkey as well.  I suspect I've missed something important.

@_date: 2014-04-01 20:01:28
@_author: Tim Chase 
@_subject: Encrypted file-size approximation with multiple recipients 
I've been trying to find a good explanation on how something like
  gpg -r DEADBEEF -r CAFEBABE -r 8BADFOOD -o output.gpg -e input.txt
works.  The best I've been able to find is this:
I'm mostly interested in the overhead, so I set up 4 distinct
homedirs for testing.  It looks like each additional recipient adds
about 271 bytes (though one of them only has an extra 270 bytes), and
there's a per-file overhead of about 66 or 67 bytes.
So from my experimentation, the final file-size ends up being
something like
  input_file_size + 67 + (271 * recipient_count)
but I'm not sure how much that might change based on conditions I'm
not taking into consideration (all my test GPG users were just
gpg1 at example.com, gpg2 at example.com, etc), all with 2048-bit keys.
Is there a more formal formula that can be used to approximate the
overhead of multi-recipient encryption?

@_date: 2014-04-02 12:07:20
@_author: Tim Chase 
@_subject: Encrypted file-size approximation with multiple recipients 
Thanks both to David & Sam for their replies.  While not exact
answers/formulas, they were both quite helpful:
1) I'd missed that GPG conveniently compresses the data before
encrypting which would explain some of the differences I saw.
2) getting a rough worst-case bound (larger RSA keys and algorithm
choice can impact) for per-recipient overhead.
It also helps come to terms with the fact that, in more than half of
my use cases (small plain-text/JSON messages), the multi-recipient
overhead will swamp the size of the actual compressed+encrypted
content.  A fact that I can live with, but is nice to know up front.
Given that the recipients are in pre-defined groups would it make
more sense to multi-recipient-encrypt a single unique group-key, and
then encrypt all messages for that group with the given key?  I do
see the possibility of a trust-leak where a group member could
decrypt the group key and then provide it to other non-group members,
but if that's the case, the untrustworthy group member could just
decrypt the messages and provide those directly.  That's a risk I'm
willing to accept.  Since it's wrapped in my program/code, I can
automate the group-key fetching from a UI perspective.  I'm mostly
interested in things like regenerating the group key when group
members are removed, or adding additional group members to an
existing key, as well as any "good golly, man, that's idiotic because
of XYZ" warnings it might entail.

@_date: 2014-04-10 16:18:21
@_author: Tim Chase 
@_subject: Encrypted file-size approximation with multiple recipients 
Thanks for the heads-up.  If I understand you (after some further
reading on CRIME attacks), this only is an issue in the event that a
3rd party is injecting content into the requests and then able to
see the resulting encrypted data. In my use-case, the encrypting party
is in control of the entire message (modulo some metadata controlled
by my wrapping app, including nothing from other parties) so such a
CRIME attack would have to be self-inflicted, and yield unsurprising
results because it would reveal message content they already possess.

@_date: 2014-05-02 20:08:35
@_author: gnupg@tim.thechases.com 
@_subject: new keys vs. sub-keys vs. uids 
Please forgive any folly (or poor word-choices for technical terms) in
my questions, as I'm still feeling my way around the edges of GPG.
I'd like to have different personas, all under one key.  So I'd have
one for my work email, one for personal email, one for each of
several dozen mailing lists.
I began my experimenting by creating various uids:
  $gpg --gen-key
  ...
  email: home at example.name
  ...
  Enter passphrase: *******
  $gpg --edit-key home at example.name
  gpg> adduid
  ...
  Enter email address: work at example.com
  ...
  gpg> save
However, after adding multiple uids and emailing an encrypted test
message from the new UID (work at example.com), I noticed that Claws Mail
reported that it had been signed by "home at example.name" instead of
"work at example.com", leaking signature information I'd rather keep
separated.  I suspect I don't fully grasp the intent of additional
UIDs.  In the hope of keeping the entries completely separate, I then
  $rm -rf ~/.gnupg  # these are just test-keys for now
  $gpg --gen-key
  ...
  email: home at example.name
  ...
  Enter passphrase: *******
  $gpg --gen-key
  ...
  email: work at example.name
  ...
  Enter passphrase: *******
This seemed to work as expected, but has the down-side that I would
have N separate passphrases to maintain/remember for each of the N
personas.  Yes, I can make them all the same passphrase, but it would
be nice if they were all under one master passphrase.
So I guess I'm looking for
1) something that doesn't leak identities across signatures
2) a single passphrase to manage the multiple identities
3) can be identified by the signing email address (Claws seems to
make this easy for choosing the signing key)
Is there a way I'm missing to go about keeping these separate without
the overhead of new keys for each persona?

@_date: 2016-11-08 13:24:05
@_author: Tim Chase 
@_subject: Specifying different pinentry based on caller? 
Is there a way to specify which pinentry program should be used based
on the calling context?  When using a GUI program like Claws Mail, I'd
like to use the graphical pinentry, but I'd prefer to default to the
terminal pinentry for everything else.
Poking around, I've found ways of changing this globally, but am
unsure how to go about specifying it on a per-application basis. I imagine that it would take some combined effort between gpg (to
allow the pinentry program to be specified via the command-line or
environment) and the calling program (to specify arguments).
Any tips to get me headed in the right direction would be appreciated.


@_date: 2005-04-07 22:47:20
@_author: Nicholas Sushkin 
@_subject: Error at "bag.attributes" importing key from freemail cert into 
I am trying to import into gpgsm a thawte freemail s/mime certificate I exported from Firefox in p12 format. I followed the instructions in the Welwarsky's mini-howto.
openssl pkcs12 -in ~/keys/thawte-nsushkin_sushkins_net-exp20060407.p12 -out ~/keys/thawte-nsushkin_sushkins_net-exp20060407.pem -nodes openssl pkcs12 -in thawte-nsushkin_sushkins_net-exp20060407.pem -export  -nocerts -nodes -out thawte-nsushkin_sushkins_net-exp20060407.privatekey.p12
gpgsm --call-protect-tool --p12-import --store After I enter my passphrase, I am getting the errors listed below. Am I doing something wrong or did I hit a bug?
gpg-agent[21705]: handler for fd 0 started
gpg-agent[21705.0x8075458] DBG: -> OK Pleased to meet you
gpg-agent[21705.0x8075458] DBG: <- OPTION display=:0
gpg-agent[21705.0x8075458] DBG: -> OK
gpg-agent[21705.0x8075458] DBG: <- OPTION ttyname=/dev/pts/1
gpg-agent[21705.0x8075458] DBG: -> OK
gpg-agent[21705.0x8075458] DBG: <- OPTION ttytype=xterm
gpg-agent[21705.0x8075458] DBG: -> OK
gpg-agent[21705.0x8075458] DBG: <- OPTION lc-ctype=C
gpg-agent[21705.0x8075458] DBG: -> OK
gpg-agent[21705.0x8075458] DBG: <- OPTION lc-messages=C
gpg-agent[21705.0x8075458] DBG: -> OK
gpg-agent[21705.0x8075458] DBG: <- GET_PASSPHRASE X X Passphrase: gpg-agent[21705]: starting a new PIN Entry
gpg-agent[21705]: DBG: connection to PIN entry established
gpg-agent[21705.0x8075458] DBG: -> [Confidential data not shown]
gpg-protect-tool: 2600 bytes of RC2 encrypted text
gpg-agent[21705.0x8075458] DBG: <- [EOF]
gpg-agent[21705]: handler for fd 0 terminated
-----BEGIN CERTIFICATE-----
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
-----END CERTIFICATE-----
gpg-protect-tool: encryptedData error at "bag.attributes", offset 2592
gpg-protect-tool: error at "bag.encryptedData", offset 49
gpg-protect-tool: error parsing or decrypting the PKCS-12 file

@_date: 2005-04-11 21:05:43
@_author: Nicholas Sushkin 
@_subject: Error at "bag.attributes" importing key from freemail cert into 
Can anyone help me, please? Should I be looking ath the PKCS-12 parsing code?
 doing

@_date: 2005-04-12 16:31:57
@_author: Nicholas Sushkin 
@_subject: Error at "bag.attributes" importing key from freemail cert into 
Thanks so much for your reply. I was using 1.9.15, gpgsm --import
failed with the same error. I'll try CVS next.

@_date: 2005-05-18 22:13:56
@_author: Nicholas Sushkin 
@_subject: Error at "bag.attributes" importing key from freemail cert into 
Just to let you know that I was able to import thawte certificate using gnupg-1.9.16.
I am writing this using KMail 1.8 compiled with s/mime support.

@_date: 2005-05-18 23:42:08
@_author: Nicholas Sushkin 
@_subject: Small script to import freemail S/MIME certificate into GPGSM 
After reading "Small HowTo on how to import freemail S/MIME certificates into GPGSM" by Matthias Welwarsky  mwelwarsky I wrote the following BASH Save it into a file called import-cert.sh, and execute it using the following bash import-cert.sh myThawteCertExportedFromMozilla.p12
It works with gpgsm 1.9.16
--CUT HERE--------------------

@_date: 2006-02-19 22:17:59
@_author: Nicholas Sushkin 
@_subject: Finally: Login via SSH authentication with OpenPGP smart card 
Realistically speaking, when free software does not interoperate with the commercial software with a large mindshare, it's the free software loss. On the other hand, the Samba project that enabled interoperation enjoyed tremendous support and success.

@_date: 2008-05-23 20:33:07
@_author: Nicholas Sushkin 
@_subject: gpg & kmail 
I'd be suspicious. Make sure you don't have a self-compiled version of gnupg2 in addition to the one installed from a package. AFAIK, an official package would install into /usr/bin. See  for an example.

@_date: 2008-05-23 20:25:58
@_author: Nicholas Sushkin 
@_subject: gpg & kmail 
You need gnupg2 package for KMail to support S/MIME.

@_date: 2008-05-24 13:47:17
@_author: Nicholas Sushkin 
@_subject: gpg & kmail 
Looks like your Debian gnupg2 package does not install gpgsm. I'd ask on
some Debian mailing list. Here is what I have with Slackware:
[1345][nsushkin at metro:~]$ grep -E '(bin|exec)' /var/log/packages/gnupg2-2.0.9-i486-1
[1346][nsushkin at metro:~]$ grep -E '(bin|exec)' /var/log/packages/gnupg-1.4.9-i486-1

@_date: 2011-12-21 10:48:35
@_author: Nicholas Sushkin 
@_subject: Who is doing S/MIME enveloping in KMail - gnupg2 or KMail? 
Hi, I think there is a bug in the way KMail is doing S/Mime envelop for signed but not encrypted messages. I'd like to follow through, but I am not sure if it's gnupg or KMail, which is the proper forum. Does anyone (Werner) know by any chance?
ps.


@_date: 2000-09-23 14:03:52
@_author: David Chin 
@_subject: gpg 1.0.3 won't compile on HPUX 10.20 
Hash: SHA1
Sorry for the incomplete info.  I also had to munge up cipher/Makefile (or cipher/Makefile.in if you like).  For some reason, I've never had luck creating a dynamic object file in one pass using softbench/cc or gcc.  So,
I added these lines to cipher/Makefile:
    tiger: $(srcdir)/tiger.o
        $(LD) -b -o $@ $(srcdir)/tiger.o
    tiger.o: $(srcdir)/tiger.c
        $(COMPILE) $(DYNLINK_MOD_CFLAGS) -c $(srcdir)/tiger.c
    rndunix: $(srcdir)/rndunix.o
        $(LD) -b -o $@ $(srcdir)/rndunix.o
    rndunix.o: $(srcdir)/rndunix.c
        $(COMPILE) $(DYNLINK_MOD_CFLAGS) -c $(srcdir)/rndunix.c
    rndegd: $(srcdir)/rndegd.o
        $(LD) -b -o $@ $(srcdir)/rndegd.o
    rndegd.o: $(srcdir)/rndegd.c
        $(COMPILE) $(DYNLINK_MOD_CFLAGS) -c $(srcdir)/rndegd.c
    rsa: $(srcdir)/rsa.o
        $(LD) -b -o $@ $(srcdir)/rsa.o
    rsa.o: $(srcdir)/rsa.c
        $(COMPILE) $(DYNLINK_MOD_CFLAGS) -c $(srcdir)/rsa.c
    idea: $(srcdir)/idea.o
        $(LD) -b -o $@ $(srcdir)/idea.o
    idea.o: $(srcdir)/idea.c
        $(COMPILE) $(DYNLINK_MOD_CFLAGS) -c $(srcdir)/idea.c
and commented out the original rules to make the dynamic objects.  I also had to define LD.  So, we compile to .o format, and then use ld to create the dynamic object file.
My configure line:
     ./configure  --prefix=/usr/local --disable-nls --enable-static-rnd=none \
     --disable-dev-random --host=hppa1.1-hp-hpux10.20 --enable-m-guard
and I edited config.status to have:
    s% +Onolimit -w -z +ESlit -Ae -D_HPUX_SOURCE \
    -D_LARGEFILE64_SOURCE%g
    s% rndunix rndegd tiger idea%g
    s% -Ae +DA1.1 +DS2.0%g
(i.e. adding the stuff for large files to CFLAGS, and removing rndlinux from the dynamic cipher mods).  The "+DA1.1 +DS2.0" is just to ensure that PA1.1 machines can run the resulting binaries.
If I had time, I muck up the autoconf and automake stuff to make these things correct for HP-UX, but, my dissertation calls... :(
I haven't tried compiling with gcc (2.95.2) at all.  I've had some problems with gcc, and I don't know what causes them.
Now, after all this is done, when you run "make check", you'll probably get a whole bunch of warnings about random numbers not being random enough.  Just run the Entropy Gathering Daemon: egd.pl ./checks/entropy.
And then run the checks.
Hope this is helpful.

@_date: 2000-09-23 15:33:42
@_author: David Chin 
@_subject: gpg 1.0.3 won't compile on HPUX 10.20 
Hash: SHA1
Well, if I execute config.status after editing it, isn't it equivalent to setting the appropriate env variables before running ./configure?  If I didn't execute config.status after the editing, what good would editing do, after all?

@_date: 2000-09-29 11:56:24
@_author: David Chin 
@_subject: gpg 1.0.3 won't compile on HPUX 10.20 
Hash: SHA1
In message , J
These are  in the appropriate source file for the ciphers.  Check cipher/Makefile that the following is defined:
    DYNLINK_MOD_CFLAGS = -DIS_MODULE +Z
This may have been one of the things I modified my cipher/Makefile.in for.

@_date: 2000-09-23 14:03:52
@_author: David Chin 
@_subject: gpg 1.0.3 won't compile on HPUX 10.20 
Hash: SHA1
Sorry for the incomplete info.  I also had to munge up cipher/Makefile (or cipher/Makefile.in if you like).  For some reason, I've never had luck creating a dynamic object file in one pass using softbench/cc or gcc.  So,
I added these lines to cipher/Makefile:
    tiger: $(srcdir)/tiger.o
        $(LD) -b -o $@ $(srcdir)/tiger.o
    tiger.o: $(srcdir)/tiger.c
        $(COMPILE) $(DYNLINK_MOD_CFLAGS) -c $(srcdir)/tiger.c
    rndunix: $(srcdir)/rndunix.o
        $(LD) -b -o $@ $(srcdir)/rndunix.o
    rndunix.o: $(srcdir)/rndunix.c
        $(COMPILE) $(DYNLINK_MOD_CFLAGS) -c $(srcdir)/rndunix.c
    rndegd: $(srcdir)/rndegd.o
        $(LD) -b -o $@ $(srcdir)/rndegd.o
    rndegd.o: $(srcdir)/rndegd.c
        $(COMPILE) $(DYNLINK_MOD_CFLAGS) -c $(srcdir)/rndegd.c
    rsa: $(srcdir)/rsa.o
        $(LD) -b -o $@ $(srcdir)/rsa.o
    rsa.o: $(srcdir)/rsa.c
        $(COMPILE) $(DYNLINK_MOD_CFLAGS) -c $(srcdir)/rsa.c
    idea: $(srcdir)/idea.o
        $(LD) -b -o $@ $(srcdir)/idea.o
    idea.o: $(srcdir)/idea.c
        $(COMPILE) $(DYNLINK_MOD_CFLAGS) -c $(srcdir)/idea.c
and commented out the original rules to make the dynamic objects.  I also had to define LD.  So, we compile to .o format, and then use ld to create the dynamic object file.
My configure line:
     ./configure  --prefix=/usr/local --disable-nls --enable-static-rnd=none \
     --disable-dev-random --host=hppa1.1-hp-hpux10.20 --enable-m-guard
and I edited config.status to have:
    s% +Onolimit -w -z +ESlit -Ae -D_HPUX_SOURCE \
    -D_LARGEFILE64_SOURCE%g
    s% rndunix rndegd tiger idea%g
    s% -Ae +DA1.1 +DS2.0%g
(i.e. adding the stuff for large files to CFLAGS, and removing rndlinux from the dynamic cipher mods).  The "+DA1.1 +DS2.0" is just to ensure that PA1.1 machines can run the resulting binaries.
If I had time, I muck up the autoconf and automake stuff to make these things correct for HP-UX, but, my dissertation calls... :(
I haven't tried compiling with gcc (2.95.2) at all.  I've had some problems with gcc, and I don't know what causes them.
Now, after all this is done, when you run "make check", you'll probably get a whole bunch of warnings about random numbers not being random enough.  Just run the Entropy Gathering Daemon: egd.pl ./checks/entropy.
And then run the checks.
Hope this is helpful.

@_date: 2000-09-23 15:33:42
@_author: David Chin 
@_subject: gpg 1.0.3 won't compile on HPUX 10.20 
Hash: SHA1
Well, if I execute config.status after editing it, isn't it equivalent to setting the appropriate env variables before running ./configure?  If I didn't execute config.status after the editing, what good would editing do, after all?

@_date: 2000-09-29 11:56:24
@_author: David Chin 
@_subject: gpg 1.0.3 won't compile on HPUX 10.20 
Hash: SHA1
In message , J
These are  in the appropriate source file for the ciphers.  Check cipher/Makefile that the following is defined:
    DYNLINK_MOD_CFLAGS = -DIS_MODULE +Z
This may have been one of the things I modified my cipher/Makefile.in for.


@_date: 2014-01-17 13:15:50
@_author: Mr. Clif 
@_subject: Looking for simple wrapper for symmetric key file encryption 
I've been happily using pgp and gpg off and on for decades. One thing I never quite figured out was what the best way to use it for encrypting sensitive files on disk. After doing that one has to remember to cleanup after themselves and delete all the leftover plaintext versions of the file, or it kind of defeats the whole purpose, and its pretty easy to make a mistake when doing it manually. I always felt that GPG should help you a bit more in that regard. Now I know that full disk encryption might be a way around this, but it seems like overkill if you just have a couple of files to protect.
I have searched high and low and checked out GnuPG Shell, GPA, Seahorse, XAP, and some other misc wrappers but nothing seemed to fit my use case. So I wrote a simple wrapper in perl. Basically it just lets you toggle a file between plaintext and encrypted forms without letting the plaintext version touch/remain on the disk, unless that is what you want.
 /usr/bin/perl -U
#       This Perl script is a wrapper around GPG to decrypt or encrypt a file.
#	It's goal is to try to prevent plaintext from touching, or remaining
#	on the disk, something GPG fails to do. If there is a new file created
#	It will be in the same directory as the original unless you specify a new
#	path in a second arg.
#	By Clif 12/05/13
# External utilities
$GPG   = "/usr/bin/gpg";  			# GnuPG 1.4.15
$SHRED = "/usr/bin/shred";                      # secure file deleter (GNU coreutils) 8.13
# Arguments
($arg, $dest) = # Break down the pathname
$path = $1 if $arg  =~ /^(.*?)(\/[^\/]*)$/;
$file = $1 if $arg  =~ /([^\/]+)\/?$/;
$base = $1 if $file =~ /^(.+?)(\.[^.]*)?$/;
$ext  = $1 if $file =~ /\.([^. ]*)\s*$/;
# Get destination
if ($dest) {
} else { $dest = $path ? "$path/$base" : $base }
# Is this a planetext or an encrypted file?
if (-r $arg) {
} else { warn "No such file: $arg\n" }
# All done
Obviously it could be much more thorough but I just wanted to get the idea across. I was also thinking about adding a RAM based editing feature but I didn't want to reinvent the wheel if someone knows of a similar project.
     Thanks for any comments you might have,
     Clif

@_date: 2014-01-18 22:50:49
@_author: Mr. Clif 
@_subject: Looking for simple wrapper for symmetric key file encryption 
So no one got back to me.
Does anyone use symmetric file encryption? What is the best practice here? I heard of another solution which was to mount an encrypted directory with fuser to drop files into. I think I would wounder how safe the passphrase was for mounted filesystems, though I know of some techniques for protecting them.
Any pointers regarding best practices for  symmetric file encryption would be much appreciated.
     Thanks,
     Clif

@_date: 2014-01-19 08:56:03
@_author: Mr. Clif 
@_subject: Looking for simple wrapper for symmetric key file encryption 
Same here. This is why I wrote that perl script, so I wouldn't have to remember to delete the plaintext file after I encrypted it. Are there other front ends or wrappers that help the work flow in this way?
Yes I suppose that's true. Though I was just thinking about ways I heard of to hide the key material in RAM. As I mentioned below, I'd rather not have to resort to an encrypted filesystem just to handle the occasional private file unless the conventional wisdom says that it's the only good way to do it.
So I'm trying to get a sense from the users here if they feel that the process of using gpg for symmetric encryption is safe enough, and they are not worried about leaving clear text behind.
     Thanks,
     Clif

@_date: 2014-01-19 13:48:17
@_author: Mr. Clif 
@_subject: Looking for simple wrapper for symmetric key file encryption 
Hi Doug,
Thanks for the comments. Yes the threat model is mostly the worry of having old temp files or even the original cleartext files left behind on the HD, or even worse having them backed up. ;-) At the very least I want something that tries to protect me from stupid mistakes. Yep the RAM disk idea was part of the solution I'm heading towards.
So do you or does anyone know of a nice front end that helps with that? An example of behavior that doesn't seem helpful is that when I use GPA to decrypt a file it defaults to saving it on the HD. I'm not trying to knock GPA here but wouldn't it be better to display the contents in a window? Well I realize that might be just what I want, and others have use cases that it works fine for. ;-)
     Clif

@_date: 2014-01-22 08:16:27
@_author: Mr. Clif 
@_subject: Looking for simple wrapper for symmetric key file encryption 
Hi Ryan,
Yes that is exactly the kind of front end I was looking for, and it looks very nice. Thanks for writing it. :-) Though now I have finished the stab I took at solving the problem myself, which is a much simpler command line script. You can find the two versions of it here:
If folks have the time, I would appreciate any feed back on how they like it.
     Ciao!
     Clif

@_date: 2015-03-06 20:12:24
@_author: Mr. Clif 
@_subject: A beautiful banker woman talks about the failed war on drugs in Latin 
She is on some global council to change drug policy:
     Clif

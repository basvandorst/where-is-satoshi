
@_date: 2001-10-09 23:34:01
@_author: Dailey,Nancy 
@_subject: Automate gpg 
I followed the instructions below on how to use GnuPG in an automated
environment (from FAQ), then realized I had mistyped the email address.  I
tried to add a new userid with the correct email address, and keep getting
the message, "Secret keys not available".  I then went back to the manual
and read under "--export-secret-subkeys" that "The second form of the
command has the special property to render the secret part of the primary
key useless".  I am assuming this is the problem, but I don't know what to
do about it.  I was also not sure what I was supposed to use for 'foo'.  I
tried to use the short form of the added key ID, but this did not work.  We
kept trying different things until one worked, and I'm not sure what that
I really want to be able to automate this.  Can you tell me where I went
wrong and how I can automate signing the encrypted file?
Nancy Dailey
4.14) How can I use GnuPG in an automated environment? You should use the option --batch and don't use pass phrases as there is
usually no way to store it more secure than the secret
keyring itself. The suggested way to create the keys for the automated
environment is: On a secure machine:    1.If you want to do automatic signing, create a signing subkey for your
key (edit menu, choose "addkey" and the DSA). [H
     LI] Make sure that you use a passphrase (Needed by the current
implementation)    2.gpg --export-secret-subkeys --no-comment foo >secring.auto    3.Copy secring.auto and the public keyring to a test directory.    4.Cd to this directory.    5.gpg --homedir . --edit foo and use "passwd" to remove the pass-phrase
from the subkeys. You may also want to
     remove all unused subkeys.    6.copy secring.auto to a floppy and carry it to the target box On the target machine:    1.Install secring.auto as secret keyring.    2.Now you can start your new service. It is a good idea to install some
intrusion detection system so that you hopefully get
     a notice of an successful intrusion, so that you in turn can revoke all
the subkeys installed on that machine and install new
     subkeys. 	
Nancy N. Dailey
Senior Systems Analyst
IS3 - Information Systems and Technology
Gartner Group
Phone  1-203-316-3418
Fax      1-203-316-6490

@_date: 2001-10-12 15:31:01
@_author: Dailey,Nancy 
@_subject: Trouble automating gpg 
I sent this message earlier.  Does anyone have any answers?

@_date: 2001-10-12 16:51:01
@_author: Dailey,Nancy 
@_subject: Trouble automating gpg 
Hi Ryan --
I did figure that out, but the problem is that whenever we try to edit the
key, it says "Secret keys not available".  Then I looked at the manual and
found that when doing an 'export-secret-subkey', "The second form of the
command has the special property to render the secret part of the primary
key useless".  I am assuming this is the problem.  Is there any way around
Sent: Friday, October 12, 2001 8:29 AM
I sent this message earlier.  Does anyone have any answers?
Gnupg-users mailing list
Gnupg-users

@_date: 2001-10-15 23:56:01
@_author: Dailey,Nancy 
@_subject: Automating gpg 
I followed the directions for automating gpg in the FAQ portion of the gnupg
site.  Then, I tried to encrypt and sign a document and this is what I got:
C:\gnupg>gpg --output ggvsppre.gpg -es \windows\temp\ggvsppre.lis
gpg: secret key parts are not available
gpg: no default secret key: general error
gpg: \windows\temp\ggvsppre.lis: sign+encrypt failed: general error
Any suggestions?
Nancy N. Dailey
Senior Systems Analyst
IS3 - Information Systems and Technology
Gartner Group
Phone  1-203-316-3418
Fax      1-203-316-6490

@_date: 2001-10-16 15:45:02
@_author: Dailey,Nancy 
@_subject: Automating gpg 
When you follow the automating gpg instructions in the FAQ, you end up
with a special key that does not contain the master key (generally a
sign-only key).  You tried to sign and encrypt, and since there is no
signing key there, it's not going to work.
You can add a signing key via --edit-key on your *original* key (not
the key you generated by following the FAQ), and using "addkey".
Then, re-follow the instructions in the FAQ to export the new subkey.
I thought that is what I did.  I used "addkey" to add a signing subkey, then
"export-secret-subkeys" to "secring.auto" which I then moved to another
directory and removed the passphrase.  This is what happens when I try to
use the signing subkey:
C:\gnupg>gpg --output ggvsppre.gpg -es \windows\temp\ggvsppre.lis
The gpg instruction manual states that "export-secret-subkeys" "...has the
special property to render the secret part of the primary key useless;  this
is a GNU extension to OpenPGP ..."  Is this true?  And, if so, is this not
what has happened to my secret key?  And, if so, is there some other way to
automate gpg?
Nancy N. Dailey
Senior Systems Analyst
IS3 - Information Systems and Technology
Gartner Group
Phone  1-203-316-3418
Fax      1-203-316-6490

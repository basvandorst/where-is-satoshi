
@_date: 2006-08-01 02:14:11
@_author: Marcel Chastain - Security Administration 
@_subject: [Fwd: perl EUID change causing failure] 
Yeah, I already have a workaround in place, I just wanted to report it to the community/developers. This is a new bug, and I think they'd be interested in why it's happening... Perhaps the gnupg-devel mailing list would be better..?

@_date: 2006-08-01 20:22:36
@_author: Marcel Chastain - Security Administration 
@_subject: [Fwd: perl EUID change causing failure] 
This is certainly a dirty/harsh/feng-shui-less way of failing/exiting. I would expect a normal internal check, and an appropriate error message if this sort of thing is expected, i.e. "Security Violation" or something similar. I mean, if you change the behavior of a program to disallow a certain condition, you test for that condition and exit properly, right..? Perhaps I'm gullible, but when a program tells me
"Ohhhh jeeeee: ... this is a bug"
I tend to think that it is a bug.
But you are right, the program probably thinks that it is being tricked into keeping root privileges, hence the harsh failure and funky message. Thanks for your help. ;-)

@_date: 2006-07-31 23:55:42
@_author: Marcel Chastain - Security Administration 
@_subject: [Fwd: perl EUID change causing failure] 
============================== START ==============================
I have a perl wrapper around gpg for use within a web app. It changes its 'EUID' (Effective UserID) early in the script.
 From there, it attempts to run
My test script:
$ENV{'GNUPGHOME'} = '/home/username/.gnupg';
my $uid = getpwnam("username");
$> = $uid;
print `/usr/local/bin/gpg --list-public-keys`;
The output:
gpg: Ohhhh jeeee: ... this is a bug (gpg.c:1880:main)
secmem usage: 0/0 bytes in 0/0 blocks of pool 0/32768
(replace the word 'username' with a user on your system for testing Now, this *only* happens when setting the EUID. I can set the RealUID($<) and things work perfectly.
Does this have something to do with the code updates mentioned in the "What's New" section..? (  )
Running gnupg 1.4.4 compiled from ports, freebsd 4.11-STABLE .

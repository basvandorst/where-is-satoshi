
@_date: 2013-10-23 12:18:38
@_author: Andre Heinecke 
@_subject: Building pinentry on Windows 7 
I've recently played around with MXE (  ) which is another cross compilation environment that aims to provide an easy way to handle dependencys for Windows.
To build a static pinentry-qt4 with it you can just set it up as documented on their homepage. Drop the attached pinentry.mk in mxe/src/ and do
"make pinentry"
Worked like a charm for me on a debian wheezy system.

@_date: 2013-10-25 09:28:45
@_author: Andre Heinecke 
@_subject: Building Pinentry for Windows 
Ah, such things happen, i'll see to it that the download url is updated.
makensis is part of the package nsis, which can be installed with "apt-get install nsis"
Yes pinentry is not included in mxe. I have written a .mk file for it and attached it In my Mail from Wednesday. You should have dropped that pinentry.mk file into the src directory of mxe.

@_date: 2014-04-17 14:56:15
@_author: Andre Heinecke 
@_subject: GPG tool for Windows Embeddd Compact 7 
As already said, there is no Version of GnuPG known to work wiht Windows Embedded Compact 7. The last Windows CE I know of where GnuPG was able to run was Windows Mobile 6.5 (Windows CE 5 Kernel). I have no idea about Windows Embedded Compact 7. And I can not estimate the effort / work required to port / compile GnuPG for that platform.
If you have professional interest in this maybe you can contract Werner Koch's company g10code (  ) to look into this for you.

@_date: 2014-12-05 15:04:40
@_author: Andre Heinecke 
@_subject: GPG and Outlook 
Outlook decativates plugins when they are slow to load. As GpgOL pulls up gpg-
agent and kleopatra on launch this might be the issue there. :-/ Jep we had a long discussion about this. See  feel free to comment there why this does not work in your use case.
Mmh, what we do there is ask outlook "Hey Outlook please give me the sender object for this mail" "Of that sender object can I have the SMTP address please" and then use this as encryption recipient. I'll try to look into this next time I start to work on GpgOL
Clipboard is definitely a good stopgap (until we can do a proper outlook >2010 plugin). Both Kleopatra (as of gpg4win-2.2.2) and GPA have Clipboard options in their menu.
Kleopatra also offers the clipboard option through the system tray. If you configure it not to be hidden in the tray this should be "easy".
Right Click on Kleopatra's icon -> Clipboard.

@_date: 2014-12-20 22:13:17
@_author: Andre Heinecke 
@_subject: [Announce] GnuPG 2.1.1 released 
I actually love authenticode. It means that you can do some steps to get to the "Operating System" level of trust. Sure you can buy your way into this but that is the Operating System level of trust that is asserted through HTTPS connections / Windows Update and so on. It is weak, i grant you that, but it is at least _some_ automatic authentication of binaries. I'm playing a game on a Windows Machine currently (Archeage) that requires administrative access for each launch!,.. and they did not even care to sign their binary. This is just security sadism. (I keep my GNU/Linux partitions on which i do any work or store secrets encrypted)
In a different project at intevation we signed all binaries in our installer keeping packaging and building on different systems. As we won't expose our private keys to propietary systems that meant running wine to create the nsis Maybe this is also something for the future of gpg4win. (Btw. We use osslsigncode which is a really great tool that allows you to create authenticode PKCS signatures under GNU/Linux.)
With regards to the original question. I'd be happy to sign your experimental gnupg only installers with our code signing certificate (and be quick about it) after verifying your signature. Intevation trusts g10code (we heavilly use gnupg internally where the source is verified by Werner)

@_date: 2014-02-20 18:01:31
@_author: Andre Heinecke 
@_subject: GPG tool for Windows Embeddd Compact 7 
GnuPG has been ported to Windows CE 5.0 so it should / could work on Windows embedded 7 (I guess its untested) as this work was done 2010 as part of a Project and there has been little interest in Windows CE since.
We still have some binaries lying around:
Sources for that version:
And a signed sha1sums file in:
Maybe it works, maybe not. Have fun

@_date: 2014-02-21 10:25:32
@_author: Andre Heinecke 
@_subject: GPG tool for Windows Embeddd Compact 7 
please keep the mailing list in CC so that others can also learn from this We did use cegcc (  ) to build gnupg for wince. I'm not sure if this compiler actually works for your platform. So maybe you should start trying to get a Hello World program compiled with this before venturing into gnupg :)
There is a convieniance option in the autogen.sh files of gnupg and it's libraries " --build-w32ce " that sets some build options and selects the But generally it is not trivial to build for this platform and I'm pretty sure you will run into some problems.

@_date: 2015-08-31 18:44:30
@_author: Andre Heinecke 
@_subject: GnuPG modern can't genereate keys on my Windows 
I can confirm your Problem. Even without full-gen-key or any special options.
I've opened an issue for this:

@_date: 2015-08-31 19:07:03
@_author: Andre Heinecke 
@_subject: GnuPG modern can't genereate keys on my Windows 
I think this is a different bug. When I use a pinentry from gpg4win I run into the gpg-agent crash described in this thread but still can do things that involve pinentry like signing.
If I use the pinentry-basic included in the gnupg-w32 installer I get the "No pinentry" error.
So it looks like pinentry-basic also has a Problem on Windows > 8.1
I've not reported a bug for this but I keep it in mind. (The issues are likely Works fine on Windows 7 though, curious.

@_date: 2015-08-31 21:01:20
@_author: Andre Heinecke 
@_subject: GnuPG modern can't genereate keys on my Windows 
I think you can't. I've already complained to Werner several times that I find the aspect that only "Developers" or the original reporter can add information to a bug report hurts bugs.g10code.com
Thanks for that list! I guess I just opened another duplicate for this
with issue 2085 :-o (Damn I thought I knew how roundup search worked but i did not find these.)
I've consolidated them in 2085 (because that was my bug ;-) )
2010 I guess is slightly different as it has the "No Pinentry" Problem so I've left that out.

@_date: 2015-07-14 19:37:37
@_author: Andre Heinecke 
@_subject: operating on remote files (Windows) using a UNC 
Sorry for the late reply, gpg4win-users-en would probably have been a better place for this question.
I stumbled upon this also once. You need to use forward slashes instead of backslashes for gnupg to work with UNC paths e.g.:
gpg2 --decrypt //remote.machine/encrypted.gpg
Works.

@_date: 2015-03-10 10:05:19
@_author: Andre Heinecke 
@_subject: AES-NI, symmetric key generation 
To answer your first question regarding gpg4win:
No, it has been disabled due to a bug. I've opened gnupg/issue1919 to track AES is an algorithm that produces deterministic results. Not really something to backdoor like a RNG. Look for gpg4win_pkg__configure (e.g. gpg4win_pkg_libgcrypt_configure)

@_date: 2015-11-03 16:10:24
@_author: Andre Heinecke 
@_subject: TOFU for GnuPG 
Hi Neal,
Don't we need to lookup the new key anyway to make validity decisions? Until then we assume "Unknown" trust.
Well I can see that one of the features of Tofu is that Unknown trust should no longer be presented to users but in that case we could add auto-key-
retrieve? :-)
You have lost me here. Why does it assume that? - I send you lots of mails as aheinecke at intevation.de signed with C97822F5
- Now I send you once a mail as aheinecke at intevation.de signed with 58BD45EC -> You can check if C97822F5 signed the User ID aheinecke at intevation.de on key 58BD45EC. It has. So you can assume the new Key is also valid for that UID.
Any new UID's on this key will have to be treated as first contact ID's. If the new key has less UID's I don't see a problem at all.

@_date: 2015-11-03 16:56:27
@_author: Andre Heinecke 
@_subject: TOFU for GnuPG 
I assume you mean the encrypt case (I don't see how this affects sign)? But still I don't see a problem there. If you don't have a valid key to encrypt to. You need to get a different key. How is the trust model involved in that?
Once you have that new key you can do the UID / Signature checks I suggested.

@_date: 2015-10-29 15:56:39
@_author: Andre Heinecke 
@_subject: Installing gpg2/commads? 
Afaik only the standard NSIS command line options are supported. /S for silent install and /D to modify the destination directory.

@_date: 2015-10-30 13:23:14
@_author: Andre Heinecke 
@_subject: TOFU for GnuPG 
I don't fully understand why you need formalized transition statements. Couldn't you just treat Key / UIDs that are signed by each other as "two valid keys for this UID"?
So when I transition to another key I just sign it with the old key and GnuPG can detect that and not show a warning about it?
This would also solve the problem that some users may have multiple keys with the same UID's which are both valid.

@_date: 2015-09-02 13:18:28
@_author: Andre Heinecke 
@_subject: GnuPG modern can't genereate keys on my Windows 
This was a problem in my test setup. I probably had gpg4win installed when the agent was started and so it tried to use the pinentry from gpg4win even after I uninstalled gpg4win.
Such things will be solved when gpg4win gets proper 2.1 support. After restarting the gpg-agent it picked up pinentry-basic and it worked fine.
If you look at gpg-agent's debug output it will show you which pinentry it tries to start.

@_date: 2016-01-07 10:38:06
@_author: Andre Heinecke 
@_subject: Obtaining SSH Key format from OpenPGP public certificate without 
In a previous thread it was noted that gpgkey2ssh is deprecated and will likely be removed. Niibe pointed out how to add a key to GnuPG sshcontrol and obtain the SSH key format from ssh-add -L
This works for myself.
But I'm missing a way for someone that has only my public key to add this key to an SSH authorized_keys file without input from me.
E.g. Another person has verified / signed my PGP key that has an Authentication Subkey. How can this Person get the SSH Key representation without having to ask me to provide it? (Assuming the person has my public key and without I think this use case is one of the nice features you get by associating an OpenPGP key with SSH Authentication and I would miss it if gpgkey2ssh is

@_date: 2016-01-07 14:43:51
@_author: Andre Heinecke 
@_subject: Obtaining SSH Key format from OpenPGP public certificate without 
This article describes exactly my use case :-)
I would not expect it to be It's own tool. But rather in GnuPG proper so that the documentation for this is also part of GnuPG and can be found when you look for SSH. Maybe as an Export option?
I've opened a wish for this:

@_date: 2016-07-11 11:36:28
@_author: Andre Heinecke 
@_subject: Side-By-Side Installation: Gpg4win and gnuPG 
... Although using the same homedir should not hurt much, gnupg-2.1 will migrate your secret keys to a new format but leave the files in a way that gnupg-2.0 can still read them. But there will be problems with the gnupg-agent as gnupg needs the same version of the agent that the program belongs to.
To avoid that you should specify --homedir c:\testhome or something on the commandline to 2.1 calls. Then it will use that as a different homedir.
gpg --homedir c:\testhome --expert --full-gen-key would generate you a key in c:\testhome

@_date: 2016-10-04 14:03:06
@_author: Andre Heinecke 
@_subject: Agent forwarding failure when the socketdir was autodeleted 
Using GnuPG 2.1.15 I'm trying to SSH into a remote machine with OpenSSH 6.7 as described under:
The problem is that the remote system uses systemd so /var/run/user/ exits and GnuPG will use it.
But if I am not logged in or there is no gnupg process running. systemd autodeletes /var/run/user//gnupg this causes the remote forward of the Socket to fail because the directory for the socket does not exist and SSH won't create it. :-/
Any ideas how to solve this without requireing changes to the root configuration of the remote machine?
I would happily update the wiki with a solution.

@_date: 2016-10-04 12:19:28
@_author: Andre Heinecke 
@_subject: Why GnuPG encrypted file has no icon? 
If you are using Gpg4win you can try out our Beta of gpg4win-3.0
(See:  ) There we added set up of file extensions and handling of files by "double click" for Windows.
One problem was that the .pgp / .gpg / .asc extentions are pretty general. It could be Keys, signed data, detached signatures, etc.. so to bind them to an application the application would have to detect what a file is and handle it appropiately. This is done now by Kleopatra.

@_date: 2016-10-04 20:49:00
@_author: Andre Heinecke 
@_subject: Agent forwarding failure when the socketdir was autodeleted 
Sorry for not formulating this better. You are of course right If I'm not logged in the remote forward is not working.
That is not what I meant to say. The problem is, that when I disconnect the tries to set up the forwarding this will fail because the /run/.../gnupg directory in which the forwarded socket should be created does not exist.
Warning: remote port forwarding failed for listen path My current workaround is to connect first and start dirmngr on the remote machine (to get the socketdir created and used). And then connect with ssh socket forwarding. This is a bit clunky to use.
I've tried placing files in that folder, or to set up permissions to 000 for the gnupg folder (so that gnupg itself does not use it) but to no avail. It's still removed when disconnecting and the next connect will fail.

@_date: 2016-10-05 21:35:12
@_author: Andre Heinecke 
@_subject: Agent forwarding failure when the socketdir was autodeleted 
Yes, that works but it's still a bit cludgy I'd like to have it working in a single ssh command.
Exactly. I wrote a mail to openssh-unix-dev as you suggested to ask about that. Let's see :-)

@_date: 2016-10-27 17:33:45
@_author: Andre Heinecke 
@_subject: Hosting a Web Key Directory 
I just published how to host your own Web Key Directory on the gnupg blog.
Find below a plain text version of my blog entry
 Andre
1 Hosting a Web Key Directory
  With the improvements in GnuPG for Key Discovery (see: [Key Discovery
  Made Simple]) you may want to provide the OpenPGP keys for your
  domain. The Web Key Service (WKS) describes a protocol for Mail
  Service Providers or large organisations to maintain a Web Key
  Directory (WKD) for their users.
  A Web Key Directory is a static collection of keys provided under well
  known URLs under your domain. This directory can also be manually
  generated without using the Web Key Service protocol.
  By providing a Web Key Directory other people (or their Mail Software)
  can obtain the OpenPGP keys for your domain with a simple query like:
  ?????
  ? $ gpg --auto-key-locate wkd --locate-keys   ?????
  In this note, I explain how to do that.
  Note: An updated version of this article may be available in the
  [GnuPG Wiki]
  [Key Discovery Made Simple]
    [GnuPG Wiki]
  1.1 Requirements
  ? A web server that provides https with a trusted certificate for your
    domain.
  ? A client machine with Python and PyME installed (debian package
    python-pyme)
  ? The script: [generate-openpgpkey-hu] (in the [Mercurial repository
    "wkd-tools"])
  [generate-openpgpkey-hu]
    [Mercurial repository "wkd-tools"]
  1.2 Setup
  You can either export all the keys in your keyring that belong to a
  domain or provide an explicit keyring containing just those keys that
  you want to publish.
  The call:
  ?????
  ? $ ./generate-openpgpkey-hu example.com hu
  ?????
  Will create a directory called hu containing all the keys with user
  ids that include   If there are multiple valid keys for a user in your keyring this
  command will error out. In that case you can prepare a keyring with
  only the keys that you want to publish. For example:
  ?????
  ? $ gpg --export 94A5C9A03C2FE5CA3B095D8E1FDF723CF462B6B1 | \
  ? >   gpg --no-default-keyring --keyring ./wkd-keyring.gpg --import
  ?????
  And then provide that keyring to generate-openpgpkey-hu:
  ?????
  ? ./generate-openpgpkey-hu example.com hu wkd-keyring.gpg
  ?????
1.3 Publishing
  The hu directory has to be published on your server as
  ?????
  ?   ?????
  Create the directory structure and set the permissions accordingly.
  This example [Makefile] automates the hu directory generation and
  publishing. Edit the variables at the top of the makefile to set
  `RSYNC_TARGET' The `KEYRING' variable is optional and can be left
  empty.
  That's it. You can now test your setup by calling:
  ?????
  ? $ gpg --auto-key-locate wkd --locate-keys   ?????
  you should see something like this:
  ?????
  ? gpg: key AC12F94881D28CB7: public key "testuser10 at test.gnupg.org" imported
  ? gpg: Total number processed: 1
  ? gpg:               imported: 1
  ? gpg: automatically retrieved 'testuser10 at test.gnupg.org' via WKD
  ? pub   ed25519 2016-07-15 [SC]
  ?       5506894357DC548CC65B0BCFAC12F94881D28CB7
  ? uid           [ unknown] testuser10 at test.gnupg.org
  ? sub   cv25519 2016-07-15 [E]
  ?????
  [Makefile]

@_date: 2017-07-19 13:38:03
@_author: Andre Heinecke 
@_subject: How to NOT gnutar files during encryption? 
The client could create a ZIP Archive with the files and then encrypt that as a single file. Kleopatra has no built in support for ZIP + Encrypt.
FWIW Kleopatra would have automatically chosen a filename like archive.tar.gpg so your client must have manually changed that to have some kind of zip On the other hand you could extend your process to also accept tarballs ;-)

@_date: 2018-04-06 11:04:47
@_author: Andre Heinecke 
@_subject: GnuPG usage for automatic remote decryption 
For this usecase I'm using AgentForwarding ( AgentForwarding ). The GnuPG on the remote machine connects to a local Gpg-
Agent. This allows me to SSH to a remote machine, do crypto there with secret keys that live on my local machine / security tokens. And I only need to enter the passphrase on the local machine.
Best Regards,

@_date: 2018-04-17 14:19:51
@_author: Andre Heinecke 
@_subject: Speedo build error on GnuPG 2.2.6 
thanks for trying out up to date GnuPG :-)
I noticed that, too and fixed it in the stable branch (should be merged into master soon) Can you try to cherry pick that commit and see if it works?
When building from GIT I also use SELFCHECK=0 to avoid version problems.
What works for me is:
That works for me.
Best Regards,

@_date: 2018-04-30 16:28:47
@_author: Andre Heinecke 
@_subject: Can not decrypt and verify CD's 
Normal but outdated ;-) This says (badly) that this file is not encrypted to the private key you have.
Please update to Gpg4win-3.1.0 it's much better at detecting / importing certificates and allows you to import certificates by double click.
No, the error is that the file is not encrypted to your private key. Changing the passphrase won't help.
Kleopatra 3.1.0 should show an improved error and show you to which keys it is actually encrypted.
Alternatively you can open the command line (cmd.exe) and call
 "gpg --decrypt " this will definetly show to which keys it is Best Regards,
Andre Heinecke

@_date: 2018-08-06 10:35:59
@_author: Andre Heinecke 
@_subject: cannot decrypt file symmetric encrypted 
Try adding "--pinentry mode loopback" to your command. Maybe there is a problem with your installation / pinentry program so that it does not start or you are acidentally using a dummy / test pinentry which provides the wrong

@_date: 2018-07-04 22:07:50
@_author: Andre Heinecke 
@_subject: dirmngr cygwin resolv.conf 
I think that you have spent already way too much time with this thread. ;-)
IMO even a  __CYGWIN__ # error No you don't
in a central place would be appropiate. As the same policy is implicitly already applied for the much more important MSVC Windows target. There is one maintained way to get gnupg on windows. Cross compile it with mingw-w64 and run it natively.
Best Regards,

@_date: 2018-06-07 18:10:32
@_author: Andre Heinecke 
@_subject: How in Windows batch script generate Unattended key? option 
The new "quick-gen-key" command is more conveniant then the old batch gen key E.g. to create a key without passphrase for "foo at bar.baz" you can run:
gpg --yes --pinentry-mode loopback --passphrase '' --quick-gen-key foo at bar.baz
Best Regards,

@_date: 2018-06-08 17:03:07
@_author: Andre Heinecke 
@_subject: [Announce] [security fix] GnuPG 2.2.8 released (CVE-2018-12020) 
I have a problem with the test
It asks me for a symetric passphrase. I leave that blank. Then I get "No secret key" error. The command with the grep will of course return nothing
$ cat cve201812020
$ gpg --no-options -vd cve201812020
gpg: AES encrypted data
gpg: gcry_kdf_derive failed: Invalid data
gpg: encrypted with 1 passphrase
gpg: decryption failed: No secret key
$ gpg --version
gpg (GnuPG) 2.2.8-beta1
Which should be affected.
Best regards and thanks for your quick fix for this.

@_date: 2018-03-23 09:35:04
@_author: Andre Heinecke 
@_subject: Followup: gpgme_set_passphrase_cb not working... 
From the other thread I take it that you are using GPGME with GnuPG-2.0.28 ? In the log I don't see the gpg version, but I didn't see it mentioned in the other thread that the GnuPG-2.0.x series does not support the passphrase I ran into the same problem some time ago and documented it as a note in the GPGME manual.  :
"Note: The passphrase_cb only works with GnuPG 1.x and 2.1.x and not with the 2.0.x series. "
An ugly workaround could be to use some kind of fake pinentry (see the tests in GPGME) and configure that in the gpg-agent.conf. But you are probably better of bundling a 2.1 / 2.2 Version of GnuPG with your Application.
Best Regards,

@_date: 2018-05-14 07:49:53
@_author: Andre Heinecke 
@_subject: Hi , 
return after creating the decrypted file
decryption which is done uninteractively
Windows Server 2016 Datacenter.
level  ,  it looks GPG agent hangs and the job does not exit
functionality ?ouputfile? --yes ?decrypt ?file to decrypt?
generated then only the job exits with ok status In addition to the note about the missing argument to passphrase-file, it might also be that you are running into:
Using the task scheduler GNUPG has a different Home Directory, so you might want to parse the --homedir parameter to specify directly which home directory (the directory with the keys etc.) should be used.
Best Regards,
Andre Heinecke

@_date: 2018-05-14 08:02:19
@_author: Andre Heinecke 
@_subject: smartcards and GPGME 
This is both pretty complicated thorugh GPGME, as there is indeed not a direct interface. Kleopatra and GPA use the "AssuanEngine" of GPGME to connect to the gpg-agent's assuan interface and issue / parse commands directly through that You might want to take a look at GPA's implementation:
Alternatively instead of wrapping gpg (and using the complicated edit interface) you could also wrap "gpg-connect-agent" and issue commands to scdaemon through that.
Best Regards,

@_date: 2018-10-02 10:43:44
@_author: Andre Heinecke 
@_subject: converting gpg files into PEM and certification change confusion 
Oh! I would personally be very interested in that. I was asked this in Support and so far have answered -> Impossible.
Any hints / documentation on how to achive this?

@_date: 2018-10-09 15:08:12
@_author: Andre Heinecke 
@_subject: Get notation value through --with-colons interface 
On Monday, October 8, 2018 8:42:01 PM CEST Wiktor Kwapisiewicz via Gnupg-users GPGME does:
gpg --with-colons --list-options show-sig-subpackets=\"20,26\" \
Best Regards,

@_date: 2018-10-24 11:02:14
@_author: Andre Heinecke 
@_subject: GnuPG 2.2.8 -- Trouble Decrypting using PowerShell script 
just as a bit of advertising. There is professional support available under gpg4win-professional at gpg4win.org
I'm answering your problem inline below:
\Succession_Talent_Pool_Tableau_Report.csv.pgp "
up to enter the passphrase manually like this below.
Your command is missing "--pinentry-mode loopback"
See: "gpg --pinentry-mode loopback -d --batch --passphrase comment C:\projects
\Succession_Talent_Pool_Tableau_Report.csv.pgp "
As a scheduled job on a server you might also want to set an explicit homedir in your command. See:
I'm working professionally for Gpg4win. So please consider a volunatry payment to Gpg4win or donation to GnuPG if this helped to solve your problem. :-)
Best Regards,
Andre Heinecke

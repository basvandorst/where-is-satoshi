
@_date: 2018-12-05 12:23:52
@_author: Wiktor Kwapisiewicz 
@_subject: Garbled data in keyservers 
Hi Claudio,
You may find these SKS issues relevant:
I'm not able to comment on the specifics of search implementation in SKS though...
Kind regards,

@_date: 2018-12-06 10:39:24
@_author: Wiktor Kwapisiewicz 
@_subject: Garbled data in keyservers 
But that "little program" would have to download the entire dump and provide
search feature itself, making it non-trivial for most users.
Sometimes raising a bar a little would solve most of the problem.
(And then there are talks about removing UIDs from key servers, but that's a
different matter).
Kind regards,

@_date: 2018-12-06 11:09:04
@_author: Wiktor Kwapisiewicz 
@_subject: Garbled data in keyservers 
on super large files.
I don't think a lot of users use this or would use this. It's more convenient
and easier to store data somewhere else (pastebins?).
Also, storing blobs is not a unique problem of keyservers, one can store it in
Certificate Transparency logs by issuing certs from Let's Encrypt or in Bitcoin
blockchain or even X.509 timestamping services. It would be slow and
inefficient, that's why practically no-one misuses it.
Kind regards,

@_date: 2018-12-09 20:49:55
@_author: Wiktor Kwapisiewicz 
@_subject: Garbled data in keyservers 
Just for the record but it is adopted by e-mail service providers that are
interested in OpenPGP (like ProtonMail and Posteo.de, see
As for "e-mail service providers" like Gmail or Yahoo that obviously is not
going to happen (unless one uses Google Suite with custom domain, etc.)
Kind regards,

@_date: 2018-12-10 14:25:08
@_author: Wiktor Kwapisiewicz 
@_subject: Garbled data in keyservers 
That's an interesting idea, it seems GnuPG has some support for sending keys via
From the "--keyserver" option documentation [0]:
I didn't manage to get it running though ("gpg: keyserver send failed: No
keyserver available"), probably it depends on some package that I don't have
By the way validation of keys sent from e-mail would require DKIM as it's easy
to spoof "From" (that's why most solutions send verification e-mails to the
e-mail address instead of receiving it).
Kind regards,

@_date: 2018-12-10 15:25:36
@_author: Wiktor Kwapisiewicz 
@_subject: Garbled data in keyservers 
Hi, I use an address I control, but the email was not even sent so I guess the error happened before the key hit the network.
Kind regards,
Wiktor Dnia December 10, 2018 2:56:54 PM UTC, Damien Goutte-Gattat  napisa?(a):

@_date: 2018-12-10 18:34:49
@_author: Wiktor Kwapisiewicz 
@_subject: Garbled data in keyservers 
Well it depends on the implementation. In current keyserver model everyone can
append signatures to everyone's keys because the design assumed that it's good
that other people can certify your key and didn't predict "trollwot".
But it's technically possible to accept key signatures for a key only from the
key owner. Of course implementing that in SKS would take a lot of work.
Then if someone used anonymous e-mail service they could update only their keys.
If you consider that a risk then the software shouldn't accept foreign keys at
all as e-mail verification won't solve the SPAM problem in general. That is also
a benefit of WKD because everyone takes care of their own keys and no one has to
volunteer to host other people's stuff.
This would solve some problems but not others. I think Web Key Directory (for
people controlling their domains) coupled with Autocrypt (for everyone else)
already solves a large number of use cases people need key servers. The only
real problem that keyservers are good at is storing revocations in a way that is
hard to delete.
But if that is so "maybe we need just a revocation server" as someone said on
the OpenPGP Email Summit 2018 (
Kind regards,

@_date: 2018-12-11 20:18:02
@_author: Wiktor Kwapisiewicz 
@_subject: Smart cards 
I'm using Fidesmo and it works fine with OpenKeychain, and also through USB NFC
reader with GnuPG. The note about keys is correct, no ECC, RSA only up to 2048 bits.
There are two ways of getting 4096 bits with NFC as far as I'm aware: Yubikey 5
and Cotech Card. The latter I've never seen in real life but given that this is
from the same people that created OpenKeychain I believe it's legit :)
[0]: [1]: Most hardware that supports ECC either supports it only in PIV applet (so not
applicable to OpenPGP) or doesn't use tamper-resistant hardware (depending on
one's threat model this may or may not be OK).
You don't need the store if you buy the card with OpenPGP (or PGP as they call
it) applet preinstalled. This store is only needed to customize what is in the
card, once PGP is installed you don't need it as Fidesmo PGP speaks standard
Disclaimer: I'm not affiliated with any of these companies but I got the Fidesmo
card for free for contributing to OpenKeychain [2].
[2]: Kind regards,

@_date: 2018-12-12 10:15:33
@_author: Wiktor Kwapisiewicz 
@_subject: Keyserver access changes in GnuPG 
Hello all,
I recently saw a message from one of Fedora's maintainers:
Source: Does anyone know anything about dropping keyserver support in GnuPG? That seems
a little bit radical but maybe I've missed something...
Thanks in advance!
Kind regards,

@_date: 2018-12-12 22:25:04
@_author: Wiktor Kwapisiewicz 
@_subject: Setup encrypted email 
Hi Nicos,
Check out Gpg4Win and one of its components: GpgOL - an add-in for Outlook:
Kind regards,

@_date: 2018-12-12 22:43:49
@_author: Wiktor Kwapisiewicz 
@_subject: Keyserver access changes in GnuPG 
I don't think revocation is necessary if the private subkeys are still safe.
It may be just inconvenient for people that want to contact you / verify your
signatures to see your subkeys expired and when they "gpg --refresh-keys" (as
they always do) your key would still be expired with no apparent way of
proceeding. If I saw something like that I'd think the key is abandoned.
If you had HTTPS on your site I'd recommend Web Key Directory as this downloads
keys from your site *and* refreshes expired keys from your site too automatically.
Kind regards,

@_date: 2018-12-15 09:53:23
@_author: Wiktor Kwapisiewicz 
@_subject: Keyring management with multiple smart cards 
Hi Louis,
I have a very similar setup.
After working with several different options and encountering the same problems
as you have (GPG does not encrypt to all encryption subkeys, not possible to
have the same subkeys on different smartcards) I observed the following facts:
1. I use one smartcard as a primary device so T2291 isn't that critical, if that
one fails I can just remove shadow files and --card-status a new card, it will
work. That doesn't happen frequently so manual removal of shadow file is not a
big problem (but it would be nice if the shadow files supported multiple card
serial numbers!).
2. As GnuPG does not encrypt to all encryption subkeys you *need* to have the
same encryption subkeys on different smartcards anyway, but it's not a problem
in practice because of 1.
So, load the same encryption subkey on all devices and in case your main one is
lost just remove the corresponding shadow file (this can be dangerous if you
don't know what you're doing e.g. using private keys generated locally on GnuPG).
One signing subkey per smartcard is fine as they're bound to the same primary
key (but if you're not using expiration users can get some interesting behavior
like [1]).
Hope this helps!
Kind regards,
[1]:

@_date: 2018-12-17 09:43:55
@_author: Wiktor Kwapisiewicz 
@_subject: Keyring management with multiple smart cards 
Uhm, this is kind of internal GnuPG details so I guess it's not documented anywhere.
But it's something like this:
$ gpg --with-keygrip -K
You get keygrip from one of your subkeys and look for a file named the same in
~/.gnupg/private-keys-v1.d. Removing, well, just use "rm" (or "mv" just in case;).
Note that this is implementation detail so it may change in the future.
No problem, one thing I forgot to mention - as far as I know RFC 4880 (OpenPGP)
doesn't precise which encryption subkey to use and some implementations (e.g.
OpenKeychain) use all valid encryption subkeys (so a scheme of using one
encryption subkey per token would work).
Kind regards,

@_date: 2018-12-27 20:48:09
@_author: Wiktor Kwapisiewicz 
@_subject: A question about WKD 
It works "on my end" too (GnuPG 2.2.12 on Linux).
Did you try fetching some "well-known" WKD people? E.g.:
$ gpg --auto-key-locate clear,wkd,nodefault --locate-key wk at gnupg.org
My first guess would also be a bad certificate bundle but when I try using "bad"
domains from this list  the error is:
gpg: error retrieving 'test at expired.badssl.com' via WKD: General error
gpg: error reading key: General error
Rather than "not trusted" (maybe you could try experimenting with these domains
to see if the error is different).
There is also "--debug lookup" flag, and "-vvv":
$ gpg -vvv --debug lookup --auto-key-locate clear,wkd,nodefault --locate-key EMAIL
Maybe that'd print something useful?
Do you have anything "exotic" in .gnupg/gpg.conf?
Kind regards,

@_date: 2018-12-29 20:18:54
@_author: Wiktor Kwapisiewicz 
@_subject: A question about WKD 
Just create more files in .well-known/openpgpkey/hu directory.
I didn't follow how you set it up initially but you can grab the file name
(hash) using this command:
$ gpg --with-wkd -k KEY
Substitute KEY with key ID or an email, etc.
For example  for me it prints the following line of hash:
gebusffkx9g581i6ch4t3ewgwd6dctmp at metacode.biz
If you export binary key to .well-known/openpgpkey/hu and name it
"gebusffkx9g581i6ch4t3ewgwd6dctmp" (no quotes, no extension, just like that)
then it would work.
WKS is not needed. Actually WKS is only when you want users to manage their keys
using their e-mail client. I know other people that manage WKD differently, e.g.
Gentoo has a strict set of known keys and they update their WKD directory with a
cron job (so developers update the key on keyservers and WKD is automatically
I did a small proof-of-concept checker for small deployments, that you may find
useful: Kind regards,

@_date: 2018-12-29 20:53:03
@_author: Wiktor Kwapisiewicz 
@_subject: A question about WKD 
Ha, I didn't emphasize the "proof of concept" enough :)
Thanks for the "test samples", I'll use them to improve the tool!
Kind regards,

@_date: 2018-07-02 10:12:43
@_author: Wiktor Kwapisiewicz 
@_subject: Choice of ECC curve on usb token 
Hi Damien,
That's an excellent answer, thanks for posting this!
I've came up with the same exact answer when deciding on the key type for my primary key (I used RSA 4096).
As for subkeys: they can fortunately be rotated so you can use anything (ECC, and if it's broken, rotate the key, [0]; RSA 2048 if 4096 is too slow; just mind the key expiry dates).
There is one argument brought in favor of ECC in context of OpenPGP - that you could share the primary public keys directly, instead of fingerprints, but that in my opinion protects only against the hash function being broken, as the primary public key cannot (usually) be used alone (one needs the subkeys and signatures).
Kind regards,
[0]: as a side note I haven't seen tamper resistant devices with ECC, e.g. YubiKey supports NIST curves via PIV applet but not OpenPGP one :(

@_date: 2018-07-04 21:48:24
@_author: Wiktor Kwapisiewicz 
@_subject: Verifying signatures with critical notations 
Is it possible to verify a signature with critical notations that I I created the signature with:
   echo x | gpg --sign --sig-notation !test at metacode.biz=node-1 > f.sig
Now when I pass this file to gpgme_op_verify I get only summary GPGME_SIGSUM_RED and status GPG_ERR_BAD_SIGNATURE (with source GPGME).
That's obviously correct as the notation is critical and not recognized but I don't see a function to mark "test at metacode.biz=node-1" as a recognized notation for verification purposes.
Is it possible?
Thank you in advance!
Kind regards,

@_date: 2018-07-16 10:17:00
@_author: Wiktor Kwapisiewicz 
@_subject: Using gnupg to crypt credentials used by application to access a 
Another alternative to an unlocked smartcard would be to use the TPM as the key would be non-exportable and bound to just one machine.
There was a series of patches to add TPM keys support but I don't know if it was merged:
Kind regards,

@_date: 2018-07-22 20:39:52
@_author: Wiktor Kwapisiewicz 
@_subject: Timestamping signed documents or detached signature files 
Hi Stefan,
 > Maybe you find this little info useful too, because i have not seen
 > this topic discussed here yet. I'm aware that there is or was an
 > old Timestamping Service in England available, but i thought
 > that the blockchain is cool.
Yep, this is definitely cool.
I don't know if you've seen it but there is also a helper script for timestamping git commits:
And one minor note, that it's actually possible to (ab)use X.509 timestamping servers for OpenPGP because they just timestamp any hash that you give them (see e.g. [0]). You could embed the TimeStampResp [1] in a signature notation (assuming you would timestamp file hash, not the signature itself, of course).
Another interesting tidbit, RFC 4880 contains a Timestamp signature flag (0x40 [2]) and a way to nest signatures, that could be used to provide timestamping or notary services [3].
Kind regards,
[0]: [1]: [2]: [3]:  section 4.5.1

@_date: 2018-07-22 21:57:13
@_author: Wiktor Kwapisiewicz 
@_subject: Timestamping signed documents or detached signature files 
Oh, I forgot to mention that timestamping using blockchains is actually very easy, for example I timestamped my key's fingerprint:
(look for timestamp+bitcoin-transaction at metacode.biz And you can check out the transaction here:
(look for "OP_RETURN 653909a2f0e37c106f5faf546c8857e0d8e8f074" that is my key's fingerprint).
If you convert "time": 1507539820 seconds from there to date you'll get something like 2017-10-09T09:03:40.000Z.
OpenTimestamps (I think) uses Merkle trees to minimize fees but the downside is that the hash is not directly embedded in the blockchain and you need the extra files to reconstruct the tree root.
Have a nice day!
Kind regards,

@_date: 2018-07-22 21:57:13
@_author: Wiktor Kwapisiewicz 
@_subject: Timestamping signed documents or detached signature files 
Oh, I forgot to mention that timestamping using blockchains is actually very easy, for example I timestamped my key's fingerprint:
(look for timestamp+bitcoin-transaction at metacode.biz And you can check out the transaction here:
(look for "OP_RETURN 653909a2f0e37c106f5faf546c8857e0d8e8f074" that is my key's fingerprint).
If you convert "time": 1507539820 seconds from there to date you'll get something like 2017-10-09T09:03:40.000Z.
OpenTimestamps (I think) uses Merkle trees to minimize fees but the downside is that the hash is not directly embedded in the blockchain and you need the extra files to reconstruct the tree root.
Have a nice day!
Kind regards,

@_date: 2018-06-26 12:31:53
@_author: Wiktor Kwapisiewicz 
@_subject: gpg show default / effective options 
Is it possible to print default or effective options used by GnuPG?
I'm in the process of slimming down gpg.conf and see that many options are either redundant (because gpg uses them by default) or no-ops.
I would like to see which options are used to safely remove obsolete While it is kind-of possible to infer defaults from the source (e.g. [0]) I wondered if there is a command that would print all settings that are default or effective at the moment.
Thank you in advance!
Kind regards,
[0]:

@_date: 2018-06-26 21:16:36
@_author: Wiktor Kwapisiewicz 
@_subject: gpg show default / effective options 
Wow, that is exactly what I needed.
I will walk through them soon and report any problems directly to you.
Thanks Werner!
Kind regards,
W dniu 26.06.2018 o?21:04, Werner Koch pisze:

@_date: 2018-11-01 20:14:19
@_author: Wiktor Kwapisiewicz 
@_subject: Slightly OT - i need the proper wording for a signed document 
I, for one, like the OpenPGP's approach of "choose your own trust
model". Someone will trust Governikus, someone will trust random
internet people, someone will marginally trust them or a selected set of
people they think are trustworthy. (By the way too bad that Governikus
doesn't add Policy URLs to their signatures [0], it would be easier to
read about their procedures for people that don't know them).
Of course, this comes at the expense of user friendliness but there are
already easier trust alternatives in GnuPG (e.g. TOFU).
> This isn't
the Problem at al?l. X.509 is a really good standard. I use
Do you mean X.509 is technically good or just more widely supported in
software than OpenPGP? For me there are only few cases where X.509
infrastructure has something that OpenPGP lacks (e.g. timestamping).
Kind regards,

@_date: 2018-11-02 12:20:43
@_author: Wiktor Kwapisiewicz 
@_subject: Slightly OT - i need the proper wording for a signed document 
PDFs can be also timestamped when signing with standard RFC 3161 [0]
timestamping service.
Here's one example:
But there are numerous free RFC 3161 timestamping services.
Of course that's not the same as blockchain, but it's already supported
by numerous tools (like Adobe Acrobat).
Kind regards,
[0]:

@_date: 2018-11-02 17:17:59
@_author: Wiktor Kwapisiewicz 
@_subject: Slightly OT - i need the proper wording for a signed document 
Signature creation date is not the same as timestamping. As for why you
may consider the problem of validating signatures made by revoked keys.
Without timestamping this kind of signature is inherently insecure (as
the compromised key could be used by the attacker to created a backdated
For example Authenticode uses timestamping [0] so that old signatures
can still be considered valid even when the key expires or is revoked later.
Adding something comparable to OpenPGP was discussed [1] on OpenPGP ML
recently and previously [2].
Kind regards,
[1]: [2]:

@_date: 2018-11-03 18:49:00
@_author: Wiktor Kwapisiewicz 
@_subject: GPG on Android 
I recommend using OpenKeychain [0] with K9-Mail. I'm using this combo
for a long time and never had any real problems.
OpenKeychain also supports hardware OpenPGP tokens [1], this makes the
key setup *very* easy on a new phone (not to mention that Termbot can be
added to the mix to login to remote server via SSH keys derived from
OpenPGP Authentication keys).
Kind regards,
[0]: [1]:

@_date: 2018-11-05 08:59:05
@_author: Wiktor Kwapisiewicz 
@_subject: GPG on Android 
Yes, it works with OpenKeychain. I've personally used Yubikey 4 with
USB-A to USB-C adapter, with USB-A to micro USB adapter, Yubikey 4C and
a Fidesmo card but much more types of tokens are supported [0].
There is an added benefit that the same exact token can be used with
GnuPG and OpenKeychain seamlessly.
Kind regards,
[0]:

@_date: 2018-11-05 09:01:55
@_author: Wiktor Kwapisiewicz 
@_subject: GPG on Android 
I just tried Flipdog CryptoPlugin. It couldn't import my key from
keyservers (thrown an exception on import) nor could it import some
other random keys I tried (e.g. 80615870F5BAD690333686D0F2AD85AC1E42B367).
Is it still developed? The last version seems to be from 2015...
Kind regards,

@_date: 2018-11-05 17:01:51
@_author: Wiktor Kwapisiewicz 
@_subject: OpenPGP key verification + legal framework 
Looks interesting.
But the language on the registration dialog [0] seems a little bit
and can not be deleted or removed by user's request.
Maybe it would also be a good idea to provide a list of locations of
Notaries before registration. I'd like to see if there is one nearby, if
not, there is not much benefit for me to register (at least now).
Kind regards,
[0]:

@_date: 2018-11-05 20:50:28
@_author: Wiktor Kwapisiewicz 
@_subject: OpenPGP key verification + legal framework 
Have you considered an alternative approach to email verification? For
example just sending an e-mail (probably encrypted) with a one-time
verification link?
That way non-Google users wouldn't be excluded. (Actually this approach
would work for Google and non-Google users alike).
Sending an encrypted e-mail additionally verifies that the user controls
the key in question.
Kind regards,

@_date: 2018-11-05 21:51:53
@_author: Wiktor Kwapisiewicz 
@_subject: OpenPGP key verification + legal framework 
Maybe there is a small misunderstanding here. I meant sending an e-mail
*to* the registering person encrypted using *their* OpenPGP key. This
way it can be read *only* by them even if they are using "insecure
e-mail system" :)
(there is also a minor point that properly deploying DMARC will protect
from spoofing "From" field on major mail providers)
Kind regards,

@_date: 2018-11-06 12:22:24
@_author: Wiktor Kwapisiewicz 
@_subject: encrypt linux backup folder using gpg 
Maybe that's too simple but what about just:
  gpg --encrypt --recipient $YOU backupfolder.tar.gz
Of course after generating the key (gpg --gen-key).
Best practices:
  - use most recent GnuPG,
  - you can generate keys on another computer (offline?) and export just
public parts to the one that does encryption,
  - you can move decryption keys to a hardware token.
Kind regards,

@_date: 2018-11-07 08:14:14
@_author: Wiktor Kwapisiewicz 
@_subject: Support for RSA keys > 4096 bits 
Hi Nicolas,
There is also this site that may be of interest:
As for your question, actually that was answered in GnuPG FAQ:
Kind regards,

@_date: 2018-11-10 16:31:29
@_author: Wiktor Kwapisiewicz 
@_subject: GPG on Android 
Yes, personally I'm using the Fidesmo card as it fits nicely in the wallet (credit card format).
But if having 4096-bit RSA keys is important Yubikey 5C is also an option.
Kind regards,

@_date: 2018-11-13 21:39:18
@_author: Wiktor Kwapisiewicz 
@_subject: WoT question - policy 
Sounds interesting, would the post office check the ID of the person claiming
the letter?
It reminds me of someone's method that utilized small bank transfers (I can't
find the source though :( ).
Why not issue generic certifications instead of sig2 and sig3? There are some
arguments against them: Kind regards,

@_date: 2018-11-16 10:32:36
@_author: Wiktor Kwapisiewicz 
@_subject: WoT question - policy 
For people interested these two articles by Konstantin Ryabitsev go into details
of how things are calculated:
In may be initially hard to digest but the amount of knowledge these articles
are packed is unparalleled, and, actually there are no other resources on this
subject I could find (GnuPG manual has a description but IMHO Konstantin's more
As for the sigs, sig1 are ignored in GnuPG by default, everything else has the
same value. So if Stefan's friends trust his key fully, all keys he's signed
will be equally valid.
On the other matter I doubt anyone would have a serious problem by signing
someone else's key regardless of circumstances. Signing documents, maybe, as
that would qualify as an Advanced Electronic Signature but signing (certifying)
keys? They are technically similar but that's all.
Kind regards,

@_date: 2018-10-03 22:12:15
@_author: Wiktor Kwapisiewicz 
@_subject: Where to put "export-pka" output in DNS? 
Hi Kees,
Yes, it's a TXT record, such as this (for user at example.com):
user._pka.example.com.  TXT
see examples here:
Note that if you have your own domain and HTTPS set up it would be
better to utilize the Web Key Directory, that is enabled by default in
modern GnuPG and used by some e-mail clients automatically
(thunderbird/enigmail, outlook/gpgol).
Export your binary key (gpg --export user at example.com > key.gpg) and get
the hash (gpg --list-keys --with-wkd user at example.com) and copy your key
to  replace
example.com and $hash with your values. Then "gpg --locate-key
user at example.com" will then download the key from your web server).
More details here: Kind regards,

@_date: 2018-10-08 20:42:01
@_author: Wiktor Kwapisiewicz 
@_subject: Get notation value through --with-colons interface 
I'm wondering if there is a way to programmatically access notations on
I see them through --list-options show-notations:
  gpg --list-options show-notations --list-sigs 6C8857E0D8E8F074 | grep
but adding --with-colons to that command unfortunately filters out
Is there any way to access it via API-like interface?
I'm mostly interested in a particular notation key on last
self-certification signature of my primary UID.
Thank you in advance for help!
Kind regards,

@_date: 2018-10-09 16:53:24
@_author: Wiktor Kwapisiewicz 
@_subject: Get notation value through --with-colons interface 
Wow, that was exactly what I needed!
Thank you Andre!
For the record, once I knew it I found some resources about the format:
and, of course:
Kind regards,

@_date: 2018-10-11 11:22:18
@_author: Wiktor Kwapisiewicz 
@_subject: Decryption troubles 
There are two encryption keys as far as I can see (more complete key in
attachment). Probably one of them was added but the secret key has been
lost (during migration? I don't know).
I've suggested checking which one works for them and revoking the other,
and then publishing the key to keyservers (that was some time ago,
that's how I've got this key with two E keys).
By the way of two encryption keys, I liked your idea:
"+  0x04 - This key may be used as an additional decryption subkey (ADSK)."
Kind regards,

@_date: 2018-10-15 15:21:26
@_author: Wiktor Kwapisiewicz 
@_subject: Question about specifics of --locate-key option 
I have a question about specifics of --locate-key option, that is how
does it decide which lookup mechanism will additionally be called if a
local key is not present.
A little bit of context - I was checking how Evolution works with GnuPG
and whether it would locate key through WKD if it's missing locally. I
found out that even though it passes the e-mail address to -r option
(encrypt/recipient) WKD doesn't work. A more careful look revealed that
they pass e-mail address wrapped in "<" and ">".
Sample call:
  gpg2 --verbose --no-secmem-warning --no-greeting --no-tty --batch
--yes --status-fd=61 --encrypt --armor --always-trust -u
user at example.com -r  --output -
This, as it turns out, does not trigger WKD. Removing "<" and ">" sure
enough does the trick and the key is found.
My question is: is there a documented behavior of how --locate-key
algorithm will process it's input? Or is it implementation-defined?
(currently I see it must be an exact e-mail address with no leading,
trailing characters). The man page description seems to leave it as
Thank you for your time!
Kind regards,

@_date: 2018-10-15 15:28:05
@_author: Wiktor Kwapisiewicz 
@_subject: Question about specifics of --locate-key option 
Oh, I forgot to mention that this is the commit adding "<" and ">" to
And the commit message:
This references the following guide:
It seems as if the guide suggested wrapping e-mail addresses with "<"
and ">".
Kind regards,

@_date: 2018-10-15 20:33:34
@_author: Wiktor Kwapisiewicz 
@_subject: Question about specifics of --locate-key option 
Thank you Werner, "--debug lookup" output is a lot more verbose.
The output is a lot different in both cases, in this case it detects MAIL:
$ gpg --debug lookup --locate-key ""
gpg: enabled debug flags: lookup
gpg: DBG: keydb_search: 1 search descriptions:
gpg: DBG: keydb_search   0: MAIL: ''
gpg: DBG: keydb_search: searching keybox (resource 0 of 1)
gpg: DBG: keydb_search: searched keybox (resource 0 of 1) => EOF
gpg: secmem usage: 0/32768 bytes in 0 blocks
Direct e-mail prints SUBSTR:
$ gpg --debug lookup --locate-key "test-wkd at metacode.biz"
gpg: enabled debug flags: lookup
gpg: DBG: keydb_search: 1 search descriptions:
gpg: DBG: keydb_search   0: SUBSTR: 'test-wkd at metacode.biz'
gpg: DBG: keydb_search: searching keybox (resource 0 of 1)
gpg: DBG: keydb_search: searched keybox (resource 0 of 1) => EOF
gpg: DBG: keydb_search: 1 search descriptions:
gpg: DBG: keydb_search   0: FPR: '74EC 8D3D A82A 79DA A25D  F10C 6BA5
5ED8 3ABA E1BB'
gpg: DBG: keydb_search: searching keybox (resource 0 of 1)
gpg: DBG: keydb_search: searched keybox (resource 0 of 1) => EOF
gpg: DBG: keydb_search: 1 search descriptions:
gpg: DBG: keydb_search   0: FPR20: '74EC 8D3D A82A 79DA A25D  F10C 6BA5
5ED8 3ABA E1BB'
gpg: DBG: keydb_search: searching keybox (resource 0 of 1)
gpg: DBG: keydb_search: searched keybox (resource 0 of 1) => Success
gpg: DBG: finish_lookup: checking key 3ABAE1BB (one)(req_usage=0)
gpg: DBG: 	using key 3ABAE1BB
gpg: key 6BA55ED83ABAE1BB: public key "Test WKD Key
" imported
Using a broken input (in this case a space after e-mail) also triggers
$ gpg --debug lookup --locate-key "test-wkd at metacode.biz "
gpg: enabled debug flags: lookup
gpg: DBG: keydb_search: 1 search descriptions:
gpg: DBG: keydb_search   0: SUBSTR: ''
gpg: DBG: keydb_search: searching keybox (resource 0 of 1)
gpg: DBG: keydb_search: searched keybox (resource 0 of 1) => EOF
gpg: secmem usage: 0/32768 bytes in 0 blocks
(if the key was previously in keyring it would display it, it won't use
WKD in that case - correctly).
I've tested this on both GnuPG 2.2.8 and 2.2.10, on a clean keyring
(inside a docker Alpine container).
Is it possible that only SUBSTR lookups that look like an e-mail trigger
WKD unlike MAIL matches?
Thank you for your time!
Kind regards,

@_date: 2018-10-22 14:22:08
@_author: Wiktor Kwapisiewicz 
@_subject: --refresh-keys for WKD 
If the key was fetched via WKD and it is expired it will be refreshed
using WKD too (see:  ).
You can "force" it via:
 gpg --auto-key-locate clear,nodefault,wkd --locate-key user at example.com
The entire thread here talks about this issue and I think you may find
it interesting:
Kind regards,

@_date: 2018-10-22 17:52:45
@_author: Wiktor Kwapisiewicz 
@_subject: --refresh-keys for WKD 
Is there a small bug in recent GPA (0.10.0)? I looked up:
 "test-wkd at metacode.biz" and got "No keys were found" but when I clicked
"details" I got the correct "key imported" GnuPG log details. Sure
enough the key is imported. (the key is available only through WKD).
Kind regards,

@_date: 2018-09-04 12:14:18
@_author: Wiktor Kwapisiewicz 
@_subject: Subkeys 
Hi Roland,
I don't know if you have some specific questions but the Debian wiki
page about Subkeys is nice: tl;dr version is primary/subkey setup lets you have your primary key
completely offline and use subkeys for daily work. If something bad
happens to a subkey (e.g. compromise) you can use primary key to revoke it.
There are 4 flags for key usage: C - Certify (for primary keys), S -
signing, E - encryption and A - authentication (e.g. SSH).
Kind regards,

@_date: 2018-09-04 12:15:17
@_author: Wiktor Kwapisiewicz 
@_subject: Gnupg-users Digest, Vol 180, Issue 3 
gpg --card-status
You can't copy generic files, smartcard contains only private keys (gpg
--edit-key X, keytocard) and a small amount of data objects (gpg
--card-edit, admin, url/lang/name).
Note that keytocard *moves* key to card, meaning the local copy of the
private key will be deleted. If you don't want that (e.g. encryption
key) either have a copy or *don't* save after keytocard command.
The card can store only 3 keys: one signature, one encryption and one
authentication key.
Kind regards,

@_date: 2018-09-24 10:10:00
@_author: Wiktor Kwapisiewicz 
@_subject: Utilizing facts of homedir organization (was: Exact definition of 
I'm not in a position to suggest "official" recommendations but one
alternative that doesn't touch .gnupg is using secondary computer
(offline, air-gapped if possible) to store secret keys and either:
1) "keytocard" them or
2) --export-secret-keys one by one.
Kind regards,

@_date: 2018-09-26 13:01:57
@_author: Wiktor Kwapisiewicz 
@_subject: Monitoring queries to gpg-agent? 
I'm using a similar setup. Pinentry only appears when the actual PIN is
needed (once to unlock the card, and on each signature if that option is
enabled). It *does not* appear when there is a need to "push the
button", one just have to mind the flashing light of the button.
This feature is described here:
And it seems there is a mention of "User Interaction Flag" Data Object
in OpenPGP Card spec:
 (search for "User
Interaction Flag") so in theory pinentry, or some other prompt, could be
displayed to the user.
Kind regards,

@_date: 2018-09-26 13:02:01
@_author: Wiktor Kwapisiewicz 
@_subject: Monitoring queries to gpg-agent? 
I'm using a similar setup. Pinentry only appears when the actual PIN is
needed (once to unlock the card, and on each signature if that option is
enabled). It *does not* appear when there is a need to "push the
button", one just have to mind the flashing light of the button.
This feature is described here:
And it seems there is a mention of "User Interaction Flag" Data Object
in OpenPGP Card spec:
 (search for "User
Interaction Flag") so in theory pinentry, or some other prompt, could be
displayed to the user.
Kind regards,

@_date: 2018-09-27 22:34:51
@_author: Wiktor Kwapisiewicz 
@_subject: converting gpg files into PEM and certification change confusion 
Hi Jen,
Could you provide links to the documentation that mentions the
"certificate chain"?
I went through these docs but didn't find the exact match:
PEM format contains X.509 certificates, as used by TLS and S/MIME, not
OpenPGP ones. Likewise openssl is used to work with X.509 certs,
Maybe the certs that you mention are for HTTPS server?
X.509 and OpenPGP are not compatible directly, although both can use
same cryptographic primitives (like RSA keys).
Kind regards,

@_date: 2018-09-28 09:52:12
@_author: Wiktor Kwapisiewicz 
@_subject: [INTERNET] Re: converting gpg files into PEM and certification 
Hi Jen,
Yes, then this is only related to SSL keys used by the server and
doesn't have anything to do with your OpenPGP/GPG keys.
They are a completely separate set of keys, and this looks like a
standard HTTPS setup. You can get some guides by searching for "ssl
apache". Generally the procedure is to generate new pair of keys,
generate CSR, then use the CSR to buy an SSL certificate. CA will
provide you with their certificate chain.
You can get a free certificate from Let's Encrypt, they are valid for 3
Kind regards,

@_date: 2019-08-16 12:53:06
@_author: Wiktor Kwapisiewicz 
@_subject: "There's always light..........." 
Even better would be using "--sig-keyserver-url" to embed the URL in an appropriate packet.
Details here:
Note that unless "honor-keyserver-url" is set in the config explicitly this is not used by default by GnuPG (see comments about "auto-key-retrieve" here:  And, if the key is available via WKD using "--sender $EMAIL" as GnuPG can fetch the missing key over WKD (using only --auto-key-retrieve).
Kind regards,

@_date: 2019-08-17 22:19:43
@_author: Wiktor Kwapisiewicz 
@_subject: Storing custom signed data in the key 
Hi Tomasz,
Yep, that definitely makes sense and notations are a good way to store additional data. The only problem here is how to get the notation values programmatically in a way that you know the self-signature is valid.
Sadly "gpg --list-options show-notations --with-colons --list-keys $KEY" does not print the notation output.
I did use OpenPGP.js to verify signature and extract notations for a small project of mine ( example here:  ) but I understand you want to keep the dependencies to the minimum.
Maybe you could use GpgME, the docs look promising:
 > The signature notations on a key signature are only available if the key was retrieved via a listing operation with the GPGME_KEYLIST_MODE_SIG_NOTATIONS mode enabled, because it can be expensive to retrieve all signature notations.
Source: One minor thing, you may want to adjust the notation name (key). RFC 4880 advises e-mail-like key where the domain is a name you control. So for example "pub-signify at debian.org" if you control "debian.org". Additionally it would be nice to have the e-mail redirect to a human in case someone sends the message there.
Kind regards,

@_date: 2019-08-26 20:47:40
@_author: Wiktor Kwapisiewicz 
@_subject: Slightly OT - mobile OpenPGP usage 
I agree. I'm using this kind of setup (offline master key and hardware tokens for subkeys) and it works very well. If one sets URL field on the token then just plugging the token when OpenKeychain is opened is enough to get the key ready-to-use.
Having multiple subkeys for multiple devices can be problematic in practice (e.g. GnuPG does not encrypt to all encryption subkeys or Autocrypt clients only export one signing subkey etc.)
W.r.t. NFC there is this minor detail:
But from the UX point of view it's very convenient.
Kind regards,

@_date: 2019-08-27 18:55:13
@_author: Wiktor Kwapisiewicz 
@_subject: Slightly OT - mobile OpenPGP usage 
Hi Chris,
I mean you start OpenKeychain, touch the NFC token and get the import key screen (see attachment). This is very straightforward, no need to mess with passwords and secret key files.
OpenPGP software requires public keys but tokens don't store them so own public keys need to be transmitted somehow. Fortunately OpenPGP Card spec has a "URL of public key" field.
You can see/set the value this way:
$ gpg --card-edit
Reader ...........: ...
Application ID ...: ...
Version ..........: 2.1
Manufacturer .....: Yubico
URL of public key : Login data .......: wiktor
This is in turn used by OpenKeychain (but also by gpg --card-edit and "fetch" subcommand) to download public parts.
Kind regards,

@_date: 2019-12-09 21:40:27
@_author: Wiktor Kwapisiewicz 
@_subject: Partial/fragmented decryption keys 
It is indeed not implemented in GnuPG.
In case you're curious on how does it work in Symantec PGP here's the and a video tutorial: Symantec recommends this feature for "extremely high security keys" by which I guess they mean designated revoker key or additional decryption key. Their implementation seems to bring all private keys to one trusted computer to reconstruct the combined key.
As others mentioned there is a flag for marking an OpenPGP key as "split" in the spec so theoretically it could implemented in free software.
One project that's close is DKGPG but mind that it "should NOT be used in production environments". Check out the following links:
Hope this helps!
Kind regards,

@_date: 2019-01-02 10:55:08
@_author: Wiktor Kwapisiewicz 
@_subject: NIST 800-57 compatible unattended encryption? 
Yep, to see this behind-the-scenes thing in action check out
"--show-session-key" and "--override-session-key" options. Described here:
Kind regards,

@_date: 2019-01-02 11:18:25
@_author: Wiktor Kwapisiewicz 
@_subject: A question about WKD 
Revoke your current key locally and generate a new one, now export both binary
keys (that includes revocation) to a file. Place it in .well-known/openpgpkey/hu
overwriting the old file.
Now, when GnuPG does --locate-key it will fetch both keys, revoke your old one
and add the new one.
If someone already has your old key GnuPG will do the fetch automatically when
the old key expires (you didn't use expiry as far as I can see so it won't
happen automatically).
One can still "force" the WKD refresh using:
$ gpg --auto-key-locate clear,wkd,nodefault --locate-key sac at 300baud.de
I just tested this all with some dummy key on my end and it worked just fine...
hope it works on your end too.
As for signing, if you specify signing key using "e-mail notation" GnuPG will
embed Signer's UID packet and when the recipient uses --auto-key-retrieve it
will grab your key using WKD instead of keyservers. But I didn't test what would
happen if the old key is already present in the keyring that doesn't match the
signature, probably nothing.
(You can inspect this file with pgpdump if you want to see the packet:
$ curl  | pgpdump
Happy New Year!
Kind regards,

@_date: 2019-07-02 10:01:25
@_author: Wiktor Kwapisiewicz 
@_subject: SKS Keyserver Network Under Attack 
Hi Alyssa,
I did work on one scheme that uses OpenPGP and I did some extensive tests even before keys.openpgp.org was announced and in terms of reliability it's day vs night compared to SKS.
Hagrid, as far as understand it, serves keys from static files so it by design has good performance. SKS on the other hand requires caches in front of the server and, in my tests, it was frequent that an old version persisted in the cache long after I updated a key.
No such issues on keys.openpgp.org, gpg --send-key and the new updated key is immediately available with no time outs or delays.
Decentralized non-identity information hagrid could still be possible. It's just a question over which protocol to synchronize this kind of data.
Kind regards,

@_date: 2019-07-02 10:16:45
@_author: Wiktor Kwapisiewicz 
@_subject: Your Thoughts 
For an alternative view on ask-cert-level see also:
I do agree that no two people use gpg in the same way.
Kind regards,

@_date: 2019-07-02 11:11:37
@_author: Wiktor Kwapisiewicz 
@_subject: Your Thoughts 
That's interesting.
All keys have the same comment in User ID field (random key):
$ gpg -k D81FE9F91ED6AA9F
pub   rsa4096 2018-03-26 [SCEA] [expires: 2023-03-25]
       B5601EA2ABE3CDD51765B6F9D81FE9F91ED6AA9F
uid           [marginal] Nikolaus Berlakovich (Offizieller Schl?ssel der REPUBLIK ?STERREICH  And they all are just one primary key (no subkeys) with all capabilities.
Email addresses use the same domain "parlament.gv.at" so it would be a perfect place to deploy WKD for these keys :)
Kind regards,

@_date: 2019-07-02 11:56:39
@_author: Wiktor Kwapisiewicz 
@_subject: New keyserver at keys.openpgp.org - what's your take? 
This sounds like a really good idea.
This way only one place would have to be updated by the user and keyservers would automatically refresh key data themselves.
I did suggest something like that but using WKD for Hagrid:
but your suggestion Andrew is more generic (key can be put on any HTTP host anywhere).
Kind regards,

@_date: 2019-07-02 22:37:31
@_author: Wiktor Kwapisiewicz 
@_subject: distributing pubkeys: autocrypt, hagrid, WKD 
Hi Konstantin,
Do you mean something simpler than [0]:
gpg --auto-key-locate clear,wkd,nodefault --locate-key torvalds at kernel.org
Trying key lookup over WKD if the subkey is missing locally (but primary key is present) would be a good idea. I've seen some really weird errors in that case [1].
If the primary key used short expiration [2] the refresh would be automatic but not many people like to prolong expirations every couple of months.
Kind regards,
[0]: [2]:

@_date: 2019-07-03 12:03:36
@_author: Wiktor Kwapisiewicz 
@_subject: SKS and GnuPG related issues and possible workarounds 
Yes. It seems distros that I know of manually manage package signing keys so they wouldn't be vulnerable to this kind of attack:
(although it would be a chore as previously they could just --refresh-keys).
For something completely different: on gnupg-devel there was a discussion on using Web Key Directory first for fetching signing keys.
So "gpg --auto-key-retrieve --verify HOWTO.txt.sig HOWTO.txt" would get the key from sixdemonbag.org instead of keyservers thus retrieving good, non-flooded key. The change is tracked at Kind regards,

@_date: 2019-07-03 21:28:26
@_author: Wiktor Kwapisiewicz 
@_subject: Your Thoughts 
I spent far too much time reading various OpenPGP resources so if you don't mind two articles that I particularly like:)
The information density when I read them was definitely high for me but such articles are unfortunately very rare in this ecosystem.
Kind regards,

@_date: 2019-07-05 11:15:10
@_author: Wiktor Kwapisiewicz 
@_subject: SKS and GnuPG related issues and possible workarounds 
I did a small experiment and it seems that your data is permanently preserved in sigchains of all people that follow you. Even if you delete your account.
For example this is my account's sigchain:
I did create a dummy account and followed that.
The account is deleted now:
But the data still remain in API of my sigchain (grep for the username).
I did try to clarify this with Keybase people but did not get the reply (maybe you'd have more luck in this).
Kind regards,

@_date: 2019-07-05 12:13:25
@_author: Wiktor Kwapisiewicz 
@_subject: SKS and GnuPG related issues and possible workarounds 
To be honest I'd consider this a separate matter. Because if the data is deleted from site X but archive.org snapshots it it's archive.org that now processes your data, not site X.
Now, of course I do agree with your overall conclusion that the data is spread throughout the Internet anyway (through mailing lists, git logs etc.) but that doesn't mean that social sites shouldn't do their due diligence w.r.t. data deletion.
As for robots.txt not all archiving sites respect it:
Kind regards,

@_date: 2019-07-09 15:50:01
@_author: Wiktor Kwapisiewicz 
@_subject: WKD documentation (Re: Testing WKD setup?) 
Hi Bernhard,
Policy file is checked during WKD check (and I saw the original poster did set it up). Checking directory listing would be an interesting thing to add! (Although this would be only heuristic).
--with-wkd gpg version is definitely good thing to add, thanks for the idea!
What I like in WKD most is that it's a super-simple standard. Once upon a time I mailed random PGP-using people asking if they'd consider setting it up and the feedback has been overwhelmingly positive. The only thing I needed was basically the local-part hash and actually that's what I built the checker for, to generate the URL in an easy way, even without GPG.
--with-wkd mentioned by Alyssa is what I used previously and it was good but ultimately I've become too lazy to use even that :)
As Phil mentioned the checker has not been updated to latest specs and gives warnings for issues that I think should be part of the spec (I mentioned them on the OpenPGP mailing list but did not receive any feedback from the I-D author).
No problem! I actually also implemented WKD in a couple of projects in three different languages (OpenKeychain, OpenPGP.js, initial support in Mailpile, I did have a patch for mutt but they didn't like the idea :)), so the I-D looks solid!
 > I thought you'd be interested in the
 > feedback. :)
Yep, thanks for the CC, I'm not subscribed to the ML at all times!
See you later!
Kind regards,

@_date: 2019-07-09 20:51:41
@_author: Wiktor Kwapisiewicz 
@_subject: WKD documentation (Re: Testing WKD setup?) 
Hi Bernhard,
You can also add Debian there and occrp.org (although the latter doesn't have policy file :().
I think Linux distributions are particularly good target for WKD - they can manage their developer's keys. They use HTTPS and usually developers have e-mail aliases at the distro domain. Additionally now with GnuPG 2.2.17 they can easily make first signature verification faster by utilizing Signer's UID packet (--sender option).
(As a side note, I did contact two distros with that in mind and one of them, I'll share this openly: Gentoo - did handle it in a very professional matter enabling WKD for developers in days and keeping me - an outsider - in the loop for the whole time. I'm still impressed by their execution!)
I'll think about it, this was just the most pleasant experiences I had in contributing (in no particular order!). I've got a small to-do list for project that I still want to contribute WKD support but sadly I'm out of time currently :-/
Sure, take a look at the thread starting here:
(The patch is not there but it's basically setting external locate mechanism in gpgme so, except one bugfix that I also found, it would be a one-liner).
 From what I can see Werner also planned to add that but I don't know how it ended up:
Neomutt deferred to Mutt's mailing list, see:
On the bright side I've seen other TUI mail clients planning to add WKD support e.g. Aerc (homepage:  author's opinion on WKD: Kind regards,

@_date: 2019-07-10 10:33:01
@_author: Wiktor Kwapisiewicz 
@_subject: WKD: more organisations using it (Re: WKD documentation) 
If you see the staff page:
there is this person listed:
I'd contact them.
For the record I don't know anyone there personally, I just checked one e-mail and saw they have WKD enabled (I do sometimes test random sites, Kind regards,

@_date: 2019-07-10 10:53:17
@_author: Wiktor Kwapisiewicz 
@_subject: WKD: mutt integration status (was: WKD documentation) 
Hi Bernhard,
Sure, why not. Especially that now WKD is prevalent in e-mail clients that care about privacy (Mailpile, Enigmail...). There is additional argument in favor of WKD nowadays - WKD delivers non-flooded keys as it's the key owner that controls what's added to their key.
If you convince Mutt community that WKD is a good idea I can prepare the patch for you. As far as I remember it's very minimal and I'd be happy to work on it. Unless there is no chance that WKD will be merged. Then I don't want to waste my time :)
Nb. in the process of getting to know mutt-GnuPG integration I've seen more places that would need attention. For example the code is riddled with PKA integration code and from what I can see PKA is considered Kind regards,

@_date: 2019-07-10 14:03:34
@_author: Wiktor Kwapisiewicz 
@_subject: WKD: mutt integration status (was: WKD documentation) 
I never used mutt before working on that change too ;)
Two patches are here (recreated from memory):
They do work as I've tested them in mutt using PGP: encrypt (y/e; the key was correctly fetched inside mutt).
If someone wants to take it over and propose it again on mutt-dev I don't mind (I don't care about credits so let's say it's released as public domain ;)).
There may be some error handling necessary. I've omitted it because if setting keylist_mode fails it's not catastrophic.
Kind regards,

@_date: 2019-07-12 15:10:43
@_author: Wiktor Kwapisiewicz 
@_subject: Arch Linux impacted by new defaults in 2.2.17 
I just saw the following bug reported in Arch Linux repos:
with the title "[gnupg] 2.2.17 release is broken by design and breaks It appears Arch's packages use Web of Trust for introducing new developers by adding 3 signatures out of 5 (or 6) marginally trusted Master Signing Keys:  and thus they depend on these signatures to be there.
Quoting the bug report:
Would deploying WKD on archlinux.org and making signatures with --sender preserve third-party-signatures that they depend on?
Kind regards,

@_date: 2019-07-16 12:34:30
@_author: Wiktor Kwapisiewicz 
@_subject: WKD: Publishing a key for multiple user IDs 
If you've got only gpg installed you can use export filters to prepare a stripped key:
$ gpg --export-options export-clean --export-filter keep-uid=mbox=$EMAIL --export $EMAIL
Hope this helps.
Kind regards,

@_date: 2019-07-19 12:34:13
@_author: Wiktor Kwapisiewicz 
@_subject: [Sks-devel] Fwd [from schleuder dev team]: Signature-flooded 
Hi Andrew,
Minor thing: I suggest using "openpgp4fpr:00000000000000000000000000000000000" instead of "fpr". That'd make the User ID a valid URI as "openpgp4fpr" is an assigned URI Scheme, see:
Probably the cleanest solution (suggested by others) would be using direct key signature (0x1F) [0] and avoid User IDs entirely. Your suggestion Andrew has the benefit that it's immediately backwards compatible with software "in the wild".
[0]: Kind regards,

@_date: 2019-07-22 12:32:46
@_author: Wiktor Kwapisiewicz 
@_subject: Essay on PGP as it is used today 
The author is Thomas H. Ptacek, here's contact info:
FWIW he's known for criticizing crypto that he thinks is unnecessarily complex, such as PGP and DNSSEC. If you want you can browse through his comments to see that the article is mostly a comprehensive collection of his thoughts.
Kind regards,

@_date: 2019-07-22 21:13:42
@_author: Wiktor Kwapisiewicz 
@_subject: revoke last valid user ID 
I'd try adding one dummy User ID, revoke the rest, then delete that dummy User ID before it gets sent to the keyserver.
I guess you don't want to revoke the entire key...
Kind regards,

@_date: 2019-06-07 16:18:55
@_author: Wiktor Kwapisiewicz 
@_subject: Adding notations with quick commands 
Is there a way to add notation to own key's User IDs with a quick command?
I'm looking for an alternative to this set of actions:
  1. gpg --edit-key $KEY
  2. notation
  3. xyz at example.com=test
  4. save
in a similar fashion to what --quick-* commands already do for other actions (e.g. --quick-add-uid).
Context: I'm working on a small scheme that will rely on notations and I'd like to make instructions for people as simple as possible.
Thank you in advance!
Kind regards,

@_date: 2019-06-09 11:09:28
@_author: Wiktor Kwapisiewicz 
@_subject: ProtonMail and Anonymity 
Hi Kirill,
What do you mean by that? There is an option to add OpenPGP key of a "foreign" contact and send to other e-mail providers just like any oter OpenPGP mail.
 From what I've seen on OpenPGP mailing list they're also planning to have Web Key Directory key discovery so that I'll be easier to encrypt to people outside ProtonMail
Yes, that's a problem. Still, who would discover a compromised Enigmail plugin (that autoupdates too), or even GnuPG? As the code is quite complex and in some cases there are many intermediaries (distro maintainers) it's not quite obvious what code are you running exactly.
As for webpages there is also this interesting plugin:
Kind regards,

@_date: 2019-06-09 19:17:10
@_author: Wiktor Kwapisiewicz 
@_subject: Adding notations with quick commands 
Hi Markus,
Yes, but as far as I understand --set-notation is only a modifier that needs to be used with another command (e.g. --quick-sign-key).
I tried using it with my own fingerprint twice but it didn't succeed:
$ gpg -u F470E50DCB1AD5F1E64E08644A63613A4D6E4094 --set-notation test at example.com=zzzz --quick-sign-key "Test McTestington " was already signed by key Nothing to sign with key 4A63613A4D6E4094
gpg: Key not changed so no update needed.
Kind regards,

@_date: 2019-06-14 11:59:16
@_author: Wiktor Kwapisiewicz 
@_subject: New keyserver at keys.openpgp.org - what's your take? 
Hi Oscar,
It's definitely faster and more responsive. That was my personal pain point when interacting with SKS. For example I'm working on a small thing that fetches keys from keyservers. I push my modified key, fetch it from SKS and... nope, no changes are visible (because of nginx caching). Then a different, old set of data is visible. Then timeout. Etc. keys.openpgp.org just works. I push data and it's available.
Storing endless amounts of data without any kind of verification was a bad idea. Maybe SKS was designed in good old times when no-one would try to take advantage of it but in 2019 validating e-mail address is bare minimum a service such as this should do.
The current shortcoming is stripping third-party signatures. So Web of Trust wouldn't work (for good reasons described in the FAQ [0]). For some people this may be surprising.
[0]: For the record I don't think keys.openpgp.org is in any way revolutionary as it is now. It's a bare minimum keyserver that OpenPGP needed for a long time. Fortunately the team behind it has more ideas that could only improve the overall image and UX of OpenPGP in the wider Kind regards,

@_date: 2019-06-15 22:30:25
@_author: Wiktor Kwapisiewicz 
@_subject: New keyserver at keys.openpgp.org - what's your take? 
Hi Konstantin,
This is already implemented.
I guess this could be implemented as a white-list of e-mails.
I hope you don't mind but I've mentioned this use-case on their issue
If filtering would be implemented this would also work as is.
As far as I understood the Hagrid keyserver developers they're not
against 3rd-party signatures per se, just don't like the idea of anyone
appending data to keys. The answer on the FAQ seems quite open:
I think it would be useful to bring it to Hagrid developers (either on
the issue tracker, via e-mail or  on IRC). From my experience
they're listening to feedback :)
Have a nice evening!
Kind regards,

@_date: 2020-01-04 11:54:45
@_author: Wiktor Kwapisiewicz 
@_subject: Different key pare for e-mail and signing code 
Hi John,
There is no single answer to this question. Some people use one keypair for signing e-mails and software because it's simpler (especially if people have or use Web of Trust to validate keys).
Apache, for example, recommends using separate keypair for code signing with specific guidelines (such as having UID comment "CODE SIGNING KEY" [0]). I guess this is due to the fact that one rarely signs code but when they do it they use a different hardware token thus avoiding the risk of misuse of their frequently used key (e-mail signing).
OpenPGP lacks extended key usage flags so if an object is signed, it's not clear what was the intention of the signer and it's theoretically possible to trick someone into signing an e-mail (via auto-reply or so) that then could be misinterpreted as software [1].
Kind regards,
[0]: [1]:

@_date: 2020-01-07 14:09:50
@_author: Wiktor Kwapisiewicz 
@_subject: What are some threats against which OpenPGP smartcards are useful? 
Hi Christoph,
There is one feature of smartcards that's hard to reproduce otherwise: once you pull the smartcard out of the port the attacker can't use it. If they steal your private keys they can do as they please with it (until you revoke keys and users refresh your key... that can take some time). For example if they steal your private encryption subkey they'll be able to decrypt future communications with you. When you pull out the smartcard that's where the attack ends.
(One way or another someone having code execution privileges on your computer is bad.)
Additionally smartcards require PINs and lock the card after several tries. This is not possible with keys on USB drives.
These two things are really useful when using the same token on multiple devices (e.g. I use the same card on my laptop and phone).
Kind regards,

@_date: 2020-03-22 20:22:54
@_author: Wiktor Kwapisiewicz 
@_subject: monkeysign removal from bullseye 
Hi Andrew,
Actually newer GnuPG already has a lot of interesting options. For key signing automation the most interesting one is "--quick-sign-key" that can sign a given UID in a key given by fingerprint.
Used like that:
Monkeysign's README already notes that but OpenKeychain can also import and sign keys with its built-in QR code scanner. But that's probably not a direct replacement for monkeyscan.
Kind regards,

@_date: 2020-05-12 14:08:07
@_author: Wiktor Kwapisiewicz 
@_subject: Checking multiple smart cards before asking for one 
Hi Valentin,
I believe this will work seamlessly in GnuPG 2.3.
You can track this ticket: Kind regards,

@_date: 2020-05-15 15:01:08
@_author: Wiktor Kwapisiewicz 
@_subject: keys require a user-id 
Hi Ingo,
AFAIK key validity and owner trust are per key not per User ID.
Third-party signatures are made for key fingerprint and User ID but then
it takes one fully trusted UID (or 3 marginally by default) for the key
to be considered valid. And then if that valid key signs some other User
ID the process starts anew. For signing other keys only the primary key
is needed, not User IDs.
The distinction is important because it affects only the Web of Trust
and only in one way. That is if you owner-trusted that UID-less key it
could become trust introducer in your WoT. Also you could encrypt to
that key and verify signatures just fine (it just wouldn't display
anything meaningful).
Is this useful? I'm not sure, but wanted to point out this one detail.
Kind regards,

@_date: 2020-05-15 15:34:31
@_author: Wiktor Kwapisiewicz 
@_subject: keys require a user-id 
Andrew there are two validity values:
$ gpg --edit-key andrewg
pub  rsa4096/FB73E21AF1163937
     created: 2013-07-02  expires: 2021-01-07  usage: SCA
-->  trust: unknown       validity: marginal     <--- here (A)
sub  rsa4096/6B09069314549D4B
     created: 2013-07-02  expires: 2021-01-07  usage: E
sub  rsa4096/5C1EC404D5906629
     created: 2015-04-26  expires: 2021-01-07  usage: S
sub  rsa4096/85FDF561DA8C0C46
     created: 2015-04-26  expires: 2021-01-07  usage: A
[marginal] (1). Andrew Gallagher  <-- and here (B)
[marginal] (2)  Andrew Gallagher Value from (A) is calculated from User IDs (B).
When you sign someone else User ID it's not your User ID that is doing
the signing it it's your key that's why you need a key validity that's
separated from User ID (key validity is calculated from User ID validity).
Kind regards,

@_date: 2020-05-15 20:14:41
@_author: Wiktor Kwapisiewicz 
@_subject: keys require a user-id 
Key validity directly influences the "WARNING: This key is not certified
with sufficiently trusted signatures" message that I think is pretty
significant for end-users. If it wasn't meaningful it wouldn't be
printed in the --edit-key dialog.
The argument could be reversed stating that "User ID validity is useful
only as an intermediate step to calculate key validity" and we wouldn't
draw any new knowledge from this. My original point was that key
validity exists.
Also: thanks for bringing my mental shortcut to technical correctness:
This could of course be further refining by mentioning ownertrust or
that 0x11: Persona certifications do not contribute to this or that
trust signatures affect the algorithm or...
Kind regards,


@_date: 2008-01-13 12:46:32
@_author: A C 
@_subject: Problem getting smartcard reader working !!! 
I am having trouble getting my smartcard reader working.  At present I am using SuSE 10.3, and apparently it does identify the hardware ( combined keyboard and reader (   )).  I am sure that the RPM's are installed correctly, and the PCSC dameon is started.  The card I am using is a Gemalto GemSafeXpresso 32 Kb.  Do you have any idea as to what the problem is?
 The output is as follows:
acl at linux-s33r:~> gpg --card-status
gpg: OpenPGP card not available: Card error
[2008-01-13T12:25:13] Log started
[client at fd 4 connected]
  4 - 2008-01-13 12:25:50 gpg-agent[5127]: handler 0x808b878 for fd 6 started
  4 - 2008-01-13 12:25:50 gpg-agent[5127.6] DBG: -> OK Pleased to meet you
  4 - 2008-01-13 12:25:50 gpg-agent[5127.6] DBG: <- RESET
  4 - 2008-01-13 12:25:50 gpg-agent[5127.6] DBG: -> OK
  4 - 2008-01-13 12:25:50 gpg-agent[5127.6] DBG: <- OPTION display=:0.0
  4 - 2008-01-13 12:25:50 gpg-agent[5127.6] DBG: -> OK
  4 - 2008-01-13 12:25:50 gpg-agent[5127.6] DBG: <- OPTION ttyname=/dev/pts/1
  4 - 2008-01-13 12:25:50 gpg-agent[5127.6] DBG: -> OK
  4 - 2008-01-13 12:25:50 gpg-agent[5127.6] DBG: <- OPTION ttytype=xterm
  4 - 2008-01-13 12:25:50 gpg-agent[5127.6] DBG: -> OK
  4 - 2008-01-13 12:25:50 gpg-agent[5127.6] DBG: <- OPTION   4 - 2008-01-13 12:25:50 gpg-agent[5127.6] DBG: -> OK
  4 - 2008-01-13 12:25:50 gpg-agent[5127.6] DBG: <- OPTION   4 - 2008-01-13 12:25:50 gpg-agent[5127.6] DBG: -> OK
[client at fd 5 connected]
  4 - 2008-01-13 12:25:50 gpg-agent[5127.6] DBG: <- LEARN --send
  4 - 2008-01-13 12:25:50 gpg-agent[5127]: no running SCdaemon - starting it
  5 - 2008-01-13 12:25:50 scdaemon[5347]: listening on socket   5 - 2008-01-13 12:25:50 scdaemon[5347]: handler for fd -1 started
  5 - 2008-01-13 12:25:51 scdaemon[5347]: reader slot 0: active protocol:
  5 - 2008-01-13 12:25:51 scdaemon[5347]: slot 0: ATR=3B 6D 00 00 80 31 80 65 B0 83 01 02 90 83 00 90 00 00
  5 - 2008-01-13 12:25:51 scdaemon[5347.0] DBG: -> OK GNU Privacy Guard's Smartcard server ready
  4 - 2008-01-13 12:25:51 gpg-agent[5127]: DBG: first connection to SCdaemon   5 - 2008-01-13 12:25:51 scdaemon[5347.0] DBG: <- GETINFO socket_name
  5 - 2008-01-13 12:25:51 scdaemon[5347.0] DBG: -> D /tmp/gpg-HUYTOJ/S.scdaemon
  5 - 2008-01-13 12:25:51 scdaemon[5347.0] DBG: -> OK
  4 - 2008-01-13 12:25:51 gpg-agent[5127]: DBG: additional connections at   5 - 2008-01-13 12:25:51 scdaemon[5347.0] DBG: <- OPTION event-signal=12
  5 - 2008-01-13 12:25:51 scdaemon[5347.0] DBG: -> OK
  5 - 2008-01-13 12:25:51 scdaemon[5347.0] DBG: <- SERIALNO
  5 - 2008-01-13 12:25:51 scdaemon[5347]: no supported card application found: Card error
  5 - 2008-01-13 12:25:51 scdaemon[5347.0] DBG: -> ERR 100663404 Card error   4 - 2008-01-13 12:25:51 gpg-agent[5127]: command learn failed: Card error
  4 - 2008-01-13 12:25:51 gpg-agent[5127.6] DBG: -> ERR 100663404 Card error   4 - 2008-01-13 12:25:51 gpg-agent[5127.6] DBG: <- [EOF]
  5 - 2008-01-13 12:25:51 scdaemon[5347.0] DBG: <- RESTART
  5 - 2008-01-13 12:25:51 scdaemon[5347.0] DBG: -> OK
  4 - 2008-01-13 12:25:51 gpg-agent[5127]: handler 0x808b878 for fd 6   5 - 2008-01-13 12:25:52 scdaemon[5347]: updating status of slot 0 to 0x0007
  5 - 2008-01-13 12:25:52 scdaemon[5347]: client pid is 5127, sending signal   4 - 2008-01-13 12:25:52 gpg-agent[5127]: SIGUSR2 received - checking smartcard status
----> And as supervisor:
linux-s33r:~ # testpcsc
MUSCLE PC/SC Lite unitary test Program
THIS PROGRAM IS NOT DESIGNED AS A TESTING TOOL FOR END USERS!
Do NOT use it unless you really know what you do.
Testing SCardEstablishContext   : Command successful.
Testing SCardIsValidContext     : Command successful.
Testing SCardIsValidContext     : Invalid handle. (don't panic)
Testing SCardGetStatusChange
Please insert a working reader  : Command successful.
Testing SCardListReaderGroups   : Command successful.
Command successful.
Group 01: SCard$DefaultReaders
Testing SCardListReaders        : Command successful.
Command successful.
Reader 01: AseIIIeUSB KB 00 00
Waiting for card insertion      : Command successful.
Testing SCardConnect            : Command successful.
Select file:  00 A4 00 00 02 3F 00
Testing SCardTransmit           : Command successful.
 card response: 67 00
Testing SCardControl            : ?
                                   ?vfKCS-15 Command successful.
Testing SCardGetAttrib          : Feature not supported. (don't panic)
Testing SCardGetAttrib          : Feature not supported. (don't panic)
Testing SCardGetAttrib          : Feature not supported. (don't panic)
Testing SCardGetAttrib          : Feature not supported. (don't panic)
Testing SCardGetAttrib          : Feature not supported. (don't panic)
Testing SCardSetAttrib          : Command successful.
Testing SCardStatus             : Command successful.
Current Reader Name             : AseIIIeUSB KB 00 00
Current Reader State            : 0x20034
Current Reader Protocol         : T=0
Current Reader ATR Size         : 18 bytes
Current Reader ATR Value        : 3B 7D 94 00 00 80 31 80 65 B0 83 01 02 90 83 0                                       0 90 00
Press enter:
Testing SCardReconnect          : Command successful.
Testing SCardDisconnect         : Command successful.
Testing SCardReleaseContext     : Command successful.
PC/SC Test Completed Successfully !
linux-s33r:~ # gpg --card-status
can't connect to `/tmp/gpg-9Hf97V/S.gpg-agent': No such file or directory
gpg: can't connect to the agent - trying fall back
scdaemon[4976]: no supported card application found: Card error
gpg-agent[4975]: command learn failed: Card error
gpg: OpenPGP card not available: Card error
scdaemon[4976]: updating status of slot 0 to 0x0007
scdaemon[4976]: client pid is 4975, sending signal 12
linux-s33r:~ # scdaemon[4976]: scdaemon (GnuPG) 2.0.4-svn0 stopped


@_date: 2019-08-30 11:41:48
@_author: Brian Minton 
@_subject: gpg tells me a signature from my own key is a forgery. 
I am testing signing with multiple keys.  However, gpg tells me that my
own key is a forgery.  I know it is not a forgery because I didn't forge
it.  Is there a way to tell gpg that my own key is good?  I'm using
trust model tofu+pgp, and both of my keys are cross-signed and set to
ultimate trust.
Here's an example:
$ echo this message is signed|gpg --local-user 37B9507ACFF2016E! --local-user 6B8EB3A065CFBAA9! --local-user 04D3ED26E707AD0643EBA7EC44F35EDB355D526A --clearsign|gpg
gpg: WARNING: no command supplied.  Trying to guess what you mean ...
this message is signed
gpg: Signature made Fri 30 Aug 2019 11:36:33 AM CDT
gpg:                using EDDSA key EED0158013DC2E6D6E001EA437B9507ACFF2016E
gpg:                issuer "brian at minton.systems"
gpg: Good signature from "Brian Minton " [ultimate]
gpg:                 aka "keybase.io/bjmgeek " [ultimate]
gpg:                 aka "Brian Minton " [ultimate]
gpg:                 aka "Brian Minton " [ultimate]
gpg:                 aka "Brian Minton " [ultimate]
gpg:                 aka "Brian Minton " [ultimate]
gpg:                 aka "[jpeg image of size 5202]" [never]
gpg: WARNING: We do NOT trust this key!
gpg:          The signature is probably a FORGERY.
gpg: Signature made Fri 30 Aug 2019 11:36:33 AM CDT
gpg:                using DSA key F9C4BB760E783F0DEC10A68A6B8EB3A065CFBAA9
gpg:                issuer "brian at minton.systems"
gpg: Good signature from "Brian Minton " [ultimate]
gpg:                 aka "keybase.io/bjmgeek " [ultimate]
gpg:                 aka "Brian Minton " [ultimate]
gpg:                 aka "Brian Minton " [ultimate]
gpg:                 aka "Brian Minton " [ultimate]
gpg:                 aka "Brian Minton " [ultimate]
gpg:                 aka "[jpeg image of size 5202]" [never]
gpg: WARNING: We do NOT trust this key!
gpg:          The signature is probably a FORGERY.
gpg: Signature made Fri 30 Aug 2019 11:36:33 AM CDT
gpg:                using EDDSA key 04D3ED26E707AD0643EBA7EC44F35EDB355D526A
gpg:                issuer "brian at minton.systems"
gpg: Good signature from "Brian Minton " [ultimate]

@_date: 2020-08-11 14:56:35
@_author: Brian Minton 
@_subject: Why does gpg -k write to tofu.db? 
I have a lot of public keys in my keybox (it's about 45 MB or so).  I
was trying to figure out why seemingly innocent tasks in gpg take a very
long time.  It seems that gnupg is making a very long running
transaction to the sqlite3 database ~/.gnupg/tofu.db laptop:~/.gnupg$ date;ls -last
Tue 11 Aug 2020 03:38:14 PM EDT
total 101184
    4 drwxr-xr-x 109 bminton bminton     4096 Aug 11 15:35 ..
   12 drwx------   5 bminton bminton    12288 Aug 11 15:17 .
  112 -rw-r--r--   1 bminton bminton   111320 Aug 11 15:16 tofu.db-journal
    4 -rw-------   1 bminton bminton      600 Aug 11 15:16 random_seed
 2580 -rw-r--r--   1 bminton bminton  2637824 Aug 11 15:16 tofu.db
    0 -rw-------   1 bminton bminton        0 Aug 11 15:16 tofu.db-want-lock
    4 -rw-r--r--   1 bminton bminton       26 Aug 11 15:05 .
So, this seems like the transaction has been running for at least 20
minutes.  That's just to run gpg -k
Why does gpg -k need to write to the tofu db?  I should mention that gpg
is running at 100% cpu in the R state.  Before starting the gpg -k
command, I killed all gpg processes with gpgconf --kill all just to make
sure there was no other process trying to talk to gpg.
This seems like it may also be related to  or
 but I'm not sure.
Some version info:
gpg (GnuPG) 2.2.20
libgcrypt 1.8.4
Linux kernel 5.5.0
Debian 10 (buster) + backports
arch: x86_64
Intel(R) Core(TM) i7-6600U CPU @ 2.60GHz with 4 cores (note that gpg
only seems to be pegging one core)
16 GB RAM
SATA SSD

@_date: 2020-08-18 10:24:32
@_author: Brian Minton 
@_subject: Why does gpg -k write to tofu.db? 
Sorry about the bad signature.  But, the question remains, why would
just listing 13 thousand keys take 2 hours? By comparison, gpg1 takes
just over a second with the same keys (except for ecc keys of course)
laptop:~$ time gpg1 -k|wc -l
real	0m1.094s
user	0m1.061s
sys	0m0.034s


@_date: 2004-04-14 08:12:33
@_author: Graeme Nichols 
@_subject: Problems importing public key 
Hello Folks,
I was sent a public key by a fellow so that I could encrypt a file to
him. The name of the file, for what it is worth is: 0xF94BBB03.asc which
happens to be the DSA key ID of his key used to sign his emails. It
imports OK into my gnupg V1.2.3 but when I click on the lock icon in
Evolution (so I can test the public key) I get the following error:
gpg: armor header: Version: GnuPG v1.2.4 (GNU/Linux)
gpg: Signature made Sat 03 Apr 2004 09:54:31 EST using DSA key ID
gpg: BAD signature from "Benoit Gr?goire (Serveur t?l?matique des
?tudiants de Polytechnique) "
gpg: textmode signature, digest algorithm SHA1
What have I done wrong?
I have another public key that I imported from a keyserver that works OK
if I click the lock icon on Evolution yet if I fire up seahorse and
click on the Key Manager icon to list the keys I have under the 'trust'
column both the public keys I have imported show 'ERROR'. Mine naturally
shows 'ultimate'
I really need to find out if I have done something wrong so I can
rectify the problem as Benoit is waiting for the file he needs me to
send him and I am not going to send it if something is wrong as the file
has some very private data in it and I don't want it to fall into the
wrong hands.

@_date: 2004-04-16 08:56:28
@_author: Graeme Nichols 
@_subject: Problems importing public key 
Thanks for the info Neil. I can encrypt the sensitive data file OK using
the public key provided, but, as you say, I have no idea whether I can
trust this key. I have never met the gentleman in question (who is as
honest as the day is long, I'm sure) but I have no way of knowing if
someone is impersonating him thus my concern when ALL his signed emails
fail to authenticate properly with the key he provided.
As I am no expert on this topic can you tell me how I could attempt to
download his public key from a keyserver? The only public key I have
downloaded so far had foolproof instructions in the form of a url in the
comment field and then foolproof instructions when one connected to that
url. It was the key for Dennis Patrick Lamb Jr., very cleverly done.

@_date: 2005-09-08 08:50:43
@_author: Graeme Nichols 
@_subject: WinPT 
Maybe off topic.If so please point me in the right direction. OS is WIN XP I have just installed the latest WinPT front-end 1.0rc2 from their web site. I want to use my installed gpg 1.4.2 but it will not run. It produces an error stating that it needs gpg 1.1 or higher. It runs OK with the version 1.2.1 of gpg that came with it. Could someone advise me what to do please.
Kind Regards,
Graeme.

@_date: 2007-09-19 15:56:42
@_author: Graeme Nichols 
@_subject: gpgsm and Kmail and X509 certificates 
Please bear with me, I am pretty ignorant on this subject.
What I am really trying to achieve is to import my X509 certificate into Kmail and be able to sign and encrypt emails in Kmail.
When configuring Kmail I click on Settings --> Configure Kmail then Security and I am presented with 5 tabs, two of which are Crypto Backends and S/MIME Validation. What do I put into these fields? The Crypto Backends --> Configure fields and the S/MIME Validation fields?
The other thing is I have a keypair generated with gpg as well as my X509 certificate.
Again, clicking on Settings --> Configure Kmail --> Identities I am presented with only the one identity, mine. Highlighting it and then clicking on 'Modify' I am presented with 5 tabs, one of which is Cryptography. Clicking on cryptography I am then presented with 4 fields I can enter data into. two of them are to do with OpenPGP signing and encryption keys. I have my PGP key ID in there. The other two are for S/MIME signing and encrypting certificates. Here is where I run into trouble... I cannot enter my certificates into these fields. If I click on 'change' I get an error 'An error occurred while fetching the keys from the backend: General Error' and 'No backends found for listing keys. Check your installation.'
The backends I have installed and checked are OpenPGP (gpg) and S/MIME (gpgsm) I do not have Chiasmus. (listed by clicking the 'scan' button) I have successfully imported my X509 certificate  into gpgsm and it is listed when executing gpgsm --list-keys.
Could somebody please give me instructions on how to get all this working?
Another error I get if I try and send a signed email from Kmail is: 'Signing failed. Bad passphrase' I don't really understand this one as it used to work before I upgraded to F7 from F6.
Kmail is 1.9.6 KDE is 3.5.7 gpgsm is 2.0.3 and gpg is 1.4.7
All help appreciated.

@_date: 2007-09-20 10:49:36
@_author: Graeme Nichols 
@_subject: gpgsm and Kmail and X509 certificates 
Hello Werner,
OK. Good.
Output is:
[graeme at barney ~]$ gpgsm -K
Serial number: 00
        Issuer: /CN=CA Cert Signing Authority/OU=http:\x2f\x2f CA/EMail=support at cacert.org
       Subject: /CN=CA Cert Signing Authority/OU=http:\x2f\x2f CA/EMail=support at cacert.org
      validity: 2003-03-30 12:29:49 through 2033-03-29 12:29:49
      key type: 4096 bit RSA
  chain length: unlimited
   fingerprint: 13:5C:EC:36:F4:9C:B8:E9:3B:1A:B2:70:CD:80:88:46:76:CE:8F:33
Serial number: 32D18D
        Issuer: /CN=6R-Ca 1:PN/NameDistinguisher=1/O=Regulierungsbeh?orde f?ur Telekommunikation und Post/C=DE
       Subject: /CN=6R-Ca 1:PN/NameDistinguisher=1/O=Regulierungsbeh?orde f?ur Telekommunikation und Post/C=DE
      validity: 2001-02-01 09:52:17 through 2005-06-01 09:52:17
      key type: 1024 bit RSA
     key usage: certSign crlSign
   fingerprint: EA:8D:99:DD:36:AA:2D:07:1A:3C:7B:69:00:9E:51:B9:4A:2E:E7:60
Serial number: 2A
        Issuer: /CN=10R-CA 1:PN/O=Bundesnetzagentur/C=DE
       Subject: /CN=10R-CA 1:PN/O=Bundesnetzagentur/C=DE
      validity: 2005-08-03 15:30:36 through 2007-12-31 15:09:23
      key type: 1024 bit RSA
     key usage: certSign
      policies: 1.3.36.8.1.1:N:
  chain length: unlimited
   fingerprint: 31:C9:D2:E6:31:4D:0B:CC:2C:1A:45:00:A6:6B:97:98:27:18:8E:CD
Serial number: 02
        Issuer: /CN=9R-CA 1:PN/O=Regulierungsbeh?rde f?r Telekommunikation und Post/C=DE
       Subject: /CN=9R-CA 1:PN/O=Regulierungsbeh?rde f?r Telekommunikation und Post/C=DE
      validity: 2004-11-25 14:59:11 through 2007-12-31 14:56:59
      key type: 1024 bit RSA
     key usage: certSign
      policies: 1.3.36.8.1.1:N:
  chain length: unlimited
   fingerprint: 75:9A:4A:CE:7C:DA:7E:89:1B:B2:72:4B:E3:76:EA:47:3A:96:97:24
Serial number: 2D
        Issuer: /CN=11R-CA 1:PN/O=Bundesnetzagentur/C=DE
       Subject: /CN=11R-CA 1:PN/O=Bundesnetzagentur/C=DE
      validity: 2005-08-03 18:09:49 through 2007-12-31 18:04:28
      key type: 1024 bit RSA
     key usage: certSign
      policies: 1.3.36.8.1.1:N:
  chain length: unlimited
   fingerprint: A0:8B:DF:3B:AA:EE:3F:9D:64:6C:47:81:23:21:D4:A6:18:81:67:1D
Serial number: 01
        Issuer: /CN=8R-CA 1:PN/O=Regulierungsbeh?rde f?r Telekommunikation und Post/C=DE
       Subject: /CN=8R-CA 1:PN/O=Regulierungsbeh?rde f?r Telekommunikation und Post/C=DE
      validity: 2004-11-25 14:10:37 through 2007-12-31 14:04:03
      key type: 1024 bit RSA
     key usage: certSign
      policies: 1.3.36.8.1.1:N:
  chain length: unlimited
   fingerprint: 42:6A:F6:78:30:E9:CE:24:5B:EF:41:A2:C1:A8:51:DA:C5:0A:6D:F5
Serial number: 00C48C8D
        Issuer: /CN=7R-CA 1:PN/NameDistinguisher=1/O=Regulierungsbeh?orde f?ur Telekommunikation und Post/C=DE
       Subject: /CN=7R-CA 1:PN/NameDistinguisher=1/O=Regulierungsbeh?orde f?ur Telekommunikation und Post/C=DE
      validity: 2001-10-15 11:15:15 through 2006-02-15 11:15:15
      key type: 1024 bit RSA
     key usage: certSign crlSign
   fingerprint: DB:45:3D:1B:B0:1A:F3:23:10:6B:DE:D0:09:61:57:AA:F4:25:E0:5B
Serial number: 00B95F
        Issuer: /CN=D-TRUST Qualified Root CA 1 2006:PN/O=D-Trust GmbH/C=DE
       Subject: /CN=D-TRUST Qualified Root CA 1 2006:PN/O=D-Trust GmbH/C=DE
           aka: info at d-trust.net
           aka: (uri       validity: 2006-04-27 12:40:54 through 2011-04-27 12:40:54
      key type: 2048 bit RSA
     key usage: certSign crlSign
      policies: 1.3.6.1.4.1.4788.2.30.1:N:
  chain length: unlimited
   fingerprint: E0:BF:1B:91:91:6B:88:E4:F1:15:92:22:CE:37:23:96:B1:4A:2E:5C
Serial number: 00B960
        Issuer: /CN=D-TRUST Qualified Root CA 2 2006:PN/O=D-Trust GmbH/C=DE
       Subject: /CN=D-TRUST Qualified Root CA 2 2006:PN/O=D-Trust GmbH/C=DE
           aka: info at d-trust.net
           aka: (uri       validity: 2006-04-27 12:40:54 through 2011-04-27 12:40:54
      key type: 2048 bit RSA
     key usage: certSign crlSign
      policies: 1.3.6.1.4.1.4788.2.30.1:N:
  chain length: unlimited
   fingerprint: 98:2A:75:67:0F:F8:28:4A:94:E0:9D:23:D8:E7:62:C8:BD:A4:54:04
Serial number: 00DF749F80AA51F0EDC0CB1FC183E97EE2
        Issuer: /CN=S-TRUST Qualified Root CA 2006-001:PN/O=Deutscher Sparkassen Verlag GmbH/L=Stuttgart/ST=Baden-Wuerttemberg (BW)/C=DE
       Subject: /CN=S-TRUST Qualified Root CA 2006-001:PN/O=Deutscher Sparkassen Verlag GmbH/L=Stuttgart/ST=Baden-Wuerttemberg (BW)/C=DE
      validity: 2006-01-01 00:00:00 through 2010-12-30 23:59:59
      key type: 2048 bit RSA
     key usage: certSign crlSign
  chain length: 1
   fingerprint: 7D:DC:76:1C:FD:AF:4C:E0:3A:B5:3A:DD:C9:FA:13:35:19:A3:DE:C9
Serial number: 03FCBA
        Issuer: /CN=CA Cert Signing Authority/OU=http:\x2f\x2f CA/EMail=support at cacert.org
       Subject: /CN=CAcert WoT User/EMail=gnichols at tpg.com.au
           aka: gnichols at tpg.com.au
      validity: 2007-09-02 03:15:25 through 2008-02-29 03:15:25
      key type: 2048 bit RSA
ext key usage: emailProtection (suggested), clientAuth (suggested), 1.3.6.1.4.1.311.10.3.4 (suggested), serverGatedCrypto.ms (suggested), serverGatedCrypto.ns (suggested)
   fingerprint: 2D:0D:02:D5:2E:0F:D9:C7:31:48:C8:A2:63:13:6F:AD:C7:21:27:34
secmem usage: 0/16384 bytes in 0 blocks
[graeme at barney ~]$
No. My certificate is the last one. All the others were already there.
Output follows:
[graeme at barney ~]$ gpgsm --passwd gnichols at tpg.com.au
gpgsm: DBG: connection to agent established
gpgsm: error changing passphrase: No such file or directory
secmem usage: 0/16384 bytes in 0 blocks
[graeme at barney ~]$
Looks like gpg-agent is running but no pinentry. Is that correct?
Pinentry-0.7.2-14.fc7 is installed. I have looked through the pinentry --help output but I don't really know what it is I have to do/set/enter or whatever. I'm pretty ignorant in this area. I have looked at the website  but I am still confused.
What should I do now?

@_date: 2007-09-21 12:47:17
@_author: Graeme Nichols 
@_subject: gpgsm and Kmail and X509 certificates 
Hello Werner,
Yes, I did. It said that one key was imported, key was good and all that. The key name was gnichols at tpg.com.au.crt. I have never been able to import my key in *.p12 format. I normally renew my key and install it into Firefox automatically then back it up to floppy in *.p12 format. Trying to then import that backup into gpgsm results in the following:
[graeme at barney ~]$ gpgsm --import My_Certificate120308.p12
gpgsm: gpgsm: GPG_TTY has not been set - using maybe bogus default
gpgsm: gpg-protect-tool: canceled by user
gpgsm: gpg-protect-tool: cancelled
gpgsm: total number processed: 0
secmem usage: 0/16384 bytes in 0 blocks
[graeme at barney ~]$
Yes. That worked, thank you.
No. there are no files in the ~/.gnupg/private-keys-v1.d/ directory.
Does not work as you can see above. Is the backup of my certificate from Mozilla in *.p12 format the same as getting it from CACert in *.p12 format?
Thank you very much for your patience and help. Please bear with me until I get this fixed if you will.

@_date: 2007-09-21 15:19:15
@_author: Graeme Nichols 
@_subject: gpgsm and Kmail and X509 certificates 
Hello again Werner,
This info is in addition to my recent email of today.
I have been reading the HowTo at and I am wondering if the F7 package for KDEPIM has been built without all the prerequisites to enable X509 certificate support in Kmail.
libgpgme is not installed.
libpth or libpth-devel is not installed.
libcrypt and libcrypt-devel are not installed.
libassuan and libassuan-devel are not installed.
kwatchgnupg is not installed
These are all listed as prerequisites in the HowTo to get it all working.
Most of the *.conf files in ~/.gnupg are there but have no entries in them.
KDEPIM is kdepim-3.5.6-4.fc7
It seems strange that kdepim is installed *without* all the necessary My system is F7.
What is your advice? BTW. I can list my secret keys using gpg --list-secret-keys (or -K) but not gpgsm --list-secret-keys (or -K). Is it possible that only gpgsm is broken? (missing prerequisites)?

@_date: 2007-09-23 12:20:21
@_author: Graeme Nichols 
@_subject: gpgsm and Kmail and X509 certificates 
I ran gpgsm-gencert.sh script and selected 2. Existing key thinking that
I could use my existing x509 cert. I was then asked for Keygrip. I
entered that and then asked for Name (DN) and this is where my ignorance
really shows. What is the DN? Is it a Domain Name? The script failed
with the wrong info for DN (I tried my email address and name)
Now this is the strange and confusing part, gnichols at tpg.com.au.crt
*did* install OK. It is also listed in Kleopatra's key listing. See
[graeme at barney ~]$ gpgsm --import gnichols at tpg.com.au.crt
gpgsm: certificate is good
gpgsm: total number processed: 1
gpgsm:              unchanged: 1
secmem usage: 0/16384 bytes in 0 blocks
Certificate imported OK.
[graeme at barney ~]$ gpgsm --list-secret-keys
gpgsm: DBG: connection to agent established
secmem usage: 0/16384 bytes in 0 blocks
[graeme at barney ~]$
No certificate listed :-(
[graeme at barney ~]$ GPG_TTY="tty"
[graeme at barney ~]$ export GPG_TTY
[graeme at barney ~]$ gpgsm --import My_Certificate120308.p12
gpgsm: gpg-protect-tool: canceled by user
gpgsm: gpg-protect-tool: cancelled
gpgsm: total number processed: 0
secmem usage: 0/16384 bytes in 0 blocks
[graeme at barney ~]$
I have followed the instructions in the
 HowTo and I still
get errors. e.g., the command echo "test" | gpg -ase -r 0xDD3AAA7D | gpg
which should open a graphical password dialog two times. First for
signing (gpg -ase) and then for decryption (| gpg) gives the following
[graeme at barney .gnupg]$ echo "test" | gpg -ase -r 0xDD3AAA7D | gpg
gpg: NOTE: old default options file `/home/graeme/.gnupg/options' ignored
gpg: NOTE: old default options file `/home/graeme/.gnupg/options' ignored
You need a passphrase to unlock the secret key for
user: "Graeme Nichols (Graeme) "
1024-bit DSA key, ID DD3AAA7D, created 2002-11-08
gpg: cancelled by user
gpg: no default secret key: bad passphrase
gpg: [stdin]: sign+encrypt failed: bad passphrase
gpg: processing message failed: eof
[graeme at barney .gnupg]$
The pinentry file is /usr/bin/pinentry. This doesn't seem to work at all.
Also, what config files should I have in ~/.gnupg? There is a whole heap
of config files most of which I think are not necessary. Left over from
earlier versions of gpg.
I am beginning to think that I should remove gpg and kdepim and
re-install to ensure that all dependencies are met. If I do this what
gpg packages do I need to re-install for X509 support?
Another problem that I just thought of that could be causing problems is
that my earlier versions fo gpg were built from a tarball. The Fedora 7
gpg files have been installed from an rpm binary package. Maybe there
are old gpg files lying about causing problems. If that could be the
case where should I look for old gpg files?
Thanks again for your patience.

@_date: 2007-09-22 15:32:05
@_author: Graeme Nichols 
@_subject: gpgsm and Kmail and X509 certificates 
I ran gpgsm-gencert.sh script and selected 2. Existing key thinking that I could use my existing x509 cert. I was then asked for Keygrip. I entered that and then asked for Name (DN) and this is where my ignorance really shows. What is the DN? Is it a Domain Name? The script failed with the wrong info for DN (I tried my email address and name)
Now this is the strange and confusing part, gnichols at tpg.com.au.crt *did* install OK. It is also listed in Kleopatra's key listing. See [graeme at barney ~]$ gpgsm --import gnichols at tpg.com.au.crt
gpgsm: certificate is good
gpgsm: total number processed: 1
gpgsm:              unchanged: 1
secmem usage: 0/16384 bytes in 0 blocks
Certificate imported OK.
[graeme at barney ~]$ gpgsm --list-secret-keys
gpgsm: DBG: connection to agent established
secmem usage: 0/16384 bytes in 0 blocks
[graeme at barney ~]$
No certificate listed :-(
Kleopatra's key listing is in the attachment.
[graeme at barney ~]$ GPG_TTY="tty"
[graeme at barney ~]$ export GPG_TTY
[graeme at barney ~]$ gpgsm --import My_Certificate120308.p12
gpgsm: gpg-protect-tool: canceled by user
gpgsm: gpg-protect-tool: cancelled
gpgsm: total number processed: 0
secmem usage: 0/16384 bytes in 0 blocks
[graeme at barney ~]$
I have followed the instructions in the  HowTo and I still get errors. e.g., the command echo "test" | gpg -ase -r 0xDD3AAA7D | gpg which should open a graphical password dialog two times. First for signing (gpg -ase) and then for decryption (| gpg) gives the following [graeme at barney .gnupg]$ echo "test" | gpg -ase -r 0xDD3AAA7D | gpg
gpg: NOTE: old default options file `/home/graeme/.gnupg/options' ignored
gpg: NOTE: old default options file `/home/graeme/.gnupg/options' ignored
You need a passphrase to unlock the secret key for
user: "Graeme Nichols (Graeme) "
1024-bit DSA key, ID DD3AAA7D, created 2002-11-08
gpg: cancelled by user
gpg: no default secret key: bad passphrase
gpg: [stdin]: sign+encrypt failed: bad passphrase
gpg: processing message failed: eof
[graeme at barney .gnupg]$
The pinentry file is /usr/bin/pinentry. This doesn't seem to work at all.
Also, what config files should I have in ~/.gnupg? There is a whole heap of config files most of which I think are not necessary. Left over from earlier versions of gpg.
I am beginning to think that I should remove gpg and kdepim and re-install to ensure that all dependencies are met. If I do this what gpg packages do I need to re-install for X509 support?
Another problem that I just thought of that could be causing problems is that my earlier versions fo gpg were built from a tarball. The Fedora 7 gpg files have been installed from an rpm binary package. Maybe there are old gpg files lying about causing problems. If that could be the case where should I look for old gpg files?
Thanks again for your patience.

@_date: 2007-09-23 12:10:26
@_author: Graeme Nichols 
@_subject: gpgsm and Kmail and X509 certificates 
I ran gpgsm-gencert.sh script and selected 2. Existing key thinking that
I could use my existing x509 cert. I was then asked for Keygrip. I
entered that and then asked for Name (DN) and this is where my ignorance
really shows. What is the DN? Is it a Domain Name? The script failed
with the wrong info for DN (I tried my email address and name)
Now this is the strange and confusing part, gnichols at tpg.com.au.crt
*did* install OK. It is also listed in Kleopatra's key listing. See
[graeme at barney ~]$ gpgsm --import gnichols at tpg.com.au.crt
gpgsm: certificate is good
gpgsm: total number processed: 1
gpgsm:              unchanged: 1
secmem usage: 0/16384 bytes in 0 blocks
Certificate imported OK.
[graeme at barney ~]$ gpgsm --list-secret-keys
gpgsm: DBG: connection to agent established
secmem usage: 0/16384 bytes in 0 blocks
[graeme at barney ~]$
No certificate listed :-(
Kleopatra's key listing is in the attachment.
[graeme at barney ~]$ GPG_TTY="tty"
[graeme at barney ~]$ export GPG_TTY
[graeme at barney ~]$ gpgsm --import My_Certificate120308.p12
gpgsm: gpg-protect-tool: canceled by user
gpgsm: gpg-protect-tool: cancelled
gpgsm: total number processed: 0
secmem usage: 0/16384 bytes in 0 blocks
[graeme at barney ~]$
I have followed the instructions in the
 HowTo and I still
get errors. e.g., the command echo "test" | gpg -ase -r 0xDD3AAA7D | gpg
which should open a graphical password dialog two times. First for
signing (gpg -ase) and then for decryption (| gpg) gives the following
[graeme at barney .gnupg]$ echo "test" | gpg -ase -r 0xDD3AAA7D | gpg
gpg: NOTE: old default options file `/home/graeme/.gnupg/options' ignored
gpg: NOTE: old default options file `/home/graeme/.gnupg/options' ignored
You need a passphrase to unlock the secret key for
user: "Graeme Nichols (Graeme) "
1024-bit DSA key, ID DD3AAA7D, created 2002-11-08
gpg: cancelled by user
gpg: no default secret key: bad passphrase
gpg: [stdin]: sign+encrypt failed: bad passphrase
gpg: processing message failed: eof
[graeme at barney .gnupg]$
The pinentry file is /usr/bin/pinentry. This doesn't seem to work at all.
Also, what config files should I have in ~/.gnupg? There is a whole heap
of config files most of which I think are not necessary. Left over from
earlier versions of gpg.
I am beginning to think that I should remove gpg and kdepim and
re-install to ensure that all dependencies are met. If I do this what
gpg packages do I need to re-install for X509 support?
Another problem that I just thought of that could be causing problems is
that my earlier versions fo gpg were built from a tarball. The Fedora 7
gpg files have been installed from an rpm binary package. Maybe there
are old gpg files lying about causing problems. If that could be the
case where should I look for old gpg files?
Thanks again for your patience.

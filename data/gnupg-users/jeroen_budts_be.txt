
@_date: 2012-08-02 14:34:58
@_author: Jeroen Budts 
@_subject: GPG key to authenticate to SSH? 
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256
Aha ok. I now see that I must have missed that in your previous mail.
Thank you for this explanation.
I have now two working setups to use my PGP key for SSH
authentication. One where I use gpg-agent and one where I use GNOME
Should it be useful for anybody, I have written a blogpost to
summarize all this:
I want to thank everybody for the help in gettings this working!

@_date: 2012-07-22 21:52:37
@_author: Jeroen Budts 
@_subject: GPG key to authenticate to SSH? 
Hash: SHA256
Hi all!
A few days ago I started wondering whether it is possible to use my
GPG key to authenticate myself to SSH (instead of using a regular
SSH-key). (To be more correct: an Authentication subkey on my GPG key)
I started Googling and found some information which learned me that it
seems to be possible but that it is not really straight forward.
During this search I learned about (amongst others) gpg-agent with the

@_date: 2012-07-24 22:04:31
@_author: Jeroen Budts 
@_subject: GPG key to authenticate to SSH? 
Hash: SHA256
Aha, OK, when I tried to run that command I got an error (telling me
that that functionality was not implemented). While I followed
instructions to disable the gpg and ssh parts of gnome-keyring,
apparently they didn't work. Now I completely disabled 'Launch GNOME
services on startup' in XFCE so gnome-keyring is not started anymore.
Now I get the correct output from the above command.
This works correctly as well now. I added my SSH key, gpg-agent
prompted me for the passphrase of the SSH-key and asked me for a new
passphrase. Now I can indeed log-in into my server without having to
ssh-add my key. However, before I started all this I could do this as
well, as gnome-keyring automatically does an ssh-add for you. (or as I
understand it, gnome-keyring uses it's own ssh-agent which unlocks the
key only when it is needed and automatically prompts for the
passphrase at that moment.)
What I really wanted to accomplish here is to use my GPG
authentication subkey for SSH authentication, without having to use an
SSH-key at all. But it is still not clear to me how this can be
accomplished, if possible at all?
I was thinking that:
1) somehow I should be able to make my public Authentication key known
to the server. That's why I used `gpgkey2ssh ` and
added the output to ~/.ssh/authorized_keys on the server.
2) somehow gpg-agent would also try authentication subkeys on
GPG-keys, amongst any other known SSH-keys, when trying to find the
correct key to authenticate to SSH? This doesn't seem to be the case.
Ideally I would be able to always use my GPG Authentication subkey for
SSH authentication and would not need any other SSH-specific key.
Is something like this possible, or am I completely missing the point?
(I still need to learn a lot about SSH etc).
Thanks for your reply!

@_date: 2012-07-29 21:39:08
@_author: Jeroen Budts 
@_subject: GPG key to authenticate to SSH? 
Hash: SHA256
In fact I think for most users their ssh-agent implementation is
rather nice. It completely removes the need to manually use ssh-add
and just makes it work out-of-the-box. That they also implement
gpg-agent similarly seems logical to give the user the exact same
Under XFCE the GNOME services are disabled by default, but comming
from GNOME enabled them when I switched to XFCE (running away from
GNOME 3)
That seems very easy and interesting indeed. I understand now how to
enable a GPG key for SSH with gpg-agent 2.1. What I do not yet
understand is how would add your public key to the authorized_keys
file on the server? Wouldn't the gpgkey2ssh-script still be needed for
this? Or can gnupg output the public key in the correct format?
Oh and one other small question: what exactly is a 'keygrip'? Why
aren't the regular key-ids used for this?
thanks for your help!

@_date: 2012-11-07 20:14:36
@_author: Jeroen Budts 
@_subject: SSH key and PGP key 
To change the expiration date of your key you can do the following:
(where $KEYID is the id of your key)
gpg --edit-key $KEYID
Then type 'expire' and press enter
type '1y', to make it valid for one year, and press enter
Then type 'save' and enter again. That should do it.
To use your GPG key for SSH authentication, i'll point you to my blog
post about it:
It contains a few methods on how to achieve this.
Hope this helps,


@_date: 2001-08-31 17:30:02
@_author: Ivan Lamouret 
@_subject: automated GPG ? 
I need to automate signing messages with gpg (1.0.4). I've read the FAQ
( and followed instructions therein, and
browsed through the mailing list archive but could not find what's not
working. I've also tried with the last gpg version (1.0.6) without more
ok here is what I tried :
followed steps 1 to 4 ok
step 5 from the FAQ:
gpg: Warning: using insecure memory!
gpg: ./secring.gpg: keyring created
gpg: ./trustdb.gpg: trustdb created
gpg: key XXXX595B.59: inserted into trustdb
pub  1024D/XXXX595B  created: 2001-08-30 expires: never      trust: -/q
sub  1024g/XXXX01D6  created: 2001-08-30 expires: never
sub  1024D/XXXX70E7  created: 2001-08-30 expires: never
(1)  Foo (foo) Command> passwd
Need the secret key to do this.
I have also tried to
gpg --homedir . --allow-secret-key-import --import secring.auto
now I remove the password OK ,
gpg: Warning: using insecure memory!
gpg: secret key parts are not available
gpg: no default secret key: general error
gpg: signing failed: general error
And also tried
gpg --homedir . --secret-keyring secring.auto --edit foo
I can remove the password but I get the same error (secret parts not
available) when trying to sign the document.
Any help would be much appreciated.
Further questions : on the target machine steps 1 of the FAQ is "Install
secring.auto as secret keyring". Can someone explain exactly what's meant by
"install"? is that import? is that rename file? are those the same?
I've observed that gpg creates all missing .gpg files. Do I need the public
keyring also on the target machine?

@_date: 2001-09-04 14:55:01
@_author: Ivan Lamouret 
@_subject: automated GPG ? [self-reply] 
Sorry I did not check the *devel* list before my first post.
I still think however that the Section 4.13 of the FAQ is not that clear on
the subject. see e.g.
automated signing with password-less subkeys
Unable to use batch mode to sign and encrypt a document with gpg
So here is the response to my question
1) the way to handle secring.auto is obscure to newbies : in fact one should
name the file secring.gpg directly, gpg does not recognize the .auto thing.
cd autodir
gpg --export-subkeys --no-comment > secring.gpg
the process of creating the signing subkey is correct, BUT :
2) the way to use gpg once BOTH the public keyring and the new secret
keyring are copied to the target machine is to indicate to gpg which key you
want (it seems unable to choose the key by itself, hence the "no secret
parts" error message!) :
gpg --local-user [name] (does not work with 1.0.4, but does with 1.0.6)
OR gpg --default-key [name | K_ID] (with 1.0.4 it seems you have to use the
key id)
Of course you can check that's working before moving to the target machine
gpg --homedir your_autodir --default-key your-key-id --clearsign  your_file
Hopes this will help someone,

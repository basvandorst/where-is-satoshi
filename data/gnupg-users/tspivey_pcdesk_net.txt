
@_date: 2009-05-10 05:52:21
@_author: Tyler Spivey 
@_subject: Problems changing hash algo for clearsign 
Hash: SHA1
Hello. I'm trying to make any message I clearsign
have a hash of SHA256.
Here is what I've done so far:
I've added "personal-digest-preferences SHA256" to the end of my gpg.conf file. According
to the manpage, this should be enough; since the manpage states:
The most highly ranked digest algorithm in
this list is algo  used  when  signing  without  encryption  (e.g.  --clearsign  or

@_date: 2010-03-29 19:01:59
@_author: Tyler Spivey 
@_subject: Secret key without public key 
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512
I ran a brief test, and was able to recover from this. Before you do
anything, I recommend making a backup of ~/.gnupg so you can easily
restore it. Here are my results, where 0xae742aaf is my key:
 ~/.gnupg
cp -a ~/.gnupg ~/.gnupg.orig
 and encrypt a test file
touch test
gpg -e -r 0xae742aaf test
That worked fine. Then I moved the public keyring to break things:
mv ~/.gnupg/pubring.gpg ~/.gnupg/pubring.gpg.orig
gpg test.gpg
and it said:
gpg: keyring `/home/tyler/.gnupg/pubring.gpg' created
gpg: key AE742AAF: secret key without public key - skipped
gpg: encrypted with RSA key, ID C6570DCB
gpg: decryption failed: secret key not available
 the secret key, because exporting public won't work
gpg --export-secret-key -o secret.key 0xae742aaf
 it so we can re-import
gpg --delete-secret-key 0xae742aaf
(answer yes to the prompts)
gpg --import secret.key
The output included:
gpg: key AE742AAF: secret key imported
gpg: key AE742AAF: public key "Tyler Spivey "
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)
gpg:       secret keys read: 1
gpg:   secret keys imported: 1
once done, the decryption of test.gpg worked fine.
Hope this helps.


@_date: 2015-11-26 16:00:01
@_author: Felix Seip 
@_subject: GnuPG 2.1: --auto-key-locate dane 
The past week I have been trying to figure out how to receive a public key from a DNS domain through GnuPG 2.1.9. The way I have been attempting to do this is by executing:
gpg --auto-key-locate dane -ea -r felixseip at gmx.de
However, every time I get the following error message:
gpg: error retrieving 'felixseip at gmx.de' via PKA: Unknown IPC command
gpg: felixseip at gmx.de: skipped: Unknown IPC command
gpg: [stdin]: encryption failed: Unknown IPC command
Clearly I am doing something wrong and was wondering if someone could help me with this problem.
Thank you in advance,
Felix Seip
Verschl?sseln Sie Ihre E-Mails mit gpg4o f?r Outlook | Encrypt your email with gpg4o

@_date: 2015-11-27 08:38:55
@_author: Felix Seip 
@_subject: AW: GnuPG 2.1: --auto-key-locate dane 
Thank you for your responses!
I was receiving the unknown IPC command because I had the GnuPG 2.0 agent and the GnuPG 2.1.9 agent running at the same time
Best Regards,
Felix Seip
-----Urspr?ngliche Nachricht-----
Von: Gnupg-users [mailto:gnupg-users-bounces at gnupg.org] Im Auftrag von Werner Koch
Gesendet: Freitag, 27. November 2015 07:58
An: Daniel Baur Betreff: Re: GnuPG 2.1: --auto-key-locate dane
On Thu, 26 Nov 2015 23:00, mls at dabpunkt.eu said:
Not for me:
  $ gpg --auto-key-locate clear,pka,dane,local -v --locate-key mls at dabpunkt.ue
  [...]
  gpg: error retrieving 'mls at dabpunkt.ue' via PKA: Not found
  gpg: error retrieving 'mls at dabpunkt.ue' via DANE: Not found
  gpg: can't handle public key algorithm 105
  gpg: error retrieving 'mls at dabpunkt.ue' via Local: No public key
  gpg: key "mls at dabpunkt.ue" not found: No public key
This is the current version but there are no changes related to DANE
since 2.1.9.  I redacted your address in the above transscript (eu->ue).
A likely reason for the problem is a change of the algorithm from
SHA-224 to a truncated SHA-256 in one of the last OpenPGP drafts.
Use "gpg --print-dane-records -k mls at dabpunkt.ue" to output a suitbale
DANE record.
Here is a working example:
  $ gpg --auto-key-locate clear,dane,local -v --locate-key wk at gnupg.org
  [...]
  gpg: pub  dsa2048/F2AD85AC1E42B367 2007-12-31  Werner Koch   gpg: key F2AD85AC1E42B367: "Werner Koch " not changed
  gpg: Total number processed: 1
  gpg:              unchanged: 1
  gpg: auto-key-locate found fingerprint 80615870F5BAD690333686D0F2AD85AC1E42B367
  gpg: automatically retrieved 'wk at gnupg.org' via DANE
  [...]
Note that using --locate-key is better because it uses the same strategy
as used by -r.  In the second example I left out PKA because I also have
a PKA entry for my address. By using "clear" I override defaults set in
gpg.conf and "local" instructs gpg to check the local keyring after
"dane".  Another address for testing is my g10code address.
   Werner

@_date: 2015-11-27 15:13:06
@_author: Felix Seip 
@_subject: WG: GnuPG 2.1: --auto-key-locate dane 
Von: Felix Seip Gesendet: Freitag, 27. November 2015 15:13
An: 'Werner Koch' Betreff: AW: GnuPG 2.1: --auto-key-locate dane
I tried this once again using the Werner Koch's key:
gpg --auto-key-locate dane -v --locate-key wk at gnupg.org
However, I didn't receive the answer that I was expecting. Here is what I got:
gpg: using PGP trust model
gpg: error retrieving 'wk at gnupg.org' via DANE: Not found
gpg: error reading key: Not found
I should have received a fingerprint with the corresponding key.
 I also tried:
gpg --auto-key-locate pka -v --locate-key wk at gnupg.org
The response I received was:
gpg: using PGP trust model
gpg: auto-key-locate found fingerprint 80615870F5BAD690333686D0F2AD85AC1E42B367
gpg: error retrieving 'wk at gnupg.org' via PKA: No public key
gpg: key "wk at gnupg.org" not found: No public key
Best Regards,
Felix Seip


@_date: 2010-12-07 13:05:12
@_author: Chris Poole 
@_subject: Store revoke cert. in symmetric file? 
I want to check I'm not doing something stupid.
I have backed up my .gnupg directory, including my revoke certificate,
to a symmetrically-encrypted tar file.
The password for this is a 50 character randomly-generated, stored in
my KeePass database (protected via a strong passphrase that I know).
I should be fine to keep this file and the KeePass database on many
locations, and I'm not somehow compromising my private key or revoke
certificate? (Standard CAST cipher for the gpg file, AES-256 for the
KeePass DB.)

@_date: 2010-12-07 16:56:06
@_author: Chris Poole 
@_subject: Store revoke cert. in symmetric file? 
I'm happy to do that, I'm just trying to keep the "very long,
complicated passphrases I have to remember" to as few as possible.
I really just want to make sure that storing my revoke certificate
this way (and not in any unencrypted form like on a piece of paper in
a safe location) isn't doing something stupid.

@_date: 2010-12-11 16:36:46
@_author: Chris Poole 
@_subject: Add sign key only? 
I have been using gpg for a while now, with just one subkey for signing and
I decided I wanted a separate key for signing, so if I have to give away my
private key for decrypting documents, they can't use it to impersonate me too.
Listing my keys was like this:
    pub  1024D/BAD246F9  created: 2006-03-31  expires: never       usage: SC
    sub  4096g/E71D7B3E  created: 2006-03-31  expires: never       usage: E
So I ran `gpg --edit-key BAD246F9`, and `addkey`. I chose DSA (sign only)
2048-bit. My keychain looks like this now:
    pub  1024D/BAD246F9  created: 2006-03-31  expires: never       usage: SC
    sub  4096g/E71D7B3E  created: 2006-03-31  expires: never       usage: E
    sub  2048D/7ED39759  created: 2010-12-11  expires: never       usage: S
It seems like I've done the right thing: I have a key for encryption, and one
for signing. It seems like my main public key is also allowed for signing too:
is this right?
Also, since I have two subkeys for encryption and signing, both use the same
passphrase, so I don't see how it'll stop anyone who gets my encryption key
being able to sign documents as me too.
Have I done it right?
(Also, my public key has now changed, which I guess is to be expected.)

@_date: 2010-12-11 20:25:46
@_author: Chris Poole 
@_subject: Add sign key only? 
But isn't the likelihood that they'll get your passphrase too, so the
security lies in the hope that they don't have access to the signing
subkey? This seems quite likely to me... I doubt they'd let you go
away and send them just the encryption/decryption key.
Also, my public key has changed now to reflect this extra key, but the
fingerprint remains the same. I just need to send this new key to the
keyserver? I don't have to re-generate a revoke certificate, since my
encryption subkey hasn't changed, right?

@_date: 2011-12-15 17:47:46
@_author: Chris Poole 
@_subject: Quieten gpg-agent output? 
I start gpg-agent with the -q option to make it quiet.
I then run a script that executes gpg -qse ... on several files,
encrypting and signing them (quietly).
I still find output like this in my terminal window:
I assume that gpg is reporting this, and then it checks for a key held
by the agent, which it uses (everything works fine, it's just the
output that annoys me).
I could quiten gpg totally, by running gpg ... 2>&1 >/dev/null, but
then I'd also stop any genuine errors that gpg reports. (I run this
command manually, usually, so would see errors.)
Is there a better way to get rid of these "errors"?

@_date: 2011-07-02 20:37:51
@_author: Chris Poole 
@_subject: Change key prefs; few questions 
I changed the order of preferred ciphers and hash functions using setpref. My public key has changed, but not the fingerprint. Is the done thing now to ask anyone with the key to pull the latest version? (I've already updated the keyserver version.)

@_date: 2011-07-03 09:37:55
@_author: Chris Poole 
@_subject: Change key prefs; few questions 
There's no way to change the cipher used for encrypting the private key itself (CAST5 I believe)?
(Not that I would, as I'm sure the default is more than good enough for my needs.)
Also, if I understand correctly, someone trying to brute-force the key would need to guess my passphrase, then pass it through the key stretching algorithm that gpg uses, before trying to decrypt the key. How often does the "work function" defining how long the key stretching process take, get updated? (I can't find an option to make it user configurable.)

@_date: 2011-07-03 17:15:07
@_author: Chris Poole 
@_subject: Change key prefs; few questions 
Exactly, it's just good to know. I won't bother changing the cipher or count,
but this leaves me with one final question:
In a few years, assuming GPUs are faster than ever, Moore's law is still on
track, and all that; should I change the number of iterations with --s2k-count?
The default 65536 is probably fine for now, but it'll certainly end up being too
slow. gpg won't do this for me, or counteract this in another way?

@_date: 2011-07-04 07:37:05
@_author: Chris Poole 
@_subject: Change key prefs; few questions 
Thanks for the detailed reply. Since --s2k-count will just affect the encryption of my private key, I'll go ahead and give myself a half second delay.
By this you mean symmetrically-encrypted messages, with the -c flag? So I can just use the --s2k-count flag again, to change this. Presumably it's pretty pointless to change the count for asymmetrically-encrypted messages, since the session key will be long enough to discourage any brute forcing anyway.

@_date: 2011-07-08 15:10:47
@_author: Chris Poole 
@_subject: Check that s2k-count has changed 
When changing my secret key's passphrase, I bumped up the s2k-count to
6553600 (I just added two zeros; I don't notice any slow down when
decrypting on a Core2Duo).
How can I confirm that this count is being used?
I ran gpg --list-packets ~/.gnupg/secring.gpg, which told me a number
for "protect count" (in the secret key packet section). Does this map
to the number I gave on the command line when changing my passphrase?
Chris Poole

@_date: 2011-07-08 19:35:57
@_author: Chris Poole 
@_subject: Check that s2k-count has changed 
I do indeed get 201. Out of interest, how is that calculated?
I also changed the digest algorithm to SHA512; the iter+salt line shows this, but still mentions SHA1 protection.
Am I right in thinking that this means SHA1 is always used as a kind of checksum for the passphrase (only that and a simple checksum being specified by RFC4880), but the passphrase itself is stored as a SHA512 digest after 6553600 iterations of the hash function?

@_date: 2011-07-08 21:54:31
@_author: Chris Poole 
@_subject: Check that s2k-count has changed 
Thanks for the detailed response. I've done some C programming so it's not too alien to me.
I don't know if this would be of any real use (perhaps just for those that are pretty sure of the slowest machine they'll be decrypting their private key on), but a function to calculate how many rounds it takes to run for x.y seconds would be useful. KeePass, for example, automatically calculates how many rounds can be calculated in 1 second, and will set the count accordingly.

@_date: 2011-07-13 12:28:50
@_author: Chris Poole 
@_subject: Why sign as well as encrypt files stored on untrusted drives? 
Say I encrypt a file to myself using my public key, and only I will
ever need or want to access the plaintext. The file will be stored on
an untrusted drive somewhere. I don't care about authenticity, in the
sense that I'll never need to prove to someone else that it was
actually I that sent that file. All I care is that I can get the
plaintext, and no-one else can.
I've read that it's a good idea to sign this file too, but I'm not sure why.
Surely if the file is changed then I've lost that data anyway, and the
file will fail to decrypt.
Is there some feasible attack that could change the encrypted data in
such a way that I won't notice it when I decrypt the file, but somehow
the file will still decrypt?
Chris Poole
PGP key: BAD246F9

@_date: 2011-07-13 14:04:00
@_author: Chris Poole 
@_subject: Why sign as well as encrypt files stored on untrusted drives? 
OK thanks. I won't bother then, as it's more hassle to have to type my
passphrase each time (I don't want to keep it on the agent).
I can't remember, but possibly some Duplicity documentation. It's a backup
program that uses gpg for encryption, and allows for both encryption and
Chris Poole
[PGP BAD246F9]

@_date: 2011-07-13 16:27:29
@_author: Chris Poole 
@_subject: Why sign as well as encrypt files stored on untrusted drives? 
You're right. Somehow I hadn't thought about someone being able to simply
encrypt a file with the same filename as an existing file to me, with some
nefarious content.
A separate encrypted file is kept, storing a manifest of the backed up files
(i.e., which file is in which encrypted container), so I think it'd be more
along the lines of getting lucky, since the program (Duplicity) would realise
that a file that should be in a certain container isn't, or something extra is
there in its place.
I use a separate signing key anyway, for all my signatures. How would using a
separate key help here?... I'd still need to give my passphrase somehow.
Chris Poole
[PGP BAD246F9]

@_date: 2011-07-13 16:34:55
@_author: Chris Poole 
@_subject: Why sign as well as encrypt files stored on untrusted drives? 
My key does indeed have this feature; thanks for the informative reply.
I had failed to realise this, somehow. A separate manifest file (also encrypted)
keeps track of which encrypted containers hold which files, so the attack is
definitely harder (or at least more noticeable). I think it's still best to sign
though, just to remove more possible attack vectors.
Chris Poole
[PGP BAD246F9]

@_date: 2011-07-14 10:48:10
@_author: Chris Poole 
@_subject: Why sign as well as encrypt files stored on untrusted drives? 
Yes, Duplicity uses these message digests only as a checksum, to make
sure corruption didn't occur during network transfer (i.e., nothing
Thanks for the help. I'm just going to get used to entering my
passphrase a little more!
Chris Poole
[PGP BAD246F9]

@_date: 2011-07-21 14:51:42
@_author: Chris Poole 
@_subject: gpg-agent automatically use passphrase for signing subkey? 
I have a program which encrypts and signs files; I supply the same key
ID for both operations, the 'primary ID'.
My key actually consists of the main key and two subkeys, for
encryption and signing.
I'm using gpg-agent to cache my passphrase.
I get asked for my passphrase (pinentry screen) once for the
encryption key, and then again, for the signing key.
Can I instruct the agent to give the passphrase for any subkey? Given
that they're both subkeys, the passphrases are the same.
Chris Poole
[PGP BAD246F9]

@_date: 2011-07-21 16:40:17
@_author: Chris Poole 
@_subject: gpg-agent automatically use passphrase for signing subkey? 
Perhaps I explained poorly.
I'm using gpg 1.4.11, gpg-agent 2.0.17.
Is it possible to enter a passphrase using gpg-agent, and have it cached such
that it's used whenever I want to use any subkeys from the same main key?
I sign a file with my signing subkey, and give gpg-agent my passphrase.
I then decrypt another file, which has been encrypted using my encryption key,
which is a sister subkey to the signing key (i.e., they both have the same
parent 'main key'). Is it possible to not be prompted for my passphrase again
for this operation?
I understand that they're separate keys, so I'm being prompted twice, but they
are both belonging to the same primary key: can that passphrase apply to all
subkeys when entered for any one?
I hope that clarifies what I want to do...
Chris Poole
[PGP BAD246F9]

@_date: 2011-07-22 10:38:39
@_author: Chris Poole 
@_subject: gpg-agent automatically use passphrase for signing subkey? 
That's a shame, but thanks.
Chris Poole
[PGP BAD246F9]

@_date: 2011-07-23 17:32:44
@_author: Chris Poole 
@_subject: gpg-agent automatically use passphrase for signing subkey? 
2011/7/23 Ingo Kl?cker :
That was precisely my point; if anything, entering the passphrase twice is more
of a security risk than storing it for 2 subkeys at the same time (risk of being
overlooked, etc.).
Chris Poole
[PGP BAD246F9]

@_date: 2011-06-21 15:25:58
@_author: Chris Poole 
@_subject: Temporarily remember passphrase? 
Thanks. I have gpg 1.4.11 on a Mac.
I ended up using the `--multifile` option, without starting gpg-agent
directly. It seems to do exactly what I want (presumably doing some
caching in the background for me).
One small issue, which I can't see from the man page: is there a way
to specify the passphrase cache time?
I was decrypting a large number of files (> 12,000), and about half
way through I was asked for my passphrase again. I assume the cache
had expired.

@_date: 2011-05-19 12:07:40
@_author: Chris Poole 
@_subject: Temporarily remember passphrase? 
I often decrypt several files in quick succession (with a simple script).
Is it possible to have gpg remember my passphrase, only very
temporarily? (Perhaps for 10 seconds or so.)
I've looked into gpg-agent, and tried using the --use-agent option
with gpg, but I can't find much documentation on the matter, or even
whether or not this is the best approach.
Chris Poole

@_date: 2011-11-01 11:53:20
@_author: Chris Poole 
@_subject: GnuPG decryption problem 
I have not used the gpg.exe you are talking about, but presumably it is the same
as on unix-like machines.
In this case, the things you type are being passed to the program correctly,
it's just that nothing is shown on screen (no ***'s, etc) to inform you of this.
Chris Poole
[PGP BAD246F9]

@_date: 2011-11-01 14:47:49
@_author: Chris Poole 
@_subject: GnuPG decryption problem 
Have you confirmed that the passphrase you have is correct, and it's entered
correctly? I would make sure this is the issue, by checking that gpg itself
works as expected.
1. Open Notepad, write something in it. It doesn't matter what. Save the file as
   test.txt or similar.
2. Use gpg to encrypt this file, with a command like `gpg -c -o test.gpg
   test.txt`. I am unsure of the exact command as I don't use Windows, but this
   command (with the `-c` option) will have gpg use a symmetric passphrase
   (i.e., no keys). Keep it simple, just enter a passphrase like "hello".
3. Delete test.txt
4. Open test.gpg with Notepad and ensure it's unrecognisable.
5. Decrypt test.gpg, something like `gpg -d -o test-dec.txt test.gpg`. It'll ask
   you for the passphrase you entered earlier.
6. Open test-dec.txt with Notepad, and check that you get the same text as you
   started with.
This should confirm that gpg works correctly for you, such that your "bad
passphrase" warning you're getting is the result of you having and/or entering
an incorrect passphrase.
Best of luck.
Chris Poole
[PGP BAD246F9]

@_date: 2011-11-11 19:24:17
@_author: Chris Poole 
@_subject: Signing already-encrypted files (all to self)? 
I have thousands of files in a maildir directory.
I've encrypted them all, individually, with the recipient as myself.
Just in case someone steals the machine or something.
It occurs to me it would be a good idea to sign these emails. Making
the assumption that I can trust they haven't already been tampered
with, is it OK to simply run
    gpg -o somefile.gpg -s somefile.gpg
or is it better to decrypt them all, and then sign and encrypt in one go?
Chris Poole

@_date: 2011-11-11 22:54:16
@_author: Chris Poole 
@_subject: Signing already-encrypted files (all to self)? 
OK thanks, I hadn't thought of that. I'd still have to decrypt and re-encrypt
them to keep hashes of all plaintext versions of the files though. (Thinking
about running this script every few days and hashing the latest files pulled
from the IMAP server; it'd be far easier just to find any files not ending in
".gpg" to hash.)

@_date: 2011-11-12 13:45:15
@_author: Chris Poole 
@_subject: Signing already-encrypted files (all to self)? 
I don't remember asking it before, but one reason I don't like Truecrypt is that
I use Duplicity to backup my local files, so having the individually encrypted
makes things easier (since it'll just ignore the ones already backed up). Adding
them to the truecrypt container would cause the entire thing to change (ignoring
homomorphic encryption or things iterating towards that).
Thanks, that's interesting reading. I use `getmail` to grab the messages, and
just pass them through gpg when this runs, so it works well for what I want.
Chris Poole
[PGP BAD246F9]

@_date: 2011-11-14 11:11:56
@_author: Chris Poole 
@_subject: Signing already-encrypted files (all to self)? 
On Fri, Nov 11, 2011 at 11:03 PM, Jerome Baum
That's perfectly acceptable, I'm just unsure of how to match the encrypted files
that haven't already been hashed. Here's what I do:
1. Run getmail, which puts a few more files in the maildir directory
2. `find maildir/ -not -name '*.gpg' | gpg ...` to encrypt these new files
At this point in the script now, I would want to hash the new files, but now
they'll have the `.gpg` output extension. I guess the easiest thing is just to
have gpg output with a filename `.tempgpg` or something, then hash, and then
rename to `.gpg`. (How else to match only these newly-encrypted files, when the
directory has thousands of files already ending in `.gpg`?)
Chris Poole
[PGP BAD246F9]

@_date: 2011-11-14 14:51:57
@_author: Chris Poole 
@_subject: Signing already-encrypted files (all to self)? 
Thank you. Doing something like this had totally slipped my mind. I actually
pass find's output to xargs anyway, so could do something like
    find . -not -name '*.gpg' -print0 | xargs -0I{} 'bash -c "gpg {}
&& md5 {} >> hashes"'
This solution now seems, well, very obvious.
Yes I'm aware of this, thanks. (This was why I was going to hash the plaintexts
in the first place.)

@_date: 2012-02-01 14:41:27
@_author: Chris Poole 
@_subject: 1024 key with 2048 subkey: how affected? 
I agree with you entirely, I'm just waiting for the various standards to pick it
up, and for more people to use it. When many people (whose opinion I value) use
and trust it, I will also.
Chris Poole
[PGP BAD246F9]

@_date: 2012-02-01 14:43:53
@_author: Chris Poole 
@_subject: 1024 key with 2048 subkey: how affected? 
Are you able to recommend any particular resources or books that cover ECC in a
more complete and up to date fashion?
Chris Poole
[PGP BAD246F9]

@_date: 2012-02-01 20:20:48
@_author: Chris Poole 
@_subject: 1024 key with 2048 subkey: how affected? 
Thanks, I didn't realise this; it's left me with plenty of reading to do.

@_date: 2012-01-20 20:15:29
@_author: Chris Poole 
@_subject: 1024 key with 2048 subkey: how affected? 
I created a gpg keypair a while ago, when the default was still 1024D.
This has a 4096g encryption subkey, and a 2048D signing subkey.
Since it's now recommended (to my knowledge) to use 2048-bit keys and
above, how does having a 1024-bit keypair affect me?
The encryption and signing is still being done by the subkeys, so is
it simply that they're signed by the parent 1024-bit key, and this key
is easier to fake?
Chris Poole

@_date: 2012-01-23 14:18:54
@_author: Chris Poole 
@_subject: 1024 key with 2048 subkey: how affected? 
If the only purpose of the primary key (in my case, where I have subkeys for
signing and encryption) is to sign the subkeys, why not simply make it stupidly
large? Equivalent to 256 bits with a symmetric cipher, or 512 bits?
Then, simply issue 2048 bit keys for encryption or signing as and when required,
all signed by this master key.
It would not really be used in day to day duties, since the subkeys will be used
for this.
(I guess, assuming of course that a key strengthening or lengthening algorithm
is used for the primary key.)

@_date: 2012-01-23 19:50:20
@_author: Chris Poole 
@_subject: 1024 key with 2048 subkey: how affected? 
On Mon, Jan 23, 2012 at 4:52 PM, brian m. carlson
That was what I hadn't thought about. Thanks for bringing it to my attention.

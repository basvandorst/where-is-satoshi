
@_date: 2003-11-03 20:08:38
@_author: 0tt0 
@_subject: Timing test of GnuPG and old PGP 
And that one should be in here somewhere
  J. Ottosson

@_date: 2008-12-17 15:51:42
@_author: J. Ottosson 
@_subject: GPA "Sign only locally" missing 
I just performed two identical installs of GPG4WIN 1.1.3 on two different Win OSes, one 2003 server standard and one XP Pro.
After everything is set and some keys are imported etc in both GPG (1.4.7) I used GPA to try to sign a key in both.
Then I noticed that the window coming up when pressing 'right click - Sign keys' are different. In one (XP) I get the option to "sign only locally" and in the other I don't get this option. The text are identical, the only diference being that the white checkbox and the text "Sign only locally" is completely absent.
(I assume this option is identical to the 'non-exportable' signature in PGP.)
Since I performed the installs in parallell, used the exact same install exe and haven't made any adjustments to any config I really am wondering what causes these different behaviors. Am I missing something? There were an earlier install of GPG 1.4.9 on the 2003 PC but it was uninstalled before the install of GPG4WIN Any ideas?

@_date: 2010-12-09 17:58:22
@_author: J. Ottosson 
@_subject: multiple subkeys and key transition 
If smartcard is not on your agenda you are certainly not basing your decision on

@_date: 2010-12-09 20:22:07
@_author: J. Ottosson 
@_subject: multiple subkeys and key transition 
But you do know what purpose a smartcard type of device is for, right? Protection of some kind of data, most often a key or several of them. We use hardware security devices of various sorts in many situations where high security is a requirement. We use them for tokens, crypto keys and we use them in systems processing our PIN handling in the financial systems etc (like the IBM 4758 etc).
Since protection of the private key is the single most important issue for any openpgp user, it is very natural to think about smartcard, since it is the best way to protect a key from disclosure.
Then, after having made the analysis of threats and cost one may opt to not use it anyway, as most of us do, at least partly and for some keys.
Unless you are using some kind of trusted computer system you simply do not have that kind of control over what is or is not done on your computer.
Then when it comes to media that the key is written onto and has ever been written onto, well that's often a bigger issue than most people tend to think. Anyone having used EnCase and tools alike it know what I mean. It all depends, partly on luck, if someone raids your home, if you're owned or not. Do you remember any old floppys that your earlier keys were ever saved to? Most don't.
It all comes down to what opponent we're having. So, it's partly a question about what threat model we're sitting in. A normal user like you and me are in most circumstances ok with an ordinary keyring on a portable USB stick or perhaps in a Truecrypt container for extra protection but others are not.
And I've been attending tempest lab tests too, so I'd say that most anything many users think is impossible or only happens on film is not even close to the limits of what some TLAs are readily doing.
A clue on that can also be picked up by looking at the counterintel procedures for sigint by the KGB during the cold war. If those types of guys are after you, a hardware security type of device is of limited protection to you too btw.
I can say this much, there exist smartcard research papers today, that are classified since a decade back or more and not seen by more than 10-20 people, and they are so for a reason.
So actually, nothing is safe come to think of it. But that't too depressing so we pretend smartcards are, from a practical perspective. nuff said
A few related links:

@_date: 2010-11-16 11:05:05
@_author: J. Ottosson 
@_subject: Testing with card, some questions 
I have tested a little with the openpgp card v2 and have some thoughts.
First, I'm quite impressed, lightning fast delivery of the stuff and the hw seem to work perfectly.
It took like 10s to get the reader to work, no drivers installed on this 64 bit 2003 R2 server I was sitting on, impressive. (Thanx to the internal CCID driver I presume?).
I generated keys ON the card, worked without problems. I chose the option to save backup during generation, first question I think (even though this was a test key) and that worked, I guess, even though I wasn't able to decrypt the file afterwards, but I only spent a few seconds on that particular issue.
One thing that puzzled me afterwards is that I seem to be able to make a _backup_ of the onboard keys from GPA GUI, just as from any other keys.
Even more puzzling (which lead me to believe that the backup just mentioned above was not made from card?) is that after having removed the card I could still see the card details(!).
It appears to me that the card-generated secret key, indeed all keys, have been imported into the ordinary key rings somehow.
Looking at --list-keys and --list-secret-keys seem to verify that..
At which point did I merge/import the card-generated private key into the .gpg secret keyring? This was not something I thought I actually did, which means I have to verify what happened before I start using the card for real stuff :)
So what did I miss here? The installation used is a GPG4WIN with GnuPG 2.0.14 on a 64 bit Windows server. The reader is a SCR335.

@_date: 2010-11-16 12:06:12
@_author: J. Ottosson 
@_subject: Testing with card, some questions 
Signing fails, it asks for card with specific serial number, but exporting secret key works (doing backup through GUI).

@_date: 2010-11-16 12:45:55
@_author: J. Ottosson 
@_subject: Testing with card, some questions 
A final small test before I awaite some wise advice..
I manually deleted the keys in the keyrings, which were obvioulusly there, that does not end my questions though.
Now I don't see the keys in list-keys etc when card is not active, good so far then :) However when I now use the card, the card contents is visable in GPA Card manager just fine, as with --card-status in cmd. However, now the onboard keys seem nonexistent to GPA itself. When trying to sign something, the card key is NOT visable when card is in and not showed amongst those to chose from. And the key does not show up in keyring listings.
I can have card manager up and remove-add the card repeatidly and it's noticed on the fly with no problems.
Refreshing makes no difference for GPA key manager. I have tried killing the service you mentioned but see no change.
Am I still missing something?

@_date: 2010-11-16 17:13:13
@_author: J. Ottosson 
@_subject: Testing with card, some questions 
Thanks for your answer.
Hmm actually.. even after a system reboot just in case (have been messing with services back and forth) the keys on the card does now NOT show up in GPA key manager at all.
In GPA Card Manager and using the --card-status or the --card-edit commands in cmd the keys on the card and the card itself look just fine.
What you're writing above seem to suggest that "gpg --card-status" should rebuild whatever needs rebuilding but I can't verify this here. Not at all. I don't understand how the GPA's Card manager can see the card just fine but the keys still don't show in key manager?
Obviously now I'm missing something else. Feel free to enlighten me. :)

@_date: 2010-11-17 19:27:38
@_author: J. Ottosson 
@_subject: Testing with card, some questions 
Ok, thanks for the info.  Was all my issues with keys not reappearing after --card-status related to what you're referring to?
Anyway, I generated new keys, overwriting the old ones and now these new keys are noted normally. Whas there any commands I should have run to have the keys re-appearing in the GPA key manager earlier?
Clearly --card-status didn't do it. Or should it have made a difference? Does it matter if GPG uses the internal CCID drivers or not? Any other command, like any of the 'rebuild'-related commands that could've been used?  The "refresh" command from the GUI didn't do any difference.

@_date: 2010-11-17 19:27:38
@_author: J. Ottosson 
@_subject: GPG on Windows 7? 
You are indeed not only speaking for yourself on this matter.

@_date: 2010-10-13 11:34:28
@_author: J. Ottosson 
@_subject: Issues importing PGP9 key to GPG1.4.10 (through enigmail) 
I'm having some earlier unseen issues importing a key. I generated a RSA 4096 key with AES as prefs in PGP9.
Key is successfully imported into GPG 2.0.14 using GPA (Latest GPG4WIN install).
In 2.0.14 it is shown with two self sigs using "gpg --list-sigs keyid", appears normal I think.
However, when trying to import the key onto a portable system with latest (today) versions of Tbird/enigmail (which seem to be version GPG 1.4.10) I get error messages stating that there are no valid User IDs and that this may be due to missing self signatures.
It seems the key is imported though. Am I forgetting some incompatibility issue here? Isn't this GPG version able to see the signatures?
(After this I'm actually starting having a number of other issues with Tbird/Enigmail (not chosing correct key for signing etc), but that may be due to the upgrade itself somehow and not GPG so I'll that out).

@_date: 2010-10-20 22:10:05
@_author: J. Ottosson 
@_subject: urgent: import public PGP Key which is my secret Key 
It indeed sound like you did an export of the public key only. In that case you're sort of f*cked.
However, there are at least theoretical chances of recovering your secret key, but somewhat slim. You could use a forensic tool such as EnCase to try to find the key (via the secret keyring) even after formatting the drive, should those sectors not be overwritten.
Since you most likely don't have that particular tool at hand you could probably find some other data recovery type of tool for that purpose. Use google. Some more capable tools may be offered with trial period perhaps.
EnCase could possibly be found at nasty pirate bay type of sites too, but obviously I wouldn't dream of suggesting such a thing to you.
But I'm quite sure there are some capable tools available the right way too, do a search. Possibly even some of the data recovery tools from Sandisk etc could be used if you're lucky.
The first thing to do though is to immediately stop using that disk, so that you're not writing over those sectors with new data. Chances are you already have done that, but if you're lucky..

@_date: 2011-07-21 17:55:48
@_author: J. Ottosson 
@_subject: Where are those stubs.. 
Thank you both for that piece of info, it was the missing information I think.
In a real world scenario this wouldn't be an issue (and hardly noticed) but in this case I was testing this specifically and only, and didn't see any notice of the pubkey having to be imported first; I'm unsure if those pieces of information have been put together earlier in the replies I've read.

@_date: 2011-07-26 18:07:40
@_author: J. Ottosson 
@_subject: How secure are smartcards? 
This subject is interesting and important, there have been deliberate attempts for many years to not tell the whole truth to the public about the security of "smart cards", be they financial type of cards or other. The public is only being told they are "totally secure" and also other info about the (in)security of associated systems are being withheld from the public or actively lied about.
Even worse though, as I recall from the time when I worked with IBM crypto processors like 4758 etc, a lot of the people inside the (somewhat introvert) banking community working with security, had no clue and actually believed that DESX was unbreakable and that the PIN system couldn't be tricked or broken and a lot of other things that were not necessarily true.
I remember reading Ross Anderson's comments on sci.crypt during the Citibank trials in UK with great interest and remember to this day a quote from him saying something about banking security people digging holes on the subject about PIN security - I found it insanely accurate and dead on, having my own experiences to compare with.
I also remember when I organized a live TEMPEST lab session with a swedish military hw supplier, the IT people attending didn't even know what the phenomenon was about..
In the late 1990' there were academic reports being classified as secret in Sweden, that proved a great number of smart cards to be insecure. A number of those were swedish military graded equipment and hence government organizations like FMV (Swedish Defence Materiel Administration) and MUST (Swedish Military Intelligence and Security Service) quickly withdraw the papers from the open Only a handful of people outside the military have read those papers I'm told.
Today I guess that there's nothing in those papers that the Cambridge people haven't covered..(?)
I think that as long as you're in possession of the card the content is safe from any reasonable types of threats imposed by logical access from malware etc, as long as there is no bugs in the on-board OS.. If however it gets stolen by skilled advisaries, one should regard the keys as compromised, generate revocation certificates and new keys. What constitutes skilled advisaries and the likelihood of being targeted by such an organization can always be discussed though.
As I understand it after having spoken to some government/military security people in Sweden there is no chip design on the planet that cannot be broken And if this isn't enough then its back to random numbers and one time pads I guess. But then.. when is it random enough..?
Needless to say though, we should still use smart cards, since it's better than the alternatives, I think.

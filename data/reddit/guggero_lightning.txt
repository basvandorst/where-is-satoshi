@_author: guggero_lightning
@_date: 2019-07-27 07:59:18
You would be, normally. But the linked guide/tutorial is exactly for cases like yours, there should be a chance of recovery. So you should try this.
@_date: 2019-07-27 07:56:34
Let me try to explain it. What u/MrRGnome wrote is only partially correct.
If you lose your channel state and your `channel.backup` you lose all your funds, even if the remote party closes the channel. At least that was the case without my guide/tool. With the guide you at least have a chance of getting your part of the channel balance back.
Here's the reason why closing a channel by the remote side is **not** enough:
Both parties in a Lightning channel hold a so called commitment transaction that spends the funding transaction and gives each party the current channel balance back on-chain. This commitment transaction is normally not published to the chain.
The commitment transactions of party A and party B look very similar in structure but are basically "mirrored".
Commitment TX of party A has 2 outputs:
1. Party B's balance, going directly to an address of B, no time lock
2. Party A's balance, going to a script address. The script can be unlocked in two ways:
   1. After a certain period of time (time lock), party A can get their balance.
   2. If you know a preimage of hash A_x, anyone can spend this part.
The "mirrored" version that party B holds looks like this:
1. Party A's balance, going directly to an address of A, no time lock
2. Party B's balance, going to a script address. The script can be unlocked in two ways:
   1. After a certain period of time (time lock), party B can get their balance.
   2. If you know a preimage of hash B_x, anyone can spend this part.
So if you are for example party A and you lost your channel state and backup file, you ask party B to force-close. This means, party B will publish the commitment TX that they hold. Once this TX is on-chain, you (party A) will be able to spend your part of the balance immediately.
**But here's the big catch**: All of the addresses in all of the commitment transactions are **NOT** addresses that go directly to either party's wallet. The secret keys for all these addresses are generated from the seed but then tweaked with the so called `per_commit_point` that changes with *every* update of the channel state. And what's worse, only the other party (in the example party B) knows the `per_commit_point` that is used to create the address where your funds (party A's funds) go to. [See the specs for more details.](
So without knowing the `per_commit_point` that only the other party knows, you (party A) will never be able to calculate or even guess the private key that can spend these funds. Therefore, funds are lost forever, even if your seed is safe.
That's where my tutorial/guide/modified version of LND comes into play. It uses the fact that there is the so called Date Loss Protocol (DLP) that nodes can use for their communication.
In our example, node A would connect to node B and tell them: "I've lost data, please help". Node B would then send the last `per_commit_point` back to node A and force-close the channel.
With that data, node A can then calculate the tweaked private key that can spend node A's balance. But because node A doesn't know anything more about the channel any more if there is no channel state and no channel backup, all the manual steps that are described in my guide are necessary.
You now might ask **WHY** in god's name was this designed this way?
I asked the same question when I was researching on how to do recovery. Apparently this was decided very early on in the specification of the BOLT specification (Lightning RFC).
The main issue was privacy, mainly when using watchtowers. The idea was that even when a watchtower sees two commitment transactions of party A for example, it wouldn't be able to identify that they both belong to party A because the addresses always change.
But that was decided before the final watchtower design was even started.
From what I understand the current watchtower design doesn't even send spending transactions for these outputs to the towers so changing the addresses of this part of the commitment TX is not really necessary any more.
That's why there is a [PR being worked on]( that will fix this issue for future versions of the Lightning Network protocol.
Then all of this would be unnecessary and having the seed would be enough (assuming the other party closes the channel).
@_date: 2019-07-28 15:31:22
The chances are probably a bit slim in that case.
But you should definitely try.
Can you find out your node ID that you had back then? If not, there is a way to derive it from the seed but it's a bit complicated.
Feel free to PM me on the lightning community slack, I use the same nickname as on medium.
@_date: 2019-07-27 08:00:26
Yes, that's true. Because the addresses the funds went to from closing the channels are not part of the wallet. See my comment above for an explanation why this is the case.
@_date: 2019-07-27 12:19:47
Not really. It's not exactly random, it's an Elliptic Curve point that is calculated from a secret which is in turn calculated deterministically for each commitment transaction (also called the `per_commit_secret`). See the [BOLT 3 Spec]( for more information.
@_date: 2018-09-19 19:24:42
Currently the web shop and self order screen is closed/disabled on sundays and after 6pm on week days! Just so you don‘t drive there for nothing.
@_date: 2018-09-20 12:33:00
You can see it if you zoom in. The small text at the bottom of the center part.
@_date: 2018-09-20 12:27:19
We are going to open source the shop (without the merchant specific stuff) soon. And there will be a README that describes how you can set it up with your own node.
@_date: 2018-09-20 12:28:44
As far as I know, Energy Kitchen is not going to convert back, instead the owner is going to HODL on to the bitcoins.
@_date: 2018-09-20 12:25:56
Thanks! It was quite straight forward to implement.  
Running it and tending to the Lightning channels is a bit tedious and requires a lot of know-how though...
And officially LND shouldn't be used for mainnet yet. So all the risk is with us but we really wanted to do it.
For mobile phones, there currently really only is Eclair for Android. No iOS for mainnet yet.
We are going to open source most of what you see in the videos in a few days. So if you want to build something similar, just follow us on [github.com/puzzle]( or me directly on [github.com/guggero]( 
@_date: 2018-09-20 08:49:37
I know... The order printer isn't fast enough so we had to trick a bit to keep the video short. But this is definitely something we are going to improve in the future.
@_date: 2018-09-20 13:54:58
Same reply here ;-)














@_date: 2018-09-18 17:14:06
Yes, that‘s the node!
@_date: 2018-09-20 12:34:04
Here's the promised demo video: [
@_date: 2018-09-20 09:02:44
It does say the order name in the payment request. But not all apps display the memo fully so this is the fallback.  
The order is also printed and given to the customer, mostly for legal reasons (tax code, exchange rate, and so on...).
@_date: 2018-09-20 12:27:51
Someone was faster than us and added us :-) But thanks for the heads up!
@_date: 2018-09-20 14:00:45
Ah, I see. That was my mistake, we had a technical problem with the server the shop was running on.
I fixed that this morning.
@_date: 2018-09-21 10:56:31
The code is now open source: [
@_date: 2018-09-20 13:58:06
It's called "Union7 Wallet". But it's only a remote control GUI, you need to have a lightning node running on a server somewhere and connect to it.
Unfortunately there is no all-in-one iOS app yet and for Android there is only Eclair as far as I know. Zap is one of the apps in development, I believe currently it only has remote control functionality too.
@_date: 2018-09-20 13:50:38
Thanks for the feedback!
The construction work is really bad timing, we didn't know about it until a day before our planned launch. It will be gone in a few days I hope.
As for the missing mobile apps, I'm well aware of that. But a lot of excellent people are very busy building them, it's just a matter of time.
Did you check [shop.energy-kitchen.ch]( as it prominently says on the screen? There you have a much bigger selection and can choose several items at once. The screen is mostly to show how fast it is and for people who want a single item.At the web shop you can also pre-order and pick up at a later time.But I appreciate your input!
@_date: 2018-09-18 13:15:16
We will open source everything soon. Then you can use it to build your own self service screen!
Subscribe to our github account ([github.com/puzzle]( or me directly: [github.com/guggero]( to be notified.
@_date: 2018-09-21 10:56:18
The code is now open source: [
@_date: 2019-03-06 17:39:44
It does work in the browser if that‘s what you mean:
Updated demo coming soon...
@_date: 2019-10-26 07:42:11
I talked to them on Slack and told them to do the `dropwtxmgr` trick to force on-chain rescan. Haven‘t heard anything from them since then...
@_date: 2019-04-30 13:39:30
@_date: 2019-04-30 13:39:56
You're right, the warning sounds stupid. I changed the wording.
@_date: 2019-04-30 12:58:24
Yeah, and there's a big fat warning above that:


@_date: 2019-05-01 09:43:44
That‘s a great idea, thanks! I‘ll try to add some test vectors.
And thanks a lot for the tip!
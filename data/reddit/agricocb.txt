@_author: agricocb
@_date: 2014-07-07 18:41:46
"Close" as in hops from the origin.  The number of nodes connected to each of the attacker's "spy" nodes is just so that for any given transaction, they are more likely to be directly connected to the node that first broadcasts the tx.  The power of this analysis comes from the fact that the attacker has many "spy" nodes, and if the majority of those nodes agree that they all saw that tx for the first time from one particular IP, then that IP is very likely to have been the first one to introduce it to the network.
Either way, I don't disagree in the spirit of your post; for most uses, it's probably not enough of a concern to worry about.  But I wanted to make sure that it was pointed out (since the thread was a "Moronic Monday" thread) for casual/new users that the anonymity that they might have perceived from your post is not iron-clad.  A motivated attacker (which includes your local government) could fairly easily deploy the infrastructure needed to pierce that anonymity.
So, to those people, take the well publicized recommended practices to enhance the psuedoanonymity, such as not reusing addresses and connecting to the Bitcoin P2P network with Tor (also not a silver bullet, as many research papers are publishing recently, but still a worthwhile step for any uses that might benefit from anonymity.)
@_date: 2014-07-07 16:23:46
Reader beware that the parent comment is correct in why determining the definitive origin of a transaction is difficult, but it is optimistic in saying that the likelihood is extremely low.  In fact, it is not terribly difficult to determine the originating IP with high probability.  The attack is to deploy (or just control) enough nodes in the peer-to-peer network (they don't have to be miners or anything, just relaying peers) that are well connected.  Many nodes are connected to 8-16 peers, but it's not difficult to deploy nodes that will keep open many more connections.  Then when a transaction comes in, 1) it is likely that the first peer that they have that transaction relayed from is close to the originating IP, since they are well connected, and 2) correlating the "first-relayer" info among the many well connected peers that the attacker controls means that if a majority received it from the same IP address, it's very likely that it was the first to put it on the network.  This means that either that was the originating node, or that node is acting as a relay for a private connection (ie, the node that did originate the transaction connects primarily through that IP address).  Either way, the attacker has gained significant information about the origination of the transaction.  I think the parents point still holds, that in general you probably don't have to worry about this overly much, but be aware that the likelihood of your transactions being connected to your IP is not "extremely low".
@_date: 2017-08-25 21:55:59
I'm not sure what you mean by "delay settling the transaction on chain", because that is actually what LN *is*.  The LN Hub owner doesn't write IOUs, unless the transaction exchanged with the remote hub owner, which is a valid bitcoin transaction, pre-signed with his half of the signing keys, is what you consider an IOU.  But, again, there's no FR going on, unless you think that the FR is going to be some conspiracy between the middle-men.  The first party (payer) gives up his access/right to the full amount of bitcoin that is being transacted, and the second party (payee) gets full access/rights to the full amount of bitcoin that is being transacted.  So the only place that there can be any shell game going on is if the hub connected to the payee pays out (on the LN channel) without having ensured that he gets a transaction from the hub connected to the payer for that amount.  And why would that hub do that?  It doesn't create access to any additional bitcoin in the system, it just puts the second hub at risk that the first hub will default.  And there's already a cryptographically solid solution so that that default risk isn't there...  But at no point during this whole thing does anyone need to settle the transaction on the chain, so there's no "delay settling the transaction on the chain" to be done...  It's delayed by design (until the channels are closed.)
@_date: 2017-08-25 19:58:19
Well, at the risk of being called a shill, I'd like to point out that LN does not in any way allow fractional reserve.  Feel free to read up on LN to verify the following statements, but the way that LN works is to send bitcoin (on chain) to a multisig address.  Generally, it will be funded equally by both parties, but if one party already owes the other (or is intending to immediately make a transaction that would cause them to transfer bitcoin), this can be baked in to the initial transaction.  So, assume that both parties send 1mBTC to a multisig address, and each of them owns one of the keys to that multisig address.  Also when setting up the channel, they both create a transaction that sends the contents of that address in the desired initial proportion to their own addresses, though the part of the transaction that would send it to their address is set up to be time-locked.  They sign this transaction with their key (but it's not valid yet, because they don't have the other party's key), and send it to the other party.  Both of them do this.  So, at this point, either of them could sign that transaction and send it out to the bitcoin network and have it mined into the blockchain.  Neither of them really wants to do this, though, because the transaction that they have that they could sign and send out has *their* funds time-locked (ie, they'll eventually get it, but they will have to wait.)  Now the payment channel is open.  There is *no* bitcoin available to either of them that they didn't put in; there is no ability for any fractional reserve bullshit.  Now, if either of them wants to pay the other, they can simply create an updated transaction with a different distribution of the bitcoin that has already been deposited into the multisig address.  They sign it with their key and send it to the other (again, with their payment time-locked).  The other party creates the reciprocal transaction (putting the time-lock on their payment, but not the other party's), sign it and send it to the other party.  At no point can either of them be defrauded; at worst, they can sign the previous transaction that they have and send it out to the bitcoin network, and eventually get the BTC that they were entitled to (with the annoyance of having to wait for the time-lock.)  But they haven't ever lost control of the amount that they are entitled to.  Once they have completed the round-tripping of the updated transactions, it is safe to assume that the transaction is "complete" on the LN channel, because either party can put it on the blockchain, and it is gospel at that point.  Eventually, probably around the time that the time-lock expires, they will close the channel by broadcasting the most recent transaction that was round-tripped.  They can agree that one of them will create a transaction reflecting the current state, just with no time-lock, sign it, and send it to the other to sign and put on the blockchain, but it's not necessary for each of them to still be safe.
So, that's how LN works, and you can see how there's no "extra" bitcoin created to allow some fractional reserve.  The reason that people talk about how it will create "bank like" structures that everybody will transact with is because you probably won't want to use LN directly with everyone that you transact with, because you'd have to commit the full amount that you think you will ever "owe" to the other party on the channel for the length that the channel is open.  You don't want to make the time-lock too small, or you aren't really saving yourself any transaction fees (if it's only open long enough to do one or two transactions, then you've actually paid two TX fees [one to open, one to close], and that's no better for fees, nor for demand on block space.)  But if the time-lock is long enough for you to do multiple transactions on the channel, then you have to have lost (temporarily) access to your bitcoin for as long as the channel is open.
The solution is that for most people, they will want to open just one channel with a central "bank like" entity, and then they pay the bank who pays the other party for you on the channel that they have open with that party.  But note that whatever payment you send to the "bank" to forward on to the other party has to have already been deposited *by the bank* to the channel that they have with the other party.  Now, of course, the bank is probably going to receive a payment from that other party, probably going to yet another party, but there still isn't any fractional reserve going on, as long as all the transactions actually happen on the LN (ie, everybody gets a copy of a transaction that they *could* use to close out the channel and claim their BTC whenever they want.)  The only place that FR might happen is if a "bank" opens where they say, "trust us, we'll keep track of it in a spreadsheet, and you can withdrawal at any time you want."  Then they could, but of course, we already have PayPal for that.  The "bank" will make their money by charging transaction fees to push money from your channel payment to them to the channel payment from them to the party you wish to send bitcoin to.  Since this is not a scarce global bandwidth resource (it just represents the opportunity cost that they have for locking up their bitcoin in a bunch of payment channels), hopefully the transaction fees will be pushed by the market to be considerably lower than the transaction fees for using the actual blockchain to settle every transaction.
So, I know that was long, but really, I think there's lots of FUD out there, and you've been fed a story about fractional reserve that just isn't the full truth.  It doesn't have to happen for LN to be the capacity solution.
@_date: 2012-12-14 21:22:48
Yes, but that doesn't change the point that the block construction is currently, and is likely to be, even in the future where we have much higher TPS, in software on a CPU, rather than in custom hardware.  It's just too difficult to design this into hardware without building what is essentially a custom CPU.  If TPS gets so high that current processors are unable to handle the sheer bandwidth, then you'll probably get exactly that; just as we have specialized network routing CPUs now.  Still, the actual method for constructing the blocks will be codified in software, not hardware, and so it will be an easy upgrade path, even for special purpose boxes.  I still think that the only part that is going to be "etched into silicon" and unchangeable about mining boxes is going to be the SHA256 nonce iterations.
@_date: 2012-12-13 21:19:58
I think the point is that the part of mining that is not "iterating through nonces" is not likely to be handled by the ASICs.  I don't know how BFL and the other ASICs miners are architecting their systems, but about 2 years ago, I went through the exercise of making an FPGA miner for myself  (it was a hobby project, and due to the FPGA that I had available, was already behind the curve by the time I was finished, so it's nothing to brag about), but the part that you have the ASIC or FPGA hardware do *is* the iterating through nonces.  The assembling the blocks and all of the bookkeeping you still have a microprocessor do for you.  It's unnecessarily complex to put that kind of function in hardware, and as you imagine, it would make the ASICs obsolete as soon as there were changes to the way people incorporate transactions.  My guess, which I'd lay money on being right, is that the BFL boxes have a cheapo ARM CPU on them which is *way* overpowered for managing the P2P network protocol and block construction, and they just ship the hashes to the ASIC to iterate over.  So if the logic of the transaction inclusion or the max block size or anything like that changes, it'll just be a firmware update for the CPU in the box.  I'm *certain* that the companies that are promising to provide these boxes have provisions for those upgrade paths.  The thing that would make the ASICs obsolete is when we decide that SHA256 isn't the right hash (definitely a hard fork of the block-chain), and then the hardware that has SHA256 in silicon will be useless.  But I think that's far enough off that people on the ASIC waiting list don't have that much to worry about.
@_date: 2017-10-05 15:01:38
 is correct; the 2048 words are unique in the first four letters, but only when position information is maintained.  A quick perl script reveals that punching the letters "a", "e", "l", and "r" without keeping track of their order could be decoded as any of "alert", "already", "early", "learn", "real", or "relax".  So, TL;DR, don't use that scheme, or you're going to have a non-trivial chance of losing your wallet...
@_date: 2011-06-09 15:46:46
If this was a troll, feel free to stop reading here and laugh your own private laugh.  If not, don't spread these kinds of ridiculous rumors about Bitcoins' weaknesses, because they look plausible, even though they aren't true.  For those wondering, if deepbit has more than 50% of the network (which they are indeed close to), they don't have the ability to mess with your wallet.  Only you (or somebody with your private keys) can spend (transfer) those coins.  The only thing that the deepbit operators can do if they control more than 50% of the computational power is the double-spend attack, which means that they could spend coins *that they already control*, and then spend them again, correcting the block chain such that the first "spend" appears to have never happened.  This gets harder (requires even more computation power) as time goes on after the first spend, and only really benefits the deepbit guys if they get something in return for the first spend before they make it disappear.  It's not an easy attack to make happen, and especially not with "only" 50% of the power.  And everybody else's coins are safe.  The only one who could lose in this setup is the receiver of the first spend.
@_date: 2011-06-09 14:15:19
I've been day trading (manually) for a few months now, looking at the indicators and trading when common sense combined with the indicators say it's a good idea.  In the end, I think I'm pretty close to parity with what I would have gotten if I had just kept the original batch of BTC and let them appreciate.  I was already "all in" before the recent jump up toward $30USD/BTC, and I'm glad I didn't day trade that away...  I think I'm just going to stop at this point and ride the market appreciation until I see some reason for it to go down permanently...
@_date: 2011-06-18 15:36:02
Okay tas783, you've got my commissions.  Here's my referral code for the next guy - TH-R15201
@_date: 2011-06-09 13:36:47
According to  at least the Eligius pool "Will only include transactions in its blocks if the sender pays a fee of at least 0.00004096 BTC per 512 bytes".  So we do have at least the beginnings of a real reason that fees will make your transactions go through quicker.  Of course, I think Eligius is only on the order of 200Ghps, compared to Deepbit and Slush that are both in the 1-2Thps range, so...
@_date: 2011-05-16 12:30:31
To fill in specifics a little more, the crypto problem being solved is finding a nonce such that the SHA256 hash of a block including that nonce is strictly less than a target number.  The block that includes the nonce that you are hashing is the candidate for the next block in the block-chain, so it includes some header information, along with the output of another hash, which is the merkle tree root of all the transactions included within the block.  The target is the (very large) number below which your hash needs to fall, which means that most of the time, you'll calculate the hash, and it won't be below the target, so you'll increment the nonce, and calculate the hash again.  The target moves roughly every two weeks such that the average rate of people finding blocks is once every 10 minutes.  In this way, a block includes all of the transactions up until that block was successfully added to the block chain (if you change a transaction, it changes the merkle root, which changes the hash of the block, which means that it would be invalid (not below the target), so the block chain maintains consistency of the transactions accepted into the network.  The "free money" bit is that it is accepted practice to insert a "coinbase transaction" into the merkle root, which directs 50BTC to an address to which you have the private key, and a coinbase transaction alone does not need to have a source of bitcoins (all other transactions, to be accepted, need to have sources and destinations add up to the same amount of BTC.)
@_date: 2011-06-09 15:52:38
But the only reason to find a hash collision of *arbitrary data* is for password cracking.  If it was to be used to substitute one message for another, where the message was protected by a hash, we'd have to be told what the target message should look like.  So, no, just asking for a "solution" of a hash collision makes it pretty transparent that this is only useful for authentication bypass.
@_date: 2011-06-18 16:05:01
This is a bit of a misleading explanation, though.  Double spending is avoided by having the transfer of the coins being ratified by the network when a block is found.  At that point, if another transfer of those same coins is seen in the network by nodes that have seen the block, they will discard it.  In order to perpetrate a "double spend," the attacker has to come up with another block chain that is longer that doesn't include the transfer of coins to you (and optionally includes a transfer of those coins to another address.)  In order to do that, he has to be able to generate a block that replaces the one that ratified your transfer, as well as another block to follow that (making his chain longer.)  It will probably take him long enough for generating those two blocks that yet another block in the "real" chain will have been generated, and then he falls behind and never catches up.  This is why he needs to control more hashing power than the rest of the network, or it is *very* improbable that he will ever catch up.  Of course, he *could* just get really lucky and generate two blocks back to back (it's a lottery, after all,) but it's really improbable.  So, that's where the "50% of the network" thing comes from.  But to go back to your original assertion, you really *don't* have any double spend assurance before the transfer appears in the block chain.  If the attacker transfers the coins to you, and you see it in the network, and then he immediately transfers the same coins to another address, the network will hold on to both transactions, waiting until they appear in the block chain, at which point they will discard the other one.  If they are generating blocks, they will pick the one they received first to include in their Merkle tree, but that doesn't mean that another node won't see the other transaction first, and include it in their Merkle tree.  Whichever one gets included in a block first will become the "right" one, and the other will be discarded.
That said, if you see the transaction in the network (pretty instantly, as you point out,) there's a pretty good chance that you aren't going to get burned.  If you don't see another transfer of the coins that are coming to you within the short time after you see yours, there's a pretty low probability that injecting a double spend of those coins later is going to be seen as the "first spend" of those coins by many other nodes, especially not the ones that are actually generating blocks, so you've got a pretty good likelihood.  I'd probably be fine with taking the risk on low value transactions, but less fine with the big ones.  Just like you'll take a $20 at a yard sale without inspecting it for being counterfeit, but you'd probably look a little closer at anything bigger.
TL;DR Double spending really *is not* assured against until after the ~10 minute wait for a block, but you've probably got enough confidence after you see the transaction in the network (almost instantaneously) to trust small transactions.
@_date: 2011-10-18 17:30:39
No, because Bitcoin uses ECDSA (elliptic curve) signatures, the security of which relies on the difficulty of another difficult to reverse math problem (exponentiation in a field), so breaking the prime factorization problem would not affect the security of Bitcoin.  That said, this proposal doesn't actually "break" prime factorization, it fantasizes about creating a computational network that could be harnessed for calculating prime factorizations, which after existing, could be applied to the private keys of whatever organization you wanted to attack.  But this falls down because as far as I know (I am *not* a factorization algorithm expert), you don't have computationally-easy-to-verify "checkpoints" in your search for a prime factorization, which means the time-stamping could only occur once you've succeeded in the factorization.  Okay, that's fine, but it means that somebody in the network has to achieve the factorization of the "challenge numbers" once every 10 minutes or so (to be comparable to the Bitcoin time-stamping model.)  In order to do that, you have to either 1) keep the component primes small enough to achieve, or 2) have enough computing power online to do them that quickly.  Since the network is made of individuals, and the number of individuals is modest (lets say that there are 10000 individuals controlling the compute power in the pool), then anything the whole network can do in 10 minutes would only take 10000 times longer for an individual to do.  If we ever get to a point where an individual has the ability to crack *real* RSA keys in 10000 * 10mins (roughly 69 days), then people who use RSA are going to have long since increased their private key size.  Remember, RSA key sizes are set such that *governments* are unable to mass enough compute power to be able to do the prime factorization over the period of *years*.  If a hobbyist could amass enough compute power to factor a key that matters over the course of 2 months (or even lets say we were off by an order of magnitude, and a hobbyist could do it in 2 years), then a government could easily put something together that could do it in a lot less time.
In short, anybody who has enough compute power to make a meaningful contribution to the network that is able to crack non-toy RSA keys at a rate of one every 10 minutes would be *far* better off cracking the keys privately (over a longer period of time) and then using the compromised keys for his own financial enrichment...
@_date: 2013-09-05 17:17:51
I agree with almost all of your analysis, except for the proof-of-work effort required to succeed with the attack.  Once you have isolated the victim to only connect to your fake node(s), your block chain is not protected by the proof-of-work difficulty for two reasons.  First, as long as the chain is based off the checkpoint in the code, it doesn't matter if the fake chain is as long as the real chain, because the victim's node will never see the real chain to compare it against.
Also, regarding the difficulty of mining 6 blocks, that is a non-issue for the attacker as well, since he is the only miner on his fake chain, and he can arbitrarily spoof the difficulty on that chain to allow him to make those 6 blocks in less than 10 minutes per block (if he so desired.)
The take away is that the attacker's job is precisely as hard as successfully isolating (and keeping isolated) the victim's node.  For new nodes, this is as hard as poisoning the DNS bootstrapping (once he connects, he will rely on the fake nodes to introduce him to new nodes), and for reconnecting nodes, this is as hard as preventing the victim's node from successfully connecting to any real nodes, while spoofing at least one node.
To my thinking, both of these are pretty easy if you control the network that the victim is connected to the greater internet through.  If not, it's pretty hard.
I don't really have the time, but that would be a fun POC to whip up; put together a rogue WiFi router that poisons the bootstrap DNS, and blocks port 8333 connections to anywhere other than the fake node.
@_date: 2013-04-22 17:54:12
I think this is the true genius of that Satoshi brought to the table; sure, re-purposing the proof-of-work from HashCash (originally proposed to fight SPAM) to decentralize ratification of pretty standard e-currency transfer was inspired, but the true genius was the bootstrapping problem of making a non-physical currency become valuable, without eventually destroying the value with that same mechanism.
Since Bitcoin has no secondary use other than as a currency, it doesn't have any "fallback" value.  If people decided that gold was no longer attractive as a currency, it would still have a value derived from its usefulness as a physical building material.  That gave gold a temporary value when people started trading it, before it became valued as a currency.  Fiat money has no intrinsic physical value, but they are backed by a promise of the issuing government to have some worth.  Bitcoin has neither of those.  So in the beginning, they were worth only what people thought they'd eventually be worth, based on how well they solved the problem that Bitcoin solves.  But the pool of people who are willing to buy into a system (in exchange for something with real value) purely on the speculation that it will eventually be worth something is pretty small, and if the only people who are willing to use the currency are a small group of people, it doesn't function very well as a currency, and therefore will never really become valuable.
But, if instead, you initially distribute it (fairly, I'd add) through the "mining" mechanism, which also provides a service to the network at the same time, you aren't asking people to buy in by exchanging for things with real value (people are notorious for ignoring secondary costs, such as electricity costs and opportunity costs, so we, like the original miners, will ignore that).  This opens the pool of initial adopters much wider, and by making the initial pool much bigger, it is much easier to see it having real value as a currency.  This, of course, brings more people into the network, and once the snow-ball is rolling...
So, yes, the 21M total bitcoin number is arbitrary, and yes, it is pre-programmed into the system that miners will be motivated by different things after the "free block money" is played out, but by the time we get there, the initial reason for the block reward will have already succeeded.  At that point, the fees that are collected from mining will be directly linked (if you believe in the free market) to the cost of running the network, which is exactly what we all want.  Solving both problems, and building into the system a gradual transition between the two, is the true genius that Satoshi gave us, in my opinion.
@_date: 2013-02-08 03:17:41
The article is wrong, however (I'm pretty sure.  Say maybe 99% sure.)  In fact, "all" you need is to find a private key that is related to a public key that hashes to the same thing.  You do not have to have the *same* public/private key pair, you just have to have one that hashes (through the double hashing) to the same address.  We can look at the scripts to verify, but rather than going down that rabbit hole, think about what you do when you send bitcoins to someone...  You provide an address, which is the double-hash of their public key, to your client, and it puts a transaction on the block chain that says, essentially, "I give these coins to whoever can prove they know the private key linked to this address."  You don't know the public key, as the author points out.  But to spend the coins, you can use *any* private/public key pair where the public key hashes to that address.  The block chain couldn't know better, because you haven't told it which specific public key you meant, just that it has to hash to the address you provided.
That said, the 160 bit hash space is pretty large, so choosing a private key, calculating the public key for it, double hashing it, and hoping that it is the right one means that you have a 1 in 2^160 (RIPEMD160 is 160 bits long) chance each time you try.  On *average*, you could expect to find a suitable key pair after 2^159 tries.  Think of the fastest number of tries per second that you can.  A trillion (10^12~=2^40) tries per second?  That would take you 2^(159-40)=2^119~=10^36 seconds, which would be roughly 10^28 YEARS.  We think the Earth is about 4.54*10^9 years old, so we certainly won't be here still that far from now.
Think about mining speed.  What you'd be doing here is an ECDSA point multiplication, followed by a SHA256 hash followed by a RIPEMD160 hash (followed by a SHA256 followed by a RIPEMD160, for the checksum calculation), and in mining, you're just doing SHA256 hashing.  But assume that you can do as many ECDSA-&gt;SHA256-&gt;RIPEMD160 tries as the fastest (bullshit vaporware) BFL mining rigs promise, 1.5TH/s.  That is roughly 1.5*10^12 tries per second.  Assume that you could get a field of those $30K machines (and that they were all magically repurposed to do the ECDSA-&gt;SHA256-&gt;RIPEMD160 chain, and do it as fast as just SHA256).  So maybe you speed it up by 1000 (you have 1000 machines).  Now you're down to 10^25 years.  In order to get the time down to just the age of the Earth so far, you'd need more than 10^19 of those $30K machines.  That's a billion fields of a billion machines each, plus.
The *only* hope, as I see it, to steal coins by key collision  is a quantum attack using quantum computers with lots and lots of q-bits available, where right now, we struggle to get more than 3 q-bits.  It ain't happenin' anytime soon...
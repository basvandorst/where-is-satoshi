@_author: joostjager
@_date: 2019-11-03 11:32:30
In the current Lightning implementations, routing nodes cancel back htlcs immediately if their peer is offline. A previously discussed solution for payments (and message-carrying payments) is to let the routing node hold onto the htlc for a period of time before canceling back. They act like a mailbox. If you come online within that period, the htlc can still be delivered.
@_date: 2019-11-03 06:48:25
A plugin sounds like a magic solution, but the question is whether the plugin api exposes the functions that are required. A client making a grpc connection can also be seen as a "plugin". It is just not running in the same process. For Whatsat, a modest extension of the current lnd grpc api would be required. This extension would also enable other use cases. With that, Whatsat could become a stand alone process (or mobile app) that doesn't require a fork.
@_date: 2019-11-03 20:00:50
There is definitely a limit. The total payload for all hops cannot exceed 1300 bytes ([ So if you use long routes for your chat messages, the maximum message length becomes shorter. A workaround is indeed to send multiple messages, either atomic or not atomic. It is a twitter-like restriction in a way.
@_date: 2019-11-02 22:46:26
They don't need to be up to date. Intermediate nodes just forward and have no insight into the final payload or its structure.
@_date: 2019-11-03 19:40:51
Hornet and prepaid htlcs are pretty complex undertakings and require wire protocol changes, but are fortunately not required for Whatsat. I documented what is needed here: [ Part of it is already completed and the rest is within reach.
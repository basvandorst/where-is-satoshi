@_author: madppiper
@_date: 2018-12-06 10:53:15
I may wanna add: if there are specific topics you're interested in, feel free to ask. :)
@_date: 2018-12-13 13:17:54
Yup, gotcha.   
Everybody on production systems starts copying files from one host to the next. That just yells "scalable setup".
@_date: 2018-12-13 10:12:30
Ah, so we meet again: [   
I honestly don't understand why it is me who is personally attacking you, when you were the one calling me an incompetent developer over at that thread and here again - which I pointed out there, too.   
Honestly, I don't understand this habbit of yours. I made an argument, make yours and move on. Shouting down people who disagree with you isn't any way for the technology to progress.   
Also: you owe me a checkout over at scipioerp. 
@_date: 2018-12-07 08:04:43


I wanted to come back to this statement, because I think it deserves addressing in greater detail.   
You have to understand that our systems, just like other business applications, as well as even utility functions &amp; classes in programming &amp; templating languages have been written with regular currencies in mind. For this reason alone there are existing patterns in the code that aren't easy to change.   
For example: Our own system works with various prices on cost calculation, accounting transactions, invoices, on orders, for taxes, various PDFs (invoices, order status, returns etc.), in controlling, in various emails, in sales force management, for statistical data, and many many more. Our system is massive: I had a brief look and there is literally 1800 places - scattered across services, templates, various utility functions. For display values, we also rely on functions that auto-convert the stored value and currencyUomId into an appropriate currency - as we allow users to define product prices in different currencies, there is also an autoconversion happening sometimes.
It is true that if I just store the satoshi value then this would be a non-issue, but we discussed this early on during development and came to the conclusion that users would be confused by having to pay in satoshi and not their Bitcoin value.  We checked with other systems and anywhere we looked, the preferred format would be  0. So there is a decision to be made: either work with satoshi on all areas and write workarounds for all display values to devide by 100000000 whenever a Bitcoin value is displayed to users (for us that would still be 358 places), or simply live and endure the rounding. Neither is pretty, but rounding seemed to be the more logical choice.
@_date: 2018-12-06 10:49:21
That is unfortunate that you feel that way. I hope you understand that my goal was not to argue about the usefulness of Bitcoin in general (or the impact it may or may not have on the financial world), but merely to reflect on the technical aspects that eventually arise when using Bitcoin in business applications (here an ERP/eCommerce framework). 
Others will run into the same issues when trying to accept Bitcoin payments in a real-world eCommerce store, in particular with focus of the legal boundaries and implications on the user experience, so I was hoping that sharing my experience would be of help.
@_date: 2018-12-12 16:49:37


That's an interesting bit of information, thanks! I thought that neutrino was just a light-weight client. So you probably still need the lightning node to get your own payment channels in place. But it is an interesting notion - and we will take a second look at it, thanks
@_date: 2018-12-13 13:19:21
Again, not an answer, but yes, let's leave it like that.
@_date: 2018-12-12 13:16:38
Hi theartlav,   
OP here...  I fear that you may have misunderstood the point I was trying to make: It doesn't matter if you can set up multiple Lightning nodes. If each lightning node is hardwired to a limited amount of business applications, it will not perform well, because it will force you to install a full bitcoin node, a lightning node each time you want to setup a business application. 
Think of it like this: If you are, for example, running an ecommerce application, which processes the checkout, you would want it to share the hardware resources with as little as possible, simply because larger eCommerce applications are expensive (licenses can easily cost a hundred grant and more) and everything that makes it less productive is costly. Likewise: you want the Lightning nodes to be distributed in such a way so that if one fails, the ecommerce systems continue to function.  Atm this is not possible. 
@_date: 2018-12-06 09:27:37
Hey everyone,   
just wanted to leave the article here. I am a developer specialized in the development of business applications. I got to work with Bitcoin &amp; Lightning on a technical level last year and wanted to share my experience.   
Feedback is more than welcome.
@_date: 2018-12-13 16:31:14
You know,  it is interesting. Out there in the real world, the actual developers behind LND all responded kindly to the article:   




or making proper suggestions on how to improve the setup: 


and yet, here on Reddit, there's you. Who hangs himself up on one aspect of the article and instead of taking the feedback and working with it, he insults the author.
Sorry, but, grow up.
  
References:   
[ 
[ 
@_date: 2018-12-13 17:42:02
No, and here's why:   
Take a look at this architecture   
[   
That's how most systems in the size of ours look like. If you must have have a lightning and bitcoin node running for your own purposes (like you do), then ideally you'd want to add two of those next to the application servers, so that you can distribute the load across both, they don't take away resources from your application servers and if one fails, the other would still be able to handle the traffic.   
Problem is: LND is limiting the way you can do this. You have to know and configure the application server IPs prior to starting lnd, but what if you want to add another system? Then there's also the issue of how macaroons are generated. I am unaware that you can use the same macaroon for multiple LND nodes. If that is ok, then yes, you can check in the same macaroon into your config files, otherwise it won't work. Mess any of it up and the servers won't connect.
On top of that, assume you use something like docker containers for the setup. If one application server fails and recovers, you may have a different IP or such for it. The servers simply won't be able to connect.   
\---   
Yes, there is always a way to hack around the tech. Some has been mentioned in this thread, but they are just that - workarounds and they have to be addressed if this is supposed to be a new staple in online transactions.
@_date: 2018-12-12 16:23:07
Yea, truth to be told, we had the impression that many Lightning users see it from your perspective. That works for as long as you don't have to rely on the mechanics for an actual store, but in our field we unfortunately have to cook up solutions for our clients.  
  
Glad that the example was helpful :)
@_date: 2018-12-06 13:07:07
Partially agree. You are spot on about wanting to see real-life implementations. Despite my criticism, I'd also like to see this being put in place. Like mentioned, our implementation does deliver this from a technical point of view, but my feeling is more along the lines that the negatives I listed will prevent it from happening on a larger scale (or even fully for a business). The limitation is not only of practical nature, but also the legal framework which you have to endure. 
Anyway, the bit where I obviously divert from you is that I am more interested in hearing strongly voiced arguments. I have read a lot of white-washing and I don't think there is a need for it. If there is a problem, it has to be shown so that it can be addressed. The same goes for discussing the benefits of it (which I also can think of some). 
Progress is not about agreeing on all matters, but addressing issues and finding solutions.
@_date: 2018-12-13 13:16:01
No, you are absolutely right. I am the one who should do that. Never mind the feedback, it is enough that Lightning only works for demo implementation.
But I think we can cut the discussion short: You disagree with the points somebody who works full-time on large client installations makes. Understood. Let's move on.
@_date: 2018-12-13 10:09:37
The article covers various aspects of why Lightning is currently unattractive for business applications. The TLS / Macaroon bit i adressed above in specific again. What makes you think that the other bits don't matter to developers/merchants like us?
@_date: 2018-12-13 10:24:58
That's unfortunate, but alright.
@_date: 2018-12-13 16:21:46
Doesn't matter one bit what the file contains. If it differs per lnd node, the content has to be transferred. Likewise, the application has to understand which macaroon to use for which system. Same goes for certificates and other things.
It isn't about file size, it is about how much you can reuse the same info per system - ideally you'd want each to be rather stateless and just rely on simple config per application server, if you can't do that, all your talk is useless.
@_date: 2018-12-07 09:33:41
Uhm, don't be so quick to play the blame game just yet  - it is a common issue, actually. Just consider this:
Most people will rely on functions to format display values like the following:
* Freemarker = ?string.currency
* Java =  NumberFormat currencyFormatter = NumberFormat.getCurrencyInstance(locale);
* PHP =  money\_format(format, number)
* Javascript =  Intl.NumberFormat(locale, {options}).format(value);
* etc.
Literally all the business systems you will find will rely on utility functions like the above and probably added their own to display currency values as we did so that they can also auto-convert them or simply wrap them in html. The utility classes themselves most often use ISO-Codes for determining how something is supposed to be displayed and then render out according to a long set of formats. Nobody rewrites this on his own, because it is a matter of efficiency and the utility functions provided by others already handle the correct formatting in locale &amp; currency.
Now going back to what i mentioned earlier about ISO-Codes. Guess what Bitcoin lacks, so that the utility classes work? 
So if you are a developer like me, who needs to work with business software, you will have to find workarounds just because Bitcoin is different. But even when you do, you will write a workaround just for Bitcoin - what about the other cryptocurrencies? Who is to say that the 18 decimal ether isn't the way to go forward? Another rewrite?
@_date: 2018-12-12 13:20:36
Hi 
and thanks for the feedback. Just a quick note though: is it really that much of a stretch? I understand that you are a fan of the technology - and hey, in a way so are we - but keep in mind that unlike you, not all our reads may have an understanding of how it works. If you want it to work for everyone, you have to be a bit more precise here...
I should also mention: over the course of our work, which lasted for several months, we installed both c-lightning and LND several times. Not a single time was it easy enough for us to do within a day or two - even after we'd written down the steps.
My intention is not to shit on the software, the guys are fixing something I believe is not right in the Bitcoin world, but to give some insights into what's missing for wider acceptance.
@_date: 2018-12-06 19:50:40
I'm sorry, but I am not alone at my reasoning on any of this - the debate is ongoing and matters:
* [
* [
In fact, it is the very reason why second-layer technologies exist and it is a good thing.
Just because you don't like my reasoning or my article very much doesn't grant you the right for a round of name-calling. I hear you out and am willing to engage with you on the points you raise. So what's the issue?
@_date: 2018-12-06 11:07:16
lol, yeah. 
Well, there are showcases for sure (again, we'll add our own next week):   
   
So it isn't like it doesn't exist. But truth is, I don't think anyone uses Bitcoin all the way through - particularly for the reasons listed. Besides a means of payment it does cause issues in accounting &amp; invoicing. We solved the latter by still relying on USD internally and converting into Bitcoin values for display and historically storing Bitcoin conversion rates internally. But essentially you are dealing with a foreign and fluctuating currency.
@_date: 2018-12-06 13:22:36










Lightning succeeds at solving two of the issues I addressed: transaction performance and because of it transaction fees. I cannot say much about the other second-layer implementations, as I haven't had the pleasure of integrating them yet. Scaling a blockchain is a different thing from transaction performance. Scaling has to do with how data is stored and what physically happens when you write to a chain. At the moment Bitcoin is 250GB in size, tendency growing. The more cumulative write-actions happen, the slower it gets. A lot of it has to do with how systems like a blockchain handle concurrency. As concurrent write actions demand a lock, write and release, it slows down the process. 
Lightning solves it by having its own network to confirm transactions and write to the blockchain at a later stage and by packing more info in a block at a time. That's a good solution for the operation, but not the chain itself and will still cause trouble down the road.
 






 Yes, I think that's the weakest point of the article and I will probably rewrite that bit today. But think of it like this:   
when you deal in fractions for mathematical operations, you always deal with increasingly small numbers. That's all fine, unless you need to store or display a specific value to a party. At that point rounding is needed.   
So if you work with regular currencies and you apply a percent tax rate, you will also round the result, just to get decent numbers. With regular currencies it is easier to do, because they all use 2 decimals as display value (for which reason you can get by storing 3 decimals and you'll always be able to create proper display values). Bitcoin does not have this "feature". Every satoshi matters and it does increasingly so when the value of a satoshi increases. So if you want to store a product price, tax or subtotals, you will have to make a decision on where you round the numbers and this opens the door for new calculation issues. You may not notice it if you are only dealing with Bitcoin and don't care for governmental tax reports or invoices, but it remains an issue for systems like this. 


It is true that for the transactions you only have to deal with steps 6-9. But mind you, if the goal is to have broad acceptance of Bitcoin as a payment standard, it has to be easy. Consider an average joe with no large Bitcoin some on his wallet. He worked all month and wants to pay for something. Unless he has some amount in his wallet, he will have to recharge the wallet first, before being able to purchase.   
I should mention, to me it isn't so much a debate about whether you "can" pay in bitcoin, which you can and our tests also showcases. It is a matter of where are issues preventing Bitcoin from being accepted in business applications more often. This is one of them
@_date: 2018-12-06 10:45:59
Thank you very much for the feedback.   
And admittedly, it does sound harsh at times to get the point across. This post is one of two, that I am posting on this topic based on the implementation of Lightning into our commerce platform. So the article reflects my own learning from having to deal with Bitcoin and Lightning into a business application. The next will cover the Lightning specific issues that exists in this context at the moment and how many of the issues with Bitcoin can be addressed by Lightning.  
We found workarounds for some of the problems,btw, (you can just rely on the XBT for currency code and keep fingers crossed that ISO accepts it as a standard; you can also deal with the volatility by updating the conversion rates frequently; and the delay in payment process can be fixed by having a proper order lifecycle in place), but others, like having to create proper invoices in the countries main currency will require you to do the back conversions won't be easy to fix.
@_date: 2018-12-06 11:15:39


It is different for its architecture. And it is not primarily an issue of whether or not you "can accept bitcoin payments", but rather an issue of whether or not you can work with Bitcoin internally or if it works well from either a user experience or system point of view. In terms of financial transactions - speed and scalability matter and so do rounding and keeping values constant in the books. Transaction speed may be partially solved by second-layers (like with Lightning), but that doesn't solve the scaling of the blockchain or the problem you run into when having to work with financial rounding.   
 


That surprises me. But let me draw attention to a separate UX problem that you may not consider:   
For customers Bitcoin is not easy to work with. These are the steps I had to go through when paying with Bitcoin: 
1. Buy Bitcoin through Bitcoin exchange
2. Create &amp; Fund Bitcoin wallet
3. Get Wallet-App or client
4. Open a new channel
5. Fund your channel
6. Go through checkout, receive Payment-Request. 
7. Accept payment and pay.
8. Wait for payment to be accepted by network
9. Wait for payment to be processed by business application  
You may disagree, as you already have your wallet setup, but it is really tough for newcomers to understand. 
@_date: 2018-12-12 13:10:36
Thanks for the feedback everyone.   
Perhaps a bit news-worthy - one of the original developers just left us a positive respone: [ 
@_date: 2018-12-13 10:05:30
Like explained above: we always saw neutrino as a client, not as a node-like structure. If it works like a client, it won't be an option, because you can't use a GO application from inside a Java application. If it works like a server and allows us to connect from the application server to a local neutrino client via grpc, it could simplify the setup a bit, in that the neutrino client would then connect to the lightning nodes and our application server could just rely on local resources for the connection.   
I checked the documentation and haven't seen anything that would point me to the above, but it is worth checking out, thanks.
@_date: 2018-12-06 14:05:34
Updated the article - thank you all for the feedback so far!
@_date: 2018-12-12 13:47:04
 We just published a follow-up with a more Lightning specific focus.   
[ 
@_date: 2018-12-13 10:08:13
I think we had a discussion before over at this thread: 
  
I patiently addressed your concerns there - no need for name-calling again, yea?
@_date: 2018-12-13 17:30:53
Listen, I'm fine with discussing the tech or the reasoning behind the article. I am taking my time out of my day to do just that. I'm all ears if you have proper suggestions concerning the article and, like I pointed out on behalf of neutrino, I am grateful for different ideas that may move this forward. I will check out neutrino, but i am simply not convinced on the other bits you mentioned.
@_date: 2018-12-13 10:02:43
Thanks for the feedback, to give you a bit more background on how it all connects:  
Our software uses grpc ([ to connect to Lightning. It essentially works as a client connecting to the lightning node (we use lightning-j for all that).  Unfortunately, things like the macaroon is created on the lightning node side ( \~/.lnd/data/chain/bitcoin/\*/admin.macaroon), not the client side:   


[ 
  
So if you want to use it in context of our application, you will have to copy the macaroon file over to the application server. You can also check [ for infos on what lightning-j requires for synchronous or asynchrous connections. Lightning-J largely wraps the grpc protocol, however, so I am assuming it is required regardless of how Lightning-J treats it.
  
On the topic of TLS/SSL: both will be required by lightningj regardless of whether or not you disable it.  And even on the LND side, I haven't seen the option to disable SSL. There is an option for -no-macaroons, but then grpc won't work (this has been disabled at later lnd releases it seems). But if you can point me to the disabling ssl config option, I'm sure we can give it another try and update the article accordingly. 
Unfortunately, neither one of the above fixes the issue described. It would help if no macaroons were required, but either way, you will still be limited in the way multiple applications will connect to multiple LND nodes.
@_date: 2018-12-06 13:52:56


It isn't my definition of "scaling" it is the standard definition. The more people that use a system, ie. when the system scales, the more apparent some effects become.   
Son in case of Bitcoin: the more transactions happen at the same time and the more data that has to be stored in a chain, the more apparent issues come. You can already see this happening in real life. When Bitcoin transactions spiked to \~55000 seconds last year, it was the exact outcome of a large demand for write actions and the system not being able to handle it. But it is a design issue of blockchain and you just have to live with the result.   
There are ways to postpone the effects, the ones you mentioned are all good examples of that, but it doesn't work in the long run. Writing in blocks means - you write more data in a single write operation. So less write operations, but if it scales/grows, then the effect is nullified.   
Anyway, about the things you mentioned: I am not expecting merchants to run their own Bitcoin node and yes, pruning should be better. The reason I may have mentioned it is because   
a) the effect still occurs, regardless of it happening on your own system or not
b) our implementation uses Lightning, which required a full bitcoin node to operate. 


You seem hostile on this issue, but to keep it short: I am not making the rules. You work in financial mathematics, you round.  Same goes for taxes: You pay your taxes in the lead currency by a government and despite bitcoin sometimes being accepted as ways of payment, all legal documents will be in that currency. That's just the legal framework.  If you want to work with Bitcoin, cool, but you will eventually have to convert into the main legal tender.
@_date: 2018-12-07 09:52:03
I like what you are writing and can agree to a lot of it. My personal take on why larger companies are slow to adopting bitcoin is simply this: it is an investment development wise because it doesn't follow learned financial standards,  it is risky (in more than one dimension) and not particularly user friendly - at least not for the merchants (some of the reasons you listed) or for users who are unfamiliar with Bitcoin as a whole and don't own a wallet either. Let's not forget: Paypal, the last big "new" payment method is only just beginning to be widely accepted [ and they have the benefit of also accepting other more conventional payment methods.
@_date: 2018-12-12 15:22:48
That's not how the implementations currently work.   
Basically with either LND or c-lightning you have to configure which IPs are allowed to access the Lightning nodes. LND in particular has some problems - they have a mechanism called "Macaroons", which works like browser cookies. They are generated by the Lightning instance and they must be copied over and used by the application server (ie your ecommerce store) if it wants to connect to Lightning and create invoices.   
Like the article points out, there is also the certificate / key issue. Lightning uses grpc for external connections, which are encrypted by TLS. Each lightning node will create its own cert and key and these too must be copied over to the application servers.   
Simply put: the commerce application won't know how to connect to more than one lightning node. Atm, the  setup is simply not meant for this kind of use.
@_date: 2018-12-06 20:54:31
See, that's the bit I never quite understand. I came here to share my experience and a different perspective on various topics that may or may not effect how businesses accept Bitcoin as a standard currency. I put a lot of thought into it, took the time to write it all down in a readable manner and back it up with external links. But somehow the internet can turn this into a thing that "frustrates" another person. Trust me when I say this: I really do appreciate the conversation we are having and I think it is helpful that we have it. So no need to feel frustrated.
So how about this: Perhaps you can appreciate my input more when you get to see that I am not another flameboy trying to write negatively about Bitcoin. So I invite you to take a look at our implementation - before anyone else.   
I just deployed the lighnting component on our demo server and added a test-product at â‚¬0.07 that can be checked out: [ You can go through the entire priocess and select "Lightning Payment" as a payment option - just make sure you use the regular checkout, not the one-page one. If you register with an email address, you will receive the payment confirmation after you paid, otherwise you can also hop onto the backoffice ([ and check out the process from there. You can find login-credentials here: [ 
And apart from that, I promise to address some of your concerns next week when I properly address Lightning, which resolves some of the issues I mention here. Cool?
@_author: ziepheiw
@_date: 2014-06-15 17:12:54
It's from numerical simulations. I think the standard deviation should increase as *sqrt(n)* with sum of n samples. ~~(And not as *n* like in your calculations)~~
    &gt;&gt;&gt; numpy.std(numpy.linspace(0,1,10000))
    0.28870400355179215
    &gt;&gt;&gt; numpy.std([numpy.sum(numpy.random.random(100)) for x in range(10000)])
    2.8744090282652022
    &gt;&gt;&gt; numpy.std([numpy.sum(numpy.random.random(10000)) for x in range(10000)])
    28.65645931189508
@_date: 2014-06-15 15:30:05
Variance is a measure of luck, which can go both ways.
It is distinct from the mean / expected / average outcome, which stays the same regardless of the pool size
(Actually, gigantic pools *do* have a *slight* (I don't know the exact numbers, I'd put it at &lt;0.25%) advantage due to network latency, but it is something else completely)
@_date: 2014-06-15 16:15:39
**plus** / **minus** 5 percent
It's variance, it can go both ways.
@_date: 2014-06-13 22:26:38
I meant that if sigma is 1.7% for a 20% pool, 99.7% of such pools (in alternate universes, maybe ;)) will earn the mean (average) number of bitcoins (which is equal for all pool sizes) +/- 3*1.7% = +/- 5.1% ([68-95-97.3 rule](
I have made another post here 
@_date: 2014-06-15 16:38:05


~~Maybe you are using a different unit for standard deviation, but I get:~~
    &gt;&gt;&gt; numpy.std(19 * [0] + [1])
    0.21794494717703367
~~Maybe you forgot to normalize?:~~
    4.3589/0.21794494717703367
    20.000004
~~By my numerical simulations (100k repeats, 1 btc block reward, 5% pool, 2016 blocks at constant difficulty):~~
~~Average profit of 5% pool for 1 difficulty window = 100.81495~~
~~Standard deviation = ~~0.0969~~ 9.79~~
~~**Edit**: So if that's the case, and if the rest of the math checks out, we can use 2.789% / 20 = 0.14%~~
@_date: 2014-06-13 20:09:35
I'm nitpicking over the exact terms like "statistically", because OP has possibly the wrong intuition.
I understood that he's interested in average earnings (because higher variance comes with a chance of higher earnings too). I admit that for some, high variance might not be acceptable. I just wanted to straighten out this particular issue
@_date: 2014-06-15 17:17:40
It's the same thing
@_date: 2014-06-16 12:07:11






Under constant difficulty it doesn't disappear either. In that scenario variance (or rather, variance relative to mean) tends to 0 as 1/sqrt(number of blocks).






Right back at you ;)


Numbers don't lie. The difference in realistic time frames (36 months) is rather small. 1.7% vs 0.97% standard deviation for medium and gigantic pools.


As I wrote before, I understand what you mean. But this simple intuition is overly pessimistic.
 






Under constant difficulty it also mitigated by time only "to some extent".


**NO. You are not guaranteed that!** You merely get lower variance. This variance tends to 0 in infinity as 1/sqrt(n), which still means that earlier periods are more important!
In the plots and calculations I linked you to many times, I calculated the variance under scenarios of constant and increasing difficulty after 4 and 36 months. The decrease in variance in the third year is *negligible in both scenarios*. I hope you are not talking about *actual inifinity* as the "long enough time period" ;) 
Nitpick: You are confusing "variance" with "mean" here. What you probably wanted to write was *"Under constant difficulty, given long enough period, you will always make up for negative mean return caused by variance in prior periods."*










For martingale system with infinite bankroll, what you end up with is is ZERO mean return. Add the possibility of GOING BANKRUPT, and **only then** you get **NEGATIVE EXPECTED RETURN**. The higher the ratio of variance to your bankroll, the lower the expected return. *(Note that for any game with constant variance (like a coin toss) and infinite bankroll, variance/infinity = 0, which means zero expected loss).*
ONLY if you need to use btc earnings as you go to pay for electricity (and if you don't, you get cut off and you're out of the game), you end up with negative expected return *due to variance*. If you are mining on such a tight margin that a difference in standard deviation of 0.92% makes a difference to your ability to put bread on the table, I don't think mining is a good business decision (since there are other factors with much higher volatily, if only bitcoin price).
@_date: 2014-06-15 15:58:39


OK. Not for me to decide. I just want to get the math and facts straight.


No. It still works both ways, only with higher variance.
@_date: 2014-06-13 20:41:53


I've ran some simulations, and it turns out that indeed increasing difficulty causes higher variance for both bigger and smaller pools. This effect isn't big, in my simulations:
standard deviation for 50% pool, 0% increase every window, 4 months = 0.79%
std dev for 50% pool, 15% increase, 4 months = 1.11% (+0.32%)
std dev for 20% pool, 0% increase, 4 months = 1.58%
std dev for 20% pool, 15% increase, 4 months = 2.03% (+0.45%)
So it seems to me, if you're willing to accept smaller pool under constant difficulty, you should also be willing to accept smaller pool under increasing difficulty
@_date: 2014-06-13 22:09:09
No, I haven't included orphaning blocks or network latency in the simulation.
My understanding is that the rate of orphaned blocks should be pretty small in practice, and a high rate of orphaned blocks would be a sign of hostile behavior (eg. "selfish mining")
@_date: 2014-06-15 14:45:12
My simulations taking into account the difficulty jumps: 
Under exponential difficulty increase, the variance is indeed higher, but not that much higher. Big and small pools are affected roughly in the same way, with smaller pools being affected *slightly less* by the difficulty increase!
(Note that I measure standard deviation, variance = stdev^2 , hence different numbers than in the article)
@_date: 2014-06-13 23:18:43
Of course lower variance is desirable, all things equal. What I wanted to point out, is that a smaller (but still big), 20% pool doesn't have variance much bigger than a 50% pool, and that exponentially increasing difficulty doesn't change this.
Please see  for discussion (TL;DR after 4 months the standard deviation **of total bitcoins mined** is 1.11% for the 50% pool, and 2.03% for the 20% pool)
@_date: 2014-06-13 21:33:37
For the constant difficulty you are right, variance goes to zero as 1/sqrt(number of blocks), faster for the bigger pool.
The point is, the increase in variance in a smaller pool is relatively small (see my other/sibling reply)
@_date: 2014-06-13 19:34:58
No, even if difficulty is increasing, the average earnings are the same.
In the simulations/graphs I pasted, I assume 15% increase for 10 consecutive difficulty windows. Please take a look at them.
@_date: 2014-06-15 14:48:11
Please see my answer to another comment in this thread: 
and maybe my post  where I run the simulations taking difficulty jumps into account.
@_date: 2014-06-15 15:09:17
You can't really guarantee a maximum difference. If you have enough bad luck, even a 50% pool won't mine a single block in a month ;)
Variance is a statistical term. To get a feel how it affects the spread of possible outcomes, you can use [68-95-99.7 rule]( where standard deviation is sqrt(variance).
So for example, given 0.03 variance (sqrt(0.3) = 0.173 standard deviation), you can say that 95% (2 sigma case) of the time you will earn between (1-2x0.173 = 0.654) and (1-2x0.173 = 1.346) the expected avarage outcome.
Realistically, for a 50% pool under 15% difficulty increase you get stdev of 1.11% and for a 5% pool stdev of 4.29%, over 4 months.
@_date: 2014-06-15 14:53:08
The difference of 1% in *variance* shouldn't realistically be an issue. Whether you get +/- 5% by luck in a small pool or +/- 1% in a larger pool shouldn't make a difference if you aren't running on a tight margin (which could then bankrupt you). Variance/luck works both ways.
@_date: 2014-06-15 17:08:41
~~I think the difference comes from here:~~


~~I am calculating the mean and standard deviation of the **sum** of rewards at the end of the difficulty window. Could this be it?~~
@_date: 2014-06-13 20:05:37
What you've said, basically, is that increasing difficulty causes higher variance.
@_date: 2014-06-13 22:46:33
I know this is not perfect, but I don't know how to model this exactly. Do you perhaps know where I can find more information (and particularly, numerical data) on this?
By my naive, first order calculations, an 8 second network-wide lag would cause 8/600 = 1.33% orphaned block rate. In turn, assuming all pools are honest and not withholding blocks, this would make the 50% pool mine ~0.4% faster than the 20% pool (0.0133 * (0.5-0.2) = 0.00399).
Anyway, what I mainly wanted to do, was to correct the belief that increasing difficulty somehow shifts the advantage even more towards larger pools.
@_date: 2014-06-13 21:55:52
Yes, it's the variance of the total amount of bitcoins mined over 36 months.
For 99.7% miners the total amount mined will be within +/- 3*standard deviation ("3 sigma"), I think it is pretty safe to say nobody will be significantly affected by choosing a smaller pool.
@_date: 2014-06-14 02:42:33
But that's the whole point, all of these factors are already included in the simulation. If you take a look at the charts, you will see that the *average*, cumulative amount of mined bitcoins is the same at any point in time, regardless of the pool size.
What changes is the variance, which is a way to say how lucky or unlucky you may be after the end of 4 months. The variance ("randomness") is higher for a smaller pool. It is also higher under exponentially increasing difficulty, *regardless of the pool size*.
The smaller the pool, and the higher the difficulty increase, the more randomness will be added to the process. But the expected, average revenue is the same.
@_date: 2014-06-13 23:30:36
@_date: 2014-06-15 15:35:56


That helped, I didn't consider this in my simulations.
So basically you're calculating the variance for a given difficulty window and making it your "bet"?
If so, unless you can buy *tiny* amounts of hashing power as you go, I don't think it reallstically affects anything
@_date: 2014-06-13 21:24:03
Over expected expected lifetime of mining equipment (36 months = 23455x difficulty increase):
stdev for 50% pool, 15% increase, after 36 months = +/- 0.97%
stdev for 20% pool, 15% increase, after 36 months = +/- 1.7%
stdev for 50% pool, 15% increase, after 24 months = +/- 0.99%
stdev for 20% pool, 15% increase, after 24 months = +/- 1.74%
@_date: 2014-06-15 16:27:01
I agree with all your points in your comment.
I *only* want to dispell the myth that exponentially increasing difficulty somehow shifts the advantage even more towards larger pools. This is just not the case.
Actually, increaing difficulty hurts the bigger pools *very slightly* more than the smaller pools.
@_date: 2014-06-15 15:42:48
Well, I'm not a miner ( BFL screwed me :'( ), but if +/- 5% over a few months made a significant difference to my ROI, I'd stay away
@_date: 2014-06-15 15:13:40
But on the other hand, if you are lucky in the beginning, the bad luck won't catch up! It *exactly* averages out for the expected outcome, and *mostly* averages out for variance.
Please see my other reply to your comment.
@_date: 2014-06-15 15:22:16
Where does this math come from?
By my calculations, increasing difficulty only increases the variance, it doesn't affect the mean!
@_date: 2014-06-15 17:22:12
Derp. You use sqrt(n).
@_date: 2014-06-13 19:24:57
This is not true, on average earnings are *exactly* the same. See the following earning simulations I just made:
Varriance for a smaller pool is bigger: 
but *average* earnings are the same: 
Code: 
@_date: 2014-06-15 15:55:49


Well, it was *much* lower than 1% in that case, and under some unrealistic assumptions (ie. you are instantly buying tiny amounts of hashing power with every satoshi you make, and you are less lucky than 99% miners)


Not unless you leverage and you go bankrupt.
Or in case of mining, buy an ASIC on credit or you're depending on mining earnings to pay rent.
@_date: 2014-06-14 00:15:39
That's right. What really happens is that variance for the smaller pools gets really high. For example, standard deviation after 4 months, 15% difficulty increases:
    10% pool - 2.99%
    5% pool - 4.29%
    1% pool - 9.77%
    0.1% pool - 31.04%
    0.01% pool - 98.16%
What the above means, is that roughly 16% (1 sigma = 98.16%, close to 100%) of the 0.01% pools won't mine a single block during a 4 month period, and that roughly 0.15% of the 0.1% pools (3 sigma = 93.12%, close to 100%) also won't mine a single block
The upside is that the other 16% of the 0.01% pools will earn twice their (probably rather small) expected reward :)
(How standard deviations work: [68–95–99.7 rule on Wikipedia](
@_date: 2014-06-15 17:29:25
That's what I do.. so why the different results? :)
@_date: 2014-06-15 17:00:59
~~Well, I get something else, plugging in my numbers:~~
~~Average profit of 5% pool for 1 difficulty window = 100.8~~
~~Standard deviation = 0.0969~~
~~Expected long-term profit using geometric series (18% difficulty increase): 100.8/(1-(1/1.18)) = 660.8~~
~~Lifetime standard deviation using geometric series, combining standard deviations using the square root of the sum of squares: 0.0969 x (1/(1 - (1/1.18)^2 ))^.5 = 1.8253~~
~~Ratio of standard deviation to profit: 1.8253/660.8 = 0.276%~~
@_date: 2014-06-15 23:54:09


Yes, and that's the reason why *variance* increases.


Mean outcome means exactly the same what it means under constant difficulty. It's what the miner can reasonably expect, +/- variance.
Under constant difficulty you can't guarantee the miner will catch up on previous losses either. So what you are left with is just variance, or some other number to measure risk.


It *is* mitigated by time (to some extent) in *exactly* the same way it would be mitigated under constant difficulty. The measured/calculated variance is *exactly the same thing* under both assumptions, it's just that under rising difficulty the variance is *slightly* larger.
@_date: 2014-06-13 19:57:19
That's what "statistically" means -- averaging over multiple histories. OP claimed that mining in a big pool is *statistically* more profitable, which isn't true.
What could be possible (and intuitively makes sense, but I didn't check it), is that variance in the presence of increasing difficulty is bigger.
@_date: 2014-06-15 23:26:16


But there's no house edge, to use your satoshi dice metaphor. If that game had a positive mean return, it might be worth participating in, depending on your risk profile.
More importantly, participating in a 5% pool instead of 50% is nowhere nearly that level of risk. It's like 3% vs 1% variance (I'd say this kind of difference is undetectable by a miner just staring at numbers without rigorous statistical analysis), which means losing out **0.05% by not being able to consistenly reinvest** [as calculated by asdffsdf in his comment to this post](


You probably meant "mean return **alone** is worthless"... because the mean together with the variance gives you a very good description of what you can expect of your investment.


That's an intuition. I understand where it's coming from, but it gives overly pessimistic results. That's the only thing I'm looking to correct. Did you take a look at my plots at  ?


Of course the more difficulty rises in each window, the more variance (on total returns) it introduces. But it turns out that it affects the variance only slightly (less than 2x), for example:
    std dev for 50% pool, no increase, total btc after 4 months = +/- 0.79%
    std dev for 50% pool, 15% increase, total btc after 4 months = +/- 1.11%
    std dev for 20% pool, no increase, total btc after 4 months = +/- 1.57%
    std dev for 20% pool, 15% increase, total btc after 4 months = +/- 2.03%




It *is* relevant, because **this potential loss is the variance**. **The variance is not the mean**, even though in a financial market you can put a price on variance/risk.


They don't, and for good reasons, and it's not for me to decide for them. I only want to dispell the myth that under exponential increase in difficulty, the advatage magically shifts towards larger pools even more.
Once they know the actual numbers are not that bad, maybe they will decide it's worth it to take *slightly* higher variance (and the same expected return) to make bitcoin network healthier. It's their decision, but I'd prefer they know the numbers and *what the numbers actually mean*.




By reinvesting. I think we agree on this.
@_date: 2014-06-15 17:51:43
That's right.
@_date: 2014-06-13 21:00:24
I understand that low variance has value. I only wanted to correct the wrong intuition, that mining for a larger pool under increasing difficulty is somehow more profitable on average.
Anyway, the difference in variance betwen pools of different size seems rather small:
std dev for 50% pool, 15% increase, after 4 months = +/- 1.11%
std dev for 20% pool, 15% increase, after 4 months = +/- 2.03%
std dev for 50% pool, 15% increase, after 36 months = +/- 0.97%
std dev for 20% pool, 15% increase, after 36 months = +/- 1.7%
@_date: 2014-06-15 16:14:53






Sorry, it is. This calculation is under the assumption you are reinvesting the returns.


I considered only this point in my simulations, so I am not claiming anything with certainity regarding your other points.
However, I am *certain* **the mean return on one time investment in mining gear is the same** for big and small pools, even **under exponential difficulty increase**. Only the variance gets slightly bigger in that case.
Please see my post  for some nice charts.
@_date: 2014-06-13 20:46:06
 (I linked to it in the original post)
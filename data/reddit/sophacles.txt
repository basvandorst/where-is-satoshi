@_author: sophacles
@_date: 2014-01-28 14:43:03
Two things here. First its not a lottery, it's a race with some luck thrown in. Verifying the transactions takes effectively no time - its just adding and subtracting some numbers. The hashing step is the "race" or "lottery".  So you do a mathematical function that takes the result of the transactions you are verifying, plus a random number, and run it through a math function trying find a result that is lower than a certain number. 
It is like this hash = do_something(transactions, random_number).
If the hash &lt; some threshold, you "win".
Since you can't change the transactions, (because of the crypto mentioned above), you can only change the random number.
Further since everyone agreed on how do_something works, you cant just invent a hash by doing a simple operation like:
(transactions + random number) - (threshold + 1) to get the "winning number"
because when other people check, they will get the wrong answer.
The function used to get the hash has some special properties - it basically blends up the inputs in a way known to produce a psuedo-random result. That is, unlike addition where simple algebra gives use easy solutions, there is no way to go from an answer to a number. We have to do it the hard way. (read up on SHA256 for a deeper understanding). So we just try random numbers until we get a suitable answer (or more accurately, we start at 0, and add 1 on every try until we get a valid result).
Like I said the first person to get a result "wins" - but this is only sort of true. Someone gets a result, and tells everyone else what he did. They check the work (another property of do_something is that any single iteration is pretty fast, its just that trying billions of combinations for the random number takes some time). If the result is good, everyone starts using the new transactions as the starting point for their mining. 
So if it's a race, what happens in a tie?
Well both "winners" send out their results, and some people accept one winner, and some people accept another winner. Eventually, someone else will win a race built on the results of one set of transactons. Then someone else will, and one of the sets of winners will have had more winners (or a faster time if you want to think of it that way) and everyone just ignores the set of transactions represented way back in the tie. This only takes a few minutes to resolve usually. The transactions from the previous ties may be represented already in subsequent blocks in the winning line, or they can be added to the newest block when one side gives up. Either way is fine.
So where does new bitcoin come from is the question you really want to know - but we had to go over that stuff first....
While the maximum number of bitcoins has not been found, the new coins come from the transaction ledger. Remember my formula from before:
do_something(transactions, random_number)
Well transactions really something like this:
(bob, sally, 5btc), (alice, sue, 3btc), (greg, gary, .003btc), [sophacles, 4btc]
So there's bob sending sally 5btc, etc, and the wierd one at the end, with the []. That's my mining block. It's just a special transaction saying I get 4 bitcoin because I did the work. That's really it. It works because no one will accept my winning claims if I give my self more or less than the amount designated for winning. Similarly when the mining period ends, no transactions with a mining block will be accepted.
It's an easy notion to want to reject. *They just appear* is kind of bullshit sounding. But... where do dollars really come from? Some printing press somewhere. That's it. They are just made too. 
Now we're on to "how do they have value".... and well honestly that's deep economic theory. How does any token of exchange have value? Largely it comes down to "people believe it has value and will accept it". Seriously, wander to your nearest university, find an econ person, and ask "what the hell is money anyway". Keep asking why and simple questions. It really does just come down to that.
HTH.
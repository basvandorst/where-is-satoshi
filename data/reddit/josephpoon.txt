@_author: josephpoon
@_date: 2016-08-29 20:59:48
Ideally, they will all be compatible. For example, I do agree with Mats' statements as the ideal to shoot for (it gives the best UI) and that's why the paper also uses two-stage redemptions. I think right now the intent is to make it working as simply as possible for the implementations using single-stage redemption, but two-stage structures will likely exist. It's even possible people will just try to optimistically send each other dust and have the enforceability be done via link-layer multi-round games.
I'm in the process of organizing (along with many others in the LN community) a get-together to get everything interoperable during Scaling Bitcoin Milan!
The goal is to make it an interoperable hug-fest, not a battleground :D
@_date: 2016-04-19 19:05:50
It's possible to bridge two networks transparently, but ideally everything is interoperable!!!
@_date: 2016-04-19 19:55:48
LN assumes both parties are online to be able to generate these receipts.
While it is possible to optimistically send money to someone without them being online, the receiver hasn't signed off on the conditional payment, so it's not possible to guarantee receipt and prove payment.
If you want to send money to someone which is offline, either tell them to go online, or send funds to someone else to hold funds on their behalf. Every single merchant website already faces this problem today, so I don't think this is too onerous, but there may be some edge cases which requires an explicit marketplace.
It's also possible in the future to make it fully asynchronous, in the sense that the payer and payee don't have to be online at the same time, but I don't want to write code for that right now, that's like a later version update. The flow looks like:
1. Receiver created a receipt for sender
2. Sender creates  a payment, but the last hop doesn't finish because the receiver isn't online
3. Receiver comes online, sees a pending payment with a hash preimage she knows. She redeems the funds.
4. When the sender comes online, he sees the funds pulled with the proof. The sender is now able to prove payment since he has the receipt and the proof.
I'm not sure how useful this would be early on.
@_date: 2016-04-05 23:22:19
I agree, but my concern with fungibility relates to the uncertainty of underwriting of debt decisions themselves. This is a little bit more tricky to deal with, even just from a UX/social-relations perspective.
@_date: 2016-04-07 00:38:44
"Tying up funds" is a bit of a conceptual misnomer, the funds are available to spend at any time. You can use your channel to pay someone else via multiple hops, so the funds are available to spend.
The feeling about tolerance of running the channels can be mutual. If you use the channels and they use the channels to an equal extent, then the cost nets out to zero. That isn't guaranteed to happen for all users and use cases, but it can certainly happen to a sizable portion of the users.
@_date: 2016-04-05 21:29:02
LIGHTNING NETWORK IS GOING TO MAKE BITCOIN GREAT AGAIN.
@_date: 2016-04-05 22:10:24


Ripple was **very** interesting, but it had to deal with the fact that debt isn't fungible.
@_date: 2016-04-05 22:05:01
More like, Ripple sounds like correspondent banking. Correspondent banking and ripple shuffles around debt (which implies reputation and trust).
The material difference here is there isn't trusted custodians.
@_date: 2016-04-19 19:03:41
Both parties agree that once the sender knows the hash preimage for conditional receipt, then the transaction has been fulfilled. This agreement can be cryptographically signed. The payment can only be pulled upon disclosure of this preimage.
In other words, when you make the payment, the other party MUST disclose some information as part of redeeming the funds (otherwise they'll be unable to get their money), which you can use to prove you sent the money. This proof is large, random data which isn't disclosed globally. It is your responsibility to keep this receipt and proof (which the software will do by default), otherwise you will be unable to prove any transaction has taken place at all! Sort of like a paper receipt for buying something, but using cryptography!
This is known as "Pay to Contract Hash".
@_date: 2016-04-05 22:22:42
Isn't the rule,


@_date: 2016-04-19 20:19:47
It would say in the wallet that you couldn't connect to them.
Hardware wallets will be compatible. It's even possible to have a semi-cold wallet, in that you don't need to store your keys hot/online. It's possible to split a channel into a "Hot" portion and "Cold" portion and dynamically update the allocation (when you have the cold portion signed off on the cold key, and the cold key is the "root" key determining the allocation itself). Of course, you still need to periodically check the chain, but you can have your cold keys offline, so you store 90% of your channel funds on a key that doesn't touch the internet, but can update the allocation whenever you need to. It's like a Savings and Checking account, without the need to make on-chain transactions when updating the allocation. These features will be implemented later, of course.
@_date: 2016-04-19 20:43:46
npnp \^_\^
@_date: 2016-04-05 21:35:18
Yes, but it's not just about merchants accepting bitcoin for goods and services.
Not only does it do effectively instant payments, if bitcoin exchanges are in the same datacenter, you'll be able to do arbitrage/transactions between bitcoin exchanges measured in milliseconds.
Getting into a channel takes a couple block confirmations like currently, but once you have a channel set up everything is instant.
@_date: 2016-04-05 21:58:43
Yes, lock up a satoshi, set it to go to miners temporarily. It's so small it doesn't even matter, its *far* below miners' fees in a transaction in comparison and this is many interactions in a channel. The values add up, so the local consensus state is still enforcible over time. Additionally, circuits over multiple hops have this enforcement mechanism in the same way, so you have confidence on the atomicity of the payment when redeemed (i.e. every hop will route payment the same way, very important!!).
We have explored and found other solutions as well (we (or more likely just Tadge) might present on this soon?), but this way is simplest and the systemic economic incentives/fairness is the cleanest.
@_date: 2016-04-05 21:32:44


Yes! The goal is to make the UI **BETTER** than existing bitcoin use. Grandma won't need to know anything about block confirmation, channels, multisig, etc. She just presses pay and it goes through. BAM!
However, if you're a Gentoo-loving tinfoil lunatic like myself, there will always be advanced options for detailed selection and control over everything.
@_date: 2016-03-05 04:20:09
Also, the block which caused the fork was created by (co-author of Lightning Network) as part of intentionally testing an implementation of Lightning Network software on bigger (thereby more sigops) segwit blocks. Good that the cause of the fork was simply due to a code update.
@_date: 2016-01-19 02:45:10
Hi, Lightning Network is not a sidechain, it uses real Bitcoin transactions and does not move the coins into a sidechain, the coins are in a multisig transaction output.
The design will work with phones and desktops alike and do instant transactions. The [summary]( on the website should give some good explanations to your questions if you haven't already seen it.
@_date: 2016-01-17 12:08:58
It shifts blocksize from transactions per second to number of users.
Actually, the intended plan is for a **single fast computer** running Lightning to be able to do off-peak Visa scale (thousands of transactions per second) alone amongst one's channels/users. Network-wide, Lightning should theoretically be able to do in total many orders of magnitude greater transactions/second than Visa (see lnstate/lnwire's readme).
@_date: 2016-01-17 06:26:53
i was told go has channels built-in :\^)
Seriously though, language comfort, concurrency, and high-level compiled language for faster testing/iterating -- it's an ideal language for solving the problem space first.
@_date: 2016-01-17 03:08:22
I don't think he participates on reddit. He's usually on IRC or gives advice personally. He also does more long-term thinking, like exploring performance of UTXO set commitments.


I think you'd be hard-pressed to find someone who has more years of experience with adversarial P2P protocols. Now, that doesn't guarantee he's right about everything, but it should not be immediately discounted. In any case, it might be more useful to talk about the ideas than the person.
@_date: 2016-01-17 04:32:02
Thanks~~! Tadge and Laolu definitely helped validate the ideas in the post (and I think I talked some aspects of this to Rusty about this too and he gave some feedback a while back). I think there's been some concern that some markets/business-models around multisig may be impacted with Lightning and wanted to clarify that.
With the postscript code stuff, Tadge and Laolu are far better/more-prolific at programming than I am and definitely deserve more credit for that \^_^
@_date: 2017-02-06 21:34:52
@_date: 2016-01-19 21:05:39
Data integrity is already a problem. You shouldn't lose your private keys. If it makes you feel better, you can have your own backup server off-site.
@_date: 2016-01-17 12:15:46
Do you think Bitcoin doesn't work because of Miners fees as well?
Anyone can open channels and provide liquidity. If someone wanted to charge higher rates, everyone would set up channels with others. Remember that this is not an enforced-hierarchical routed network (better than ISPs since the "wires" are very cheap).
@_date: 2016-01-23 10:18:52
If the Sequence field is 4294967295, which is default in pretty much all wallets, then RBF by policy is disabled..
@_date: 2016-01-17 07:04:38
Maybe, but it also needs to be fast. LIGHTNING BOLT.
I meant it seems like the simplest compiled language.
@_date: 2016-01-19 02:59:04
Yes, around then, provided some malleability soft-fork gets in :D
@_date: 2016-01-23 05:17:24
Nice! This is helpful when developing and sharing transactions with others.
@_date: 2016-01-17 02:49:47
Bram is one of the smartest people in Bitcoin. The BitTorrent protocol consumed a huge double-digit portion of internet traffic several years ago. He has an intuitive understanding of things like global propagation times, which nobody else in this community can match, from a decade-and-a-half of experience.
Most importantly, BitTorrent is an adversarial protocol with a heavy dose of game theory. You have people who want to get more download without contributing. There are very few other network protocols which have these same problems as BitTorrent and Bitcoin. You might disagree with his opinions on things or his bluntness, but don't immediately discount what he says.
He's personally given some pretty solid advice on Lightning.
@_date: 2017-03-10 03:36:42
Rootstock is one of the most interesting things going on in this space! :D
@_date: 2016-01-19 02:47:04
Nope, if you can send out payment on LN (the recipient accepts it), you can spend it immediately without hitting the blockchain or waiting for confirmations.
@_date: 2016-01-17 04:52:09
Yeah, it's great, everyone in the LN community does cool stuff and it's good to explore solutions. Too many people to name.. rusty, cjp, Mats, aj, and others.
I agree, since a large component of Lightning is smart-contract Bitcoin transactions, it'll still need Bitcoin wallet code. Also if the payment is sufficiently above the minimum output size, payments should be backwards-compatible and broadcast a normal P2PKH transaction if the other party doesn't support LN (with some minor caveats). But, of course, it's more fun if wallets just supports it natively in the future.
@_date: 2016-06-18 10:21:36
gr8 b8 m8 i r8 the troll article 8/8
@_date: 2016-06-02 23:14:02


I don't work for Blockstream. Rusty's implementation is not [ours](
I'm perfectly happy about multiple software implementations, provided it's done in a reasonable responsible way (I'm a bit picky in what constitutes LN, but barring the headline, I think the statements by blockchain were mostly reasonable in this article -- the biggest aspect is it's really only LN if there's no custodial trust in intermediaries). BC.I is putting resources into bitcoin development and they should be applauded for it.
@_date: 2016-06-17 21:53:50
You can route your payment through multiple intermediaries. Each intermediary is, of course, constrained by the available liquidity they have within their channel.
The interesting part is that you don't care about the capacity of the intermediaries, so long as the recipient knows they'll get the money, they disclose the preimage (R-value). Each participant just cares about their own enforceability with whom they have channels directly open with. For the recipient, they only care if they're going to get the money. For the sender, they know that they'll have funds pulled from them if some preimage (R-value) is disclosed -- and knowledge of that value is proof of payment.
@_date: 2016-06-17 19:50:17
You need a malleability fix just as segwit as well. Ostensibly, it might seem safe to do it with just CSV, but you're making a lot of tradeoffs and there are certain kind of attacks the miner can do unless you account for them all.
@_date: 2016-06-02 23:40:15
I think so. While it's certainly true that "bridges" are possible, it's definitely not desirable. It sort of doesn't make sense to get consensus around specs before the problem space is mapped out -- imagine making the W3C before the first browser, it would slow down development immeasurably. I will be spending some time structuring more detailed specifications in the coming weeks (long overdue -- previously, a larger focus of mine was security and scalability design/implications which I'm finishing up on).
@_date: 2016-06-17 22:52:39
They would know if you're directly connected to them. If you don't have a direct channel open with them, likely no.
@_date: 2017-01-18 00:18:23
I don't think replacing PoW consensus with with Proof-of-Intel is a good idea either. I don't think this is proposing that, but I agree 100% any potential proposal doing that on the base consensus/PoW layer has significant security and systemic social issues.
@_date: 2017-01-03 05:44:14
your divergence meter says we're still on the berenstain timeline
@_date: 2016-06-17 22:54:44
You could, but it's undesirable. There's a LOT of tradeoffs being made and is in reality more annoying to do securely than other people have proposed on how to actually do it. It's far easier to just run it on segwit.
@_date: 2017-01-17 23:30:08
If you're concerned about these things, many ARM SoCs (e.g. RK3288) are free from binary blob bootloaders.
@_date: 2017-01-19 00:19:20


@_date: 2016-06-17 19:53:50
Whomever you have a channel open with, you know how much is put on-chain, since you know the funding transaction. The channel limitations are within that scope.
@_date: 2017-01-19 00:07:37
Thank you for being part of this community's journey by co-founding Coinbase, looking forward to your future projects and wishing you the best with your endeavors.
While this community has its share of contentiousness and technical differences, I've always appreciated your work in helping to create the first viable exchange in the US.
@_date: 2016-12-04 03:07:23
Rusty has done significant material work in framing and core thinking around the protocol, including thinking around compact extensibility that will (hopefully) last the test of time and flexibility to bring long-term robustness for everyone.
In the coming weeks, as the specification changes slow down, we're definitely looking for comments by the wider bitcoin community with regards to the specification. In particular, we're looking for people who are interested in running/building on Lightning and any requirements/changes necessary to ensure those new use cases are able to be used and flourish. We should be issuing a statement around these aspects soon, but to echo the blogpost, know that this is all a moving target right now and changes can still occur, but in the meantime it would be greatly helpful to us if the wider community read it through and submitted feedback on any relevant use cases and requirements.
As a group effort by the wider bitcoin community, we're committed to being a model for positive community collaboration amongst the bitcoin ecosystem.
@_date: 2017-01-17 23:07:16
I agree with this 100%. It's important to respect people who try to make contributions this space while direct about concerns, you never know what kind of people and developments will have outsized positive impacts later :) :)
After all, Bitcoin is very difficult to understand why it is viable and where it's useful initially, I'm sure most of the highly technical people here (including myself) were skeptical of Bitcoin's functionality initially.
This is one of the first software contributions currently usable on bitcoin coming from him and his team/colleagues. People that are trying to make contributions in this space should be respected, shitting on their work in a hostile way basically starts arguments and can prevent interesting developments from happening.
@_date: 2015-08-17 19:54:48
I know this might be a rhetorical question, but it's the same reason why the internet doesn't work as a global multicast system where all packets get broadcast to everyone.
@_date: 2015-08-11 20:41:33
Actually, ~~if you set a reserve requirement and use hash based revocation(instead of multisig in your document) then~~ only the Funding transactions and any HTLCs in transit is vulnerable. It may be profitable to encumber (and steal via hostage) unlimited funds in transit if you're a Miner with extra block space, though.
@_date: 2015-08-22 07:30:17
To answer your question, it is explained in the paper as "pay-to-contract" hash.
@_date: 2015-08-10 05:30:25
A payment inside Lightning is made using a bitcoin transaction. The difference with a standard bitcoin payment to an address is the scripts used (it's a "bit" more complicated :\^), and the transaction is only broadcast at a later time if/when you want to spend your coins on-blockchain. Think of it as a smart contract with a very specific function of payments.
It is not an altcoin which you move your bitcoins to with a different exchange rate, such as with litecoin.
@_date: 2015-08-18 06:56:18
Ah, sorry. I was reading on my phone and mis-read your comment. I agree it is a possibility.
@_date: 2015-08-12 03:01:11


Only if they have a time machine, because they got that $21 million before the Lightning Network paper was published. If they had a time machine, then arguing about block size is missing the forest from the trees! Maybe Bitcoin is time-machine resistant, though. If there is sufficient entropy in blocks from random selection of extranonces, then perhaps changing the past will result in different nonces due to different events &amp; the butterfly effect creating different nonces (depending on what time travel theory you fancy). So if you wanted to do a deep reorg, you'd be mining on non-existent chains, since the previous block hash/id would be invalid. Of course, if they bring back lots of miners from the future, all bets are off.
@_date: 2015-08-17 20:16:33


Then your client finds an alternate path on the LN to your destination. You probably won't even notice it.
@_date: 2015-08-20 02:49:24
I'm not saying I 100% agree with his line of thinking, but the logical conclusion to a lack of a fee market is breaking the 21 million coin cap. If block rewards decline and fees are insufficient to cover (because all transactions are nearly free due to effectively infinite available block space), the other way to pay for mining security is to break the 21million limit. Where I disagree with that guy is that I would assume people on both sides of the debate see the need for a fee market, as there is currently no credible longterm alternative.
@_date: 2015-08-10 04:30:07
Any node, even one connected intermittently, can do liquidity providing yourself. E.g. If you have a connection to both Alice and Bob, and their channel has too many sends in one direction, you can send in the opposite direction in a circle back to yourself, to ensure fund flows are clear between Alice and Bob in that direction.
Remember, you're as much "holding a balance" with your counterparty as your counterparty is "holding a balance" with you.
@_date: 2015-08-17 19:51:19
Noting is stopping you from running your own LN node.
Fungibility is very important for a functional system, LN is designed to route around damage, much like the internet. If a portion of the network refuses to route your payment, your client will find an alternate path.
@_date: 2015-08-11 19:21:45
Hi, I replied on the mailing list here (and corrected my original posts with strikethroughs/italics):
I assumed there was already mitigations for malleability/hostage scenario risks with a server-trusted model, as addressing malleability without soft-forks requires more explicit trust with the server.
If both parties have a copy, then the client can just connect to as many servers as possible and conduct extortion via hostage scenarios.
@_date: 2015-08-20 08:11:44
The presumption isn't 0 transaction fees, it's almost 0 (think $0.001). If one miner's policy is to only allow high-value transactions, they'll lose out free money to those with more loose policies. The threat of orphans from larger blocks isn't credible in the same way in the long run, when that problem is sufficiently technically solved.
At that point, the path dependencies of average use of the system goes towards increasing the block rewards, as alternatives and change in behavior are too risky.
Again, I don't think that de-facto unlimited block size with no fee market is being seriously proposed due to its problems.
@_date: 2015-08-18 04:06:19
I'm not talking about "SPV mining" at all. These attacks have nothing to do with SPV mining.
@_date: 2015-08-22 07:59:06
No problem!
Yes, because before the payment is made, the receiver signs a message saying that knowledge of R is equal to receipt of funds.
It's like if using on-chain the receiver signs a message/payment-request using the payment protocol.
FYI, this problem exists today with the way everyone uses bitcoin (websites just ask you to send to an address, they can always claim that address isn't theirs and they never got the money), so LN gives an opportunity to build in a solution.
@_date: 2015-08-18 19:55:18
If the fees are above the cost of operating it, someone else can offer lower fees. By undercutting others with unlimited funds, you may temporarily increase your connectivity on the graph, but the moment you charge really high fees, others will take your place.
It's important to understand the primary requirement isn't having a lot of money. It's high uptime. You can run these nodes with very little money, as long as it matches your spending habits. Additionally, if you don't have high uptime, you can do liquidity providing. For example, if you are connected to Alice and Bob, and they both have a lot of traffic through them in one direction, you can offload transactions from them (for a fee), where instead of the intermediary channel path of Alice -&gt; Bob, the funds go through Alice -&gt; You -&gt; Bob. That way the channel path is clear between Alice -&gt; Bob. In reality, the available channel funds between Alice -&gt; Bob can be offloaded to *every node which is connected to both Alice and Bob* -- this includes cellphones with wallets. These mobile wallets can receive fees for offloading these transactions. For this reason, nodes don't need an exorbitant amount of money, and the graph can be well-distributed/sufficiently-decentralized.
@_date: 2015-08-24 16:56:30
The fees are market based, whoever gives the cheapest gets more connections. Think the rate is too high? Provide the service yourself and make some money. I think it will be incredibly cheap to nearly free if you're willing to rebalance your funds between channels periodically.
@_date: 2015-08-12 00:24:38
I call them nodes and don't like the word hubs. For Lightning, there may be interchange points which you both know about and is common knowledge, but there can be many of them. The primary factor to pay attention to isn't funds locked up, but actually related to node/route discovery.
It actually doesn't take a lot of money, and doesn't require an equal amount in holding. The channel counterparty isn't lending you money. They also have current balances, so they're not lending you money any more than you're lending money to your channel counterparty!
If a channel is locked up, the funds in transit can be offloaded to other parties which can provide liquidity.
@_date: 2015-08-19 01:22:01
Maybe volatility would've been a lot worse were it not for short covering!
@_date: 2015-08-13 23:44:32
Along with OP\_CHECKLOCKTIMEVERIFY, it allows you to have functional LN channels. OP\_CHECKSEQUENCEVERIFY lets you have channels which never expire (unless either party wishes to close it out).
Long-term LN really wants/needs a more-permanent malleability fix (outsourcability and design cleanliness), as well as some kind of mitigation against a supervillan attack, such as gmaxwell's idea of a timestop. However, even without either change, it'll be possible to instantly pay for a cup of coffee so you don't need to wait around in a shop for confirmations, all the the way down to extremely small micropayments-- LN can be used for micropayments (so you only need a small amount in the channel) and you could use main-chain for big/infrequent payments as soon as OP\_CLTV/OP\_CSV get merged in.
@_date: 2015-08-20 18:17:07
The primary value is instant micropayments, which works with BIP 101 (and LN is still necessary for exchanging really tiny micropayments instantly)
@_date: 2015-08-18 19:56:54
It is true it is a slightly different model than currently, but it is also more decentralized than the current way to do instant micropayments (centralized systems like Coinbase or Changetip).
It is as if anyone can easily/cheaply become an AS and have an ASN with infinite cheap peering arrangements on the internet. If that were the case, the internet would look very closely to peer-to-peer.
@_date: 2015-08-18 00:51:15
I answered the question on the mailing list here:
TL;DR: Attacking full nodes requires over 51% of hashpower and tons of cash. Attacking the way SPV validation is currently used today is (substantially) below that and allows you to attack more people/coins at once.
@_date: 2015-08-19 21:01:24




Time-value of money is not dependent upon quantity in that way, so I assume there's some efficiency gains from scale? I don't think the efficiency gains are there, considering the opex should be close to (effectively) zero for smaller nodes. The primary risk for lock-in that needs to be mitigated against actually isn't individuals with lots of money, but rather relates to route discovery (there are some marginal network effects there, and largely selected by uptime).


By default, yes. Additionally, channel counterparty will probably end up (in the long-term) being close on the graph to who you frequently transact with, as well. Of course, all things are tunable and may be different for different wallets with different features/goals.
@_date: 2015-08-12 23:21:00


Right now, Lightning is a hobby. I'm not an employee of any bitcoin company currently or funded by anyone to work on lightning, but that may change in the future if I can find a way to do it responsibly and in a way which maximizes Bitcoin's value.
In terms of association, Ive talked to pretty much everyone in the SF bitcoin meetup communities (well except for 21, lol) and where Ive met people interested in bitcoin. I met Thaddeus Dryja at the SF Bitcoin Social and we worked out LN there last year.
@_date: 2015-08-11 18:38:37
I replied to the announcement on the mailing list.
* I think a significant amount of the effort by mjerr and lot of the code can eventually be used for a Lightning implementation when the necessary soft-forks are in Bitcoin!
*edit2* [see the thread below, the next statement was due to some confusion with the documentation, parentheses I think are revocation hashes](
~~* You're explicitly trusting this ~~server~~*client*, the ~~server~~*client* can ~~steal your money if you have a if you have a channel balance above your deposit~~*lock up your funds and create a hostage scenario to extort funds from the server by mutating the Commitment transaction*, so the design and trust model is materially different from LN. *the server can do the same with the client and extort funds as well*~~
@_date: 2015-08-12 00:50:07
Woah woah woah, Blockstream got $21 million dollars for Lightning? Why wasn't I notified of this?
@_date: 2015-08-17 20:05:47


The greater threat is that you need a functional fee market long-term. If fees are asymptotically close to zero, then miners don't get rewarded at all which has irreparable damage to the 21-million coin cap when the block rewards decline. If fees are non-zero (there is a market), then high-value transactions will crowd out low-value transactions, making micropayments impossible. Lightning is designed to resolve this tension first and foremost.


The graph isn't siloed, it's open access. You can run your own node and route to anyone on the network.
@_date: 2015-08-17 20:02:14
Nodes which charge higher fees will get routed around. All your transactions will occur over node paths which offer the lowest fees by default.
How do you think you can establish a rentier economy when there are thousands (maybe significantly more) of nodes?
@_date: 2015-08-20 05:17:48
No, the opposite. The consequence of no block size cap at all (which nobody is suggesting), or effectively no cap since anything gets in, is miners not getting paid for securing the chain when block rewards decline in the future. The solution to funding miners if one refuses to have a fee market is to break the cap. Again, I don't think that anyone is suggesting to prevent a fee market in the future, AFAIK.
*edit* to clarify, "no blocksize cap = infinitely huuuge blocks with no limit on size (no one is proposing no cap in any form right now)
@_date: 2015-07-23 20:16:17
Yes, I am writing a summary now. Hopefully it'll be easy to understand!
@_date: 2015-08-20 02:04:49
Yes! Instead of nodes using HTLC for micropayments, the channel can maintain a balance of colored coins between people. Each channel is only for one colored coin, though.
However, the graph will be significantly more shallow, as you're locking up more value (so the risks are higher), and the key part -- *you don't care who you interact with, you just want the cheapest*. So there will still be multiple hops, but there may be multiple people willing to exchange at a price; the hops don't need to travel as far.
Setting up channels and locking up funds may require more trust, and temporary lockups of a colored coin may be more high-impact. Therefore it may be ideal to make an alt-blockchain with different featuresets and do cross-chain atomic swaps for payment for coloredcoins in bitcoin.
Of course, this is all theoretical, this kind of infrastructure is significantly more complex than straight payments on LN in terms of technology and socially.
@_date: 2015-08-19 03:17:57
Yeah, cascading margin liquidation without any mitigations can be super rigged if that's what happened. I guess people aren't willing to leave money on bitfinex in case this happens.
@_date: 2015-07-17 23:57:15
Most people's spending habits are to receive money once or twice per month in the form of salary payment, and to spend nearly all of it over the following month. If your channels' total value is several thousand dollars, you will not need to open channels indefinitely. The counterparty is willing to leave the channel open due to some potential to receive fees (as well as possibly some time-value payment for leaving the channel open with you).
It's important to view this as a network, rather than a hub. Your peers can be others who have spare capital willing to run nodes. If you have 1 BTC lying around, you can create a channel with another party and collect some small fees. It won't be much, as competition will drive the fees down, but it may be better than just leaving it lying around. Even better, there's no direct counterparty risk, so it's not like lending (you're technically not lending money out as the balances are in your control, just with some time delay).
The optimal construction will probably end up being how much money you spend in a month, but I believe that guessing wrong within several multiples will not have significant impact, as it'll probably be fairly cheap. Further, the presumption is you are connected to several or many hubs -- you wouldn't just connect to one hub, you can receive your salary in many different channels at once. I would assume the overwhelming majority of traffic is end-users rebalancing fund flows between intermediary nodes, so the fee structure will have some rebates (with impact to signal/noise ratio if you treat end-user payments as signal).
@_date: 2015-08-18 01:38:06
My central point is that you don't need to be attacking live or have over 51% hashpower. You can reliably attack SPV clients with 35% of the hashpower if you're willing to wait until you have a sufficiently long chain, you cannot do that reliably when attacking full nodes. I started explaining the ability to attack multiple entities in order to succinctly convey that attacking SPV vs fullnodes are materially different -- perhaps it was a roundabout way to explain things, to clarify, in the latter the attacker is doing a reorg, in the former the attacker is lying about the UTXO set.
@_date: 2015-07-23 23:57:47


I meant in the bitcoin whitepaper, which is what was being discussed.


Payment channels are not secure enough to do anything of serious value due to malleability. You'll be able to do basic payment channels with OP_CLTV.


This is not true at all. See my previous analogy.


You're presuming i.i.d. The services that use a system that requires micropayments and instant confirmations will tend to have people with similar demands to use such services. It is incorrect to assume that users and merchants use certain technology independent of their needs.


You're making an appeal to the network effect, which is used primarily as a basis for synergistic value as well as technological lock-in path dependencies. I'm arguing that the network effect is not the impetus for the technology to exist, only for it to be popular.
The invention of the radio does not presume the popularization of commercial radio. Similarly, the Lightning Network can  function without many users. If you wish to undermine the argument, one would have to argue why the network effect could not exist for something like the Lightning Network as a path to bootstrapping the system -- not that the network effect does not yet exist.
@_date: 2015-07-18 00:50:39


Minor correction (seeing as that's a plural), while Thaddeus Dryja works at Mirror, I do not.
@_date: 2015-08-10 05:46:12


I definitely don't speak for Rusty, but to echo theymos, scary names are good security for pre-alpha released code. It helps prevents user mistakes related to expectation of functionality. If Ford let you test-drive their cars on a test-track before it hit NHTSA tests, it *should* be called "Pinto Extreme".
@_date: 2015-07-17 23:46:33
Yes, it can significantly speed it up with different tradeoffs. Ideally, one would still want a long-term malleability fix, as it allows you to do a lot of cool stuff (like outsource watching the blockchain, game theoretic safe dual funding, and creating multiple cold-storage states). However, there are some constructions which allow for testing very soon.
OP\_CHECKLOCKTIMEVERIFY lets you do safe single-funder (but bidirectional) channel construction without malleability risks. If you're willing to have your money held up for a while with a non-cooperative counterparty, you can also do dual-funding, but I suspect this construction will have a single funder and rebalancing it to be whatever is necessary after the channel is created (time-value fees may be higher, but it'll work). This will be the nearest term solution and allow for testing of Lightning on the Bitcoin main-chain very soon. The primary downside is that if your channel counterparty refuses to cooperate, you have to wait for the channel to expire before getting your money back; a tradeoff exists between channels expiry and time-value in the event of non-cooperation. However, it'll probably work well enough, instant micropayments on Bitcoin will finally be a reality.
OP\_CHECKSEQUENCEVERIFY and BIP 62: Both are required for this construction due to malleability concerns of the Anchor/Funding transaction. This is better than the OP\_CHECKLOCKTIMEVERIFY construction as it allows for you to keep the channel perpetually open (potentially for many years), but in the event the counterparty decides to be non-cooperative, you can get your money back after some agreed time (e.g. one week).
Long-term, some kind of new sighash flag or checksig opcode is ideal, but this will let things be tested in the real Bitcoin blockchain rather quickly in the near future. In the even longer term, you want defense against systemic attacks (e.g. gmaxwell's Timestop, it's sort of explored in the paper).
@_date: 2015-08-12 08:18:43
OP's point is that the "own Lightning Network" model was made after they got investor money? I mean, I think OP's heart is in the right place for sure, they probably wants what's best for Bitcoin and it's great to ask questions. However, I think LN is substantially more decentralized than some believe (this may be my fault since I can do better explaining things, I am working on it...). OP's point seems to be:
* Step 1: No block increase
* Step 2: Monopolize the LN nodes or something ???
* Step 3: Profit!?
It doesn't work that way, anyone can run a lightning node. Node discovery will be distributed well enough that they're competing against *many* different people. If they attempt to charge high fees, then they're going to get out-competed by everyone else. Your paths are going to be close to the people you transact with, not all of them are going to be directly connected to Blockstream, that's silly (and probably outright impossible).
You have my personal promise that I'm going to do my very best to make sure Blockstream (or any other one company) doesn't have enough power on LN to demand usurious rentierism, and this will be an exceptionally low-margin service (to the point where the LN fees for everyday use is very close to free and cheaper than current systems if you're willing to send money between channels every so often). You can help by running a node and collecting money when Lightning is available, or leaving your wallet running and collecting money by doing liquidity providing.
For the record I'm not against increases in block sizes ever. Lightning prefers bigger blocks (but compact enough where hopefully everyone can validate the chain in the future). That's why the paper explicitly mentions blocks larger than 1MB. However, I do think doing things responsibly and when it's needed is a good idea and I don't proport to have all the answers.
@_date: 2015-08-18 00:30:16
CPFP doesn't necessarily create an extra transaction if you were going to use the coins anyway. The "child" transaction can be establishing a new channel with another party. If you want, it is possible to sign multiple Commitment transactions which you can broadcast for different fee levels.
However, the situation of too many transactions needing to get into a block with malicious channel counterparties is the weakest aspect of LN. For this reason, until there is a more significant solution (e.g. "timestop" or other mining infrastructure penalizing attackers), LN should be used for everyday payments (what you're willing to keep in your wallet), with larger payments being on-chain (larger payments should probably be on-chain no matter what anyway, as they're directional flows that might be one-time payments larger than any channel you have open). Irrespective of your view on the block size debate, LN solves a space which is not well-served by on-chain bitcoin of decentralized instant payments and/or micropayments (the price of a coffee and below).
Higher fees and temporarily overloaded mempools/blocks with non-malicious counterparties isn't a problem in LN, though. LN continues being operational; you don't need to close out your channel at that time. In fact, you might want to wait until transactions are cheaper before closing out your channel.
@_date: 2015-07-18 00:38:07


For end-users who do not wish to do liquidity providing, you can pre-sign transactions offline. It might be a bit of a hassle, but offline signing of on-chain are also a hassle. With a long-term malleability fix, you can also have a funding transactions funding two other funding transactions which operate as a "Hot Lightning wallet" and the other as a "Colder (private keys offline) Lightning wallet".


Greg Maxwell's "Timestop" can minimize the problems significantly.


I think nearly everyone thinks the total capacity of on-chain transactions should rise long-term. Additionally, some kind of timestop will allow for a systemic attacker to pretty much guarantee lose all their money, and it shifts the attack payoff from stealing money, to merely slowing down on-chain transactions (which isn't a sufficiently useful attack since nearly all lightning network off-chain non-attacking transactions will continue to work without any slowdown).
@_date: 2015-07-23 20:57:07


I agree with this 100%. The UNIX Philosophy is a very useful way to understand how to build systems (especially complicated ones like financial systems).
The Lightning Network was not designed to be a ivory tower of elegance. It is designed to work.
Thaddeus Dryja, my coauthor, calls Lightning Network, "Network Address Translation for Bitcoin". NAT is messy and ugly, but is absolutely critical for the function of the internet today due to IP space constraints. While NAT is a stopgap for a solvable problem (ipv6), Lightning is designed to be compatible with future resolutions to space constraints while also resolving the more complicated problems related to network-effect scalability, transaction-value heterogeneousness, and instant micropayments.
Also, replying to OP, the length of the paper is due to it being a more comprehensive explanation of the incentives, design decisions, impact to an existing system, risks, and goes into some detail on the high-level design. The higher level of detail is necessary because it is proposing a change to an existing system, not creating one wholesale -- which requires greater care and safety in explaining design intentions. The Satoshi Bitcoin paper is a description of a brilliant system. Comparing page size isn't comparable.
@_date: 2015-07-24 02:42:57


There is no "trusted 3rd party" beyond what bitcoin uses. The trusted third party is the blockchain. There is no custody. Bad nodes can be routed around.


What is Bitcoin? It uses bitcoin transactions exclusively, the transactions are cached and blockchain transaction broadcasts are just deferred.
@_date: 2015-07-24 21:43:40


It is presumed that you have channels open with multiple nodes. Closing out uncooperative counterparties can be as low as a day or two for low-value channels, the social cost of one of your nodes being uncooperative is minimal. You're making a hard assumption of a centralized graph which cannot reroute.


No. That's like saying


It uses scripts and transactions that are part of bitcoin and is not a trusted overlay network. It's a logical fallacy to argue that just because the use is different than the current behavior that it should not be done; we're far too early for Bitcoin ludditism.


What is the scope of BN and how is it different than BC? If you're unable to enumerate and define what is Bitcoin, I'm not sure we can continue this discussion.
@_date: 2015-07-27 20:24:58
@_date: 2015-07-18 00:27:39
Lightning is designed to minimize (or eliminate) the need for reputation. Reputation isn't as fun, since higher trust (reputation) implies higher fees and overhead costs.
With a relative timelock, you can get your money back very quickly if the channel counterparty refuses to transact reliably, and it's designed so you're not giving them custody with your money -- the worst they can do is delay your eventual refund of your current balance.
Reputation is needed for systems with debt, as there is a risk of counterparty default of obligations. Lightning is not a debt-based system and therefore, in isolation, does not have direct risk of counterparty custodial default for a channel.
@_date: 2015-07-23 20:44:51
Thanks, I'll correct that.
@_date: 2015-07-23 20:37:49


This is not true at all. Pubkeyhash was not described anywhere and I believe early implementation used IP addresses as payment identifiers as well.


This is not true. Lightning will be usable if you have service providers which requires instant micropayments. That kind of argument is similar to saying that "Bitcoin is not usable until most bank accounts have adopted it".
@_date: 2015-08-14 00:04:42
Luke-Jr might be a little bit hyperbolic but there's a kernel of truth to it.
History rhymes. Historically, with gold, the problem was that lugging it around was too much hassle, difficult to measure/validate (transaction costs), as well as storage was difficult to secure. People and institutions responded by creating gold certificates, which resulted in perverse incentives relying on trust and audibility.
Bitcoin is substantially better with transaction costs and storage costs, but the problems are not non-existent. It's true that when compared to gold, the problems are closer to non-existent than an end-state of single custodians. If self-validation is sufficiently expensive, then one's incentive may be to outsource that validation. Of course, the way it gets exhibited could be a bitcoin depository (a la gold certificates), but I suspect luke-jr is asserting that there may be similar (but significantly less severe) perverse incentives that may become apparent when everyone depends on SPV or "Blockchain APIs". 
As a point of clarification, this argument is not dependent upon the block-size discussion (but may be the other way around), I think it does exist no matter your point of view. The more people are running full nodes, especially merchants and miners, the more secure bitcoin can be against those possible perverse incentives resulting from trust and audibility. This is why you see a lot of people encouraging running full nodes in r/bitcoin.
@_date: 2015-07-26 21:34:27


No. That's not going to happen, they'll just run a node themselves.


Cash out? The point is to do small payments on LN, and large payments/settlements off-chain.


Yes, please see my replies above. All technologies must be bootstrapped.


OK, if you're open to discussing this further, please do not hesitate to contact me directly.
@_date: 2015-07-25 00:01:33


No, the graph is never going to be centralized to the point in which all transactions must route through a couple entities a la visa or mastercard.


You're using the word hubs, I've been using nodes.


That's also the point of lightning.


You're asserting it's not Bitcoin. I'm asking you to define Bitcoin, and provide some clarity on your worldview. I don't think we can continue this conversation and down this line of thought otherwise.
@_date: 2015-07-18 00:43:40
(I think) Anen-o-me was making a joke.
@_date: 2015-08-18 19:58:54


I agree 100%! I have/am designing things and putting effort into making sure that anyone can run a node with a modest amount of money, as well as ensuring the network being fully open access and fungiblility is preserved.
@_date: 2015-07-25 00:54:26


I think we can figure out we're talking about lightning network nodes here.


If you're accepting that LN is a part of bitcoin, that's why the paper is a bit longer. It's responsible to go into detail on its implications.


You're not getting a single answer because it's one of those things that tends to figure itself out. The UI that makes the most sense is going to win, so if it's some automatic slider bar or whatever, it sort of is orthogonal to the discussion at hand. Asking for the UI for the Oculus Rift's production model isn't relevant.
@_date: 2015-07-23 20:33:11
Hi Mike, there are several possibilities, but I think it's out of scope for the paper. I don't think bitcoin addresses were referred to in the Satoshi paper, or any significant implementation details, for that matter.
When it comes to ideas on how to go about it, there's several possibilities, and I think they should all be considered. Much like how you are now able to do BIP 70 Payment Protocol endpoints in many Bitcoin clients, as well as pubkeyhash (1 or 3) addresses today, I think there should be several options for identity.
Ultimately, your identifier should be some pubkey, which is used for a communications channel (think PGP). That identifier needs to be associated with and endpoint to communicate with, so you need pubkey e.g. 01ba4719c80b6fe911b091a7c05124b64eeece964e09c058ef8f9805daca546b
However, this may be too complicated, much as pubkeyhash addresses are too complicated. IMO, the safest way to go about this is to use a similar mechanism as the BIP 0070 Payment Protocol. A URI endpoint discovers a pubkey address. So  resolves to 01ba4719c80b6fe911b091a7c05124b64eeece964e09c058ef8f9805daca546b It is then pinned in the client. The purpose of doing it this way is to force all transactions to be pubkey for security, URI endpoint is just a convenient discovery mechanism, but is ultimately not secure (and should therefore be somewhat discouraged) due to its reliance on CAs.
Another possibility is pubkey only, but would require some kind of DHT.
With the exception of a DHT system (which is maximally decentralized), I think a basic Lightning implementation can get out relatively quickly with just pubkey
However, I think you've thought about these problems for MUCH longer. I'd appreciate your thoughts on the matter, I think you would have many insights (especially when it comes to UX design/incentives) which I certainly haven't considered!
@_date: 2015-07-18 00:07:23




I've been thinking about this exact problem for a while. The way Lightning solves this is by creating on-chain spendable penalties in the event of disagreement of consensus state, with some on-chain contestation period.
Functionally, Bitcoin is *all about* enforcing order of events (timestamping via blocks), so some kind "perfect ideal" of partitioning models will allow for deep children to enforce order on parents multiple levels above -- not a small task. After all, if it's easy to enforce and validate order, we don't need this whole proof-of-work thing. Lightning works because the ordering enforcement is achieved through spendable penalty transactions for attesting out-of-order, but it's still dependent upon the Bitcoin blockchain for ultimately understanding which transaction is the most recent in the channel (forcing penalties via previously signed transactions).
@_date: 2015-07-18 00:17:42






I don't think this is true at all. The balances held in a channel is real value. It's not debt. Meaning if you put up 1 BTC in a channel, that money is available for your counterparty to spend (provided you get back an equivalent amount from another channel you have open). You still have 1 BTC. So people that tend to be savers will open channels in order to collect some small fee on the network.
This system should be confused with M2/M3 money. This system is M0/M1 money, the amount of Bitcoin you have is still there. I don't think there will ever be a situation where there isn't enough bitcoin to go around for these channels. If that's the case, either time-value fees go up or the value of bitcoin goes up -- more likely though, you just end up finding routes which directly matching and balance fund flows. I suspect the confusion may lie with confusing this system with banking's money creation functions. If you approach payment within the Lightning Networks as a (temporarily) *static* system, and payments are actually just channel rebalancing who all net to zero globally, it's easier to understand why this isn't a significant issue.
@_date: 2017-04-04 04:27:25
The Blockstream Confidential Assets release had the press involved as well as part of the announcement. I understand that this may require more community involvement, but we handled this more responsibly than the Hong Kong meeting, which the agreement by the miners were made before public knowledge. No commitments have been privately made made here. We believe that we handled things far above and beyond standard practice in this space.
I share your expressed concerns with prior agreements, and I wholeheartedly believe in the spirit of open source.
@_date: 2015-07-18 00:47:11
A basic version will work with OP\_CHECKLOCKTIMEVERIFY. A more fun version with fast escape with OP\_CHECKSEQUENCEVERIFY *and* BIP62. A permanent ideal version will have a sighash soft-fork or a new checksig opcode, as well as some kind of timestop function to prevent/discourage systemic risks if it becomes very popular.
Hopefully soon you'll be able to use a basic version of Lightning, by using OP\_CHECKLOCKTIMEVERIFY, you'll be able to instantly pay someone the equivalent of $0.0001 on Bitcoin, without trusted 3rd parties (who can steal your money).
@_date: 2015-07-26 15:03:49
It's the weekend, sorry for the late reply!
@_date: 2017-04-05 23:57:01
We are committing, with reasonable circumstantial evidence, that we will be fixing this in Extension Blocks as well as part of the soft-fork (to have even stronger consensus enforcement).
Comments by me and JJ here:
@_date: 2016-02-12 03:25:35
There is a segwit branch and testnet, we'll be testing against that soon.
@_date: 2017-04-04 05:27:30
Journalists had less than 24hours heads up of the details, some are actually kind of annoyed at us for being this rushed and uncommunicative.
@_date: 2016-02-12 03:19:58
We'll have a version out running on main-net before the malleability-fix soft-forks complete.
We're working on implementation here 
It's possible to accelerate the timescale significantly, but our goal is to do it right, and to be ready when Bitcoin is ready. If you want to see it released, it's dependent upon a malleability soft-fork gets out earlier or on time from a optimal design perspective.
@_date: 2017-04-04 03:50:26
This is a public process. The in-progress specification and code is online for public review. The code doesn't even allow what f2pool did! The coinbase commitment doesn't get included before activation, for obvious reasons. I assume he manually did it on a lark to express strong support.
In the past day we have been talking to journalists getting ready for the announcement, hence why there was some rumblings about it when they do their normal due diligence and validation. In fact, we accelerated the normal timescale, which was very disrespectful to some journalists, since we originally planned for a release a some hours/day later.
Wang Chun at f2pool, who wrote the flag bit himself without the corresponding extension block proposal, had no advance code access, in fact he has not seen any demonstration of the code. We did not ask him to do this, and I personally asked him to at least remove EXTBLK from the coinbase. He decided to have some fun with it, which I totally get. :\^) We just very recently did a trial balloon with the miners to see if it was worth it putting in engineering effort to help resolve the discord. JJ had 2 weeks of sleepless nights and all of us put an incredible amount of thinking with the architecture and design. This project started only less than 3 weeks ago and we wanted to tell the community as soon as possible.
Note that bip9 requires a date to begin voting and the starting vote date has not begun and fully specified yet.
@_date: 2015-07-23 20:43:40
Setting some kind of timestop should resolve many of these concerns. With a immeasurably wealthy supervillan attack, at worst they can delay setting up new channels and closing out uncooperative channels if the timestop functions correctly. The Lightning Network will continue to operate with cooperative parties (and only a delay for uncooperative), with the attacker losing all their money. Spending an immense amount of money for merely on-chain delays should not be sufficient incentive to conduct such an attack.
Your concerns are addressed in a more complete manner in the newer version of the paper (and even the older version is mostly theoretical).
It's sort of like saying "Bitcoin isn't viable because of a 51% attack". It's responsible to understand the security model for a given system, but one should not assume a system needs to be perfect in order to be viable.
@_date: 2017-04-04 10:05:14
so you're saying core devs should have a privileged position?
@_date: 2017-04-04 07:37:26
Because of FUD.
f2pool never had the code, as you can see with pre-activation behavior in the spec and code.
@_date: 2015-07-18 00:42:58
Yes, but fees are zero-sum. If you have 1 BTC lying around, you can probably collect some small fees for the time-value of the channel, as well as probably some small fee for liquidity providing directional fund flows. So if you have a channel open for 2 BTC, and 1 BTC is yours, it should mostly balance itself out.
@_date: 2015-07-26 15:17:15


There is no borrowing. When you have a channel with 0.1 BTC from Alice and 0.1 BTC from Bob, nobody is lending anyone any money, those are funds that an individual owns. Further, channels can operate in both directions.


Suppliers will be paid out of the same channel, so payments will go out the same way. If one is accumulating funds at a significant rate, one can create another channel, send all funds to that channel (leaving existing channels open), and then close out that new channel which will send the funds to the Trezor or whatever. It's also possible future hardware wallets will be compatible in more interesting ways.


I think perhaps there's some misunderstanding, it's very difficult to convey complex ideas over reddit, and perhaps I'm not explaining things in the most clear way. Would you like to discuss this in person with a whiteboard? It may help us understand each other. I think it's very important for ideas and systems to have (collegial) adversarial advocates to ensure the correct systems get implemented; it makes bitcoin much better that way -- but I think in this case it helps if we're on the same page in the actual proposed system design.
@_date: 2017-04-04 07:34:59
The LN whitepaper was communicated privately with many people beforehand for validation before release. This was done in a more transparent way. This whole maymay about it being a problem that it was communicated to the press a day before is No True Scotsman BS. I get asked by the press all the time for technical validation before many open source Bitcoin announcements so I know how all things are done in this community, including by many of those people criticizing. With our original timeline, we gave such short notice to everyone that the press was scrambling.
@_date: 2015-08-18 03:07:53
Yes, you can attack with below 51%, but it's incredibly cumbersome and not reliable (with some serious costs for failure). You don't telegraph any information before the attack.
If you wanted to attack full nodes this is what you do:
1. Send coins to exchange
2. Start building another chain which is faster than the current "real" chain. This attacking chain doesn't have the deposit. Double-spend the original spend in the attacking chain.
3. "Withdraw" coins from exchange
4. Hope your blocks get mined more quickly. De-facto this requires 51% of the hashpower. If you don't then you need to re-send the deposit.
With SPV validation:
1. Build a fake block with the coins going to the victim.
2. Mine a chain long enough to validate coins as deposited on an exchange. If not successful, keep trying.
3. "Withdraw" coins.
The SPV attack is completely non-interactive and doesn't require substantially lower hashpower because the attack time is passive. Wait until you get enough and mark it as deposited. Whereas there's a ticking clock with a fullnode, if you're not successful, you need to withdraw your funds and try again. There's no warning with the SPV attack, and that's what I mean you cannot be confident with a fullnode attack -- you don't know if you're going to be successful with 35% of the hashpower.
On a systemic level, interactivity and guarantee of success is *very* important. With systemic SPV validation, the attacker can create false deposits to 1000-services, and then do a mass-attack with no penalty for failure. If you tried to attack 1000-services with fullnode validation, they might end up *taking* your deposit if you fail; the attacker is out a massive amount of coins.
Think about it. You need to deposit and withdraw money every 6 confirms to attack fullnodes. That's a pain in the ass for any attacker, and is **incredibly** obvious for any exchange.
@_date: 2017-04-04 04:51:55
The end of my comments indicates I agree with him about it.
@_date: 2017-04-04 07:45:43
The code doesn't attach the coinbase until after activation. He never had access to it before public release and just did it on his own for fun. Note that per the spec, voting hasn't even begun.
@_date: 2015-09-03 20:52:20


WTF how is this the top upvoted comment here?
What do you think will happen when over 50% of the miners are SPV mining?
@_date: 2015-09-03 21:44:02


Do you mean a block header? Yes they are small, they do not contain *any* transactions, the coinbase is part of the merkle root.
It is possible to mine on top of a block which is SPV mined with many transactions without any bandwidth constraints.


Yes there is, assuming everyone else isn't doing SPV validation. If a sizable portion of the network is doing SPV mining, and a sizable portion of the users/wallets/services are doing SPV transaction validation, bitcoin is fundamentally broken.
Proposing SPV mining is proposing an attack on bitcoin.
@_date: 2015-09-15 16:31:27
Yeah, good point!
@_date: 2015-09-07 01:36:52
This is not true at all. OP is wrong. LN uses real bitcoin transactions, if your node counterparty stops transacting on bitcoin you can redeem your funds on the bitcoin blockchain without their cooperation.
@_date: 2015-09-07 04:38:25
So OP is saying the codebase can be used elsewhere like any other wallet function? Sure, yeah, I mean that doesn't really say much, right? I mean I didn't hear people saying that about multisig wallets around the time they were being written, it's sort of a weird thing to say.
Yes, Lightning will probably end up being used on other chains as well. 
@_date: 2015-09-18 10:28:17
They solve different problems.
Lightning is designed as a payment system which does not require cooperation of any 3rd party to get your funds back as part of the protocol, using native Bitcoin scripts and transactions. Even if all other parties go offline forever, you can still have access to funds by broadcasting your most recent transaction on the blockchain. There is no overlay blockchain as part of the core protocol, these are real bitcoin transactions (just elected to be broadcast at a later date).
The design implications of Open Transactions is a lot closer to a Federated Peg Sidechain. Since the voting pools determine who owns what, you can attach unusual rules and computation.
@_date: 2015-09-07 03:40:31
Once you set up a channel on bitcoin, it's impossible for others to force you onto an altcoin since Lightning uses real bitcoin transactions.
Lightning might be able to work on altcoins or sidechains, but you can't be forced onto it by your channel counterparty.
@_date: 2015-09-12 13:54:21
Many people here are at  on IRC.
@_date: 2015-09-03 21:30:21
I'm not putting words in your mouth. Your OP said SPV mining is credible and small miners can use it.
You're making huge technical assumptions. The distribution of the size of miners has changed dramatically over time. Do not assume it will remain the same. What if there's a larger amount of small miners and they all decide to SPV mine?
What happens when a small minority of larger miners decide to attack the other miners mining off their SPV blocks?
What happens when miners start mining off each other's SPV blocks and it becomes the longest chain?


No, you just made the bigblock attack *easier* and *more likely*. Before without SPV mining, the worst case if you can delegate your security to a 3rd party (pooled mining). You're saying instead of that status quo, you're recommending SPV mining as an alternative for small miners when they can't validate the blockchain. That's insane. When they're SPV mining, it is vulnerable to attacks by others mining invalid blocks. Miners will lose money mining on that invalid block (at best, most likely). In worse cases, bitcoin outright breaks down because nobody can rely on the PoW function (less likely).
@_date: 2015-09-03 20:58:56
You're saying SPV mining is a credible alternative. If small miners view it as credible to do, then mid-size miners will as well.
What do you think will happen when small miners mine on top of each other's SPV blocks and a quorum of small miners do so?
@_date: 2015-09-04 00:30:11
Yeah, it goes very deep :D
Perhaps I should explain my understanding better...
@_date: 2015-09-07 03:42:19
OP is implying that there is a chance that when you set up a LN channel, there is a risk your coins will no longer be any good and be forced to transact on an altcoin. That is not true at all.
That's the only way the OP's comment can make any sense, otherwise one can also say that any standard bitcoin P2PKH wallet code will also work on an altcoin.
@_date: 2015-09-07 01:39:38
OP is wrong. Lightning Network does require the Bitcoin blockchain after the channel is established. It uses real bitcoin transactions (which are temporarily withheld from broadcast). If your counterparty decides to use a different coin, you can broadcast your transaction onto the bitcoin blockchain to redeem your funds.
@_date: 2015-09-13 16:18:08
Oftentimes, the best discussions and insights at a conference are in the hallways.
@_date: 2015-09-15 16:12:59
If you're a miner, you may want to advocate for a fee market. LN may allow for a fee market, while also allowing transactions using bitcoin where the transaction costs are too high on chain.
(Saying a fee market is undesirable because you like cheap tx fees is naive, as miners are economically motivated to create one and longterm bitcoin security may depend on it. LN allows you to use bitcoin with micropayments in the event this occurs without moving your coins to trusted custodians, like hosted wallets. If you can make a transaction on chain cheaply, don't use lightning, go on chain for something like buying a house.)
@_date: 2015-09-15 06:12:43
Who's Todd Park?
@_date: 2015-09-07 07:36:11
Anyone can run a node. When you set up channels with others they can route through you.
@_date: 2016-10-19 00:24:10
Yes, in fact it is comprised of several smart contracts :D
@_date: 2015-09-03 22:12:27
I already understand that argument. I'm saying when you try to mitigate large blocks with SPV mining, you're encouraging large block attacks by making the rewards for attacking far far *far* greater.
@_date: 2015-09-03 22:23:20
That is an attack that will occur as a direct consequence of people SPV mining. I cannot continue further if you do not already see this point and imply they are orthogonal/unrelated attacks.
@_date: 2015-09-04 10:46:47
(It prevents your shell from logging the command into the history if you have the environment variable set correctly.)
@_date: 2015-09-03 21:07:34
You're saying you can EVER use it safely for the wider ecosystem.
There are two possible end-states for SPV mining:
1. Miners lose money by doing it. They get attacked by a miner broadcasting a false block and everyone mining off that loses their money because the wider ecosystem (see payment processors and exchanges) don't recognize the block
2. Miners don't lose money by doing it. The attacking miner's attack gets "ignored" and the wider ecosystem accepts the invalid block. Bitcoin breaks and is worthless.
If you can seriously say you can ever use SPV mining and the network is just as safe, please do double-check whether you're considering all the risks when making technical recommendations.
@_date: 2015-10-10 18:58:48
Indeed! I made a picture for you as appreciation [ ;)
I should really change my IRC nick, though...
@_date: 2016-05-16 15:28:08
Nitpick: It's very important in the ecosystem to build decentralized systems without trust in third parties. At the present time, there is not yet malleability fix integration and therefore this is not a Lightning Network implementation as defined in the paper (much like how the Coinbase wallet is not a LN implementation).
That being said, it's always great to build software which will help the bitcoin ecosystem, more people building responsible systems decreasing the need for trust will help all in the bitcoin ecosystem.
In the interest of full disclosure and the desire to encourage removing trusted custodians (there are several people building decentralized LN implementations, [including ourselves as the LN authors]( , Rusty @ Blockstream's, Eclair, and more), I'm including the mail I sent to the article author below:
    Hi Romain,
      
    I'm the first author for the Lightning Network paper (
     ). 
      
    I'd like to make a correction to your piece on Thunder Network.
      
    Blockchain.info's Thunder software at the current time is not a Lightning
    Network implementation. It relies upon trust upon a server due to the
    malleability problem, as mentioned in the article:
      
    &gt; Thunder cant work with anyone with a bitcoin wallet just yet as the
    &gt; bitcoin core development team needs to release segregated witness and
    &gt; CHECKSEQUENCEVERIFY features.
      
    In the future, Blockchain's Thunder software may become a LN 
    implementation, but it is not a Lightning Network implementation at the
    present time due to the need for trust upon a 3rd party to not lock up funds
    is an inherent aspect to the protocol itself (it's the material
    difference between giving funds to another party). The core aspect of LN 
    as defined in the paper (unlike Thunder in its current state) is that it 
    is decentralized, without custodial trust in 3rd parties with one's
    funds.
      
    We currently have an implementation on 
    
      
    I'd be happy to answer any further questions you may have.
      
    -- 
    Joseph Poon
("server" meaning a trusted entity, might be a bit of a misnomer upon further reflection, replaced with "trusted node" in a correction email)
EDIT: Thanks to Romain for super-fast corrections (lightning-like).
@_date: 2015-10-10 19:30:46
@_date: 2015-10-04 22:59:36
Here's an implementation: 
The claims can persist even if it doesn't exist, though. You can solve problems before it is implemented, but now we're getting into semantics...
@_date: 2015-10-10 19:13:01
They were used to show proof that the image had indeed been made with 100% Freedom. :)
^(reference:  )
@_date: 2015-10-04 20:52:28
Yes, I agree there should be a fix for malleability and it is a design flaw in Bitcoin. As the co-author of Lightning Network, I've been paying attention to the possible fixes for a while.
There are some fixes in the pipeline that should mitigate malleability for cooperative multisig (BIP 62). This doesn't help if you don't have control of all the keys, though, which defeats a lot of the fun in multisig. BIP 62 is nice because it reduces confusion and the potential prolem space so it should go in. 
With adversarial multisig where you cannot instruct all keys to resign, proposed OP_CHECKLOCKTIMEVERIFY and using the nSequence in various ways are in the pipeline. They should mitigate some aspects of malleability for refund but are a partial malleability solution, as the resolution to malleability is a refund which requires restarting the transactions entirely later. They are nice to have for various reasons and should absolutely go in Bitcoin, as they enable a lot of cool things. The threat for adversarial mutlisig malleability is that your funds can be locked up forever (and be put into a hostage situation by the other party, e.g. "I'll release your funds and give you a partial refund if I steal some of your money"), which OP_CLTV and nSequence fixes helps resolve as at least you can program it to give a refund after a set period of time).
To truly solve malleability, it requires something like a new SIGHASH flag, which could be implemented as a new P2SH state. Me and have suggested that as an ideal solution. (along with the previously proposed OP_CLTV and relative locktime soft-forks). This allows you to spend from any transaction where your signature fits. However, this needs to be a non-default option which needs to be turned on (which is why it should be a SIGHASH flag), as it [breaks address reuse]( so only adversarial multisig situations and bitcoin company wallets should use it (i.e. not everyday bitcoin transactions from end-user wallets). For Lightning in particular, this helps with easing the amount of computation necessary (especially for small devices) and outsourcing checking the channel for you for offline clients.
The proposed changes are fairly easy in the sense that they are very few lines of code. We're seeing a time where adversarial multisig is becoming used in bitcoin and enabling interesting smart contract applications, which should help with bitcoin's use cases and value. **You're not seeing bitcoin being used for these multiparty smart contract systems today because malleability is a problem.**
@_date: 2015-10-07 20:55:57
Thanks for your concern on my behalf!
The whitepaper specifically mentions all those use cases.
@_date: 2016-05-16 15:37:31
We are building it to use segwit and have the segwit code merged in order for a true malleability fix, otherwise there's too much trust.
Our software made the first multisig on segwit ;)
@_date: 2015-10-03 00:03:51
I'm up for answering questions and stuff, sounds good!
@_date: 2015-10-07 23:29:57
I definitely didn't mean it that way, sorry.
@_date: 2016-05-16 21:03:03
I have no problem with it being called something else, as the "with modification" means it's trusting others' not to screw you over and steal/lockup your funds.
@_date: 2016-05-16 20:34:18
@_date: 2015-10-03 00:00:24


If a miner has a 51% attack on the network, LN is at least as screwed as everything else.


LN transactions are real bitcoin transactions, so you still need to create on-chain transactions to enter into and exit the channel. However, I see 100% use as unlikely, as large transactions should be made on-chain anyway, as LN is not well suited for that. There will still be bitcoin transactions, it's just you'll be able to make many transactions and net-settle your micropayments.


Yes, you can do whatever route you want (even dummy routes/transactions going in a circle back to yourself), selection will have the option of being fully source routed. There may be groups of nodes which do frequent transactions with each other, they will of course route directly amongst each other by default. Of course, more exotic routes may require custom software, the other nodes will be able to follow the route requests, though.
@_date: 2016-07-07 19:00:59
Bitfury has done fantastic work in research on decentralized routing on Lightning. It's really awesome whenever stakeholders within the bitcoin community participate in the development process and do research!
I think the applications can go beyond just LN. It's possible to use this technology to build local mesh-networks; paying for bandwidth using bitcoin on your phone, etc.
@_date: 2016-07-05 18:47:07
Centralized "hub-and-spoke" payment channels have substantially greater risk of failure without soft-forks addressing this.
@_date: 2016-07-05 18:46:16
This is a risk with unidirectional channels. Alice can pay Bob and if Bob can't get their tx in time, then Alice can broadcast a tx where she gets all her money back. It's just nobody talked about it with unidirectional channels (just like very very few really noticed the *very real* malleability risks when channels were originally proposed).
@_date: 2016-07-05 19:23:29
Larger channels are at greater risk because you can move all the funds off the channel. E.g. you have 1000 channels of 1 BTC total capacity. All had prior state of 1BTC nostro and 1BTC vostro (technically not the correct terminology because you're not holding their money but I'm repurposing it because it's easier to understand for me at least). Because you can move funds around, you only ever had 1BTC (you just moved around that 1BTC between the 1000 channels). Attacker then tries to close out 1000 channels at once with the prior state where they have a full 1BTC giving 95% of fees to miners (it's timelocked though so the miners aren't guaranteed the money now).
There's a clean solution involving flow control so you can do large amounts, but for now while the code is in testing and the soft-forks fixing this aren't in yet, treat it like paper money/change in your wallet.
@_date: 2016-07-03 19:48:12
I LIKE TURTLES
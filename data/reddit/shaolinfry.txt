@_author: shaolinfry
@_date: 2017-03-23 06:10:44
it is
@_date: 2017-03-27 11:08:40
Segwit is going to activate.
@_date: 2017-03-29 13:37:24
That is fine too. The entire network almost, will enforce segwit. If any miner deliberately mined segwit invalid blocks after activation, the block will be rejected by the majority of nodes.
@_date: 2017-03-27 15:00:58
MASF seems unworkable now miners have realized it can be used to veto node activation.
@_date: 2017-03-31 02:59:20
Great post​ OP! Thank you for putting in the time for this tutorial!
@_date: 2017-03-16 23:03:54
With the exception.of censorship soft forks, a sf is always enforced by nodes anyway. MASF has an inherent veto.
@_date: 2017-03-16 19:47:58
The third proposal requires enough of the economic majority to stand up against the miners and say, "do your job, or you wont get paid". The economy has already upgraded to segwit, something like 80% of nodes. We need exchanges in particular to run the code. Then everything else is gravy.
There are two scenarios after that:
(a). 51% of the hash decides a pay-check is preferable, and segwit activates safely. Miners who don't participate will be forced to shutdown or find something else profitable to mine.
(b). 51% of the hashrate decide opt out (and not get paid) is preferable - in this scenario nodes that have not upgraded by Oct 1st will follow the stubborn miners chain. Nodes that upgrade will follow the minority hash.
Miners follow the economy (miners will mine whatever is most profitable - hashrate follows profitability). Game theory, and incentives suggest (a) being preferable.
The generalized proposals are for new deployments and require most economic nodes (exchanges, wallets and users transacting real value) to upgrade.
@_date: 2017-03-27 00:02:00
I can confirm the code was buggy, parenthesis error (now corrected and also better formatted/commented). In any case, i would like to ask people to wait a little longer for others to review the implementation and think about adversarial cases.
In particular it might be necessary to bring the start date forward a little just in case some hashrate moves onto different things and makes the confirmation times slower. In that case, it might be better to require signalling from August 1 or September 1.
@_date: 2017-03-26 23:54:54
Not at the moment, let's wait for more review and feedback.
@_date: 2017-03-16 20:58:16


Cashing in with whom? If exchanges run the BIP, the mined coins are worthless.
Regarding BU, from what I have seen, exchanges may support it, but as a separate coin.
@_date: 2017-03-25 08:06:24
It is great to see the enthusiasm. I would like to point out I am not the author of the compiled binaries in the OP and I dont recommend running untrusted binaries. At this stage, you should compile code yourself. Additionally, the BIP is a draft and it wouldnt harm to wait for a bit more code review.
I also think if people want to use a useragent to use BIP148 rather than UASF.
@_date: 2017-03-16 20:09:14


What we know is that nodes have consistently upgraded to segwit capability. While absolute node count is meaningless, the upgrade trend from version to version seems significant, see [this post](
Also it is quite clear a substantial portion of the ecosystem industry has put in time and resources into segwit adoption, in the form of upgrading wallet code, updating libraries and various other integration work that requires significant time and money. Further more, others have built systems that rely on segwit, having put significant engineering resources into developing systems that require segwit - such as several lightning network system. This is much more significant social proof than running a node.
So I would seriously question that there is any significant opposition to segwit at all. There is a very loud minority, lead by the worlds largest ASIC manufacturer that does not seem to remotely represent the industry.
But, I cannot answer your question of how many support _this approach_. What I can say is that until there is a reasonably sound concrete proposal, the industry will not be able to take a position on ending the Bitmain filibuster.
@_date: 2017-03-26 11:20:41
Thanks, I'll take a look at that.
I might point out, the normal process for consensus changes it to float the idea, socialize it (development list, and various other places), write specification, write reference code. If it gains some traction, then make a serious proposal like a pull request and get peer review testing.
Clearly the idea is gaining traction, and that means the code is gaining further scrutiny.
@_date: 2017-03-29 13:35:49
They don't have to upgrade, but they should.
@_date: 2017-03-29 06:50:19
Yes, thank you. I accept your points. Many people prefer to give me feedback privately. I did summarize the reasoning in the github.com/UASF project, and I realize now that doesnt have much visibility.
@_date: 2017-03-29 06:18:49
The age old problem with nodes Sybil, so any visible node support can always be faked.
@_date: 2017-03-29 17:45:00
It doesnt have anything to do with node count
@_date: 2017-03-16 21:01:01
Much less risk. Miners would have to specifically cause a hard fork and allocate their resources permanently make it persist hoping the economy followed. Incentives matter.
@_date: 2017-03-17 07:15:21
yes, they are different proposals. The third is specifically to handle the existing segwit deployment.
@_date: 2017-03-29 06:08:24
BIP148 only needs really need exchanges initially, as they give it teeth. But also, if 0.13.1+ already got 80% upgrade in 5 months, there is no reason 6 months isnt enough. 
And remember, the purpose of BIP148 is to cause activation of existing 0.13.1+ nodes.
I am happy to make a new deployment of Segwit, but it seems like that would need a year.
@_date: 2017-03-13 01:39:26
That is the purpose of bip-uaversionbits-strong 
@_date: 2017-03-29 06:17:17
BIP148 isnt a typical UASF though, it is forcing miner activation. A pure UASF won't care about miners at all. BIP148 is designed to build on the already huge majority deployment of existing 0.13.1+ nodes.
@_date: 2017-03-25 03:15:47
There is no flag day, miners are required to signal from Oct 1st to activate as normal.
@_date: 2017-03-30 00:14:40
*kung fu chop*
@_date: 2017-03-29 13:37:34
Not a sybil.
@_date: 2017-03-17 07:29:06
most work valid..length does not matter.
@_date: 2017-03-25 08:08:35
I would like some exchanges to state they would run it in principal, then I can approach thr next stages once it is clear the idea has legs.
@_date: 2017-03-30 00:26:08
With centralized hashpower, how can a few pools vs thousands of nodes, businesses, software projects, infrastructure etc be considered "clean consensus"?  Miners get paid to do a job. Developers came up with a shortcut for soft fork activation, but it is inherently problematic because it relies on trust. UESF is naturally how soft forks are enforced, so UASF is naturally how it should trigger too.
@_date: 2017-03-31 03:04:19
If you fancy it now and again, do some more walkthroughs of functions like ContextualCheckBlock/Header, ConnectBlock etc. I think normal users would benefit from understanding how consensus logic works around block validity. There are all sorts of interesting function.
@_date: 2017-03-16 21:01:26
@_date: 2017-03-29 13:43:57
It will take a bit of time for exchanges etc to think about it, so I suspect the timing is about right.
@_date: 2017-03-29 05:56:07
You are wrong. Nodes will ignore blocks that don't follow consensus, keeping miners honest. That is the point.
@_date: 2017-03-16 20:56:16
Just a couple of points: 
Even soft forks should be uncontroversial before they are released into the wild. Regardless of activation. MASFs are easier if miners are on board but should never be deployed if they are controversial. Same for UASFs.
Repository owners do not control the adoption process. I am fairly confident if even BItcoin Core with all the trust they enjoy, released a controversial proposal, the ecosystem would just not upgrade. The point of soft forks in general is they are optional, unlike hard forks which will throw you off the network unless you switch to the new rules.
BIP16/P2SH was activated using a flag day - that is soft fork activation by flag day, aka UASF.
@_date: 2017-03-29 06:04:27
Concerns were expressed that if a lot of hashrate left bitcoin for something else, BIP9, because it is timebased, may not have enough time to hit threshold before the segwit timeout was reached. This change allows for 85% of the hashrate to have left. Obviously I think extreme is unlikely, but it at least removes one scenario.
@_date: 2017-03-27 15:00:12
UASF is not controversial, it was used to activate P2SH, and all soft forks are enforced by nodes. MASF is just a shortcut that places trust in the miners to protect nodes before they upgrade.
@_date: 2017-03-16 20:21:26
It is still a soft fork, and orphaning non signalling miners is not new - it was done for several BIPs in the past where post activation non signalling miners are rejected. It only becomes a hard fork if &gt;51% miners chose to leave Bitcoin for something else. Incentives matter.
@_date: 2017-03-26 23:57:17
I would prefer if people do not distribute BIP148 implementation until it's more concrete. There are still some considerations to be made. For example, the start date may need to be brought forward.
@_date: 2017-03-26 23:54:26
I can confirm, that is not my repository. Better to wait a little more as it gets more review.
@_date: 2017-03-16 20:00:35
The sybil problem.
@_date: 2017-03-19 21:23:06
why would miners ever consent? that makes no sense
@_date: 2017-03-19 22:20:18
so if miner's decided to soft fork censor a competing pool, or soft fork blacklist coins, users would be prohibited from a POW change? the wiki is wrong.
@_date: 2017-04-16 18:37:02
The BIP9 warning system will already kick in when LOCKED_IN state reached. I think gratuitous orphaning will be controversial and that is the only other use of the extra state that I can see. Could always add an extension later if it became necessary.
@_date: 2017-04-01 04:25:33
Although they fixed the technical problems.They didn't have to make a political compromise which overrode technical soundness.
@_date: 2017-04-01 11:35:41
BIP148 is a one off scenario. My intention is to offer a general solution for useractivated soft forks for the future.
@_date: 2017-04-04 07:39:06
BIP148 is a soft fork to force a MASF. It is unique to this situation so the current segwit deployment can happen sooner. So BIP148 is a UASF, just not a direct UASF for Segwit.
@_date: 2017-04-16 05:20:16
I prefer bip-uaversionbits 
@_date: 2017-04-08 23:17:13
I very much appreciate your comments and I am glad to hear your views.
@_date: 2017-04-08 23:26:00
If there isnt support for BIP148, you cannot run the BIP.
@_date: 2017-04-08 23:18:56
I think it is not unreasonable to ask people not to run consensus changing code until there is reasonable consensus around the topic.
@_date: 2017-04-08 07:21:55
No, as author or BIP148, my position is the community must go first, in vast numbers. Once there is overwhelming support, BIP148 naturally becomes safer the more economic majority get behind it. ACT NOW if you want it. Dont wait for Core to endorse it, because they wont and should not make the decision. Even commenting on it will skew opinion. You go first and if there is wide support I will make a pull request. If there is not I will abandon the BIP.
@_date: 2017-04-06 12:41:31
Better a standard flagday soft fork like P2SH with a decent lead time (e.g. took 6 months for 80% of the network to upgrade to segwit). Ultimately miner activation is only useful for shortcut, fast activation where miners can protect nodes before a lot have upgraded (but this relies of trust that miners are validating, which they arent, also so it's not ideal).
Just to be clear, BIP148 while a UASF, is not what a typical UASF would look like. BIP148 has gratuitous orphaning to force miners to signal to force the current deployment to activate. Since 80% of the network has upgraded, it would seem unreasonable that a couple of people are blocking something that is widely anticipated.
@_date: 2017-04-01 04:21:38
How do you propose to handle Chinese pool veto for Confidential Transactions when they fear government ire for increasing fungibility?
@_date: 2017-04-07 20:56:04
BIP148 relies on economic majority incentives which you cant simulate on testnet. On testnet, miners can simply not comply because there is no incentive to change. On mainnet, their blocks cease to be worth anything at huge operational costs.
@_date: 2017-04-26 04:59:37
I still do not endorse running this code yet until and unless there is a larger show of support from exchanges etc.
I have some more tame, but longer rollout alternatives brewing
BIP8 fixes the veto loophole in BIP9
 so activation is guaranteed because the lockin will occur at the timeout if not already lockedin/activated. This still allows miners to activate earlier under MASF.
Then there is a bip-segwit-uasf  which is designed to activate segwit as a new deployment using BIP8. there is no block orphaning with this. We can deploy in a couple of months, signalling wont start until after BIP9 segwit expires, and then the timeout would be July 4th 2018, Bitcoin's Independence Day from the mining cartel. This gives over a year for the economy to upgrade. I think we can deploy much faster than that, but Bitcoin has higher standards.
@_date: 2017-04-08 07:22:48
All soft forks should be UASFs from now on, using uaversionbits.
@_date: 2017-04-01 04:28:20
Seems to me the author is glossing over the requirement of all the users agreeing, and the problem of how to measure it.
@_date: 2017-04-08 23:25:12
There needs to be clear support from exchanges especially, and clear support from users. I think you know what I mean.
@_date: 2017-04-26 04:59:32
I still do not endorse running this code yet until and unless there is a larger show of support from exchanges etc.
I have some more tame, but longer rollout alternatives brewing
BIP8 fixes the veto loophole in BIP9
Then there is a bip-segwit-uasf  which is designed to activate segwit as a new deployment using BIP8. there is no block orphaning with this. We can deploy in a couple of months, signalling wont start until after BIP9 segwit expires, and then the timeout would be July 4th 2018, Bitcoin's Independence Day from the mining cartel. This gives over a year for the economy to upgrade. I think we can deploy much faster than that, but Bitcoin has higher standards.
@_date: 2017-04-08 08:34:18
If there is support, there will be gitian binaries with multiple trusted people signing. Go first, now is not the time for binaries.
@_date: 2017-04-08 08:34:42
see 
@_date: 2017-04-08 23:27:03
Someone made a website, uasf.co which mentions the uacomments instructions.  
edit: url typo  
@_date: 2017-04-04 10:21:12
Someone gave some interesting feedback on BIP148 
Basically that the signalling should only be mandatory until LOCKED_IN. Would you be able to offer an opinion as well?
@_date: 2017-04-02 23:10:51
I think the future is actually a combination BIP9 with eventual activation (UASF). This means, miners can activate early by MASF, and if not, the ecosystem will have upgraded sufficiently in a year and the feature will activate anyway (UASF). Best of both worlds. I have written a few iterations of these, and will move one to BIP status at some point soon although I have some further refinements to make yet.
@_date: 2017-04-16 15:02:45
Ah well spotted, the diagram is wrong. I'll fix that up.
Should read `(lockinontimeout == true) AND ((MTP &gt;= timeout) OR (threshold reached))`   
EDIT: updated diagram in BIP.
@_date: 2017-04-07 22:53:03
If exchanges run BIP148, non complying blocks will be worthless unless someone wants to trade them - which would be impossible to do safely because of asymmetric reorg risk. It would be a huge gamble to switch to trying to make their new altcoin valuable meanwhile burning electricity. In short, miners have every incentive to follow the economic majority - they are service providers, not rule makers.
If there is no economic support, users will have to revert before 1 August. I strongly do not advising running any BIP148 code until and unless there is a strong show of hands from the economy. In the meantime, if you like, you can use uacomments with the understanding that node code is irrelevant and unreliable.
@_date: 2017-04-08 08:33:06
Write to exchanges and them the agree to running it at least in principal. Once there are enough big names, you can ask them for a more firm stance.
Engage them directly, on social media and in person if you have the contacts. BIP148 needs economic support to pull off.
Given ASICgate, people seem a lot more motivated to reset the balance now. Either users act, or evil monopolistic practices will prevail. Getting segwit activated will be a large step towards making covert asicboost impractical... a further step could be to require a witness commitment. Incentives align here. Not only does everyone want segwit, it can help remove inequality between miners and protect their economic incentives.
@_date: 2017-04-04 23:06:57
UASFs are a flag day. BIP148 a flagday UASF that changes the rules to will then cause the existing MASF segwit to activate. 
@_date: 2017-05-08 14:57:30


one with very deep pockets apparently!
@_date: 2017-05-09 05:20:51
You need to look more holistically. Bitcoin is built on incentives, and breaking consensus is far from economically rational.
@_date: 2017-05-08 14:26:42
If that is what you believe in strongly, lobby for BIP148 which will give Bitcoin segwit by September-ish.
@_date: 2017-05-08 19:06:57
You are welcome.
@_date: 2017-05-08 15:59:53
To be clear, BIP148 simply causes BIP141 to activate which doubles the blocksize.
@_date: 2017-05-08 14:30:11
Of course, node counting is flawed, but it is not useless. Absolute node count is disinteresting, but the transition of advertized node version is very interesting to me. That shows people upgrading from one version to the next over time, years, that's less likely to be faked and shows general trends. You can see clearly from this chart  (taken from  Let's look at trends, not absolute numbers.
@_date: 2017-05-08 14:58:28
We chose ltc1 for the litecoin version.
@_date: 2017-05-08 19:06:48
Miners that dont want to mine segwit transactions would have to run border nodes, or they would be at risk of a split but only if a malicious miner deliberately wasted his hash power to mine a segwit invalid block. This cant happen by accident, or by someone broadcasting a segwit invalid transaction. Those who want to opt out, just run border nodes, or upgrade but dont use/mine the new feature. Once the economy is enforcing, there's no incentive for miners to go rogue - it's like that with P2SH for example - that's why no miners even try to steal P2SH outputs.
@_date: 2017-05-08 14:17:51
I think regardless of whether the blockers try to avoid a UASF precedent or not, all soft forks will be by BIP8 in the future. The Veto bug is out of the bag and we risk a small minority holding the entire community hostage every time otherwise. I believe soft forks are never deployed without wide consensus anyway. That is why BIP9 was not supposed to be a vote, rather a safety coordination method. The expectation was for activation to be triggered. We should never ever deploy consensus code without wide consensus. I believe Bitcoin Core has always taken that very seriously. Either a sf is utterly boring an unexciting (making it uncontroversial), or it's something people are chomping at the bit for, like segwit. Remember, the blockade on segwit is only a political weapon. Segwit fixes stuff everyone agrees needs to be fixed and the capacity increase is a nice side effect, as are the cool things you can do, once malleability is fixed.
@_date: 2017-05-08 14:10:23
Mission accomplished then. I think there will also be a strong effort by the usual suspects to demand that future soft forks are deployed by BIP9 again. They [tried that on Litecoin]( I believe that would be a very big mistake, and that future soft forks should be deployed with BIP8 and a 1 year timeout. I believe if that will be helpful to everyone including miners. It will remove political pressure and attention from miners (who is signalling, who isnt and why). In the future I guarantee there will be soft forks which miners really might not be able to support for legal reasons, imposed secretly by governments under gag order. BIP8 will give those pools and miners plausible deniability because they wont be able to exercise veto.
[BIP8]( has all the wonderful benefits of BIP9, without the problem of veto. I strongly encourage the community to consider this.
@_date: 2017-05-08 14:25:39
2MB blocks will definitely knock more people off the network.
@_date: 2017-05-08 13:58:29
Yes I know. I am sorry about that, but I am working within the consensus building process to design proposals which stand a chance of gaining adoption. This is particularly important to me in light of the very hostile coup d'état style BIP's and non-BIPs which have been foisted upon the Bitcoin community.
I created BIP148 an option for something faster too see if that's what people wanted. It seems there is reasonable support for it, but as yet, not enough. I spent a lot of time receiving and considering feedback from BIP148 to create what I believe addresses the various concerns that were expressed. I do not believe BIP148 is a bad BIP, but it is something that requires resolve from the community to pull off. It's already had good effects on Litecoin and Vertcoin, where in both cases, it neutralized hostile activity. If you are interested in the details, I encourage you to read the litecoin story [here]( (please read if you havent, it's a fascinating account). For Vertcoin, it scared off someone who was paying 15BTC a day renting hash to block segwit activation. BIP148 has definitely had positive effects, but it must live or die on it's own merits.
I believe that BIP149 has a strong chance of being acceptable if segwit does not activate by November. I hope miners will change their mind before then, and on the positive side, the extra delay sends a message that we are not willing to compromize safety in desperation. Segwit not activating isn't an emergency condition or failure mode where a fast and potentially disruptive s solution would outweight not deploying. It will also put a lot more pressure on the few individuals blocking segwit for everyone. On the negative side, it creates a vacuum where more silliness can enter - although I think the entire ecosystem is fedup at this point and will not entertain any more hostile consensus rule change attempts. Think of it like a disease. You can get reinfected a few times, but eventually your body builds immunity and that's that.
edit: spelling
@_date: 2017-05-09 05:11:41
The same reason why 51% of the hashrate isnt doing the same thing and stealing P2SH outputs. Nodes will be enforcing the new rules. Miners dont get to decide the rules, and if they want to mine an invalid chain, they have always been able to do so.
@_date: 2017-05-08 14:02:02
It is an assumption based on some pretty hard facts. In 5 months, according to luke's node crawler, 70% of nodes upgraded to NODE_WITNESS capability. The community wants segwit, that much is obvious, and with another 7-8 months of waiting, I think we're going to be at fever pitch. I believe we'll see the fasted upgrade ever in the history of Bitcoin. 
@_date: 2017-05-08 14:56:00
Thanks, I'll update it.
@_date: 2017-05-08 14:23:42
Remember, BIP149 is build on BIP8, which is either early MASF or later UASF. This is the best of both worlds imo and _increases_ safety while fixing the veto bug as well as removing political pressure and attention from pools and miners shoulders. BIP8 is better (of course I am biased).
@_date: 2017-05-09 05:54:05
It is breaking consensus. Majority hashrate does not define validity. If the economy switches to the UASF client but the hashrate does not, the hashrate is out of consensus and will lose money. Sure, non-upgraded nodes will follow the wrong chain, but they too will be out of consensus with the economy.
@_date: 2017-05-09 01:23:56
Fixed, thanks.
@_date: 2017-05-08 14:27:01
Thanks you for this, I have added a link to the OP. Also node you can add multiple uacomments on separate lines, so you could support both BIP148 and BIP149 for example.
bitcoin.conf containing
    uacomment=BIP8
    uacomment=UASF-SegWit-BIP149
    uacomment=UASF-SegWit-BIP148
or change your command line/shortcut to add multiple -uacomments e.g.
` -uacomment=BIP8 -uacomment=UASF-SegWit-BIP149 -uacomment=UASF-SegWit-BIP148`
@_date: 2017-05-09 01:16:21
You confused about what segwit does in that respect, but I dont think this is the right thread for that discussion. Maybe open a new OP.
@_date: 2017-05-08 18:17:42
It's all to do with safety. MASF can be used as a temporary stopgap to activate rules much faster because the hashrate (assuming they are honest), protect the nodes from invalid blocks.  However, all soft forks are user enforced, so eventually, it doesnt matter what the hashrate is doing, since nodes upgrade and validate the new rules (nodes decide validity not miners).
So you cannot have a fast UASF because upgrade deployment takes time. If you are waiting for UASF date, you might as well allow MASF for early activation.
But all that aside, you're missing the bigger message of BIP8, which is not against miners at all. Miners are being put in an impossible position right now because BIP9 like it or not, is seen as a vote and a veto. I've explained it very clearly in my ML post 
@_date: 2017-05-08 15:56:31
The question is a bit mixed up - For the near future, I think it will take a lot for businesses to gain trust of newer entrants, especially given the huge incompetence of BU, Classic and XT. Industries dont switch software easily, that will take considerable time, out of scope for BIP149 timeframe.
Overall, soft forks which do not have wide consensus should not be deployed.
But the crux of soft forks is they are optional e.g. a non-BI149 node is the same as a non-segwit node. No big deal. If a soft fork is deployed you should always validate even if it's just with a border node to ensure you are not vulnerable to invalid blocks. Miners should always upgrade/border node for any soft fork, anyway.
@_author: bradgrissom
@_date: 2014-12-03 18:42:30
I certainly understand where you're coming from.  Overall I think $119 for a Trezor is a steal considering what you get.  Although I must admit I haven't purchased one yet!
@_date: 2014-12-03 17:39:44
Hello Alena, Stick and Slush, I've been very interested in the technology behind Trezor and I've been researching your platform (hardware/software) for a while.  I have a bit of a technical discussion I'd like to start and this Reddit AMA I believe is a good place to have it, so that others can give their input.  I wanted to mention I am an embedded software engineer (professionally for a living) although my crypto/bitcoin implementation understanding is my weakness (hence some of the questions below).
Technical discussion topic overview:
- Choice of hardware
- The $10 Trezor dev board?
- Hacking the Trezor
- Moving beyond Trezor, offline transactions?
- Choice of hardware
It seems to me you chose the STM32 F205 because of A) its USB OTG support and B) because of the Random Number Generator (RNG) support.  You've also mentioned that you used opencm3 because you didn't want to pay for proprietary licensing.  Why not use one of the Atmel CryptoAuthentication chips for the RNG instead?  This would have the benefit of having more secure storage of private keys with a purpose-built chip as well as hardware accelerated crypto support (not sure how helpful that would be, maybe faster signing?).  You can get those Atmel chips as low as $0.06 each in QTY=1000 which is amazingly cheap!  This would allow you to potentially use a cheaper main microcontroller and bring down the costs of the Trezor significantly.
- The $10 Trezor dev board
The STM32 lines are well known for their "Nucleo" dev board which only cost $10.  From what I've seen on DigiKey, the cost of the STM32 F205 microcontrollers themselves at QTY=1000 is about $4.45.  This tells me that adding the cost of the other components (Nucleo boards also include STM32 F103 chips for the ST-LINK!) that ST Micro is taking a huge loss in order to subsidize the cost of these dev boards to get them in the hands of developers hoping that they will incorporate them into their design.  This represents a huge opportunity for Bitcoin geeks because...
The STM32F4[01/11] Nucleo boards are only $10 and include the same RNG support as on your F205.  The Nucleo boards are great because they support re-enumeration of a USB serial port on the ST-LINK side of the board.  This allows your MCU application to speak over a serial port to your PC.  This means you could take a stock Nucleo board, wire up your OTG USB port (as per your schematic) on pins PA11 and PA12, add a bit of library support to re-route the OLED print statements to the USB serial connection, and you'd have a $10 Trezor dev board!  Am I missing anything?  The only gotcha that I have seen is that ST Micro does not allow you to re-sell the Nucleo boards (likely because they are greatly subsidizing them).  I think this would be a great option for savy crypto geeks to get their hands on Trezor functionality.  If the USB serial port bothers you for security (you could sniff that port an see what the "Trezor OLED screen" sees), you could add a Arduino-compatible OLED screen from Adafruit for $19.  Still a cheap overall option for savy crypto geeks.
- Hacking the Trezor
This is where my understanding of the Trezor crypto details is a bit fuzzy:  Is the private key held in memory some place on the STM32 chip?  If so, what is to keep me from opening up the Trezor, soldering on my 4 wires to connect the ST-LINK/V2, firing up the free version of IAR EWARM (taking advantage of their hardware debugger support), and dumping the memory from the STM32 chip to recover the secret private key?
- Moving beyond Trezor, offline transactions?
The Trezor has really captured my imagination.  Is it possible to make a similar device that only has NFC communication that would allow for card-2-card offline transactions?  I know the first thing you're going to say is that you couldn't trust such a device because it would allow people to double-spend (Backup your private key elsewhere, send your bitcoin to another address, and then continue to fool your friend into accepting a NFC peer-2-peer offline transaction that will be invalid when he reconciles the card).  But my idea is a bit different.  What if the card A) Didn't allow you to access the private key (it is generated, stored, and has no ability to retrieve the key)  and B) is Tamper resistant.  This would be a whole new paradigm for small transactions where you transfer BTC from card to card offline and it is secure because nobody (using that same card from a "trusted manufacturer") has access to the private keys and hence can't double-spend.  The private key would be safe from the manufacturer too, just like Trezor because it would be generated when the user first opens the package, seeded from random button pushes on the card.
My weakness is in understanding the bitcoin wallet details.  It seems to me the card could have knowledge of UTXOs and create signed, valid transactions that would be reconciled when either party went home and reconciled their card against their NFC phone or NFC card-enabled ATM for example.
What do you think of this idea?
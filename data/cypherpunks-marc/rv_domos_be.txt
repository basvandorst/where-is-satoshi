
@_date: 2006-09-25 07:44:24
@_author: "Reinhart Viane" 
@_subject: RE: error 
Hey again Alex,
I have done a shutdown -r now Friday.
It does not seem to resolve the issue. Could this mean the tape drive is
-----Oorspronkelijk bericht-----
Van: owner-amanda-users [mailto:owner-amanda-users
Namens Alexander Jolk
Verzonden: vrijdag 22 september 2006 15:31
Aan: Reinhart Viane
Onderwerp: Re: error
Please check whether your tape drive works with standard utilities (tar, dd, mt).  Something seems to be seriously hosed.  Have you already hard-reset everything, by power-cycling?

@_date: 2006-09-22 14:08:02
@_author: "Reinhart Viane" 
@_subject: RE: error 
[root /]# tar -tf /dev/ht0
tar: /dev/ht0: Cannot read: Invoer/uitvoer fout
tar: Begin van `tape', ik stop nu
tar: Error is not recoverable: exiting now
tar: /dev/ht0: Cannot read: Input/output error
tar: Start of `tape', stopping now
tar: Error is not recoverable: exiting now
I will try the hard reboot 2night

@_date: 2006-09-22 13:26:23
@_author: "Reinhart Viane" 
@_subject: RE: error 
In addition: the syslog (/var/log/messages)
--Executing yesterdays tape backup--
Sep 21 20:00:00 daeserver su(pam_unix)[7303]: session opened for user amanda
by (uid=0)
Sep 21 20:14:19 daeserver kernel: ide-tape: ht0: I/O error, pc =  a, key =
3, asc = 52, ascq =  0
Sep 21 20:14:20 daeserver last message repeated 79 times
Sep 21 20:14:20 daeserver kernel: ide-tape: ht0: I/O error, pc = 10, key =
3, asc = 52, ascq =  0
Sep 21 20:14:20 daeserver kernel: ide-tape: Couldn't write a filemark
Sep 21 20:14:20 daeserver kernel: ide-tape: ht0: I/O error, pc = 10, key =
3, asc = 52, ascq =  0
Sep 21 20:14:20 daeserver kernel: ide-tape: ht0: I/O error, pc = 10, key =
3, asc = 52, ascq =  0
Sep 21 20:21:59 daeserver su(pam_unix)[7303]: session closed for user amanda
--Reading the settings for todays tape backup--
Sep 22 09:54:08 daeserver su(pam_unix)[9106]: session opened for user amanda
by root(uid=0)
Sep 22 09:54:24 daeserver su(pam_unix)[9131]: session opened for user root
by root(uid=33)
Sep 22 09:54:34 daeserver su(pam_unix)[9167]: session opened for user amanda
by root(uid=0)
Sep 22 09:54:34 daeserver su(pam_unix)[9167]: session closed for user amanda
Sep 22 09:54:42 daeserver su(pam_unix)[9191]: session opened for user amanda
by root(uid=0)
Sep 22 09:54:42 daeserver su(pam_unix)[9191]: session closed for user amanda
Sep 22 10:00:01 daeserver su(pam_unix)[9244]: session opened for user amanda
by (uid=0)
Sep 22 10:00:22 daeserver su(pam_unix)[9244]: session closed for user amanda
Sep 22 10:33:28 daeserver kernel: ide-tape: ht0: I/O error, pc =  8, key =
3, asc = 15, ascq =  2
Sep 22 10:33:29 daeserver last message repeated 163 times
--Executing Amflush of yesterdays backup--
Sep 22 12:15:48 daeserver su(pam_unix)[9995]: session opened for user amanda
by root(uid=0)
Sep 22 12:15:49 daeserver su(pam_unix)[9995]: session closed for user amanda
Sep 22 12:16:52 daeserver su(pam_unix)[10025]: session opened for user
amanda by root(uid=0)
Sep 22 12:16:57 daeserver su(pam_unix)[10025]: session closed for user
Sep 22 12:17:59 daeserver kernel: ide-tape: ht0: I/O error, pc = 10, key =
2, asc =  4, ascq =  1
Sep 22 12:17:59 daeserver kernel: ide-tape: ht0: I/O error, pc = 2b, key =
3, asc = 52, ascq =  0
Sep 22 12:17:59 daeserver kernel: ide-tape: ht0: position_tape failed in
Sep 22 12:17:59 daeserver kernel: ide-tape: ht0: I/O error, pc = 10, key =
3, asc = 52, ascq =  0
Sep 22 12:17:59 daeserver kernel: ide-tape: Couldn't write a filemark
I can access (browse) the directory listed in my amandacache (it's named
What if I just delete this directory and see if it works then? Maybe the
lack of cache is causing the problem.
I've inserted the cleaning disk, it runs and ejects automatically after 15
I've run amflush again, this is what I receive:
The dumps were flushed to tape DATAOND07.
*** A TAPE ERROR OCCURRED: [[writing filemark: Input/output error]].
Some dumps may have been left in the holding disk.
Run amflush again to flush them to tape.
The next tape Amanda expects to use is: DATAOND08.
FAILURE AND STRANGE DUMP SUMMARY:
  daeserver  /data/admin_intern lev 0 FAILED [out of tape]
                          Total       Full      Daily
                        --------   --------   --------
Estimate Time (hrs:min)    0:00
Run Time (hrs:min)         0:01
Dump Time (hrs:min)        0:00       0:00       0:00
Output Size (meg)           0.0        0.0        0.0
Original Size (meg)         0.0        0.0        0.0
Avg Compressed Size (%)     --         --         -- Filesystems Dumped            0          0          0
Avg Dump Rate (k/s)         --         --         -- Tape Time (hrs:min)        0:00       0:00       0:00
Tape Size (meg)             0.0        0.0        0.0
Tape Used (%)               0.0        0.0        0.0
Filesystems Taped             0          0          0
Avg Tp Write Rate (k/s)     --         --         -- USAGE BY TAPE:
  Label           Time      Size      %    Nb
  DATAOND07       0:00       0.0    0.0     0
  driver: WARNING: /var/amanda/cache: 47185920 KB requested, but only
37455780 KB available.
  taper: tape DATAOND07 kb 0 fm 0 writing filemark: Input/output error
DUMP SUMMARY:
                                     DUMPER STATS            TAPER STATS HOSTNAME     DISK        L ORIG-KB OUT-KB COMP% MMM:SS  KB/s MMM:SS  KB/s
-------------------------- --------------------------------- ------------
daeserver    -min_intern 0     N/A      0   --    N/A   N/A   FAILED  ----
daeserver    -ta/daimail   NO FILE TO FLUSH -----------------------------
daeserver    -a/dossiers   NO FILE TO FLUSH -----------------------------
daeserver    /data/home    NO FILE TO FLUSH -----------------------------
daeserver    -a/intranet   NO FILE TO FLUSH -----------------------------
(brought to you by Amanda version 2.4.4p2)

@_date: 2006-09-22 12:23:49
@_author: "Reinhart Viane" 
@_subject: RE: error 
I can access (browse) the directory listed in my amandacache (it's named
What if I just delete this directory and see if it works then? Maybe the
lack of cache is causing the problem.
I've inserted the cleaning disk, it runs and ejects automatically after 15
I've run amflush again, this is what I receive:
The dumps were flushed to tape DATAOND07.
*** A TAPE ERROR OCCURRED: [[writing filemark: Input/output error]].
Some dumps may have been left in the holding disk.
Run amflush again to flush them to tape.
The next tape Amanda expects to use is: DATAOND08.
FAILURE AND STRANGE DUMP SUMMARY:
  daeserver  /data/admin_intern lev 0 FAILED [out of tape]
                          Total       Full      Daily
                        --------   --------   --------
Estimate Time (hrs:min)    0:00
Run Time (hrs:min)         0:01
Dump Time (hrs:min)        0:00       0:00       0:00
Output Size (meg)           0.0        0.0        0.0
Original Size (meg)         0.0        0.0        0.0
Avg Compressed Size (%)     --         --         -- Filesystems Dumped            0          0          0
Avg Dump Rate (k/s)         --         --         -- Tape Time (hrs:min)        0:00       0:00       0:00
Tape Size (meg)             0.0        0.0        0.0
Tape Used (%)               0.0        0.0        0.0
Filesystems Taped             0          0          0
Avg Tp Write Rate (k/s)     --         --         -- USAGE BY TAPE:
  Label           Time      Size      %    Nb
  DATAOND07       0:00       0.0    0.0     0
  driver: WARNING: /var/amanda/cache: 47185920 KB requested, but only
37455780 KB available.
  taper: tape DATAOND07 kb 0 fm 0 writing filemark: Input/output error
DUMP SUMMARY:
                                     DUMPER STATS            TAPER STATS HOSTNAME     DISK        L ORIG-KB OUT-KB COMP% MMM:SS  KB/s MMM:SS  KB/s
-------------------------- --------------------------------- ------------
daeserver    -min_intern 0     N/A      0   --    N/A   N/A   FAILED  ----
daeserver    -ta/daimail   NO FILE TO FLUSH -----------------------------
daeserver    -a/dossiers   NO FILE TO FLUSH -----------------------------
daeserver    /data/home    NO FILE TO FLUSH -----------------------------
daeserver    -a/intranet   NO FILE TO FLUSH -----------------------------
(brought to you by Amanda version 2.4.4p2)
Excuse for this question: but where do I find syslog on linux?
Thx again

@_date: 2006-09-22 10:59:21
@_author: "Reinhart Viane" 
@_subject: RE: error 
The tapes are Sony SDX1-35c 230m which are supposed to be 35Gb/70Gb
(information from internet)
I executed the commands you provided but this command: cat */* > /dev/null
is still running.
I've also made an amverify (see earlier mail) maybe that can help some more.
Thanks for the help allready

@_date: 2006-09-22 10:34:06
@_author: "Reinhart Viane" 
@_subject: RE: error 
In addition I did an amverify DATAOND
This is the report on that:
Tapes:  DATAOND06
Errors found: DATAOND06 (daeserver._data_admin__intern.20060921.0):
amrestore:   0: skipping start of tape: date 20060922 label DATAOND06
amrestore:   1: restoring daeserver._data_admin__intern.20060921.0
gzip: stdin: unexpected end of file
amrestore:   2: reached end of information
64+0 in
64+0 out
DATAOND06 ():
amrestore: WARNING: not at start of tape, file numbers will be offset
amrestore:   0: reached end of information
** No header
0+0 in
0+0 out
DATAOND06 ():
amrestore: WARNING: not at start of tape, file numbers will be offset
amrestore:   0: reached end of information
** No header
0+0 in
0+0 out
DATAOND06 ():
amrestore: WARNING: not at start of tape, file numbers will be offset
amrestore:   0: reached end of information
** No header
0+0 in
0+0 out
DATAOND06 ():
amrestore: WARNING: not at start of tape, file numbers will be offset
amrestore:   0: reached end of information
** No header
0+0 in
0+0 out
DATAOND06 ():
amrestore: WARNING: not at start of tape, file numbers will be offset
amrestore:   0: reached end of information
** No header
0+0 in
0+0 out
amverify DATAOND
vr sep 22 10:17:28 CEST 2006
Using device /dev/nht0
Volume DATAOND06, Date 20060922
** Error detected (daeserver._data_admin__intern.20060921.0)
amrestore:   0: skipping start of tape: date 20060922 label DATAOND06
amrestore:   1: restoring daeserver._data_admin__intern.20060921.0
gzip: stdin: unexpected end of file
amrestore:   2: reached end of information
64+0 in
64+0 out
** Error detected ()
amrestore: WARNING: not at start of tape, file numbers will be offset
amrestore:   0: reached end of information
** No header
0+0 in
0+0 out
** Error detected ()
amrestore: WARNING: not at start of tape, file numbers will be offset
amrestore:   0: reached end of information
** No header
0+0 in
0+0 out
** Error detected ()
amrestore: WARNING: not at start of tape, file numbers will be offset
amrestore:   0: reached end of information
** No header
0+0 in
0+0 out
** Error detected ()
amrestore: WARNING: not at start of tape, file numbers will be offset
amrestore:   0: reached end of information
** No header
0+0 in
0+0 out
** Error detected ()
amrestore: WARNING: not at start of tape, file numbers will be offset
amrestore:   0: reached end of information
** No header
0+0 in
0+0 out
Too many errors.
Since a couple of days i receive this error-report when a tape backup is
made :
These dumps were to tape DATAOND05.
*** A TAPE ERROR OCCURRED: [[writing file: Input/output error]].
Some dumps may have been left in the holding disk.
Run amflush to flush them to tape.
The next tape Amanda expects to use is: DATAOND06.
FAILURE AND STRANGE DUMP SUMMARY:
  xxxxxxxx  /data/daimail lev 1 FAILED [out of tape]
  xxxxxxxx  /data/home lev 2 STRANGE
Now when doing amflush I get this report:
The dumps were flushed to tape DATAOND06.
*** A TAPE ERROR OCCURRED: [[writing file: Input/output error]].
Some dumps may have been left in the holding disk.
Run amflush again to flush them to tape.
The next tape Amanda expects to use is: DATAOND07.
FAILURE AND STRANGE DUMP SUMMARY:
  daeserver  /data/admin_intern lev 0 FAILED [out of tape]
  driver: WARNING: /var/amanda/cache: 47185920 KB requested, but only
37455780 KB available.
  taper: tape DATAOND06 kb 448448 fm 1 writing file: Input/output error
DUMP SUMMARY:
                                     DUMPER STATS            TAPER STATS HOSTNAME     DISK        L ORIG-KB OUT-KB COMP% MMM:SS  KB/s MMM:SS  KB/s
-------------------------- --------------------------------- ------------
xxxxxxxx  -min_intern 0     N/A      0   --    N/A   N/A   FAILED  ----
xxxxxxxx  -ta/daimail   NO FILE TO FLUSH -----------------------------
xxxxxxxx  -a/dossiers   NO FILE TO FLUSH -----------------------------
xxxxxxxx  /data/home    NO FILE TO FLUSH -----------------------------
xxxxxxxx  -a/intranet   NO FILE TO FLUSH -----------------------------
(brought to you by Amanda version 2.4.4p2)

@_date: 2006-09-22 10:22:13
@_author: "Reinhart Viane" 
@_subject: error 
Since a couple of days i receive this error-report when a tape backup is
made :
These dumps were to tape DATAOND05.
*** A TAPE ERROR OCCURRED: [[writing file: Input/output error]].
Some dumps may have been left in the holding disk.
Run amflush to flush them to tape.
The next tape Amanda expects to use is: DATAOND06.
FAILURE AND STRANGE DUMP SUMMARY:
  xxxxxxxx  /data/daimail lev 1 FAILED [out of tape]
  xxxxxxxx  /data/home lev 2 STRANGE
Now when doing amflush I get this report:
The dumps were flushed to tape DATAOND06.
*** A TAPE ERROR OCCURRED: [[writing file: Input/output error]].
Some dumps may have been left in the holding disk.
Run amflush again to flush them to tape.
The next tape Amanda expects to use is: DATAOND07.
FAILURE AND STRANGE DUMP SUMMARY:
  daeserver  /data/admin_intern lev 0 FAILED [out of tape]
  driver: WARNING: /var/amanda/cache: 47185920 KB requested, but only
37455780 KB available.
  taper: tape DATAOND06 kb 448448 fm 1 writing file: Input/output error
DUMP SUMMARY:
                                     DUMPER STATS            TAPER STATS HOSTNAME     DISK        L ORIG-KB OUT-KB COMP% MMM:SS  KB/s MMM:SS  KB/s
-------------------------- --------------------------------- ------------
xxxxxxxx  -min_intern 0     N/A      0   --    N/A   N/A   FAILED  ----
xxxxxxxx  -ta/daimail   NO FILE TO FLUSH -----------------------------
xxxxxxxx  -a/dossiers   NO FILE TO FLUSH -----------------------------
xxxxxxxx  /data/home    NO FILE TO FLUSH -----------------------------
xxxxxxxx  -a/intranet   NO FILE TO FLUSH -----------------------------
(brought to you by Amanda version 2.4.4p2)
I've been searching on the internet but seem unable to find the solution.
Is this possibly due to bad tapes? Do I need to clean my tape drive (and
Is this because the cache aint big enough?
Thx for answering or advice.
Reinhart Viane


@_date: 2013-12-23 21:22:45
@_author: Viktor Dukhovni 
@_subject: Re: Forward secrecy 
If you must-have MITM protection for a particular destination,
configure in smtp_tls_policy_maps a suitable TLS security level
that unconditionally verifies the server, such as:
    - fingerprint
    - secure
    - dane-only					(**)
Or to authenticate all servers opportunistically via DANE TLSA records,
    smtp_tls_security_level = dane		(*)
If mail delivery proceeded anyway, nothing is wrong: Postfix was
not configured to verify the server certificate.  This is the norm,
MX record indirection makes it impossible to verify SMTP servers
without explicit policy entries or help from DNSSEC (hence all
the work to implement DANE support in Postfix 2.11).
If mail delivery did not proceed, then the server certificate did
not contain any of the expected names.

@_date: 2013-12-23 17:30:30
@_author: Viktor Dukhovni 
@_subject: Re: Forward secrecy 
s/reading/skimming/ :-)
They don't *need* tweaking.  However, the "tweaked" settings are
As stated.
        ...
    Postfix >= 2.2 support 1024-bit-prime EDH out of the box, with no
    additional configuration, but you may want to override the default
    prime to be 2048 bits long, and you may want to regenerate your
    primes periodically.
The default non-export prime is 1024 bits.  As explained in the
document, you should consider using a 2048 bit non-export prime.
The best-attacks on prime EDH are "pre-computation" attacks, where
one spends a bunch of time computing a bunch of data about a
particular prime, and is then able to quickly solve the underlying
problem much faster for any input.
Though prime lengths are chosen based such pre-computation attacks
(rule of thumb is that for equivalent security EDH primes should
be about as long as RSA moduli) which are believed to be out of
reach for 2048 bit primes and perhaps still out of reach even for
1024 bit primes, one can make the attacks much less attractive by
frequently generating new primes independently at each site.
The compiled-in default prime in the Postfix source code is perhaps
within reach of the best-funded adversaries, who may have performed
the requisite pre-computation.  Primes you generate on your server,
and use for a short time are unlikely to warrant the extraordinary
cost of the pre-computation attack.
I don't believe that OpenSSL provides default parameters, but
Postfix does.
The more advanced material we put in the document, the more
intimidating it will be for the average reader.  But of course an
empty document is not optimal, so we have to aim for the middle.
There is a range of reader sophistication we can support, it is a
trade-off between readable hands-on knowledge and a more detailed,
but technically demanding presentation of the rationale.

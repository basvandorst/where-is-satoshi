
@_date: 1995-09-15 08:23:21
@_author: "John Hemming CEO MarketNet"  
@_subject: More on ECheques 
Version 0.1 (beta) of WorkHorse has now been put on the ftp site together
with instructions as to how to use it to pay for things with ECheques.
You are welcome to test ECheques on our live floristry service.  To
do this:
1.  Download WorkHorse ftp://193.119.26.70/mktnet/pub/horse.zip
2.  Follow the instructions for generating a key.
       a) Generate Key  System/security/key gen (please use 512 bits)
       b) Specify your user details Alter/my details (put in a bank a/c no)
3.  Don't worry about registering the key (unless you really want the
     flowers and have a BankNet account)
4.  Try
      ordflow   .. or
      ordflow   .. or
      ordflow
5.  Don't fill in credit card details .   Please put a name of Test or
     testing.  Click the button for ECheque (or electronic cheque)
6.  Send the form.
If you can easily trace the conversation it will be interesting.  The
system will automatically go into SSL with 128 bit RC4.  It will generate
a signed instruction and transmit that in the secure session.  If you want
to see how the form works save the html source.  You can set it up
on another server and receive the signed instruction yourself if you
want.  You can use workhorse to check the signature.
(The first live ECheque was issued on Wednesday).

@_date: 1995-09-16 04:44:57
@_author: "John Hemming CEO MarketNet"  
@_subject: More on ECheques 
1. I was not suggesting that you put your real bank account number
    in the program.  A test number is perfectly adequate.
2. In the UK people advertise their Bank Account numbers so that people
    can pay them.
3. If you do use your real bank account number,  I will not pay you
    anything nonetheless.

@_date: 1996-02-15 22:21:15
@_author: "John Hemming - CEO MarketNet"  
@_subject: (cpx) secure web page ideas 
I have been slogging away with my own SSL browser trying to make it
crash less frequently (it actually crashes more often than Netscape).
Before I started on the latest round of changes I had managed to PGP
enable the browser (using my own implementation of PGP) with two web
linked functions:
a)  In the mailto:  Link a PGPKEY="ABCDE" field contains the PGP
public key of the recipient the program then encrypts the mail before
sending it.
b)  In forms using mailto a similar function acheives the same.
I have almost certainly broken the PGP implementation through all the
work I have been doing on the code recently although I think I should be
able to sort this relatively soon.
In other words:
It has been done (ish) see
(It also covers 128bit SSL)

@_date: 1996-06-16 09:57:07
@_author: "John Hemming - CEO MarketNet"  
@_subject: Proposal: PGPmail Plugin for Netscape/Mosaic 
The suggestion of building in PGP keys into web pages is something
that I have operated on  for around 10 months.
The program that incorporates this is
ftp://ftp.mkn.co.uk/mktnet/pub/horse.zip which is a PGP implementation
that is independent of PGP per se.

@_date: 1996-07-02 05:01:24
@_author: "John Hemming - CEO MarketNet"  
@_subject: MD5 breaks, etc. 
Accepting for a moment that MD5 collisions have been identified.  From
a commercial aspect I am concerned to ensure the cryptographic security
of our ECheque system.
Just a thought on the use of MD5.  If two signatures are appended to the
same document both using MD5, but one either
  a) Signing all but the last octet of the message  ... or
  b) Signing the whole of the message and signature.
Would that not make the determination of useable collisions either
impracticable or impossible?
I must admit I am inclined to encode additionally the key components
of the message (amount paid, to whom) as well as the hash using a
Private Key encryption.  After all we have at least 60 octets of important data that can be encoded in this manner using one
simple encryption sequence, this can cover account credited and amount easily.  If someone can collision codge the description I am
not desperately concerned.
Alternately, could someone please point me at the SHA algorithm.

@_date: 1996-08-29 23:24:38
@_author: "John Hemming - CEO MarketNet"  
@_subject: Hmmm MSIE V2.0 
It seems to be that MSIE V2.0 transmits its data in the clear once it has
transmitted the client hello and received the server hello SSL records
in some limited circumstance or other.
I don't know how widely this bug exists.  Neither do I know which versions
other than the French one has it.  However, if you point your version
of MSIE at
and it indicates that the client has encryption problems.
Then you have that problem as well.  I would watch this one.
Anyone feeling like tracing the packets will find it easier to crack than
2 bit SSL. (let alone 40 bit or 128 bit).
Any thoughts?

@_date: 1996-08-30 00:19:13
@_author: "John Hemming - CEO MarketNet"  
@_subject: MSIE cryptography 
Just downloaded the most recent English Version 2.1 for Windows 3.1.
This does appear to do the same in terms of no encryption at all after
the server hello.
To be fair to Microsoft the number of cycles performed for the private key
echange is quite high.  Therefore, not having any key and not doing the
RSA calculations makes the access quite a bit faster.
The older versions (and some Win95 versions) that we have found around
seem to just crash our server.  I am not really feeling like debugging that.

@_date: 1996-08-30 02:00:15
@_author: "John Hemming - CEO MarketNet"  
@_subject: Re: MSIE cryptography 
The server is one which interoperates correctly with Netscape and my
own routines.  It does strike me that this change is potentially the source of the bug.  However, to have a "locked" symbol on the bottom right hand
of the display would indicate to me as a user that a secure session has For SSL devotees the records sent are:
1.  Client hello (from the client)
2.  Server hello (from the server).
3.  Plaintext data packaged up in SSL records from the client.
4.  The client then accepts plaintext data packaged up in SSL records.
SERVER_VERSION_MSB and
SERVER_VERSION_LSB indicate version 2 of SSL.
I have not changed the code in any way to deal with version 3 of
SSL making I think the valid presumption that browsers using 3 and
2 should be able to cope with a server using 2.
I shall reboot my system, trace a bit of a session and post that.

@_date: 1996-08-30 02:14:30
@_author: "John Hemming - CEO MarketNet"  
@_subject: Re: MSIE cryptography 
For the real SSL devotees here are the first three transmissions.
Client Hello
  16.8 1025->443 seq 00000001 ack 00000001 PSH ACK  wind 4096 data 30
80 1C 01 00 02 00 03 00 00 00 10 02 00 80 69 AE
0E F0 FA 2E 01 63 BC 59 AF 0F 1C C1 B1 7B
  16.8 443->1025 seq 00000001 ack 0000001F PSH ACK  wind 5640 data 590
Server Hello
82 4C 04 00 01 00 02 02 2E 00 03 00 10 (cert starts) 30 82 02
2A 30 82 01 93 02 05 26 FB 85 54 3F 30 0D 06 09
big snip of server hello (of the certificate)
CC 1F BC A8 9C D7 47 41 D2 33 27 (cert has ended) 02 00 80 4A E7
13 36 E4 4B F9 BF 79 D2 75 2E 23 48 18 A5
  16.9 1025->443 seq 0000001F ack 0000024F PSH ACK  wind 4096 data 333
Client Master Key should be here, but instead we get
81 4B 47 45 54 20 2F 20 48 54 54 50 2F 31 2E 30
          G   E   T   sp  /  sp  H   T  T  P  /    1   .     0
0D 0A 41 63 63 65 70 74 3A 20 2A 2F 2A 2C 20 71
Server Hello
82 4C 04 00 01 00 02 02 2E 00 03 00 10 (cert starts) 30 82 02
82 4C - SSL RECORD 04 - Server Hello
00 - Session ID Hit (no prior session)
01 - Certificate Type
00 - Server Version MSB 02 - Server Verson LSB  (ie server version of SSL is 2)
02 2E - Certificate length (mainly snipped)
00 03 - Cipher specs length
00 10 - Connection ID length
I think the probability is that the unusual circumstance that causes
what seems clear to me as an error is that the cert is signed by
a CA other than Verisign.
Essentially, however, I do not think it is right for a program to display a
locked key regardless of any other issues if the data being transferred
is not encrypted.

@_date: 1996-08-30 07:10:50
@_author: "John Hemming - CEO MarketNet"  
@_subject: Re: MSIE cryptography 
Actually the server verify message should be encrypted (to verify the
key negotiation).  Also the server and client finished should be encrypted.
I don't actually get the client finished record or client master key record.
However, I don't get those all I get is the cleartext data in packets of
SSL record format.   I have done a little more experimentation and it does
appear quite clear that this happens with a non standard (ie not
Verisign and a few others) X509 Certificate.
In the trace that I have posted it is clear that cypher 02 00 80 has
in theory been negotiated.


@_date: 2013-10-23 17:09:11
@_author: Karsten Loesing 
@_subject: [tor-relays] Traceroute measurement from Tor relays 
Hash: SHA1
Hello Tor relay operators,
We could use your help in a pilot project to improve Tor security. As
you may be aware, the anonymity of a connection over Tor is vulnerable
to an adversary who can observe it in enough places along its route.
For example, traffic that crosses the same country as it enters and
leaves the Tor network can potentially be deanonymized by an authority
in that country who can monitor all network communication. Researchers
have been working to figure out how Tor traffic gets routed over the
Internet [0-3], but determining routes with high confidence has been
That's where you come in. To figure out where traffic travels from
your relay, we'd like you to run a bunch of "traceroutes" - network
measurements that show the paths traffic takes. This is a one-time
experiment for now, but, depending on what we find out, regularly
making such measurements may become a part of Tor itself. We have
already gotten some results thanks to Linus Nordberg of DFRI and
Moritz Bartl of
torservers.net, and now it's time to ask all relay operators to help.
We would like to start this right away.
We have written some shell scripts to automate most of the process.
The easiest way for you to get them is with git, using the following
  git clone   git checkout f253f768d14e3368e4fe4de9895acd2715a19412
You can also just download the files directly by visiting [4].
Detailed instructions for setting up and running the experiment are in
the README.
Basically the experiment does traceroutes to three groups: all
"routable IP prefixes", all Tor relays, and then all /24 subnets.
These kinds of measurements are not uncommon, and they will not be
done at a high rate. By default the scripts will periodically move the
results to our server [5] via SSH, although you can keep the results
around and/or not send them automatically if you wish (see the
README). The traceroute data recorded is not sensitive or private at
all. We plan to make the code and data public, following Tor's
practice of open cooperation with the research community [6].
The measurements will work best if you have the "scamper" tool from
the Cooperative Association for Internet Data Analysis (CAIDA)
installed (see the README for installation instructions). This is a
standard and open-source tool that handles the many modern
complexities of Internet routing measurement. If you are not able to
run scamper, the script will also work with the more-common but
less-accurate and slower "traceroute" utility. We do not currently
have support for Windows relays. The output will take up around 500KB
(110MB if you disable automatic removal after upload) disk space if
you use scamper; on the other hand if you use "traceroute" utility
each output will be around 4MB (1GB with automatic removal after
upload disabled). * *Depending on whether you run scamper or
traceroute the total time required varies but results for traceroutes
to "routable IP prefixes" and all Tor relays should finish within one
week (possibly earlier). We would like to request relay operators to
upload those results once finished.* *
This experiment is in collaboration with several researchers, but the
leads are Anupam Das, a Ph.D. student at the University of Illinois at
Urbana-Champaign, and his advisor Nikita Borisov. Based on a review of
the scripts of commit f253f768d14e3368e4fe4de9895acd2715a19412, we
believe that they operate as described above. Please do read through
them yourself, and let us know if you have any questions or concerns.
And also feel free to contact any of us for help or with suggestions.
Because of you, Tor is the "king" of anonymous communication.  With
your help, we will keep improving to face the new challenges to
privacy and freedom online.
Thank you,
Karsten Loesing Anupam Das Nikita Borisov [0] "Protecting anonymity in the presence of autonomous system and
internet exchange level adversaries" by Joshua Juen. Master's Thesis,
UIUC. 2012. [1] "Users Get Routed: Traffic Correlation on Tor by Realistic
Adversaries" by Aaron Johnson, Chris Wacek, Rob Jansen, Micah Sherr,
and Paul Syverson. ACM CCS 2013.
[2] "AS-awareness in Tor path selection" by Matthew Edman and Paul F.
Syverson. ACM CCS 2009.
[3] "Sampled Traffic Analysis by Internet-Exchange-Level Adversaries"
by Steven J. Murdoch and Piotr Zieliński. PETS 2007.
[4] [5] ttat-control.iti.illinois.edu
[6] tor-relays mailing list

@_date: 2013-10-30 14:03:01
@_author: Karsten Loesing 
@_subject: [tor-dev] Tech report: Evaluation of a libutp-based Tor Datagram 
Rob Jansen Hi tor devs,
Steven, Rob, and I wrote a tech report on evaluating Steven's libutp Tor
implementation in the public Tor network and using Chutney and Shadow:
Datagram designs are a promising approach to overcome Tor's
performance-related problems.  Advantages of datagram designs over
stream designs are that they allow better end-to-end congestion
management, reduce queue lengths on nodes, and prevent cell loss on one
circuit delaying cells on other circuits.  In earlier reports we
compared possible Tor datagram designs and outlined a testing plan.
In this report we evaluate our implementation of a libutp-based Tor
datagram design.  However, this evaluation does not focus on performance
improvements over the current stream-based Tor implementation, because
we found that our datagram-based Tor implementation is not mature enough
for such a comparison.  The focus is rather on our approach to integrate
a datagram design into the Tor source code and on setting up test
environments to evaluate the new design.  We hope that our findings will
be useful when further tweaking our libutp-based design or implementing
other datagram designs.
In the next section we describe our libutp-based Tor implementation in
sufficient detail for others to understand our source code and to act as
blueprint for implementing other datagram designs.  Sections 3 to 5
outline the experimental setup that we used to evaluate our
implementation and point out roadblocks that kept us busy longer than
necessary.  Section 6 concludes the report by sketching out possible
next steps.
As the introduction says, this report doesn't contain shiny performance
comparisons, because we kept hitting bugs and then ran out of time.  But
the report contains detailed instructions for experimenting with libutp
and Tor, and it has plenty of footnotes containing starting points and a
conclusion with suggested next steps.  In short, we had to stop when
things started to be fun.
Unfortunately, neither of us can work on this topic in the next two
months at the very least.  If anybody here wants to pick up this work
and comes up with bug fixes or even a performance comparison to current
Tor, please post your findings here!
All the best,
tor-dev mailing list

@_date: 2013-10-23 17:09:11
@_author: Karsten Loesing 
@_subject: [tor-relays] Traceroute measurement from Tor relays 
Hash: SHA1
Hello Tor relay operators,
We could use your help in a pilot project to improve Tor security. As
you may be aware, the anonymity of a connection over Tor is vulnerable
to an adversary who can observe it in enough places along its route.
For example, traffic that crosses the same country as it enters and
leaves the Tor network can potentially be deanonymized by an authority
in that country who can monitor all network communication. Researchers
have been working to figure out how Tor traffic gets routed over the
Internet [0-3], but determining routes with high confidence has been
That's where you come in. To figure out where traffic travels from
your relay, we'd like you to run a bunch of "traceroutes" - network
measurements that show the paths traffic takes. This is a one-time
experiment for now, but, depending on what we find out, regularly
making such measurements may become a part of Tor itself. We have
already gotten some results thanks to Linus Nordberg of DFRI and
Moritz Bartl of
torservers.net, and now it's time to ask all relay operators to help.
We would like to start this right away.
We have written some shell scripts to automate most of the process.
The easiest way for you to get them is with git, using the following
  git clone   git checkout f253f768d14e3368e4fe4de9895acd2715a19412
You can also just download the files directly by visiting [4].
Detailed instructions for setting up and running the experiment are in
the README.
Basically the experiment does traceroutes to three groups: all
"routable IP prefixes", all Tor relays, and then all /24 subnets.
These kinds of measurements are not uncommon, and they will not be
done at a high rate. By default the scripts will periodically move the
results to our server [5] via SSH, although you can keep the results
around and/or not send them automatically if you wish (see the
README). The traceroute data recorded is not sensitive or private at
all. We plan to make the code and data public, following Tor's
practice of open cooperation with the research community [6].
The measurements will work best if you have the "scamper" tool from
the Cooperative Association for Internet Data Analysis (CAIDA)
installed (see the README for installation instructions). This is a
standard and open-source tool that handles the many modern
complexities of Internet routing measurement. If you are not able to
run scamper, the script will also work with the more-common but
less-accurate and slower "traceroute" utility. We do not currently
have support for Windows relays. The output will take up around 500KB
(110MB if you disable automatic removal after upload) disk space if
you use scamper; on the other hand if you use "traceroute" utility
each output will be around 4MB (1GB with automatic removal after
upload disabled). * *Depending on whether you run scamper or
traceroute the total time required varies but results for traceroutes
to "routable IP prefixes" and all Tor relays should finish within one
week (possibly earlier). We would like to request relay operators to
upload those results once finished.* *
This experiment is in collaboration with several researchers, but the
leads are Anupam Das, a Ph.D. student at the University of Illinois at
Urbana-Champaign, and his advisor Nikita Borisov. Based on a review of
the scripts of commit f253f768d14e3368e4fe4de9895acd2715a19412, we
believe that they operate as described above. Please do read through
them yourself, and let us know if you have any questions or concerns.
And also feel free to contact any of us for help or with suggestions.
Because of you, Tor is the "king" of anonymous communication.  With
your help, we will keep improving to face the new challenges to
privacy and freedom online.
Thank you,
Karsten Loesing Anupam Das Nikita Borisov [0] "Protecting anonymity in the presence of autonomous system and
internet exchange level adversaries" by Joshua Juen. Master's Thesis,
UIUC. 2012. [1] "Users Get Routed: Traffic Correlation on Tor by Realistic
Adversaries" by Aaron Johnson, Chris Wacek, Rob Jansen, Micah Sherr,
and Paul Syverson. ACM CCS 2013.
[2] "AS-awareness in Tor path selection" by Matthew Edman and Paul F.
Syverson. ACM CCS 2009.
[3] "Sampled Traffic Analysis by Internet-Exchange-Level Adversaries"
by Steven J. Murdoch and Piotr Zieliński. PETS 2007.
[4] [5] ttat-control.iti.illinois.edu
[6] tor-relays mailing list
tor-relays at lists.torproject.org

@_date: 2013-10-30 14:03:01
@_author: Karsten Loesing 
@_subject: [tor-dev] Tech report: Evaluation of a libutp-based Tor Datagram 
Rob Jansen Hi tor devs,
Steven, Rob, and I wrote a tech report on evaluating Steven's libutp Tor
implementation in the public Tor network and using Chutney and Shadow:
Datagram designs are a promising approach to overcome Tor's
performance-related problems.  Advantages of datagram designs over
stream designs are that they allow better end-to-end congestion
management, reduce queue lengths on nodes, and prevent cell loss on one
circuit delaying cells on other circuits.  In earlier reports we
compared possible Tor datagram designs and outlined a testing plan.
In this report we evaluate our implementation of a libutp-based Tor
datagram design.  However, this evaluation does not focus on performance
improvements over the current stream-based Tor implementation, because
we found that our datagram-based Tor implementation is not mature enough
for such a comparison.  The focus is rather on our approach to integrate
a datagram design into the Tor source code and on setting up test
environments to evaluate the new design.  We hope that our findings will
be useful when further tweaking our libutp-based design or implementing
other datagram designs.
In the next section we describe our libutp-based Tor implementation in
sufficient detail for others to understand our source code and to act as
blueprint for implementing other datagram designs.  Sections 3 to 5
outline the experimental setup that we used to evaluate our
implementation and point out roadblocks that kept us busy longer than
necessary.  Section 6 concludes the report by sketching out possible
next steps.
As the introduction says, this report doesn't contain shiny performance
comparisons, because we kept hitting bugs and then ran out of time.  But
the report contains detailed instructions for experimenting with libutp
and Tor, and it has plenty of footnotes containing starting points and a
conclusion with suggested next steps.  In short, we had to stop when
things started to be fun.
Unfortunately, neither of us can work on this topic in the next two
months at the very least.  If anybody here wants to pick up this work
and comes up with bug fixes or even a performance comparison to current
Tor, please post your findings here!
All the best,
tor-dev mailing list
tor-dev at lists.torproject.org

@_date: 2013-10-23 17:09:11
@_author: Karsten Loesing 
@_subject: [tor-relays] Traceroute measurement from Tor relays 
Hash: SHA1
Hello Tor relay operators,
We could use your help in a pilot project to improve Tor security. As
you may be aware, the anonymity of a connection over Tor is vulnerable
to an adversary who can observe it in enough places along its route.
For example, traffic that crosses the same country as it enters and
leaves the Tor network can potentially be deanonymized by an authority
in that country who can monitor all network communication. Researchers
have been working to figure out how Tor traffic gets routed over the
Internet [0-3], but determining routes with high confidence has been
That's where you come in. To figure out where traffic travels from
your relay, we'd like you to run a bunch of "traceroutes" - network
measurements that show the paths traffic takes. This is a one-time
experiment for now, but, depending on what we find out, regularly
making such measurements may become a part of Tor itself. We have
already gotten some results thanks to Linus Nordberg of DFRI and
Moritz Bartl of
torservers.net, and now it's time to ask all relay operators to help.
We would like to start this right away.
We have written some shell scripts to automate most of the process.
The easiest way for you to get them is with git, using the following
  git clone   git checkout f253f768d14e3368e4fe4de9895acd2715a19412
You can also just download the files directly by visiting [4].
Detailed instructions for setting up and running the experiment are in
the README.
Basically the experiment does traceroutes to three groups: all
"routable IP prefixes", all Tor relays, and then all /24 subnets.
These kinds of measurements are not uncommon, and they will not be
done at a high rate. By default the scripts will periodically move the
results to our server [5] via SSH, although you can keep the results
around and/or not send them automatically if you wish (see the
README). The traceroute data recorded is not sensitive or private at
all. We plan to make the code and data public, following Tor's
practice of open cooperation with the research community [6].
The measurements will work best if you have the "scamper" tool from
the Cooperative Association for Internet Data Analysis (CAIDA)
installed (see the README for installation instructions). This is a
standard and open-source tool that handles the many modern
complexities of Internet routing measurement. If you are not able to
run scamper, the script will also work with the more-common but
less-accurate and slower "traceroute" utility. We do not currently
have support for Windows relays. The output will take up around 500KB
(110MB if you disable automatic removal after upload) disk space if
you use scamper; on the other hand if you use "traceroute" utility
each output will be around 4MB (1GB with automatic removal after
upload disabled). * *Depending on whether you run scamper or
traceroute the total time required varies but results for traceroutes
to "routable IP prefixes" and all Tor relays should finish within one
week (possibly earlier). We would like to request relay operators to
upload those results once finished.* *
This experiment is in collaboration with several researchers, but the
leads are Anupam Das, a Ph.D. student at the University of Illinois at
Urbana-Champaign, and his advisor Nikita Borisov. Based on a review of
the scripts of commit f253f768d14e3368e4fe4de9895acd2715a19412, we
believe that they operate as described above. Please do read through
them yourself, and let us know if you have any questions or concerns.
And also feel free to contact any of us for help or with suggestions.
Because of you, Tor is the "king" of anonymous communication.  With
your help, we will keep improving to face the new challenges to
privacy and freedom online.
Thank you,
Karsten Loesing Anupam Das Nikita Borisov [0] "Protecting anonymity in the presence of autonomous system and
internet exchange level adversaries" by Joshua Juen. Master's Thesis,
UIUC. 2012. [1] "Users Get Routed: Traffic Correlation on Tor by Realistic
Adversaries" by Aaron Johnson, Chris Wacek, Rob Jansen, Micah Sherr,
and Paul Syverson. ACM CCS 2013.
[2] "AS-awareness in Tor path selection" by Matthew Edman and Paul F.
Syverson. ACM CCS 2009.
[3] "Sampled Traffic Analysis by Internet-Exchange-Level Adversaries"
by Steven J. Murdoch and Piotr Zieliński. PETS 2007.
[4] [5] ttat-control.iti.illinois.edu
[6] tor-relays mailing list
tor-relays at lists.torproject.org

@_date: 2013-10-30 14:03:01
@_author: Karsten Loesing 
@_subject: [tor-dev] Tech report: Evaluation of a libutp-based Tor Datagram 
Hi tor devs,
Steven, Rob, and I wrote a tech report on evaluating Steven's libutp Tor
implementation in the public Tor network and using Chutney and Shadow:
Datagram designs are a promising approach to overcome Tor's
performance-related problems.  Advantages of datagram designs over
stream designs are that they allow better end-to-end congestion
management, reduce queue lengths on nodes, and prevent cell loss on one
circuit delaying cells on other circuits.  In earlier reports we
compared possible Tor datagram designs and outlined a testing plan.
In this report we evaluate our implementation of a libutp-based Tor
datagram design.  However, this evaluation does not focus on performance
improvements over the current stream-based Tor implementation, because
we found that our datagram-based Tor implementation is not mature enough
for such a comparison.  The focus is rather on our approach to integrate
a datagram design into the Tor source code and on setting up test
environments to evaluate the new design.  We hope that our findings will
be useful when further tweaking our libutp-based design or implementing
other datagram designs.
In the next section we describe our libutp-based Tor implementation in
sufficient detail for others to understand our source code and to act as
blueprint for implementing other datagram designs.  Sections 3 to 5
outline the experimental setup that we used to evaluate our
implementation and point out roadblocks that kept us busy longer than
necessary.  Section 6 concludes the report by sketching out possible
next steps.
As the introduction says, this report doesn't contain shiny performance
comparisons, because we kept hitting bugs and then ran out of time.  But
the report contains detailed instructions for experimenting with libutp
and Tor, and it has plenty of footnotes containing starting points and a
conclusion with suggested next steps.  In short, we had to stop when
things started to be fun.
Unfortunately, neither of us can work on this topic in the next two
months at the very least.  If anybody here wants to pick up this work
and comes up with bug fixes or even a performance comparison to current
Tor, please post your findings here!
All the best,
tor-dev mailing list
tor-dev at lists.torproject.org

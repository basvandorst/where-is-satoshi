
@_date: 1996-03-07 07:22:16
@_author: owner-cypherpunks at toad.com 
@_subject: No Subject 
This works with procmail to get keys for all mail I receive.  I
discovered the problem is your keyrings get unmanageably large when
you do this.
# auto key retreival
# I have an elm alias, pgp, points to a keyserver
* -----BEGIN PGP
:0 ahc	# added h 8 jan 95
* ! ^X-Loop: Adams akr
# add the incoming keys to the ring
* From bal at swissnet.ai.mit.edu
   # if we accidentally get the whole thing.
   :0 h
   * >10000
   /dev/null
   :0 h
   *^Subject:.*no keys match
   /dev/null
   :0:
   *Subject: Your command, ADD
   $DEFAULT
   :0E
 pgp +batchmode -fka
# unknown returns a keyid, exits 1 if the key is known
# $output is to get the exit status. Othierwise, this would be a one
OUTPUT=`pgp -f +VERBOSE=0 +batchmode  -o /dev/null`
echo $OUTPUT | egrep -s 'not found in file'
EV=$? if [ $EV -eq 0 ]; then         echo $OUTPUT | awk '{print $6}' exit $EV
